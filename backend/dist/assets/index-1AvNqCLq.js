(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))s(p);new MutationObserver(p=>{for(const b of p)if(b.type==="childList")for(const S of b.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&s(S)}).observe(document,{childList:!0,subtree:!0});function r(p){const b={};return p.integrity&&(b.integrity=p.integrity),p.referrerPolicy&&(b.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?b.credentials="include":p.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function s(p){if(p.ep)return;p.ep=!0;const b=r(p);fetch(p.href,b)}})();function tm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kk(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var p=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,p.get?p:{enumerable:!0,get:function(){return e[s]}})}),r}var Mh={exports:{}},to={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q0;function jk(){if(Q0)return to;Q0=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,p,b){var S=null;if(b!==void 0&&(S=""+b),p.key!==void 0&&(S=""+p.key),"key"in p){b={};for(var d in p)d!=="key"&&(b[d]=p[d])}else b=p;return p=b.ref,{$$typeof:e,type:s,key:S,ref:p!==void 0?p:null,props:b}}return to.Fragment=t,to.jsx=r,to.jsxs=r,to}var J0;function Tk(){return J0||(J0=1,Mh.exports=jk()),Mh.exports}var h=Tk(),Eh={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function _k(){if(ey)return Ge;ey=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),o=Symbol.iterator;function c(O){return O===null||typeof O!="object"?null:(O=o&&O[o]||O["@@iterator"],typeof O=="function"?O:null)}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function x(O,L,I){this.props=O,this.context=L,this.refs=y,this.updater=I||u}x.prototype.isReactComponent={},x.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=x.prototype;function C(O,L,I){this.props=O,this.context=L,this.refs=y,this.updater=I||u}var j=C.prototype=new w;j.constructor=C,g(j,x.prototype),j.isPureReactComponent=!0;var T=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function A(O,L,I,G,B,z){return I=z.ref,{$$typeof:e,type:O,key:L,ref:I!==void 0?I:null,props:z}}function R(O,L){return A(O.type,L,void 0,void 0,void 0,O.props)}function H(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function K(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(I){return L[I]})}var X=/\/+/g;function ne(O,L){return typeof O=="object"&&O!==null&&O.key!=null?K(""+O.key):L.toString(36)}function de(){}function se(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(de,de):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function q(O,L,I,G,B){var z=typeof O;(z==="undefined"||z==="boolean")&&(O=null);var te=!1;if(O===null)te=!0;else switch(z){case"bigint":case"string":case"number":te=!0;break;case"object":switch(O.$$typeof){case e:case t:te=!0;break;case f:return te=O._init,q(te(O._payload),L,I,G,B)}}if(te)return B=B(O),te=G===""?"."+ne(O,0):G,T(B)?(I="",te!=null&&(I=te.replace(X,"$&/")+"/"),q(B,L,I,"",function(le){return le})):B!=null&&(H(B)&&(B=R(B,I+(B.key==null||O&&O.key===B.key?"":(""+B.key).replace(X,"$&/")+"/")+te)),L.push(B)),1;te=0;var Q=G===""?".":G+":";if(T(O))for(var ue=0;ue<O.length;ue++)G=O[ue],z=Q+ne(G,ue),te+=q(G,L,I,z,B);else if(ue=c(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(G=O.next()).done;)G=G.value,z=Q+ne(G,ue++),te+=q(G,L,I,z,B);else if(z==="object"){if(typeof O.then=="function")return q(se(O),L,I,G,B);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return te}function P(O,L,I){if(O==null)return O;var G=[],B=0;return q(O,G,"","",function(z){return L.call(I,z,B++)}),G}function $(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(I){(O._status===0||O._status===-1)&&(O._status=1,O._result=I)},function(I){(O._status===0||O._status===-1)&&(O._status=2,O._result=I)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var V=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function D(){}return Ge.Children={map:P,forEach:function(O,L,I){P(O,function(){L.apply(this,arguments)},I)},count:function(O){var L=0;return P(O,function(){L++}),L},toArray:function(O){return P(O,function(L){return L})||[]},only:function(O){if(!H(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ge.Component=x,Ge.Fragment=r,Ge.Profiler=p,Ge.PureComponent=C,Ge.StrictMode=s,Ge.Suspense=a,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Ge.cache=function(O){return function(){return O.apply(null,arguments)}},Ge.cloneElement=function(O,L,I){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var G=g({},O.props),B=O.key,z=void 0;if(L!=null)for(te in L.ref!==void 0&&(z=void 0),L.key!==void 0&&(B=""+L.key),L)!E.call(L,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&L.ref===void 0||(G[te]=L[te]);var te=arguments.length-2;if(te===1)G.children=I;else if(1<te){for(var Q=Array(te),ue=0;ue<te;ue++)Q[ue]=arguments[ue+2];G.children=Q}return A(O.type,B,void 0,void 0,z,G)},Ge.createContext=function(O){return O={$$typeof:S,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:b,_context:O},O},Ge.createElement=function(O,L,I){var G,B={},z=null;if(L!=null)for(G in L.key!==void 0&&(z=""+L.key),L)E.call(L,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(B[G]=L[G]);var te=arguments.length-2;if(te===1)B.children=I;else if(1<te){for(var Q=Array(te),ue=0;ue<te;ue++)Q[ue]=arguments[ue+2];B.children=Q}if(O&&O.defaultProps)for(G in te=O.defaultProps,te)B[G]===void 0&&(B[G]=te[G]);return A(O,z,void 0,void 0,null,B)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(O){return{$$typeof:d,render:O}},Ge.isValidElement=H,Ge.lazy=function(O){return{$$typeof:f,_payload:{_status:-1,_result:O},_init:$}},Ge.memo=function(O,L){return{$$typeof:l,type:O,compare:L===void 0?null:L}},Ge.startTransition=function(O){var L=M.T,I={};M.T=I;try{var G=O(),B=M.S;B!==null&&B(I,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(D,V)}catch(z){V(z)}finally{M.T=L}},Ge.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ge.use=function(O){return M.H.use(O)},Ge.useActionState=function(O,L,I){return M.H.useActionState(O,L,I)},Ge.useCallback=function(O,L){return M.H.useCallback(O,L)},Ge.useContext=function(O){return M.H.useContext(O)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(O,L){return M.H.useDeferredValue(O,L)},Ge.useEffect=function(O,L,I){var G=M.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(O,L)},Ge.useId=function(){return M.H.useId()},Ge.useImperativeHandle=function(O,L,I){return M.H.useImperativeHandle(O,L,I)},Ge.useInsertionEffect=function(O,L){return M.H.useInsertionEffect(O,L)},Ge.useLayoutEffect=function(O,L){return M.H.useLayoutEffect(O,L)},Ge.useMemo=function(O,L){return M.H.useMemo(O,L)},Ge.useOptimistic=function(O,L){return M.H.useOptimistic(O,L)},Ge.useReducer=function(O,L,I){return M.H.useReducer(O,L,I)},Ge.useRef=function(O){return M.H.useRef(O)},Ge.useState=function(O){return M.H.useState(O)},Ge.useSyncExternalStore=function(O,L,I){return M.H.useSyncExternalStore(O,L,I)},Ge.useTransition=function(){return M.H.useTransition()},Ge.version="19.1.0",Ge}var ty;function nm(){return ty||(ty=1,Eh.exports=_k()),Eh.exports}var N=nm();const Le=tm(N);var Oh={exports:{}},no={},Dh={exports:{}},Ah={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function Nk(){return ny||(ny=1,function(e){function t(P,$){var V=P.length;P.push($);e:for(;0<V;){var D=V-1>>>1,O=P[D];if(0<p(O,$))P[D]=$,P[V]=O,V=D;else break e}}function r(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var $=P[0],V=P.pop();if(V!==$){P[0]=V;e:for(var D=0,O=P.length,L=O>>>1;D<L;){var I=2*(D+1)-1,G=P[I],B=I+1,z=P[B];if(0>p(G,V))B<O&&0>p(z,G)?(P[D]=z,P[B]=V,D=B):(P[D]=G,P[I]=V,D=I);else if(B<O&&0>p(z,V))P[D]=z,P[B]=V,D=B;else break e}}return $}function p(P,$){var V=P.sortIndex-$.sortIndex;return V!==0?V:P.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;e.unstable_now=function(){return b.now()}}else{var S=Date,d=S.now();e.unstable_now=function(){return S.now()-d}}var a=[],l=[],f=1,o=null,c=3,u=!1,g=!1,y=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function T(P){for(var $=r(l);$!==null;){if($.callback===null)s(l);else if($.startTime<=P)s(l),$.sortIndex=$.expirationTime,t(a,$);else break;$=r(l)}}function M(P){if(y=!1,T(P),!g)if(r(a)!==null)g=!0,E||(E=!0,ne());else{var $=r(l);$!==null&&q(M,$.startTime-P)}}var E=!1,A=-1,R=5,H=-1;function K(){return x?!0:!(e.unstable_now()-H<R)}function X(){if(x=!1,E){var P=e.unstable_now();H=P;var $=!0;try{e:{g=!1,y&&(y=!1,C(A),A=-1),u=!0;var V=c;try{t:{for(T(P),o=r(a);o!==null&&!(o.expirationTime>P&&K());){var D=o.callback;if(typeof D=="function"){o.callback=null,c=o.priorityLevel;var O=D(o.expirationTime<=P);if(P=e.unstable_now(),typeof O=="function"){o.callback=O,T(P),$=!0;break t}o===r(a)&&s(a),T(P)}else s(a);o=r(a)}if(o!==null)$=!0;else{var L=r(l);L!==null&&q(M,L.startTime-P),$=!1}}break e}finally{o=null,c=V,u=!1}$=void 0}}finally{$?ne():E=!1}}}var ne;if(typeof j=="function")ne=function(){j(X)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,se=de.port2;de.port1.onmessage=X,ne=function(){se.postMessage(null)}}else ne=function(){w(X,0)};function q(P,$){A=w(function(){P(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_next=function(P){switch(c){case 1:case 2:case 3:var $=3;break;default:$=c}var V=c;c=$;try{return P()}finally{c=V}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(P,$){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=c;c=P;try{return $()}finally{c=V}},e.unstable_scheduleCallback=function(P,$,V){var D=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?D+V:D):V=D,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=V+O,P={id:f++,callback:$,priorityLevel:P,startTime:V,expirationTime:O,sortIndex:-1},V>D?(P.sortIndex=V,t(l,P),r(a)===null&&P===r(l)&&(y?(C(A),A=-1):y=!0,q(M,V-D))):(P.sortIndex=O,t(a,P),g||u||(g=!0,E||(E=!0,ne()))),P},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(P){var $=c;return function(){var V=c;c=$;try{return P.apply(this,arguments)}finally{c=V}}}}(Ah)),Ah}var iy;function Mk(){return iy||(iy=1,Dh.exports=Nk()),Dh.exports}var Rh={exports:{}},Qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function Ek(){if(ry)return Qt;ry=1;var e=nm();function t(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},p=Symbol.for("react.portal");function b(a,l,f){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:o==null?null:""+o,children:a,containerInfo:l,implementation:f}}var S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(a,l){if(a==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Qt.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(t(299));return b(a,l,null,f)},Qt.flushSync=function(a){var l=S.T,f=s.p;try{if(S.T=null,s.p=2,a)return a()}finally{S.T=l,s.p=f,s.d.f()}},Qt.preconnect=function(a,l){typeof a=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,s.d.C(a,l))},Qt.prefetchDNS=function(a){typeof a=="string"&&s.d.D(a)},Qt.preinit=function(a,l){if(typeof a=="string"&&l&&typeof l.as=="string"){var f=l.as,o=d(f,l.crossOrigin),c=typeof l.integrity=="string"?l.integrity:void 0,u=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;f==="style"?s.d.S(a,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:o,integrity:c,fetchPriority:u}):f==="script"&&s.d.X(a,{crossOrigin:o,integrity:c,fetchPriority:u,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},Qt.preinitModule=function(a,l){if(typeof a=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var f=d(l.as,l.crossOrigin);s.d.M(a,{crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&s.d.M(a)},Qt.preload=function(a,l){if(typeof a=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var f=l.as,o=d(f,l.crossOrigin);s.d.L(a,f,{crossOrigin:o,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},Qt.preloadModule=function(a,l){if(typeof a=="string")if(l){var f=d(l.as,l.crossOrigin);s.d.m(a,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:f,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else s.d.m(a)},Qt.requestFormReset=function(a){s.d.r(a)},Qt.unstable_batchedUpdates=function(a,l){return a(l)},Qt.useFormState=function(a,l,f){return S.H.useFormState(a,l,f)},Qt.useFormStatus=function(){return S.H.useHostTransitionStatus()},Qt.version="19.1.0",Qt}var sy;function Ok(){if(sy)return Rh.exports;sy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Rh.exports=Ek(),Rh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function Dk(){if(ay)return no;ay=1;var e=Mk(),t=nm(),r=Ok();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)i+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function b(n){var i=n,m=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(m=i.return),n=i.return;while(n)}return i.tag===3?m:null}function S(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(b(n)!==n)throw Error(s(188))}function a(n){var i=n.alternate;if(!i){if(i=b(n),i===null)throw Error(s(188));return i!==n?null:n}for(var m=n,v=i;;){var k=m.return;if(k===null)break;var _=k.alternate;if(_===null){if(v=k.return,v!==null){m=v;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===m)return d(k),n;if(_===v)return d(k),i;_=_.sibling}throw Error(s(188))}if(m.return!==v.return)m=k,v=_;else{for(var F=!1,U=k.child;U;){if(U===m){F=!0,m=k,v=_;break}if(U===v){F=!0,v=k,m=_;break}U=U.sibling}if(!F){for(U=_.child;U;){if(U===m){F=!0,m=_,v=k;break}if(U===v){F=!0,v=_,m=k;break}U=U.sibling}if(!F)throw Error(s(189))}}if(m.alternate!==v)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?n:i}function l(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=l(n),i!==null)return i;n=n.sibling}return null}var f=Object.assign,o=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),j=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var de=Symbol.for("react.client.reference");function se(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===de?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case g:return"Fragment";case x:return"Profiler";case y:return"StrictMode";case M:return"Suspense";case E:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case u:return"Portal";case j:return(n.displayName||"Context")+".Provider";case C:return(n._context.displayName||"Context")+".Consumer";case T:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:se(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return se(n(i))}catch{}}return null}var q=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},D=[],O=-1;function L(n){return{current:n}}function I(n){0>O||(n.current=D[O],D[O]=null,O--)}function G(n,i){O++,D[O]=n.current,n.current=i}var B=L(null),z=L(null),te=L(null),Q=L(null);function ue(n,i){switch(G(te,i),G(z,n),G(B,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?T0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=T0(i),n=_0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}I(B),G(B,n)}function le(){I(B),I(z),I(te)}function ie(n){n.memoizedState!==null&&G(Q,n);var i=B.current,m=_0(i,n.type);i!==m&&(G(z,n),G(B,m))}function Z(n){z.current===n&&(I(B),I(z)),Q.current===n&&(I(Q),Ka._currentValue=V)}var fe=Object.prototype.hasOwnProperty,ae=e.unstable_scheduleCallback,ce=e.unstable_cancelCallback,me=e.unstable_shouldYield,be=e.unstable_requestPaint,W=e.unstable_now,re=e.unstable_getCurrentPriorityLevel,ge=e.unstable_ImmediatePriority,Y=e.unstable_UserBlockingPriority,ee=e.unstable_NormalPriority,J=e.unstable_LowPriority,xe=e.unstable_IdlePriority,Ce=e.log,ke=e.unstable_setDisableYieldValue,Ne=null,Oe=null;function ze(n){if(typeof Ce=="function"&&ke(n),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Ne,n)}catch{}}var $e=Math.clz32?Math.clz32:Wt,Ht=Math.log,zt=Math.LN2;function Wt(n){return n>>>=0,n===0?32:31-(Ht(n)/zt|0)|0}var Yn=256,Pn=4194304;function Ln(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ci(n,i,m){var v=n.pendingLanes;if(v===0)return 0;var k=0,_=n.suspendedLanes,F=n.pingedLanes;n=n.warmLanes;var U=v&134217727;return U!==0?(v=U&~_,v!==0?k=Ln(v):(F&=U,F!==0?k=Ln(F):m||(m=U&~n,m!==0&&(k=Ln(m))))):(U=v&~_,U!==0?k=Ln(U):F!==0?k=Ln(F):m||(m=v&~n,m!==0&&(k=Ln(m)))),k===0?0:i!==0&&i!==k&&(i&_)===0&&(_=k&-k,m=i&-i,_>=m||_===32&&(m&4194048)!==0)?i:k}function gr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function tl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cg(){var n=Yn;return Yn<<=1,(Yn&4194048)===0&&(Yn=256),n}function ug(){var n=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),n}function yu(n){for(var i=[],m=0;31>m;m++)i.push(n);return i}function aa(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function h2(n,i,m,v,k,_){var F=n.pendingLanes;n.pendingLanes=m,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=m,n.entangledLanes&=m,n.errorRecoveryDisabledLanes&=m,n.shellSuspendCounter=0;var U=n.entanglements,oe=n.expirationTimes,ve=n.hiddenUpdates;for(m=F&~m;0<m;){var je=31-$e(m),_e=1<<je;U[je]=0,oe[je]=-1;var we=ve[je];if(we!==null)for(ve[je]=null,je=0;je<we.length;je++){var Se=we[je];Se!==null&&(Se.lane&=-536870913)}m&=~_e}v!==0&&dg(n,v,0),_!==0&&k===0&&n.tag!==0&&(n.suspendedLanes|=_&~(F&~i))}function dg(n,i,m){n.pendingLanes|=i,n.suspendedLanes&=~i;var v=31-$e(i);n.entangledLanes|=i,n.entanglements[v]=n.entanglements[v]|1073741824|m&4194090}function hg(n,i){var m=n.entangledLanes|=i;for(n=n.entanglements;m;){var v=31-$e(m),k=1<<v;k&i|n[v]&i&&(n[v]|=i),m&=~k}}function bu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function vu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function fg(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:Y0(n.type))}function f2(n,i){var m=$.p;try{return $.p=n,i()}finally{$.p=m}}var Li=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Li,sn="__reactProps$"+Li,Wr="__reactContainer$"+Li,wu="__reactEvents$"+Li,m2="__reactListeners$"+Li,g2="__reactHandles$"+Li,mg="__reactResources$"+Li,oa="__reactMarker$"+Li;function Su(n){delete n[Kt],delete n[sn],delete n[wu],delete n[m2],delete n[g2]}function Kr(n){var i=n[Kt];if(i)return i;for(var m=n.parentNode;m;){if(i=m[Wr]||m[Kt]){if(m=i.alternate,i.child!==null||m!==null&&m.child!==null)for(n=O0(n);n!==null;){if(m=n[Kt])return m;n=O0(n)}return i}n=m,m=n.parentNode}return null}function Zr(n){if(n=n[Kt]||n[Wr]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function la(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Qr(n){var i=n[mg];return i||(i=n[mg]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(n){n[oa]=!0}var gg=new Set,pg={};function pr(n,i){Jr(n,i),Jr(n+"Capture",i)}function Jr(n,i){for(pg[n]=i,n=0;n<i.length;n++)gg.add(i[n])}var p2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xg={},yg={};function x2(n){return fe.call(yg,n)?!0:fe.call(xg,n)?!1:p2.test(n)?yg[n]=!0:(xg[n]=!0,!1)}function nl(n,i,m){if(x2(i))if(m===null)n.removeAttribute(i);else{switch(typeof m){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var v=i.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+m)}}function il(n,i,m){if(m===null)n.removeAttribute(i);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+m)}}function ui(n,i,m,v){if(v===null)n.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(m);return}n.setAttributeNS(i,m,""+v)}}var Cu,bg;function es(n){if(Cu===void 0)try{throw Error()}catch(m){var i=m.stack.trim().match(/\n( *(at )?)/);Cu=i&&i[1]||"",bg=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cu+n+bg}var ku=!1;function ju(n,i){if(!n||ku)return"";ku=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(i){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(Se){var we=Se}Reflect.construct(n,[],_e)}else{try{_e.call()}catch(Se){we=Se}n.call(_e.prototype)}}else{try{throw Error()}catch(Se){we=Se}(_e=n())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(Se){if(Se&&we&&typeof Se.stack=="string")return[Se.stack,we.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=v.DetermineComponentFrameRoot(),F=_[0],U=_[1];if(F&&U){var oe=F.split(`
`),ve=U.split(`
`);for(k=v=0;v<oe.length&&!oe[v].includes("DetermineComponentFrameRoot");)v++;for(;k<ve.length&&!ve[k].includes("DetermineComponentFrameRoot");)k++;if(v===oe.length||k===ve.length)for(v=oe.length-1,k=ve.length-1;1<=v&&0<=k&&oe[v]!==ve[k];)k--;for(;1<=v&&0<=k;v--,k--)if(oe[v]!==ve[k]){if(v!==1||k!==1)do if(v--,k--,0>k||oe[v]!==ve[k]){var je=`
`+oe[v].replace(" at new "," at ");return n.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",n.displayName)),je}while(1<=v&&0<=k);break}}}finally{ku=!1,Error.prepareStackTrace=m}return(m=n?n.displayName||n.name:"")?es(m):""}function y2(n){switch(n.tag){case 26:case 27:case 5:return es(n.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return ju(n.type,!1);case 11:return ju(n.type.render,!1);case 1:return ju(n.type,!0);case 31:return es("Activity");default:return""}}function vg(n){try{var i="";do i+=y2(n),n=n.return;while(n);return i}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Sn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function wg(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function b2(n){var i=wg(n)?"checked":"value",m=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),v=""+n[i];if(!n.hasOwnProperty(i)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var k=m.get,_=m.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return k.call(this)},set:function(F){v=""+F,_.call(this,F)}}),Object.defineProperty(n,i,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(F){v=""+F},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function rl(n){n._valueTracker||(n._valueTracker=b2(n))}function Sg(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var m=i.getValue(),v="";return n&&(v=wg(n)?n.checked?"true":"false":n.value),n=v,n!==m?(i.setValue(n),!0):!1}function sl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var v2=/[\n"\\]/g;function Cn(n){return n.replace(v2,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Tu(n,i,m,v,k,_,F,U){n.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?n.type=F:n.removeAttribute("type"),i!=null?F==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Sn(i)):n.value!==""+Sn(i)&&(n.value=""+Sn(i)):F!=="submit"&&F!=="reset"||n.removeAttribute("value"),i!=null?_u(n,F,Sn(i)):m!=null?_u(n,F,Sn(m)):v!=null&&n.removeAttribute("value"),k==null&&_!=null&&(n.defaultChecked=!!_),k!=null&&(n.checked=k&&typeof k!="function"&&typeof k!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+Sn(U):n.removeAttribute("name")}function Cg(n,i,m,v,k,_,F,U){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),i!=null||m!=null){if(!(_!=="submit"&&_!=="reset"||i!=null))return;m=m!=null?""+Sn(m):"",i=i!=null?""+Sn(i):m,U||i===n.value||(n.value=i),n.defaultValue=i}v=v??k,v=typeof v!="function"&&typeof v!="symbol"&&!!v,n.checked=U?n.checked:!!v,n.defaultChecked=!!v,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(n.name=F)}function _u(n,i,m){i==="number"&&sl(n.ownerDocument)===n||n.defaultValue===""+m||(n.defaultValue=""+m)}function ts(n,i,m,v){if(n=n.options,i){i={};for(var k=0;k<m.length;k++)i["$"+m[k]]=!0;for(m=0;m<n.length;m++)k=i.hasOwnProperty("$"+n[m].value),n[m].selected!==k&&(n[m].selected=k),k&&v&&(n[m].defaultSelected=!0)}else{for(m=""+Sn(m),i=null,k=0;k<n.length;k++){if(n[k].value===m){n[k].selected=!0,v&&(n[k].defaultSelected=!0);return}i!==null||n[k].disabled||(i=n[k])}i!==null&&(i.selected=!0)}}function kg(n,i,m){if(i!=null&&(i=""+Sn(i),i!==n.value&&(n.value=i),m==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=m!=null?""+Sn(m):""}function jg(n,i,m,v){if(i==null){if(v!=null){if(m!=null)throw Error(s(92));if(q(v)){if(1<v.length)throw Error(s(93));v=v[0]}m=v}m==null&&(m=""),i=m}m=Sn(i),n.defaultValue=m,v=n.textContent,v===m&&v!==""&&v!==null&&(n.value=v)}function ns(n,i){if(i){var m=n.firstChild;if(m&&m===n.lastChild&&m.nodeType===3){m.nodeValue=i;return}}n.textContent=i}var w2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tg(n,i,m){var v=i.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":v?n.setProperty(i,m):typeof m!="number"||m===0||w2.has(i)?i==="float"?n.cssFloat=m:n[i]=(""+m).trim():n[i]=m+"px"}function _g(n,i,m){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||i!=null&&i.hasOwnProperty(v)||(v.indexOf("--")===0?n.setProperty(v,""):v==="float"?n.cssFloat="":n[v]="");for(var k in i)v=i[k],i.hasOwnProperty(k)&&m[k]!==v&&Tg(n,k,v)}else for(var _ in i)i.hasOwnProperty(_)&&Tg(n,_,i[_])}function Nu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var S2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),C2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(n){return C2.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Mu=null;function Eu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var is=null,rs=null;function Ng(n){var i=Zr(n);if(i&&(n=i.stateNode)){var m=n[sn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Tu(n,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),i=m.name,m.type==="radio"&&i!=null){for(m=n;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Cn(""+i)+'"][type="radio"]'),i=0;i<m.length;i++){var v=m[i];if(v!==n&&v.form===n.form){var k=v[sn]||null;if(!k)throw Error(s(90));Tu(v,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(i=0;i<m.length;i++)v=m[i],v.form===n.form&&Sg(v)}break e;case"textarea":kg(n,m.value,m.defaultValue);break e;case"select":i=m.value,i!=null&&ts(n,!!m.multiple,i,!1)}}}var Ou=!1;function Mg(n,i,m){if(Ou)return n(i,m);Ou=!0;try{var v=n(i);return v}finally{if(Ou=!1,(is!==null||rs!==null)&&(Xl(),is&&(i=is,n=rs,rs=is=null,Ng(i),n)))for(i=0;i<n.length;i++)Ng(n[i])}}function ca(n,i){var m=n.stateNode;if(m===null)return null;var v=m[sn]||null;if(v===null)return null;m=v[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(n=n.type,v=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!v;break e;default:n=!1}if(n)return null;if(m&&typeof m!="function")throw Error(s(231,i,typeof m));return m}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=!1;if(di)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){Du=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{Du=!1}var Fi=null,Au=null,ol=null;function Eg(){if(ol)return ol;var n,i=Au,m=i.length,v,k="value"in Fi?Fi.value:Fi.textContent,_=k.length;for(n=0;n<m&&i[n]===k[n];n++);var F=m-n;for(v=1;v<=F&&i[m-v]===k[_-v];v++);return ol=k.slice(n,1<v?1-v:void 0)}function ll(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function cl(){return!0}function Og(){return!1}function an(n){function i(m,v,k,_,F){this._reactName=m,this._targetInst=k,this.type=v,this.nativeEvent=_,this.target=F,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(m=n[U],this[U]=m?m(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?cl:Og,this.isPropagationStopped=Og,this}return f(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),i}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=an(xr),da=f({},xr,{view:0,detail:0}),k2=an(da),Ru,Pu,ha,dl=f({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ha&&(ha&&n.type==="mousemove"?(Ru=n.screenX-ha.screenX,Pu=n.screenY-ha.screenY):Pu=Ru=0,ha=n),Ru)},movementY:function(n){return"movementY"in n?n.movementY:Pu}}),Dg=an(dl),j2=f({},dl,{dataTransfer:0}),T2=an(j2),_2=f({},da,{relatedTarget:0}),Lu=an(_2),N2=f({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),M2=an(N2),E2=f({},xr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),O2=an(E2),D2=f({},xr,{data:0}),Ag=an(D2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L2(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=P2[n])?!!i[n]:!1}function Fu(){return L2}var F2=f({},da,{key:function(n){if(n.key){var i=A2[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ll(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?R2[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(n){return n.type==="keypress"?ll(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ll(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),z2=an(F2),I2=f({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rg=an(I2),B2=f({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),V2=an(B2),$2=f({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),H2=an($2),U2=f({},dl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),X2=an(U2),Y2=f({},xr,{newState:0,oldState:0}),G2=an(Y2),q2=[9,13,27,32],zu=di&&"CompositionEvent"in window,fa=null;di&&"documentMode"in document&&(fa=document.documentMode);var W2=di&&"TextEvent"in window&&!fa,Pg=di&&(!zu||fa&&8<fa&&11>=fa),Lg=" ",Fg=!1;function zg(n,i){switch(n){case"keyup":return q2.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ig(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ss=!1;function K2(n,i){switch(n){case"compositionend":return Ig(i);case"keypress":return i.which!==32?null:(Fg=!0,Lg);case"textInput":return n=i.data,n===Lg&&Fg?null:n;default:return null}}function Z2(n,i){if(ss)return n==="compositionend"||!zu&&zg(n,i)?(n=Eg(),ol=Au=Fi=null,ss=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Pg&&i.locale!=="ko"?null:i.data;default:return null}}var Q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bg(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Q2[n.type]:i==="textarea"}function Vg(n,i,m,v){is?rs?rs.push(v):rs=[v]:is=v,i=Zl(i,"onChange"),0<i.length&&(m=new ul("onChange","change",null,m,v),n.push({event:m,listeners:i}))}var ma=null,ga=null;function J2(n){w0(n,0)}function hl(n){var i=la(n);if(Sg(i))return n}function $g(n,i){if(n==="change")return i}var Hg=!1;if(di){var Iu;if(di){var Bu="oninput"in document;if(!Bu){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Bu=typeof Ug.oninput=="function"}Iu=Bu}else Iu=!1;Hg=Iu&&(!document.documentMode||9<document.documentMode)}function Xg(){ma&&(ma.detachEvent("onpropertychange",Yg),ga=ma=null)}function Yg(n){if(n.propertyName==="value"&&hl(ga)){var i=[];Vg(i,ga,n,Eu(n)),Mg(J2,i)}}function eC(n,i,m){n==="focusin"?(Xg(),ma=i,ga=m,ma.attachEvent("onpropertychange",Yg)):n==="focusout"&&Xg()}function tC(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return hl(ga)}function nC(n,i){if(n==="click")return hl(i)}function iC(n,i){if(n==="input"||n==="change")return hl(i)}function rC(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var fn=typeof Object.is=="function"?Object.is:rC;function pa(n,i){if(fn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var m=Object.keys(n),v=Object.keys(i);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var k=m[v];if(!fe.call(i,k)||!fn(n[k],i[k]))return!1}return!0}function Gg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qg(n,i){var m=Gg(n);n=0;for(var v;m;){if(m.nodeType===3){if(v=n+m.textContent.length,n<=i&&v>=i)return{node:m,offset:i-n};n=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Gg(m)}}function Wg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Kg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=sl(n.document);i instanceof n.HTMLIFrameElement;){try{var m=typeof i.contentWindow.location.href=="string"}catch{m=!1}if(m)n=i.contentWindow;else break;i=sl(n.document)}return i}function Vu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var sC=di&&"documentMode"in document&&11>=document.documentMode,as=null,$u=null,xa=null,Hu=!1;function Zg(n,i,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Hu||as==null||as!==sl(v)||(v=as,"selectionStart"in v&&Vu(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),xa&&pa(xa,v)||(xa=v,v=Zl($u,"onSelect"),0<v.length&&(i=new ul("onSelect","select",null,i,m),n.push({event:i,listeners:v}),i.target=as)))}function yr(n,i){var m={};return m[n.toLowerCase()]=i.toLowerCase(),m["Webkit"+n]="webkit"+i,m["Moz"+n]="moz"+i,m}var os={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},Uu={},Qg={};di&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);function br(n){if(Uu[n])return Uu[n];if(!os[n])return n;var i=os[n],m;for(m in i)if(i.hasOwnProperty(m)&&m in Qg)return Uu[n]=i[m];return n}var Jg=br("animationend"),ep=br("animationiteration"),tp=br("animationstart"),aC=br("transitionrun"),oC=br("transitionstart"),lC=br("transitioncancel"),np=br("transitionend"),ip=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Fn(n,i){ip.set(n,i),pr(i,[n])}var rp=new WeakMap;function kn(n,i){if(typeof n=="object"&&n!==null){var m=rp.get(n);return m!==void 0?m:(i={value:n,source:i,stack:vg(i)},rp.set(n,i),i)}return{value:n,source:i,stack:vg(i)}}var jn=[],ls=0,Yu=0;function fl(){for(var n=ls,i=Yu=ls=0;i<n;){var m=jn[i];jn[i++]=null;var v=jn[i];jn[i++]=null;var k=jn[i];jn[i++]=null;var _=jn[i];if(jn[i++]=null,v!==null&&k!==null){var F=v.pending;F===null?k.next=k:(k.next=F.next,F.next=k),v.pending=k}_!==0&&sp(m,k,_)}}function ml(n,i,m,v){jn[ls++]=n,jn[ls++]=i,jn[ls++]=m,jn[ls++]=v,Yu|=v,n.lanes|=v,n=n.alternate,n!==null&&(n.lanes|=v)}function Gu(n,i,m,v){return ml(n,i,m,v),gl(n)}function cs(n,i){return ml(n,null,null,i),gl(n)}function sp(n,i,m){n.lanes|=m;var v=n.alternate;v!==null&&(v.lanes|=m);for(var k=!1,_=n.return;_!==null;)_.childLanes|=m,v=_.alternate,v!==null&&(v.childLanes|=m),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(k=!0)),n=_,_=_.return;return n.tag===3?(_=n.stateNode,k&&i!==null&&(k=31-$e(m),n=_.hiddenUpdates,v=n[k],v===null?n[k]=[i]:v.push(i),i.lane=m|536870912),_):null}function gl(n){if(50<$a)throw $a=0,Jd=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var us={};function cC(n,i,m,v){this.tag=n,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(n,i,m,v){return new cC(n,i,m,v)}function qu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hi(n,i){var m=n.alternate;return m===null?(m=mn(n.tag,i,n.key,n.mode),m.elementType=n.elementType,m.type=n.type,m.stateNode=n.stateNode,m.alternate=n,n.alternate=m):(m.pendingProps=i,m.type=n.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=n.flags&65011712,m.childLanes=n.childLanes,m.lanes=n.lanes,m.child=n.child,m.memoizedProps=n.memoizedProps,m.memoizedState=n.memoizedState,m.updateQueue=n.updateQueue,i=n.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},m.sibling=n.sibling,m.index=n.index,m.ref=n.ref,m.refCleanup=n.refCleanup,m}function ap(n,i){n.flags&=65011714;var m=n.alternate;return m===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=m.childLanes,n.lanes=m.lanes,n.child=m.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=m.memoizedProps,n.memoizedState=m.memoizedState,n.updateQueue=m.updateQueue,n.type=m.type,i=m.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function pl(n,i,m,v,k,_){var F=0;if(v=n,typeof n=="function")qu(n)&&(F=1);else if(typeof n=="string")F=dk(n,m,B.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=mn(31,m,i,k),n.elementType=H,n.lanes=_,n;case g:return vr(m.children,k,_,i);case y:F=8,k|=24;break;case x:return n=mn(12,m,i,k|2),n.elementType=x,n.lanes=_,n;case M:return n=mn(13,m,i,k),n.elementType=M,n.lanes=_,n;case E:return n=mn(19,m,i,k),n.elementType=E,n.lanes=_,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case j:F=10;break e;case C:F=9;break e;case T:F=11;break e;case A:F=14;break e;case R:F=16,v=null;break e}F=29,m=Error(s(130,n===null?"null":typeof n,"")),v=null}return i=mn(F,m,i,k),i.elementType=n,i.type=v,i.lanes=_,i}function vr(n,i,m,v){return n=mn(7,n,v,i),n.lanes=m,n}function Wu(n,i,m){return n=mn(6,n,null,i),n.lanes=m,n}function Ku(n,i,m){return i=mn(4,n.children!==null?n.children:[],n.key,i),i.lanes=m,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ds=[],hs=0,xl=null,yl=0,Tn=[],_n=0,wr=null,fi=1,mi="";function Sr(n,i){ds[hs++]=yl,ds[hs++]=xl,xl=n,yl=i}function op(n,i,m){Tn[_n++]=fi,Tn[_n++]=mi,Tn[_n++]=wr,wr=n;var v=fi;n=mi;var k=32-$e(v)-1;v&=~(1<<k),m+=1;var _=32-$e(i)+k;if(30<_){var F=k-k%5;_=(v&(1<<F)-1).toString(32),v>>=F,k-=F,fi=1<<32-$e(i)+k|m<<k|v,mi=_+n}else fi=1<<_|m<<k|v,mi=n}function Zu(n){n.return!==null&&(Sr(n,1),op(n,1,0))}function Qu(n){for(;n===xl;)xl=ds[--hs],ds[hs]=null,yl=ds[--hs],ds[hs]=null;for(;n===wr;)wr=Tn[--_n],Tn[_n]=null,mi=Tn[--_n],Tn[_n]=null,fi=Tn[--_n],Tn[_n]=null}var tn=null,xt=null,it=!1,Cr=null,Gn=!1,Ju=Error(s(519));function kr(n){var i=Error(s(418,""));throw va(kn(i,n)),Ju}function lp(n){var i=n.stateNode,m=n.type,v=n.memoizedProps;switch(i[Kt]=n,i[sn]=v,m){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(m=0;m<Ua.length;m++)Qe(Ua[m],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Qe("invalid",i),Cg(i,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),rl(i);break;case"select":Qe("invalid",i);break;case"textarea":Qe("invalid",i),jg(i,v.value,v.defaultValue,v.children),rl(i)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||i.textContent===""+m||v.suppressHydrationWarning===!0||j0(i.textContent,m)?(v.popover!=null&&(Qe("beforetoggle",i),Qe("toggle",i)),v.onScroll!=null&&Qe("scroll",i),v.onScrollEnd!=null&&Qe("scrollend",i),v.onClick!=null&&(i.onclick=Ql),i=!0):i=!1,i||kr(n)}function cp(n){for(tn=n.return;tn;)switch(tn.tag){case 5:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:tn=tn.return}}function ya(n){if(n!==tn)return!1;if(!it)return cp(n),it=!0,!1;var i=n.tag,m;if((m=i!==3&&i!==27)&&((m=i===5)&&(m=n.type,m=!(m!=="form"&&m!=="button")||gh(n.type,n.memoizedProps)),m=!m),m&&xt&&kr(n),cp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(m=n.data,m==="/$"){if(i===0){xt=In(n.nextSibling);break e}i--}else m!=="$"&&m!=="$!"&&m!=="$?"||i++;n=n.nextSibling}xt=null}}else i===27?(i=xt,Ji(n.type)?(n=bh,bh=null,xt=n):xt=i):xt=tn?In(n.stateNode.nextSibling):null;return!0}function ba(){xt=tn=null,it=!1}function up(){var n=Cr;return n!==null&&(cn===null?cn=n:cn.push.apply(cn,n),Cr=null),n}function va(n){Cr===null?Cr=[n]:Cr.push(n)}var ed=L(null),jr=null,gi=null;function zi(n,i,m){G(ed,i._currentValue),i._currentValue=m}function pi(n){n._currentValue=ed.current,I(ed)}function td(n,i,m){for(;n!==null;){var v=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,v!==null&&(v.childLanes|=i)):v!==null&&(v.childLanes&i)!==i&&(v.childLanes|=i),n===m)break;n=n.return}}function nd(n,i,m,v){var k=n.child;for(k!==null&&(k.return=n);k!==null;){var _=k.dependencies;if(_!==null){var F=k.child;_=_.firstContext;e:for(;_!==null;){var U=_;_=k;for(var oe=0;oe<i.length;oe++)if(U.context===i[oe]){_.lanes|=m,U=_.alternate,U!==null&&(U.lanes|=m),td(_.return,m,n),v||(F=null);break e}_=U.next}}else if(k.tag===18){if(F=k.return,F===null)throw Error(s(341));F.lanes|=m,_=F.alternate,_!==null&&(_.lanes|=m),td(F,m,n),F=null}else F=k.child;if(F!==null)F.return=k;else for(F=k;F!==null;){if(F===n){F=null;break}if(k=F.sibling,k!==null){k.return=F.return,F=k;break}F=F.return}k=F}}function wa(n,i,m,v){n=null;for(var k=i,_=!1;k!==null;){if(!_){if((k.flags&524288)!==0)_=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var F=k.alternate;if(F===null)throw Error(s(387));if(F=F.memoizedProps,F!==null){var U=k.type;fn(k.pendingProps.value,F.value)||(n!==null?n.push(U):n=[U])}}else if(k===Q.current){if(F=k.alternate,F===null)throw Error(s(387));F.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(n!==null?n.push(Ka):n=[Ka])}k=k.return}n!==null&&nd(i,n,m,v),i.flags|=262144}function bl(n){for(n=n.firstContext;n!==null;){if(!fn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Tr(n){jr=n,gi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Zt(n){return dp(jr,n)}function vl(n,i){return jr===null&&Tr(n),dp(n,i)}function dp(n,i){var m=i._currentValue;if(i={context:i,memoizedValue:m,next:null},gi===null){if(n===null)throw Error(s(308));gi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else gi=gi.next=i;return m}var uC=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(m,v){n.push(v)}};this.abort=function(){i.aborted=!0,n.forEach(function(m){return m()})}},dC=e.unstable_scheduleCallback,hC=e.unstable_NormalPriority,Ot={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function id(){return{controller:new uC,data:new Map,refCount:0}}function Sa(n){n.refCount--,n.refCount===0&&dC(hC,function(){n.controller.abort()})}var Ca=null,rd=0,fs=0,ms=null;function fC(n,i){if(Ca===null){var m=Ca=[];rd=0,fs=ah(),ms={status:"pending",value:void 0,then:function(v){m.push(v)}}}return rd++,i.then(hp,hp),i}function hp(){if(--rd===0&&Ca!==null){ms!==null&&(ms.status="fulfilled");var n=Ca;Ca=null,fs=0,ms=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function mC(n,i){var m=[],v={status:"pending",value:null,reason:null,then:function(k){m.push(k)}};return n.then(function(){v.status="fulfilled",v.value=i;for(var k=0;k<m.length;k++)(0,m[k])(i)},function(k){for(v.status="rejected",v.reason=k,k=0;k<m.length;k++)(0,m[k])(void 0)}),v}var fp=P.S;P.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&fC(n,i),fp!==null&&fp(n,i)};var _r=L(null);function sd(){var n=_r.current;return n!==null?n:ut.pooledCache}function wl(n,i){i===null?G(_r,_r.current):G(_r,i.pool)}function mp(){var n=sd();return n===null?null:{parent:Ot._currentValue,pool:n}}var ka=Error(s(460)),gp=Error(s(474)),Sl=Error(s(542)),ad={then:function(){}};function pp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Cl(){}function xp(n,i,m){switch(m=n[m],m===void 0?n.push(i):m!==i&&(i.then(Cl,Cl),i=m),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,bp(n),n;default:if(typeof i.status=="string")i.then(Cl,Cl);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(v){if(i.status==="pending"){var k=i;k.status="fulfilled",k.value=v}},function(v){if(i.status==="pending"){var k=i;k.status="rejected",k.reason=v}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,bp(n),n}throw ja=i,ka}}var ja=null;function yp(){if(ja===null)throw Error(s(459));var n=ja;return ja=null,n}function bp(n){if(n===ka||n===Sl)throw Error(s(483))}var Ii=!1;function od(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ld(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Vi(n,i,m){var v=n.updateQueue;if(v===null)return null;if(v=v.shared,(rt&2)!==0){var k=v.pending;return k===null?i.next=i:(i.next=k.next,k.next=i),v.pending=i,i=gl(n),sp(n,null,m),i}return ml(n,v,i,m),gl(n)}function Ta(n,i,m){if(i=i.updateQueue,i!==null&&(i=i.shared,(m&4194048)!==0)){var v=i.lanes;v&=n.pendingLanes,m|=v,i.lanes=m,hg(n,m)}}function cd(n,i){var m=n.updateQueue,v=n.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var k=null,_=null;if(m=m.firstBaseUpdate,m!==null){do{var F={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};_===null?k=_=F:_=_.next=F,m=m.next}while(m!==null);_===null?k=_=i:_=_.next=i}else k=_=i;m={baseState:v.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:v.shared,callbacks:v.callbacks},n.updateQueue=m;return}n=m.lastBaseUpdate,n===null?m.firstBaseUpdate=i:n.next=i,m.lastBaseUpdate=i}var ud=!1;function _a(){if(ud){var n=ms;if(n!==null)throw n}}function Na(n,i,m,v){ud=!1;var k=n.updateQueue;Ii=!1;var _=k.firstBaseUpdate,F=k.lastBaseUpdate,U=k.shared.pending;if(U!==null){k.shared.pending=null;var oe=U,ve=oe.next;oe.next=null,F===null?_=ve:F.next=ve,F=oe;var je=n.alternate;je!==null&&(je=je.updateQueue,U=je.lastBaseUpdate,U!==F&&(U===null?je.firstBaseUpdate=ve:U.next=ve,je.lastBaseUpdate=oe))}if(_!==null){var _e=k.baseState;F=0,je=ve=oe=null,U=_;do{var we=U.lane&-536870913,Se=we!==U.lane;if(Se?(tt&we)===we:(v&we)===we){we!==0&&we===fs&&(ud=!0),je!==null&&(je=je.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ue=n,Be=U;we=i;var lt=m;switch(Be.tag){case 1:if(Ue=Be.payload,typeof Ue=="function"){_e=Ue.call(lt,_e,we);break e}_e=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Be.payload,we=typeof Ue=="function"?Ue.call(lt,_e,we):Ue,we==null)break e;_e=f({},_e,we);break e;case 2:Ii=!0}}we=U.callback,we!==null&&(n.flags|=64,Se&&(n.flags|=8192),Se=k.callbacks,Se===null?k.callbacks=[we]:Se.push(we))}else Se={lane:we,tag:U.tag,payload:U.payload,callback:U.callback,next:null},je===null?(ve=je=Se,oe=_e):je=je.next=Se,F|=we;if(U=U.next,U===null){if(U=k.shared.pending,U===null)break;Se=U,U=Se.next,Se.next=null,k.lastBaseUpdate=Se,k.shared.pending=null}}while(!0);je===null&&(oe=_e),k.baseState=oe,k.firstBaseUpdate=ve,k.lastBaseUpdate=je,_===null&&(k.shared.lanes=0),Wi|=F,n.lanes=F,n.memoizedState=_e}}function vp(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function wp(n,i){var m=n.callbacks;if(m!==null)for(n.callbacks=null,n=0;n<m.length;n++)vp(m[n],i)}var gs=L(null),kl=L(0);function Sp(n,i){n=Ci,G(kl,n),G(gs,i),Ci=n|i.baseLanes}function dd(){G(kl,Ci),G(gs,gs.current)}function hd(){Ci=kl.current,I(gs),I(kl)}var $i=0,qe=null,at=null,_t=null,jl=!1,ps=!1,Nr=!1,Tl=0,Ma=0,xs=null,gC=0;function wt(){throw Error(s(321))}function fd(n,i){if(i===null)return!1;for(var m=0;m<i.length&&m<n.length;m++)if(!fn(n[m],i[m]))return!1;return!0}function md(n,i,m,v,k,_){return $i=_,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=n===null||n.memoizedState===null?sx:ax,Nr=!1,_=m(v,k),Nr=!1,ps&&(_=kp(i,m,v,k)),Cp(n),_}function Cp(n){P.H=Dl;var i=at!==null&&at.next!==null;if($i=0,_t=at=qe=null,jl=!1,Ma=0,xs=null,i)throw Error(s(300));n===null||Bt||(n=n.dependencies,n!==null&&bl(n)&&(Bt=!0))}function kp(n,i,m,v){qe=n;var k=0;do{if(ps&&(xs=null),Ma=0,ps=!1,25<=k)throw Error(s(301));if(k+=1,_t=at=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=SC,_=i(m,v)}while(ps);return _}function pC(){var n=P.H,i=n.useState()[0];return i=typeof i.then=="function"?Ea(i):i,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(qe.flags|=1024),i}function gd(){var n=Tl!==0;return Tl=0,n}function pd(n,i,m){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~m}function xd(n){if(jl){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jl=!1}$i=0,_t=at=qe=null,ps=!1,Ma=Tl=0,xs=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?qe.memoizedState=_t=n:_t=_t.next=n,_t}function Nt(){if(at===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var i=_t===null?qe.memoizedState:_t.next;if(i!==null)_t=i,at=n;else{if(n===null)throw qe.alternate===null?Error(s(467)):Error(s(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},_t===null?qe.memoizedState=_t=n:_t=_t.next=n}return _t}function yd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ea(n){var i=Ma;return Ma+=1,xs===null&&(xs=[]),n=xp(xs,n,i),i=qe,(_t===null?i.memoizedState:_t.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?sx:ax),n}function _l(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ea(n);if(n.$$typeof===j)return Zt(n)}throw Error(s(438,String(n)))}function bd(n){var i=null,m=qe.updateQueue;if(m!==null&&(i=m.memoCache),i==null){var v=qe.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(i={data:v.data.map(function(k){return k.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),m===null&&(m=yd(),qe.updateQueue=m),m.memoCache=i,m=i.data[i.index],m===void 0)for(m=i.data[i.index]=Array(n),v=0;v<n;v++)m[v]=K;return i.index++,m}function xi(n,i){return typeof i=="function"?i(n):i}function Nl(n){var i=Nt();return vd(i,at,n)}function vd(n,i,m){var v=n.queue;if(v===null)throw Error(s(311));v.lastRenderedReducer=m;var k=n.baseQueue,_=v.pending;if(_!==null){if(k!==null){var F=k.next;k.next=_.next,_.next=F}i.baseQueue=k=_,v.pending=null}if(_=n.baseState,k===null)n.memoizedState=_;else{i=k.next;var U=F=null,oe=null,ve=i,je=!1;do{var _e=ve.lane&-536870913;if(_e!==ve.lane?(tt&_e)===_e:($i&_e)===_e){var we=ve.revertLane;if(we===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),_e===fs&&(je=!0);else if(($i&we)===we){ve=ve.next,we===fs&&(je=!0);continue}else _e={lane:0,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},oe===null?(U=oe=_e,F=_):oe=oe.next=_e,qe.lanes|=we,Wi|=we;_e=ve.action,Nr&&m(_,_e),_=ve.hasEagerState?ve.eagerState:m(_,_e)}else we={lane:_e,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},oe===null?(U=oe=we,F=_):oe=oe.next=we,qe.lanes|=_e,Wi|=_e;ve=ve.next}while(ve!==null&&ve!==i);if(oe===null?F=_:oe.next=U,!fn(_,n.memoizedState)&&(Bt=!0,je&&(m=ms,m!==null)))throw m;n.memoizedState=_,n.baseState=F,n.baseQueue=oe,v.lastRenderedState=_}return k===null&&(v.lanes=0),[n.memoizedState,v.dispatch]}function wd(n){var i=Nt(),m=i.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=n;var v=m.dispatch,k=m.pending,_=i.memoizedState;if(k!==null){m.pending=null;var F=k=k.next;do _=n(_,F.action),F=F.next;while(F!==k);fn(_,i.memoizedState)||(Bt=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),m.lastRenderedState=_}return[_,v]}function jp(n,i,m){var v=qe,k=Nt(),_=it;if(_){if(m===void 0)throw Error(s(407));m=m()}else m=i();var F=!fn((at||k).memoizedState,m);F&&(k.memoizedState=m,Bt=!0),k=k.queue;var U=Np.bind(null,v,k,n);if(Oa(2048,8,U,[n]),k.getSnapshot!==i||F||_t!==null&&_t.memoizedState.tag&1){if(v.flags|=2048,ys(9,Ml(),_p.bind(null,v,k,m,i),null),ut===null)throw Error(s(349));_||($i&124)!==0||Tp(v,i,m)}return m}function Tp(n,i,m){n.flags|=16384,n={getSnapshot:i,value:m},i=qe.updateQueue,i===null?(i=yd(),qe.updateQueue=i,i.stores=[n]):(m=i.stores,m===null?i.stores=[n]:m.push(n))}function _p(n,i,m,v){i.value=m,i.getSnapshot=v,Mp(i)&&Ep(n)}function Np(n,i,m){return m(function(){Mp(i)&&Ep(n)})}function Mp(n){var i=n.getSnapshot;n=n.value;try{var m=i();return!fn(n,m)}catch{return!0}}function Ep(n){var i=cs(n,2);i!==null&&bn(i,n,2)}function Sd(n){var i=on();if(typeof n=="function"){var m=n;if(n=m(),Nr){ze(!0);try{m()}finally{ze(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:n},i}function Op(n,i,m,v){return n.baseState=m,vd(n,at,typeof v=="function"?v:xi)}function xC(n,i,m,v,k){if(Ol(n))throw Error(s(485));if(n=i.action,n!==null){var _={payload:k,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){_.listeners.push(F)}};P.T!==null?m(!0):_.isTransition=!1,v(_),m=i.pending,m===null?(_.next=i.pending=_,Dp(i,_)):(_.next=m.next,i.pending=m.next=_)}}function Dp(n,i){var m=i.action,v=i.payload,k=n.state;if(i.isTransition){var _=P.T,F={};P.T=F;try{var U=m(k,v),oe=P.S;oe!==null&&oe(F,U),Ap(n,i,U)}catch(ve){Cd(n,i,ve)}finally{P.T=_}}else try{_=m(k,v),Ap(n,i,_)}catch(ve){Cd(n,i,ve)}}function Ap(n,i,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){Rp(n,i,v)},function(v){return Cd(n,i,v)}):Rp(n,i,m)}function Rp(n,i,m){i.status="fulfilled",i.value=m,Pp(i),n.state=m,i=n.pending,i!==null&&(m=i.next,m===i?n.pending=null:(m=m.next,i.next=m,Dp(n,m)))}function Cd(n,i,m){var v=n.pending;if(n.pending=null,v!==null){v=v.next;do i.status="rejected",i.reason=m,Pp(i),i=i.next;while(i!==v)}n.action=null}function Pp(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Lp(n,i){return i}function Fp(n,i){if(it){var m=ut.formState;if(m!==null){e:{var v=qe;if(it){if(xt){t:{for(var k=xt,_=Gn;k.nodeType!==8;){if(!_){k=null;break t}if(k=In(k.nextSibling),k===null){k=null;break t}}_=k.data,k=_==="F!"||_==="F"?k:null}if(k){xt=In(k.nextSibling),v=k.data==="F!";break e}}kr(v)}v=!1}v&&(i=m[0])}}return m=on(),m.memoizedState=m.baseState=i,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:i},m.queue=v,m=nx.bind(null,qe,v),v.dispatch=m,v=Sd(!1),_=Nd.bind(null,qe,!1,v.queue),v=on(),k={state:i,dispatch:null,action:n,pending:null},v.queue=k,m=xC.bind(null,qe,k,_,m),k.dispatch=m,v.memoizedState=n,[i,m,!1]}function zp(n){var i=Nt();return Ip(i,at,n)}function Ip(n,i,m){if(i=vd(n,i,Lp)[0],n=Nl(xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var v=Ea(i)}catch(F){throw F===ka?Sl:F}else v=i;i=Nt();var k=i.queue,_=k.dispatch;return m!==i.memoizedState&&(qe.flags|=2048,ys(9,Ml(),yC.bind(null,k,m),null)),[v,_,n]}function yC(n,i){n.action=i}function Bp(n){var i=Nt(),m=at;if(m!==null)return Ip(i,m,n);Nt(),i=i.memoizedState,m=Nt();var v=m.queue.dispatch;return m.memoizedState=n,[i,v,!1]}function ys(n,i,m,v){return n={tag:n,create:m,deps:v,inst:i,next:null},i=qe.updateQueue,i===null&&(i=yd(),qe.updateQueue=i),m=i.lastEffect,m===null?i.lastEffect=n.next=n:(v=m.next,m.next=n,n.next=v,i.lastEffect=n),n}function Ml(){return{destroy:void 0,resource:void 0}}function Vp(){return Nt().memoizedState}function El(n,i,m,v){var k=on();v=v===void 0?null:v,qe.flags|=n,k.memoizedState=ys(1|i,Ml(),m,v)}function Oa(n,i,m,v){var k=Nt();v=v===void 0?null:v;var _=k.memoizedState.inst;at!==null&&v!==null&&fd(v,at.memoizedState.deps)?k.memoizedState=ys(i,_,m,v):(qe.flags|=n,k.memoizedState=ys(1|i,_,m,v))}function $p(n,i){El(8390656,8,n,i)}function Hp(n,i){Oa(2048,8,n,i)}function Up(n,i){return Oa(4,2,n,i)}function Xp(n,i){return Oa(4,4,n,i)}function Yp(n,i){if(typeof i=="function"){n=n();var m=i(n);return function(){typeof m=="function"?m():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Gp(n,i,m){m=m!=null?m.concat([n]):null,Oa(4,4,Yp.bind(null,i,n),m)}function kd(){}function qp(n,i){var m=Nt();i=i===void 0?null:i;var v=m.memoizedState;return i!==null&&fd(i,v[1])?v[0]:(m.memoizedState=[n,i],n)}function Wp(n,i){var m=Nt();i=i===void 0?null:i;var v=m.memoizedState;if(i!==null&&fd(i,v[1]))return v[0];if(v=n(),Nr){ze(!0);try{n()}finally{ze(!1)}}return m.memoizedState=[v,i],v}function jd(n,i,m){return m===void 0||($i&1073741824)!==0?n.memoizedState=i:(n.memoizedState=m,n=Qx(),qe.lanes|=n,Wi|=n,m)}function Kp(n,i,m,v){return fn(m,i)?m:gs.current!==null?(n=jd(n,m,v),fn(n,i)||(Bt=!0),n):($i&42)===0?(Bt=!0,n.memoizedState=m):(n=Qx(),qe.lanes|=n,Wi|=n,i)}function Zp(n,i,m,v,k){var _=$.p;$.p=_!==0&&8>_?_:8;var F=P.T,U={};P.T=U,Nd(n,!1,i,m);try{var oe=k(),ve=P.S;if(ve!==null&&ve(U,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var je=mC(oe,v);Da(n,i,je,yn(n))}else Da(n,i,v,yn(n))}catch(_e){Da(n,i,{then:function(){},status:"rejected",reason:_e},yn())}finally{$.p=_,P.T=F}}function bC(){}function Td(n,i,m,v){if(n.tag!==5)throw Error(s(476));var k=Qp(n).queue;Zp(n,k,i,V,m===null?bC:function(){return Jp(n),m(v)})}function Qp(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:V},next:null};var m={};return i.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:m},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Jp(n){var i=Qp(n).next.queue;Da(n,i,{},yn())}function _d(){return Zt(Ka)}function ex(){return Nt().memoizedState}function tx(){return Nt().memoizedState}function vC(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var m=yn();n=Bi(m);var v=Vi(i,n,m);v!==null&&(bn(v,i,m),Ta(v,i,m)),i={cache:id()},n.payload=i;return}i=i.return}}function wC(n,i,m){var v=yn();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ol(n)?ix(i,m):(m=Gu(n,i,m,v),m!==null&&(bn(m,n,v),rx(m,i,v)))}function nx(n,i,m){var v=yn();Da(n,i,m,v)}function Da(n,i,m,v){var k={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ol(n))ix(i,k);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var F=i.lastRenderedState,U=_(F,m);if(k.hasEagerState=!0,k.eagerState=U,fn(U,F))return ml(n,i,k,0),ut===null&&fl(),!1}catch{}finally{}if(m=Gu(n,i,k,v),m!==null)return bn(m,n,v),rx(m,i,v),!0}return!1}function Nd(n,i,m,v){if(v={lane:2,revertLane:ah(),action:v,hasEagerState:!1,eagerState:null,next:null},Ol(n)){if(i)throw Error(s(479))}else i=Gu(n,m,v,2),i!==null&&bn(i,n,2)}function Ol(n){var i=n.alternate;return n===qe||i!==null&&i===qe}function ix(n,i){ps=jl=!0;var m=n.pending;m===null?i.next=i:(i.next=m.next,m.next=i),n.pending=i}function rx(n,i,m){if((m&4194048)!==0){var v=i.lanes;v&=n.pendingLanes,m|=v,i.lanes=m,hg(n,m)}}var Dl={readContext:Zt,use:_l,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt},sx={readContext:Zt,use:_l,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Zt,useEffect:$p,useImperativeHandle:function(n,i,m){m=m!=null?m.concat([n]):null,El(4194308,4,Yp.bind(null,i,n),m)},useLayoutEffect:function(n,i){return El(4194308,4,n,i)},useInsertionEffect:function(n,i){El(4,2,n,i)},useMemo:function(n,i){var m=on();i=i===void 0?null:i;var v=n();if(Nr){ze(!0);try{n()}finally{ze(!1)}}return m.memoizedState=[v,i],v},useReducer:function(n,i,m){var v=on();if(m!==void 0){var k=m(i);if(Nr){ze(!0);try{m(i)}finally{ze(!1)}}}else k=i;return v.memoizedState=v.baseState=k,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:k},v.queue=n,n=n.dispatch=wC.bind(null,qe,n),[v.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=Sd(n);var i=n.queue,m=nx.bind(null,qe,i);return i.dispatch=m,[n.memoizedState,m]},useDebugValue:kd,useDeferredValue:function(n,i){var m=on();return jd(m,n,i)},useTransition:function(){var n=Sd(!1);return n=Zp.bind(null,qe,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,m){var v=qe,k=on();if(it){if(m===void 0)throw Error(s(407));m=m()}else{if(m=i(),ut===null)throw Error(s(349));(tt&124)!==0||Tp(v,i,m)}k.memoizedState=m;var _={value:m,getSnapshot:i};return k.queue=_,$p(Np.bind(null,v,_,n),[n]),v.flags|=2048,ys(9,Ml(),_p.bind(null,v,_,m,i),null),m},useId:function(){var n=on(),i=ut.identifierPrefix;if(it){var m=mi,v=fi;m=(v&~(1<<32-$e(v)-1)).toString(32)+m,i=""+i+"R"+m,m=Tl++,0<m&&(i+="H"+m.toString(32)),i+=""}else m=gC++,i=""+i+"r"+m.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:_d,useFormState:Fp,useActionState:Fp,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=m,i=Nd.bind(null,qe,!0,m),m.dispatch=i,[n,i]},useMemoCache:bd,useCacheRefresh:function(){return on().memoizedState=vC.bind(null,qe)}},ax={readContext:Zt,use:_l,useCallback:qp,useContext:Zt,useEffect:Hp,useImperativeHandle:Gp,useInsertionEffect:Up,useLayoutEffect:Xp,useMemo:Wp,useReducer:Nl,useRef:Vp,useState:function(){return Nl(xi)},useDebugValue:kd,useDeferredValue:function(n,i){var m=Nt();return Kp(m,at.memoizedState,n,i)},useTransition:function(){var n=Nl(xi)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Ea(n),i]},useSyncExternalStore:jp,useId:ex,useHostTransitionStatus:_d,useFormState:zp,useActionState:zp,useOptimistic:function(n,i){var m=Nt();return Op(m,at,n,i)},useMemoCache:bd,useCacheRefresh:tx},SC={readContext:Zt,use:_l,useCallback:qp,useContext:Zt,useEffect:Hp,useImperativeHandle:Gp,useInsertionEffect:Up,useLayoutEffect:Xp,useMemo:Wp,useReducer:wd,useRef:Vp,useState:function(){return wd(xi)},useDebugValue:kd,useDeferredValue:function(n,i){var m=Nt();return at===null?jd(m,n,i):Kp(m,at.memoizedState,n,i)},useTransition:function(){var n=wd(xi)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Ea(n),i]},useSyncExternalStore:jp,useId:ex,useHostTransitionStatus:_d,useFormState:Bp,useActionState:Bp,useOptimistic:function(n,i){var m=Nt();return at!==null?Op(m,at,n,i):(m.baseState=n,[n,m.queue.dispatch])},useMemoCache:bd,useCacheRefresh:tx},bs=null,Aa=0;function Al(n){var i=Aa;return Aa+=1,bs===null&&(bs=[]),xp(bs,n,i)}function Ra(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Rl(n,i){throw i.$$typeof===o?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function ox(n){var i=n._init;return i(n._payload)}function lx(n){function i(pe,he){if(n){var ye=pe.deletions;ye===null?(pe.deletions=[he],pe.flags|=16):ye.push(he)}}function m(pe,he){if(!n)return null;for(;he!==null;)i(pe,he),he=he.sibling;return null}function v(pe){for(var he=new Map;pe!==null;)pe.key!==null?he.set(pe.key,pe):he.set(pe.index,pe),pe=pe.sibling;return he}function k(pe,he){return pe=hi(pe,he),pe.index=0,pe.sibling=null,pe}function _(pe,he,ye){return pe.index=ye,n?(ye=pe.alternate,ye!==null?(ye=ye.index,ye<he?(pe.flags|=67108866,he):ye):(pe.flags|=67108866,he)):(pe.flags|=1048576,he)}function F(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function U(pe,he,ye,Te){return he===null||he.tag!==6?(he=Wu(ye,pe.mode,Te),he.return=pe,he):(he=k(he,ye),he.return=pe,he)}function oe(pe,he,ye,Te){var Ae=ye.type;return Ae===g?je(pe,he,ye.props.children,Te,ye.key):he!==null&&(he.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&ox(Ae)===he.type)?(he=k(he,ye.props),Ra(he,ye),he.return=pe,he):(he=pl(ye.type,ye.key,ye.props,null,pe.mode,Te),Ra(he,ye),he.return=pe,he)}function ve(pe,he,ye,Te){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=Ku(ye,pe.mode,Te),he.return=pe,he):(he=k(he,ye.children||[]),he.return=pe,he)}function je(pe,he,ye,Te,Ae){return he===null||he.tag!==7?(he=vr(ye,pe.mode,Te,Ae),he.return=pe,he):(he=k(he,ye),he.return=pe,he)}function _e(pe,he,ye){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=Wu(""+he,pe.mode,ye),he.return=pe,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case c:return ye=pl(he.type,he.key,he.props,null,pe.mode,ye),Ra(ye,he),ye.return=pe,ye;case u:return he=Ku(he,pe.mode,ye),he.return=pe,he;case R:var Te=he._init;return he=Te(he._payload),_e(pe,he,ye)}if(q(he)||ne(he))return he=vr(he,pe.mode,ye,null),he.return=pe,he;if(typeof he.then=="function")return _e(pe,Al(he),ye);if(he.$$typeof===j)return _e(pe,vl(pe,he),ye);Rl(pe,he)}return null}function we(pe,he,ye,Te){var Ae=he!==null?he.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Ae!==null?null:U(pe,he,""+ye,Te);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case c:return ye.key===Ae?oe(pe,he,ye,Te):null;case u:return ye.key===Ae?ve(pe,he,ye,Te):null;case R:return Ae=ye._init,ye=Ae(ye._payload),we(pe,he,ye,Te)}if(q(ye)||ne(ye))return Ae!==null?null:je(pe,he,ye,Te,null);if(typeof ye.then=="function")return we(pe,he,Al(ye),Te);if(ye.$$typeof===j)return we(pe,he,vl(pe,ye),Te);Rl(pe,ye)}return null}function Se(pe,he,ye,Te,Ae){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return pe=pe.get(ye)||null,U(he,pe,""+Te,Ae);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case c:return pe=pe.get(Te.key===null?ye:Te.key)||null,oe(he,pe,Te,Ae);case u:return pe=pe.get(Te.key===null?ye:Te.key)||null,ve(he,pe,Te,Ae);case R:var Ke=Te._init;return Te=Ke(Te._payload),Se(pe,he,ye,Te,Ae)}if(q(Te)||ne(Te))return pe=pe.get(ye)||null,je(he,pe,Te,Ae,null);if(typeof Te.then=="function")return Se(pe,he,ye,Al(Te),Ae);if(Te.$$typeof===j)return Se(pe,he,ye,vl(he,Te),Ae);Rl(he,Te)}return null}function Ue(pe,he,ye,Te){for(var Ae=null,Ke=null,Fe=he,He=he=0,$t=null;Fe!==null&&He<ye.length;He++){Fe.index>He?($t=Fe,Fe=null):$t=Fe.sibling;var nt=we(pe,Fe,ye[He],Te);if(nt===null){Fe===null&&(Fe=$t);break}n&&Fe&&nt.alternate===null&&i(pe,Fe),he=_(nt,he,He),Ke===null?Ae=nt:Ke.sibling=nt,Ke=nt,Fe=$t}if(He===ye.length)return m(pe,Fe),it&&Sr(pe,He),Ae;if(Fe===null){for(;He<ye.length;He++)Fe=_e(pe,ye[He],Te),Fe!==null&&(he=_(Fe,he,He),Ke===null?Ae=Fe:Ke.sibling=Fe,Ke=Fe);return it&&Sr(pe,He),Ae}for(Fe=v(Fe);He<ye.length;He++)$t=Se(Fe,pe,He,ye[He],Te),$t!==null&&(n&&$t.alternate!==null&&Fe.delete($t.key===null?He:$t.key),he=_($t,he,He),Ke===null?Ae=$t:Ke.sibling=$t,Ke=$t);return n&&Fe.forEach(function(rr){return i(pe,rr)}),it&&Sr(pe,He),Ae}function Be(pe,he,ye,Te){if(ye==null)throw Error(s(151));for(var Ae=null,Ke=null,Fe=he,He=he=0,$t=null,nt=ye.next();Fe!==null&&!nt.done;He++,nt=ye.next()){Fe.index>He?($t=Fe,Fe=null):$t=Fe.sibling;var rr=we(pe,Fe,nt.value,Te);if(rr===null){Fe===null&&(Fe=$t);break}n&&Fe&&rr.alternate===null&&i(pe,Fe),he=_(rr,he,He),Ke===null?Ae=rr:Ke.sibling=rr,Ke=rr,Fe=$t}if(nt.done)return m(pe,Fe),it&&Sr(pe,He),Ae;if(Fe===null){for(;!nt.done;He++,nt=ye.next())nt=_e(pe,nt.value,Te),nt!==null&&(he=_(nt,he,He),Ke===null?Ae=nt:Ke.sibling=nt,Ke=nt);return it&&Sr(pe,He),Ae}for(Fe=v(Fe);!nt.done;He++,nt=ye.next())nt=Se(Fe,pe,He,nt.value,Te),nt!==null&&(n&&nt.alternate!==null&&Fe.delete(nt.key===null?He:nt.key),he=_(nt,he,He),Ke===null?Ae=nt:Ke.sibling=nt,Ke=nt);return n&&Fe.forEach(function(Ck){return i(pe,Ck)}),it&&Sr(pe,He),Ae}function lt(pe,he,ye,Te){if(typeof ye=="object"&&ye!==null&&ye.type===g&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case c:e:{for(var Ae=ye.key;he!==null;){if(he.key===Ae){if(Ae=ye.type,Ae===g){if(he.tag===7){m(pe,he.sibling),Te=k(he,ye.props.children),Te.return=pe,pe=Te;break e}}else if(he.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===R&&ox(Ae)===he.type){m(pe,he.sibling),Te=k(he,ye.props),Ra(Te,ye),Te.return=pe,pe=Te;break e}m(pe,he);break}else i(pe,he);he=he.sibling}ye.type===g?(Te=vr(ye.props.children,pe.mode,Te,ye.key),Te.return=pe,pe=Te):(Te=pl(ye.type,ye.key,ye.props,null,pe.mode,Te),Ra(Te,ye),Te.return=pe,pe=Te)}return F(pe);case u:e:{for(Ae=ye.key;he!==null;){if(he.key===Ae)if(he.tag===4&&he.stateNode.containerInfo===ye.containerInfo&&he.stateNode.implementation===ye.implementation){m(pe,he.sibling),Te=k(he,ye.children||[]),Te.return=pe,pe=Te;break e}else{m(pe,he);break}else i(pe,he);he=he.sibling}Te=Ku(ye,pe.mode,Te),Te.return=pe,pe=Te}return F(pe);case R:return Ae=ye._init,ye=Ae(ye._payload),lt(pe,he,ye,Te)}if(q(ye))return Ue(pe,he,ye,Te);if(ne(ye)){if(Ae=ne(ye),typeof Ae!="function")throw Error(s(150));return ye=Ae.call(ye),Be(pe,he,ye,Te)}if(typeof ye.then=="function")return lt(pe,he,Al(ye),Te);if(ye.$$typeof===j)return lt(pe,he,vl(pe,ye),Te);Rl(pe,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,he!==null&&he.tag===6?(m(pe,he.sibling),Te=k(he,ye),Te.return=pe,pe=Te):(m(pe,he),Te=Wu(ye,pe.mode,Te),Te.return=pe,pe=Te),F(pe)):m(pe,he)}return function(pe,he,ye,Te){try{Aa=0;var Ae=lt(pe,he,ye,Te);return bs=null,Ae}catch(Fe){if(Fe===ka||Fe===Sl)throw Fe;var Ke=mn(29,Fe,null,pe.mode);return Ke.lanes=Te,Ke.return=pe,Ke}finally{}}}var vs=lx(!0),cx=lx(!1),Nn=L(null),qn=null;function Hi(n){var i=n.alternate;G(Dt,Dt.current&1),G(Nn,n),qn===null&&(i===null||gs.current!==null||i.memoizedState!==null)&&(qn=n)}function ux(n){if(n.tag===22){if(G(Dt,Dt.current),G(Nn,n),qn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(qn=n)}}else Ui()}function Ui(){G(Dt,Dt.current),G(Nn,Nn.current)}function yi(n){I(Nn),qn===n&&(qn=null),I(Dt)}var Dt=L(0);function Pl(n){for(var i=n;i!==null;){if(i.tag===13){var m=i.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||yh(m)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Md(n,i,m,v){i=n.memoizedState,m=m(v,i),m=m==null?i:f({},i,m),n.memoizedState=m,n.lanes===0&&(n.updateQueue.baseState=m)}var Ed={enqueueSetState:function(n,i,m){n=n._reactInternals;var v=yn(),k=Bi(v);k.payload=i,m!=null&&(k.callback=m),i=Vi(n,k,v),i!==null&&(bn(i,n,v),Ta(i,n,v))},enqueueReplaceState:function(n,i,m){n=n._reactInternals;var v=yn(),k=Bi(v);k.tag=1,k.payload=i,m!=null&&(k.callback=m),i=Vi(n,k,v),i!==null&&(bn(i,n,v),Ta(i,n,v))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var m=yn(),v=Bi(m);v.tag=2,i!=null&&(v.callback=i),i=Vi(n,v,m),i!==null&&(bn(i,n,m),Ta(i,n,m))}};function dx(n,i,m,v,k,_,F){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(v,_,F):i.prototype&&i.prototype.isPureReactComponent?!pa(m,v)||!pa(k,_):!0}function hx(n,i,m,v){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(m,v),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(m,v),i.state!==n&&Ed.enqueueReplaceState(i,i.state,null)}function Mr(n,i){var m=i;if("ref"in i){m={};for(var v in i)v!=="ref"&&(m[v]=i[v])}if(n=n.defaultProps){m===i&&(m=f({},m));for(var k in n)m[k]===void 0&&(m[k]=n[k])}return m}var Ll=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function fx(n){Ll(n)}function mx(n){console.error(n)}function gx(n){Ll(n)}function Fl(n,i){try{var m=n.onUncaughtError;m(i.value,{componentStack:i.stack})}catch(v){setTimeout(function(){throw v})}}function px(n,i,m){try{var v=n.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function Od(n,i,m){return m=Bi(m),m.tag=3,m.payload={element:null},m.callback=function(){Fl(n,i)},m}function xx(n){return n=Bi(n),n.tag=3,n}function yx(n,i,m,v){var k=m.type.getDerivedStateFromError;if(typeof k=="function"){var _=v.value;n.payload=function(){return k(_)},n.callback=function(){px(i,m,v)}}var F=m.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(n.callback=function(){px(i,m,v),typeof k!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var U=v.stack;this.componentDidCatch(v.value,{componentStack:U!==null?U:""})})}function CC(n,i,m,v,k){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(i=m.alternate,i!==null&&wa(i,m,k,!0),m=Nn.current,m!==null){switch(m.tag){case 13:return qn===null?th():m.alternate===null&&yt===0&&(yt=3),m.flags&=-257,m.flags|=65536,m.lanes=k,v===ad?m.flags|=16384:(i=m.updateQueue,i===null?m.updateQueue=new Set([v]):i.add(v),ih(n,v,k)),!1;case 22:return m.flags|=65536,v===ad?m.flags|=16384:(i=m.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=i):(m=i.retryQueue,m===null?i.retryQueue=new Set([v]):m.add(v)),ih(n,v,k)),!1}throw Error(s(435,m.tag))}return ih(n,v,k),th(),!1}if(it)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=k,v!==Ju&&(n=Error(s(422),{cause:v}),va(kn(n,m)))):(v!==Ju&&(i=Error(s(423),{cause:v}),va(kn(i,m))),n=n.current.alternate,n.flags|=65536,k&=-k,n.lanes|=k,v=kn(v,m),k=Od(n.stateNode,v,k),cd(n,k),yt!==4&&(yt=2)),!1;var _=Error(s(520),{cause:v});if(_=kn(_,m),Va===null?Va=[_]:Va.push(_),yt!==4&&(yt=2),i===null)return!0;v=kn(v,m),m=i;do{switch(m.tag){case 3:return m.flags|=65536,n=k&-k,m.lanes|=n,n=Od(m.stateNode,v,n),cd(m,n),!1;case 1:if(i=m.type,_=m.stateNode,(m.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ki===null||!Ki.has(_))))return m.flags|=65536,k&=-k,m.lanes|=k,k=xx(k),yx(k,n,m,v),cd(m,k),!1}m=m.return}while(m!==null);return!1}var bx=Error(s(461)),Bt=!1;function Ut(n,i,m,v){i.child=n===null?cx(i,null,m,v):vs(i,n.child,m,v)}function vx(n,i,m,v,k){m=m.render;var _=i.ref;if("ref"in v){var F={};for(var U in v)U!=="ref"&&(F[U]=v[U])}else F=v;return Tr(i),v=md(n,i,m,F,_,k),U=gd(),n!==null&&!Bt?(pd(n,i,k),bi(n,i,k)):(it&&U&&Zu(i),i.flags|=1,Ut(n,i,v,k),i.child)}function wx(n,i,m,v,k){if(n===null){var _=m.type;return typeof _=="function"&&!qu(_)&&_.defaultProps===void 0&&m.compare===null?(i.tag=15,i.type=_,Sx(n,i,_,v,k)):(n=pl(m.type,null,v,i,i.mode,k),n.ref=i.ref,n.return=i,i.child=n)}if(_=n.child,!Id(n,k)){var F=_.memoizedProps;if(m=m.compare,m=m!==null?m:pa,m(F,v)&&n.ref===i.ref)return bi(n,i,k)}return i.flags|=1,n=hi(_,v),n.ref=i.ref,n.return=i,i.child=n}function Sx(n,i,m,v,k){if(n!==null){var _=n.memoizedProps;if(pa(_,v)&&n.ref===i.ref)if(Bt=!1,i.pendingProps=v=_,Id(n,k))(n.flags&131072)!==0&&(Bt=!0);else return i.lanes=n.lanes,bi(n,i,k)}return Dd(n,i,m,v,k)}function Cx(n,i,m){var v=i.pendingProps,k=v.children,_=n!==null?n.memoizedState:null;if(v.mode==="hidden"){if((i.flags&128)!==0){if(v=_!==null?_.baseLanes|m:m,n!==null){for(k=i.child=n.child,_=0;k!==null;)_=_|k.lanes|k.childLanes,k=k.sibling;i.childLanes=_&~v}else i.childLanes=0,i.child=null;return kx(n,i,v,m)}if((m&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&wl(i,_!==null?_.cachePool:null),_!==null?Sp(i,_):dd(),ux(i);else return i.lanes=i.childLanes=536870912,kx(n,i,_!==null?_.baseLanes|m:m,m)}else _!==null?(wl(i,_.cachePool),Sp(i,_),Ui(),i.memoizedState=null):(n!==null&&wl(i,null),dd(),Ui());return Ut(n,i,k,m),i.child}function kx(n,i,m,v){var k=sd();return k=k===null?null:{parent:Ot._currentValue,pool:k},i.memoizedState={baseLanes:m,cachePool:k},n!==null&&wl(i,null),dd(),ux(i),n!==null&&wa(n,i,v,!0),null}function zl(n,i){var m=i.ref;if(m===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(n===null||n.ref!==m)&&(i.flags|=4194816)}}function Dd(n,i,m,v,k){return Tr(i),m=md(n,i,m,v,void 0,k),v=gd(),n!==null&&!Bt?(pd(n,i,k),bi(n,i,k)):(it&&v&&Zu(i),i.flags|=1,Ut(n,i,m,k),i.child)}function jx(n,i,m,v,k,_){return Tr(i),i.updateQueue=null,m=kp(i,v,m,k),Cp(n),v=gd(),n!==null&&!Bt?(pd(n,i,_),bi(n,i,_)):(it&&v&&Zu(i),i.flags|=1,Ut(n,i,m,_),i.child)}function Tx(n,i,m,v,k){if(Tr(i),i.stateNode===null){var _=us,F=m.contextType;typeof F=="object"&&F!==null&&(_=Zt(F)),_=new m(v,_),i.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ed,i.stateNode=_,_._reactInternals=i,_=i.stateNode,_.props=v,_.state=i.memoizedState,_.refs={},od(i),F=m.contextType,_.context=typeof F=="object"&&F!==null?Zt(F):us,_.state=i.memoizedState,F=m.getDerivedStateFromProps,typeof F=="function"&&(Md(i,m,F,v),_.state=i.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(F=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),F!==_.state&&Ed.enqueueReplaceState(_,_.state,null),Na(i,v,_,k),_a(),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308),v=!0}else if(n===null){_=i.stateNode;var U=i.memoizedProps,oe=Mr(m,U);_.props=oe;var ve=_.context,je=m.contextType;F=us,typeof je=="object"&&je!==null&&(F=Zt(je));var _e=m.getDerivedStateFromProps;je=typeof _e=="function"||typeof _.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,je||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U||ve!==F)&&hx(i,_,v,F),Ii=!1;var we=i.memoizedState;_.state=we,Na(i,v,_,k),_a(),ve=i.memoizedState,U||we!==ve||Ii?(typeof _e=="function"&&(Md(i,m,_e,v),ve=i.memoizedState),(oe=Ii||dx(i,m,oe,v,we,ve,F))?(je||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=v,i.memoizedState=ve),_.props=v,_.state=ve,_.context=F,v=oe):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),v=!1)}else{_=i.stateNode,ld(n,i),F=i.memoizedProps,je=Mr(m,F),_.props=je,_e=i.pendingProps,we=_.context,ve=m.contextType,oe=us,typeof ve=="object"&&ve!==null&&(oe=Zt(ve)),U=m.getDerivedStateFromProps,(ve=typeof U=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F!==_e||we!==oe)&&hx(i,_,v,oe),Ii=!1,we=i.memoizedState,_.state=we,Na(i,v,_,k),_a();var Se=i.memoizedState;F!==_e||we!==Se||Ii||n!==null&&n.dependencies!==null&&bl(n.dependencies)?(typeof U=="function"&&(Md(i,m,U,v),Se=i.memoizedState),(je=Ii||dx(i,m,je,v,we,Se,oe)||n!==null&&n.dependencies!==null&&bl(n.dependencies))?(ve||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(v,Se,oe),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(v,Se,oe)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||F===n.memoizedProps&&we===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||F===n.memoizedProps&&we===n.memoizedState||(i.flags|=1024),i.memoizedProps=v,i.memoizedState=Se),_.props=v,_.state=Se,_.context=oe,v=je):(typeof _.componentDidUpdate!="function"||F===n.memoizedProps&&we===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||F===n.memoizedProps&&we===n.memoizedState||(i.flags|=1024),v=!1)}return _=v,zl(n,i),v=(i.flags&128)!==0,_||v?(_=i.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:_.render(),i.flags|=1,n!==null&&v?(i.child=vs(i,n.child,null,k),i.child=vs(i,null,m,k)):Ut(n,i,m,k),i.memoizedState=_.state,n=i.child):n=bi(n,i,k),n}function _x(n,i,m,v){return ba(),i.flags|=256,Ut(n,i,m,v),i.child}var Ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rd(n){return{baseLanes:n,cachePool:mp()}}function Pd(n,i,m){return n=n!==null?n.childLanes&~m:0,i&&(n|=Mn),n}function Nx(n,i,m){var v=i.pendingProps,k=!1,_=(i.flags&128)!==0,F;if((F=_)||(F=n!==null&&n.memoizedState===null?!1:(Dt.current&2)!==0),F&&(k=!0,i.flags&=-129),F=(i.flags&32)!==0,i.flags&=-33,n===null){if(it){if(k?Hi(i):Ui(),it){var U=xt,oe;if(oe=U){e:{for(oe=U,U=Gn;oe.nodeType!==8;){if(!U){U=null;break e}if(oe=In(oe.nextSibling),oe===null){U=null;break e}}U=oe}U!==null?(i.memoizedState={dehydrated:U,treeContext:wr!==null?{id:fi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},oe=mn(18,null,null,0),oe.stateNode=U,oe.return=i,i.child=oe,tn=i,xt=null,oe=!0):oe=!1}oe||kr(i)}if(U=i.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return yh(U)?i.lanes=32:i.lanes=536870912,null;yi(i)}return U=v.children,v=v.fallback,k?(Ui(),k=i.mode,U=Il({mode:"hidden",children:U},k),v=vr(v,k,m,null),U.return=i,v.return=i,U.sibling=v,i.child=U,k=i.child,k.memoizedState=Rd(m),k.childLanes=Pd(n,F,m),i.memoizedState=Ad,v):(Hi(i),Ld(i,U))}if(oe=n.memoizedState,oe!==null&&(U=oe.dehydrated,U!==null)){if(_)i.flags&256?(Hi(i),i.flags&=-257,i=Fd(n,i,m)):i.memoizedState!==null?(Ui(),i.child=n.child,i.flags|=128,i=null):(Ui(),k=v.fallback,U=i.mode,v=Il({mode:"visible",children:v.children},U),k=vr(k,U,m,null),k.flags|=2,v.return=i,k.return=i,v.sibling=k,i.child=v,vs(i,n.child,null,m),v=i.child,v.memoizedState=Rd(m),v.childLanes=Pd(n,F,m),i.memoizedState=Ad,i=k);else if(Hi(i),yh(U)){if(F=U.nextSibling&&U.nextSibling.dataset,F)var ve=F.dgst;F=ve,v=Error(s(419)),v.stack="",v.digest=F,va({value:v,source:null,stack:null}),i=Fd(n,i,m)}else if(Bt||wa(n,i,m,!1),F=(m&n.childLanes)!==0,Bt||F){if(F=ut,F!==null&&(v=m&-m,v=(v&42)!==0?1:bu(v),v=(v&(F.suspendedLanes|m))!==0?0:v,v!==0&&v!==oe.retryLane))throw oe.retryLane=v,cs(n,v),bn(F,n,v),bx;U.data==="$?"||th(),i=Fd(n,i,m)}else U.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=oe.treeContext,xt=In(U.nextSibling),tn=i,it=!0,Cr=null,Gn=!1,n!==null&&(Tn[_n++]=fi,Tn[_n++]=mi,Tn[_n++]=wr,fi=n.id,mi=n.overflow,wr=i),i=Ld(i,v.children),i.flags|=4096);return i}return k?(Ui(),k=v.fallback,U=i.mode,oe=n.child,ve=oe.sibling,v=hi(oe,{mode:"hidden",children:v.children}),v.subtreeFlags=oe.subtreeFlags&65011712,ve!==null?k=hi(ve,k):(k=vr(k,U,m,null),k.flags|=2),k.return=i,v.return=i,v.sibling=k,i.child=v,v=k,k=i.child,U=n.child.memoizedState,U===null?U=Rd(m):(oe=U.cachePool,oe!==null?(ve=Ot._currentValue,oe=oe.parent!==ve?{parent:ve,pool:ve}:oe):oe=mp(),U={baseLanes:U.baseLanes|m,cachePool:oe}),k.memoizedState=U,k.childLanes=Pd(n,F,m),i.memoizedState=Ad,v):(Hi(i),m=n.child,n=m.sibling,m=hi(m,{mode:"visible",children:v.children}),m.return=i,m.sibling=null,n!==null&&(F=i.deletions,F===null?(i.deletions=[n],i.flags|=16):F.push(n)),i.child=m,i.memoizedState=null,m)}function Ld(n,i){return i=Il({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Il(n,i){return n=mn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Fd(n,i,m){return vs(i,n.child,null,m),n=Ld(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Mx(n,i,m){n.lanes|=i;var v=n.alternate;v!==null&&(v.lanes|=i),td(n.return,i,m)}function zd(n,i,m,v,k){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:k}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=v,_.tail=m,_.tailMode=k)}function Ex(n,i,m){var v=i.pendingProps,k=v.revealOrder,_=v.tail;if(Ut(n,i,v.children,m),v=Dt.current,(v&2)!==0)v=v&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mx(n,m,i);else if(n.tag===19)Mx(n,m,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}v&=1}switch(G(Dt,v),k){case"forwards":for(m=i.child,k=null;m!==null;)n=m.alternate,n!==null&&Pl(n)===null&&(k=m),m=m.sibling;m=k,m===null?(k=i.child,i.child=null):(k=m.sibling,m.sibling=null),zd(i,!1,k,m,_);break;case"backwards":for(m=null,k=i.child,i.child=null;k!==null;){if(n=k.alternate,n!==null&&Pl(n)===null){i.child=k;break}n=k.sibling,k.sibling=m,m=k,k=n}zd(i,!0,m,null,_);break;case"together":zd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function bi(n,i,m){if(n!==null&&(i.dependencies=n.dependencies),Wi|=i.lanes,(m&i.childLanes)===0)if(n!==null){if(wa(n,i,m,!1),(m&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,m=hi(n,n.pendingProps),i.child=m,m.return=i;n.sibling!==null;)n=n.sibling,m=m.sibling=hi(n,n.pendingProps),m.return=i;m.sibling=null}return i.child}function Id(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&bl(n)))}function kC(n,i,m){switch(i.tag){case 3:ue(i,i.stateNode.containerInfo),zi(i,Ot,n.memoizedState.cache),ba();break;case 27:case 5:ie(i);break;case 4:ue(i,i.stateNode.containerInfo);break;case 10:zi(i,i.type,i.memoizedProps.value);break;case 13:var v=i.memoizedState;if(v!==null)return v.dehydrated!==null?(Hi(i),i.flags|=128,null):(m&i.child.childLanes)!==0?Nx(n,i,m):(Hi(i),n=bi(n,i,m),n!==null?n.sibling:null);Hi(i);break;case 19:var k=(n.flags&128)!==0;if(v=(m&i.childLanes)!==0,v||(wa(n,i,m,!1),v=(m&i.childLanes)!==0),k){if(v)return Ex(n,i,m);i.flags|=128}if(k=i.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),G(Dt,Dt.current),v)break;return null;case 22:case 23:return i.lanes=0,Cx(n,i,m);case 24:zi(i,Ot,n.memoizedState.cache)}return bi(n,i,m)}function Ox(n,i,m){if(n!==null)if(n.memoizedProps!==i.pendingProps)Bt=!0;else{if(!Id(n,m)&&(i.flags&128)===0)return Bt=!1,kC(n,i,m);Bt=(n.flags&131072)!==0}else Bt=!1,it&&(i.flags&1048576)!==0&&op(i,yl,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var v=i.elementType,k=v._init;if(v=k(v._payload),i.type=v,typeof v=="function")qu(v)?(n=Mr(v,n),i.tag=1,i=Tx(null,i,v,n,m)):(i.tag=0,i=Dd(null,i,v,n,m));else{if(v!=null){if(k=v.$$typeof,k===T){i.tag=11,i=vx(null,i,v,n,m);break e}else if(k===A){i.tag=14,i=wx(null,i,v,n,m);break e}}throw i=se(v)||v,Error(s(306,i,""))}}return i;case 0:return Dd(n,i,i.type,i.pendingProps,m);case 1:return v=i.type,k=Mr(v,i.pendingProps),Tx(n,i,v,k,m);case 3:e:{if(ue(i,i.stateNode.containerInfo),n===null)throw Error(s(387));v=i.pendingProps;var _=i.memoizedState;k=_.element,ld(n,i),Na(i,v,null,m);var F=i.memoizedState;if(v=F.cache,zi(i,Ot,v),v!==_.cache&&nd(i,[Ot],m,!0),_a(),v=F.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:F.cache},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){i=_x(n,i,v,m);break e}else if(v!==k){k=kn(Error(s(424)),i),va(k),i=_x(n,i,v,m);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(xt=In(n.firstChild),tn=i,it=!0,Cr=null,Gn=!0,m=cx(i,null,v,m),i.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ba(),v===k){i=bi(n,i,m);break e}Ut(n,i,v,m)}i=i.child}return i;case 26:return zl(n,i),n===null?(m=P0(i.type,null,i.pendingProps,null))?i.memoizedState=m:it||(m=i.type,n=i.pendingProps,v=Jl(te.current).createElement(m),v[Kt]=i,v[sn]=n,Yt(v,m,n),It(v),i.stateNode=v):i.memoizedState=P0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ie(i),n===null&&it&&(v=i.stateNode=D0(i.type,i.pendingProps,te.current),tn=i,Gn=!0,k=xt,Ji(i.type)?(bh=k,xt=In(v.firstChild)):xt=k),Ut(n,i,i.pendingProps.children,m),zl(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&it&&((k=v=xt)&&(v=QC(v,i.type,i.pendingProps,Gn),v!==null?(i.stateNode=v,tn=i,xt=In(v.firstChild),Gn=!1,k=!0):k=!1),k||kr(i)),ie(i),k=i.type,_=i.pendingProps,F=n!==null?n.memoizedProps:null,v=_.children,gh(k,_)?v=null:F!==null&&gh(k,F)&&(i.flags|=32),i.memoizedState!==null&&(k=md(n,i,pC,null,null,m),Ka._currentValue=k),zl(n,i),Ut(n,i,v,m),i.child;case 6:return n===null&&it&&((n=m=xt)&&(m=JC(m,i.pendingProps,Gn),m!==null?(i.stateNode=m,tn=i,xt=null,n=!0):n=!1),n||kr(i)),null;case 13:return Nx(n,i,m);case 4:return ue(i,i.stateNode.containerInfo),v=i.pendingProps,n===null?i.child=vs(i,null,v,m):Ut(n,i,v,m),i.child;case 11:return vx(n,i,i.type,i.pendingProps,m);case 7:return Ut(n,i,i.pendingProps,m),i.child;case 8:return Ut(n,i,i.pendingProps.children,m),i.child;case 12:return Ut(n,i,i.pendingProps.children,m),i.child;case 10:return v=i.pendingProps,zi(i,i.type,v.value),Ut(n,i,v.children,m),i.child;case 9:return k=i.type._context,v=i.pendingProps.children,Tr(i),k=Zt(k),v=v(k),i.flags|=1,Ut(n,i,v,m),i.child;case 14:return wx(n,i,i.type,i.pendingProps,m);case 15:return Sx(n,i,i.type,i.pendingProps,m);case 19:return Ex(n,i,m);case 31:return v=i.pendingProps,m=i.mode,v={mode:v.mode,children:v.children},n===null?(m=Il(v,m),m.ref=i.ref,i.child=m,m.return=i,i=m):(m=hi(n.child,v),m.ref=i.ref,i.child=m,m.return=i,i=m),i;case 22:return Cx(n,i,m);case 24:return Tr(i),v=Zt(Ot),n===null?(k=sd(),k===null&&(k=ut,_=id(),k.pooledCache=_,_.refCount++,_!==null&&(k.pooledCacheLanes|=m),k=_),i.memoizedState={parent:v,cache:k},od(i),zi(i,Ot,k)):((n.lanes&m)!==0&&(ld(n,i),Na(i,null,null,m),_a()),k=n.memoizedState,_=i.memoizedState,k.parent!==v?(k={parent:v,cache:v},i.memoizedState=k,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=k),zi(i,Ot,v)):(v=_.cache,zi(i,Ot,v),v!==k.cache&&nd(i,[Ot],m,!0))),Ut(n,i,i.pendingProps.children,m),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function vi(n){n.flags|=4}function Dx(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!B0(i)){if(i=Nn.current,i!==null&&((tt&4194048)===tt?qn!==null:(tt&62914560)!==tt&&(tt&536870912)===0||i!==qn))throw ja=ad,gp;n.flags|=8192}}function Bl(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ug():536870912,n.lanes|=i,ks|=i)}function Pa(n,i){if(!it)switch(n.tailMode){case"hidden":i=n.tail;for(var m=null;i!==null;)i.alternate!==null&&(m=i),i=i.sibling;m===null?n.tail=null:m.sibling=null;break;case"collapsed":m=n.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:v.sibling=null}}function mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,m=0,v=0;if(i)for(var k=n.child;k!==null;)m|=k.lanes|k.childLanes,v|=k.subtreeFlags&65011712,v|=k.flags&65011712,k.return=n,k=k.sibling;else for(k=n.child;k!==null;)m|=k.lanes|k.childLanes,v|=k.subtreeFlags,v|=k.flags,k.return=n,k=k.sibling;return n.subtreeFlags|=v,n.childLanes=m,i}function jC(n,i,m){var v=i.pendingProps;switch(Qu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return m=i.stateNode,v=null,n!==null&&(v=n.memoizedState.cache),i.memoizedState.cache!==v&&(i.flags|=2048),pi(Ot),le(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(n===null||n.child===null)&&(ya(i)?vi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,up())),mt(i),null;case 26:return m=i.memoizedState,n===null?(vi(i),m!==null?(mt(i),Dx(i,m)):(mt(i),i.flags&=-16777217)):m?m!==n.memoizedState?(vi(i),mt(i),Dx(i,m)):(mt(i),i.flags&=-16777217):(n.memoizedProps!==v&&vi(i),mt(i),i.flags&=-16777217),null;case 27:Z(i),m=te.current;var k=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==v&&vi(i);else{if(!v){if(i.stateNode===null)throw Error(s(166));return mt(i),null}n=B.current,ya(i)?lp(i):(n=D0(k,v,m),i.stateNode=n,vi(i))}return mt(i),null;case 5:if(Z(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==v&&vi(i);else{if(!v){if(i.stateNode===null)throw Error(s(166));return mt(i),null}if(n=B.current,ya(i))lp(i);else{switch(k=Jl(te.current),n){case 1:n=k.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:n=k.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":n=k.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":n=k.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof v.is=="string"?k.createElement("select",{is:v.is}):k.createElement("select"),v.multiple?n.multiple=!0:v.size&&(n.size=v.size);break;default:n=typeof v.is=="string"?k.createElement(m,{is:v.is}):k.createElement(m)}}n[Kt]=i,n[sn]=v;e:for(k=i.child;k!==null;){if(k.tag===5||k.tag===6)n.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===i)break e;for(;k.sibling===null;){if(k.return===null||k.return===i)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}i.stateNode=n;e:switch(Yt(n,m,v),m){case"button":case"input":case"select":case"textarea":n=!!v.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&vi(i)}}return mt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==v&&vi(i);else{if(typeof v!="string"&&i.stateNode===null)throw Error(s(166));if(n=te.current,ya(i)){if(n=i.stateNode,m=i.memoizedProps,v=null,k=tn,k!==null)switch(k.tag){case 27:case 5:v=k.memoizedProps}n[Kt]=i,n=!!(n.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||j0(n.nodeValue,m)),n||kr(i)}else n=Jl(n).createTextNode(v),n[Kt]=i,i.stateNode=n}return mt(i),null;case 13:if(v=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(k=ya(i),v!==null&&v.dehydrated!==null){if(n===null){if(!k)throw Error(s(318));if(k=i.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(s(317));k[Kt]=i}else ba(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),k=!1}else k=up(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=k),k=!0;if(!k)return i.flags&256?(yi(i),i):(yi(i),null)}if(yi(i),(i.flags&128)!==0)return i.lanes=m,i;if(m=v!==null,n=n!==null&&n.memoizedState!==null,m){v=i.child,k=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(k=v.alternate.memoizedState.cachePool.pool);var _=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(_=v.memoizedState.cachePool.pool),_!==k&&(v.flags|=2048)}return m!==n&&m&&(i.child.flags|=8192),Bl(i,i.updateQueue),mt(i),null;case 4:return le(),n===null&&uh(i.stateNode.containerInfo),mt(i),null;case 10:return pi(i.type),mt(i),null;case 19:if(I(Dt),k=i.memoizedState,k===null)return mt(i),null;if(v=(i.flags&128)!==0,_=k.rendering,_===null)if(v)Pa(k,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=Pl(n),_!==null){for(i.flags|=128,Pa(k,!1),n=_.updateQueue,i.updateQueue=n,Bl(i,n),i.subtreeFlags=0,n=m,m=i.child;m!==null;)ap(m,n),m=m.sibling;return G(Dt,Dt.current&1|2),i.child}n=n.sibling}k.tail!==null&&W()>Hl&&(i.flags|=128,v=!0,Pa(k,!1),i.lanes=4194304)}else{if(!v)if(n=Pl(_),n!==null){if(i.flags|=128,v=!0,n=n.updateQueue,i.updateQueue=n,Bl(i,n),Pa(k,!0),k.tail===null&&k.tailMode==="hidden"&&!_.alternate&&!it)return mt(i),null}else 2*W()-k.renderingStartTime>Hl&&m!==536870912&&(i.flags|=128,v=!0,Pa(k,!1),i.lanes=4194304);k.isBackwards?(_.sibling=i.child,i.child=_):(n=k.last,n!==null?n.sibling=_:i.child=_,k.last=_)}return k.tail!==null?(i=k.tail,k.rendering=i,k.tail=i.sibling,k.renderingStartTime=W(),i.sibling=null,n=Dt.current,G(Dt,v?n&1|2:n&1),i):(mt(i),null);case 22:case 23:return yi(i),hd(),v=i.memoizedState!==null,n!==null?n.memoizedState!==null!==v&&(i.flags|=8192):v&&(i.flags|=8192),v?(m&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),m=i.updateQueue,m!==null&&Bl(i,m.retryQueue),m=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(m=n.memoizedState.cachePool.pool),v=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(v=i.memoizedState.cachePool.pool),v!==m&&(i.flags|=2048),n!==null&&I(_r),null;case 24:return m=null,n!==null&&(m=n.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),pi(Ot),mt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function TC(n,i){switch(Qu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return pi(Ot),le(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Z(i),null;case 13:if(yi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ba()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return I(Dt),null;case 4:return le(),null;case 10:return pi(i.type),null;case 22:case 23:return yi(i),hd(),n!==null&&I(_r),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return pi(Ot),null;case 25:return null;default:return null}}function Ax(n,i){switch(Qu(i),i.tag){case 3:pi(Ot),le();break;case 26:case 27:case 5:Z(i);break;case 4:le();break;case 13:yi(i);break;case 19:I(Dt);break;case 10:pi(i.type);break;case 22:case 23:yi(i),hd(),n!==null&&I(_r);break;case 24:pi(Ot)}}function La(n,i){try{var m=i.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var k=v.next;m=k;do{if((m.tag&n)===n){v=void 0;var _=m.create,F=m.inst;v=_(),F.destroy=v}m=m.next}while(m!==k)}}catch(U){ct(i,i.return,U)}}function Xi(n,i,m){try{var v=i.updateQueue,k=v!==null?v.lastEffect:null;if(k!==null){var _=k.next;v=_;do{if((v.tag&n)===n){var F=v.inst,U=F.destroy;if(U!==void 0){F.destroy=void 0,k=i;var oe=m,ve=U;try{ve()}catch(je){ct(k,oe,je)}}}v=v.next}while(v!==_)}}catch(je){ct(i,i.return,je)}}function Rx(n){var i=n.updateQueue;if(i!==null){var m=n.stateNode;try{wp(i,m)}catch(v){ct(n,n.return,v)}}}function Px(n,i,m){m.props=Mr(n.type,n.memoizedProps),m.state=n.memoizedState;try{m.componentWillUnmount()}catch(v){ct(n,i,v)}}function Fa(n,i){try{var m=n.ref;if(m!==null){switch(n.tag){case 26:case 27:case 5:var v=n.stateNode;break;case 30:v=n.stateNode;break;default:v=n.stateNode}typeof m=="function"?n.refCleanup=m(v):m.current=v}}catch(k){ct(n,i,k)}}function Wn(n,i){var m=n.ref,v=n.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(k){ct(n,i,k)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(k){ct(n,i,k)}else m.current=null}function Lx(n){var i=n.type,m=n.memoizedProps,v=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(k){ct(n,n.return,k)}}function Bd(n,i,m){try{var v=n.stateNode;GC(v,n.type,m,i),v[sn]=i}catch(k){ct(n,n.return,k)}}function Fx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ji(n.type)||n.tag===4}function Vd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Fx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ji(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $d(n,i,m){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(n,i):(i=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,i.appendChild(n),m=m._reactRootContainer,m!=null||i.onclick!==null||(i.onclick=Ql));else if(v!==4&&(v===27&&Ji(n.type)&&(m=n.stateNode,i=null),n=n.child,n!==null))for($d(n,i,m),n=n.sibling;n!==null;)$d(n,i,m),n=n.sibling}function Vl(n,i,m){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?m.insertBefore(n,i):m.appendChild(n);else if(v!==4&&(v===27&&Ji(n.type)&&(m=n.stateNode),n=n.child,n!==null))for(Vl(n,i,m),n=n.sibling;n!==null;)Vl(n,i,m),n=n.sibling}function zx(n){var i=n.stateNode,m=n.memoizedProps;try{for(var v=n.type,k=i.attributes;k.length;)i.removeAttributeNode(k[0]);Yt(i,v,m),i[Kt]=n,i[sn]=m}catch(_){ct(n,n.return,_)}}var wi=!1,St=!1,Hd=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function _C(n,i){if(n=n.containerInfo,fh=sc,n=Kg(n),Vu(n)){if("selectionStart"in n)var m={start:n.selectionStart,end:n.selectionEnd};else e:{m=(m=n.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var k=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{m.nodeType,_.nodeType}catch{m=null;break e}var F=0,U=-1,oe=-1,ve=0,je=0,_e=n,we=null;t:for(;;){for(var Se;_e!==m||k!==0&&_e.nodeType!==3||(U=F+k),_e!==_||v!==0&&_e.nodeType!==3||(oe=F+v),_e.nodeType===3&&(F+=_e.nodeValue.length),(Se=_e.firstChild)!==null;)we=_e,_e=Se;for(;;){if(_e===n)break t;if(we===m&&++ve===k&&(U=F),we===_&&++je===v&&(oe=F),(Se=_e.nextSibling)!==null)break;_e=we,we=_e.parentNode}_e=Se}m=U===-1||oe===-1?null:{start:U,end:oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(mh={focusedElem:n,selectionRange:m},sc=!1,Vt=i;Vt!==null;)if(i=Vt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Vt=n;else for(;Vt!==null;){switch(i=Vt,_=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,m=i,k=_.memoizedProps,_=_.memoizedState,v=m.stateNode;try{var Ue=Mr(m.type,k,m.elementType===m.type);n=v.getSnapshotBeforeUpdate(Ue,_),v.__reactInternalSnapshotBeforeUpdate=n}catch(Be){ct(m,m.return,Be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,m=n.nodeType,m===9)xh(n);else if(m===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Vt=n;break}Vt=i.return}}function Bx(n,i,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:Yi(n,m),v&4&&La(5,m);break;case 1:if(Yi(n,m),v&4)if(n=m.stateNode,i===null)try{n.componentDidMount()}catch(F){ct(m,m.return,F)}else{var k=Mr(m.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(k,i,n.__reactInternalSnapshotBeforeUpdate)}catch(F){ct(m,m.return,F)}}v&64&&Rx(m),v&512&&Fa(m,m.return);break;case 3:if(Yi(n,m),v&64&&(n=m.updateQueue,n!==null)){if(i=null,m.child!==null)switch(m.child.tag){case 27:case 5:i=m.child.stateNode;break;case 1:i=m.child.stateNode}try{wp(n,i)}catch(F){ct(m,m.return,F)}}break;case 27:i===null&&v&4&&zx(m);case 26:case 5:Yi(n,m),i===null&&v&4&&Lx(m),v&512&&Fa(m,m.return);break;case 12:Yi(n,m);break;case 13:Yi(n,m),v&4&&Hx(n,m),v&64&&(n=m.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(m=LC.bind(null,m),ek(n,m))));break;case 22:if(v=m.memoizedState!==null||wi,!v){i=i!==null&&i.memoizedState!==null||St,k=wi;var _=St;wi=v,(St=i)&&!_?Gi(n,m,(m.subtreeFlags&8772)!==0):Yi(n,m),wi=k,St=_}break;case 30:break;default:Yi(n,m)}}function Vx(n){var i=n.alternate;i!==null&&(n.alternate=null,Vx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Su(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,ln=!1;function Si(n,i,m){for(m=m.child;m!==null;)$x(n,i,m),m=m.sibling}function $x(n,i,m){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Ne,m)}catch{}switch(m.tag){case 26:St||Wn(m,i),Si(n,i,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:St||Wn(m,i);var v=ht,k=ln;Ji(m.type)&&(ht=m.stateNode,ln=!1),Si(n,i,m),Ya(m.stateNode),ht=v,ln=k;break;case 5:St||Wn(m,i);case 6:if(v=ht,k=ln,ht=null,Si(n,i,m),ht=v,ln=k,ht!==null)if(ln)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(m.stateNode)}catch(_){ct(m,i,_)}else try{ht.removeChild(m.stateNode)}catch(_){ct(m,i,_)}break;case 18:ht!==null&&(ln?(n=ht,E0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,m.stateNode),eo(n)):E0(ht,m.stateNode));break;case 4:v=ht,k=ln,ht=m.stateNode.containerInfo,ln=!0,Si(n,i,m),ht=v,ln=k;break;case 0:case 11:case 14:case 15:St||Xi(2,m,i),St||Xi(4,m,i),Si(n,i,m);break;case 1:St||(Wn(m,i),v=m.stateNode,typeof v.componentWillUnmount=="function"&&Px(m,i,v)),Si(n,i,m);break;case 21:Si(n,i,m);break;case 22:St=(v=St)||m.memoizedState!==null,Si(n,i,m),St=v;break;default:Si(n,i,m)}}function Hx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{eo(n)}catch(m){ct(i,i.return,m)}}function NC(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Ix),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Ix),i;default:throw Error(s(435,n.tag))}}function Ud(n,i){var m=NC(n);i.forEach(function(v){var k=FC.bind(null,n,v);m.has(v)||(m.add(v),v.then(k,k))})}function gn(n,i){var m=i.deletions;if(m!==null)for(var v=0;v<m.length;v++){var k=m[v],_=n,F=i,U=F;e:for(;U!==null;){switch(U.tag){case 27:if(Ji(U.type)){ht=U.stateNode,ln=!1;break e}break;case 5:ht=U.stateNode,ln=!1;break e;case 3:case 4:ht=U.stateNode.containerInfo,ln=!0;break e}U=U.return}if(ht===null)throw Error(s(160));$x(_,F,k),ht=null,ln=!1,_=k.alternate,_!==null&&(_.return=null),k.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ux(i,n),i=i.sibling}var zn=null;function Ux(n,i){var m=n.alternate,v=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),v&4&&(Xi(3,n,n.return),La(3,n),Xi(5,n,n.return));break;case 1:gn(i,n),pn(n),v&512&&(St||m===null||Wn(m,m.return)),v&64&&wi&&(n=n.updateQueue,n!==null&&(v=n.callbacks,v!==null&&(m=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var k=zn;if(gn(i,n),pn(n),v&512&&(St||m===null||Wn(m,m.return)),v&4){var _=m!==null?m.memoizedState:null;if(v=n.memoizedState,m===null)if(v===null)if(n.stateNode===null){e:{v=n.type,m=n.memoizedProps,k=k.ownerDocument||k;t:switch(v){case"title":_=k.getElementsByTagName("title")[0],(!_||_[oa]||_[Kt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=k.createElement(v),k.head.insertBefore(_,k.querySelector("head > title"))),Yt(_,v,m),_[Kt]=n,It(_),v=_;break e;case"link":var F=z0("link","href",k).get(v+(m.href||""));if(F){for(var U=0;U<F.length;U++)if(_=F[U],_.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&_.getAttribute("rel")===(m.rel==null?null:m.rel)&&_.getAttribute("title")===(m.title==null?null:m.title)&&_.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){F.splice(U,1);break t}}_=k.createElement(v),Yt(_,v,m),k.head.appendChild(_);break;case"meta":if(F=z0("meta","content",k).get(v+(m.content||""))){for(U=0;U<F.length;U++)if(_=F[U],_.getAttribute("content")===(m.content==null?null:""+m.content)&&_.getAttribute("name")===(m.name==null?null:m.name)&&_.getAttribute("property")===(m.property==null?null:m.property)&&_.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&_.getAttribute("charset")===(m.charSet==null?null:m.charSet)){F.splice(U,1);break t}}_=k.createElement(v),Yt(_,v,m),k.head.appendChild(_);break;default:throw Error(s(468,v))}_[Kt]=n,It(_),v=_}n.stateNode=v}else I0(k,n.type,n.stateNode);else n.stateNode=F0(k,v,n.memoizedProps);else _!==v?(_===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):_.count--,v===null?I0(k,n.type,n.stateNode):F0(k,v,n.memoizedProps)):v===null&&n.stateNode!==null&&Bd(n,n.memoizedProps,m.memoizedProps)}break;case 27:gn(i,n),pn(n),v&512&&(St||m===null||Wn(m,m.return)),m!==null&&v&4&&Bd(n,n.memoizedProps,m.memoizedProps);break;case 5:if(gn(i,n),pn(n),v&512&&(St||m===null||Wn(m,m.return)),n.flags&32){k=n.stateNode;try{ns(k,"")}catch(Se){ct(n,n.return,Se)}}v&4&&n.stateNode!=null&&(k=n.memoizedProps,Bd(n,k,m!==null?m.memoizedProps:k)),v&1024&&(Hd=!0);break;case 6:if(gn(i,n),pn(n),v&4){if(n.stateNode===null)throw Error(s(162));v=n.memoizedProps,m=n.stateNode;try{m.nodeValue=v}catch(Se){ct(n,n.return,Se)}}break;case 3:if(nc=null,k=zn,zn=ec(i.containerInfo),gn(i,n),zn=k,pn(n),v&4&&m!==null&&m.memoizedState.isDehydrated)try{eo(i.containerInfo)}catch(Se){ct(n,n.return,Se)}Hd&&(Hd=!1,Xx(n));break;case 4:v=zn,zn=ec(n.stateNode.containerInfo),gn(i,n),pn(n),zn=v;break;case 12:gn(i,n),pn(n);break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Kd=W()),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,Ud(n,v)));break;case 22:k=n.memoizedState!==null;var oe=m!==null&&m.memoizedState!==null,ve=wi,je=St;if(wi=ve||k,St=je||oe,gn(i,n),St=je,wi=ve,pn(n),v&8192)e:for(i=n.stateNode,i._visibility=k?i._visibility&-2:i._visibility|1,k&&(m===null||oe||wi||St||Er(n)),m=null,i=n;;){if(i.tag===5||i.tag===26){if(m===null){oe=m=i;try{if(_=oe.stateNode,k)F=_.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{U=oe.stateNode;var _e=oe.memoizedProps.style,we=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;U.style.display=we==null||typeof we=="boolean"?"":(""+we).trim()}}catch(Se){ct(oe,oe.return,Se)}}}else if(i.tag===6){if(m===null){oe=i;try{oe.stateNode.nodeValue=k?"":oe.memoizedProps}catch(Se){ct(oe,oe.return,Se)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;m===i&&(m=null),i=i.return}m===i&&(m=null),i.sibling.return=i.return,i=i.sibling}v&4&&(v=n.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,Ud(n,m))));break;case 19:gn(i,n),pn(n),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,Ud(n,v)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var m,v=n.return;v!==null;){if(Fx(v)){m=v;break}v=v.return}if(m==null)throw Error(s(160));switch(m.tag){case 27:var k=m.stateNode,_=Vd(n);Vl(n,_,k);break;case 5:var F=m.stateNode;m.flags&32&&(ns(F,""),m.flags&=-33);var U=Vd(n);Vl(n,U,F);break;case 3:case 4:var oe=m.stateNode.containerInfo,ve=Vd(n);$d(n,ve,oe);break;default:throw Error(s(161))}}catch(je){ct(n,n.return,je)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Xx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Xx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Yi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Bx(n,i.alternate,i),i=i.sibling}function Er(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Xi(4,i,i.return),Er(i);break;case 1:Wn(i,i.return);var m=i.stateNode;typeof m.componentWillUnmount=="function"&&Px(i,i.return,m),Er(i);break;case 27:Ya(i.stateNode);case 26:case 5:Wn(i,i.return),Er(i);break;case 22:i.memoizedState===null&&Er(i);break;case 30:Er(i);break;default:Er(i)}n=n.sibling}}function Gi(n,i,m){for(m=m&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var v=i.alternate,k=n,_=i,F=_.flags;switch(_.tag){case 0:case 11:case 15:Gi(k,_,m),La(4,_);break;case 1:if(Gi(k,_,m),v=_,k=v.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(ve){ct(v,v.return,ve)}if(v=_,k=v.updateQueue,k!==null){var U=v.stateNode;try{var oe=k.shared.hiddenCallbacks;if(oe!==null)for(k.shared.hiddenCallbacks=null,k=0;k<oe.length;k++)vp(oe[k],U)}catch(ve){ct(v,v.return,ve)}}m&&F&64&&Rx(_),Fa(_,_.return);break;case 27:zx(_);case 26:case 5:Gi(k,_,m),m&&v===null&&F&4&&Lx(_),Fa(_,_.return);break;case 12:Gi(k,_,m);break;case 13:Gi(k,_,m),m&&F&4&&Hx(k,_);break;case 22:_.memoizedState===null&&Gi(k,_,m),Fa(_,_.return);break;case 30:break;default:Gi(k,_,m)}i=i.sibling}}function Xd(n,i){var m=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(m=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==m&&(n!=null&&n.refCount++,m!=null&&Sa(m))}function Yd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Sa(n))}function Kn(n,i,m,v){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yx(n,i,m,v),i=i.sibling}function Yx(n,i,m,v){var k=i.flags;switch(i.tag){case 0:case 11:case 15:Kn(n,i,m,v),k&2048&&La(9,i);break;case 1:Kn(n,i,m,v);break;case 3:Kn(n,i,m,v),k&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Sa(n)));break;case 12:if(k&2048){Kn(n,i,m,v),n=i.stateNode;try{var _=i.memoizedProps,F=_.id,U=_.onPostCommit;typeof U=="function"&&U(F,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(oe){ct(i,i.return,oe)}}else Kn(n,i,m,v);break;case 13:Kn(n,i,m,v);break;case 23:break;case 22:_=i.stateNode,F=i.alternate,i.memoizedState!==null?_._visibility&2?Kn(n,i,m,v):za(n,i):_._visibility&2?Kn(n,i,m,v):(_._visibility|=2,ws(n,i,m,v,(i.subtreeFlags&10256)!==0)),k&2048&&Xd(F,i);break;case 24:Kn(n,i,m,v),k&2048&&Yd(i.alternate,i);break;default:Kn(n,i,m,v)}}function ws(n,i,m,v,k){for(k=k&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var _=n,F=i,U=m,oe=v,ve=F.flags;switch(F.tag){case 0:case 11:case 15:ws(_,F,U,oe,k),La(8,F);break;case 23:break;case 22:var je=F.stateNode;F.memoizedState!==null?je._visibility&2?ws(_,F,U,oe,k):za(_,F):(je._visibility|=2,ws(_,F,U,oe,k)),k&&ve&2048&&Xd(F.alternate,F);break;case 24:ws(_,F,U,oe,k),k&&ve&2048&&Yd(F.alternate,F);break;default:ws(_,F,U,oe,k)}i=i.sibling}}function za(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var m=n,v=i,k=v.flags;switch(v.tag){case 22:za(m,v),k&2048&&Xd(v.alternate,v);break;case 24:za(m,v),k&2048&&Yd(v.alternate,v);break;default:za(m,v)}i=i.sibling}}var Ia=8192;function Ss(n){if(n.subtreeFlags&Ia)for(n=n.child;n!==null;)Gx(n),n=n.sibling}function Gx(n){switch(n.tag){case 26:Ss(n),n.flags&Ia&&n.memoizedState!==null&&fk(zn,n.memoizedState,n.memoizedProps);break;case 5:Ss(n);break;case 3:case 4:var i=zn;zn=ec(n.stateNode.containerInfo),Ss(n),zn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Ia,Ia=16777216,Ss(n),Ia=i):Ss(n));break;default:Ss(n)}}function qx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ba(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var m=0;m<i.length;m++){var v=i[m];Vt=v,Kx(v,n)}qx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wx(n),n=n.sibling}function Wx(n){switch(n.tag){case 0:case 11:case 15:Ba(n),n.flags&2048&&Xi(9,n,n.return);break;case 3:Ba(n);break;case 12:Ba(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,$l(n)):Ba(n);break;default:Ba(n)}}function $l(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var m=0;m<i.length;m++){var v=i[m];Vt=v,Kx(v,n)}qx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Xi(8,i,i.return),$l(i);break;case 22:m=i.stateNode,m._visibility&2&&(m._visibility&=-3,$l(i));break;default:$l(i)}n=n.sibling}}function Kx(n,i){for(;Vt!==null;){var m=Vt;switch(m.tag){case 0:case 11:case 15:Xi(8,m,i);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Sa(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,Vt=v;else e:for(m=n;Vt!==null;){v=Vt;var k=v.sibling,_=v.return;if(Vx(v),v===m){Vt=null;break e}if(k!==null){k.return=_,Vt=k;break e}Vt=_}}}var MC={getCacheForType:function(n){var i=Zt(Ot),m=i.data.get(n);return m===void 0&&(m=n(),i.data.set(n,m)),m}},EC=typeof WeakMap=="function"?WeakMap:Map,rt=0,ut=null,Ze=null,tt=0,st=0,xn=null,qi=!1,Cs=!1,Gd=!1,Ci=0,yt=0,Wi=0,Or=0,qd=0,Mn=0,ks=0,Va=null,cn=null,Wd=!1,Kd=0,Hl=1/0,Ul=null,Ki=null,Xt=0,Zi=null,js=null,Ts=0,Zd=0,Qd=null,Zx=null,$a=0,Jd=null;function yn(){if((rt&2)!==0&&tt!==0)return tt&-tt;if(P.T!==null){var n=fs;return n!==0?n:ah()}return fg()}function Qx(){Mn===0&&(Mn=(tt&536870912)===0||it?cg():536870912);var n=Nn.current;return n!==null&&(n.flags|=32),Mn}function bn(n,i,m){(n===ut&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(_s(n,0),Qi(n,tt,Mn,!1)),aa(n,m),((rt&2)===0||n!==ut)&&(n===ut&&((rt&2)===0&&(Or|=m),yt===4&&Qi(n,tt,Mn,!1)),Zn(n))}function Jx(n,i,m){if((rt&6)!==0)throw Error(s(327));var v=!m&&(i&124)===0&&(i&n.expiredLanes)===0||gr(n,i),k=v?AC(n,i):nh(n,i,!0),_=v;do{if(k===0){Cs&&!v&&Qi(n,i,0,!1);break}else{if(m=n.current.alternate,_&&!OC(m)){k=nh(n,i,!1),_=!1;continue}if(k===2){if(_=i,n.errorRecoveryDisabledLanes&_)var F=0;else F=n.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){i=F;e:{var U=n;k=Va;var oe=U.current.memoizedState.isDehydrated;if(oe&&(_s(U,F).flags|=256),F=nh(U,F,!1),F!==2){if(Gd&&!oe){U.errorRecoveryDisabledLanes|=_,Or|=_,k=4;break e}_=cn,cn=k,_!==null&&(cn===null?cn=_:cn.push.apply(cn,_))}k=F}if(_=!1,k!==2)continue}}if(k===1){_s(n,0),Qi(n,i,0,!0);break}e:{switch(v=n,_=k,_){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Qi(v,i,Mn,!qi);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(k=Kd+300-W(),10<k)){if(Qi(v,i,Mn,!qi),ci(v,0,!0)!==0)break e;v.timeoutHandle=N0(e0.bind(null,v,m,cn,Ul,Wd,i,Mn,Or,ks,qi,_,2,-0,0),k);break e}e0(v,m,cn,Ul,Wd,i,Mn,Or,ks,qi,_,0,-0,0)}}break}while(!0);Zn(n)}function e0(n,i,m,v,k,_,F,U,oe,ve,je,_e,we,Se){if(n.timeoutHandle=-1,_e=i.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Wa={stylesheets:null,count:0,unsuspend:hk},Gx(i),_e=mk(),_e!==null)){n.cancelPendingCommit=_e(o0.bind(null,n,i,_,m,v,k,F,U,oe,je,1,we,Se)),Qi(n,_,F,!ve);return}o0(n,i,_,m,v,k,F,U,oe)}function OC(n){for(var i=n;;){var m=i.tag;if((m===0||m===11||m===15)&&i.flags&16384&&(m=i.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var k=m[v],_=k.getSnapshot;k=k.value;try{if(!fn(_(),k))return!1}catch{return!1}}if(m=i.child,i.subtreeFlags&16384&&m!==null)m.return=i,i=m;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qi(n,i,m,v){i&=~qd,i&=~Or,n.suspendedLanes|=i,n.pingedLanes&=~i,v&&(n.warmLanes|=i),v=n.expirationTimes;for(var k=i;0<k;){var _=31-$e(k),F=1<<_;v[_]=-1,k&=~F}m!==0&&dg(n,m,i)}function Xl(){return(rt&6)===0?(Ha(0),!1):!0}function eh(){if(Ze!==null){if(st===0)var n=Ze.return;else n=Ze,gi=jr=null,xd(n),bs=null,Aa=0,n=Ze;for(;n!==null;)Ax(n.alternate,n),n=n.return;Ze=null}}function _s(n,i){var m=n.timeoutHandle;m!==-1&&(n.timeoutHandle=-1,WC(m)),m=n.cancelPendingCommit,m!==null&&(n.cancelPendingCommit=null,m()),eh(),ut=n,Ze=m=hi(n.current,null),tt=i,st=0,xn=null,qi=!1,Cs=gr(n,i),Gd=!1,ks=Mn=qd=Or=Wi=yt=0,cn=Va=null,Wd=!1,(i&8)!==0&&(i|=i&32);var v=n.entangledLanes;if(v!==0)for(n=n.entanglements,v&=i;0<v;){var k=31-$e(v),_=1<<k;i|=n[k],v&=~_}return Ci=i,fl(),m}function t0(n,i){qe=null,P.H=Dl,i===ka||i===Sl?(i=yp(),st=3):i===gp?(i=yp(),st=4):st=i===bx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,xn=i,Ze===null&&(yt=1,Fl(n,kn(i,n.current)))}function n0(){var n=P.H;return P.H=Dl,n===null?Dl:n}function i0(){var n=P.A;return P.A=MC,n}function th(){yt=4,qi||(tt&4194048)!==tt&&Nn.current!==null||(Cs=!0),(Wi&134217727)===0&&(Or&134217727)===0||ut===null||Qi(ut,tt,Mn,!1)}function nh(n,i,m){var v=rt;rt|=2;var k=n0(),_=i0();(ut!==n||tt!==i)&&(Ul=null,_s(n,i)),i=!1;var F=yt;e:do try{if(st!==0&&Ze!==null){var U=Ze,oe=xn;switch(st){case 8:eh(),F=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var ve=st;if(st=0,xn=null,Ns(n,U,oe,ve),m&&Cs){F=0;break e}break;default:ve=st,st=0,xn=null,Ns(n,U,oe,ve)}}DC(),F=yt;break}catch(je){t0(n,je)}while(!0);return i&&n.shellSuspendCounter++,gi=jr=null,rt=v,P.H=k,P.A=_,Ze===null&&(ut=null,tt=0,fl()),F}function DC(){for(;Ze!==null;)r0(Ze)}function AC(n,i){var m=rt;rt|=2;var v=n0(),k=i0();ut!==n||tt!==i?(Ul=null,Hl=W()+500,_s(n,i)):Cs=gr(n,i);e:do try{if(st!==0&&Ze!==null){i=Ze;var _=xn;t:switch(st){case 1:st=0,xn=null,Ns(n,i,_,1);break;case 2:case 9:if(pp(_)){st=0,xn=null,s0(i);break}i=function(){st!==2&&st!==9||ut!==n||(st=7),Zn(n)},_.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:pp(_)?(st=0,xn=null,s0(i)):(st=0,xn=null,Ns(n,i,_,7));break;case 5:var F=null;switch(Ze.tag){case 26:F=Ze.memoizedState;case 5:case 27:var U=Ze;if(!F||B0(F)){st=0,xn=null;var oe=U.sibling;if(oe!==null)Ze=oe;else{var ve=U.return;ve!==null?(Ze=ve,Yl(ve)):Ze=null}break t}}st=0,xn=null,Ns(n,i,_,5);break;case 6:st=0,xn=null,Ns(n,i,_,6);break;case 8:eh(),yt=6;break e;default:throw Error(s(462))}}RC();break}catch(je){t0(n,je)}while(!0);return gi=jr=null,P.H=v,P.A=k,rt=m,Ze!==null?0:(ut=null,tt=0,fl(),yt)}function RC(){for(;Ze!==null&&!me();)r0(Ze)}function r0(n){var i=Ox(n.alternate,n,Ci);n.memoizedProps=n.pendingProps,i===null?Yl(n):Ze=i}function s0(n){var i=n,m=i.alternate;switch(i.tag){case 15:case 0:i=jx(m,i,i.pendingProps,i.type,void 0,tt);break;case 11:i=jx(m,i,i.pendingProps,i.type.render,i.ref,tt);break;case 5:xd(i);default:Ax(m,i),i=Ze=ap(i,Ci),i=Ox(m,i,Ci)}n.memoizedProps=n.pendingProps,i===null?Yl(n):Ze=i}function Ns(n,i,m,v){gi=jr=null,xd(i),bs=null,Aa=0;var k=i.return;try{if(CC(n,k,i,m,tt)){yt=1,Fl(n,kn(m,n.current)),Ze=null;return}}catch(_){if(k!==null)throw Ze=k,_;yt=1,Fl(n,kn(m,n.current)),Ze=null;return}i.flags&32768?(it||v===1?n=!0:Cs||(tt&536870912)!==0?n=!1:(qi=n=!0,(v===2||v===9||v===3||v===6)&&(v=Nn.current,v!==null&&v.tag===13&&(v.flags|=16384))),a0(i,n)):Yl(i)}function Yl(n){var i=n;do{if((i.flags&32768)!==0){a0(i,qi);return}n=i.return;var m=jC(i.alternate,i,Ci);if(m!==null){Ze=m;return}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=n}while(i!==null);yt===0&&(yt=5)}function a0(n,i){do{var m=TC(n.alternate,n);if(m!==null){m.flags&=32767,Ze=m;return}if(m=n.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!i&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=m}while(n!==null);yt=6,Ze=null}function o0(n,i,m,v,k,_,F,U,oe){n.cancelPendingCommit=null;do Gl();while(Xt!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(_=i.lanes|i.childLanes,_|=Yu,h2(n,m,_,F,U,oe),n===ut&&(Ze=ut=null,tt=0),js=i,Zi=n,Ts=m,Zd=_,Qd=k,Zx=v,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,zC(ee,function(){return h0(),null})):(n.callbackNode=null,n.callbackPriority=0),v=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||v){v=P.T,P.T=null,k=$.p,$.p=2,F=rt,rt|=4;try{_C(n,i,m)}finally{rt=F,$.p=k,P.T=v}}Xt=1,l0(),c0(),u0()}}function l0(){if(Xt===1){Xt=0;var n=Zi,i=js,m=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||m){m=P.T,P.T=null;var v=$.p;$.p=2;var k=rt;rt|=4;try{Ux(i,n);var _=mh,F=Kg(n.containerInfo),U=_.focusedElem,oe=_.selectionRange;if(F!==U&&U&&U.ownerDocument&&Wg(U.ownerDocument.documentElement,U)){if(oe!==null&&Vu(U)){var ve=oe.start,je=oe.end;if(je===void 0&&(je=ve),"selectionStart"in U)U.selectionStart=ve,U.selectionEnd=Math.min(je,U.value.length);else{var _e=U.ownerDocument||document,we=_e&&_e.defaultView||window;if(we.getSelection){var Se=we.getSelection(),Ue=U.textContent.length,Be=Math.min(oe.start,Ue),lt=oe.end===void 0?Be:Math.min(oe.end,Ue);!Se.extend&&Be>lt&&(F=lt,lt=Be,Be=F);var pe=qg(U,Be),he=qg(U,lt);if(pe&&he&&(Se.rangeCount!==1||Se.anchorNode!==pe.node||Se.anchorOffset!==pe.offset||Se.focusNode!==he.node||Se.focusOffset!==he.offset)){var ye=_e.createRange();ye.setStart(pe.node,pe.offset),Se.removeAllRanges(),Be>lt?(Se.addRange(ye),Se.extend(he.node,he.offset)):(ye.setEnd(he.node,he.offset),Se.addRange(ye))}}}}for(_e=[],Se=U;Se=Se.parentNode;)Se.nodeType===1&&_e.push({element:Se,left:Se.scrollLeft,top:Se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<_e.length;U++){var Te=_e[U];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}sc=!!fh,mh=fh=null}finally{rt=k,$.p=v,P.T=m}}n.current=i,Xt=2}}function c0(){if(Xt===2){Xt=0;var n=Zi,i=js,m=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||m){m=P.T,P.T=null;var v=$.p;$.p=2;var k=rt;rt|=4;try{Bx(n,i.alternate,i)}finally{rt=k,$.p=v,P.T=m}}Xt=3}}function u0(){if(Xt===4||Xt===3){Xt=0,be();var n=Zi,i=js,m=Ts,v=Zx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xt=5:(Xt=0,js=Zi=null,d0(n,n.pendingLanes));var k=n.pendingLanes;if(k===0&&(Ki=null),vu(m),i=i.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Ne,i,void 0,(i.current.flags&128)===128)}catch{}if(v!==null){i=P.T,k=$.p,$.p=2,P.T=null;try{for(var _=n.onRecoverableError,F=0;F<v.length;F++){var U=v[F];_(U.value,{componentStack:U.stack})}}finally{P.T=i,$.p=k}}(Ts&3)!==0&&Gl(),Zn(n),k=n.pendingLanes,(m&4194090)!==0&&(k&42)!==0?n===Jd?$a++:($a=0,Jd=n):$a=0,Ha(0)}}function d0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Sa(i)))}function Gl(n){return l0(),c0(),u0(),h0()}function h0(){if(Xt!==5)return!1;var n=Zi,i=Zd;Zd=0;var m=vu(Ts),v=P.T,k=$.p;try{$.p=32>m?32:m,P.T=null,m=Qd,Qd=null;var _=Zi,F=Ts;if(Xt=0,js=Zi=null,Ts=0,(rt&6)!==0)throw Error(s(331));var U=rt;if(rt|=4,Wx(_.current),Yx(_,_.current,F,m),rt=U,Ha(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Ne,_)}catch{}return!0}finally{$.p=k,P.T=v,d0(n,i)}}function f0(n,i,m){i=kn(m,i),i=Od(n.stateNode,i,2),n=Vi(n,i,2),n!==null&&(aa(n,2),Zn(n))}function ct(n,i,m){if(n.tag===3)f0(n,n,m);else for(;i!==null;){if(i.tag===3){f0(i,n,m);break}else if(i.tag===1){var v=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Ki===null||!Ki.has(v))){n=kn(m,n),m=xx(2),v=Vi(i,m,2),v!==null&&(yx(m,v,i,n),aa(v,2),Zn(v));break}}i=i.return}}function ih(n,i,m){var v=n.pingCache;if(v===null){v=n.pingCache=new EC;var k=new Set;v.set(i,k)}else k=v.get(i),k===void 0&&(k=new Set,v.set(i,k));k.has(m)||(Gd=!0,k.add(m),n=PC.bind(null,n,i,m),i.then(n,n))}function PC(n,i,m){var v=n.pingCache;v!==null&&v.delete(i),n.pingedLanes|=n.suspendedLanes&m,n.warmLanes&=~m,ut===n&&(tt&m)===m&&(yt===4||yt===3&&(tt&62914560)===tt&&300>W()-Kd?(rt&2)===0&&_s(n,0):qd|=m,ks===tt&&(ks=0)),Zn(n)}function m0(n,i){i===0&&(i=ug()),n=cs(n,i),n!==null&&(aa(n,i),Zn(n))}function LC(n){var i=n.memoizedState,m=0;i!==null&&(m=i.retryLane),m0(n,m)}function FC(n,i){var m=0;switch(n.tag){case 13:var v=n.stateNode,k=n.memoizedState;k!==null&&(m=k.retryLane);break;case 19:v=n.stateNode;break;case 22:v=n.stateNode._retryCache;break;default:throw Error(s(314))}v!==null&&v.delete(i),m0(n,m)}function zC(n,i){return ae(n,i)}var ql=null,Ms=null,rh=!1,Wl=!1,sh=!1,Dr=0;function Zn(n){n!==Ms&&n.next===null&&(Ms===null?ql=Ms=n:Ms=Ms.next=n),Wl=!0,rh||(rh=!0,BC())}function Ha(n,i){if(!sh&&Wl){sh=!0;do for(var m=!1,v=ql;v!==null;){if(n!==0){var k=v.pendingLanes;if(k===0)var _=0;else{var F=v.suspendedLanes,U=v.pingedLanes;_=(1<<31-$e(42|n)+1)-1,_&=k&~(F&~U),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(m=!0,y0(v,_))}else _=tt,_=ci(v,v===ut?_:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(_&3)===0||gr(v,_)||(m=!0,y0(v,_));v=v.next}while(m);sh=!1}}function IC(){g0()}function g0(){Wl=rh=!1;var n=0;Dr!==0&&(qC()&&(n=Dr),Dr=0);for(var i=W(),m=null,v=ql;v!==null;){var k=v.next,_=p0(v,i);_===0?(v.next=null,m===null?ql=k:m.next=k,k===null&&(Ms=m)):(m=v,(n!==0||(_&3)!==0)&&(Wl=!0)),v=k}Ha(n)}function p0(n,i){for(var m=n.suspendedLanes,v=n.pingedLanes,k=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var F=31-$e(_),U=1<<F,oe=k[F];oe===-1?((U&m)===0||(U&v)!==0)&&(k[F]=tl(U,i)):oe<=i&&(n.expiredLanes|=U),_&=~U}if(i=ut,m=tt,m=ci(n,n===i?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v=n.callbackNode,m===0||n===i&&(st===2||st===9)||n.cancelPendingCommit!==null)return v!==null&&v!==null&&ce(v),n.callbackNode=null,n.callbackPriority=0;if((m&3)===0||gr(n,m)){if(i=m&-m,i===n.callbackPriority)return i;switch(v!==null&&ce(v),vu(m)){case 2:case 8:m=Y;break;case 32:m=ee;break;case 268435456:m=xe;break;default:m=ee}return v=x0.bind(null,n),m=ae(m,v),n.callbackPriority=i,n.callbackNode=m,i}return v!==null&&v!==null&&ce(v),n.callbackPriority=2,n.callbackNode=null,2}function x0(n,i){if(Xt!==0&&Xt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var m=n.callbackNode;if(Gl()&&n.callbackNode!==m)return null;var v=tt;return v=ci(n,n===ut?v:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v===0?null:(Jx(n,v,i),p0(n,W()),n.callbackNode!=null&&n.callbackNode===m?x0.bind(null,n):null)}function y0(n,i){if(Gl())return null;Jx(n,i,!0)}function BC(){KC(function(){(rt&6)!==0?ae(ge,IC):g0()})}function ah(){return Dr===0&&(Dr=cg()),Dr}function b0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:al(""+n)}function v0(n,i){var m=i.ownerDocument.createElement("input");return m.name=i.name,m.value=i.value,n.id&&m.setAttribute("form",n.id),i.parentNode.insertBefore(m,i),n=new FormData(n),m.parentNode.removeChild(m),n}function VC(n,i,m,v,k){if(i==="submit"&&m&&m.stateNode===k){var _=b0((k[sn]||null).action),F=v.submitter;F&&(i=(i=F[sn]||null)?b0(i.formAction):F.getAttribute("formAction"),i!==null&&(_=i,F=null));var U=new ul("action","action",null,v,k);n.push({event:U,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Dr!==0){var oe=F?v0(k,F):new FormData(k);Td(m,{pending:!0,data:oe,method:k.method,action:_},null,oe)}}else typeof _=="function"&&(U.preventDefault(),oe=F?v0(k,F):new FormData(k),Td(m,{pending:!0,data:oe,method:k.method,action:_},_,oe))},currentTarget:k}]})}}for(var oh=0;oh<Xu.length;oh++){var lh=Xu[oh],$C=lh.toLowerCase(),HC=lh[0].toUpperCase()+lh.slice(1);Fn($C,"on"+HC)}Fn(Jg,"onAnimationEnd"),Fn(ep,"onAnimationIteration"),Fn(tp,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(aC,"onTransitionRun"),Fn(oC,"onTransitionStart"),Fn(lC,"onTransitionCancel"),Fn(np,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ua));function w0(n,i){i=(i&4)!==0;for(var m=0;m<n.length;m++){var v=n[m],k=v.event;v=v.listeners;e:{var _=void 0;if(i)for(var F=v.length-1;0<=F;F--){var U=v[F],oe=U.instance,ve=U.currentTarget;if(U=U.listener,oe!==_&&k.isPropagationStopped())break e;_=U,k.currentTarget=ve;try{_(k)}catch(je){Ll(je)}k.currentTarget=null,_=oe}else for(F=0;F<v.length;F++){if(U=v[F],oe=U.instance,ve=U.currentTarget,U=U.listener,oe!==_&&k.isPropagationStopped())break e;_=U,k.currentTarget=ve;try{_(k)}catch(je){Ll(je)}k.currentTarget=null,_=oe}}}}function Qe(n,i){var m=i[wu];m===void 0&&(m=i[wu]=new Set);var v=n+"__bubble";m.has(v)||(S0(i,n,2,!1),m.add(v))}function ch(n,i,m){var v=0;i&&(v|=4),S0(m,n,v,i)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function uh(n){if(!n[Kl]){n[Kl]=!0,gg.forEach(function(m){m!=="selectionchange"&&(UC.has(m)||ch(m,!1,n),ch(m,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Kl]||(i[Kl]=!0,ch("selectionchange",!1,i))}}function S0(n,i,m,v){switch(Y0(i)){case 2:var k=xk;break;case 8:k=yk;break;default:k=kh}m=k.bind(null,i,m,n),k=void 0,!Du||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(k=!0),v?k!==void 0?n.addEventListener(i,m,{capture:!0,passive:k}):n.addEventListener(i,m,!0):k!==void 0?n.addEventListener(i,m,{passive:k}):n.addEventListener(i,m,!1)}function dh(n,i,m,v,k){var _=v;if((i&1)===0&&(i&2)===0&&v!==null)e:for(;;){if(v===null)return;var F=v.tag;if(F===3||F===4){var U=v.stateNode.containerInfo;if(U===k)break;if(F===4)for(F=v.return;F!==null;){var oe=F.tag;if((oe===3||oe===4)&&F.stateNode.containerInfo===k)return;F=F.return}for(;U!==null;){if(F=Kr(U),F===null)return;if(oe=F.tag,oe===5||oe===6||oe===26||oe===27){v=_=F;continue e}U=U.parentNode}}v=v.return}Mg(function(){var ve=_,je=Eu(m),_e=[];e:{var we=ip.get(n);if(we!==void 0){var Se=ul,Ue=n;switch(n){case"keypress":if(ll(m)===0)break e;case"keydown":case"keyup":Se=z2;break;case"focusin":Ue="focus",Se=Lu;break;case"focusout":Ue="blur",Se=Lu;break;case"beforeblur":case"afterblur":Se=Lu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=T2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=V2;break;case Jg:case ep:case tp:Se=M2;break;case np:Se=H2;break;case"scroll":case"scrollend":Se=k2;break;case"wheel":Se=X2;break;case"copy":case"cut":case"paste":Se=O2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Rg;break;case"toggle":case"beforetoggle":Se=G2}var Be=(i&4)!==0,lt=!Be&&(n==="scroll"||n==="scrollend"),pe=Be?we!==null?we+"Capture":null:we;Be=[];for(var he=ve,ye;he!==null;){var Te=he;if(ye=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ye===null||pe===null||(Te=ca(he,pe),Te!=null&&Be.push(Xa(he,Te,ye))),lt)break;he=he.return}0<Be.length&&(we=new Se(we,Ue,null,m,je),_e.push({event:we,listeners:Be}))}}if((i&7)===0){e:{if(we=n==="mouseover"||n==="pointerover",Se=n==="mouseout"||n==="pointerout",we&&m!==Mu&&(Ue=m.relatedTarget||m.fromElement)&&(Kr(Ue)||Ue[Wr]))break e;if((Se||we)&&(we=je.window===je?je:(we=je.ownerDocument)?we.defaultView||we.parentWindow:window,Se?(Ue=m.relatedTarget||m.toElement,Se=ve,Ue=Ue?Kr(Ue):null,Ue!==null&&(lt=b(Ue),Be=Ue.tag,Ue!==lt||Be!==5&&Be!==27&&Be!==6)&&(Ue=null)):(Se=null,Ue=ve),Se!==Ue)){if(Be=Dg,Te="onMouseLeave",pe="onMouseEnter",he="mouse",(n==="pointerout"||n==="pointerover")&&(Be=Rg,Te="onPointerLeave",pe="onPointerEnter",he="pointer"),lt=Se==null?we:la(Se),ye=Ue==null?we:la(Ue),we=new Be(Te,he+"leave",Se,m,je),we.target=lt,we.relatedTarget=ye,Te=null,Kr(je)===ve&&(Be=new Be(pe,he+"enter",Ue,m,je),Be.target=ye,Be.relatedTarget=lt,Te=Be),lt=Te,Se&&Ue)t:{for(Be=Se,pe=Ue,he=0,ye=Be;ye;ye=Es(ye))he++;for(ye=0,Te=pe;Te;Te=Es(Te))ye++;for(;0<he-ye;)Be=Es(Be),he--;for(;0<ye-he;)pe=Es(pe),ye--;for(;he--;){if(Be===pe||pe!==null&&Be===pe.alternate)break t;Be=Es(Be),pe=Es(pe)}Be=null}else Be=null;Se!==null&&C0(_e,we,Se,Be,!1),Ue!==null&&lt!==null&&C0(_e,lt,Ue,Be,!0)}}e:{if(we=ve?la(ve):window,Se=we.nodeName&&we.nodeName.toLowerCase(),Se==="select"||Se==="input"&&we.type==="file")var Ae=$g;else if(Bg(we))if(Hg)Ae=iC;else{Ae=tC;var Ke=eC}else Se=we.nodeName,!Se||Se.toLowerCase()!=="input"||we.type!=="checkbox"&&we.type!=="radio"?ve&&Nu(ve.elementType)&&(Ae=$g):Ae=nC;if(Ae&&(Ae=Ae(n,ve))){Vg(_e,Ae,m,je);break e}Ke&&Ke(n,we,ve),n==="focusout"&&ve&&we.type==="number"&&ve.memoizedProps.value!=null&&_u(we,"number",we.value)}switch(Ke=ve?la(ve):window,n){case"focusin":(Bg(Ke)||Ke.contentEditable==="true")&&(as=Ke,$u=ve,xa=null);break;case"focusout":xa=$u=as=null;break;case"mousedown":Hu=!0;break;case"contextmenu":case"mouseup":case"dragend":Hu=!1,Zg(_e,m,je);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":Zg(_e,m,je)}var Fe;if(zu)e:{switch(n){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ss?zg(n,m)&&(He="onCompositionEnd"):n==="keydown"&&m.keyCode===229&&(He="onCompositionStart");He&&(Pg&&m.locale!=="ko"&&(ss||He!=="onCompositionStart"?He==="onCompositionEnd"&&ss&&(Fe=Eg()):(Fi=je,Au="value"in Fi?Fi.value:Fi.textContent,ss=!0)),Ke=Zl(ve,He),0<Ke.length&&(He=new Ag(He,n,null,m,je),_e.push({event:He,listeners:Ke}),Fe?He.data=Fe:(Fe=Ig(m),Fe!==null&&(He.data=Fe)))),(Fe=W2?K2(n,m):Z2(n,m))&&(He=Zl(ve,"onBeforeInput"),0<He.length&&(Ke=new Ag("onBeforeInput","beforeinput",null,m,je),_e.push({event:Ke,listeners:He}),Ke.data=Fe)),VC(_e,n,ve,m,je)}w0(_e,i)})}function Xa(n,i,m){return{instance:n,listener:i,currentTarget:m}}function Zl(n,i){for(var m=i+"Capture",v=[];n!==null;){var k=n,_=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||_===null||(k=ca(n,m),k!=null&&v.unshift(Xa(n,k,_)),k=ca(n,i),k!=null&&v.push(Xa(n,k,_))),n.tag===3)return v;n=n.return}return[]}function Es(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function C0(n,i,m,v,k){for(var _=i._reactName,F=[];m!==null&&m!==v;){var U=m,oe=U.alternate,ve=U.stateNode;if(U=U.tag,oe!==null&&oe===v)break;U!==5&&U!==26&&U!==27||ve===null||(oe=ve,k?(ve=ca(m,_),ve!=null&&F.unshift(Xa(m,ve,oe))):k||(ve=ca(m,_),ve!=null&&F.push(Xa(m,ve,oe)))),m=m.return}F.length!==0&&n.push({event:i,listeners:F})}var XC=/\r\n?/g,YC=/\u0000|\uFFFD/g;function k0(n){return(typeof n=="string"?n:""+n).replace(XC,`
`).replace(YC,"")}function j0(n,i){return i=k0(i),k0(n)===i}function Ql(){}function ot(n,i,m,v,k,_){switch(m){case"children":typeof v=="string"?i==="body"||i==="textarea"&&v===""||ns(n,v):(typeof v=="number"||typeof v=="bigint")&&i!=="body"&&ns(n,""+v);break;case"className":il(n,"class",v);break;case"tabIndex":il(n,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":il(n,m,v);break;case"style":_g(n,v,_);break;case"data":if(i!=="object"){il(n,"data",v);break}case"src":case"href":if(v===""&&(i!=="a"||m!=="href")){n.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(m);break}v=al(""+v),n.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){n.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(m==="formAction"?(i!=="input"&&ot(n,i,"name",k.name,k,null),ot(n,i,"formEncType",k.formEncType,k,null),ot(n,i,"formMethod",k.formMethod,k,null),ot(n,i,"formTarget",k.formTarget,k,null)):(ot(n,i,"encType",k.encType,k,null),ot(n,i,"method",k.method,k,null),ot(n,i,"target",k.target,k,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(m);break}v=al(""+v),n.setAttribute(m,v);break;case"onClick":v!=null&&(n.onclick=Ql);break;case"onScroll":v!=null&&Qe("scroll",n);break;case"onScrollEnd":v!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(m=v.__html,m!=null){if(k.children!=null)throw Error(s(60));n.innerHTML=m}}break;case"multiple":n.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":n.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){n.removeAttribute("xlink:href");break}m=al(""+v),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(m,""+v):n.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(m,""):n.removeAttribute(m);break;case"capture":case"download":v===!0?n.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(m,v):n.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?n.setAttribute(m,v):n.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?n.removeAttribute(m):n.setAttribute(m,v);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),nl(n,"popover",v);break;case"xlinkActuate":ui(n,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ui(n,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ui(n,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ui(n,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ui(n,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ui(n,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ui(n,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ui(n,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ui(n,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":nl(n,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=S2.get(m)||m,nl(n,m,v))}}function hh(n,i,m,v,k,_){switch(m){case"style":_g(n,v,_);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(s(61));if(m=v.__html,m!=null){if(k.children!=null)throw Error(s(60));n.innerHTML=m}}break;case"children":typeof v=="string"?ns(n,v):(typeof v=="number"||typeof v=="bigint")&&ns(n,""+v);break;case"onScroll":v!=null&&Qe("scroll",n);break;case"onScrollEnd":v!=null&&Qe("scrollend",n);break;case"onClick":v!=null&&(n.onclick=Ql);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pg.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(k=m.endsWith("Capture"),i=m.slice(2,k?m.length-7:void 0),_=n[sn]||null,_=_!=null?_[m]:null,typeof _=="function"&&n.removeEventListener(i,_,k),typeof v=="function")){typeof _!="function"&&_!==null&&(m in n?n[m]=null:n.hasAttribute(m)&&n.removeAttribute(m)),n.addEventListener(i,v,k);break e}m in n?n[m]=v:v===!0?n.setAttribute(m,""):nl(n,m,v)}}}function Yt(n,i,m){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var v=!1,k=!1,_;for(_ in m)if(m.hasOwnProperty(_)){var F=m[_];if(F!=null)switch(_){case"src":v=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(n,i,_,F,m,null)}}k&&ot(n,i,"srcSet",m.srcSet,m,null),v&&ot(n,i,"src",m.src,m,null);return;case"input":Qe("invalid",n);var U=_=F=k=null,oe=null,ve=null;for(v in m)if(m.hasOwnProperty(v)){var je=m[v];if(je!=null)switch(v){case"name":k=je;break;case"type":F=je;break;case"checked":oe=je;break;case"defaultChecked":ve=je;break;case"value":_=je;break;case"defaultValue":U=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(s(137,i));break;default:ot(n,i,v,je,m,null)}}Cg(n,_,U,oe,ve,F,k,!1),rl(n);return;case"select":Qe("invalid",n),v=F=_=null;for(k in m)if(m.hasOwnProperty(k)&&(U=m[k],U!=null))switch(k){case"value":_=U;break;case"defaultValue":F=U;break;case"multiple":v=U;default:ot(n,i,k,U,m,null)}i=_,m=F,n.multiple=!!v,i!=null?ts(n,!!v,i,!1):m!=null&&ts(n,!!v,m,!0);return;case"textarea":Qe("invalid",n),_=k=v=null;for(F in m)if(m.hasOwnProperty(F)&&(U=m[F],U!=null))switch(F){case"value":v=U;break;case"defaultValue":k=U;break;case"children":_=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:ot(n,i,F,U,m,null)}jg(n,v,k,_),rl(n);return;case"option":for(oe in m)if(m.hasOwnProperty(oe)&&(v=m[oe],v!=null))switch(oe){case"selected":n.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:ot(n,i,oe,v,m,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(v=0;v<Ua.length;v++)Qe(Ua[v],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in m)if(m.hasOwnProperty(ve)&&(v=m[ve],v!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ot(n,i,ve,v,m,null)}return;default:if(Nu(i)){for(je in m)m.hasOwnProperty(je)&&(v=m[je],v!==void 0&&hh(n,i,je,v,m,void 0));return}}for(U in m)m.hasOwnProperty(U)&&(v=m[U],v!=null&&ot(n,i,U,v,m,null))}function GC(n,i,m,v){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,_=null,F=null,U=null,oe=null,ve=null,je=null;for(Se in m){var _e=m[Se];if(m.hasOwnProperty(Se)&&_e!=null)switch(Se){case"checked":break;case"value":break;case"defaultValue":oe=_e;default:v.hasOwnProperty(Se)||ot(n,i,Se,null,v,_e)}}for(var we in v){var Se=v[we];if(_e=m[we],v.hasOwnProperty(we)&&(Se!=null||_e!=null))switch(we){case"type":_=Se;break;case"name":k=Se;break;case"checked":ve=Se;break;case"defaultChecked":je=Se;break;case"value":F=Se;break;case"defaultValue":U=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(137,i));break;default:Se!==_e&&ot(n,i,we,Se,v,_e)}}Tu(n,F,U,oe,ve,je,_,k);return;case"select":Se=F=U=we=null;for(_ in m)if(oe=m[_],m.hasOwnProperty(_)&&oe!=null)switch(_){case"value":break;case"multiple":Se=oe;default:v.hasOwnProperty(_)||ot(n,i,_,null,v,oe)}for(k in v)if(_=v[k],oe=m[k],v.hasOwnProperty(k)&&(_!=null||oe!=null))switch(k){case"value":we=_;break;case"defaultValue":U=_;break;case"multiple":F=_;default:_!==oe&&ot(n,i,k,_,v,oe)}i=U,m=F,v=Se,we!=null?ts(n,!!m,we,!1):!!v!=!!m&&(i!=null?ts(n,!!m,i,!0):ts(n,!!m,m?[]:"",!1));return;case"textarea":Se=we=null;for(U in m)if(k=m[U],m.hasOwnProperty(U)&&k!=null&&!v.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ot(n,i,U,null,v,k)}for(F in v)if(k=v[F],_=m[F],v.hasOwnProperty(F)&&(k!=null||_!=null))switch(F){case"value":we=k;break;case"defaultValue":Se=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:k!==_&&ot(n,i,F,k,v,_)}kg(n,we,Se);return;case"option":for(var Ue in m)if(we=m[Ue],m.hasOwnProperty(Ue)&&we!=null&&!v.hasOwnProperty(Ue))switch(Ue){case"selected":n.selected=!1;break;default:ot(n,i,Ue,null,v,we)}for(oe in v)if(we=v[oe],Se=m[oe],v.hasOwnProperty(oe)&&we!==Se&&(we!=null||Se!=null))switch(oe){case"selected":n.selected=we&&typeof we!="function"&&typeof we!="symbol";break;default:ot(n,i,oe,we,v,Se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in m)we=m[Be],m.hasOwnProperty(Be)&&we!=null&&!v.hasOwnProperty(Be)&&ot(n,i,Be,null,v,we);for(ve in v)if(we=v[ve],Se=m[ve],v.hasOwnProperty(ve)&&we!==Se&&(we!=null||Se!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,i));break;default:ot(n,i,ve,we,v,Se)}return;default:if(Nu(i)){for(var lt in m)we=m[lt],m.hasOwnProperty(lt)&&we!==void 0&&!v.hasOwnProperty(lt)&&hh(n,i,lt,void 0,v,we);for(je in v)we=v[je],Se=m[je],!v.hasOwnProperty(je)||we===Se||we===void 0&&Se===void 0||hh(n,i,je,we,v,Se);return}}for(var pe in m)we=m[pe],m.hasOwnProperty(pe)&&we!=null&&!v.hasOwnProperty(pe)&&ot(n,i,pe,null,v,we);for(_e in v)we=v[_e],Se=m[_e],!v.hasOwnProperty(_e)||we===Se||we==null&&Se==null||ot(n,i,_e,we,v,Se)}var fh=null,mh=null;function Jl(n){return n.nodeType===9?n:n.ownerDocument}function T0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function gh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ph=null;function qC(){var n=window.event;return n&&n.type==="popstate"?n===ph?!1:(ph=n,!0):(ph=null,!1)}var N0=typeof setTimeout=="function"?setTimeout:void 0,WC=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof M0<"u"?function(n){return M0.resolve(null).then(n).catch(ZC)}:N0;function ZC(n){setTimeout(function(){throw n})}function Ji(n){return n==="head"}function E0(n,i){var m=i,v=0,k=0;do{var _=m.nextSibling;if(n.removeChild(m),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(0<v&&8>v){m=v;var F=n.ownerDocument;if(m&1&&Ya(F.documentElement),m&2&&Ya(F.body),m&4)for(m=F.head,Ya(m),F=m.firstChild;F;){var U=F.nextSibling,oe=F.nodeName;F[oa]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&F.rel.toLowerCase()==="stylesheet"||m.removeChild(F),F=U}}if(k===0){n.removeChild(_),eo(i);return}k--}else m==="$"||m==="$?"||m==="$!"?k++:v=m.charCodeAt(0)-48;else v=0;m=_}while(m);eo(i)}function xh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var m=i;switch(i=i.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":xh(m),Su(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}n.removeChild(m)}}function QC(n,i,m,v){for(;n.nodeType===1;){var k=m;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!v&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(v){if(!n[oa])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==k.rel||n.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||n.getAttribute("title")!==(k.title==null?null:k.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(k.src==null?null:k.src)||n.getAttribute("type")!==(k.type==null?null:k.type)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var _=k.name==null?null:""+k.name;if(k.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=In(n.nextSibling),n===null)break}return null}function JC(n,i,m){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!m||(n=In(n.nextSibling),n===null))return null;return n}function yh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function ek(n,i){var m=n.ownerDocument;if(n.data!=="$?"||m.readyState==="complete")i();else{var v=function(){i(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),n._reactRetry=v}}function In(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var bh=null;function O0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var m=n.data;if(m==="$"||m==="$!"||m==="$?"){if(i===0)return n;i--}else m==="/$"&&i++}n=n.previousSibling}return null}function D0(n,i,m){switch(i=Jl(m),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ya(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Su(n)}var En=new Map,A0=new Set;function ec(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ki=$.d;$.d={f:tk,r:nk,D:ik,C:rk,L:sk,m:ak,X:lk,S:ok,M:ck};function tk(){var n=ki.f(),i=Xl();return n||i}function nk(n){var i=Zr(n);i!==null&&i.tag===5&&i.type==="form"?Jp(i):ki.r(n)}var Os=typeof document>"u"?null:document;function R0(n,i,m){var v=Os;if(v&&typeof i=="string"&&i){var k=Cn(i);k='link[rel="'+n+'"][href="'+k+'"]',typeof m=="string"&&(k+='[crossorigin="'+m+'"]'),A0.has(k)||(A0.add(k),n={rel:n,crossOrigin:m,href:i},v.querySelector(k)===null&&(i=v.createElement("link"),Yt(i,"link",n),It(i),v.head.appendChild(i)))}}function ik(n){ki.D(n),R0("dns-prefetch",n,null)}function rk(n,i){ki.C(n,i),R0("preconnect",n,i)}function sk(n,i,m){ki.L(n,i,m);var v=Os;if(v&&n&&i){var k='link[rel="preload"][as="'+Cn(i)+'"]';i==="image"&&m&&m.imageSrcSet?(k+='[imagesrcset="'+Cn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(k+='[imagesizes="'+Cn(m.imageSizes)+'"]')):k+='[href="'+Cn(n)+'"]';var _=k;switch(i){case"style":_=Ds(n);break;case"script":_=As(n)}En.has(_)||(n=f({rel:"preload",href:i==="image"&&m&&m.imageSrcSet?void 0:n,as:i},m),En.set(_,n),v.querySelector(k)!==null||i==="style"&&v.querySelector(Ga(_))||i==="script"&&v.querySelector(qa(_))||(i=v.createElement("link"),Yt(i,"link",n),It(i),v.head.appendChild(i)))}}function ak(n,i){ki.m(n,i);var m=Os;if(m&&n){var v=i&&typeof i.as=="string"?i.as:"script",k='link[rel="modulepreload"][as="'+Cn(v)+'"][href="'+Cn(n)+'"]',_=k;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=As(n)}if(!En.has(_)&&(n=f({rel:"modulepreload",href:n},i),En.set(_,n),m.querySelector(k)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(qa(_)))return}v=m.createElement("link"),Yt(v,"link",n),It(v),m.head.appendChild(v)}}}function ok(n,i,m){ki.S(n,i,m);var v=Os;if(v&&n){var k=Qr(v).hoistableStyles,_=Ds(n);i=i||"default";var F=k.get(_);if(!F){var U={loading:0,preload:null};if(F=v.querySelector(Ga(_)))U.loading=5;else{n=f({rel:"stylesheet",href:n,"data-precedence":i},m),(m=En.get(_))&&vh(n,m);var oe=F=v.createElement("link");It(oe),Yt(oe,"link",n),oe._p=new Promise(function(ve,je){oe.onload=ve,oe.onerror=je}),oe.addEventListener("load",function(){U.loading|=1}),oe.addEventListener("error",function(){U.loading|=2}),U.loading|=4,tc(F,i,v)}F={type:"stylesheet",instance:F,count:1,state:U},k.set(_,F)}}}function lk(n,i){ki.X(n,i);var m=Os;if(m&&n){var v=Qr(m).hoistableScripts,k=As(n),_=v.get(k);_||(_=m.querySelector(qa(k)),_||(n=f({src:n,async:!0},i),(i=En.get(k))&&wh(n,i),_=m.createElement("script"),It(_),Yt(_,"link",n),m.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(k,_))}}function ck(n,i){ki.M(n,i);var m=Os;if(m&&n){var v=Qr(m).hoistableScripts,k=As(n),_=v.get(k);_||(_=m.querySelector(qa(k)),_||(n=f({src:n,async:!0,type:"module"},i),(i=En.get(k))&&wh(n,i),_=m.createElement("script"),It(_),Yt(_,"link",n),m.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(k,_))}}function P0(n,i,m,v){var k=(k=te.current)?ec(k):null;if(!k)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(i=Ds(m.href),m=Qr(k).hoistableStyles,v=m.get(i),v||(v={type:"style",instance:null,count:0,state:null},m.set(i,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){n=Ds(m.href);var _=Qr(k).hoistableStyles,F=_.get(n);if(F||(k=k.ownerDocument||k,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,F),(_=k.querySelector(Ga(n)))&&!_._p&&(F.instance=_,F.state.loading=5),En.has(n)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},En.set(n,m),_||uk(k,n,m,F.state))),i&&v===null)throw Error(s(528,""));return F}if(i&&v!==null)throw Error(s(529,""));return null;case"script":return i=m.async,m=m.src,typeof m=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=As(m),m=Qr(k).hoistableScripts,v=m.get(i),v||(v={type:"script",instance:null,count:0,state:null},m.set(i,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Ds(n){return'href="'+Cn(n)+'"'}function Ga(n){return'link[rel="stylesheet"]['+n+"]"}function L0(n){return f({},n,{"data-precedence":n.precedence,precedence:null})}function uk(n,i,m,v){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?v.loading=1:(i=n.createElement("link"),v.preload=i,i.addEventListener("load",function(){return v.loading|=1}),i.addEventListener("error",function(){return v.loading|=2}),Yt(i,"link",m),It(i),n.head.appendChild(i))}function As(n){return'[src="'+Cn(n)+'"]'}function qa(n){return"script[async]"+n}function F0(n,i,m){if(i.count++,i.instance===null)switch(i.type){case"style":var v=n.querySelector('style[data-href~="'+Cn(m.href)+'"]');if(v)return i.instance=v,It(v),v;var k=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(n.ownerDocument||n).createElement("style"),It(v),Yt(v,"style",k),tc(v,m.precedence,n),i.instance=v;case"stylesheet":k=Ds(m.href);var _=n.querySelector(Ga(k));if(_)return i.state.loading|=4,i.instance=_,It(_),_;v=L0(m),(k=En.get(k))&&vh(v,k),_=(n.ownerDocument||n).createElement("link"),It(_);var F=_;return F._p=new Promise(function(U,oe){F.onload=U,F.onerror=oe}),Yt(_,"link",v),i.state.loading|=4,tc(_,m.precedence,n),i.instance=_;case"script":return _=As(m.src),(k=n.querySelector(qa(_)))?(i.instance=k,It(k),k):(v=m,(k=En.get(_))&&(v=f({},m),wh(v,k)),n=n.ownerDocument||n,k=n.createElement("script"),It(k),Yt(k,"link",v),n.head.appendChild(k),i.instance=k);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(v=i.instance,i.state.loading|=4,tc(v,m.precedence,n));return i.instance}function tc(n,i,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=v.length?v[v.length-1]:null,_=k,F=0;F<v.length;F++){var U=v[F];if(U.dataset.precedence===i)_=U;else if(_!==k)break}_?_.parentNode.insertBefore(n,_.nextSibling):(i=m.nodeType===9?m.head:m,i.insertBefore(n,i.firstChild))}function vh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function wh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var nc=null;function z0(n,i,m){if(nc===null){var v=new Map,k=nc=new Map;k.set(m,v)}else k=nc,v=k.get(m),v||(v=new Map,k.set(m,v));if(v.has(n))return v;for(v.set(n,null),m=m.getElementsByTagName(n),k=0;k<m.length;k++){var _=m[k];if(!(_[oa]||_[Kt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var F=_.getAttribute(i)||"";F=n+F;var U=v.get(F);U?U.push(_):v.set(F,[_])}}return v}function I0(n,i,m){n=n.ownerDocument||n,n.head.insertBefore(m,i==="title"?n.querySelector("head > title"):null)}function dk(n,i,m){if(m===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function B0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Wa=null;function hk(){}function fk(n,i,m){if(Wa===null)throw Error(s(475));var v=Wa;if(i.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var k=Ds(m.href),_=n.querySelector(Ga(k));if(_){n=_._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(v.count++,v=ic.bind(v),n.then(v,v)),i.state.loading|=4,i.instance=_,It(_);return}_=n.ownerDocument||n,m=L0(m),(k=En.get(k))&&vh(m,k),_=_.createElement("link"),It(_);var F=_;F._p=new Promise(function(U,oe){F.onload=U,F.onerror=oe}),Yt(_,"link",m),i.instance=_}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(v.count++,i=ic.bind(v),n.addEventListener("load",i),n.addEventListener("error",i))}}function mk(){if(Wa===null)throw Error(s(475));var n=Wa;return n.stylesheets&&n.count===0&&Sh(n,n.stylesheets),0<n.count?function(i){var m=setTimeout(function(){if(n.stylesheets&&Sh(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(m)}}:null}function ic(){if(this.count--,this.count===0){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var rc=null;function Sh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,rc=new Map,i.forEach(gk,n),rc=null,ic.call(n))}function gk(n,i){if(!(i.state.loading&4)){var m=rc.get(n);if(m)var v=m.get(null);else{m=new Map,rc.set(n,m);for(var k=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<k.length;_++){var F=k[_];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(m.set(F.dataset.precedence,F),v=F)}v&&m.set(null,v)}k=i.instance,F=k.getAttribute("data-precedence"),_=m.get(F)||v,_===v&&m.set(null,k),m.set(F,k),this.count++,v=ic.bind(this),k.addEventListener("load",v),k.addEventListener("error",v),_?_.parentNode.insertBefore(k,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(k,n.firstChild)),i.state.loading|=4}}var Ka={$$typeof:j,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function pk(n,i,m,v,k,_,F,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.hiddenUpdates=yu(null),this.identifierPrefix=v,this.onUncaughtError=k,this.onCaughtError=_,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function V0(n,i,m,v,k,_,F,U,oe,ve,je,_e){return n=new pk(n,i,m,F,U,oe,ve,_e),i=1,_===!0&&(i|=24),_=mn(3,null,null,i),n.current=_,_.stateNode=n,i=id(),i.refCount++,n.pooledCache=i,i.refCount++,_.memoizedState={element:v,isDehydrated:m,cache:i},od(_),n}function $0(n){return n?(n=us,n):us}function H0(n,i,m,v,k,_){k=$0(k),v.context===null?v.context=k:v.pendingContext=k,v=Bi(i),v.payload={element:m},_=_===void 0?null:_,_!==null&&(v.callback=_),m=Vi(n,v,i),m!==null&&(bn(m,n,i),Ta(m,n,i))}function U0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var m=n.retryLane;n.retryLane=m!==0&&m<i?m:i}}function Ch(n,i){U0(n,i),(n=n.alternate)&&U0(n,i)}function X0(n){if(n.tag===13){var i=cs(n,67108864);i!==null&&bn(i,n,67108864),Ch(n,67108864)}}var sc=!0;function xk(n,i,m,v){var k=P.T;P.T=null;var _=$.p;try{$.p=2,kh(n,i,m,v)}finally{$.p=_,P.T=k}}function yk(n,i,m,v){var k=P.T;P.T=null;var _=$.p;try{$.p=8,kh(n,i,m,v)}finally{$.p=_,P.T=k}}function kh(n,i,m,v){if(sc){var k=jh(v);if(k===null)dh(n,i,v,ac,m),G0(n,v);else if(vk(k,n,i,m,v))v.stopPropagation();else if(G0(n,v),i&4&&-1<bk.indexOf(n)){for(;k!==null;){var _=Zr(k);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var F=Ln(_.pendingLanes);if(F!==0){var U=_;for(U.pendingLanes|=2,U.entangledLanes|=2;F;){var oe=1<<31-$e(F);U.entanglements[1]|=oe,F&=~oe}Zn(_),(rt&6)===0&&(Hl=W()+500,Ha(0))}}break;case 13:U=cs(_,2),U!==null&&bn(U,_,2),Xl(),Ch(_,2)}if(_=jh(v),_===null&&dh(n,i,v,ac,m),_===k)break;k=_}k!==null&&v.stopPropagation()}else dh(n,i,v,null,m)}}function jh(n){return n=Eu(n),Th(n)}var ac=null;function Th(n){if(ac=null,n=Kr(n),n!==null){var i=b(n);if(i===null)n=null;else{var m=i.tag;if(m===13){if(n=S(i),n!==null)return n;n=null}else if(m===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return ac=n,null}function Y0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case ge:return 2;case Y:return 8;case ee:case J:return 32;case xe:return 268435456;default:return 32}default:return 32}}var _h=!1,er=null,tr=null,nr=null,Za=new Map,Qa=new Map,ir=[],bk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G0(n,i){switch(n){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Za.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(i.pointerId)}}function Ja(n,i,m,v,k,_){return n===null||n.nativeEvent!==_?(n={blockedOn:i,domEventName:m,eventSystemFlags:v,nativeEvent:_,targetContainers:[k]},i!==null&&(i=Zr(i),i!==null&&X0(i)),n):(n.eventSystemFlags|=v,i=n.targetContainers,k!==null&&i.indexOf(k)===-1&&i.push(k),n)}function vk(n,i,m,v,k){switch(i){case"focusin":return er=Ja(er,n,i,m,v,k),!0;case"dragenter":return tr=Ja(tr,n,i,m,v,k),!0;case"mouseover":return nr=Ja(nr,n,i,m,v,k),!0;case"pointerover":var _=k.pointerId;return Za.set(_,Ja(Za.get(_)||null,n,i,m,v,k)),!0;case"gotpointercapture":return _=k.pointerId,Qa.set(_,Ja(Qa.get(_)||null,n,i,m,v,k)),!0}return!1}function q0(n){var i=Kr(n.target);if(i!==null){var m=b(i);if(m!==null){if(i=m.tag,i===13){if(i=S(m),i!==null){n.blockedOn=i,f2(n.priority,function(){if(m.tag===13){var v=yn();v=bu(v);var k=cs(m,v);k!==null&&bn(k,m,v),Ch(m,v)}});return}}else if(i===3&&m.stateNode.current.memoizedState.isDehydrated){n.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}n.blockedOn=null}function oc(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var m=jh(n.nativeEvent);if(m===null){m=n.nativeEvent;var v=new m.constructor(m.type,m);Mu=v,m.target.dispatchEvent(v),Mu=null}else return i=Zr(m),i!==null&&X0(i),n.blockedOn=m,!1;i.shift()}return!0}function W0(n,i,m){oc(n)&&m.delete(i)}function wk(){_h=!1,er!==null&&oc(er)&&(er=null),tr!==null&&oc(tr)&&(tr=null),nr!==null&&oc(nr)&&(nr=null),Za.forEach(W0),Qa.forEach(W0)}function lc(n,i){n.blockedOn===i&&(n.blockedOn=null,_h||(_h=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wk)))}var cc=null;function K0(n){cc!==n&&(cc=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){cc===n&&(cc=null);for(var i=0;i<n.length;i+=3){var m=n[i],v=n[i+1],k=n[i+2];if(typeof v!="function"){if(Th(v||m)===null)continue;break}var _=Zr(m);_!==null&&(n.splice(i,3),i-=3,Td(_,{pending:!0,data:k,method:m.method,action:v},v,k))}}))}function eo(n){function i(oe){return lc(oe,n)}er!==null&&lc(er,n),tr!==null&&lc(tr,n),nr!==null&&lc(nr,n),Za.forEach(i),Qa.forEach(i);for(var m=0;m<ir.length;m++){var v=ir[m];v.blockedOn===n&&(v.blockedOn=null)}for(;0<ir.length&&(m=ir[0],m.blockedOn===null);)q0(m),m.blockedOn===null&&ir.shift();if(m=(n.ownerDocument||n).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var k=m[v],_=m[v+1],F=k[sn]||null;if(typeof _=="function")F||K0(m);else if(F){var U=null;if(_&&_.hasAttribute("formAction")){if(k=_,F=_[sn]||null)U=F.formAction;else if(Th(k)!==null)continue}else U=F.action;typeof U=="function"?m[v+1]=U:(m.splice(v,3),v-=3),K0(m)}}}function Nh(n){this._internalRoot=n}uc.prototype.render=Nh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var m=i.current,v=yn();H0(m,v,n,i,null,null)},uc.prototype.unmount=Nh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;H0(n.current,2,null,n,null,null),Xl(),i[Wr]=null}};function uc(n){this._internalRoot=n}uc.prototype.unstable_scheduleHydration=function(n){if(n){var i=fg();n={blockedOn:null,target:n,priority:i};for(var m=0;m<ir.length&&i!==0&&i<ir[m].priority;m++);ir.splice(m,0,n),m===0&&q0(n)}};var Z0=t.version;if(Z0!=="19.1.0")throw Error(s(527,Z0,"19.1.0"));$.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=a(i),n=n!==null?l(n):null,n=n===null?null:n.stateNode,n};var Sk={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Ne=dc.inject(Sk),Oe=dc}catch{}}return no.createRoot=function(n,i){if(!p(n))throw Error(s(299));var m=!1,v="",k=fx,_=mx,F=gx,U=null;return i!=null&&(i.unstable_strictMode===!0&&(m=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onUncaughtError!==void 0&&(k=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(F=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(U=i.unstable_transitionCallbacks)),i=V0(n,1,!1,null,null,m,v,k,_,F,U,null),n[Wr]=i.current,uh(n),new Nh(i)},no.hydrateRoot=function(n,i,m){if(!p(n))throw Error(s(299));var v=!1,k="",_=fx,F=mx,U=gx,oe=null,ve=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(_=m.onUncaughtError),m.onCaughtError!==void 0&&(F=m.onCaughtError),m.onRecoverableError!==void 0&&(U=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(oe=m.unstable_transitionCallbacks),m.formState!==void 0&&(ve=m.formState)),i=V0(n,1,!0,i,m??null,v,k,_,F,U,oe,ve),i.context=$0(null),m=i.current,v=yn(),v=bu(v),k=Bi(v),k.callback=null,Vi(m,k,v),m=v,i.current.lanes=m,aa(i,m),Zn(i),n[Wr]=i.current,uh(n),new uc(i)},no.version="19.1.0",no}var oy;function Ak(){if(oy)return Oh.exports;oy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Oh.exports=Dk(),Oh.exports}var Rk=Ak();const Pk=tm(Rk);var io={},ly;function Lk(){if(ly)return io;ly=1,Object.defineProperty(io,"__esModule",{value:!0}),io.parse=S,io.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,p=Object.prototype.toString,b=(()=>{const c=function(){};return c.prototype=Object.create(null),c})();function S(c,u){const g=new b,y=c.length;if(y<2)return g;const x=(u==null?void 0:u.decode)||f;let w=0;do{const C=c.indexOf("=",w);if(C===-1)break;const j=c.indexOf(";",w),T=j===-1?y:j;if(C>T){w=c.lastIndexOf(";",C-1)+1;continue}const M=d(c,w,C),E=a(c,C,M),A=c.slice(M,E);if(g[A]===void 0){let R=d(c,C+1,T),H=a(c,T,R);const K=x(c.slice(R,H));g[A]=K}w=T+1}while(w<y);return g}function d(c,u,g){do{const y=c.charCodeAt(u);if(y!==32&&y!==9)return u}while(++u<g);return g}function a(c,u,g){for(;u>g;){const y=c.charCodeAt(--u);if(y!==32&&y!==9)return u+1}return g}function l(c,u,g){const y=(g==null?void 0:g.encode)||encodeURIComponent;if(!e.test(c))throw new TypeError(`argument name is invalid: ${c}`);const x=y(u);if(!t.test(x))throw new TypeError(`argument val is invalid: ${u}`);let w=c+"="+x;if(!g)return w;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);w+="; Max-Age="+g.maxAge}if(g.domain){if(!r.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);w+="; Domain="+g.domain}if(g.path){if(!s.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);w+="; Path="+g.path}if(g.expires){if(!o(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);w+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(w+="; HttpOnly"),g.secure&&(w+="; Secure"),g.partitioned&&(w+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return w}function f(c){if(c.indexOf("%")===-1)return c;try{return decodeURIComponent(c)}catch{return c}}function o(c){return p.call(c)==="[object Date]"}return io}Lk();var cy="popstate";function Fk(e={}){function t(p,b){let{pathname:S="/",search:d="",hash:a=""}=Zs(p.location.hash.substring(1));return!S.startsWith("/")&&!S.startsWith(".")&&(S="/"+S),ff("",{pathname:S,search:d,hash:a},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function r(p,b){let S=p.document.querySelector("base"),d="";if(S&&S.getAttribute("href")){let a=p.location.href,l=a.indexOf("#");d=l===-1?a:a.slice(0,l)}return d+"#"+(typeof b=="string"?b:jo(b))}function s(p,b){Xn(p.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return Ik(t,r,s,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zk(){return Math.random().toString(36).substring(2,10)}function uy(e,t){return{usr:e.state,key:e.key,idx:t}}function ff(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Zs(t):t,state:r,key:t&&t.key||s||zk()}}function jo({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Ik(e,t,r,s={}){let{window:p=document.defaultView,v5Compat:b=!1}=s,S=p.history,d="POP",a=null,l=f();l==null&&(l=0,S.replaceState({...S.state,idx:l},""));function f(){return(S.state||{idx:null}).idx}function o(){d="POP";let x=f(),w=x==null?null:x-l;l=x,a&&a({action:d,location:y.location,delta:w})}function c(x,w){d="PUSH";let C=ff(y.location,x,w);r&&r(C,x),l=f()+1;let j=uy(C,l),T=y.createHref(C);try{S.pushState(j,"",T)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;p.location.assign(T)}b&&a&&a({action:d,location:y.location,delta:1})}function u(x,w){d="REPLACE";let C=ff(y.location,x,w);r&&r(C,x),l=f();let j=uy(C,l),T=y.createHref(C);S.replaceState(j,"",T),b&&a&&a({action:d,location:y.location,delta:0})}function g(x){let w=p.location.origin!=="null"?p.location.origin:p.location.href,C=typeof x=="string"?x:jo(x);return C=C.replace(/ $/,"%20"),Lt(w,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,w)}let y={get action(){return d},get location(){return e(p,S)},listen(x){if(a)throw new Error("A history only accepts one active listener");return p.addEventListener(cy,o),a=x,()=>{p.removeEventListener(cy,o),a=null}},createHref(x){return t(p,x)},createURL:g,encodeLocation(x){let w=g(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:c,replace:u,go(x){return S.go(x)}};return y}function e1(e,t,r="/"){return Bk(e,t,r,!1)}function Bk(e,t,r,s){let p=typeof t=="string"?Zs(t):t,b=Di(p.pathname||"/",r);if(b==null)return null;let S=t1(e);Vk(S);let d=null;for(let a=0;d==null&&a<S.length;++a){let l=Qk(b);d=Kk(S[a],l,s)}return d}function t1(e,t=[],r=[],s=""){let p=(b,S,d)=>{let a={relativePath:d===void 0?b.path||"":d,caseSensitive:b.caseSensitive===!0,childrenIndex:S,route:b};a.relativePath.startsWith("/")&&(Lt(a.relativePath.startsWith(s),`Absolute route path "${a.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(s.length));let l=Oi([s,a.relativePath]),f=r.concat(a);b.children&&b.children.length>0&&(Lt(b.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),t1(b.children,t,f,l)),!(b.path==null&&!b.index)&&t.push({path:l,score:qk(l,b.index),routesMeta:f})};return e.forEach((b,S)=>{var d;if(b.path===""||!((d=b.path)!=null&&d.includes("?")))p(b,S);else for(let a of n1(b.path))p(b,S,a)}),t}function n1(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,p=r.endsWith("?"),b=r.replace(/\?$/,"");if(s.length===0)return p?[b,""]:[b];let S=n1(s.join("/")),d=[];return d.push(...S.map(a=>a===""?b:[b,a].join("/"))),p&&d.push(...S),d.map(a=>e.startsWith("/")&&a===""?"/":a)}function Vk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Wk(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var $k=/^:[\w-]+$/,Hk=3,Uk=2,Xk=1,Yk=10,Gk=-2,dy=e=>e==="*";function qk(e,t){let r=e.split("/"),s=r.length;return r.some(dy)&&(s+=Gk),t&&(s+=Uk),r.filter(p=>!dy(p)).reduce((p,b)=>p+($k.test(b)?Hk:b===""?Xk:Yk),s)}function Wk(e,t){return e.length===t.length&&e.slice(0,-1).every((s,p)=>s===t[p])?e[e.length-1]-t[t.length-1]:0}function Kk(e,t,r=!1){let{routesMeta:s}=e,p={},b="/",S=[];for(let d=0;d<s.length;++d){let a=s[d],l=d===s.length-1,f=b==="/"?t:t.slice(b.length)||"/",o=Rc({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},f),c=a.route;if(!o&&l&&r&&!s[s.length-1].route.index&&(o=Rc({path:a.relativePath,caseSensitive:a.caseSensitive,end:!1},f)),!o)return null;Object.assign(p,o.params),S.push({params:p,pathname:Oi([b,o.pathname]),pathnameBase:nj(Oi([b,o.pathnameBase])),route:c}),o.pathnameBase!=="/"&&(b=Oi([b,o.pathnameBase]))}return S}function Rc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Zk(e.path,e.caseSensitive,e.end),p=t.match(r);if(!p)return null;let b=p[0],S=b.replace(/(.)\/+$/,"$1"),d=p.slice(1);return{params:s.reduce((l,{paramName:f,isOptional:o},c)=>{if(f==="*"){let g=d[c]||"";S=b.slice(0,b.length-g.length).replace(/(.)\/+$/,"$1")}const u=d[c];return o&&!u?l[f]=void 0:l[f]=(u||"").replace(/%2F/g,"/"),l},{}),pathname:b,pathnameBase:S,pattern:e}}function Zk(e,t=!1,r=!0){Xn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],p="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(S,d,a)=>(s.push({paramName:d,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),p+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?p+="\\/*$":e!==""&&e!=="/"&&(p+="(?:(?=\\/|$))"),[new RegExp(p,t?void 0:"i"),s]}function Qk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Di(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function Jk(e,t="/"){let{pathname:r,search:s="",hash:p=""}=typeof e=="string"?Zs(e):e;return{pathname:r?r.startsWith("/")?r:ej(r,t):t,search:ij(s),hash:rj(p)}}function ej(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(p=>{p===".."?r.length>1&&r.pop():p!=="."&&r.push(p)}),r.length>1?r.join("/"):"/"}function Ph(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function i1(e){let t=tj(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function r1(e,t,r,s=!1){let p;typeof e=="string"?p=Zs(e):(p={...e},Lt(!p.pathname||!p.pathname.includes("?"),Ph("?","pathname","search",p)),Lt(!p.pathname||!p.pathname.includes("#"),Ph("#","pathname","hash",p)),Lt(!p.search||!p.search.includes("#"),Ph("#","search","hash",p)));let b=e===""||p.pathname==="",S=b?"/":p.pathname,d;if(S==null)d=r;else{let o=t.length-1;if(!s&&S.startsWith("..")){let c=S.split("/");for(;c[0]==="..";)c.shift(),o-=1;p.pathname=c.join("/")}d=o>=0?t[o]:"/"}let a=Jk(p,d),l=S&&S!=="/"&&S.endsWith("/"),f=(b||S===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(l||f)&&(a.pathname+="/"),a}var Oi=e=>e.join("/").replace(/\/\/+/g,"/"),nj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ij=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var s1=["POST","PUT","PATCH","DELETE"];new Set(s1);var aj=["GET",...s1];new Set(aj);var Qs=N.createContext(null);Qs.displayName="DataRouter";var ru=N.createContext(null);ru.displayName="DataRouterState";var a1=N.createContext({isTransitioning:!1});a1.displayName="ViewTransition";var oj=N.createContext(new Map);oj.displayName="Fetchers";var lj=N.createContext(null);lj.displayName="Await";var oi=N.createContext(null);oi.displayName="Navigation";var su=N.createContext(null);su.displayName="Location";var li=N.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var im=N.createContext(null);im.displayName="RouteError";function cj(e,{relative:t}={}){Lt($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=N.useContext(oi),{hash:p,pathname:b,search:S}=Ho(e,{relative:t}),d=b;return r!=="/"&&(d=b==="/"?r:Oi([r,b])),s.createHref({pathname:d,search:S,hash:p})}function $o(){return N.useContext(su)!=null}function fr(){return Lt($o(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(su).location}var o1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function l1(e){N.useContext(oi).static||N.useLayoutEffect(e)}function uj(){let{isDataRoute:e}=N.useContext(li);return e?jj():dj()}function dj(){Lt($o(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(Qs),{basename:t,navigator:r}=N.useContext(oi),{matches:s}=N.useContext(li),{pathname:p}=fr(),b=JSON.stringify(i1(s)),S=N.useRef(!1);return l1(()=>{S.current=!0}),N.useCallback((a,l={})=>{if(Xn(S.current,o1),!S.current)return;if(typeof a=="number"){r.go(a);return}let f=r1(a,JSON.parse(b),p,l.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Oi([t,f.pathname])),(l.replace?r.replace:r.push)(f,l.state,l)},[t,r,b,p,e])}var hj=N.createContext(null);function fj(e){let t=N.useContext(li).outlet;return t&&N.createElement(hj.Provider,{value:e},t)}function Ho(e,{relative:t}={}){let{matches:r}=N.useContext(li),{pathname:s}=fr(),p=JSON.stringify(i1(r));return N.useMemo(()=>r1(e,JSON.parse(p),s,t==="path"),[e,p,s,t])}function mj(e,t){return c1(e)}function c1(e,t,r,s){Lt($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p,static:b}=N.useContext(oi),{matches:S}=N.useContext(li),d=S[S.length-1],a=d?d.params:{},l=d?d.pathname:"/",f=d?d.pathnameBase:"/",o=d&&d.route;{let C=o&&o.path||"";u1(l,!o||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let c=fr(),u;u=c;let g=u.pathname||"/",y=g;if(f!=="/"){let C=f.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=!b&&r&&r.matches&&r.matches.length>0?r.matches:e1(e,{pathname:y});return Xn(o||x!=null,`No routes matched location "${u.pathname}${u.search}${u.hash}" `),Xn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${u.pathname}${u.search}${u.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),bj(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Oi([f,p.encodeLocation?p.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Oi([f,p.encodeLocation?p.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),S,r,s)}function gj(){let e=kj(),t=sj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",p={padding:"0.5rem",backgroundColor:s},b={padding:"2px 4px",backgroundColor:s},S=null;return console.error("Error handled by React Router default ErrorBoundary:",e),S=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:b},"ErrorBoundary")," or"," ",N.createElement("code",{style:b},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:p},r):null,S)}var pj=N.createElement(gj,null),xj=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(li.Provider,{value:this.props.routeContext},N.createElement(im.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yj({routeContext:e,match:t,children:r}){let s=N.useContext(Qs);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(li.Provider,{value:e},r)}function bj(e,t=[],r=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,b=r==null?void 0:r.errors;if(b!=null){let a=p.findIndex(l=>l.route.id&&(b==null?void 0:b[l.route.id])!==void 0);Lt(a>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(b).join(",")}`),p=p.slice(0,Math.min(p.length,a+1))}let S=!1,d=-1;if(r)for(let a=0;a<p.length;a++){let l=p[a];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(d=a),l.route.id){let{loaderData:f,errors:o}=r,c=l.route.loader&&!f.hasOwnProperty(l.route.id)&&(!o||o[l.route.id]===void 0);if(l.route.lazy||c){S=!0,d>=0?p=p.slice(0,d+1):p=[p[0]];break}}}return p.reduceRight((a,l,f)=>{let o,c=!1,u=null,g=null;r&&(o=b&&l.route.id?b[l.route.id]:void 0,u=l.route.errorElement||pj,S&&(d<0&&f===0?(u1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),c=!0,g=null):d===f&&(c=!0,g=l.route.hydrateFallbackElement||null)));let y=t.concat(p.slice(0,f+1)),x=()=>{let w;return o?w=u:c?w=g:l.route.Component?w=N.createElement(l.route.Component,null):l.route.element?w=l.route.element:w=a,N.createElement(yj,{match:l,routeContext:{outlet:a,matches:y,isDataRoute:r!=null},children:w})};return r&&(l.route.ErrorBoundary||l.route.errorElement||f===0)?N.createElement(xj,{location:r.location,revalidation:r.revalidation,component:u,error:o,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function rm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vj(e){let t=N.useContext(Qs);return Lt(t,rm(e)),t}function wj(e){let t=N.useContext(ru);return Lt(t,rm(e)),t}function Sj(e){let t=N.useContext(li);return Lt(t,rm(e)),t}function sm(e){let t=Sj(e),r=t.matches[t.matches.length-1];return Lt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Cj(){return sm("useRouteId")}function kj(){var s;let e=N.useContext(im),t=wj("useRouteError"),r=sm("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function jj(){let{router:e}=vj("useNavigate"),t=sm("useNavigate"),r=N.useRef(!1);return l1(()=>{r.current=!0}),N.useCallback(async(p,b={})=>{Xn(r.current,o1),r.current&&(typeof p=="number"?e.navigate(p):await e.navigate(p,{fromRouteId:t,...b}))},[e,t])}var hy={};function u1(e,t,r){!t&&!hy[e]&&(hy[e]=!0,Xn(!1,r))}N.memo(Tj);function Tj({routes:e,future:t,state:r}){return c1(e,void 0,r,t)}function _j(e){return fj(e.context)}function Nj({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:p,static:b=!1}){Lt(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let S=e.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:S,navigator:p,static:b,future:{}}),[S,p,b]);typeof r=="string"&&(r=Zs(r));let{pathname:a="/",search:l="",hash:f="",state:o=null,key:c="default"}=r,u=N.useMemo(()=>{let g=Di(a,S);return g==null?null:{location:{pathname:g,search:l,hash:f,state:o,key:c},navigationType:s}},[S,a,l,f,o,c,s]);return Xn(u!=null,`<Router basename="${S}"> is not able to match the URL "${a}${l}${f}" because it does not start with the basename, so the <Router> won't render anything.`),u==null?null:N.createElement(oi.Provider,{value:d},N.createElement(su.Provider,{children:t,value:u}))}var jc="get",Tc="application/x-www-form-urlencoded";function au(e){return e!=null&&typeof e.tagName=="string"}function Mj(e){return au(e)&&e.tagName.toLowerCase()==="button"}function Ej(e){return au(e)&&e.tagName.toLowerCase()==="form"}function Oj(e){return au(e)&&e.tagName.toLowerCase()==="input"}function Dj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Aj(e,t){return e.button===0&&(!t||t==="_self")&&!Dj(e)}var hc=null;function Rj(){if(hc===null)try{new FormData(document.createElement("form"),0),hc=!1}catch{hc=!0}return hc}var Pj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lh(e){return e!=null&&!Pj.has(e)?(Xn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tc}"`),null):e}function Lj(e,t){let r,s,p,b,S;if(Ej(e)){let d=e.getAttribute("action");s=d?Di(d,t):null,r=e.getAttribute("method")||jc,p=Lh(e.getAttribute("enctype"))||Tc,b=new FormData(e)}else if(Mj(e)||Oj(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||d.getAttribute("action");if(s=a?Di(a,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||jc,p=Lh(e.getAttribute("formenctype"))||Lh(d.getAttribute("enctype"))||Tc,b=new FormData(d,e),!Rj()){let{name:l,type:f,value:o}=e;if(f==="image"){let c=l?`${l}.`:"";b.append(`${c}x`,"0"),b.append(`${c}y`,"0")}else l&&b.append(l,o)}}else{if(au(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=jc,s=null,p=Tc,S=e}return b&&p==="text/plain"&&(S=b,b=void 0),{action:s,method:r.toLowerCase(),encType:p,formData:b,body:S}}function am(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Fj(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Ij(e,t,r){let s=await Promise.all(e.map(async p=>{let b=t.routes[p.route.id];if(b){let S=await Fj(b,r);return S.links?S.links():[]}return[]}));return Hj(s.flat(1).filter(zj).filter(p=>p.rel==="stylesheet"||p.rel==="preload").map(p=>p.rel==="stylesheet"?{...p,rel:"prefetch",as:"style"}:{...p,rel:"prefetch"}))}function fy(e,t,r,s,p,b){let S=(a,l)=>r[l]?a.route.id!==r[l].route.id:!0,d=(a,l)=>{var f;return r[l].pathname!==a.pathname||((f=r[l].route.path)==null?void 0:f.endsWith("*"))&&r[l].params["*"]!==a.params["*"]};return b==="assets"?t.filter((a,l)=>S(a,l)||d(a,l)):b==="data"?t.filter((a,l)=>{var o;let f=s.routes[a.route.id];if(!f||!f.hasLoader)return!1;if(S(a,l)||d(a,l))return!0;if(a.route.shouldRevalidate){let c=a.route.shouldRevalidate({currentUrl:new URL(p.pathname+p.search+p.hash,window.origin),currentParams:((o=r[0])==null?void 0:o.params)||{},nextUrl:new URL(e,window.origin),nextParams:a.params,defaultShouldRevalidate:!0});if(typeof c=="boolean")return c}return!0}):[]}function Bj(e,t,{includeHydrateFallback:r}={}){return Vj(e.map(s=>{let p=t.routes[s.route.id];if(!p)return[];let b=[p.module];return p.clientActionModule&&(b=b.concat(p.clientActionModule)),p.clientLoaderModule&&(b=b.concat(p.clientLoaderModule)),r&&p.hydrateFallbackModule&&(b=b.concat(p.hydrateFallbackModule)),p.imports&&(b=b.concat(p.imports)),b}).flat(1))}function Vj(e){return[...new Set(e)]}function $j(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function Hj(e,t){let r=new Set;return new Set(t),e.reduce((s,p)=>{let b=JSON.stringify($j(p));return r.has(b)||(r.add(b),s.push({key:b,link:p})),s},[])}var Uj=new Set([100,101,204,205]);function Xj(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Di(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function d1(){let e=N.useContext(Qs);return am(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Yj(){let e=N.useContext(ru);return am(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var om=N.createContext(void 0);om.displayName="FrameworkContext";function h1(){let e=N.useContext(om);return am(e,"You must render this element inside a <HydratedRouter> element"),e}function Gj(e,t){let r=N.useContext(om),[s,p]=N.useState(!1),[b,S]=N.useState(!1),{onFocus:d,onBlur:a,onMouseEnter:l,onMouseLeave:f,onTouchStart:o}=t,c=N.useRef(null);N.useEffect(()=>{if(e==="render"&&S(!0),e==="viewport"){let y=w=>{w.forEach(C=>{S(C.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return c.current&&x.observe(c.current),()=>{x.disconnect()}}},[e]),N.useEffect(()=>{if(s){let y=setTimeout(()=>{S(!0)},100);return()=>{clearTimeout(y)}}},[s]);let u=()=>{p(!0)},g=()=>{p(!1),S(!1)};return r?e!=="intent"?[b,c,{}]:[b,c,{onFocus:ro(d,u),onBlur:ro(a,g),onMouseEnter:ro(l,u),onMouseLeave:ro(f,g),onTouchStart:ro(o,u)}]:[!1,c,{}]}function ro(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function qj({page:e,...t}){let{router:r}=d1(),s=N.useMemo(()=>e1(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?N.createElement(Kj,{page:e,matches:s,...t}):null}function Wj(e){let{manifest:t,routeModules:r}=h1(),[s,p]=N.useState([]);return N.useEffect(()=>{let b=!1;return Ij(e,t,r).then(S=>{b||p(S)}),()=>{b=!0}},[e,t,r]),s}function Kj({page:e,matches:t,...r}){let s=fr(),{manifest:p,routeModules:b}=h1(),{basename:S}=d1(),{loaderData:d,matches:a}=Yj(),l=N.useMemo(()=>fy(e,t,a,p,s,"data"),[e,t,a,p,s]),f=N.useMemo(()=>fy(e,t,a,p,s,"assets"),[e,t,a,p,s]),o=N.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let g=new Set,y=!1;if(t.forEach(w=>{var j;let C=p.routes[w.route.id];!C||!C.hasLoader||(!l.some(T=>T.route.id===w.route.id)&&w.route.id in d&&((j=b[w.route.id])!=null&&j.shouldRevalidate)||C.hasClientLoader?y=!0:g.add(w.route.id))}),g.size===0)return[];let x=Xj(e,S);return y&&g.size>0&&x.searchParams.set("_routes",t.filter(w=>g.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[S,d,s,p,l,t,e,b]),c=N.useMemo(()=>Bj(f,p),[f,p]),u=Wj(f);return N.createElement(N.Fragment,null,o.map(g=>N.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),c.map(g=>N.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),u.map(({key:g,link:y})=>N.createElement("link",{key:g,...y})))}function Zj(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var f1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{f1&&(window.__reactRouterVersion="7.5.3")}catch{}function Qj({basename:e,children:t,window:r}){let s=N.useRef();s.current==null&&(s.current=Fk({window:r,v5Compat:!0}));let p=s.current,[b,S]=N.useState({action:p.action,location:p.location}),d=N.useCallback(a=>{N.startTransition(()=>S(a))},[S]);return N.useLayoutEffect(()=>p.listen(d),[p,d]),N.createElement(Nj,{basename:e,children:t,location:b.location,navigationType:b.action,navigator:p})}var m1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lm=N.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:p,reloadDocument:b,replace:S,state:d,target:a,to:l,preventScrollReset:f,viewTransition:o,...c},u){let{basename:g}=N.useContext(oi),y=typeof l=="string"&&m1.test(l),x,w=!1;if(typeof l=="string"&&y&&(x=l,f1))try{let H=new URL(window.location.href),K=l.startsWith("//")?new URL(H.protocol+l):new URL(l),X=Di(K.pathname,g);K.origin===H.origin&&X!=null?l=X+K.search+K.hash:w=!0}catch{Xn(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=cj(l,{relative:p}),[j,T,M]=Gj(s,c),E=tT(l,{replace:S,state:d,target:a,preventScrollReset:f,relative:p,viewTransition:o});function A(H){t&&t(H),H.defaultPrevented||E(H)}let R=N.createElement("a",{...c,...M,href:x||C,onClick:w||b?t:A,ref:Zj(u,T),target:a,"data-discover":!y&&r==="render"?"true":void 0});return j&&!y?N.createElement(N.Fragment,null,R,N.createElement(qj,{page:C})):R});lm.displayName="Link";var g1=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:p=!1,style:b,to:S,viewTransition:d,children:a,...l},f){let o=Ho(S,{relative:l.relative}),c=fr(),u=N.useContext(ru),{navigator:g,basename:y}=N.useContext(oi),x=u!=null&&aT(o)&&d===!0,w=g.encodeLocation?g.encodeLocation(o).pathname:o.pathname,C=c.pathname,j=u&&u.navigation&&u.navigation.location?u.navigation.location.pathname:null;r||(C=C.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&y&&(j=Di(j,y)||j);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=C===w||!p&&C.startsWith(w)&&C.charAt(T)==="/",E=j!=null&&(j===w||!p&&j.startsWith(w)&&j.charAt(w.length)==="/"),A={isActive:M,isPending:E,isTransitioning:x},R=M?t:void 0,H;typeof s=="function"?H=s(A):H=[s,M?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let K=typeof b=="function"?b(A):b;return N.createElement(lm,{...l,"aria-current":R,className:H,ref:f,style:K,to:S,viewTransition:d},typeof a=="function"?a(A):a)});g1.displayName="NavLink";var Jj=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:p,state:b,method:S=jc,action:d,onSubmit:a,relative:l,preventScrollReset:f,viewTransition:o,...c},u)=>{let g=rT(),y=sT(d,{relative:l}),x=S.toLowerCase()==="get"?"get":"post",w=typeof d=="string"&&m1.test(d),C=j=>{if(a&&a(j),j.defaultPrevented)return;j.preventDefault();let T=j.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||S;g(T||j.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:p,state:b,relative:l,preventScrollReset:f,viewTransition:o})};return N.createElement("form",{ref:u,method:x,action:y,onSubmit:s?a:C,...c,"data-discover":!w&&e==="render"?"true":void 0})});Jj.displayName="Form";function eT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p1(e){let t=N.useContext(Qs);return Lt(t,eT(e)),t}function tT(e,{target:t,replace:r,state:s,preventScrollReset:p,relative:b,viewTransition:S}={}){let d=uj(),a=fr(),l=Ho(e,{relative:b});return N.useCallback(f=>{if(Aj(f,t)){f.preventDefault();let o=r!==void 0?r:jo(a)===jo(l);d(e,{replace:o,state:s,preventScrollReset:p,relative:b,viewTransition:S})}},[a,d,l,r,s,t,e,p,b,S])}var nT=0,iT=()=>`__${String(++nT)}__`;function rT(){let{router:e}=p1("useSubmit"),{basename:t}=N.useContext(oi),r=Cj();return N.useCallback(async(s,p={})=>{let{action:b,method:S,encType:d,formData:a,body:l}=Lj(s,t);if(p.navigate===!1){let f=p.fetcherKey||iT();await e.fetch(f,r,p.action||b,{preventScrollReset:p.preventScrollReset,formData:a,body:l,formMethod:p.method||S,formEncType:p.encType||d,flushSync:p.flushSync})}else await e.navigate(p.action||b,{preventScrollReset:p.preventScrollReset,formData:a,body:l,formMethod:p.method||S,formEncType:p.encType||d,replace:p.replace,state:p.state,fromRouteId:r,flushSync:p.flushSync,viewTransition:p.viewTransition})},[e,t,r])}function sT(e,{relative:t}={}){let{basename:r}=N.useContext(oi),s=N.useContext(li);Lt(s,"useFormAction must be used inside a RouteContext");let[p]=s.matches.slice(-1),b={...Ho(e||".",{relative:t})},S=fr();if(e==null){b.search=S.search;let d=new URLSearchParams(b.search),a=d.getAll("index");if(a.some(f=>f==="")){d.delete("index"),a.filter(o=>o).forEach(o=>d.append("index",o));let f=d.toString();b.search=f?`?${f}`:""}}return(!e||e===".")&&p.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(b.pathname=b.pathname==="/"?r:Oi([r,b.pathname])),jo(b)}function aT(e,t={}){let r=N.useContext(a1);Lt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=p1("useViewTransitionState"),p=Ho(e,{relative:t.relative});if(!r.isTransitioning)return!1;let b=Di(r.currentLocation.pathname,s)||r.currentLocation.pathname,S=Di(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Rc(p.pathname,S)!=null||Rc(p.pathname,b)!=null}new TextEncoder;[...Uj];const oT=(e,t,r,s)=>{var b,S,d,a;const p=[r,{code:t,...s||{}}];if((S=(b=e==null?void 0:e.services)==null?void 0:b.logger)!=null&&S.forward)return e.services.logger.forward(p,"warn","react-i18next::",!0);Br(p[0])&&(p[0]=`react-i18next:: ${p[0]}`),(a=(d=e==null?void 0:e.services)==null?void 0:d.logger)!=null&&a.warn?e.services.logger.warn(...p):console!=null&&console.warn&&console.warn(...p)},my={},mf=(e,t,r,s)=>{Br(r)&&my[r]||(Br(r)&&(my[r]=new Date),oT(e,t,r,s))},x1=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},gf=(e,t,r)=>{e.loadNamespaces(t,x1(e,r))},gy=(e,t,r,s)=>{if(Br(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return gf(e,r,s);r.forEach(p=>{e.options.ns.indexOf(p)<0&&e.options.ns.push(p)}),e.loadLanguages(t,x1(e,s))},lT=(e,t,r={})=>!t.languages||!t.languages.length?(mf(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(s,p)=>{var b;if(((b=r.bindI18n)==null?void 0:b.indexOf("languageChanging"))>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!p(s.isLanguageChangingTo,e))return!1}}),Br=e=>typeof e=="string",cT=e=>typeof e=="object"&&e!==null,uT=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,dT={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},hT=e=>dT[e],fT=e=>e.replace(uT,hT);let pf={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:fT};const mT=(e={})=>{pf={...pf,...e}},gT=()=>pf;let y1;const pT=e=>{y1=e},xT=()=>y1,yT={type:"3rdParty",init(e){mT(e.options.react),pT(e)}},bT=N.createContext();class vT{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const wT=(e,t)=>{const r=N.useRef();return N.useEffect(()=>{r.current=e},[e,t]),r.current},b1=(e,t,r,s)=>e.getFixedT(t,r,s),ST=(e,t,r,s)=>N.useCallback(b1(e,t,r,s),[e,t,r,s]),et=(e,t={})=>{var T,M,E,A;const{i18n:r}=t,{i18n:s,defaultNS:p}=N.useContext(bT)||{},b=r||s||xT();if(b&&!b.reportNamespaces&&(b.reportNamespaces=new vT),!b){mf(b,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const R=(K,X)=>Br(X)?X:cT(X)&&Br(X.defaultValue)?X.defaultValue:Array.isArray(K)?K[K.length-1]:K,H=[R,{},!1];return H.t=R,H.i18n={},H.ready=!1,H}(T=b.options.react)!=null&&T.wait&&mf(b,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const S={...gT(),...b.options.react,...t},{useSuspense:d,keyPrefix:a}=S;let l=p||((M=b.options)==null?void 0:M.defaultNS);l=Br(l)?[l]:l||["translation"],(A=(E=b.reportNamespaces).addUsedNamespaces)==null||A.call(E,l);const f=(b.isInitialized||b.initializedStoreOnce)&&l.every(R=>lT(R,b,S)),o=ST(b,t.lng||null,S.nsMode==="fallback"?l:l[0],a),c=()=>o,u=()=>b1(b,t.lng||null,S.nsMode==="fallback"?l:l[0],a),[g,y]=N.useState(c);let x=l.join();t.lng&&(x=`${t.lng}${x}`);const w=wT(x),C=N.useRef(!0);N.useEffect(()=>{const{bindI18n:R,bindI18nStore:H}=S;C.current=!0,!f&&!d&&(t.lng?gy(b,t.lng,l,()=>{C.current&&y(u)}):gf(b,l,()=>{C.current&&y(u)})),f&&w&&w!==x&&C.current&&y(u);const K=()=>{C.current&&y(u)};return R&&(b==null||b.on(R,K)),H&&(b==null||b.store.on(H,K)),()=>{C.current=!1,b&&(R==null||R.split(" ").forEach(X=>b.off(X,K))),H&&b&&H.split(" ").forEach(X=>b.store.off(X,K))}},[b,x]),N.useEffect(()=>{C.current&&f&&y(c)},[b,a,f]);const j=[g,b,f];if(j.t=g,j.i18n=b,j.ready=f,f||!f&&!d)return j;throw new Promise(R=>{t.lng?gy(b,t.lng,l,()=>R()):gf(b,l,()=>R())})};function CT(){const{t:e}=et();return h.jsxs("div",{className:"p-4 sm:p-6 text-text",children:[h.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-4 sm:mb-6",children:e("homePage")}),h.jsx("p",{className:"text-sm sm:text-base text-text-muted",children:e("welcome")})]})}const Qn={render:"#9C27B0",context:"#2196F3",effect:"#FF9800",websocket:"#4CAF50",performance:"#F44336",info:"#607D8B"};class kT{constructor(){this.renderCounts={},this.startTime=Date.now()}logRender(t,r={},s=""){this.renderCounts[t]=(this.renderCounts[t]||0)+1;const p=this.renderCounts[t],b=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[RENDER #${p}] %c${t} %c(${b}s)`,`color: ${Qn.render}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),s&&console.log(`   Reason: ${s}`),Object.keys(r).length>0&&console.log("   Props:",r),p>10&&p%5===0&&console.warn(`%c ${t} rendered ${p} times!`,`color: ${Qn.performance}; font-weight: bold`)}logContext(t,r={}){const s=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[CONTEXT] %c${t} %c(${s}s)`,`color: ${Qn.context}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("   Updates:",r)}logEffect(t,r,s=[]){const p=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[EFFECT] %c${t}.${r} %c(${p}s)`,`color: ${Qn.effect}; font-weight: bold`,"color: #333","color: #999; font-size: 0.9em"),s.length>0&&console.log("   Dependencies:",s)}logWebSocket(t,r={}){const s=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[WEBSOCKET] %c${t} %c(${s}s)`,`color: ${Qn.websocket}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("   Data:",r)}logPerformance(t,r){const s=r>100?Qn.performance:Qn.info,p=r>100?"":"";console.log(`%c[PERFORMANCE] ${p} %c${t}: ${r.toFixed(2)}ms`,`color: ${s}; font-weight: bold`,`color: ${s}`),r>100&&console.warn(` Slow operation detected: ${t} took ${r.toFixed(2)}ms`)}logStats(){console.group("%c Render Statistics","color: #2196F3; font-weight: bold; font-size: 14px"),Object.entries(this.renderCounts).sort((r,s)=>s[1]-r[1]).forEach(([r,s])=>{const p=s>10?Qn.performance:Qn.info;console.log(`%c${r}: %c${s} renders`,"color: #333; font-weight: bold",`color: ${p}`)}),console.groupEnd()}reset(){this.renderCounts={},this.startTime=Date.now(),console.clear(),console.log("%c Debug Logger Reset","color: #4CAF50; font-weight: bold; font-size: 14px")}group(t,r=Qn.info){console.group(`%c${t}`,`color: ${r}; font-weight: bold`)}groupEnd(){console.groupEnd()}}const ti=new kT;typeof window<"u"&&(window.debugLogger=ti,window.showRenderStats=()=>ti.logStats(),window.resetDebugLogger=()=>ti.reset(),console.log("%c Debug Logger Active","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cCommands available:","color: #2196F3; font-weight: bold"),console.log("   showRenderStats() -   renders"),console.log("   resetDebugLogger() -   counters"),console.log("   debugLogger -    logger"));const v1=N.createContext(),jT=({children:e})=>{ti.logRender("WebSocketProvider");const[t,r]=N.useState(null),[s,p]=N.useState(!1),[b,S]=N.useState("connecting"),d=N.useRef([]),a=N.useRef(0),l=N.useRef(null),f=N.useRef(!1),o=N.useRef(null),c="ws://localhost:12345",u=10,g=N.useCallback(()=>{if(l.current&&(clearTimeout(l.current),l.current=null),o.current){const E=o.current;(E.readyState===WebSocket.OPEN||E.readyState===WebSocket.CONNECTING)&&E.close(1e3,"Cleanup"),o.current=null}},[]),y=N.useCallback(()=>{if(f.current)return;o.current&&g(),S("connecting");const E=new WebSocket(c);o.current=E,r(E),E.onopen=()=>{if(f.current){E.close(1e3,"Component unmounted");return}ti.logWebSocket("CONNECTED"),console.log(" WebSocket connected"),p(!0),S("connected"),a.current=0},E.onmessage=A=>{if(f.current)return;const R=A.data;d.current.forEach(H=>{try{H(R)}catch(K){console.error(" Error in message callback:",K)}})},E.onerror=A=>{f.current||console.error(" WebSocket error:",A),S("disconnected")},E.onclose=A=>{f.current||(A.code!==1e3&&console.warn(" WebSocket disconnected",A.code),p(!1),S("disconnected"),A.code!==1e3&&a.current<u&&x())}},[g]),x=N.useCallback(()=>{if(f.current||a.current>=u){console.error(" Max reconnection attempts reached");return}const E=Math.min(1e4,1e3*Math.pow(2,a.current));console.log(` Reconnecting in ${E/1e3}s... (attempt ${a.current+1})`),S("reconnecting"),l.current=setTimeout(()=>{f.current||(a.current+=1,y())},E)},[y]);N.useEffect(()=>(f.current=!1,y(),()=>{f.current=!0,g()}),[]);const w=N.useCallback(E=>{if(o.current&&o.current.readyState===WebSocket.OPEN)try{return o.current.send(E),!0}catch(A){return console.error(" Error sending message:",A),!1}return console.warn(" WebSocket not ready to send. Current state:",o.current?o.current.readyState:"null"),!1},[]),C=N.useCallback(E=>{if(typeof E=="function")return d.current.push(E),()=>j(E)},[]),j=N.useCallback(E=>{d.current=d.current.filter(A=>A!==E)},[]),T=N.useCallback(()=>{a.current=0,y()},[y]),M=N.useMemo(()=>({isConnected:s,connectionStatus:b,send:w,addMessageCallback:C,removeMessageCallback:j,reconnect:T}),[s,b,w,C,j,T]);return h.jsx(v1.Provider,{value:M,children:e})},Js=()=>{const e=N.useContext(v1);if(!e)throw new Error("useWebSocket must be used within a WebSocketProvider");return e};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_T=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),py=e=>{const t=_T(e);return t.charAt(0).toUpperCase()+t.slice(1)},w1=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),NT=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:p="",children:b,iconNode:S,...d},a)=>N.createElement("svg",{ref:a,...MT,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:w1("lucide",p),...!b&&!NT(d)&&{"aria-hidden":"true"},...d},[...S.map(([l,f])=>N.createElement(l,f)),...Array.isArray(b)?b:[b]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(e,t)=>{const r=N.forwardRef(({className:s,...p},b)=>N.createElement(ET,{ref:b,iconNode:t,className:w1(`lucide-${TT(py(e))}`,`lucide-${e}`,s),...p}));return r.displayName=py(e),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],lr=Ee("activity",OT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],AT=Ee("aperture",DT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],xy=Ee("arrow-right-left",RT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],LT=Ee("battery",PT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],zT=Ee("brush",FT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],To=Ee("camera",IT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mi=Ee("chart-column",BT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],$T=Ee("chart-line",VT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],UT=Ee("chart-no-axes-column",HT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],YT=Ee("check",XT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Pc=Ee("chevron-down",GT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],S1=Ee("chevron-left",qT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],C1=Ee("chevron-right",WT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xf=Ee("chevron-up",KT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lc=Ee("circle-alert",ZT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Uo=Ee("circle-check-big",QT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],k1=Ee("circle-x",JT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_o=Ee("circle",e_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],n_=Ee("clock",t_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],r_=Ee("copy",i_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],uo=Ee("crop",s_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Xs=Ee("crosshair",a_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gr=Ee("download",o_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],yf=Ee("eraser",l_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],u_=Ee("factory",c_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yy=Ee("file-text",d_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],f_=Ee("flip-horizontal",h_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],j1=Ee("focus",m_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wn=Ee("funnel",g_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],No=Ee("gauge",p_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fc=Ee("grid-3x3",x_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],b_=Ee("hand",y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],w_=Ee("hash",v_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],by=Ee("house",S_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],k_=Ee("image-plus",C_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vy=Ee("image",j_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ea=Ee("info",T_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],T1=Ee("layers",__);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],M_=Ee("layout-dashboard",N_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],O_=Ee("lock",E_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],zc=Ee("map-pin",D_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],bf=Ee("maximize-2",A_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Mo=Ee("maximize",R_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vr=Ee("minus",P_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],F_=Ee("monitor",L_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],I_=Ee("moon",z_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],cm=Ee("move-3d",B_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],$_=Ee("move-horizontal",V_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],_c=Ee("move",H_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_1=Ee("palette",U_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],um=Ee("pause",X_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],dm=Ee("play",Y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q_=Ee("plus",G_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],wy=Ee("power",W_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Z_=Ee("rectangle-horizontal",K_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],J_=Ee("refresh-cw",Q_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ai=Ee("rotate-ccw",eN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],mo=Ee("rotate-cw",tN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Fh=Ee("route",nN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Sy=Ee("ruler",iN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xo=Ee("save",rN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Cy=Ee("search",sN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Pt=Ee("settings",aN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ky=Ee("shield",oN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],cN=Ee("sliders-vertical",lN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],$r=Ee("sparkles",uN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],hN=Ee("square-pen",dN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],cr=Ee("square",fN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gN=Ee("sun",mN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xN=Ee("target",pN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],N1=Ee("thermometer",yN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ou=Ee("trash-2",bN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],M1=Ee("trending-down",vN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],qs=Ee("trending-up",wN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ic=Ee("triangle-alert",SN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],jy=Ee("undo-2",CN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yo=Ee("upload",kN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ty=Ee("video-off",jN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_y=Ee("video",TN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]],Ny=Ee("waypoints",_N);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ft=Ee("x",NN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],EN=Ee("wrench",MN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Un=Ee("zap",ON);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ho=Ee("zoom-in",DN);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],My=Ee("zoom-out",AN),Go=({icon:e})=>{const{t,i18n:r}=et(),{isConnected:s}=Js(),p=r.language==="fa"?"text-right":"text-left";return s?h.jsx("div",{className:"panel bg-background-white dark:bg-background-secondary border border-border rounded-lg p-4 mb-6",children:h.jsxs("div",{className:"flex items-center gap-3 text-primary dark:text-primary",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),h.jsx("span",{className:`font-medium font-vazir ${p}`,children:t("websocketConnected")})]})}):h.jsx("div",{className:"panel variant-highlight border border-border rounded-lg p-4 mb-6 animate-pulse",children:h.jsxs("div",{className:"flex items-center gap-3 text-white dark:text-white",children:[h.jsxs("div",{className:"relative",children:[h.jsx(e,{className:"w-5 h-5"}),h.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-highlight rounded-full animate-ping"})]}),h.jsx("span",{className:`font-medium font-vazir ${p}`,children:t("websocketConnecting")})]})})},bt=({label:e,icon:t,children:r,value:s,unit:p,className:b="",showValue:S=!0})=>{const{i18n:d}=et(),a=d.language==="fa",l=a?"flex-row-reverse":"flex-row",f=a?"text-right":"text-left";return h.jsxs("div",{className:`card p-4 transition-all duration-200 hover:shadow-md ${b}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[h.jsxs("div",{className:`flex items-center gap-2 ${l}`,children:[t&&h.jsx(t,{className:"w-5 h-5 text-primary flex-shrink-0"}),h.jsx("label",{className:`font-medium text-sm text-text dark:text-text ${f}`,children:e})]}),S&&s&&h.jsxs("span",{className:`text-sm text-primary dark:text-primary font-semibold ${f} flex-shrink-0`,children:[s," ",p]})]}),r]})},gt=({type:e="text",name:t,value:r,onChange:s,placeholder:p,min:b,max:S,step:d,disabled:a=!1,className:l="",...f})=>{const{i18n:o}=et(),c=o.language==="fa"?"text-right":"text-left",u=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    ${a?"cursor-not-allowed opacity-50":""}
    ${c}
    ${e==="number"?"number-input":""}
  `;return h.jsx("input",{type:e,name:t,value:r||"",onChange:s,placeholder:p,min:b,max:S,step:d,disabled:a,className:`${u} ${l}`,...f})},or=({name:e,value:t,onChange:r,options:s=[],disabled:p=!1,className:b="",...S})=>{const{i18n:d}=et(),a=d.language==="fa"?"text-right":"text-left",l=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    cursor-pointer
    ${p?"cursor-not-allowed opacity-50":""}
    ${a}
  `;return h.jsx("select",{name:e,value:t,onChange:r,disabled:p,className:`${l} ${b}`,...S,children:s.map(f=>h.jsx("option",{value:f.value,children:f.label},f.value))})},Hr=({active:e,onClick:t,icon:r,label:s,disabled:p=!1,className:b="",showStatus:S=!0})=>{const{t:d,i18n:a}=et(),l=a.language==="fa"?"text-right":"text-left",f=`
    h-10 px-4 rounded-lg font-medium transition-all duration-200
    ${e?"bg-primary hover:bg-primary-dark text-white shadow-md":"bg-background-secondary hover:bg-accent text-text-muted"}
    ${p?"opacity-50 cursor-not-allowed":""}
    ${b}
  `;return h.jsxs("div",{children:[S&&h.jsx("div",{className:"flex items-center mb-3",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${e?"bg-primary":"bg-gray-400"}`}),h.jsx("span",{className:`text-sm font-medium transition-colors duration-200 ${e?"text-primary dark:text-primary":"text-text-muted dark:text-text-muted"} ${l}`,children:d(e?"active":"inactive")})]})}),h.jsx("button",{type:"button",onClick:t,disabled:p,className:f,children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r&&h.jsx(r,{className:"w-4 h-4"}),h.jsx("span",{children:s||d(e?"active":"inactive")})]})})]})},qo=({children:e,maxWidth:t="max-w-5xl"})=>h.jsx("div",{className:"h-full bg-background dark:bg-background font-vazir overflow-auto",children:h.jsx("div",{className:`${t} mx-auto p-2 sm:p-3 lg:p-4`,children:e})}),RN=({onStatusChange:e})=>{const{t}=et(),[r,s]=N.useState({interlock:{status:"ok",value:"Closed",message:""},temperature:{status:"ok",value:25.5,message:""},voltage:{status:"ok",value:220,message:""},pressure:{status:"ok",value:1,message:""},cooling:{status:"ok",value:"Active",message:""}});N.useEffect(()=>{const d=setInterval(()=>{const a=25+Math.random()*10,l=215+Math.random()*10,f={interlock:{status:Math.random()>.1?"ok":"warning",value:Math.random()>.1?"Closed":"Open",message:Math.random()>.1?"":"Door is open"},temperature:{status:a<30?"ok":a<35?"warning":"error",value:a.toFixed(1),message:a>30?"Temperature is high":""},voltage:{status:Math.abs(l-220)<5?"ok":Math.abs(l-220)<10?"warning":"error",value:l.toFixed(1),message:Math.abs(l-220)>5?"Voltage unstable":""},pressure:{status:"ok",value:(.95+Math.random()*.1).toFixed(2),message:""},cooling:{status:Math.random()>.05?"ok":"error",value:Math.random()>.05?"Active":"Inactive",message:Math.random()>.05?"":"Cooling system failed"}};s(f);const o=Object.values(f).some(u=>u.status==="error"),c=Object.values(f).some(u=>u.status==="warning");e&&e({overallStatus:o?"error":c?"warning":"ok",details:f})},2e3);return()=>clearInterval(d)},[e]);const p=d=>{switch(d){case"ok":return h.jsx(Uo,{className:"w-5 h-5 text-green-500"});case"warning":return h.jsx(Lc,{className:"w-5 h-5 text-yellow-500"});case"error":return h.jsx(k1,{className:"w-5 h-5 text-red-500"});default:return h.jsx(Lc,{className:"w-5 h-5 text-gray-400"})}},b=d=>{switch(d){case"ok":return"border-green-500 bg-green-50 dark:bg-green-900/20";case"warning":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"error":return"border-red-500 bg-red-50 dark:bg-red-900/20";default:return"border-gray-300 bg-gray-50 dark:bg-gray-900/20"}},S=[{key:"interlock",label:t("interlock")||"Interlock",icon:O_,unit:""},{key:"temperature",label:t("temperature")||"Temperature",icon:N1,unit:"C"},{key:"voltage",label:t("voltage"),icon:Un,unit:"V"},{key:"pressure",label:t("pressure")||"Pressure",icon:No,unit:"bar"},{key:"cooling",label:t("coolingSystem")||"Cooling System",icon:ky,unit:""}];return h.jsxs("div",{className:"card p-4 lg:p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(ky,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("systemStabilityCheck")||"System Stability Check"})]}),h.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:S.map(({key:d,label:a,icon:l,unit:f})=>{const o=r[d];return h.jsxs("div",{className:`panel p-4 rounded-lg border-2 transition-all ${b(o.status)}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(l,{className:"w-4 h-4 text-text-muted dark:text-text-muted"}),h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:a})]}),p(o.status)]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs("div",{className:"text-xl font-bold font-mono text-text dark:text-text",children:[o.value," ",f]}),o.message&&h.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted mt-1",children:o.message})]})]},d)})})]})},PN=({tubeParams:e})=>{const{t}=et(),[r,s]=N.useState([]),[p,b]=N.useState(!1),[S,d]=N.useState(50),a=N.useRef(null);N.useEffect(()=>{if(!p&&e){const c={id:Date.now(),timestamp:new Date().toLocaleTimeString("en-GB"),voltage:e.voltage||0,current:e.current||0,power:e.power||0,exposureTime:e.exposureTime||0,temperature:e.temperature||0};s(u=>[c,...u].slice(0,S))}},[e,p,S]),N.useEffect(()=>{a.current&&!p&&(a.current.scrollTop=0)},[r,p]);const l=()=>{if(r.length===0)return;const u=[["Timestamp","Voltage (kVp)","Current (mA)","Power (W)","Exposure Time (s)","Temperature (C)"].join(","),...r.map(w=>`${w.timestamp},${w.voltage},${w.current},${w.power},${w.exposureTime},${w.temperature}`)].join(`
`),g=new Blob([u],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),x=URL.createObjectURL(g);y.setAttribute("href",x),y.setAttribute("download",`xray_exposure_log_${new Date().toISOString()}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},f=()=>{s([])},o=()=>{b(!p)};return h.jsxs("div",{className:"card p-4 lg:p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("xrayExposureLog")||"X-ray Tube & Exposure Log"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:o,className:"px-3 py-1.5 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-1.5 text-sm",children:p?h.jsxs(h.Fragment,{children:[h.jsx(dm,{className:"w-4 h-4"}),h.jsx("span",{children:t("resume")||"Resume"})]}):h.jsxs(h.Fragment,{children:[h.jsx(um,{className:"w-4 h-4"}),h.jsx("span",{children:t("pause")||"Pause"})]})}),h.jsxs("button",{onClick:l,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Gr,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:t("download")||"Download"})]}),h.jsxs("button",{onClick:f,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(ou,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:t("clear")||"Clear"})]})]})]}),h.jsxs("div",{className:"mb-3 text-sm text-text-muted dark:text-text-muted",children:[t("totalLogs")||"Total logs",": ",r.length," / ",S,p&&h.jsxs("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400 font-medium",children:["(",t("paused")||"Paused",")"]})]}),h.jsx("div",{ref:a,className:"overflow-auto max-h-[400px] border border-border rounded-lg",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-background-secondary dark:bg-background-primary sticky top-0",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3 py-2 text-left font-medium text-text dark:text-text border-b border-border",children:t("time")||"Time"}),h.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[t("voltage")," (kVp)"]}),h.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[t("current")," (mA)"]}),h.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[t("power")," (W)"]}),h.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[t("exposureTime")," (s)"]}),h.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[t("temperature")," (C)"]})]})}),h.jsx("tbody",{children:r.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:"6",className:"px-3 py-8 text-center text-text-muted dark:text-text-muted",children:t("noLogsYet")||"No logs recorded yet"})}):r.map(c=>h.jsxs("tr",{className:"hover:bg-background-secondary/50 dark:hover:bg-background-primary/50 transition-colors",children:[h.jsx("td",{className:"px-3 py-2 text-text dark:text-text border-b border-border/50 font-mono text-xs",children:c.timestamp}),h.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:c.voltage}),h.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:c.current}),h.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:c.power}),h.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:c.exposureTime}),h.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:c.temperature})]},c.id))})]})})]})},E1=N.createContext(),LN=({children:e})=>{const{isConnected:t,connectionStatus:r,addMessageCallback:s}=Js();ti.logRender("CameraProvider",{connectionStatus:r});const p=N.useRef({basler:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0},monitoring:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0}}),[b,S]=N.useState({basler:{isConnected:!1},monitoring:{isConnected:!1}}),d=N.useRef({basler:!1,monitoring:!1}),a=N.useRef(new Set),[l,f]=N.useState(null),[o,c]=N.useState([]),[u,g]=N.useState(!1),[y,x]=N.useState([]),[w,C]=N.useState([]),[j,T]=N.useState({brightness:100,contrast:100,saturation:100,zoom:1,grayscale:!1,crop:null,panOffset:{x:0,y:0}}),[M,E]=N.useState({x:0,y:0}),[A,R]=N.useState([]);N.useEffect(()=>{const Z=s(fe=>{try{if(typeof fe=="string"&&fe.startsWith("response:")){console.log("Backend Response:",fe.slice(9));return}if(typeof fe!="string")return;const ae=fe.indexOf(":");if(ae===-1)return;const ce=fe.substring(0,ae),me=fe.substring(ae+1);if(!me)return;if(!["basler","monitoring"].includes(ce)){console.warn("Unknown channel:",ce);return}const be=`data:image/jpeg;base64,${me}`,W=Date.now(),re=p.current[ce],ge=re.frameCount+1;let Y=re.avgFps,ee=re.lastFpsCalculation;if(W-ee>=5e3){if(ee>0){const J=(W-ee)/1e3,xe=ge-(re.frameCount-ge+1);Y=Math.round(xe/J*10)/10}ee=W}p.current[ce]={currentFrame:be,lastUpdate:W,frameCount:ge,avgFps:Y,lastFpsCalculation:ee},d.current[ce]||(d.current[ce]=!0,S(J=>({...J,[ce]:{isConnected:!0}}))),a.current.forEach(J=>{try{J(ce)}catch(xe){console.error("Frame callback error:",xe)}})}catch(ae){console.error(" Error processing camera message:",ae)}});return()=>{Z&&Z()}},[s]),N.useEffect(()=>{t||(p.current.basler.currentFrame=null,p.current.monitoring.currentFrame=null,d.current.basler=!1,d.current.monitoring=!1,S({basler:{isConnected:!1},monitoring:{isConnected:!1}}))},[t]);const H=N.useCallback(ie=>{f(ie),console.log(`: ${ie}`)},[]),K=N.useCallback(ie=>{ie&&(ie.tool==="eraser"?X(ie):(C(Z=>[...Z,ie]),R(Z=>[...Z,{type:"tool-drawing",action:"add",drawing:ie}])))},[]),X=N.useCallback(ie=>{const Z=ie.eraserRadius||15,fe=ie.path||[];fe.length!==0&&(C(ae=>{const ce=[];return ae.forEach(me=>{if(me.tool==="eraser")return;let be=!1;if(me.path&&me.path.length>0)for(const W of me.path){for(const re of fe)if(Math.sqrt(Math.pow(W.x-re.x,2)+Math.pow(W.y-re.y,2))<=Z){be=!0;break}if(be)break}be||ce.push(me)}),ce}),c(ae=>{const ce=[];return ae.forEach(me=>{let be=!1;if(me.path&&me.path.length>0)for(const W of me.path){for(const re of fe)if(Math.sqrt(Math.pow(W.x-re.x,2)+Math.pow(W.y-re.y,2))<=Z){be=!0;break}if(be)break}be||ce.push(me)}),ce}),R(ae=>[...ae,{type:"eraser",action:"erase",eraserDrawing:ie,eraserRadius:Z}]))},[]),ne=N.useCallback((ie,Z)=>{if(!(!l||l==="pan")){if(l==="crop"&&j.crop){T(fe=>({...fe,crop:null})),f(null),R(fe=>[...fe,{type:"crop",action:"remove"}]);return}g(!0),x([{x:ie,y:Z}])}},[l,j.crop]),de=N.useCallback((ie,Z)=>{E({x:ie,y:Z}),!(!u||!l)&&x(fe=>[...fe,{x:ie,y:Z}])},[u,l]),se=N.useCallback(()=>{if(!u||y.length<2){g(!1),x([]);return}if(l==="crop"){const ie=y[0],Z=y[y.length-1],fe={x:Math.min(ie.x,Z.x),y:Math.min(ie.y,Z.y),width:Math.abs(Z.x-ie.x),height:Math.abs(Z.y-ie.y)};T(ae=>({...ae,crop:fe})),R(ae=>[...ae,{type:"crop",action:"apply",settings:fe}])}else{const ie={id:Date.now(),tool:l,path:y};c(Z=>[...Z,ie]),R(Z=>[...Z,{type:"drawing",action:"add",drawing:ie}])}g(!1),x([])},[u,y,l]),q=N.useCallback(()=>{c([]),C([]),x([]),g(!1),T(ie=>({...ie,crop:null})),R(ie=>[...ie,{type:"clear",action:"all"}]),window.clearFabricCanvas&&window.clearFabricCanvas()},[]),P=N.useCallback(ie=>{T(Z=>({...Z,...ie})),R(Z=>[...Z,{type:"settings",action:"update",settings:ie}])},[]),$=N.useCallback(()=>{T(ie=>{const Z=!ie.grayscale;return R(fe=>[...fe,{type:"grayscale",action:"toggle",value:Z}]),{...ie,grayscale:Z}})},[]),V=N.useCallback(ie=>{T(Z=>{const fe=ie==="in"?Z.zoom*1.2:Z.zoom/1.2,ae=Math.max(.2,Math.min(5,fe));return R(ce=>[...ce,{type:"zoom",action:"change",value:ae,prevValue:Z.zoom}]),{...Z,zoom:ae}})},[]),D=N.useCallback(()=>{T(ie=>{const Z=ie.zoom*1.2,fe=Math.max(.2,Math.min(5,Z));if(R(ae=>[...ae,{type:"zoom",action:"in",value:fe,prevValue:ie.zoom}]),window.fabricCanvas){const ae=window.fabricCanvas,ce=ae.getCenter();ae.zoomToPoint({x:ce.left,y:ce.top},fe),ae.requestRenderAll()}return{...ie,zoom:fe}})},[]),O=N.useCallback(()=>{T(ie=>{const Z=ie.zoom/1.2,fe=Math.max(.2,Math.min(5,Z));if(R(ae=>[...ae,{type:"zoom",action:"out",value:fe,prevValue:ie.zoom}]),window.fabricCanvas){const ae=window.fabricCanvas,ce=ae.getCenter();ae.zoomToPoint({x:ce.left,y:ce.top},fe),ae.requestRenderAll()}return{...ie,zoom:fe}})},[]),L=N.useCallback(()=>{T(ie=>{if(R(Z=>[...Z,{type:"zoom",action:"reset",value:1,prevValue:ie.zoom}]),window.fabricCanvas){const Z=window.fabricCanvas;Z.setViewportTransform([1,0,0,1,0,0]),Z.requestRenderAll()}return{...ie,zoom:1}})},[]),I=N.useCallback((ie,Z)=>{T(fe=>{const ae={x:fe.panOffset.x+ie,y:fe.panOffset.y+Z};return R(ce=>[...ce,{type:"pan",action:"move",offset:ae,prevOffset:fe.panOffset}]),{...fe,panOffset:ae}})},[]),G=N.useCallback(()=>{if(window.undoLastFabricAction){window.undoLastFabricAction();return}R(ie=>{if(ie.length===0)return ie;const Z=ie[ie.length-1],fe=ie.slice(0,-1);switch(Z.type){case"drawing":Z.action==="add"&&c(ae=>ae.slice(0,-1));break;case"tool-drawing":Z.action==="add"&&C(ae=>ae.slice(0,-1));break;case"eraser":Z.action==="erase"&&console.log("Undo eraser operation - complex operation");break;case"crop":Z.action==="apply"?T(ae=>({...ae,crop:null})):Z.action==="remove"&&T(ae=>({...ae,crop:Z.settings}));break;case"grayscale":T(ae=>({...ae,grayscale:!Z.value}));break;case"zoom":T(ae=>({...ae,zoom:Z.prevValue}));break;case"settings":T(ae=>({...ae,...Z.prevSettings}));break;case"pan":T(ae=>({...ae,panOffset:Z.prevOffset}));break}return fe})},[]),B=N.useCallback(ie=>{var Z;return((Z=p.current[ie])==null?void 0:Z.currentFrame)||null},[]),z=N.useCallback(ie=>{const Z=p.current[ie];return{frameCount:(Z==null?void 0:Z.frameCount)||0,avgFps:(Z==null?void 0:Z.avgFps)||0,lastUpdate:(Z==null?void 0:Z.lastUpdate)||0}},[]),te=N.useCallback(ie=>(a.current.add(ie),()=>a.current.delete(ie)),[]),Q=N.useCallback(ie=>{a.current.delete(ie)},[]),ue=N.useMemo(()=>({basler:{get currentFrame(){return p.current.basler.currentFrame},get frameCount(){return p.current.basler.frameCount},get avgFps(){return p.current.basler.avgFps},get lastUpdate(){return p.current.basler.lastUpdate},isConnected:b.basler.isConnected},monitoring:{get currentFrame(){return p.current.monitoring.currentFrame},get frameCount(){return p.current.monitoring.frameCount},get avgFps(){return p.current.monitoring.avgFps},get lastUpdate(){return p.current.monitoring.lastUpdate},isConnected:b.monitoring.isConnected}}),[b]),le=N.useMemo(()=>({cameras:ue,cameraStatus:b,getCameraFrame:B,getCameraStats:z,addFrameCallback:te,removeFrameCallback:Q,activeTool:l,drawings:o,toolDrawings:w,isDrawing:u,currentPath:y,imageSettings:j,cursorPosition:M,wsStatus:r,applyTool:H,startDrawing:ne,continueDrawing:de,finishDrawing:se,clearDrawings:q,addToolDrawing:K,updateImageSettings:P,toggleGrayscale:$,zoomImage:V,zoomIn:D,zoomOut:O,resetZoom:L,panImage:I,undoLastChange:G}),[ue,b,l,o,w,u,y,j,M,r,B,z,te,Q]);return h.jsx(E1.Provider,{value:le,children:e})},hm=()=>{const e=N.useContext(E1);if(!e)throw new Error("useCamera must be used within CameraProvider");return e},FN=()=>{ti.logRender("MonitoringDisplay");const e=N.useRef(null),{cameras:t,wsStatus:r,addFrameCallback:s}=hm();return N.useEffect(()=>{const b=s(S=>{if(S==="monitoring"&&e.current){const d=t.monitoring.currentFrame;d&&(e.current.src=d)}});return()=>b()},[t,s]),h.jsxs("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden relative",children:[h.jsx("img",{ref:e,className:"w-full h-full object-contain",alt:"Monitoring Camera",style:{display:t.monitoring.currentFrame?"block":"none"}}),!t.monitoring.currentFrame&&h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"text-white text-sm mb-2",children:[r==="connecting"&&"    RTSP...",r==="connected"&&"    RTSP...",r==="reconnecting"&&"    ...",r==="error"&&"    RTSP",r==="failed"&&"  RTSP ",r==="disconnected"&&"    "]}),(r==="error"||r==="failed")&&h.jsx("div",{className:"text-gray-400 text-xs",children:"  RTSP  "})]})}),h.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm",children:"Monitoring Camera"}),h.jsx("div",{className:`absolute bottom-2 left-2 w-3 h-3 rounded-full ${t.monitoring.isConnected&&t.monitoring.currentFrame?"bg-green-500":"bg-red-500"}`}),t.monitoring.currentFrame&&h.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs space-y-1",children:[h.jsx("div",{children:"RTSP Live"}),t.monitoring.avgFps>0&&h.jsxs("div",{className:"text-green-400",children:["FPS: ",t.monitoring.avgFps," | Frames: ",t.monitoring.frameCount]})]})]})},O1=Le.memo(FN),zN=({onTrajectoryChange:e,disabled:t=!1})=>{const{t:r}=et(),[s,p]=N.useState("circular"),[b,S]=N.useState({numberOfSteps:360,anglePerStep:1,startAngle:0,endAngle:360,rotationSpeed:10,helixPitch:10,heightSteps:10,customPoints:[]}),[d,a]=N.useState([]),l=[{value:"stepwise",label:"Stepwise",icon:Fh,description:r("stepwiseDesc")||"Discrete angular steps",color:"bg-blue-500"},{value:"circular",label:"Circular",icon:_o,description:r("circularDesc")||"Continuous circular motion",color:"bg-green-500"},{value:"helical",label:"Helical",icon:qs,description:r("helicalDesc")||"Spiral path for tall objects",color:"bg-purple-500"},{value:"arbitrary",label:"Arbitrary",icon:Ny,description:r("arbitraryDesc")||"Custom trajectory path",color:"bg-orange-500"}],f=(w,C)=>{const j={...b,[w]:parseFloat(C)||0};S(j),e&&e({type:s,params:j})},o=w=>{p(w),e&&e({type:w,params:b})},c=()=>{const w=prompt(r("enterTrajectoryName")||"Enter trajectory name:");w&&a([...d,{name:w,type:s,params:{...b}}])},u=w=>{p(w.type),S(w.params),e&&e({type:w.type,params:w.params})},g=w=>{a(d.filter((C,j)=>j!==w))},y=()=>{const w=JSON.stringify({type:s,params:b},null,2),C=new Blob([w],{type:"application/json"}),j=URL.createObjectURL(C),T=document.createElement("a");T.href=j,T.download=`trajectory_${s}_${Date.now()}.json`,T.click(),URL.revokeObjectURL(j)},x=w=>{const C=w.target.files[0];if(C){const j=new FileReader;j.onload=T=>{try{const M=JSON.parse(T.target.result);p(M.type),S(M.params),e&&e(M)}catch{alert("Invalid trajectory file")}},j.readAsText(C)}};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fh,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("trajectoryDefinition")||"Trajectory Definition"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:c,disabled:t,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Xo,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("save")})]}),h.jsxs("button",{onClick:y,disabled:t,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Gr,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),h.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Yo,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("import")||"Import"}),h.jsx("input",{type:"file",accept:".json",onChange:x,className:"hidden",disabled:t})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("selectTrajectoryType")||"Select Trajectory Type"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:l.map(w=>{const C=w.icon,j=s===w.value;return h.jsx("button",{onClick:()=>o(w.value),disabled:t,className:`
                  p-3 sm:p-4 rounded-lg border-2 transition-all text-left
                  ${j?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50"}
                  ${t?"opacity-50 cursor-not-allowed":""}
                `,children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-2 sm:gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${w.color} bg-opacity-20 flex-shrink-0`,children:h.jsx(C,{className:`w-4 h-4 sm:w-5 sm:h-5 ${w.color.replace("bg-","text-")}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("div",{className:"font-semibold text-text dark:text-text mb-1 text-sm sm:text-base",children:w.label}),h.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted line-clamp-2",children:w.description})]})]})},w.value)})})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-4 flex items-center gap-2",children:[h.jsx(Pt,{className:"w-4 h-4"}),r("trajectoryParameters")||"Trajectory Parameters"]}),s==="stepwise"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSteps")||"Number of Steps"}),h.jsx("input",{type:"number",value:b.numberOfSteps,onChange:w=>f("numberOfSteps",w.target.value),disabled:t,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("anglePerStep")||"Angle per Step"," ()"]}),h.jsx("input",{type:"number",value:b.anglePerStep,onChange:w=>f("anglePerStep",w.target.value),disabled:t,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),s==="circular"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("startAngle")||"Start Angle"," ()"]}),h.jsx("input",{type:"number",value:b.startAngle,onChange:w=>f("startAngle",w.target.value),disabled:t,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("endAngle")||"End Angle"," ()"]}),h.jsx("input",{type:"number",value:b.endAngle,onChange:w=>f("endAngle",w.target.value),disabled:t,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("rotationSpeed")," (/s)"]}),h.jsx("input",{type:"number",value:b.rotationSpeed,onChange:w=>f("rotationSpeed",w.target.value),disabled:t,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),s==="helical"&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("helixPitch")||"Helix Pitch"," (mm)"]}),h.jsx("input",{type:"number",value:b.helixPitch,onChange:w=>f("helixPitch",w.target.value),disabled:t,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("heightSteps")||"Height Steps"}),h.jsx("input",{type:"number",value:b.heightSteps,onChange:w=>f("heightSteps",w.target.value),disabled:t,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),s==="arbitrary"&&h.jsxs("div",{className:"text-center py-8",children:[h.jsx(Ny,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-50"}),h.jsx("p",{className:"text-sm text-text-muted mb-4",children:r("arbitraryTrajectoryInfo")||"Use trajectory designer or import custom points"}),h.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:r("openDesigner")||"Open Trajectory Designer"})]})]}),d.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("savedTrajectories")||"Saved Trajectories"}),h.jsx("div",{className:"space-y-2",children:d.map((w,C)=>{var j,T;return h.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[h.jsxs("button",{onClick:()=>u(w),disabled:t,className:"flex-1 text-left flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded ${((j=l.find(M=>M.value===w.type))==null?void 0:j.color)||"bg-gray-500"} bg-opacity-20`,children:Le.createElement(((T=l.find(M=>M.value===w.type))==null?void 0:T.icon)||Fh,{className:"w-4 h-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-text dark:text-text",children:w.name}),h.jsx("div",{className:"text-xs text-text-muted",children:w.type.charAt(0).toUpperCase()+w.type.slice(1)})]})]}),h.jsx("button",{onClick:()=>g(C),className:"ml-2 p-2 rounded hover:bg-red-100 text-red-600 transition-colors",children:h.jsx(ou,{className:"w-4 h-4"})})]},C)})})]})]})},IN=({onGeometryChange:e,disabled:t=!1})=>{const{t:r}=et(),[s,p]=N.useState({sod:1e3,sdd:1500,detectorWidth:400,detectorHeight:300,pixelPitch:.2,effectivePixelSize:.2,coneBeamAngle:15,magnification:1.5,focalSpotSize:.4,detectorType:"Flat Panel"}),[b,S]=N.useState({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),d=(y,x)=>y>0?(x/y).toFixed(3):0,a=(y,x)=>x>0?(y/x).toFixed(4):y,l=(y,x)=>{const w=parseFloat(x)||0;let C={...s,[y]:w};if(y==="sod"||y==="sdd"){const j=d(y==="sod"?w:s.sod,y==="sdd"?w:s.sdd);C.magnification=parseFloat(j),C.effectivePixelSize=parseFloat(a(s.pixelPitch,j))}y==="pixelPitch"&&(C.effectivePixelSize=parseFloat(a(w,s.magnification))),p(C),e&&e(C)},f=()=>{S({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),setTimeout(()=>{const y=.95+Math.random()*.05;S({isCalibrated:!0,lastCalibration:new Date().toISOString(),geometricAccuracy:y.toFixed(4)})},3e3)},o=()=>{const y=JSON.stringify({geometry:s,calibrationStatus:b,timestamp:new Date().toISOString()},null,2),x=new Blob([y],{type:"application/json"}),w=URL.createObjectURL(x),C=document.createElement("a");C.href=w,C.download=`geometry_config_${Date.now()}.json`,C.click(),URL.revokeObjectURL(w)},c=y=>{const x=y.target.files[0];if(x){const w=new FileReader;w.onload=C=>{try{const j=JSON.parse(C.target.result);p(j.geometry),S(j.calibrationStatus||b),e&&e(j.geometry)}catch{alert("Invalid geometry configuration file")}},w.readAsText(x)}},g=(()=>{const y=(s.detectorWidth/s.magnification).toFixed(2),x=(s.detectorHeight/s.magnification).toFixed(2);return{width:y,height:x}})();return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Sy,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("geometryConfiguration")||"Geometry Configuration"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:f,disabled:t,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(J_,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("calibrate")||"Calibrate"})]}),h.jsxs("button",{onClick:o,disabled:t,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Gr,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),h.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Yo,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("import")}),h.jsx("input",{type:"file",accept:".json",onChange:c,className:"hidden",disabled:t})]})]})]}),b.isCalibrated&&h.jsx("div",{className:"panel p-4 rounded-lg border-2 border-green-500 bg-green-50 dark:bg-green-900/20",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Uo,{className:"w-5 h-5 text-green-600 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-green-800 dark:text-green-300 mb-1",children:r("systemCalibrated")||"System Calibrated"}),h.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("lastCalibration")||"Last calibration",": ",new Date(b.lastCalibration).toLocaleString()]}),h.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("geometricAccuracy")||"Geometric accuracy",": ",(parseFloat(b.geometricAccuracy)*100).toFixed(2),"%"]})]})]})}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[h.jsx(Sy,{className:"w-4 h-4"}),r("distanceParameters")||"Distance Parameters"]}),h.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SOD - Source to Object (mm)"}),h.jsx(gt,{type:"number",value:s.sod,onChange:y=>l("sod",y.target.value),disabled:t,min:"1",step:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SDD - Source to Detector (mm)"}),h.jsx(gt,{type:"number",value:s.sdd,onChange:y=>l("sdd",y.target.value),disabled:t,min:"1",step:"1"})]})]})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[h.jsx(Mo,{className:"w-4 h-4"}),r("detectorParameters")||"Detector Parameters"]}),h.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorWidth")||"Detector Width"," (mm)"]}),h.jsx(gt,{type:"number",value:s.detectorWidth,onChange:y=>l("detectorWidth",y.target.value),disabled:t,min:"1",step:"1"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorHeight")||"Detector Height"," (mm)"]}),h.jsx(gt,{type:"number",value:s.detectorHeight,onChange:y=>l("detectorHeight",y.target.value),disabled:t,min:"1",step:"1"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("pixelPitch")||"Pixel Pitch"," (mm)"]}),h.jsx(gt,{type:"number",value:s.pixelPitch,onChange:y=>l("pixelPitch",y.target.value),disabled:t,min:"0.001",step:"0.001"})]})]})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[h.jsx(j1,{className:"w-4 h-4"}),r("calculatedValues")||"Calculated Values"]}),h.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[h.jsxs("div",{className:"panel p-3 rounded-lg border-2 border-primary/20 bg-primary/5",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("magnification")||"Magnification"}),h.jsxs("div",{className:"text-xl font-bold text-primary font-mono",children:[s.magnification.toFixed(3),"x"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsxs("div",{className:"text-xs text-text-muted mb-1",children:[r("effectivePixelSize")||"Effective Pixel Size"," (mm)"]}),h.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:s.effectivePixelSize.toFixed(4)})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("width")||"Width"," (mm)"]}),h.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:g.width})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("height")||"Height"," (mm)"]}),h.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:g.height})]})]})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[h.jsx(AT,{className:"w-4 h-4"}),r("additionalParameters")||"Additional Parameters"]}),h.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("coneBeamAngle")||"Cone Beam Angle"," ()"]}),h.jsx(gt,{type:"number",value:s.coneBeamAngle,onChange:y=>l("coneBeamAngle",y.target.value),disabled:t,min:"0",step:"0.1"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("focalSpotSize")||"Focal Spot Size"," (mm)"]}),h.jsx(gt,{type:"number",value:s.focalSpotSize,onChange:y=>l("focalSpotSize",y.target.value),disabled:t,min:"0.001",step:"0.001"})]})]})]})]})},D1=N.createContext(),BN=({children:e})=>{const[t,r]=N.useState({initialParameters:{power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1},positionAndOptimization:{manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null},postProcessing:{rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"},projectionAcquisition:{imagingMode:"180",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"},reconstruction:{algorithm:"FBP",iterationCount:"10",filterType:"Ram-Lak",pixelSize:"0.1",reconstructionMode:"2D",outputFormat:"DICOM"}}),s=N.useCallback((b,S)=>{r(d=>({...d,[b]:S}))},[]),p=N.useCallback(()=>{const b={};return Object.entries(t).forEach(([S,d])=>{if(d&&Object.keys(d).length>0){const a={};Object.entries(d).forEach(([l,f])=>{(f!=null&&f!==""||typeof f=="boolean"||typeof f=="string"&&["mA","Al","8-bit","Medium","None","Low Pass","3x3","Sobel","TIFF","180","FBP","Ram-Lak","2D","DICOM"].includes(f))&&(a[l]=f)}),Object.keys(a).length>0&&(b[S]=a)}}),b},[t]);return h.jsx(D1.Provider,{value:{formData:t,updateFormData:s,getAllFormData:p},children:e})},A1=()=>N.useContext(D1),lu=(e,t)=>{const{formData:r,updateFormData:s}=A1(),{i18n:p}=et(),b=N.useMemo(()=>{const f=r[e]||{};return{...t,...f}},[t,r,e]),S=N.useCallback(f=>{const{name:o,value:c,type:u,checked:g}=f.target;s(e,{...b,[o]:u==="checkbox"?g:c})},[b,s,e]),d=p.language==="fa";return{pageData:b,handleChange:S,updateFormData:f=>s(e,f),isRtl:d,flexDir:d?"flex-row-reverse":"flex-row",textAlign:d?"text-right":"text-left"}},VN=({disabled:e=!1})=>{const{t}=et(),r=[{id:1,name:"Standard CT",description:"Standard CT scanning protocol",settings:{voltage:120,current:200,rotationMode:"360",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:"2025-10-01",lastUsed:"2025-10-13"},{id:2,name:"High Resolution",description:"High resolution imaging for small details",settings:{voltage:140,current:250,rotationMode:"360",exposureTime:150,numberOfProjections:720,imageCount:1},createdDate:"2025-10-05",lastUsed:"2025-10-12"},{id:3,name:"Low Dose",description:"Reduced radiation dose protocol",settings:{voltage:100,current:150,rotationMode:"180",exposureTime:50,numberOfProjections:180,imageCount:1},createdDate:"2025-10-08",lastUsed:null}],[s,p]=N.useState(r),[b,S]=N.useState(null),[d,a]=N.useState(!1),[l,f]=N.useState(null),o=E=>{a(!0),f({...E})},c=()=>{a(!0),f({id:Date.now(),name:"",description:"",settings:{voltage:120,current:200,rotationMode:"360",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:new Date().toISOString().split("T")[0],lastUsed:null})},u=()=>{if(!l.name.trim()){alert(t("enterProtocolName")||"Please enter a protocol name");return}const E=s.findIndex(A=>A.id===l.id);if(E>=0){const A=[...s];A[E]=l,p(A)}else p([...s,l]);a(!1),f(null)},g=()=>{a(!1),f(null)},y=E=>{confirm(t("confirmDeleteProtocol")||"Are you sure you want to delete this protocol?")&&(p(s.filter(A=>A.id!==E)),(b==null?void 0:b.id)===E&&S(null))},x=E=>{const A={...E,id:Date.now(),name:`${E.name} (Copy)`,createdDate:new Date().toISOString().split("T")[0],lastUsed:null};p([...s,A])},w=E=>{S(E);const A=s.map(R=>R.id===E.id?{...R,lastUsed:new Date().toISOString().split("T")[0]}:R);p(A),alert(t("protocolApplied")||`Protocol "${E.name}" has been applied`)},C=()=>{const E=JSON.stringify(s,null,2),A=new Blob([E],{type:"application/json"}),R=URL.createObjectURL(A),H=document.createElement("a");H.href=R,H.download=`scan_protocols_${new Date().getTime()}.json`,H.click(),URL.revokeObjectURL(R)},j=E=>{const A=E.target.files[0];if(A){const R=new FileReader;R.onload=H=>{try{const K=JSON.parse(H.target.result);p([...s,...K]),alert(t("protocolsImported")||"Protocols imported successfully!")}catch{alert(t("importError")||"Error importing protocols")}},R.readAsText(A)}},T=(E,A)=>{f({...l,[E]:A})},M=(E,A)=>{f({...l,settings:{...l.settings,[E]:A}})};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yy,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("scanProtocolManagement")||"Scan Protocol Management"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:c,disabled:e||d,className:"px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(q_,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:t("new")||"New"})]}),h.jsx("button",{onClick:C,disabled:e||s.length===0,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:h.jsx(Gr,{className:"w-4 h-4"})}),h.jsxs("label",{className:`px-3 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm cursor-pointer ${e?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(Yo,{className:"w-4 h-4"}),h.jsx("input",{type:"file",accept:".json",onChange:j,disabled:e,className:"hidden"})]})]})]}),d&&l&&h.jsxs("div",{className:"panel p-4 rounded-lg border-2 border-primary/50 space-y-4",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:l.name?t("editProtocol")||"Edit Protocol":t("newProtocol")||"New Protocol"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("name")||"Protocol Name"," *"]}),h.jsx("input",{type:"text",value:l.name,onChange:E=>T("name",E.target.value),placeholder:t("enterProtocolName")||"Enter protocol name",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("description")||"Description"}),h.jsx("input",{type:"text",value:l.description,onChange:E=>T("description",E.target.value),placeholder:t("enterDescription")||"Enter description",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("voltage")||"Voltage"," (kVp)"]}),h.jsx("input",{type:"number",value:l.settings.voltage,onChange:E=>M("voltage",parseInt(E.target.value)),min:"40",max:"160",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("current")||"Current"," (mA)"]}),h.jsx("input",{type:"number",value:l.settings.current,onChange:E=>M("current",parseInt(E.target.value)),min:"50",max:"500",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("rotationMode")||"Rotation Mode"}),h.jsxs("select",{value:l.settings.rotationMode,onChange:E=>M("rotationMode",E.target.value),className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"180",children:"180"}),h.jsx("option",{value:"360",children:"360"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("exposureTime")||"Exposure Time"," (ms)"]}),h.jsx("input",{type:"number",value:l.settings.exposureTime,onChange:E=>M("exposureTime",parseInt(E.target.value)),min:"10",max:"1000",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("numberOfProjections")||"Projections"}),h.jsx("input",{type:"number",value:l.settings.numberOfProjections,onChange:E=>M("numberOfProjections",parseInt(E.target.value)),min:"36",max:"1440",step:"36",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]}),h.jsxs("div",{className:"flex gap-2 justify-end",children:[h.jsx("button",{onClick:g,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors text-sm",children:t("cancel")||"Cancel"}),h.jsxs("button",{onClick:u,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(Xo,{className:"w-4 h-4"}),h.jsx("span",{children:t("save")||"Save"})]})]})]}),h.jsx("div",{className:"space-y-3",children:s.length===0?h.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[h.jsx(yy,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),h.jsx("p",{className:"text-text-muted",children:t("noProtocols")||"No protocols available. Create a new protocol to get started."})]}):s.map(E=>h.jsx("div",{className:`panel p-4 rounded-lg border-2 transition-all ${(b==null?void 0:b.id)===E.id?"border-primary bg-primary/5":"border-border hover:border-primary/30"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-semibold text-text dark:text-text mb-1",children:E.name}),h.jsx("p",{className:"text-sm text-text-muted mb-2",children:E.description}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("voltage"),":"]}),h.jsxs("span",{className:"font-semibold text-text ml-1",children:[E.settings.voltage," kVp"]})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("current"),":"]}),h.jsxs("span",{className:"font-semibold text-text ml-1",children:[E.settings.current," mA"]})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("mode"),":"]}),h.jsx("span",{className:"font-semibold text-text ml-1",children:E.settings.rotationMode})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("lastUsed"),":"]}),h.jsx("span",{className:"font-semibold text-text ml-1",children:E.lastUsed||t("never")||"Never"})]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>w(E),disabled:e,className:"px-3 py-1.5 rounded bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-xs font-semibold",children:t("apply")||"Apply"}),h.jsx("button",{onClick:()=>o(E),disabled:e||d,className:"p-1.5 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors",title:t("edit")||"Edit",children:h.jsx(hN,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>x(E),disabled:e,className:"p-1.5 rounded bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors",title:t("duplicate")||"Duplicate",children:h.jsx(r_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>y(E.id),disabled:e,className:"p-1.5 rounded bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 transition-colors",title:t("delete")||"Delete",children:h.jsx(ou,{className:"w-4 h-4"})})]})]})},E.id))})]})},$N=({disabled:e=!1})=>{const{t}=et(),[r,s]=N.useState({xrayVoltage:0,xrayCurrent:0,xrayPower:0,tubeTemperature:0,detectorTemperature:0,detectorFrameRate:0,detectorExposure:0,cabinetTemperature:0,coolingFlowRate:0,vacuumPressure:0,acquisitionProgress:0,imagesAcquired:0,dataTransferRate:0,systemLoad:0}),[p,b]=N.useState({voltage:[],current:[],temperature:[],power:[]}),[S,d]=N.useState([]);N.useEffect(()=>{const f=setInterval(()=>{const o={xrayVoltage:100+Math.random()*40,xrayCurrent:150+Math.random()*100,xrayPower:15+Math.random()*10,tubeTemperature:45+Math.random()*15,detectorTemperature:-20+Math.random()*2,detectorFrameRate:8+Math.random()*4,detectorExposure:80+Math.random()*40,cabinetTemperature:22+Math.random()*3,coolingFlowRate:18+Math.random()*4,vacuumPressure:1e-6+Math.random()*1e-6,acquisitionProgress:Math.min(100,r.acquisitionProgress+Math.random()*5),imagesAcquired:Math.floor(r.imagesAcquired+Math.random()*3),dataTransferRate:50+Math.random()*50,systemLoad:40+Math.random()*30};s(o),b(u=>({voltage:[...u.voltage.slice(-19),o.xrayVoltage],current:[...u.current.slice(-19),o.xrayCurrent],temperature:[...u.temperature.slice(-19),o.tubeTemperature],power:[...u.power.slice(-19),o.xrayPower]}));const c=[];o.tubeTemperature>55&&c.push({id:Date.now(),severity:"warning",message:t("tubeTempHigh")||"Tube temperature is high",value:`${o.tubeTemperature.toFixed(1)}C`}),o.xrayPower>23&&c.push({id:Date.now()+1,severity:"warning",message:t("powerHigh")||"X-ray power is high",value:`${o.xrayPower.toFixed(1)} kW`}),o.coolingFlowRate<19&&c.push({id:Date.now()+2,severity:"warning",message:t("coolingFlowLow")||"Cooling flow rate is low",value:`${o.coolingFlowRate.toFixed(1)} L/min`}),d(c)},1e3);return()=>clearInterval(f)},[r.acquisitionProgress,r.imagesAcquired,t]);const a=({icon:f,label:o,value:c,unit:u,color:g,trend:y})=>h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(f,{className:`w-5 h-5 text-${g}-600`}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:o})]}),y&&h.jsxs("div",{className:`flex items-center gap-1 text-xs ${y>0?"text-green-600":"text-red-600"}`,children:[y>0?h.jsx(qs,{className:"w-3 h-3"}):h.jsx(M1,{className:"w-3 h-3"}),h.jsxs("span",{children:[Math.abs(y).toFixed(1),"%"]})]})]}),h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("span",{className:`text-2xl font-bold text-${g}-600`,children:typeof c=="number"?c.toFixed(1):c}),h.jsx("span",{className:"text-sm text-text-muted",children:u})]})]}),l=({data:f,color:o})=>{const c=Math.max(...f,1),u=Math.min(...f,0),g=c-u||1;return h.jsx("div",{className:"flex items-end gap-0.5 h-12",children:f.map((y,x)=>h.jsx("div",{className:`flex-1 bg-${o}-500 rounded-t transition-all`,style:{height:`${(y-u)/g*100}%`,opacity:.3+x/f.length*.7}},x))})};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-primary animate-pulse"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("realtimeMonitoring")||"Real-time Monitoring Dashboard"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[h.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),h.jsx("span",{className:"font-semibold",children:t("active")||"Active"})]})]}),S.length>0&&h.jsx("div",{className:"space-y-2",children:S.map(f=>h.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${f.severity==="warning"?"bg-yellow-500/10 border-2 border-yellow-500/30":"bg-red-500/10 border-2 border-red-500/30"}`,children:[h.jsx(Ic,{className:`w-5 h-5 ${f.severity==="warning"?"text-yellow-600":"text-red-600"}`}),h.jsx("div",{className:"flex-1",children:h.jsx("span",{className:"text-sm font-medium text-text",children:f.message})}),h.jsx("span",{className:"text-sm font-bold text-text",children:f.value})]},f.id))}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsx(a,{icon:Un,label:t("voltage")||"Voltage",value:r.xrayVoltage,unit:"kVp",color:"blue",trend:p.voltage.length>1?(p.voltage[p.voltage.length-1]-p.voltage[p.voltage.length-2])/p.voltage[p.voltage.length-2]*100:0}),h.jsx(a,{icon:Un,label:t("current")||"Current",value:r.xrayCurrent,unit:"mA",color:"purple",trend:p.current.length>1?(p.current[p.current.length-1]-p.current[p.current.length-2])/p.current[p.current.length-2]*100:0}),h.jsx(a,{icon:No,label:t("power")||"Power",value:r.xrayPower,unit:"kW",color:"green",trend:p.power.length>1?(p.power[p.power.length-1]-p.power[p.power.length-2])/p.power[p.power.length-2]*100:0}),h.jsx(a,{icon:N1,label:t("tubeTemp")||"Tube Temp",value:r.tubeTemperature,unit:"C",color:"red",trend:p.temperature.length>1?(p.temperature[p.temperature.length-1]-p.temperature[p.temperature.length-2])/p.temperature[p.temperature.length-2]*100:0})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[t("voltage")||"Voltage"," (",t("last20s")||"Last 20s",")"]}),h.jsx(l,{data:p.voltage,color:"blue"})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[t("current")||"Current"," (",t("last20s")||"Last 20s",")"]}),h.jsx(l,{data:p.current,color:"purple"})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[t("power")||"Power"," (",t("last20s")||"Last 20s",")"]}),h.jsx(l,{data:p.power,color:"green"})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[t("temperature")||"Temperature"," (",t("last20s")||"Last 20s",")"]}),h.jsx(l,{data:p.temperature,color:"red"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("detectorTemp")||"Detector Temp"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorTemperature.toFixed(1),"C"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("frameRate")||"Frame Rate"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorFrameRate.toFixed(1)," fps"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("exposure")||"Exposure"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorExposure.toFixed(0)," ms"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("coolingFlow")||"Cooling Flow"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.coolingFlowRate.toFixed(1)," L/min"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("dataRate")||"Data Rate"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.dataTransferRate.toFixed(0)," MB/s"]})]}),h.jsxs("div",{className:"panel p-3 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:t("systemLoad")||"System Load"}),h.jsxs("div",{className:"text-lg font-bold text-text",children:[r.systemLoad.toFixed(0),"%"]})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:t("acquisitionProgress")||"Acquisition Progress"}),h.jsxs("span",{className:"text-sm font-mono font-bold text-primary",children:[r.acquisitionProgress.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${r.acquisitionProgress}%`}})}),h.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[h.jsxs("span",{children:[t("imagesAcquired")||"Images Acquired",": ",r.imagesAcquired]}),h.jsxs("span",{children:[t("estimatedTimeRemaining")||"Est. Time",": ",Math.max(0,Math.floor((100-r.acquisitionProgress)*2)),"s"]})]})]})]})},HN=()=>{const{t:e}=et(),{isConnected:t}=Js(),r=N.useMemo(()=>({power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1}),[]),{pageData:s,handleChange:p,updateFormData:b}=lu("initialParameters",r),[S,d]=N.useState(null),a=[{value:"mA",label:"mA"},{value:"A",label:"A"}],l=[{value:"Al",label:e("aluminum")},{value:"Cu",label:e("copper")},{value:"Ag",label:e("silver")}],f=[{value:"8-bit",label:e("8bit")},{value:"16-bit",label:e("16bit")}],o=N.useCallback(()=>{const x=!s.tubeStatus;b({...s,tubeStatus:x,tubeVoltageDisplay:x?"100":"0",tubeCurrentDisplay:x?"10":"0"})},[s,b]),c=N.useCallback(()=>{b({...s,cabinCameraStatus:!s.cabinCameraStatus})},[s,b]),u=N.useCallback(()=>{b({...s,fastImaging:!s.fastImaging})},[s,b]),g=N.useCallback(()=>{b({...s,dualEnergy:!s.dualEnergy})},[s,b]),y={standard:()=>{d("standard"),b({...s,power:"50",tubeVoltage:"120",anodeCurrent:"10"})},highPower:()=>{d("highPower"),b({...s,power:"100",tubeVoltage:"150",anodeCurrent:"20"})},clear:()=>{d("clear"),b({...r})}};return h.jsxs(qo,{children:[h.jsx(Go,{icon:Un}),h.jsx(RN,{onStatusChange:x=>{console.log("System Status:",x)}}),h.jsx("div",{className:"card p-4 mb-4",children:h.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries({standard:e("presetStandard"),highPower:e("presetHighPower"),clear:e("clearAll")}).map(([x,w])=>h.jsx("button",{onClick:y[x],className:`h-10 px-4 variant-primary rounded-lg border border-border transition-all duration-200 text-sm font-medium flex-shrink-0 ${S===x?"button-active":""}`,children:w},x))})}),h.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[h.jsx(bt,{label:e("power"),icon:No,value:s.power,unit:"W",children:h.jsx(gt,{type:"number",name:"power",value:s.power,onChange:p,placeholder:e("enterPower"),min:"0",step:"1"})}),h.jsx(bt,{label:e("tubeVoltage"),icon:Un,value:s.tubeVoltage,unit:"kVp",children:h.jsx(gt,{type:"number",name:"tubeVoltage",value:s.tubeVoltage,onChange:p,placeholder:e("enterTubeVoltage"),min:"0",step:"0.1"})}),h.jsx(bt,{label:e("anodeCurrent"),icon:LT,value:s.anodeCurrent,unit:s.anodeCurrentUnit,children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx(gt,{type:"number",name:"anodeCurrent",value:s.anodeCurrent,onChange:p,placeholder:e("enterAnodeCurrent"),min:"0",step:"0.1",className:"flex-1"}),h.jsx(or,{name:"anodeCurrentUnit",value:s.anodeCurrentUnit,onChange:p,options:a,className:"w-20"})]})}),h.jsx(bt,{label:e("filtration"),icon:wn,children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx(or,{name:"filtrationMaterial",value:s.filtrationMaterial,onChange:p,options:l,className:"flex-1"}),h.jsx(gt,{type:"number",name:"filtrationThickness",value:s.filtrationThickness,onChange:p,placeholder:e("enterThickness"),min:"0",step:"0.01",className:"w-28"})]})}),h.jsx(bt,{label:e("exposureTime"),icon:n_,children:h.jsx(gt,{type:"text",value:s.exposureTime,disabled:!0,className:"bg-background-secondary dark:bg-accent cursor-not-allowed"})}),h.jsx(bt,{label:e("bitDepth"),icon:T1,children:h.jsx(or,{name:"bitDepth",value:s.bitDepth,onChange:p,options:f})}),h.jsx(bt,{label:e("singleCalibration"),icon:Pt,value:s.singleCalibration,children:h.jsx(gt,{type:"number",name:"singleCalibration",value:s.singleCalibration,onChange:p,placeholder:e("enterSingleCalibration"),min:"0",step:"0.1"})}),h.jsx(bt,{label:e("rotateCalibration"),icon:Pt,value:s.rotateCalibration,children:h.jsx(gt,{type:"number",name:"rotateCalibration",value:s.rotateCalibration,onChange:p,placeholder:e("enterRotateCalibration"),min:"0",step:"0.1"})}),h.jsx("div",{className:"card p-6 lg:col-span-2",children:h.jsxs(bt,{label:e("tubeStatus"),icon:wy,showValue:!1,children:[h.jsx(Hr,{active:s.tubeStatus,onClick:o,icon:wy,disabled:!t}),h.jsx("div",{className:"flex gap-2 sm:gap-4 mt-3 sm:mt-4",children:[{label:e("voltage"),value:s.tubeVoltageDisplay,unit:"kVp"},{label:e("current"),value:s.tubeCurrentDisplay,unit:"mA"}].map(({label:x,value:w,unit:C})=>h.jsxs("div",{className:"text-center flex-1",children:[h.jsx("div",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted mb-1 font-vazir",children:x}),h.jsxs("div",{className:"panel px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-border",children:[h.jsx("span",{className:"text-base sm:text-lg font-mono font-bold text-text dark:text-text",children:w}),h.jsx("span",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted ml-1 font-vazir",children:C})]})]},x))})]})}),h.jsxs(bt,{label:e("fastImaging"),icon:To,showValue:!1,children:[h.jsx(Hr,{active:s.fastImaging,onClick:u,icon:To,disabled:!t}),h.jsxs("div",{className:"mt-4",children:[h.jsx("label",{className:"font-medium text-text dark:text-text font-vazir mb-2 block",children:e("rotationSpeed")}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gt,{type:"number",name:"rotationSpeed",value:s.rotationSpeed,onChange:p,placeholder:e("enterRotationSpeed"),min:"0",step:"0.1"}),h.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted font-vazir",children:"rpm"})]})]})]}),h.jsx(bt,{label:e("dualEnergy"),icon:Un,showValue:!1,children:h.jsx(Hr,{active:s.dualEnergy,onClick:g,icon:Un,disabled:!t})})]}),h.jsxs("div",{className:"card p-4 lg:p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_y,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("cabinCameraStatus")}),h.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.cabinCameraStatus?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:s.cabinCameraStatus?e("active"):e("inactive")})]}),h.jsx("button",{onClick:c,disabled:!t,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${s.cabinCameraStatus?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,children:s.cabinCameraStatus?h.jsxs(h.Fragment,{children:[h.jsx(Ty,{className:"w-4 h-4"}),h.jsx("span",{children:e("turnOff")||"Turn Off"})]}):h.jsxs(h.Fragment,{children:[h.jsx(_y,{className:"w-4 h-4"}),h.jsx("span",{children:e("turnOn")||"Turn On"})]})})]}),s.cabinCameraStatus?h.jsx("div",{className:"rounded-lg overflow-hidden border-2 border-border",children:h.jsx(O1,{})}):h.jsxs("div",{className:"aspect-video bg-black rounded-lg flex flex-col items-center justify-center text-text-muted border-2 border-border",children:[h.jsx(Ty,{className:"w-16 h-16 mb-3 opacity-30"}),h.jsx("p",{className:"text-sm",children:e("cameraOff")||"Camera is turned off"})]})]}),h.jsx($N,{disabled:!t}),h.jsx(VN,{disabled:!t}),h.jsx(zN,{onTrajectoryChange:x=>{console.log("Trajectory:",x)}}),h.jsx(IN,{onGeometryChange:x=>{console.log("Geometry:",x)}}),h.jsx(PN,{tubeParams:{voltage:s.tubeVoltageDisplay,current:s.tubeCurrentDisplay,power:s.power,exposureTime:s.exposureTime,temperature:25.5+Math.random()*5}})]})},UN=({onPositionChange:e,disabled:t=!1})=>{const{t:r}=et(),[s,p]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),[b,S]=N.useState([]),[d,a]=N.useState(1),l=N.useCallback((x,w)=>{const C={...s,[x]:parseFloat(w)||0};p(C),e&&e(C)},[s,e]),f=N.useCallback((x,w)=>{const C=w*d,j=s[x]+C;l(x,j)},[s,d,l]),o=N.useCallback(()=>{const x={x:0,y:0,z:0,theta:0,gamma:0};p(x),e&&e(x)},[e]),c=N.useCallback(()=>{const x=`Position ${b.length+1}`;S([...b,{name:x,...s}])},[s,b]),u=N.useCallback(x=>{const{name:w,...C}=x;p(C),e&&e(C)},[e]),g=N.useCallback(x=>{S(b.filter((w,C)=>C!==x))},[b]),y=({icon:x,onClick:w,label:C})=>h.jsx("button",{onClick:w,disabled:t,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 disabled:bg-gray-200 disabled:cursor-not-allowed transition-colors flex items-center justify-center",title:C,children:h.jsx(x,{className:"w-5 h-5 text-primary"})});return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cm,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("manipulator")})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:o,disabled:t,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(by,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("home")||"Home"})]}),h.jsxs("button",{onClick:c,disabled:t,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[h.jsx(Xo,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("save")})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text whitespace-nowrap",children:[r("stepSize")||"Step Size",":"]}),h.jsx("div",{className:"flex gap-2",children:[.1,1,5,10].map(x=>h.jsx("button",{onClick:()=>a(x),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${d===x?"bg-primary text-white":"bg-background-secondary hover:bg-accent text-text"}`,children:x},x))})]}),h.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx($_,{className:"w-4 h-4"}),r("linearMovement")||"Linear Movement"]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("div",{className:"text-xs text-text-muted mb-2 ",children:["X-Y ",r("control")||"Control"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-[200px] mx-auto",children:[h.jsx("div",{}),h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-text-muted",children:"Y"}),h.jsx(y,{icon:xf,onClick:()=>f("y",1),label:"Y+"})]}),h.jsx("div",{}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs font-medium text-text-muted",children:"X"}),h.jsx(y,{icon:S1,onClick:()=>f("x",-1),label:"X-"})]}),h.jsxs("div",{className:"flex flex-col items-center justify-center",children:[h.jsx("button",{onClick:o,disabled:t,className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:h.jsx(by,{className:"w-5 h-5 text-gray-600"})}),h.jsxs("div",{className:"text-xs font-mono font-bold text-text-muted mt-1",children:[s.x.toFixed(1),", ",s.y.toFixed(1)]})]}),h.jsx(y,{icon:C1,onClick:()=>f("x",1),label:"X+"}),h.jsx("div",{}),h.jsx(y,{icon:Pc,onClick:()=>f("y",-1),label:"Y-"}),h.jsx("div",{})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsxs("div",{className:"text-xs text-text-muted mb-2",children:["Z ",r("control")||"Control"]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(y,{icon:Pc,onClick:()=>f("z",-1),label:"Z-"}),h.jsx("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:s.z.toFixed(1)}),h.jsx(y,{icon:xf,onClick:()=>f("z",1),label:"Z+"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx(mo,{className:"w-4 h-4"}),r("rotationalMovement")||"Rotational Movement"]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-2",children:" (Theta)"}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(y,{icon:ai,onClick:()=>f("theta",-1),label:"-"}),h.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[s.theta.toFixed(1),""]}),h.jsx(y,{icon:mo,onClick:()=>f("theta",1),label:"+"})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg",children:[h.jsx("div",{className:"text-xs text-text-muted mb-2",children:" (Gamma)"}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(y,{icon:ai,onClick:()=>f("gamma",-1),label:"-"}),h.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[s.gamma.toFixed(1),""]}),h.jsx(y,{icon:mo,onClick:()=>f("gamma",1),label:"+"})]})]})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("manualInput")||"Manual Input"}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(s).map(([x,w])=>h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-medium text-text-muted mb-1 block uppercase",children:x==="theta"?"":x==="gamma"?"":x.toUpperCase()}),h.jsx(gt,{type:"number",value:w,onChange:C=>l(x,C.target.value),step:"0.1",disabled:t})]},x))})]}),b.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("savedPositions")||"Saved Positions"}),h.jsx("div",{className:"grid gap-2",children:b.map((x,w)=>h.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[h.jsxs("button",{onClick:()=>u(x),disabled:t,className:"flex-1 text-left text-sm text-text hover:text-primary transition-colors disabled:cursor-not-allowed",children:[h.jsxs("span",{className:"font-medium",children:[x.name,":"]}),h.jsxs("span",{className:"text-text-muted ml-2 font-mono text-xs",children:["X:",x.x.toFixed(1)," Y:",x.y.toFixed(1)," Z:",x.z.toFixed(1)," :",x.theta.toFixed(1)," :",x.gamma.toFixed(1),""]})]}),h.jsx("button",{onClick:()=>g(w),className:"ml-2 p-1 rounded hover:bg-red-100 text-red-600 transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))})]})]})},XN=({speed:e,onSpeedChange:t,disabled:r=!1})=>{var b;const{t:s}=et(),p=[{value:"low",label:s("joystickSpeedLow")||"Low",icon:No,color:"bg-green-500",description:s("lowSpeedDesc")||"Precise movements, best for fine-tuning",multiplier:"1x"},{value:"medium",label:s("joystickSpeedMedium")||"Medium",icon:Un,color:"bg-yellow-500",description:s("mediumSpeedDesc")||"Balanced speed for general positioning",multiplier:"5x"},{value:"high",label:s("joystickSpeedHigh")||"High",icon:qs,color:"bg-red-500",description:s("highSpeedDesc")||"Fast movements for large adjustments",multiplier:"10x"}];return h.jsxs("div",{className:"card p-4 lg:p-6",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(No,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:s("joystickSpeed")})]}),h.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:p.map(S=>{const d=S.icon,a=(e==null?void 0:e.toLowerCase())===S.value;return h.jsx("button",{onClick:()=>t(S.value),disabled:r,className:`
                p-4 rounded-lg border-2 transition-all text-left
                ${a?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-background-secondary/50"}
                ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              `,children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${S.color} bg-opacity-20`,children:h.jsx(d,{className:`w-5 h-5 ${S.color.replace("bg-","text-")}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between mb-1",children:[h.jsx("span",{className:"font-semibold text-text dark:text-text",children:S.label}),h.jsx("span",{className:"text-xs font-mono font-bold text-primary",children:S.multiplier})]}),h.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted",children:S.description}),a&&h.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${S.color} animate-pulse`}),h.jsx("span",{className:"text-xs font-medium text-primary",children:s("active")||"Active"})]})]})]})},S.value)})}),h.jsx("div",{className:"mt-4 p-3 panel rounded-lg",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-text-muted dark:text-text-muted",children:[s("currentSpeed")||"Current Speed",":"]}),h.jsx("span",{className:"text-sm font-semibold text-text dark:text-text",children:((b=p.find(S=>S.value===(e==null?void 0:e.toLowerCase())))==null?void 0:b.label)||"N/A"})]})})]})},YN=()=>{const{t:e}=et(),t=N.useMemo(()=>({manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null}),[]),{pageData:r,updateFormData:s}=lu("positionAndOptimization",t);e("joystickSpeedLow"),e("joystickSpeedMedium"),e("joystickSpeedHigh"),N.useMemo(()=>[{name:"manipulatorX",label:e("manipulatorX"),placeholder:e("enterManipulatorX")},{name:"manipulatorY",label:e("manipulatorY"),placeholder:e("enterManipulatorY")},{name:"manipulatorZ",label:e("manipulatorZ"),placeholder:e("enterManipulatorZ")},{name:"manipulatorTheta",label:e("manipulatorTheta"),placeholder:e("enterManipulatorTheta")},{name:"manipulatorGamma",label:e("manipulatorGamma"),placeholder:e("enterManipulatorGamma")}],[e]);const p=N.useCallback(b=>{const S=b.target.files[0];s({...r,uploadedFile:S?S.name:null})},[r,s]);return h.jsxs(qo,{children:[h.jsx(Go,{icon:cm}),h.jsx(UN,{onPositionChange:b=>{console.log("Manipulator Position:",b),s({...r,manipulatorX:b.x,manipulatorY:b.y,manipulatorZ:b.z,manipulatorTheta:b.theta,manipulatorGamma:b.gamma})}}),h.jsx(XN,{speed:r.joystickSpeed,onSpeedChange:b=>{s({...r,joystickSpeed:b})}}),h.jsx("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:h.jsxs(bt,{label:e("uploadFile"),icon:Yo,children:[h.jsx("input",{type:"file",name:"uploadedFile",onChange:p,className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:shadow-sm focus:shadow-primary/50 transition-colors font-vazir text-xs sm:text-sm"}),r.uploadedFile&&h.jsx("div",{className:"mt-2",children:h.jsxs("span",{className:"text-xs sm:text-sm text-primary dark:text-primary font-medium font-vazir",children:[e("selectedFile"),": ",r.uploadedFile]})})]})})]})},go=({children:e,onClick:t,variant:r="primary",size:s="md",disabled:p=!1,loading:b=!1,icon:S,className:d="",...a})=>{const{i18n:l}=et(),f=l.language==="fa",o="font-vazir rounded-xl font-medium shadow-sm hover:shadow-md",c="transition-all duration-300 ease-out",u={sm:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm",md:"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base",lg:"px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg"},g={primary:"bg-primary hover:bg-primary-dark text-white",secondary:"bg-background-secondary hover:bg-accent text-text-muted",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white"},y=`
    ${o}
    ${c}
    ${u[s]}
    ${g[r]}
    ${p?"opacity-50 cursor-not-allowed":""}
    ${d}
  `;return h.jsx("button",{onClick:t,disabled:p||b,className:y,...a,children:h.jsxs("div",{className:`flex items-center gap-1 sm:gap-2 ${f?"flex-row-reverse":""}`,children:[b?h.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):S&&h.jsx(S,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e]})})},GN=({onAcquisitionStart:e,disabled:t=!1})=>{const{t:r}=et(),[s,p]=N.useState({rotationMode:"360",multiSegmentEnabled:!1,numberOfSegments:3,segmentOverlap:10,totalHeight:300,numberOfProjections:360,exposurePerProjection:100}),[b,S]=N.useState({isRunning:!1,currentSegment:0,currentProjection:0,progress:0}),d=(c,u)=>{p({...s,[c]:c==="multiSegmentEnabled"?u:parseFloat(u)||u})},a=()=>{S({isRunning:!0,currentSegment:0,currentProjection:0,progress:0}),e&&e(s);const c=s.multiSegmentEnabled?s.numberOfSegments*s.numberOfProjections:s.numberOfProjections;let u=0;const g=setInterval(()=>{u++;const y=u/c*100,x=u%s.numberOfProjections,w=Math.floor(u/s.numberOfProjections);S({isRunning:u<c,currentSegment:w,currentProjection:x,progress:Math.min(y,100)}),u>=c&&clearInterval(g)},50)},l=()=>{S({...b,isRunning:!1})},f=()=>{S({isRunning:!1,currentSegment:0,currentProjection:0,progress:0})},o=()=>{const g=(s.multiSegmentEnabled?s.numberOfSegments*s.numberOfProjections:s.numberOfProjections)*s.exposurePerProjection/1e3;return g<60?`${g.toFixed(1)}s`:`${(g/60).toFixed(1)}min`};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fc,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("acquisitionSettings")||"Acquisition Settings"})]}),h.jsxs("div",{className:"flex gap-2",children:[b.isRunning?h.jsxs("button",{onClick:l,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(um,{className:"w-4 h-4"}),h.jsx("span",{children:r("stop")||"Stop"})]}):h.jsxs("button",{onClick:a,disabled:t,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(dm,{className:"w-4 h-4"}),h.jsx("span",{children:r("start")||"Start"})]}),h.jsxs("button",{onClick:f,disabled:t||b.isRunning,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[h.jsx(ai,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:r("reset")||"Reset"})]})]})]}),b.progress>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("span",{className:"text-text-muted",children:b.isRunning?r("acquiring")||"Acquiring...":r("completed")||"Completed"}),h.jsxs("span",{className:"font-mono font-bold text-primary",children:[b.progress.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${b.progress}%`}})}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-text-muted",children:[h.jsxs("div",{children:["Segment: ",b.currentSegment+1," / ",s.multiSegmentEnabled?s.numberOfSegments:1]}),h.jsxs("div",{children:["Projection: ",b.currentProjection," / ",s.numberOfProjections]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("rotationMode")||"Rotation Mode"}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:["180","360"].map(c=>h.jsxs("button",{onClick:()=>d("rotationMode",c),disabled:t||b.isRunning,className:`p-4 rounded-lg border-2 transition-all ${s.rotationMode===c?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${t||b.isRunning?"opacity-50 cursor-not-allowed":""}`,children:[h.jsxs("div",{className:"text-2xl font-bold text-primary mb-1",children:[c,""]}),h.jsx("div",{className:"text-xs text-text-muted",children:c==="180"?r("halfRotation")||"Half rotation":r("fullRotation")||"Full rotation"})]},c))})]}),h.jsxs("div",{className:"panel p-4 rounded-lg space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx(T1,{className:"w-4 h-4"}),r("multiSegmentImaging")||"Multi-Segment Imaging"]}),h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:s.multiSegmentEnabled,onChange:c=>d("multiSegmentEnabled",c.target.checked),disabled:t||b.isRunning,className:"sr-only peer"}),h.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),s.multiSegmentEnabled&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4 border-t border-border",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSegments")||"Number of Segments"}),h.jsx("input",{type:"number",value:s.numberOfSegments,onChange:c=>d("numberOfSegments",c.target.value),disabled:t||b.isRunning,min:"2",max:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("segmentOverlap")||"Overlap"," (%)"]}),h.jsx("input",{type:"number",value:s.segmentOverlap,onChange:c=>d("segmentOverlap",c.target.value),disabled:t||b.isRunning,min:"0",max:"50",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("totalHeight")||"Total Height"," (mm)"]}),h.jsx("input",{type:"number",value:s.totalHeight,onChange:c=>d("totalHeight",c.target.value),disabled:t||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfProjections")||"Number of Projections"}),h.jsx("input",{type:"number",value:s.numberOfProjections,onChange:c=>d("numberOfProjections",c.target.value),disabled:t||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("exposurePerProjection")||"Exposure per Projection"," (ms)"]}),h.jsx("input",{type:"number",value:s.exposurePerProjection,onChange:c=>d("exposurePerProjection",c.target.value),disabled:t||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("acquisitionSummary")||"Acquisition Summary"}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:r("mode")||"Mode"}),h.jsxs("div",{className:"font-semibold text-text",children:[s.rotationMode,""]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:r("segments")||"Segments"}),h.jsx("div",{className:"font-semibold text-text",children:s.multiSegmentEnabled?s.numberOfSegments:1})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:r("totalProjections")||"Total Proj."}),h.jsx("div",{className:"font-semibold text-text",children:s.multiSegmentEnabled?s.numberOfSegments*s.numberOfProjections:s.numberOfProjections})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:r("estimatedTime")||"Est. Time"}),h.jsx("div",{className:"font-semibold text-primary",children:o()})]})]})]})]})},qN=({targetPosition:e=null,disabled:t=!1})=>{const{t:r}=et(),[s,p]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),[b,S]=N.useState({x:0,y:0,z:0,theta:0,gamma:0});N.useEffect(()=>{if(!e)return;const f=setInterval(()=>{p(o=>{const c={...o};return Object.keys(e).forEach(u=>{const g=e[u],y=o[u],x=g-y;Math.abs(x)<.01?c[u]=g:c[u]=y+x*.1}),c})},50);return()=>clearInterval(f)},[e]),N.useEffect(()=>{if(!e){S({x:0,y:0,z:0,theta:0,gamma:0});return}const f={};Object.keys(e).forEach(o=>{f[o]=e[o]-s[o]}),S(f)},[s,e]);const d=()=>e?Object.keys(e).every(f=>Math.abs(b[f])<.1):!1,a=f=>{const o=Math.abs(f);return o<.1?"text-green-600 dark:text-green-400":o<1?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"},l=[{key:"x",label:"X",unit:"mm"},{key:"y",label:"Y",unit:"mm"},{key:"z",label:"Z",unit:"mm"},{key:"theta",label:"",unit:""},{key:"gamma",label:"",unit:""}];return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zc,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("positionFeedback")||"Position Feedback"})]}),h.jsx("div",{className:"flex items-center gap-2",children:d()?h.jsxs(h.Fragment,{children:[h.jsx(Uo,{className:"w-5 h-5 text-green-600"}),h.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"At Target"})]}):h.jsxs(h.Fragment,{children:[h.jsx(Lc,{className:"w-5 h-5 text-yellow-600"}),h.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Moving"})]})})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(({key:f,label:o,unit:c})=>h.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-semibold text-text-muted",children:o}),h.jsx("span",{className:"text-xs text-text-muted",children:c})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("currentPosition")||"Current"}),h.jsx("div",{className:"text-2xl font-bold font-mono text-primary",children:s[f].toFixed(2)})]}),e&&h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("targetPosition")||"Target"}),h.jsx("div",{className:"text-lg font-semibold font-mono text-text",children:e[f].toFixed(2)})]}),e&&h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("positionError")||"Error"}),h.jsxs("div",{className:`text-lg font-bold font-mono ${a(b[f])}`,children:[b[f]>=0?"+":"",b[f].toFixed(2)]})]}),e&&Math.abs(b[f])>.1&&h.jsx("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,(1-Math.abs(b[f])/Math.abs(e[f]))*100))}%`}})})]},f))}),h.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("realTimePosition")||"Real-time Position Display"}),h.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:l.map(({key:f,label:o,unit:c})=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"text-text-muted",children:[o,":"]}),h.jsxs("span",{className:"font-mono font-bold text-text",children:[s[f].toFixed(2)," ",c]})]},f))})]})]})},WN=({disabled:e=!1})=>{const{t}=et(),[r,s]=N.useState({enabled:!1,scanHeight:500,verticalStepSize:10,stitchingOverlap:5,detectorHeight:50}),[p,b]=N.useState({isScanning:!1,currentStep:0,totalSteps:0,progress:0}),S=(c,u)=>{s({...r,[c]:c==="enabled"?u:parseFloat(u)})},d=N.useMemo(()=>{const c=r.detectorHeight*(1-r.stitchingOverlap/100);return Math.ceil(r.scanHeight/c)},[r.scanHeight,r.detectorHeight,r.stitchingOverlap]),a=N.useMemo(()=>{const g=d*2;return g<60?`${g}s`:`${(g/60).toFixed(1)}min`},[d]),l=()=>{const c=d;b({isScanning:!0,currentStep:0,totalSteps:c,progress:0});let u=0;const g=setInterval(()=>{u++;const y=u/c*100;b({isScanning:u<c,currentStep:u,totalSteps:c,progress:Math.min(y,100)}),u>=c&&clearInterval(g)},100)},f=()=>{b({...p,isScanning:!1})},o=()=>{b({isScanning:!1,currentStep:0,totalSteps:0,progress:0})};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bf,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("linearDetectorImaging")||"Linear Detector Imaging"})]}),h.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r.enabled,onChange:c=>S("enabled",c.target.checked),disabled:e||p.isScanning,className:"sr-only peer"}),h.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),r.enabled&&h.jsxs(h.Fragment,{children:[p.progress>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("span",{className:"text-text-muted",children:p.isScanning?t("acquiring")||"Scanning...":t("completed")||"Completed"}),h.jsxs("span",{className:"font-mono font-bold text-primary",children:[p.progress.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${p.progress}%`}})}),h.jsxs("div",{className:"text-xs text-text-muted text-center",children:["Step: ",p.currentStep," / ",p.totalSteps]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("scanHeight")||"Scan Height"," (mm)"]}),h.jsx("input",{type:"number",value:r.scanHeight,onChange:c=>S("scanHeight",c.target.value),disabled:e||p.isScanning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("verticalStepSize")||"Vertical Step Size"," (mm)"]}),h.jsx("input",{type:"number",value:r.verticalStepSize,onChange:c=>S("verticalStepSize",c.target.value),disabled:e||p.isScanning,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("stitchingOverlap")||"Stitching Overlap"," (%)"]}),h.jsx("input",{type:"number",value:r.stitchingOverlap,onChange:c=>S("stitchingOverlap",c.target.value),disabled:e||p.isScanning,min:"0",max:"50",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("detectorHeight")||"Detector Height"," (mm)"]}),h.jsx("input",{type:"number",value:r.detectorHeight,onChange:c=>S("detectorHeight",c.target.value),disabled:e||p.isScanning,min:"10",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:t("acquisitionSummary")||"Scan Summary"}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("numberOfSteps")||"Steps"}),h.jsx("div",{className:"font-semibold text-text",children:d})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("stitchingOverlap")||"Overlap"}),h.jsxs("div",{className:"font-semibold text-text",children:[r.stitchingOverlap,"%"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("estimatedScanTime")||"Est. Time"}),h.jsx("div",{className:"font-semibold text-primary",children:a})]})]})]}),h.jsxs("div",{className:"flex gap-2 justify-center",children:[p.isScanning?h.jsxs("button",{onClick:f,className:"px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2",children:[h.jsx(um,{className:"w-4 h-4"}),h.jsx("span",{children:t("stop")||"Stop"})]}):h.jsxs("button",{onClick:l,disabled:e,className:"px-6 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[h.jsx(dm,{className:"w-4 h-4"}),h.jsx("span",{children:t("start")||"Start Scan"})]}),h.jsxs("button",{onClick:o,disabled:e||p.isScanning,className:"px-6 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[h.jsx(ai,{className:"w-4 h-4"}),h.jsx("span",{children:t("reset")||"Reset"})]})]})]}),!r.enabled&&h.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[h.jsx(bf,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),h.jsx("p",{className:"text-text-muted",children:t("linearDetectorMode")||"Enable Linear Detector Mode to configure settings"})]})]})},KN=({disabled:e=!1})=>{const{t}=et(),[r,s]=N.useState("single"),[p,b]=N.useState({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0}),[S,d]=N.useState({numberOfAngles:36,angleStep:10}),a=()=>{b({...p,status:"calibrating"}),setTimeout(()=>{const g=85+Math.random()*15;b({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(g),singleImageCaptured:!0,rotationalProgress:0,rotationalAngles:0})},2e3)},l=()=>{b({...p,status:"calibrating",rotationalProgress:0});let g=0;const y=S.numberOfAngles,x=setInterval(()=>{g++;const w=g/y*100;if(g>=y){clearInterval(x);const C=90+Math.random()*10;b({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(C),singleImageCaptured:!1,rotationalProgress:100,rotationalAngles:y})}else b(C=>({...C,status:"calibrating",rotationalProgress:w,rotationalAngles:g}))},100)},f=()=>{b({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0})},c=(()=>{switch(p.status){case"notCalibrated":return{icon:h.jsx(k1,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:t("notCalibrated")||"Not Calibrated"};case"calibrating":return{icon:h.jsx(Lc,{className:"w-6 h-6 animate-pulse"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:t("calibrating")||"Calibrating..."};case"calibrated":return{icon:h.jsx(Uo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:t("calibrated")||"Calibrated"};default:return{}}})(),u=g=>g>=95?"text-green-600 dark:text-green-400":g>=85?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(xN,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("calibrationSystem")||"Calibration System"})]})}),h.jsxs("div",{className:`panel p-4 rounded-lg border-2 ${c.border} ${c.bg}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:t("calibrationStatus")||"Calibration Status"}),h.jsxs("div",{className:`flex items-center gap-2 ${c.color}`,children:[c.icon,h.jsx("span",{className:"font-semibold",children:c.text})]})]}),p.status==="calibrated"&&h.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-3 pt-3 border-t border-border",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("calibrationDate")||"Date"}),h.jsx("div",{className:"font-semibold text-text",children:p.date})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("calibrationQuality")||"Quality"}),h.jsxs("div",{className:`font-semibold text-lg ${u(p.quality)}`,children:[p.quality,"%"]})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:t("calibrationType")||"Calibration Type"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsxs("button",{onClick:()=>s("single"),disabled:e||p.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="single"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${e||p.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(To,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"font-semibold text-text",children:t("singleImageCalibration")||"Single Image"})]}),h.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using a single phantom image"})]}),h.jsxs("button",{onClick:()=>s("rotational"),disabled:e||p.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="rotational"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${e||p.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(mo,{className:"w-5 h-5 text-primary"}),h.jsx("span",{className:"font-semibold text-text",children:t("rotationalCalibration")||"Rotational"})]}),h.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using multiple angles for higher accuracy"})]})]})]}),r==="single"&&h.jsx("div",{className:"space-y-4",children:h.jsxs("button",{onClick:a,disabled:e||p.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[h.jsx(To,{className:"w-5 h-5"}),h.jsx("span",{children:t("captureCalibrationImage")||"Capture Calibration Image"})]})}),r==="rotational"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("numberOfSteps")||"Number of Angles"}),h.jsx("input",{type:"number",value:S.numberOfAngles,onChange:g=>d({...S,numberOfAngles:parseInt(g.target.value),angleStep:360/parseInt(g.target.value)}),disabled:e||p.status==="calibrating",min:"12",max:"72",step:"6",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("anglePerStep")||"Angle Step"," ()"]}),h.jsx("input",{type:"number",value:S.angleStep.toFixed(1),disabled:!0,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-gray-100 dark:bg-gray-700 text-text dark:text-text outline-none cursor-not-allowed"})]})]}),p.status==="calibrating"&&p.rotationalProgress>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("span",{className:"text-text-muted",children:["Angle: ",p.rotationalAngles," / ",S.numberOfAngles]}),h.jsxs("span",{className:"font-mono font-bold text-primary",children:[p.rotationalProgress.toFixed(1),"%"]})]}),h.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${p.rotationalProgress}%`}})})]}),h.jsxs("button",{onClick:l,disabled:e||p.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[h.jsx(mo,{className:"w-5 h-5"}),h.jsx("span",{children:t("startCalibrationScan")||"Start Calibration Scan"})]})]}),p.status==="calibrated"&&h.jsx("button",{onClick:f,disabled:e,className:"w-full px-6 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 disabled:bg-gray-400 transition-colors font-semibold",children:t("recalibrate")||"Recalibrate System"})]})},ZN=()=>{const{t:e}=et(),{isConnected:t,send:r}=Js(),s=N.useMemo(()=>({imagingMode:"180",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2",transmissionPercentage:"100"}),[]),{pageData:p,handleChange:b,updateFormData:S}=lu("projectionAcquisition",s),[d,a]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),l=N.useCallback(u=>{console.log("Acquisition started with settings:",u),t&&r(JSON.stringify({type:"acquisition_start",settings:u}))},[t,r]);e("180degree"),e("360degree");const f=N.useCallback(()=>{S({...p,hdrStatus:!p.hdrStatus})},[p,S]),o=N.useCallback(u=>{if(t){const g=`Action:${u}`;r(g)?console.log(` Action ${u} sent via WebSocket`):console.error(` Failed to send Action ${u}`)}},[t,r]),c=N.useMemo(()=>[{key:"Gain",label:e("gain"),icon:Pt},{key:"Offset",label:e("offset"),icon:Pt},{key:"Preprocess",label:e("preprocess"),icon:$r}],[e]);return h.jsxs(qo,{children:[h.jsx(Go,{icon:To}),h.jsx(GN,{onAcquisitionStart:l,disabled:!t}),h.jsx(qN,{targetPosition:d,disabled:!t}),h.jsx(WN,{disabled:!t}),h.jsx(KN,{disabled:!t}),h.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[h.jsx("div",{className:"card p-6",children:h.jsxs(bt,{label:e("transmissionPercentage"),icon:Pt,showValue:!1,children:[h.jsx(gt,{type:"number",name:"transmissionPercentage",value:p.transmissionPercentage,onChange:b,placeholder:e("enterTransmissionPercentage"),min:"0",max:"100",step:"0.1",disabled:!t,suffix:"%"}),h.jsx("p",{className:"text-xs text-text-muted mt-2 font-vazir",children:e("transmissionPercentageDescription")})]})}),h.jsx("div",{className:"card p-6 lg:col-span-2",children:h.jsx(bt,{label:e("imageAdjustments"),icon:Pt,showValue:!1,children:h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:c.map(({key:u,label:g,icon:y})=>h.jsx(go,{variant:"secondary",icon:y,onClick:()=>o(u),disabled:!t,children:g},u))})})}),h.jsx("div",{className:"card p-6 lg:col-span-2",children:h.jsx(bt,{label:e("hdr"),icon:vy,showValue:!1,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Hr,{active:p.hdrStatus,onClick:f,icon:vy,disabled:!t,showStatus:!0}),p.hdrStatus&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("energyLevel1")}),h.jsx(gt,{type:"number",name:"energyLevel1",value:p.energyLevel1,onChange:b,placeholder:e("enterEnergyLevel1"),min:"0",step:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("energyLevel2")}),h.jsx(gt,{type:"number",name:"energyLevel2",value:p.energyLevel2,onChange:b,placeholder:e("enterEnergyLevel2"),min:"0",step:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("imageCount")}),h.jsx(gt,{type:"number",name:"imageCount",value:p.imageCount,onChange:b,placeholder:e("enterImageCount"),min:"1",step:"1"})]})]})]})})})]})]})},QN=({disabled:e=!1})=>{const{t}=et(),[r,s]=N.useState({snr:0,cnr:0,spatialResolution:0,uniformity:0,artifacts:0,overallQuality:0}),[p,b]=N.useState({isAssessing:!1,lastAssessment:null,assessmentCount:0});N.useEffect(()=>{if(p.isAssessing){const c=setInterval(()=>{s({snr:25+Math.random()*15,cnr:15+Math.random()*10,spatialResolution:8+Math.random()*4,uniformity:90+Math.random()*8,artifacts:Math.floor(Math.random()*5),overallQuality:75+Math.random()*20})},1e3);return()=>clearInterval(c)}},[p.isAssessing]);const S=()=>{b({isAssessing:!0,lastAssessment:new Date().toLocaleString(),assessmentCount:p.assessmentCount+1})},d=()=>{b({...p,isAssessing:!1})},a=(c,u)=>c>=u.excellent?"text-green-600 dark:text-green-400":c>=u.good?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",f=(()=>{const c=r.overallQuality;return c>=90?{icon:h.jsx(Uo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:t("excellent")||"Excellent"}:c>=75?{icon:h.jsx(qs,{className:"w-6 h-6"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:t("good")||"Good"}:{icon:h.jsx(Ic,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:t("needsImprovement")||"Needs Improvement"}})(),o=[{key:"snr",label:"SNR",value:r.snr,unit:"dB",thresholds:{excellent:35,good:30},description:"Signal-to-Noise Ratio"},{key:"cnr",label:"CNR",value:r.cnr,unit:"dB",thresholds:{excellent:20,good:17},description:"Contrast-to-Noise Ratio"},{key:"spatialResolution",label:t("spatialResolution")||"Spatial Resolution",value:r.spatialResolution,unit:"lp/mm",thresholds:{excellent:10,good:9},description:"Line pairs per millimeter"},{key:"uniformity",label:t("uniformity")||"Uniformity",value:r.uniformity,unit:"%",thresholds:{excellent:95,good:92},description:"Image uniformity"},{key:"artifacts",label:t("artifacts")||"Artifacts",value:r.artifacts,unit:"",thresholds:{excellent:1,good:2},description:"Number of visible artifacts",inverted:!0}];return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(lr,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("imageQualityAssessment")||"Image Quality Assessment"})]}),p.isAssessing?h.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors text-sm font-semibold",children:t("stop")||"Stop"}):h.jsx("button",{onClick:S,disabled:e,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-sm font-semibold",children:t("start")||"Start Assessment"})]}),p.isAssessing&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`panel p-4 rounded-lg border-2 ${f.border} ${f.bg}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-text-muted mb-1",children:t("overallQuality")||"Overall Quality"}),h.jsxs("div",{className:`text-3xl font-bold ${f.color}`,children:[r.overallQuality.toFixed(1),"%"]})]}),h.jsxs("div",{className:`flex items-center gap-2 ${f.color}`,children:[f.icon,h.jsx("span",{className:"font-semibold",children:f.text})]})]})}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(c=>{const u=c.inverted?a(c.thresholds.excellent-c.value+c.thresholds.excellent,c.thresholds):a(c.value,c.thresholds);return h.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-semibold text-text-muted",children:c.label}),c.unit&&h.jsx("span",{className:"text-xs text-text-muted",children:c.unit})]}),h.jsx("div",{className:`text-2xl font-bold font-mono ${u}`,children:c.value.toFixed(1)}),h.jsx("div",{className:"text-xs text-text-muted",children:c.description}),h.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:`h-full transition-all duration-300 ${u.includes("green")?"bg-green-500":u.includes("yellow")?"bg-yellow-500":"bg-red-500"}`,style:{width:c.inverted?`${Math.max(0,Math.min(100,100-c.value/5*100))}%`:`${Math.min(100,c.value/(c.thresholds.excellent*1.2)*100)}%`}})})]},c.key)})}),h.jsx("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("lastAssessment")||"Last Assessment",":"]}),h.jsx("span",{className:"font-semibold text-text ml-2",children:p.lastAssessment})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"text-text-muted",children:[t("assessments")||"Total Assessments",":"]}),h.jsx("span",{className:"font-semibold text-primary ml-2",children:p.assessmentCount})]})]})})]}),!p.isAssessing&&p.assessmentCount===0&&h.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[h.jsx(lr,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),h.jsx("p",{className:"text-text-muted",children:t("startAssessmentMessage")||'Click "Start Assessment" to begin quality evaluation'})]})]})},JN=({disabled:e=!1})=>{const{t}=et(),[r,s]=N.useState({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"}),[p,b]=N.useState({temperature:-20.5,temperatureStable:!0,readoutNoise:3.2,darkCurrent:.05,lastCalibration:"2025-10-13 14:30"}),S=(o,c)=>{s({...r,[o]:c})},d=()=>{console.log("Saving detector settings:",r),alert(t("settingsSaved")||"Settings saved successfully!")},a=()=>{s({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"})},l=()=>{const o=JSON.stringify(r,null,2),c=new Blob([o],{type:"application/json"}),u=URL.createObjectURL(c),g=document.createElement("a");g.href=u,g.download=`detector_config_${new Date().getTime()}.json`,g.click(),URL.revokeObjectURL(u)},f=o=>{const c=o.target.files[0];if(c){const u=new FileReader;u.onload=g=>{try{const y=JSON.parse(g.target.result);s(y),alert(t("settingsImported")||"Settings imported successfully!")}catch{alert(t("importError")||"Error importing settings")}},u.readAsText(c)}};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(F_,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("detectorConfiguration")||"Detector Configuration"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:l,disabled:e,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:t("export")||"Export",children:h.jsx(Gr,{className:"w-4 h-4"})}),h.jsxs("label",{className:`px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2 text-sm cursor-pointer ${e?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(Yo,{className:"w-4 h-4"}),h.jsx("input",{type:"file",accept:".json",onChange:f,disabled:e,className:"hidden"})]}),h.jsx("button",{onClick:a,disabled:e,className:"px-3 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:t("reset")||"Reset",children:h.jsx(ai,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[h.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:t("detectorStatus")||"Detector Status"}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("temperature")||"Temperature"}),h.jsxs("div",{className:"font-semibold text-text",children:[p.temperature,"C"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("readoutNoise")||"Readout Noise"}),h.jsxs("div",{className:"font-semibold text-text",children:[p.readoutNoise," e"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("darkCurrent")||"Dark Current"}),h.jsxs("div",{className:"font-semibold text-text",children:[p.darkCurrent," e/px/s"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-text-muted mb-1",children:t("lastCalibration")||"Last Calibration"}),h.jsx("div",{className:"font-semibold text-text text-xs",children:p.lastCalibration})]})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx(Pt,{className:"w-4 h-4 text-primary"}),t("hardwareSettings")||"Hardware Settings"]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("binning")||"Pixel Binning"}),h.jsxs("select",{value:r.binning,onChange:o=>S("binning",o.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[h.jsx("option",{value:"1x1",children:"11"}),h.jsx("option",{value:"2x2",children:"22"}),h.jsx("option",{value:"4x4",children:"44"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("readoutMode")||"Readout Mode"}),h.jsxs("select",{value:r.readoutMode,onChange:o=>S("readoutMode",o.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[h.jsx("option",{value:"standard",children:"Standard"}),h.jsx("option",{value:"fast",children:"Fast"}),h.jsx("option",{value:"low-noise",children:"Low Noise"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("coolingTemperature")||"Cooling Temp"," (C)"]}),h.jsx("input",{type:"number",value:r.coolingTemperature,onChange:o=>S("coolingTemperature",parseFloat(o.target.value)),disabled:e,min:"-40",max:"25",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("gainMode")||"Gain Mode"}),h.jsxs("select",{value:r.gainMode,onChange:o=>S("gainMode",o.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[h.jsx("option",{value:"auto",children:"Auto"}),h.jsx("option",{value:"low",children:"Low"}),h.jsx("option",{value:"medium",children:"Medium"}),h.jsx("option",{value:"high",children:"High"})]})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx(Pt,{className:"w-4 h-4 text-primary"}),t("imagingSettings")||"Imaging Settings"]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("exposureTime")||"Exposure Time"," (ms)"]}),h.jsx("input",{type:"number",value:r.exposureTime,onChange:o=>S("exposureTime",parseFloat(o.target.value)),disabled:e,min:"1",max:"10000",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[t("frameRate")||"Frame Rate"," (fps)"]}),h.jsx("input",{type:"number",value:r.frameRate,onChange:o=>S("frameRate",parseFloat(o.target.value)),disabled:e,min:"1",max:"60",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:t("triggerMode")||"Trigger Mode"}),h.jsxs("select",{value:r.triggerMode,onChange:o=>S("triggerMode",o.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[h.jsx("option",{value:"internal",children:"Internal"}),h.jsx("option",{value:"external",children:"External"}),h.jsx("option",{value:"software",children:"Software"})]})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[h.jsx(Pt,{className:"w-4 h-4 text-primary"}),t("processingSettings")||"Processing Settings"]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{key:"darkFrameCorrection",label:t("darkFrameCorrection")||"Dark Frame Correction"},{key:"flatFieldCorrection",label:t("flatFieldCorrection")||"Flat Field Correction"},{key:"badPixelCorrection",label:t("badPixelCorrection")||"Bad Pixel Correction"},{key:"lagCorrection",label:t("lagCorrection")||"Lag Correction"}].map(({key:o,label:c})=>h.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-border hover:border-primary/50 transition-all cursor-pointer",children:[h.jsx("input",{type:"checkbox",checked:r[o],onChange:u=>S(o,u.target.checked),disabled:e,className:"w-5 h-5 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:c})]},o))})]})]}),h.jsx("div",{className:"flex justify-center pt-4",children:h.jsxs("button",{onClick:d,disabled:e,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[h.jsx(Xo,{className:"w-5 h-5"}),h.jsx("span",{children:t("save")||"Save Configuration"})]})})]})};class eM{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.originalImageData=null,this.currentImageData=null}async loadImage(t){return new Promise((r,s)=>{const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{try{this.canvas.width=p.width,this.canvas.height=p.height,this.ctx.drawImage(p,0,0),this.originalImageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.currentImageData=this.cloneImageData(this.originalImageData),r(this.originalImageData)}catch(b){s(b)}},p.onerror=b=>{s(new Error("Failed to load image: "+b))},p.src=t})}cloneImageData(t){return new ImageData(new Uint8ClampedArray(t.data),t.width,t.height)}reset(){this.originalImageData&&(this.currentImageData=this.cloneImageData(this.originalImageData))}getImageDataURL(t=!0){const r=t?this.currentImageData:this.originalImageData;return r?(this.ctx.putImageData(r,0,0),this.canvas.toDataURL("image/png")):null}applyGaussianFilter(t=1){if(!this.currentImageData)return;const r=document.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height;const s=r.getContext("2d");return s.putImageData(this.currentImageData,0,0),s.filter=`blur(${t*2}px)`,s.drawImage(r,0,0),this.currentImageData=s.getImageData(0,0,r.width,r.height),this.getImageDataURL()}applyMedianFilter(t=3){return this.applyGaussianFilter(t/3)}applySobelFilter(){if(!this.currentImageData)return;const t=this.currentImageData.data,r=this.currentImageData.width,s=this.currentImageData.height,p=new ImageData(r,s),b=[[-1,0,1],[-2,0,2],[-1,0,1]],S=[[-1,-2,-1],[0,0,0],[1,2,1]];for(let d=1;d<s-1;d++)for(let a=1;a<r-1;a++){let l=0,f=0;for(let u=-1;u<=1;u++)for(let g=-1;g<=1;g++){const y=((d+u)*r+(a+g))*4,x=(t[y]+t[y+1]+t[y+2])/3;l+=x*b[u+1][g+1],f+=x*S[u+1][g+1]}const o=Math.sqrt(l*l+f*f),c=(d*r+a)*4;p.data[c]=p.data[c+1]=p.data[c+2]=Math.min(255,o),p.data[c+3]=255}return this.currentImageData=p,this.getImageDataURL()}applyGradientFilter(){return this.applySobelFilter()}applySharpen(t=1){if(!this.currentImageData)return;const r=this.currentImageData.data,s=this.currentImageData.width,p=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),S=[[0,-1,0],[-1,5,-1],[0,-1,0]];for(let d=1;d<p-1;d++)for(let a=1;a<s-1;a++){for(let l=0;l<3;l++){let f=0;for(let c=-1;c<=1;c++)for(let u=-1;u<=1;u++){const g=((d+c)*s+(a+u))*4+l;f+=r[g]*S[c+1][u+1]*t}const o=(d*s+a)*4+l;b.data[o]=Math.max(0,Math.min(255,f))}b.data[(d*s+a)*4+3]=255}return this.currentImageData=b,this.getImageDataURL()}applyHistogramEqualization(){if(!this.currentImageData)return;const t=this.currentImageData.data,r=this.currentImageData.width*this.currentImageData.height,s=new Array(256).fill(0);for(let d=0;d<t.length;d+=4){const a=Math.floor((t[d]+t[d+1]+t[d+2])/3);s[a]++}const p=new Array(256);p[0]=s[0];for(let d=1;d<256;d++)p[d]=p[d-1]+s[d];const b=p.find(d=>d>0),S=p.map(d=>Math.round((d-b)/(r-b)*255));for(let d=0;d<t.length;d+=4){const a=Math.floor((t[d]+t[d+1]+t[d+2])/3),l=S[a];t[d]=t[d+1]=t[d+2]=l}return this.getImageDataURL()}applyInvert(){if(!this.currentImageData)return;const t=this.currentImageData.data;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2];return this.getImageDataURL()}applyRotation(t){if(!this.currentImageData)return;const r=document.createElement("canvas"),s=r.getContext("2d"),p=t*Math.PI/180,b=Math.abs(Math.cos(p)),S=Math.abs(Math.sin(p)),d=this.canvas.height*S+this.canvas.width*b,a=this.canvas.height*b+this.canvas.width*S;return r.width=d,r.height=a,s.translate(d/2,a/2),s.rotate(p),s.putImageData(this.currentImageData,-this.canvas.width/2,-this.canvas.height/2),this.canvas.width=d,this.canvas.height=a,this.currentImageData=s.getImageData(0,0,d,a),this.getImageDataURL()}adjustBrightness(t){if(!this.currentImageData)return;const r=this.currentImageData.data,s=t/100*128;for(let p=0;p<r.length;p+=4)r[p]=Math.max(0,Math.min(255,r[p]+s)),r[p+1]=Math.max(0,Math.min(255,r[p+1]+s)),r[p+2]=Math.max(0,Math.min(255,r[p+2]+s));return this.getImageDataURL()}adjustContrast(t){if(!this.currentImageData)return;const r=this.currentImageData.data,s=259*(t+255)/(255*(259-t));for(let p=0;p<r.length;p+=4)r[p]=Math.max(0,Math.min(255,s*(r[p]-128)+128)),r[p+1]=Math.max(0,Math.min(255,s*(r[p+1]-128)+128)),r[p+2]=Math.max(0,Math.min(255,s*(r[p+2]-128)+128));return this.getImageDataURL()}convertToGrayscale(){if(!this.currentImageData)return;const t=this.currentImageData.data;for(let r=0;r<t.length;r+=4){const s=.299*t[r]+.587*t[r+1]+.114*t[r+2];t[r]=t[r+1]=t[r+2]=s}return this.getImageDataURL()}applyErosion(t=3){if(!this.currentImageData)return;const r=this.currentImageData.data,s=this.currentImageData.width,p=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),S=Math.floor(t/2);for(let d=S;d<p-S;d++)for(let a=S;a<s-S;a++){let l=255;for(let o=-S;o<=S;o++)for(let c=-S;c<=S;c++){const u=((d+o)*s+(a+c))*4,g=r[u];g<l&&(l=g)}const f=(d*s+a)*4;b.data[f]=b.data[f+1]=b.data[f+2]=l}return this.currentImageData=b,this.getImageDataURL()}applyDilation(t=3){if(!this.currentImageData)return;const r=this.currentImageData.data,s=this.currentImageData.width,p=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),S=Math.floor(t/2);for(let d=S;d<p-S;d++)for(let a=S;a<s-S;a++){let l=0;for(let o=-S;o<=S;o++)for(let c=-S;c<=S;c++){const u=((d+o)*s+(a+c))*4,g=r[u];g>l&&(l=g)}const f=(d*s+a)*4;b.data[f]=b.data[f+1]=b.data[f+2]=l}return this.currentImageData=b,this.getImageDataURL()}applyThreshold(t=128){if(!this.currentImageData)return;const r=this.currentImageData.data;for(let s=0;s<r.length;s+=4){const b=(r[s]+r[s+1]+r[s+2])/3>t?255:0;r[s]=r[s+1]=r[s+2]=b}return this.getImageDataURL()}calculateHistogram(){if(!this.currentImageData)return null;const t=this.currentImageData.data,r=new Array(256).fill(0);for(let s=0;s<t.length;s+=4){const p=Math.floor((t[s]+t[s+1]+t[s+2])/3);r[p]++}return r}}const Ie=new eM,R1=N.createContext(),P1=()=>{const e=N.useContext(R1);if(!e)throw new Error("useImageProcessing must be used within ImageProcessingProvider");return e},tM=({children:e})=>{const{lastMessage:t}=Js(),[r,s]=N.useState(null),[p,b]=N.useState(null),[S,d]=N.useState(!1),[a,l]=N.useState(null),[f,o]=N.useState(null),[c,u]=N.useState([]);N.useEffect(()=>{if(t)try{const R=JSON.parse(t.data);R.type==="image"&&R.imageData?g(R.imageData):R.type==="binary"&&R.buffer&&y(R.buffer)}catch{t.data instanceof ArrayBuffer?y(t.data):typeof t.data=="string"&&t.data.startsWith("data:image")&&g(t.data)}},[t]);const g=N.useCallback(async R=>{d(!0);try{await Ie.loadImage(R);const H=Ie.getImageDataURL(!1);s(H),b(H);const K=Ie.calculateStatistics();l(K);const X=Ie.calculateHistogram();o(X),u([])}catch(H){console.error("Error loading image from base64:",H)}finally{d(!1)}},[]),y=N.useCallback(async R=>{d(!0);try{await Ie.loadImage(R);const H=Ie.getImageDataURL(!1);s(H),b(H);const K=Ie.calculateStatistics();l(K);const X=Ie.calculateHistogram();o(X),u([])}catch(H){console.error("Error loading image from buffer:",H)}finally{d(!1)}},[]),x=N.useCallback(async R=>{d(!0);try{await Ie.loadImage(R);const H=Ie.getImageDataURL(!1);s(H),b(H);const K=Ie.calculateStatistics();l(K);const X=Ie.calculateHistogram();o(X),u([])}catch(H){console.error("Error loading image from URL:",H)}finally{d(!1)}},[]),w=N.useCallback(async R=>{d(!0);try{const H=new FileReader;H.onload=async K=>{await Ie.loadImage(K.target.result);const X=Ie.getImageDataURL(!1);s(X),b(X);const ne=Ie.calculateStatistics();l(ne);const de=Ie.calculateHistogram();o(de),u([]),d(!1)},H.readAsDataURL(R)}catch(H){console.error("Error loading image from file:",H),d(!1)}},[]),C=N.useCallback(async(R,H={})=>{if(!r){console.warn("No image loaded");return}d(!0);try{let K;switch(R){case"gaussian":K=Ie.applyGaussianFilter(H.sigma||1);break;case"median":K=Ie.applyMedianFilter(H.kernelSize||3);break;case"mean":K=Ie.applyMeanFilter(H.kernelSize||3);break;case"sobel":K=Ie.applySobelFilter();break;case"gradient":K=Ie.applyGradientFilter();break;case"sharpen":K=Ie.applySharpen(H.factor||1);break;case"histogramEqualization":K=Ie.applyHistogramEqualization();break;case"invert":K=Ie.applyInvert();break;case"rotation":K=Ie.applyRotation(H.angle||0);break;case"flipHorizontal":K=Ie.applyFlipHorizontal();break;case"flipVertical":K=Ie.applyFlipVertical();break;case"brightness":K=Ie.adjustBrightness(H.value||0);break;case"contrast":K=Ie.adjustContrast(H.value||0);break;case"threshold":K=Ie.applyThreshold(H.threshold||128);break;case"grayscale":K=Ie.convertToGrayscale();break;case"erosion":K=Ie.applyErosion(H.kernelSize||3);break;case"dilation":K=Ie.applyDilation(H.kernelSize||3);break;default:console.warn("Unknown filter type:",R),d(!1);return}b(K),u(de=>[...de,{filter:R,params:H,timestamp:new Date().toISOString()}]);const X=Ie.calculateStatistics();l(X);const ne=Ie.calculateHistogram();o(ne)}catch(K){console.error("Error applying filter:",K)}finally{d(!1)}},[r]),j=N.useCallback(()=>{if(r){Ie.reset(),b(r),u([]);const R=Ie.calculateStatistics();l(R);const H=Ie.calculateHistogram();o(H)}},[r]),T=N.useCallback(async R=>{if(!p){console.warn("No processed image to save");return}try{await Ie.saveImage(R)}catch(H){console.error("Error saving image:",H)}},[p]),M=N.useCallback(async(R,H,K,X)=>{if(r){d(!0);try{const ne=Ie.cropImage(R,H,K,X);b(ne),u(de=>[...de,{filter:"crop",params:{x:R,y:H,width:K,height:X},timestamp:new Date().toISOString()}])}catch(ne){console.error("Error cropping image:",ne)}finally{d(!1)}}},[r]),E=N.useCallback(async(R,H)=>{if(r){d(!0);try{const K=Ie.resizeImage(R,H);b(K),u(X=>[...X,{filter:"resize",params:{width:R,height:H},timestamp:new Date().toISOString()}])}catch(K){console.error("Error resizing image:",K)}finally{d(!1)}}},[r]),A={originalImage:r,processedImage:p,isProcessing:S,imageStats:a,histogram:f,processingHistory:c,loadImageFromBase64:g,loadImageFromBuffer:y,loadImageFromUrl:x,loadImageFromFile:w,applyFilter:C,resetToOriginal:j,saveImage:T,cropImage:M,resizeImage:E};return h.jsx(R1.Provider,{value:A,children:e})},nM=({disabled:e=!1,onApplyFilter:t})=>{const{t:r}=et(),{applyFilter:s}=P1(),[p,b]=N.useState("none"),[S,d]=N.useState({denoising:{method:"bilateral",strength:50,kernelSize:5,spatialSigma:75,colorSigma:75},sharpening:{method:"unsharp",amount:50,radius:1,threshold:0},edgeEnhancement:{method:"sobel",lowThreshold:50,highThreshold:150,apertureSize:3},histogramEqualization:{method:"clahe",clipLimit:2,tileSize:8},morphology:{operation:"opening",kernelShape:"ellipse",kernelSize:5,iterations:1},wavelet:{waveletType:"db4",level:3,threshold:50}}),a=u=>{b(u)},l=(u,g,y)=>{d({...S,[u]:{...S[u],[g]:y}})},f=async()=>{if(p==="none"){alert(r("selectFilterFirst")||"Please select a filter first");return}const u={type:p,settings:S[p]};console.log(" [POST-PROCESSING] Applying filter:",u),t&&t(u);try{let g=null,y={};switch(p){case"denoising":S.denoising.method==="gaussian"?(g="gaussian",y={sigma:S.denoising.strength/50}):S.denoising.method==="median"?(g="median",y={kernelSize:S.denoising.kernelSize}):(g="gaussian",y={sigma:S.denoising.strength/50});break;case"sharpening":g="sharpen",y={factor:S.sharpening.amount/50};break;case"edgeEnhancement":S.edgeEnhancement.method==="sobel"?g="sobel":g="gradient";break;case"histogramEqualization":g="histogramEqualization";break;case"morphology":(S.morphology.operation==="opening"||S.morphology.operation==="closing")&&(g=S.morphology.operation==="opening"?"erosion":"dilation",y={kernelSize:S.morphology.kernelSize});break;case"wavelet":console.log(" [POST-PROCESSING] Wavelet filter not yet implemented in frontend"),alert(r("waveletNotSupported")||"Wavelet filter is not supported yet in frontend processing");return;default:console.warn(" [POST-PROCESSING] Unknown filter type:",p);return}g&&(console.log(` [POST-PROCESSING] Applying ${g} to BaslerDisplay with params:`,y),await s(g,y),console.log(` [POST-PROCESSING] Filter ${g} applied successfully`),alert(r("filterApplied")||`${p} filter applied successfully!`))}catch(g){console.error(" [POST-PROCESSING] Error applying filter:",g),alert(r("filterError")||"Error applying filter")}},o=[{key:"none",label:r("none")||"None",icon:wn,color:"gray"},{key:"denoising",label:r("denoising")||"Denoising",icon:$r,color:"blue"},{key:"sharpening",label:r("sharpening")||"Sharpening",icon:Un,color:"yellow"},{key:"edgeEnhancement",label:r("edgeEnhancement")||"Edge Enhancement",icon:cN,color:"purple"},{key:"histogramEqualization",label:r("histogramEqualization")||"Histogram Eq.",icon:wn,color:"green"},{key:"morphology",label:r("morphology")||"Morphology",icon:wn,color:"red"},{key:"wavelet",label:r("wavelet")||"Wavelet",icon:wn,color:"indigo"}],c=()=>{switch(p){case"denoising":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),h.jsxs("select",{value:S.denoising.method,onChange:u=>l("denoising","method",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"bilateral",children:"Bilateral"}),h.jsx("option",{value:"nlm",children:"Non-Local Means"}),h.jsx("option",{value:"gaussian",children:"Gaussian"}),h.jsx("option",{value:"median",children:"Median"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("strength")||"Strength"}),h.jsx("span",{className:"font-mono text-primary",children:S.denoising.strength})]}),h.jsx("input",{type:"range",value:S.denoising.strength,onChange:u=>l("denoising","strength",parseInt(u.target.value)),disabled:e,min:"0",max:"100",className:"w-full"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),h.jsx("input",{type:"number",value:S.denoising.kernelSize,onChange:u=>l("denoising","kernelSize",parseInt(u.target.value)),disabled:e,min:"3",max:"15",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"sharpening":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),h.jsxs("select",{value:S.sharpening.method,onChange:u=>l("sharpening","method",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"unsharp",children:"Unsharp Mask"}),h.jsx("option",{value:"laplacian",children:"Laplacian"}),h.jsx("option",{value:"highboost",children:"High-Boost"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("amount")||"Amount"}),h.jsx("span",{className:"font-mono text-primary",children:S.sharpening.amount})]}),h.jsx("input",{type:"range",value:S.sharpening.amount,onChange:u=>l("sharpening","amount",parseInt(u.target.value)),disabled:e,min:"0",max:"200",className:"w-full"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("radius")||"Radius"}),h.jsx("span",{className:"font-mono text-primary",children:S.sharpening.radius})]}),h.jsx("input",{type:"range",value:S.sharpening.radius*10,onChange:u=>l("sharpening","radius",parseInt(u.target.value)/10),disabled:e,min:"5",max:"50",className:"w-full"})]})]});case"edgeEnhancement":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("edgeMethod")||"Method"}),h.jsxs("select",{value:S.edgeEnhancement.method,onChange:u=>l("edgeEnhancement","method",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"sobel",children:"Sobel"}),h.jsx("option",{value:"canny",children:"Canny"}),h.jsx("option",{value:"laplacian",children:"Laplacian"}),h.jsx("option",{value:"prewitt",children:"Prewitt"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("lowThreshold")||"Low Threshold"}),h.jsx("span",{className:"font-mono text-primary",children:S.edgeEnhancement.lowThreshold})]}),h.jsx("input",{type:"range",value:S.edgeEnhancement.lowThreshold,onChange:u=>l("edgeEnhancement","lowThreshold",parseInt(u.target.value)),disabled:e,min:"0",max:"255",className:"w-full"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("highThreshold")||"High Threshold"}),h.jsx("span",{className:"font-mono text-primary",children:S.edgeEnhancement.highThreshold})]}),h.jsx("input",{type:"range",value:S.edgeEnhancement.highThreshold,onChange:u=>l("edgeEnhancement","highThreshold",parseInt(u.target.value)),disabled:e,min:"0",max:"255",className:"w-full"})]})]});case"histogramEqualization":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),h.jsxs("select",{value:S.histogramEqualization.method,onChange:u=>l("histogramEqualization","method",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"standard",children:"Standard"}),h.jsx("option",{value:"clahe",children:"CLAHE"}),h.jsx("option",{value:"adaptive",children:"Adaptive"})]})]}),S.histogramEqualization.method==="clahe"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("clipLimit")||"Clip Limit"}),h.jsx("span",{className:"font-mono text-primary",children:S.histogramEqualization.clipLimit})]}),h.jsx("input",{type:"range",value:S.histogramEqualization.clipLimit*10,onChange:u=>l("histogramEqualization","clipLimit",parseInt(u.target.value)/10),disabled:e,min:"10",max:"100",className:"w-full"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("tileSize")||"Tile Size"}),h.jsx("input",{type:"number",value:S.histogramEqualization.tileSize,onChange:u=>l("histogramEqualization","tileSize",parseInt(u.target.value)),disabled:e,min:"4",max:"32",step:"4",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]})]});case"morphology":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("operation")||"Operation"}),h.jsxs("select",{value:S.morphology.operation,onChange:u=>l("morphology","operation",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"opening",children:"Opening"}),h.jsx("option",{value:"closing",children:"Closing"}),h.jsx("option",{value:"gradient",children:"Gradient"}),h.jsx("option",{value:"tophat",children:"Top Hat"}),h.jsx("option",{value:"blackhat",children:"Black Hat"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelShape")||"Kernel Shape"}),h.jsxs("select",{value:S.morphology.kernelShape,onChange:u=>l("morphology","kernelShape",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"rect",children:"Rectangle"}),h.jsx("option",{value:"ellipse",children:"Ellipse"}),h.jsx("option",{value:"cross",children:"Cross"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),h.jsx("input",{type:"number",value:S.morphology.kernelSize,onChange:u=>l("morphology","kernelSize",parseInt(u.target.value)),disabled:e,min:"3",max:"21",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"wavelet":return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("waveletType")||"Wavelet Type"}),h.jsxs("select",{value:S.wavelet.waveletType,onChange:u=>l("wavelet","waveletType",u.target.value),disabled:e,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[h.jsx("option",{value:"haar",children:"Haar"}),h.jsx("option",{value:"db4",children:"Daubechies 4"}),h.jsx("option",{value:"db8",children:"Daubechies 8"}),h.jsx("option",{value:"sym4",children:"Symlet 4"}),h.jsx("option",{value:"coif2",children:"Coiflet 2"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("decompositionLevel")||"Decomposition Level"}),h.jsx("input",{type:"number",value:S.wavelet.level,onChange:u=>l("wavelet","level",parseInt(u.target.value)),disabled:e,min:"1",max:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:r("threshold")||"Threshold"}),h.jsx("span",{className:"font-mono text-primary",children:S.wavelet.threshold})]}),h.jsx("input",{type:"range",value:S.wavelet.threshold,onChange:u=>l("wavelet","threshold",parseInt(u.target.value)),disabled:e,min:"0",max:"100",className:"w-full"})]})]});default:return h.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[h.jsx(wn,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),h.jsx("p",{className:"text-text-muted",children:r("selectFilterType")||"Select a filter type to configure settings"})]})}};return h.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wn,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("advancedFiltering")||"Advanced Filtering"})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:o.map(({key:u,label:g,icon:y,color:x})=>h.jsxs("button",{onClick:()=>a(u),disabled:e,className:`p-3 rounded-lg border-2 transition-all ${p===u?`border-${x}-500 bg-${x}-500/10`:"border-border hover:border-primary/50"} ${e?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(y,{className:`w-5 h-5 mx-auto mb-2 ${p===u?`text-${x}-600`:"text-text-muted"}`}),h.jsx("div",{className:"text-xs font-medium text-text dark:text-text text-center",children:g})]},u))}),h.jsx("div",{className:"panel p-4 rounded-lg min-h-[250px]",children:c()}),p!=="none"&&h.jsx("div",{className:"flex justify-center",children:h.jsxs("button",{onClick:f,disabled:e,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[h.jsx($r,{className:"w-5 h-5"}),h.jsx("span",{children:r("applyFilter")||"Apply Filter"})]})})]})},iM=()=>{const{t:e,i18n:t}=et(),{isConnected:r,send:s}=Js(),p=N.useMemo(()=>({rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"}),[]),{pageData:b,handleChange:S,updateFormData:d}=lu("postProcessing",p),a=N.useMemo(()=>({rotation:[{value:"None",label:e("none")},{value:"90",label:e("90degree")},{value:"180",label:e("180degree")},{value:"270",label:e("270degree")}],fourierFilter:[{value:"Low Pass",label:e("lowPass")},{value:"Band Pass",label:e("bandPass")},{value:"High Pass",label:e("highPass")}],kernelSize:[{value:"3x3",label:"3x3"},{value:"5x5",label:"5x5"},{value:"7x7",label:"7x7"}],edgeMethod:[{value:"Sobel",label:e("sobel")},{value:"Canny",label:e("canny")},{value:"Prewitt",label:e("prewitt")}],exportFormat:[{value:"TIFF",label:e("tiff")},{value:"JPG",label:e("jpg")},{value:"DICOM",label:e("dicom")}]}),[e]),l=N.useMemo(()=>[{name:"medianFilter",label:e("medianFilter")},{name:"meanFilter",label:e("meanFilter")},{name:"varianceFilter",label:e("varianceFilter")},{name:"pseudoColorFilter",label:e("pseudoColorFilter")}],[e]),f=N.useMemo(()=>[{key:"Normalize",label:e("normalize"),icon:$r},{key:"FFT",label:e("fft"),icon:wn},{key:"FFTInverse",label:e("fftInverse"),icon:wn}],[e]),o={mirroring:N.useCallback(()=>{d({...b,mirroring:!b.mirroring})},[b,d]),sharpening:N.useCallback(()=>{d({...b,sharpening:!b.sharpening})},[b,d]),edgeDetection:N.useCallback(()=>{d({...b,edgeDetection:!b.edgeDetection})},[b,d])},c=N.useCallback((y,x=null)=>{if(r){const w=x?`Action:${y}:${x}`:`Action:${y}`;s(w)?console.log(` Action ${y} sent via WebSocket`):console.error(` Failed to send Action ${y}`)}},[r,s]),g=t.language==="fa"?"text-right":"text-left";return h.jsxs(qo,{children:[h.jsx(Go,{icon:$r}),h.jsx(QN,{disabled:!r}),h.jsx(JN,{disabled:!r}),h.jsx(nM,{disabled:!r,onApplyFilter:y=>{console.log("Filter applied:",y),c("ApplyFilter",JSON.stringify(y))}}),h.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[h.jsx(bt,{label:e("imageTransform"),icon:ai,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(or,{name:"rotationAngle",value:b.rotationAngle,onChange:S,options:a.rotation}),h.jsx(Hr,{active:b.mirroring,onClick:o.mirroring,icon:f_,disabled:!r})]})}),h.jsx(bt,{label:e("basicOperations"),icon:$r,showValue:!1,children:h.jsx("div",{className:"grid grid-cols-1 gap-3",children:f.map(({key:y,label:x,icon:w})=>h.jsx(go,{variant:"secondary",icon:w,onClick:()=>c(y),disabled:!r,children:x},y))})}),h.jsx(bt,{label:e("fourierFilter"),icon:wn,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(or,{name:"fourierFilter",value:b.fourierFilter,onChange:S,options:a.fourierFilter}),h.jsx(go,{variant:"secondary",icon:wn,onClick:()=>c("FourierFilter",b.fourierFilter),disabled:!r,children:e("applyFourierFilter")})]})}),h.jsx(bt,{label:e("exportImage"),icon:Gr,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(or,{name:"exportFormat",value:b.exportFormat,onChange:S,options:a.exportFormat}),h.jsx(go,{variant:"primary",icon:Gr,onClick:()=>c("Export",b.exportFormat),disabled:!r,children:e("export")})]})}),h.jsx("div",{className:"card p-6 lg:col-span-2",children:h.jsx(bt,{label:e("imageFilters"),icon:wn,showValue:!1,children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.map(y=>h.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${g} cursor-pointer hover:text-primary transition-colors`,children:[h.jsx("input",{type:"checkbox",name:y.name,checked:b[y.name]||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),y.label]},y.name)),h.jsxs("div",{className:"sm:col-span-2",children:[h.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${g} cursor-pointer`,children:[h.jsx("input",{type:"checkbox",name:"gaussianFilter",checked:b.gaussianFilter||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),e("gaussianFilter")]}),b.gaussianFilter&&h.jsx("div",{className:"mt-2 ml-6",children:h.jsx(gt,{type:"number",name:"gaussianSigma",value:b.gaussianSigma,onChange:S,placeholder:e("enterGaussianSigma"),min:"0",step:"0.1"})})]})]})})}),h.jsx(bt,{label:e("sharpening"),icon:Mo,showValue:!1,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Hr,{active:b.sharpening,onClick:o.sharpening,icon:Mo,disabled:!r,showStatus:!0}),b.sharpening&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("kernelSize")}),h.jsx(or,{name:"kernelSize",value:b.kernelSize,onChange:S,options:a.kernelSize})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("sharpeningStrength")}),h.jsx(gt,{type:"number",name:"sharpeningStrength",value:b.sharpeningStrength,onChange:S,placeholder:e("enterSharpeningStrength"),min:"0",step:"0.1"})]})]})]})}),h.jsx(bt,{label:e("edgeDetection"),icon:Cy,showValue:!1,children:h.jsxs("div",{className:"space-y-4",children:[h.jsx(Hr,{active:b.edgeDetection,onClick:o.edgeDetection,icon:Cy,disabled:!r,showStatus:!0}),b.edgeDetection&&h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("threshold")}),h.jsx(gt,{type:"number",name:"threshold",value:b.threshold,onChange:S,placeholder:e("enterThreshold"),min:"0",step:"1"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("edgeMethod")}),h.jsx(or,{name:"edgeMethod",value:b.edgeMethod,onChange:S,options:a.edgeMethod})]})]})]})})]})]})};function rM(){return h.jsxs(h.Fragment,{children:[h.jsx(Go,{icon:Un}),h.jsx(go,{variant:"secondary"})]})}const fm="-",sM=e=>{const t=oM(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:S=>{const d=S.split(fm);return d[0]===""&&d.length!==1&&d.shift(),L1(d,t)||aM(S)},getConflictingClassGroupIds:(S,d)=>{const a=r[S]||[];return d&&s[S]?[...a,...s[S]]:a}}},L1=(e,t)=>{var S;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),p=s?L1(e.slice(1),s):void 0;if(p)return p;if(t.validators.length===0)return;const b=e.join(fm);return(S=t.validators.find(({validator:d})=>d(b)))==null?void 0:S.classGroupId},Ey=/^\[(.+)\]$/,aM=e=>{if(Ey.test(e)){const t=Ey.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},oM=e=>{const{theme:t,classGroups:r}=e,s={nextPart:new Map,validators:[]};for(const p in r)vf(r[p],s,p,t);return s},vf=(e,t,r,s)=>{e.forEach(p=>{if(typeof p=="string"){const b=p===""?t:Oy(t,p);b.classGroupId=r;return}if(typeof p=="function"){if(lM(p)){vf(p(s),t,r,s);return}t.validators.push({validator:p,classGroupId:r});return}Object.entries(p).forEach(([b,S])=>{vf(S,Oy(t,b),r,s)})})},Oy=(e,t)=>{let r=e;return t.split(fm).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},lM=e=>e.isThemeGetter,cM=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const p=(b,S)=>{r.set(b,S),t++,t>e&&(t=0,s=r,r=new Map)};return{get(b){let S=r.get(b);if(S!==void 0)return S;if((S=s.get(b))!==void 0)return p(b,S),S},set(b,S){r.has(b)?r.set(b,S):p(b,S)}}},wf="!",Sf=":",uM=Sf.length,dM=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=p=>{const b=[];let S=0,d=0,a=0,l;for(let g=0;g<p.length;g++){let y=p[g];if(S===0&&d===0){if(y===Sf){b.push(p.slice(a,g)),a=g+uM;continue}if(y==="/"){l=g;continue}}y==="["?S++:y==="]"?S--:y==="("?d++:y===")"&&d--}const f=b.length===0?p:p.substring(a),o=hM(f),c=o!==f,u=l&&l>a?l-a:void 0;return{modifiers:b,hasImportantModifier:c,baseClassName:o,maybePostfixModifierPosition:u}};if(t){const p=t+Sf,b=s;s=S=>S.startsWith(p)?b(S.substring(p.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:S,maybePostfixModifierPosition:void 0}}if(r){const p=s;s=b=>r({className:b,parseClassName:p})}return s},hM=e=>e.endsWith(wf)?e.substring(0,e.length-1):e.startsWith(wf)?e.substring(1):e,fM=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const p=[];let b=[];return s.forEach(S=>{S[0]==="["||t[S]?(p.push(...b.sort(),S),b=[]):b.push(S)}),p.push(...b.sort()),p}},mM=e=>({cache:cM(e.cacheSize),parseClassName:dM(e),sortModifiers:fM(e),...sM(e)}),gM=/\s+/,pM=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:p,sortModifiers:b}=t,S=[],d=e.trim().split(gM);let a="";for(let l=d.length-1;l>=0;l-=1){const f=d[l],{isExternal:o,modifiers:c,hasImportantModifier:u,baseClassName:g,maybePostfixModifierPosition:y}=r(f);if(o){a=f+(a.length>0?" "+a:a);continue}let x=!!y,w=s(x?g.substring(0,y):g);if(!w){if(!x){a=f+(a.length>0?" "+a:a);continue}if(w=s(g),!w){a=f+(a.length>0?" "+a:a);continue}x=!1}const C=b(c).join(":"),j=u?C+wf:C,T=j+w;if(S.includes(T))continue;S.push(T);const M=p(w,x);for(let E=0;E<M.length;++E){const A=M[E];S.push(j+A)}a=f+(a.length>0?" "+a:a)}return a};function xM(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=F1(t))&&(s&&(s+=" "),s+=r);return s}const F1=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=F1(e[s]))&&(r&&(r+=" "),r+=t);return r};function yM(e,...t){let r,s,p,b=S;function S(a){const l=t.reduce((f,o)=>o(f),e());return r=mM(l),s=r.cache.get,p=r.cache.set,b=d,d(a)}function d(a){const l=s(a);if(l)return l;const f=pM(a,r);return p(a,f),f}return function(){return b(xM.apply(null,arguments))}}const At=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},z1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,I1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bM=/^\d+\/\d+$/,vM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rs=e=>bM.test(e),We=e=>!!e&&!Number.isNaN(Number(e)),sr=e=>!!e&&Number.isInteger(Number(e)),zh=e=>e.endsWith("%")&&We(e.slice(0,-1)),ji=e=>vM.test(e),jM=()=>!0,TM=e=>wM.test(e)&&!SM.test(e),B1=()=>!1,_M=e=>CM.test(e),NM=e=>kM.test(e),MM=e=>!Re(e)&&!Pe(e),EM=e=>ta(e,H1,B1),Re=e=>z1.test(e),Ar=e=>ta(e,U1,TM),Ih=e=>ta(e,PM,We),Dy=e=>ta(e,V1,B1),OM=e=>ta(e,$1,NM),fc=e=>ta(e,X1,_M),Pe=e=>I1.test(e),so=e=>na(e,U1),DM=e=>na(e,LM),Ay=e=>na(e,V1),AM=e=>na(e,H1),RM=e=>na(e,$1),mc=e=>na(e,X1,!0),ta=(e,t,r)=>{const s=z1.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},na=(e,t,r=!1)=>{const s=I1.exec(e);return s?s[1]?t(s[1]):r:!1},V1=e=>e==="position"||e==="percentage",$1=e=>e==="image"||e==="url",H1=e=>e==="length"||e==="size"||e==="bg-size",U1=e=>e==="length",PM=e=>e==="number",LM=e=>e==="family-name",X1=e=>e==="shadow",FM=()=>{const e=At("color"),t=At("font"),r=At("text"),s=At("font-weight"),p=At("tracking"),b=At("leading"),S=At("breakpoint"),d=At("container"),a=At("spacing"),l=At("radius"),f=At("shadow"),o=At("inset-shadow"),c=At("text-shadow"),u=At("drop-shadow"),g=At("blur"),y=At("perspective"),x=At("aspect"),w=At("ease"),C=At("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...T(),Pe,Re],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],R=()=>[Pe,Re,a],H=()=>[Rs,"full","auto",...R()],K=()=>[sr,"none","subgrid",Pe,Re],X=()=>["auto",{span:["full",sr,Pe,Re]},sr,Pe,Re],ne=()=>[sr,"auto",Pe,Re],de=()=>["auto","min","max","fr",Pe,Re],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...R()],$=()=>[Rs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],V=()=>[e,Pe,Re],D=()=>[...T(),Ay,Dy,{position:[Pe,Re]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",AM,EM,{size:[Pe,Re]}],I=()=>[zh,so,Ar],G=()=>["","none","full",l,Pe,Re],B=()=>["",We,so,Ar],z=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[We,zh,Ay,Dy],ue=()=>["","none",g,Pe,Re],le=()=>["none",We,Pe,Re],ie=()=>["none",We,Pe,Re],Z=()=>[We,Pe,Re],fe=()=>[Rs,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ji],breakpoint:[ji],color:[jM],container:[ji],"drop-shadow":[ji],ease:["in","out","in-out"],font:[MM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ji],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ji],shadow:[ji],spacing:["px",We],text:[ji],"text-shadow":[ji],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Rs,Re,Pe,x]}],container:["container"],columns:[{columns:[We,Re,Pe,d]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[sr,"auto",Pe,Re]}],basis:[{basis:[Rs,"full","auto",d,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,Rs,"auto","initial","none",Re]}],grow:[{grow:["",We,Pe,Re]}],shrink:[{shrink:["",We,Pe,Re]}],order:[{order:[sr,"first","last","none",Pe,Re]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":ne()}],"col-end":[{"col-end":ne()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":ne()}],"row-end":[{"row-end":ne()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":de()}],"auto-rows":[{"auto-rows":de()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[d,"screen",...$()]}],"min-w":[{"min-w":[d,"screen","none",...$()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[S]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",r,so,Ar]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Pe,Ih]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zh,Re]}],"font-family":[{font:[DM,Re,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[p,Pe,Re]}],"line-clamp":[{"line-clamp":[We,"none",Pe,Ih]}],leading:[{leading:[b,...R()]}],"list-image":[{"list-image":["none",Pe,Re]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Pe,Re]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",Pe,Ar]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[We,"auto",Pe,Re]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe,Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe,Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:D()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sr,Pe,Re],radial:["",Pe,Re],conic:[sr,Pe,Re]},RM,OM]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:B()}],"border-w-x":[{"border-x":B()}],"border-w-y":[{"border-y":B()}],"border-w-s":[{"border-s":B()}],"border-w-e":[{"border-e":B()}],"border-w-t":[{"border-t":B()}],"border-w-r":[{"border-r":B()}],"border-w-b":[{"border-b":B()}],"border-w-l":[{"border-l":B()}],"divide-x":[{"divide-x":B()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...z(),"hidden","none"]}],"divide-style":[{divide:[...z(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,Pe,Re]}],"outline-w":[{outline:["",We,so,Ar]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",f,mc,fc]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",o,mc,fc]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[We,Ar]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":B()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",c,mc,fc]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[We,Pe,Re]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[Pe,Re]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:D()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Pe,Re]}],filter:[{filter:["","none",Pe,Re]}],blur:[{blur:ue()}],brightness:[{brightness:[We,Pe,Re]}],contrast:[{contrast:[We,Pe,Re]}],"drop-shadow":[{"drop-shadow":["","none",u,mc,fc]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",We,Pe,Re]}],"hue-rotate":[{"hue-rotate":[We,Pe,Re]}],invert:[{invert:["",We,Pe,Re]}],saturate:[{saturate:[We,Pe,Re]}],sepia:[{sepia:["",We,Pe,Re]}],"backdrop-filter":[{"backdrop-filter":["","none",Pe,Re]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[We,Pe,Re]}],"backdrop-contrast":[{"backdrop-contrast":[We,Pe,Re]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,Pe,Re]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,Pe,Re]}],"backdrop-invert":[{"backdrop-invert":["",We,Pe,Re]}],"backdrop-opacity":[{"backdrop-opacity":[We,Pe,Re]}],"backdrop-saturate":[{"backdrop-saturate":[We,Pe,Re]}],"backdrop-sepia":[{"backdrop-sepia":["",We,Pe,Re]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Pe,Re]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",Pe,Re]}],ease:[{ease:["linear","initial",w,Pe,Re]}],delay:[{delay:[We,Pe,Re]}],animate:[{animate:["none",C,Pe,Re]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Pe,Re]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Z()}],"skew-x":[{"skew-x":Z()}],"skew-y":[{"skew-y":Z()}],transform:[{transform:[Pe,Re,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:fe()}],"translate-x":[{"translate-x":fe()}],"translate-y":[{"translate-y":fe()}],"translate-z":[{"translate-z":fe()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe,Re]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe,Re]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[We,so,Ar,Ih]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},An=yM(FM),mm=N.createContext({});function cu(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const gm=typeof window<"u",Y1=gm?N.useLayoutEffect:N.useEffect,uu=N.createContext(null);function pm(e,t){e.indexOf(t)===-1&&e.push(t)}function xm(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const Ai=(e,t,r)=>r>t?t:r<e?e:r;let ym=()=>{};const Ri={},G1=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function q1(e){return typeof e=="object"&&e!==null}const W1=e=>/^0[^.\s]+$/u.test(e);function bm(e){let t;return()=>(t===void 0&&(t=e()),t)}const Rn=e=>e,zM=(e,t)=>r=>t(e(r)),Wo=(...e)=>e.reduce(zM),Eo=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s};class vm{constructor(){this.subscriptions=[]}add(t){return pm(this.subscriptions,t),()=>xm(this.subscriptions,t)}notify(t,r,s){const p=this.subscriptions.length;if(p)if(p===1)this.subscriptions[0](t,r,s);else for(let b=0;b<p;b++){const S=this.subscriptions[b];S&&S(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ni=e=>e*1e3,ii=e=>e/1e3;function K1(e,t){return t?e*(1e3/t):0}const Z1=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,IM=1e-7,BM=12;function VM(e,t,r,s,p){let b,S,d=0;do S=t+(r-t)/2,b=Z1(S,s,p)-e,b>0?r=S:t=S;while(Math.abs(b)>IM&&++d<BM);return S}function Ko(e,t,r,s){if(e===t&&r===s)return Rn;const p=b=>VM(b,0,1,e,r);return b=>b===0||b===1?b:Z1(p(b),t,s)}const Q1=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,J1=e=>t=>1-e(1-t),ew=Ko(.33,1.53,.69,.99),wm=J1(ew),tw=Q1(wm),nw=e=>(e*=2)<1?.5*wm(e):.5*(2-Math.pow(2,-10*(e-1))),Sm=e=>1-Math.sin(Math.acos(e)),iw=J1(Sm),rw=Q1(Sm),$M=Ko(.42,0,1,1),HM=Ko(0,0,.58,1),sw=Ko(.42,0,.58,1),UM=e=>Array.isArray(e)&&typeof e[0]!="number",aw=e=>Array.isArray(e)&&typeof e[0]=="number",XM={linear:Rn,easeIn:$M,easeInOut:sw,easeOut:HM,circIn:Sm,circInOut:rw,circOut:iw,backIn:wm,backInOut:tw,backOut:ew,anticipate:nw},YM=e=>typeof e=="string",Ry=e=>{if(aw(e)){ym(e.length===4);const[t,r,s,p]=e;return Ko(t,r,s,p)}else if(YM(e))return XM[e];return e},gc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function GM(e,t){let r=new Set,s=new Set,p=!1,b=!1;const S=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function a(f){S.has(f)&&(l.schedule(f),e()),f(d)}const l={schedule:(f,o=!1,c=!1)=>{const g=c&&p?r:s;return o&&S.add(f),g.has(f)||g.add(f),f},cancel:f=>{s.delete(f),S.delete(f)},process:f=>{if(d=f,p){b=!0;return}p=!0,[r,s]=[s,r],r.forEach(a),r.clear(),p=!1,b&&(b=!1,l.process(f))}};return l}const qM=40;function ow(e,t){let r=!1,s=!0;const p={delta:0,timestamp:0,isProcessing:!1},b=()=>r=!0,S=gc.reduce((j,T)=>(j[T]=GM(b),j),{}),{setup:d,read:a,resolveKeyframes:l,preUpdate:f,update:o,preRender:c,render:u,postRender:g}=S,y=()=>{const j=Ri.useManualTiming?p.timestamp:performance.now();r=!1,Ri.useManualTiming||(p.delta=s?1e3/60:Math.max(Math.min(j-p.timestamp,qM),1)),p.timestamp=j,p.isProcessing=!0,d.process(p),a.process(p),l.process(p),f.process(p),o.process(p),c.process(p),u.process(p),g.process(p),p.isProcessing=!1,r&&t&&(s=!1,e(y))},x=()=>{r=!0,s=!0,p.isProcessing||e(y)};return{schedule:gc.reduce((j,T)=>{const M=S[T];return j[T]=(E,A=!1,R=!1)=>(r||x(),M.schedule(E,A,R)),j},{}),cancel:j=>{for(let T=0;T<gc.length;T++)S[gc[T]].cancel(j)},state:p,steps:S}}const{schedule:ft,cancel:dr,state:Gt,steps:Bh}=ow(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rn,!0);let Nc;function WM(){Nc=void 0}const dn={now:()=>(Nc===void 0&&dn.set(Gt.isProcessing||Ri.useManualTiming?Gt.timestamp:performance.now()),Nc),set:e=>{Nc=e,queueMicrotask(WM)}},lw=e=>t=>typeof t=="string"&&t.startsWith(e),Cm=lw("--"),KM=lw("var(--"),km=e=>KM(e)?ZM.test(e.split("/*")[0].trim()):!1,ZM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ia={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oo={...ia,transform:e=>Ai(0,1,e)},pc={...ia,default:1},po=e=>Math.round(e*1e5)/1e5,jm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function QM(e){return e==null}const JM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tm=(e,t)=>r=>!!(typeof r=="string"&&JM.test(r)&&r.startsWith(e)||t&&!QM(r)&&Object.prototype.hasOwnProperty.call(r,t)),cw=(e,t,r)=>s=>{if(typeof s!="string")return s;const[p,b,S,d]=s.match(jm);return{[e]:parseFloat(p),[t]:parseFloat(b),[r]:parseFloat(S),alpha:d!==void 0?parseFloat(d):1}},eE=e=>Ai(0,255,e),Vh={...ia,transform:e=>Math.round(eE(e))},Lr={test:Tm("rgb","red"),parse:cw("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+Vh.transform(e)+", "+Vh.transform(t)+", "+Vh.transform(r)+", "+po(Oo.transform(s))+")"};function tE(e){let t="",r="",s="",p="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),p=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),p=e.substring(4,5),t+=t,r+=r,s+=s,p+=p),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:p?parseInt(p,16)/255:1}}const Cf={test:Tm("#"),parse:tE,transform:Lr.transform},Zo=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ar=Zo("deg"),ri=Zo("%"),Xe=Zo("px"),nE=Zo("vh"),iE=Zo("vw"),Py={...ri,parse:e=>ri.parse(e)/100,transform:e=>ri.transform(e*100)},Is={test:Tm("hsl","hue"),parse:cw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+ri.transform(po(t))+", "+ri.transform(po(r))+", "+po(Oo.transform(s))+")"},Et={test:e=>Lr.test(e)||Cf.test(e)||Is.test(e),parse:e=>Lr.test(e)?Lr.parse(e):Is.test(e)?Is.parse(e):Cf.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Lr.transform(e):Is.transform(e),getAnimatableNone:e=>{const t=Et.parse(e);return t.alpha=0,Et.transform(t)}},rE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sE(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(jm))==null?void 0:t.length)||0)+(((r=e.match(rE))==null?void 0:r.length)||0)>0}const uw="number",dw="color",aE="var",oE="var(",Ly="${}",lE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Do(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},p=[];let b=0;const d=t.replace(lE,a=>(Et.test(a)?(s.color.push(b),p.push(dw),r.push(Et.parse(a))):a.startsWith(oE)?(s.var.push(b),p.push(aE),r.push(a)):(s.number.push(b),p.push(uw),r.push(parseFloat(a))),++b,Ly)).split(Ly);return{values:r,split:d,indexes:s,types:p}}function hw(e){return Do(e).values}function fw(e){const{split:t,types:r}=Do(e),s=t.length;return p=>{let b="";for(let S=0;S<s;S++)if(b+=t[S],p[S]!==void 0){const d=r[S];d===uw?b+=po(p[S]):d===dw?b+=Et.transform(p[S]):b+=p[S]}return b}}const cE=e=>typeof e=="number"?0:Et.test(e)?Et.getAnimatableNone(e):e;function uE(e){const t=hw(e);return fw(e)(t.map(cE))}const hr={test:sE,parse:hw,createTransformer:fw,getAnimatableNone:uE};function $h(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function dE({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let p=0,b=0,S=0;if(!t)p=b=S=r;else{const d=r<.5?r*(1+t):r+t-r*t,a=2*r-d;p=$h(a,d,e+1/3),b=$h(a,d,e),S=$h(a,d,e-1/3)}return{red:Math.round(p*255),green:Math.round(b*255),blue:Math.round(S*255),alpha:s}}function Bc(e,t){return r=>r>0?t:e}const pt=(e,t,r)=>e+(t-e)*r,Hh=(e,t,r)=>{const s=e*e,p=r*(t*t-s)+s;return p<0?0:Math.sqrt(p)},hE=[Cf,Lr,Is],fE=e=>hE.find(t=>t.test(e));function Fy(e){const t=fE(e);if(!t)return!1;let r=t.parse(e);return t===Is&&(r=dE(r)),r}const zy=(e,t)=>{const r=Fy(e),s=Fy(t);if(!r||!s)return Bc(e,t);const p={...r};return b=>(p.red=Hh(r.red,s.red,b),p.green=Hh(r.green,s.green,b),p.blue=Hh(r.blue,s.blue,b),p.alpha=pt(r.alpha,s.alpha,b),Lr.transform(p))},kf=new Set(["none","hidden"]);function mE(e,t){return kf.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function gE(e,t){return r=>pt(e,t,r)}function _m(e){return typeof e=="number"?gE:typeof e=="string"?km(e)?Bc:Et.test(e)?zy:yE:Array.isArray(e)?mw:typeof e=="object"?Et.test(e)?zy:pE:Bc}function mw(e,t){const r=[...e],s=r.length,p=e.map((b,S)=>_m(b)(b,t[S]));return b=>{for(let S=0;S<s;S++)r[S]=p[S](b);return r}}function pE(e,t){const r={...e,...t},s={};for(const p in r)e[p]!==void 0&&t[p]!==void 0&&(s[p]=_m(e[p])(e[p],t[p]));return p=>{for(const b in s)r[b]=s[b](p);return r}}function xE(e,t){const r=[],s={color:0,var:0,number:0};for(let p=0;p<t.values.length;p++){const b=t.types[p],S=e.indexes[b][s[b]],d=e.values[S]??0;r[p]=d,s[b]++}return r}const yE=(e,t)=>{const r=hr.createTransformer(t),s=Do(e),p=Do(t);return s.indexes.var.length===p.indexes.var.length&&s.indexes.color.length===p.indexes.color.length&&s.indexes.number.length>=p.indexes.number.length?kf.has(e)&&!p.values.length||kf.has(t)&&!s.values.length?mE(e,t):Wo(mw(xE(s,p),p.values),r):Bc(e,t)};function gw(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?pt(e,t,r):_m(e)(e,t)}const bE=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>ft.update(t,r),stop:()=>dr(t),now:()=>Gt.isProcessing?Gt.timestamp:dn.now()}},pw=(e,t,r=10)=>{let s="";const p=Math.max(Math.round(t/r),2);for(let b=0;b<p;b++)s+=Math.round(e(b/(p-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Vc=2e4;function Nm(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<Vc;)t+=r,s=e.next(t);return t>=Vc?1/0:t}function vE(e,t=100,r){const s=r({...e,keyframes:[0,t]}),p=Math.min(Nm(s),Vc);return{type:"keyframes",ease:b=>s.next(p*b).value/t,duration:ii(p)}}const wE=5;function xw(e,t,r){const s=Math.max(t-wE,0);return K1(r-e(s),t-s)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Iy=.001;function SE({duration:e=vt.duration,bounce:t=vt.bounce,velocity:r=vt.velocity,mass:s=vt.mass}){let p,b,S=1-t;S=Ai(vt.minDamping,vt.maxDamping,S),e=Ai(vt.minDuration,vt.maxDuration,ii(e)),S<1?(p=l=>{const f=l*S,o=f*e,c=f-r,u=jf(l,S),g=Math.exp(-o);return Iy-c/u*g},b=l=>{const o=l*S*e,c=o*r+r,u=Math.pow(S,2)*Math.pow(l,2)*e,g=Math.exp(-o),y=jf(Math.pow(l,2),S);return(-p(l)+Iy>0?-1:1)*((c-u)*g)/y}):(p=l=>{const f=Math.exp(-l*e),o=(l-r)*e+1;return-.001+f*o},b=l=>{const f=Math.exp(-l*e),o=(r-l)*(e*e);return f*o});const d=5/e,a=kE(p,b,d);if(e=ni(e),isNaN(a))return{stiffness:vt.stiffness,damping:vt.damping,duration:e};{const l=Math.pow(a,2)*s;return{stiffness:l,damping:S*2*Math.sqrt(s*l),duration:e}}}const CE=12;function kE(e,t,r){let s=r;for(let p=1;p<CE;p++)s=s-e(s)/t(s);return s}function jf(e,t){return e*Math.sqrt(1-t*t)}const jE=["duration","bounce"],TE=["stiffness","damping","mass"];function By(e,t){return t.some(r=>e[r]!==void 0)}function _E(e){let t={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...e};if(!By(e,TE)&&By(e,jE))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(r*1.2),p=s*s,b=2*Ai(.05,1,1-(e.bounce||0))*Math.sqrt(p);t={...t,mass:vt.mass,stiffness:p,damping:b}}else{const r=SE(e);t={...t,...r,mass:vt.mass},t.isResolvedFromDuration=!0}return t}function $c(e=vt.visualDuration,t=vt.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:p}=r;const b=r.keyframes[0],S=r.keyframes[r.keyframes.length-1],d={done:!1,value:b},{stiffness:a,damping:l,mass:f,duration:o,velocity:c,isResolvedFromDuration:u}=_E({...r,velocity:-ii(r.velocity||0)}),g=c||0,y=l/(2*Math.sqrt(a*f)),x=S-b,w=ii(Math.sqrt(a/f)),C=Math.abs(x)<5;s||(s=C?vt.restSpeed.granular:vt.restSpeed.default),p||(p=C?vt.restDelta.granular:vt.restDelta.default);let j;if(y<1){const M=jf(w,y);j=E=>{const A=Math.exp(-y*w*E);return S-A*((g+y*w*x)/M*Math.sin(M*E)+x*Math.cos(M*E))}}else if(y===1)j=M=>S-Math.exp(-w*M)*(x+(g+w*x)*M);else{const M=w*Math.sqrt(y*y-1);j=E=>{const A=Math.exp(-y*w*E),R=Math.min(M*E,300);return S-A*((g+y*w*x)*Math.sinh(R)+M*x*Math.cosh(R))/M}}const T={calculatedDuration:u&&o||null,next:M=>{const E=j(M);if(u)d.done=M>=o;else{let A=M===0?g:0;y<1&&(A=M===0?ni(g):xw(j,M,E));const R=Math.abs(A)<=s,H=Math.abs(S-E)<=p;d.done=R&&H}return d.value=d.done?S:E,d},toString:()=>{const M=Math.min(Nm(T),Vc),E=pw(A=>T.next(M*A).value,M,30);return M+"ms "+E},toTransition:()=>{}};return T}$c.applyToOptions=e=>{const t=vE(e,100,$c);return e.ease=t.ease,e.duration=ni(t.duration),e.type="keyframes",e};function Tf({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:p=10,bounceStiffness:b=500,modifyTarget:S,min:d,max:a,restDelta:l=.5,restSpeed:f}){const o=e[0],c={done:!1,value:o},u=R=>d!==void 0&&R<d||a!==void 0&&R>a,g=R=>d===void 0?a:a===void 0||Math.abs(d-R)<Math.abs(a-R)?d:a;let y=r*t;const x=o+y,w=S===void 0?x:S(x);w!==x&&(y=w-o);const C=R=>-y*Math.exp(-R/s),j=R=>w+C(R),T=R=>{const H=C(R),K=j(R);c.done=Math.abs(H)<=l,c.value=c.done?w:K};let M,E;const A=R=>{u(c.value)&&(M=R,E=$c({keyframes:[c.value,g(c.value)],velocity:xw(j,R,c.value),damping:p,stiffness:b,restDelta:l,restSpeed:f}))};return A(0),{calculatedDuration:null,next:R=>{let H=!1;return!E&&M===void 0&&(H=!0,T(R),A(R)),M!==void 0&&R>=M?E.next(R-M):(!H&&T(R),c)}}}function NE(e,t,r){const s=[],p=r||Ri.mix||gw,b=e.length-1;for(let S=0;S<b;S++){let d=p(e[S],e[S+1]);if(t){const a=Array.isArray(t)?t[S]||Rn:t;d=Wo(a,d)}s.push(d)}return s}function ME(e,t,{clamp:r=!0,ease:s,mixer:p}={}){const b=e.length;if(ym(b===t.length),b===1)return()=>t[0];if(b===2&&t[0]===t[1])return()=>t[1];const S=e[0]===e[1];e[0]>e[b-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=NE(t,s,p),a=d.length,l=f=>{if(S&&f<e[0])return t[0];let o=0;if(a>1)for(;o<e.length-2&&!(f<e[o+1]);o++);const c=Eo(e[o],e[o+1],f);return d[o](c)};return r?f=>l(Ai(e[0],e[b-1],f)):l}function EE(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const p=Eo(0,t,s);e.push(pt(r,1,p))}}function OE(e){const t=[0];return EE(t,e.length-1),t}function DE(e,t){return e.map(r=>r*t)}function AE(e,t){return e.map(()=>t||sw).splice(0,e.length-1)}function xo({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const p=UM(s)?s.map(Ry):Ry(s),b={done:!1,value:t[0]},S=DE(r&&r.length===t.length?r:OE(t),e),d=ME(S,t,{ease:Array.isArray(p)?p:AE(t,p)});return{calculatedDuration:e,next:a=>(b.value=d(a),b.done=a>=e,b)}}const RE=e=>e!==null;function Mm(e,{repeat:t,repeatType:r="loop"},s,p=1){const b=e.filter(RE),d=p<0||t&&r!=="loop"&&t%2===1?0:b.length-1;return!d||s===void 0?b[d]:s}const PE={decay:Tf,inertia:Tf,tween:xo,keyframes:xo,spring:$c};function yw(e){typeof e.type=="string"&&(e.type=PE[e.type])}class Em{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const LE=e=>e/100;class Om extends Em{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,p;const{motionValue:r}=this.options;r&&r.updatedAt!==dn.now()&&this.tick(dn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(p=(s=this.options).onStop)==null||p.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;yw(t);const{type:r=xo,repeat:s=0,repeatDelay:p=0,repeatType:b,velocity:S=0}=t;let{keyframes:d}=t;const a=r||xo;a!==xo&&typeof d[0]!="number"&&(this.mixKeyframes=Wo(LE,gw(d[0],d[1])),d=[0,100]);const l=a({...t,keyframes:d});b==="mirror"&&(this.mirroredGenerator=a({...t,keyframes:[...d].reverse(),velocity:-S})),l.calculatedDuration===null&&(l.calculatedDuration=Nm(l));const{calculatedDuration:f}=l;this.calculatedDuration=f,this.resolvedDuration=f+p,this.totalDuration=this.resolvedDuration*(s+1)-p,this.generator=l}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:s,totalDuration:p,mixKeyframes:b,mirroredGenerator:S,resolvedDuration:d,calculatedDuration:a}=this;if(this.startTime===null)return s.next(0);const{delay:l=0,keyframes:f,repeat:o,repeatType:c,repeatDelay:u,type:g,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-p/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const w=this.currentTime-l*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?w<0:w>p;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let j=this.currentTime,T=s;if(o){const R=Math.min(this.currentTime,p)/d;let H=Math.floor(R),K=R%1;!K&&R>=1&&(K=1),K===1&&H--,H=Math.min(H,o+1),!!(H%2)&&(c==="reverse"?(K=1-K,u&&(K-=u/d)):c==="mirror"&&(T=S)),j=Ai(0,1,K)*d}const M=C?{done:!1,value:f[0]}:T.next(j);b&&(M.value=b(M.value));let{done:E}=M;!C&&a!==null&&(E=this.playbackSpeed>=0?this.currentTime>=p:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return A&&g!==Tf&&(M.value=Mm(f,this.options,x,this.speed)),y&&y(M.value),A&&this.finish(),M}then(t,r){return this.finished.then(t,r)}get duration(){return ii(this.calculatedDuration)}get time(){return ii(this.currentTime)}set time(t){var r;t=ni(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(dn.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=ii(this.currentTime))}play(){var p,b;if(this.isStopped)return;const{driver:t=bE,startTime:r}=this.options;this.driver||(this.driver=t(S=>this.tick(S))),(b=(p=this.options).onPlay)==null||b.call(p);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=r??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function FE(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Fr=e=>e*180/Math.PI,_f=e=>{const t=Fr(Math.atan2(e[1],e[0]));return Nf(t)},zE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:_f,rotateZ:_f,skewX:e=>Fr(Math.atan(e[1])),skewY:e=>Fr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Nf=e=>(e=e%360,e<0&&(e+=360),e),Vy=_f,$y=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Hy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),IE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$y,scaleY:Hy,scale:e=>($y(e)+Hy(e))/2,rotateX:e=>Nf(Fr(Math.atan2(e[6],e[5]))),rotateY:e=>Nf(Fr(Math.atan2(-e[2],e[0]))),rotateZ:Vy,rotate:Vy,skewX:e=>Fr(Math.atan(e[4])),skewY:e=>Fr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Mf(e){return e.includes("scale")?1:0}function Ef(e,t){if(!e||e==="none")return Mf(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,p;if(r)s=IE,p=r;else{const d=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=zE,p=d}if(!p)return Mf(t);const b=s[t],S=p[1].split(",").map(VE);return typeof b=="function"?b(S):S[b]}const BE=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Ef(r,t)};function VE(e){return parseFloat(e.trim())}const ra=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sa=new Set(ra),Uy=e=>e===ia||e===Xe,$E=new Set(["x","y","z"]),HE=ra.filter(e=>!$E.has(e));function UE(e){const t=[];return HE.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}const Ur={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ef(t,"x"),y:(e,{transform:t})=>Ef(t,"y")};Ur.translateX=Ur.x;Ur.translateY=Ur.y;const Xr=new Set;let Of=!1,Df=!1,Af=!1;function bw(){if(Df){const e=Array.from(Xr).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),r=new Map;t.forEach(s=>{const p=UE(s);p.length&&(r.set(s,p),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const p=r.get(s);p&&p.forEach(([b,S])=>{var d;(d=s.getValue(b))==null||d.set(S)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Df=!1,Of=!1,Xr.forEach(e=>e.complete(Af)),Xr.clear()}function vw(){Xr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Df=!0)})}function XE(){Af=!0,vw(),bw(),Af=!1}class Dm{constructor(t,r,s,p,b,S=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=s,this.motionValue=p,this.element=b,this.isAsync=S}scheduleResolve(){this.state="scheduled",this.isAsync?(Xr.add(this),Of||(Of=!0,ft.read(vw),ft.resolveKeyframes(bw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:s,motionValue:p}=this;if(t[0]===null){const b=p==null?void 0:p.get(),S=t[t.length-1];if(b!==void 0)t[0]=b;else if(s&&r){const d=s.readValue(r,S);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=S),p&&b===void 0&&p.set(t[0])}FE(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Xr.delete(this)}cancel(){this.state==="scheduled"&&(Xr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YE=e=>e.startsWith("--");function GE(e,t,r){YE(t)?e.style.setProperty(t,r):e.style[t]=r}const qE=bm(()=>window.ScrollTimeline!==void 0),WE={};function KE(e,t){const r=bm(e);return()=>WE[t]??r()}const ww=KE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fo=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,Xy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fo([0,.65,.55,1]),circOut:fo([.55,0,1,.45]),backIn:fo([.31,.01,.66,-.59]),backOut:fo([.33,1.53,.69,.99])};function Sw(e,t){if(e)return typeof e=="function"?ww()?pw(e,t):"ease-out":aw(e)?fo(e):Array.isArray(e)?e.map(r=>Sw(r,t)||Xy.easeOut):Xy[e]}function ZE(e,t,r,{delay:s=0,duration:p=300,repeat:b=0,repeatType:S="loop",ease:d="easeOut",times:a}={},l=void 0){const f={[t]:r};a&&(f.offset=a);const o=Sw(d,p);Array.isArray(o)&&(f.easing=o);const c={delay:s,duration:p,easing:Array.isArray(o)?"linear":o,fill:"both",iterations:b+1,direction:S==="reverse"?"alternate":"normal"};return l&&(c.pseudoElement=l),e.animate(f,c)}function Cw(e){return typeof e=="function"&&"applyToOptions"in e}function QE({type:e,...t}){return Cw(e)&&ww()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class JE extends Em{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:s,keyframes:p,pseudoElement:b,allowFlatten:S=!1,finalKeyframe:d,onComplete:a}=t;this.isPseudoElement=!!b,this.allowFlatten=S,this.options=t,ym(typeof t.type!="string");const l=QE(t);this.animation=ZE(r,s,p,l,b),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!b){const f=Mm(p,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(f):GE(r,s,f),this.animation.cancel()}a==null||a(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,s;const t=((s=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:s.call(r).duration)||0;return ii(Number(t))}get time(){return ii(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ni(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&qE()?(this.animation.timeline=t,Rn):r(this)}}const kw={anticipate:nw,backInOut:tw,circInOut:rw};function eO(e){return e in kw}function tO(e){typeof e.ease=="string"&&eO(e.ease)&&(e.ease=kw[e.ease])}const Yy=10;class nO extends JE{constructor(t){tO(t),yw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:s,onComplete:p,element:b,...S}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const d=new Om({...S,autoplay:!1}),a=ni(this.finishedTime??this.time);r.setWithVelocity(d.sample(a-Yy).value,d.sample(a).value,Yy),d.stop()}}const Gy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(hr.test(e)||e==="0")&&!e.startsWith("url("));function iO(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function rO(e,t,r,s){const p=e[0];if(p===null)return!1;if(t==="display"||t==="visibility")return!0;const b=e[e.length-1],S=Gy(p,t),d=Gy(b,t);return!S||!d?!1:iO(e)||(r==="spring"||Cw(r))&&s}function Rf(e){e.duration=0,e.type}const sO=new Set(["opacity","clipPath","filter","transform"]),aO=bm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oO(e){var f;const{motionValue:t,name:r,repeatDelay:s,repeatType:p,damping:b,type:S}=e;if(!(((f=t==null?void 0:t.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return aO()&&r&&sO.has(r)&&(r!=="transform"||!l)&&!a&&!s&&p!=="mirror"&&b!==0&&S!=="inertia"}const lO=40;class cO extends Em{constructor({autoplay:t=!0,delay:r=0,type:s="keyframes",repeat:p=0,repeatDelay:b=0,repeatType:S="loop",keyframes:d,name:a,motionValue:l,element:f,...o}){var g;super(),this.stop=()=>{var y,x;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=dn.now();const c={autoplay:t,delay:r,type:s,repeat:p,repeatDelay:b,repeatType:S,name:a,motionValue:l,element:f,...o},u=(f==null?void 0:f.KeyframeResolver)||Dm;this.keyframeResolver=new u(d,(y,x,w)=>this.onKeyframesResolved(y,x,c,!w),a,l,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,r,s,p){this.keyframeResolver=void 0;const{name:b,type:S,velocity:d,delay:a,isHandoff:l,onUpdate:f}=s;this.resolvedAt=dn.now(),rO(t,b,S,d)||((Ri.instantAnimations||!a)&&(f==null||f(Mm(t,s,r))),t[0]=t[t.length-1],Rf(s),s.repeat=0);const c={startTime:p?this.resolvedAt?this.resolvedAt-this.createdAt>lO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...s,keyframes:t},u=!l&&oO(c)?new nO({...c,element:c.motionValue.owner.current}):new Om(c);u.finished.then(()=>this.notifyFinished()).catch(Rn),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),XE()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const uO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function dO(e){const t=uO.exec(e);if(!t)return[,];const[,r,s,p]=t;return[`--${r??s}`,p]}function jw(e,t,r=1){const[s,p]=dO(e);if(!s)return;const b=window.getComputedStyle(t).getPropertyValue(s);if(b){const S=b.trim();return G1(S)?parseFloat(S):S}return km(p)?jw(p,t,r+1):p}function Am(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Tw=new Set(["width","height","top","left","right","bottom",...ra]),hO={test:e=>e==="auto",parse:e=>e},_w=e=>t=>t.test(e),Nw=[ia,Xe,ri,ar,iE,nE,hO],qy=e=>Nw.find(_w(e));function fO(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||W1(e):!0}const mO=new Set(["brightness","contrast","saturate","opacity"]);function gO(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(jm)||[];if(!s)return e;const p=r.replace(s,"");let b=mO.has(t)?1:0;return s!==r&&(b*=100),t+"("+b+p+")"}const pO=/\b([a-z-]*)\(.*?\)/gu,Pf={...hr,getAnimatableNone:e=>{const t=e.match(pO);return t?t.map(gO).join(" "):e}},Wy={...ia,transform:Math.round},xO={rotate:ar,rotateX:ar,rotateY:ar,rotateZ:ar,scale:pc,scaleX:pc,scaleY:pc,scaleZ:pc,skew:ar,skewX:ar,skewY:ar,distance:Xe,translateX:Xe,translateY:Xe,translateZ:Xe,x:Xe,y:Xe,z:Xe,perspective:Xe,transformPerspective:Xe,opacity:Oo,originX:Py,originY:Py,originZ:Xe},Rm={borderWidth:Xe,borderTopWidth:Xe,borderRightWidth:Xe,borderBottomWidth:Xe,borderLeftWidth:Xe,borderRadius:Xe,radius:Xe,borderTopLeftRadius:Xe,borderTopRightRadius:Xe,borderBottomRightRadius:Xe,borderBottomLeftRadius:Xe,width:Xe,maxWidth:Xe,height:Xe,maxHeight:Xe,top:Xe,right:Xe,bottom:Xe,left:Xe,padding:Xe,paddingTop:Xe,paddingRight:Xe,paddingBottom:Xe,paddingLeft:Xe,margin:Xe,marginTop:Xe,marginRight:Xe,marginBottom:Xe,marginLeft:Xe,backgroundPositionX:Xe,backgroundPositionY:Xe,...xO,zIndex:Wy,fillOpacity:Oo,strokeOpacity:Oo,numOctaves:Wy},yO={...Rm,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:Pf,WebkitFilter:Pf},Mw=e=>yO[e];function Ew(e,t){let r=Mw(e);return r!==Pf&&(r=hr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const bO=new Set(["auto","none","0"]);function vO(e,t,r){let s=0,p;for(;s<e.length&&!p;){const b=e[s];typeof b=="string"&&!bO.has(b)&&Do(b).values.length&&(p=e[s]),s++}if(p&&r)for(const b of t)e[b]=Ew(r,p)}class wO extends Dm{constructor(t,r,s,p,b){super(t,r,s,p,b,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="string"&&(l=l.trim(),km(l))){const f=jw(l,r.current);f!==void 0&&(t[a]=f),a===t.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!Tw.has(s)||t.length!==2)return;const[p,b]=t,S=qy(p),d=qy(b);if(S!==d)if(Uy(S)&&Uy(d))for(let a=0;a<t.length;a++){const l=t[a];typeof l=="string"&&(t[a]=parseFloat(l))}else Ur[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,s=[];for(let p=0;p<t.length;p++)(t[p]===null||fO(t[p]))&&s.push(p);s.length&&vO(t,s,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ur[s](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const p=r[r.length-1];p!==void 0&&t.getValue(s,p).jump(p,!1)}measureEndState(){var d;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const p=t.getValue(r);p&&p.jump(this.measuredOrigin,!1);const b=s.length-1,S=s[b];s[b]=Ur[r](t.measureViewportBox(),window.getComputedStyle(t.current)),S!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=S),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([a,l])=>{t.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function SO(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let s=document;const p=(r==null?void 0:r[e])??s.querySelectorAll(e);return p?Array.from(p):[]}return Array.from(e)}const Ow=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Dw(e){return q1(e)&&"offsetHeight"in e}const Ky=30,CO=e=>!isNaN(parseFloat(e));class kO{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var b;const p=dn.now();if(this.updatedAt!==p&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((b=this.events.change)==null||b.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=dn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=CO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new vm);const s=this.events[t].add(r);return t==="change"?()=>{s(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ky)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Ky);return K1(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qr(e,t){return new kO(e,t)}const{schedule:Pm}=ow(queueMicrotask,!1),Bn={x:!1,y:!1};function Aw(){return Bn.x||Bn.y}function jO(e){return e==="x"||e==="y"?Bn[e]?null:(Bn[e]=!0,()=>{Bn[e]=!1}):Bn.x||Bn.y?null:(Bn.x=Bn.y=!0,()=>{Bn.x=Bn.y=!1})}function Rw(e,t){const r=SO(e),s=new AbortController,p={passive:!0,...t,signal:s.signal};return[r,p,()=>s.abort()]}function Zy(e){return!(e.pointerType==="touch"||Aw())}function TO(e,t,r={}){const[s,p,b]=Rw(e,r),S=d=>{if(!Zy(d))return;const{target:a}=d,l=t(a,d);if(typeof l!="function"||!a)return;const f=o=>{Zy(o)&&(l(o),a.removeEventListener("pointerleave",f))};a.addEventListener("pointerleave",f,p)};return s.forEach(d=>{d.addEventListener("pointerenter",S,p)}),b}const Pw=(e,t)=>t?e===t?!0:Pw(e,t.parentElement):!1,Lm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_O=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function NO(e){return _O.has(e.tagName)||e.tabIndex!==-1}const Mc=new WeakSet;function Qy(e){return t=>{t.key==="Enter"&&e(t)}}function Uh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const MO=(e,t)=>{const r=e.currentTarget;if(!r)return;const s=Qy(()=>{if(Mc.has(r))return;Uh(r,"down");const p=Qy(()=>{Uh(r,"up")}),b=()=>Uh(r,"cancel");r.addEventListener("keyup",p,t),r.addEventListener("blur",b,t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)};function Jy(e){return Lm(e)&&!Aw()}function EO(e,t,r={}){const[s,p,b]=Rw(e,r),S=d=>{const a=d.currentTarget;if(!Jy(d))return;Mc.add(a);const l=t(a,d),f=(u,g)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",c),Mc.has(a)&&Mc.delete(a),Jy(u)&&typeof l=="function"&&l(u,{success:g})},o=u=>{f(u,a===window||a===document||r.useGlobalTarget||Pw(a,u.target))},c=u=>{f(u,!1)};window.addEventListener("pointerup",o,p),window.addEventListener("pointercancel",c,p)};return s.forEach(d=>{(r.useGlobalTarget?window:d).addEventListener("pointerdown",S,p),Dw(d)&&(d.addEventListener("focus",l=>MO(l,p)),!NO(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),b}function Lw(e){return q1(e)&&"ownerSVGElement"in e}function OO(e){return Lw(e)&&e.tagName==="svg"}const Jt=e=>!!(e&&e.getVelocity),DO=[...Nw,Et,hr],AO=e=>DO.find(_w(e)),du=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class RO extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=r.offsetParent,p=Dw(s)&&s.offsetWidth||0,b=this.props.sizeRef.current;b.height=r.offsetHeight||0,b.width=r.offsetWidth||0,b.top=r.offsetTop,b.left=r.offsetLeft,b.right=p-b.width-b.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PO({children:e,isPresent:t,anchorX:r,root:s}){const p=N.useId(),b=N.useRef(null),S=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=N.useContext(du);return N.useInsertionEffect(()=>{const{width:a,height:l,top:f,left:o,right:c}=S.current;if(t||!b.current||!a||!l)return;const u=r==="left"?`left: ${o}`:`right: ${c}`;b.current.dataset.motionPopId=p;const g=document.createElement("style");d&&(g.nonce=d);const y=s??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${p}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${u}px !important;
            top: ${f}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),h.jsx(RO,{isPresent:t,childRef:b,sizeRef:S,children:N.cloneElement(e,{ref:b})})}const LO=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:p,presenceAffectsLayout:b,mode:S,anchorX:d,root:a})=>{const l=cu(FO),f=N.useId();let o=!0,c=N.useMemo(()=>(o=!1,{id:f,initial:t,isPresent:r,custom:p,onExitComplete:u=>{l.set(u,!0);for(const g of l.values())if(!g)return;s&&s()},register:u=>(l.set(u,!1),()=>l.delete(u))}),[r,l,s]);return b&&o&&(c={...c}),N.useMemo(()=>{l.forEach((u,g)=>l.set(g,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),S==="popLayout"&&(e=h.jsx(PO,{isPresent:r,anchorX:d,root:a,children:e})),h.jsx(uu.Provider,{value:c,children:e})};function FO(){return new Map}function Fw(e=!0){const t=N.useContext(uu);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:s,register:p}=t,b=N.useId();N.useEffect(()=>{if(e)return p(b)},[e]);const S=N.useCallback(()=>e&&s&&s(b),[b,s,e]);return!r&&s?[!1,S]:[!0]}const xc=e=>e.key||"";function eb(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const _i=({children:e,custom:t,initial:r=!0,onExitComplete:s,presenceAffectsLayout:p=!0,mode:b="sync",propagate:S=!1,anchorX:d="left",root:a})=>{const[l,f]=Fw(S),o=N.useMemo(()=>eb(e),[e]),c=S&&!l?[]:o.map(xc),u=N.useRef(!0),g=N.useRef(o),y=cu(()=>new Map),[x,w]=N.useState(o),[C,j]=N.useState(o);Y1(()=>{u.current=!1,g.current=o;for(let E=0;E<C.length;E++){const A=xc(C[E]);c.includes(A)?y.delete(A):y.get(A)!==!0&&y.set(A,!1)}},[C,c.length,c.join("-")]);const T=[];if(o!==x){let E=[...o];for(let A=0;A<C.length;A++){const R=C[A],H=xc(R);c.includes(H)||(E.splice(A,0,R),T.push(R))}return b==="wait"&&T.length&&(E=T),j(eb(E)),w(o),null}const{forceRender:M}=N.useContext(mm);return h.jsx(h.Fragment,{children:C.map(E=>{const A=xc(E),R=S&&!l?!1:o===C||c.includes(A),H=()=>{if(y.has(A))y.set(A,!0);else return;let K=!0;y.forEach(X=>{X||(K=!1)}),K&&(M==null||M(),j(g.current),S&&(f==null||f()),s&&s())};return h.jsx(LO,{isPresent:R,initial:!u.current||r?void 0:!1,custom:t,presenceAffectsLayout:p,mode:b,root:a,onExitComplete:R?void 0:H,anchorX:d,children:E},A)})})},zw=N.createContext({strict:!1}),tb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ws={};for(const e in tb)Ws[e]={isEnabled:t=>tb[e].some(r=>!!t[r])};function zO(e){for(const t in e)Ws[t]={...Ws[t],...e[t]}}const IO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||IO.has(e)}let Iw=e=>!Hc(e);function BO(e){typeof e=="function"&&(Iw=t=>t.startsWith("on")?!Hc(t):e(t))}try{BO(require("@emotion/is-prop-valid").default)}catch{}function VO(e,t,r){const s={};for(const p in e)p==="values"&&typeof e.values=="object"||(Iw(p)||r===!0&&Hc(p)||!t&&!Hc(p)||e.draggable&&p.startsWith("onDrag"))&&(s[p]=e[p]);return s}const hu=N.createContext({});function fu(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ao(e){return typeof e=="string"||Array.isArray(e)}const Fm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zm=["initial",...Fm];function mu(e){return fu(e.animate)||zm.some(t=>Ao(e[t]))}function Bw(e){return!!(mu(e)||e.variants)}function $O(e,t){if(mu(e)){const{initial:r,animate:s}=e;return{initial:r===!1||Ao(r)?r:void 0,animate:Ao(s)?s:void 0}}return e.inherit!==!1?t:{}}function HO(e){const{initial:t,animate:r}=$O(e,N.useContext(hu));return N.useMemo(()=>({initial:t,animate:r}),[nb(t),nb(r)])}function nb(e){return Array.isArray(e)?e.join(" "):e}const Ro={};function UO(e){for(const t in e)Ro[t]=e[t],Cm(t)&&(Ro[t].isCSSVariable=!0)}function Vw(e,{layout:t,layoutId:r}){return sa.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Ro[e]||e==="opacity")}const XO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YO=ra.length;function GO(e,t,r){let s="",p=!0;for(let b=0;b<YO;b++){const S=ra[b],d=e[S];if(d===void 0)continue;let a=!0;if(typeof d=="number"?a=d===(S.startsWith("scale")?1:0):a=parseFloat(d)===0,!a||r){const l=Ow(d,Rm[S]);if(!a){p=!1;const f=XO[S]||S;s+=`${f}(${l}) `}r&&(t[S]=l)}}return s=s.trim(),r?s=r(t,p?"":s):p&&(s="none"),s}function Im(e,t,r){const{style:s,vars:p,transformOrigin:b}=e;let S=!1,d=!1;for(const a in t){const l=t[a];if(sa.has(a)){S=!0;continue}else if(Cm(a)){p[a]=l;continue}else{const f=Ow(l,Rm[a]);a.startsWith("origin")?(d=!0,b[a]=f):s[a]=f}}if(t.transform||(S||r?s.transform=GO(t,e.transform,r):s.transform&&(s.transform="none")),d){const{originX:a="50%",originY:l="50%",originZ:f=0}=b;s.transformOrigin=`${a} ${l} ${f}`}}const Bm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $w(e,t,r){for(const s in t)!Jt(t[s])&&!Vw(s,r)&&(e[s]=t[s])}function qO({transformTemplate:e},t){return N.useMemo(()=>{const r=Bm();return Im(r,t,e),Object.assign({},r.vars,r.style)},[t])}function WO(e,t){const r=e.style||{},s={};return $w(s,r,e),Object.assign(s,qO(e,t)),s}function KO(e,t){const r={},s=WO(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const ZO={offset:"stroke-dashoffset",array:"stroke-dasharray"},QO={offset:"strokeDashoffset",array:"strokeDasharray"};function JO(e,t,r=1,s=0,p=!0){e.pathLength=1;const b=p?ZO:QO;e[b.offset]=Xe.transform(-s);const S=Xe.transform(t),d=Xe.transform(r);e[b.array]=`${S} ${d}`}function Hw(e,{attrX:t,attrY:r,attrScale:s,pathLength:p,pathSpacing:b=1,pathOffset:S=0,...d},a,l,f){if(Im(e,d,l),a){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:o,style:c}=e;o.transform&&(c.transform=o.transform,delete o.transform),(c.transform||o.transformOrigin)&&(c.transformOrigin=o.transformOrigin??"50% 50%",delete o.transformOrigin),c.transform&&(c.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete o.transformBox),t!==void 0&&(o.x=t),r!==void 0&&(o.y=r),s!==void 0&&(o.scale=s),p!==void 0&&JO(o,p,b,S,!1)}const Uw=()=>({...Bm(),attrs:{}}),Xw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function eD(e,t,r,s){const p=N.useMemo(()=>{const b=Uw();return Hw(b,t,Xw(s),e.transformTemplate,e.style),{...b.attrs,style:{...b.style}}},[t]);if(e.style){const b={};$w(b,e.style,e),p.style={...b,...p.style}}return p}const tD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vm(e){return typeof e!="string"||e.includes("-")?!1:!!(tD.indexOf(e)>-1||/[A-Z]/u.test(e))}function nD(e,t,r,{latestValues:s},p,b=!1){const d=(Vm(e)?eD:KO)(t,s,p,e),a=VO(t,typeof e=="string",b),l=e!==N.Fragment?{...a,...d,ref:r}:{},{children:f}=t,o=N.useMemo(()=>Jt(f)?f.get():f,[f]);return N.createElement(e,{...l,children:o})}function ib(e){const t=[{},{}];return e==null||e.values.forEach((r,s)=>{t[0][s]=r.get(),t[1][s]=r.getVelocity()}),t}function $m(e,t,r,s){if(typeof t=="function"){const[p,b]=ib(s);t=t(r!==void 0?r:e.custom,p,b)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[p,b]=ib(s);t=t(r!==void 0?r:e.custom,p,b)}return t}function Ec(e){return Jt(e)?e.get():e}function iD({scrapeMotionValuesFromProps:e,createRenderState:t},r,s,p){return{latestValues:rD(r,s,p,e),renderState:t()}}function rD(e,t,r,s){const p={},b=s(e,{});for(const c in b)p[c]=Ec(b[c]);let{initial:S,animate:d}=e;const a=mu(e),l=Bw(e);t&&l&&!a&&e.inherit!==!1&&(S===void 0&&(S=t.initial),d===void 0&&(d=t.animate));let f=r?r.initial===!1:!1;f=f||S===!1;const o=f?d:S;if(o&&typeof o!="boolean"&&!fu(o)){const c=Array.isArray(o)?o:[o];for(let u=0;u<c.length;u++){const g=$m(e,c[u]);if(g){const{transitionEnd:y,transition:x,...w}=g;for(const C in w){let j=w[C];if(Array.isArray(j)){const T=f?j.length-1:0;j=j[T]}j!==null&&(p[C]=j)}for(const C in y)p[C]=y[C]}}}return p}const Yw=e=>(t,r)=>{const s=N.useContext(hu),p=N.useContext(uu),b=()=>iD(e,t,s,p);return r?b():cu(b)};function Hm(e,t,r){var b;const{style:s}=e,p={};for(const S in s)(Jt(s[S])||t.style&&Jt(t.style[S])||Vw(S,e)||((b=r==null?void 0:r.getValue(S))==null?void 0:b.liveStyle)!==void 0)&&(p[S]=s[S]);return p}const sD=Yw({scrapeMotionValuesFromProps:Hm,createRenderState:Bm});function Gw(e,t,r){const s=Hm(e,t,r);for(const p in e)if(Jt(e[p])||Jt(t[p])){const b=ra.indexOf(p)!==-1?"attr"+p.charAt(0).toUpperCase()+p.substring(1):p;s[b]=e[p]}return s}const aD=Yw({scrapeMotionValuesFromProps:Gw,createRenderState:Uw}),oD=Symbol.for("motionComponentSymbol");function Bs(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function lD(e,t,r){return N.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):Bs(r)&&(r.current=s))},[t])}const Um=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cD="framerAppearId",qw="data-"+Um(cD),Ww=N.createContext({});function uD(e,t,r,s,p){var y,x;const{visualElement:b}=N.useContext(hu),S=N.useContext(zw),d=N.useContext(uu),a=N.useContext(du).reducedMotion,l=N.useRef(null);s=s||S.renderer,!l.current&&s&&(l.current=s(e,{visualState:t,parent:b,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:a}));const f=l.current,o=N.useContext(Ww);f&&!f.projection&&p&&(f.type==="html"||f.type==="svg")&&dD(l.current,r,p,o);const c=N.useRef(!1);N.useInsertionEffect(()=>{f&&c.current&&f.update(r,d)});const u=r[qw],g=N.useRef(!!u&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,u))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,u)));return Y1(()=>{f&&(c.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),g.current&&f.animationState&&f.animationState.animateChanges())}),N.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,u)}),g.current=!1),f.enteringChildren=void 0)}),f}function dD(e,t,r,s){const{layoutId:p,layout:b,drag:S,dragConstraints:d,layoutScroll:a,layoutRoot:l,layoutCrossfade:f}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Kw(e.parent)),e.projection.setOptions({layoutId:p,layout:b,alwaysMeasureLayout:!!S||d&&Bs(d),visualElement:e,animationType:typeof b=="string"?b:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:a,layoutRoot:l})}function Kw(e){if(e)return e.options.allowProjection!==!1?e.projection:Kw(e.parent)}function Xh(e,{forwardMotionProps:t=!1}={},r,s){r&&zO(r);const p=Vm(e)?aD:sD;function b(d,a){let l;const f={...N.useContext(du),...d,layoutId:hD(d)},{isStatic:o}=f,c=HO(d),u=p(d,o);if(!o&&gm){fD();const g=mD(f);l=g.MeasureLayout,c.visualElement=uD(e,u,f,s,g.ProjectionNode)}return h.jsxs(hu.Provider,{value:c,children:[l&&c.visualElement?h.jsx(l,{visualElement:c.visualElement,...f}):null,nD(e,d,lD(u,c.visualElement,a),u,o,t)]})}b.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const S=N.forwardRef(b);return S[oD]=e,S}function hD({layoutId:e}){const t=N.useContext(mm).id;return t&&e!==void 0?t+"-"+e:e}function fD(e,t){N.useContext(zw).strict}function mD(e){const{drag:t,layout:r}=Ws;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function gD(e,t){if(typeof Proxy>"u")return Xh;const r=new Map,s=(b,S)=>Xh(b,S,e,t),p=(b,S)=>s(b,S);return new Proxy(p,{get:(b,S)=>S==="create"?s:(r.has(S)||r.set(S,Xh(S,void 0,e,t)),r.get(S))})}function Zw({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function pD({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xD(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Yh(e){return e===void 0||e===1}function Lf({scale:e,scaleX:t,scaleY:r}){return!Yh(e)||!Yh(t)||!Yh(r)}function Pr(e){return Lf(e)||Qw(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Qw(e){return rb(e.x)||rb(e.y)}function rb(e){return e&&e!=="0%"}function Uc(e,t,r){const s=e-r,p=t*s;return r+p}function sb(e,t,r,s,p){return p!==void 0&&(e=Uc(e,p,s)),Uc(e,r,s)+t}function Ff(e,t=0,r=1,s,p){e.min=sb(e.min,t,r,s,p),e.max=sb(e.max,t,r,s,p)}function Jw(e,{x:t,y:r}){Ff(e.x,t.translate,t.scale,t.originPoint),Ff(e.y,r.translate,r.scale,r.originPoint)}const ab=.999999999999,ob=1.0000000000001;function yD(e,t,r,s=!1){const p=r.length;if(!p)return;t.x=t.y=1;let b,S;for(let d=0;d<p;d++){b=r[d],S=b.projectionDelta;const{visualElement:a}=b.options;a&&a.props.style&&a.props.style.display==="contents"||(s&&b.options.layoutScroll&&b.scroll&&b!==b.root&&$s(e,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),S&&(t.x*=S.x.scale,t.y*=S.y.scale,Jw(e,S)),s&&Pr(b.latestValues)&&$s(e,b.latestValues))}t.x<ob&&t.x>ab&&(t.x=1),t.y<ob&&t.y>ab&&(t.y=1)}function Vs(e,t){e.min=e.min+t,e.max=e.max+t}function lb(e,t,r,s,p=.5){const b=pt(e.min,e.max,p);Ff(e,t,r,b,s)}function $s(e,t){lb(e.x,t.x,t.scaleX,t.scale,t.originX),lb(e.y,t.y,t.scaleY,t.scale,t.originY)}function eS(e,t){return Zw(xD(e.getBoundingClientRect(),t))}function bD(e,t,r){const s=eS(e,r),{scroll:p}=t;return p&&(Vs(s.x,p.offset.x),Vs(s.y,p.offset.y)),s}const cb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hs=()=>({x:cb(),y:cb()}),ub=()=>({min:0,max:0}),kt=()=>({x:ub(),y:ub()}),zf={current:null},tS={current:!1};function vD(){if(tS.current=!0,!!gm)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zf.current=e.matches;e.addEventListener("change",t),t()}else zf.current=!1}const wD=new WeakMap;function SD(e,t,r){for(const s in t){const p=t[s],b=r[s];if(Jt(p))e.addValue(s,p);else if(Jt(b))e.addValue(s,qr(p,{owner:e}));else if(b!==p)if(e.hasValue(s)){const S=e.getValue(s);S.liveStyle===!0?S.jump(p):S.hasAnimated||S.set(p)}else{const S=e.getStaticValue(s);e.addValue(s,qr(S!==void 0?S:p,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const db=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class CD{scrapeMotionValuesFromProps(t,r,s){return{}}constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:p,blockInitialAnimation:b,visualState:S},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const c=dn.now();this.renderScheduledAt<c&&(this.renderScheduledAt=c,ft.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=S;this.latestValues=a,this.baseTarget={...a},this.initialValues=r.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=p,this.options=d,this.blockInitialAnimation=!!b,this.isControllingVariants=mu(r),this.isVariantNode=Bw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...o}=this.scrapeMotionValuesFromProps(r,{},this);for(const c in o){const u=o[c];a[c]!==void 0&&Jt(u)&&u.set(a[c])}}mount(t){var r;this.current=t,wD.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,p)=>this.bindToMotionValue(p,s)),tS.current||vD(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zf.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=sa.has(t);s&&this.onBindTransform&&this.onBindTransform();const p=r.on("change",S=>{this.latestValues[t]=S,this.props.onUpdate&&ft.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let b;window.MotionCheckAppearSync&&(b=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{p(),b&&b(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ws){const r=Ws[t];if(!r)continue;const{isEnabled:s,Feature:p}=r;if(!this.features[t]&&p&&s(this.props)&&(this.features[t]=new p(this)),this.features[t]){const b=this.features[t];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<db.length;s++){const p=db[s];this.propEventSubscriptions[p]&&(this.propEventSubscriptions[p](),delete this.propEventSubscriptions[p]);const b="on"+p,S=t[b];S&&(this.propEventSubscriptions[p]=this.on(p,S))}this.prevMotionValues=SD(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const s=this.values.get(t);r!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=qr(r===null?void 0:r,{owner:this}),this.addValue(t,s)),s}readValue(t,r){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(G1(s)||W1(s))?s=parseFloat(s):!AO(s)&&hr.test(r)&&(s=Ew(t,r)),this.setBaseTarget(t,Jt(s)?s.get():s)),Jt(s)?s.get():s}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var b;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const S=$m(this.props,r,(b=this.presenceContext)==null?void 0:b.custom);S&&(s=S[t])}if(r&&s!==void 0)return s;const p=this.getBaseTargetFromProps(this.props,t);return p!==void 0&&!Jt(p)?p:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new vm),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Pm.render(this.render)}}class nS extends CD{constructor(){super(...arguments),this.KeyframeResolver=wO}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Jt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function iS(e,{style:t,vars:r},s,p){const b=e.style;let S;for(S in t)b[S]=t[S];p==null||p.applyProjectionStyles(b,s);for(S in r)b.setProperty(S,r[S])}function kD(e){return window.getComputedStyle(e)}class jD extends nS{constructor(){super(...arguments),this.type="html",this.renderInstance=iS}readValueFromInstance(t,r){var s;if(sa.has(r))return(s=this.projection)!=null&&s.isProjecting?Mf(r):BE(t,r);{const p=kD(t),b=(Cm(r)?p.getPropertyValue(r):p[r])||0;return typeof b=="string"?b.trim():b}}measureInstanceViewportBox(t,{transformPagePoint:r}){return eS(t,r)}build(t,r,s){Im(t,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,r,s){return Hm(t,r,s)}}const rS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TD(e,t,r,s){iS(e,t,void 0,s);for(const p in t.attrs)e.setAttribute(rS.has(p)?p:Um(p),t.attrs[p])}class _D extends nS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kt}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(sa.has(r)){const s=Mw(r);return s&&s.default||0}return r=rS.has(r)?r:Um(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,s){return Gw(t,r,s)}build(t,r,s){Hw(t,r,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,r,s,p){TD(t,r,s,p)}mount(t){this.isSVGTag=Xw(t.tagName),super.mount(t)}}const ND=(e,t)=>Vm(e)?new _D(t):new jD(t,{allowProjection:e!==N.Fragment});function Ys(e,t,r){const s=e.getProps();return $m(s,t,r!==void 0?r:s.custom,e)}const If=e=>Array.isArray(e);function MD(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,qr(r))}function ED(e){return If(e)?e[e.length-1]||0:e}function OD(e,t){const r=Ys(e,t);let{transitionEnd:s={},transition:p={},...b}=r||{};b={...b,...s};for(const S in b){const d=ED(b[S]);MD(e,S,d)}}function DD(e){return!!(Jt(e)&&e.add)}function Bf(e,t){const r=e.getValue("willChange");if(DD(r))return r.add(t);if(!r&&Ri.WillChange){const s=new Ri.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function sS(e){return e.props[qw]}const AD=e=>e!==null;function RD(e,{repeat:t,repeatType:r="loop"},s){const p=e.filter(AD),b=t&&r!=="loop"&&t%2===1?0:p.length-1;return p[b]}const PD={type:"spring",stiffness:500,damping:25,restSpeed:10},LD=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),FD={type:"keyframes",duration:.8},zD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ID=(e,{keyframes:t})=>t.length>2?FD:sa.has(e)?e.startsWith("scale")?LD(t[1]):PD:zD;function BD({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:p,repeat:b,repeatType:S,repeatDelay:d,from:a,elapsed:l,...f}){return!!Object.keys(f).length}const Xm=(e,t,r,s={},p,b)=>S=>{const d=Am(s,e)||{},a=d.delay||s.delay||0;let{elapsed:l=0}=s;l=l-ni(a);const f={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...d,delay:-l,onUpdate:c=>{t.set(c),d.onUpdate&&d.onUpdate(c)},onComplete:()=>{S(),d.onComplete&&d.onComplete()},name:e,motionValue:t,element:b?void 0:p};BD(d)||Object.assign(f,ID(e,f)),f.duration&&(f.duration=ni(f.duration)),f.repeatDelay&&(f.repeatDelay=ni(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let o=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Rf(f),f.delay===0&&(o=!0)),(Ri.instantAnimations||Ri.skipAnimations)&&(o=!0,Rf(f),f.delay=0),f.allowFlatten=!d.type&&!d.ease,o&&!b&&t.get()!==void 0){const c=RD(f.keyframes,d);if(c!==void 0){ft.update(()=>{f.onUpdate(c),f.onComplete()});return}}return d.isSync?new Om(f):new cO(f)};function VD({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function aS(e,t,{delay:r=0,transitionOverride:s,type:p}={}){let{transition:b=e.getDefaultTransition(),transitionEnd:S,...d}=t;s&&(b=s);const a=[],l=p&&e.animationState&&e.animationState.getState()[p];for(const f in d){const o=e.getValue(f,e.latestValues[f]??null),c=d[f];if(c===void 0||l&&VD(l,f))continue;const u={delay:r,...Am(b||{},f)},g=o.get();if(g!==void 0&&!o.isAnimating&&!Array.isArray(c)&&c===g&&!u.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const w=sS(e);if(w){const C=window.MotionHandoffAnimation(w,f,ft);C!==null&&(u.startTime=C,y=!0)}}Bf(e,f),o.start(Xm(f,o,c,e.shouldReduceMotion&&Tw.has(f)?{type:!1}:u,e,y));const x=o.animation;x&&a.push(x)}return S&&Promise.all(a).then(()=>{ft.update(()=>{S&&OD(e,S)})}),a}function oS(e,t,r,s=0,p=1){const b=Array.from(e).sort((l,f)=>l.sortNodePosition(f)).indexOf(t),S=e.size,d=(S-1)*s;return typeof r=="function"?r(b,S):p===1?b*s:d-b*s}function Vf(e,t,r={}){var a;const s=Ys(e,t,r.type==="exit"?(a=e.presenceContext)==null?void 0:a.custom:void 0);let{transition:p=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(p=r.transitionOverride);const b=s?()=>Promise.all(aS(e,s,r)):()=>Promise.resolve(),S=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:f=0,staggerChildren:o,staggerDirection:c}=p;return $D(e,t,l,f,o,c,r)}:()=>Promise.resolve(),{when:d}=p;if(d){const[l,f]=d==="beforeChildren"?[b,S]:[S,b];return l().then(()=>f())}else return Promise.all([b(),S(r.delay)])}function $D(e,t,r=0,s=0,p=0,b=1,S){const d=[];for(const a of e.variantChildren)a.notify("AnimationStart",t),d.push(Vf(a,t,{...S,delay:r+(typeof s=="function"?0:s)+oS(e.variantChildren,a,s,p,b)}).then(()=>a.notify("AnimationComplete",t)));return Promise.all(d)}function HD(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const p=t.map(b=>Vf(e,b,r));s=Promise.all(p)}else if(typeof t=="string")s=Vf(e,t,r);else{const p=typeof t=="function"?Ys(e,t,r.custom):t;s=Promise.all(aS(e,p,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}function lS(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}const UD=zm.length;function cS(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?cS(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<UD;r++){const s=zm[r],p=e.props[s];(Ao(p)||p===!1)&&(t[s]=p)}return t}const XD=[...Fm].reverse(),YD=Fm.length;function GD(e){return t=>Promise.all(t.map(({animation:r,options:s})=>HD(e,r,s)))}function qD(e){let t=GD(e),r=hb(),s=!0;const p=a=>(l,f)=>{var c;const o=Ys(e,f,a==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);if(o){const{transition:u,transitionEnd:g,...y}=o;l={...l,...y,...g}}return l};function b(a){t=a(e)}function S(a){const{props:l}=e,f=cS(e.parent)||{},o=[],c=new Set;let u={},g=1/0;for(let x=0;x<YD;x++){const w=XD[x],C=r[w],j=l[w]!==void 0?l[w]:f[w],T=Ao(j),M=w===a?C.isActive:null;M===!1&&(g=x);let E=j===f[w]&&j!==l[w]&&T;if(E&&s&&e.manuallyAnimateOnMount&&(E=!1),C.protectedKeys={...u},!C.isActive&&M===null||!j&&!C.prevProp||fu(j)||typeof j=="boolean")continue;const A=WD(C.prevProp,j);let R=A||w===a&&C.isActive&&!E&&T||x>g&&T,H=!1;const K=Array.isArray(j)?j:[j];let X=K.reduce(p(w),{});M===!1&&(X={});const{prevResolvedValues:ne={}}=C,de={...ne,...X},se=$=>{R=!0,c.has($)&&(H=!0,c.delete($)),C.needsAnimating[$]=!0;const V=e.getValue($);V&&(V.liveStyle=!1)};for(const $ in de){const V=X[$],D=ne[$];if(u.hasOwnProperty($))continue;let O=!1;If(V)&&If(D)?O=!lS(V,D):O=V!==D,O?V!=null?se($):c.add($):V!==void 0&&c.has($)?se($):C.protectedKeys[$]=!0}C.prevProp=j,C.prevResolvedValues=X,C.isActive&&(u={...u,...X}),s&&e.blockInitialAnimation&&(R=!1);const q=E&&A;R&&(!q||H)&&o.push(...K.map($=>{const V={type:w};if(typeof $=="string"&&s&&!q&&e.manuallyAnimateOnMount&&e.parent){const{parent:D}=e,O=Ys(D,$);if(D.enteringChildren&&O){const{delayChildren:L}=O.transition||{};V.delay=oS(D.enteringChildren,e,L)}}return{animation:$,options:V}}))}if(c.size){const x={};if(typeof l.initial!="boolean"){const w=Ys(e,Array.isArray(l.initial)?l.initial[0]:l.initial);w&&w.transition&&(x.transition=w.transition)}c.forEach(w=>{const C=e.getBaseTarget(w),j=e.getValue(w);j&&(j.liveStyle=!0),x[w]=C??null}),o.push({animation:x})}let y=!!o.length;return s&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(o):Promise.resolve()}function d(a,l){var o;if(r[a].isActive===l)return Promise.resolve();(o=e.variantChildren)==null||o.forEach(c=>{var u;return(u=c.animationState)==null?void 0:u.setActive(a,l)}),r[a].isActive=l;const f=S(a);for(const c in r)r[c].protectedKeys={};return f}return{animateChanges:S,setActive:d,setAnimateFunction:b,getState:()=>r,reset:()=>{r=hb(),s=!0}}}function WD(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!lS(t,e):!1}function Rr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hb(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}class mr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class KD extends mr{constructor(t){super(t),t.animationState||(t.animationState=qD(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();fu(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let ZD=0;class QD extends mr{constructor(){super(...arguments),this.id=ZD++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const p=this.node.animationState.setActive("exit",!t);r&&!t&&p.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const JD={animation:{Feature:KD},exit:{Feature:QD}};function Po(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}function Qo(e){return{point:{x:e.pageX,y:e.pageY}}}const eA=e=>t=>Lm(t)&&e(t,Qo(t));function yo(e,t,r,s){return Po(e,t,eA(r),s)}const uS=1e-4,tA=1-uS,nA=1+uS,dS=.01,iA=0-dS,rA=0+dS;function rn(e){return e.max-e.min}function sA(e,t,r){return Math.abs(e-t)<=r}function fb(e,t,r,s=.5){e.origin=s,e.originPoint=pt(t.min,t.max,e.origin),e.scale=rn(r)/rn(t),e.translate=pt(r.min,r.max,e.origin)-e.originPoint,(e.scale>=tA&&e.scale<=nA||isNaN(e.scale))&&(e.scale=1),(e.translate>=iA&&e.translate<=rA||isNaN(e.translate))&&(e.translate=0)}function bo(e,t,r,s){fb(e.x,t.x,r.x,s?s.originX:void 0),fb(e.y,t.y,r.y,s?s.originY:void 0)}function mb(e,t,r){e.min=r.min+t.min,e.max=e.min+rn(t)}function aA(e,t,r){mb(e.x,t.x,r.x),mb(e.y,t.y,r.y)}function gb(e,t,r){e.min=t.min-r.min,e.max=e.min+rn(t)}function vo(e,t,r){gb(e.x,t.x,r.x),gb(e.y,t.y,r.y)}function Dn(e){return[e("x"),e("y")]}const hS=({current:e})=>e?e.ownerDocument.defaultView:null,pb=(e,t)=>Math.abs(e-t);function oA(e,t){const r=pb(e.x,t.x),s=pb(e.y,t.y);return Math.sqrt(r**2+s**2)}class fS{constructor(t,r,{transformPagePoint:s,contextWindow:p=window,dragSnapToOrigin:b=!1,distanceThreshold:S=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=qh(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,g=oA(c.offset,{x:0,y:0})>=this.distanceThreshold;if(!u&&!g)return;const{point:y}=c,{timestamp:x}=Gt;this.history.push({...y,timestamp:x});const{onStart:w,onMove:C}=this.handlers;u||(w&&w(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,c)},this.handlePointerMove=(c,u)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=Gh(u,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(c,u)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=qh(c.type==="pointercancel"?this.lastMoveEventInfo:Gh(u,this.transformPagePoint),this.history);this.startEvent&&g&&g(c,w),y&&y(c,w)},!Lm(t))return;this.dragSnapToOrigin=b,this.handlers=r,this.transformPagePoint=s,this.distanceThreshold=S,this.contextWindow=p||window;const d=Qo(t),a=Gh(d,this.transformPagePoint),{point:l}=a,{timestamp:f}=Gt;this.history=[{...l,timestamp:f}];const{onSessionStart:o}=r;o&&o(t,qh(a,this.history)),this.removeListeners=Wo(yo(this.contextWindow,"pointermove",this.handlePointerMove),yo(this.contextWindow,"pointerup",this.handlePointerUp),yo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Gh(e,t){return t?{point:t(e.point)}:e}function xb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qh({point:e},t){return{point:e,delta:xb(e,mS(t)),offset:xb(e,lA(t)),velocity:cA(t,.1)}}function lA(e){return e[0]}function mS(e){return e[e.length-1]}function cA(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const p=mS(e);for(;r>=0&&(s=e[r],!(p.timestamp-s.timestamp>ni(t)));)r--;if(!s)return{x:0,y:0};const b=ii(p.timestamp-s.timestamp);if(b===0)return{x:0,y:0};const S={x:(p.x-s.x)/b,y:(p.y-s.y)/b};return S.x===1/0&&(S.x=0),S.y===1/0&&(S.y=0),S}function uA(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?pt(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?pt(r,e,s.max):Math.min(e,r)),e}function yb(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function dA(e,{top:t,left:r,bottom:s,right:p}){return{x:yb(e.x,r,p),y:yb(e.y,t,s)}}function bb(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function hA(e,t){return{x:bb(e.x,t.x),y:bb(e.y,t.y)}}function fA(e,t){let r=.5;const s=rn(e),p=rn(t);return p>s?r=Eo(t.min,t.max-s,e.min):s>p&&(r=Eo(e.min,e.max-p,t.min)),Ai(0,1,r)}function mA(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const $f=.35;function gA(e=$f){return e===!1?e=0:e===!0&&(e=$f),{x:vb(e,"left","right"),y:vb(e,"top","bottom")}}function vb(e,t,r){return{min:wb(e,t),max:wb(e,r)}}function wb(e,t){return typeof e=="number"?e:e[t]||0}const pA=new WeakMap;class xA{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:s}={}){const{presenceContext:p}=this.visualElement;if(p&&p.isPresent===!1)return;const b=o=>{const{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Qo(o).point)},S=(o,c)=>{const{drag:u,dragPropagation:g,onDragStart:y}=this.getProps();if(u&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jO(u),!this.openDragLock))return;this.latestPointerEvent=o,this.latestPanInfo=c,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dn(w=>{let C=this.getAxisMotionValue(w).get()||0;if(ri.test(C)){const{projection:j}=this.visualElement;if(j&&j.layout){const T=j.layout.layoutBox[w];T&&(C=rn(T)*(parseFloat(C)/100))}}this.originPoint[w]=C}),y&&ft.postRender(()=>y(o,c)),Bf(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},d=(o,c)=>{this.latestPointerEvent=o,this.latestPanInfo=c;const{dragPropagation:u,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:w}=c;if(g&&this.currentDirection===null){this.currentDirection=yA(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",c.point,w),this.updateAxis("y",c.point,w),this.visualElement.render(),x&&x(o,c)},a=(o,c)=>{this.latestPointerEvent=o,this.latestPanInfo=c,this.stop(o,c),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Dn(o=>{var c;return this.getAnimationState(o)==="paused"&&((c=this.getAxisMotionValue(o).animation)==null?void 0:c.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new fS(t,{onSessionStart:b,onStart:S,onMove:d,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:hS(this.visualElement)})}stop(t,r){const s=t||this.latestPointerEvent,p=r||this.latestPanInfo,b=this.isDragging;if(this.cancel(),!b||!p||!s)return;const{velocity:S}=p;this.startAnimation(S);const{onDragEnd:d}=this.getProps();d&&ft.postRender(()=>d(s,p))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:p}=this.getProps();if(!s||!yc(t,p,this.currentDirection))return;const b=this.getAxisMotionValue(t);let S=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(S=uA(S,this.constraints[t],this.elastic[t])),b.set(S)}resolveConstraints(){var b;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(b=this.visualElement.projection)==null?void 0:b.layout,p=this.constraints;t&&Bs(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=dA(s.layoutBox,t):this.constraints=!1,this.elastic=gA(r),p!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Dn(S=>{this.constraints!==!1&&this.getAxisMotionValue(S)&&(this.constraints[S]=mA(s.layoutBox[S],this.constraints[S]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Bs(t))return!1;const s=t.current,{projection:p}=this.visualElement;if(!p||!p.layout)return!1;const b=bD(s,p.root,this.visualElement.getTransformPagePoint());let S=hA(p.layout.layoutBox,b);if(r){const d=r(pD(S));this.hasMutatedConstraints=!!d,d&&(S=Zw(d))}return S}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:p,dragTransition:b,dragSnapToOrigin:S,onDragTransitionEnd:d}=this.getProps(),a=this.constraints||{},l=Dn(f=>{if(!yc(f,r,this.currentDirection))return;let o=a&&a[f]||{};S&&(o={min:0,max:0});const c=p?200:1e6,u=p?40:1e7,g={type:"inertia",velocity:s?t[f]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...b,...o};return this.startAxisValueAnimation(f,g)});return Promise.all(l).then(d)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return Bf(this.visualElement,t),s.start(Xm(t,s,0,r,this.visualElement,!1))}stopAnimation(){Dn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Dn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),p=s[r];return p||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Dn(r=>{const{drag:s}=this.getProps();if(!yc(r,s,this.currentDirection))return;const{projection:p}=this.visualElement,b=this.getAxisMotionValue(r);if(p&&p.layout){const{min:S,max:d}=p.layout.layoutBox[r];b.set(t[r]-pt(S,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Bs(r)||!s||!this.constraints)return;this.stopAnimation();const p={x:0,y:0};Dn(S=>{const d=this.getAxisMotionValue(S);if(d&&this.constraints!==!1){const a=d.get();p[S]=fA({min:a,max:a},this.constraints[S])}});const{transformTemplate:b}=this.visualElement.getProps();this.visualElement.current.style.transform=b?b({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Dn(S=>{if(!yc(S,t,null))return;const d=this.getAxisMotionValue(S),{min:a,max:l}=this.constraints[S];d.set(pt(a,l,p[S]))})}addListeners(){if(!this.visualElement.current)return;pA.set(this.visualElement,this);const t=this.visualElement.current,r=yo(t,"pointerdown",a=>{const{drag:l,dragListener:f=!0}=this.getProps();l&&f&&this.start(a)}),s=()=>{const{dragConstraints:a}=this.getProps();Bs(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:p}=this.visualElement,b=p.addEventListener("measure",s);p&&!p.layout&&(p.root&&p.root.updateScroll(),p.updateLayout()),ft.read(s);const S=Po(window,"resize",()=>this.scalePositionWithinConstraints()),d=p.addEventListener("didUpdate",({delta:a,hasLayoutChanged:l})=>{this.isDragging&&l&&(Dn(f=>{const o=this.getAxisMotionValue(f);o&&(this.originPoint[f]+=a[f].translate,o.set(o.get()+a[f].translate))}),this.visualElement.render())});return()=>{S(),r(),b(),d&&d()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:p=!1,dragConstraints:b=!1,dragElastic:S=$f,dragMomentum:d=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:p,dragConstraints:b,dragElastic:S,dragMomentum:d}}}function yc(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function yA(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class bA extends mr{constructor(t){super(t),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new xA(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sb=e=>(t,r)=>{e&&ft.postRender(()=>e(t,r))};class vA extends mr{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(t){this.session=new fS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:p}=this.node.getProps();return{onSessionStart:Sb(t),onStart:Sb(r),onMove:s,onEnd:(b,S)=>{delete this.session,p&&ft.postRender(()=>p(b,S))}}}mount(){this.removePointerDownListener=yo(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Oc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ao={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Xe.test(e))e=parseFloat(e);else return e;const r=Cb(e,t.target.x),s=Cb(e,t.target.y);return`${r}% ${s}%`}},wA={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,p=hr.parse(e);if(p.length>5)return s;const b=hr.createTransformer(e),S=typeof p[0]!="number"?1:0,d=r.x.scale*t.x,a=r.y.scale*t.y;p[0+S]/=d,p[1+S]/=a;const l=pt(d,a,.5);return typeof p[2+S]=="number"&&(p[2+S]/=l),typeof p[3+S]=="number"&&(p[3+S]/=l),b(p)}};let Wh=!1;class SA extends N.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:p}=this.props,{projection:b}=t;UO(CA),b&&(r.group&&r.group.add(b),s&&s.register&&p&&s.register(b),Wh&&b.root.didUpdate(),b.addEventListener("animationComplete",()=>{this.safeToRemove()}),b.setOptions({...b.options,onExitComplete:()=>this.safeToRemove()})),Oc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:p,isPresent:b}=this.props,{projection:S}=s;return S&&(S.isPresent=b,Wh=!0,p||t.layoutDependency!==r||r===void 0||t.isPresent!==b?S.willUpdate():this.safeToRemove(),t.isPresent!==b&&(b?S.promote():S.relegate()||ft.postRender(()=>{const d=S.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Pm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:p}=t;Wh=!0,p&&(p.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(p),s&&s.deregister&&s.deregister(p))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gS(e){const[t,r]=Fw(),s=N.useContext(mm);return h.jsx(SA,{...e,layoutGroup:s,switchLayoutGroup:N.useContext(Ww),isPresent:t,safeToRemove:r})}const CA={borderRadius:{...ao,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ao,borderTopRightRadius:ao,borderBottomLeftRadius:ao,borderBottomRightRadius:ao,boxShadow:wA};function kA(e,t,r){const s=Jt(e)?e:qr(e);return s.start(Xm("",s,t,r)),s.animation}const jA=(e,t)=>e.depth-t.depth;class TA{constructor(){this.children=[],this.isDirty=!1}add(t){pm(this.children,t),this.isDirty=!0}remove(t){xm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jA),this.isDirty=!1,this.children.forEach(t)}}function _A(e,t){const r=dn.now(),s=({timestamp:p})=>{const b=p-r;b>=t&&(dr(s),e(b-t))};return ft.setup(s,!0),()=>dr(s)}const pS=["TopLeft","TopRight","BottomLeft","BottomRight"],NA=pS.length,kb=e=>typeof e=="string"?parseFloat(e):e,jb=e=>typeof e=="number"||Xe.test(e);function MA(e,t,r,s,p,b){p?(e.opacity=pt(0,r.opacity??1,EA(s)),e.opacityExit=pt(t.opacity??1,0,OA(s))):b&&(e.opacity=pt(t.opacity??1,r.opacity??1,s));for(let S=0;S<NA;S++){const d=`border${pS[S]}Radius`;let a=Tb(t,d),l=Tb(r,d);if(a===void 0&&l===void 0)continue;a||(a=0),l||(l=0),a===0||l===0||jb(a)===jb(l)?(e[d]=Math.max(pt(kb(a),kb(l),s),0),(ri.test(l)||ri.test(a))&&(e[d]+="%")):e[d]=l}(t.rotate||r.rotate)&&(e.rotate=pt(t.rotate||0,r.rotate||0,s))}function Tb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const EA=xS(0,.5,iw),OA=xS(.5,.95,Rn);function xS(e,t,r){return s=>s<e?0:s>t?1:r(Eo(e,t,s))}function _b(e,t){e.min=t.min,e.max=t.max}function On(e,t){_b(e.x,t.x),_b(e.y,t.y)}function Nb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Mb(e,t,r,s,p){return e-=t,e=Uc(e,1/r,s),p!==void 0&&(e=Uc(e,1/p,s)),e}function DA(e,t=0,r=1,s=.5,p,b=e,S=e){if(ri.test(t)&&(t=parseFloat(t),t=pt(S.min,S.max,t/100)-S.min),typeof t!="number")return;let d=pt(b.min,b.max,s);e===b&&(d-=t),e.min=Mb(e.min,t,r,d,p),e.max=Mb(e.max,t,r,d,p)}function Eb(e,t,[r,s,p],b,S){DA(e,t[r],t[s],t[p],t.scale,b,S)}const AA=["x","scaleX","originX"],RA=["y","scaleY","originY"];function Ob(e,t,r,s){Eb(e.x,t,AA,r?r.x:void 0,s?s.x:void 0),Eb(e.y,t,RA,r?r.y:void 0,s?s.y:void 0)}function Db(e){return e.translate===0&&e.scale===1}function yS(e){return Db(e.x)&&Db(e.y)}function Ab(e,t){return e.min===t.min&&e.max===t.max}function PA(e,t){return Ab(e.x,t.x)&&Ab(e.y,t.y)}function Rb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function bS(e,t){return Rb(e.x,t.x)&&Rb(e.y,t.y)}function Pb(e){return rn(e.x)/rn(e.y)}function Lb(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class LA{constructor(){this.members=[]}add(t){pm(this.members,t),t.scheduleRender()}remove(t){if(xm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(p=>t===p);if(r===0)return!1;let s;for(let p=r;p>=0;p--){const b=this.members[p];if(b.isPresent!==!1){s=b;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:p}=t.options;p===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FA(e,t,r){let s="";const p=e.x.translate/t.x,b=e.y.translate/t.y,S=(r==null?void 0:r.z)||0;if((p||b||S)&&(s=`translate3d(${p}px, ${b}px, ${S}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:l,rotate:f,rotateX:o,rotateY:c,skewX:u,skewY:g}=r;l&&(s=`perspective(${l}px) ${s}`),f&&(s+=`rotate(${f}deg) `),o&&(s+=`rotateX(${o}deg) `),c&&(s+=`rotateY(${c}deg) `),u&&(s+=`skewX(${u}deg) `),g&&(s+=`skewY(${g}deg) `)}const d=e.x.scale*t.x,a=e.y.scale*t.y;return(d!==1||a!==1)&&(s+=`scale(${d}, ${a})`),s||"none"}const Kh=["","X","Y","Z"],zA=1e3;let IA=0;function Zh(e,t,r,s){const{latestValues:p}=t;p[e]&&(r[e]=p[e],t.setStaticValue(e,0),s&&(s[e]=0))}function vS(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=sS(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:p,layoutId:b}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ft,!(p||b))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&vS(s)}function wS({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:p}){return class{constructor(S={},d=t==null?void 0:t()){this.id=IA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach($A),this.nodes.forEach(YA),this.nodes.forEach(GA),this.nodes.forEach(HA)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=S,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new TA)}addEventListener(S,d){return this.eventHandlers.has(S)||this.eventHandlers.set(S,new vm),this.eventHandlers.get(S).add(d)}notifyListeners(S,...d){const a=this.eventHandlers.get(S);a&&a.notify(...d)}hasListeners(S){return this.eventHandlers.has(S)}mount(S){if(this.instance)return;this.isSVG=Lw(S)&&!OO(S),this.instance=S;const{layoutId:d,layout:a,visualElement:l}=this.options;if(l&&!l.current&&l.mount(S),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||d)&&(this.isLayoutDirty=!0),e){let f,o=0;const c=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{o=window.innerWidth}),e(S,()=>{const u=window.innerWidth;u!==o&&(o=u,this.root.updateBlockedByResize=!0,f&&f(),f=_A(c,250),Oc.hasAnimatedSinceResize&&(Oc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ib)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&l&&(d||a)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:o,hasRelativeLayoutChanged:c,layout:u})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||QA,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=l.getProps(),w=!this.targetLayout||!bS(this.targetLayout,u),C=!o&&c;if(this.options.layoutRoot||this.resumeFrom||C||o&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Am(g,"layout"),onPlay:y,onComplete:x};(l.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(f,C)}else o||Ib(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=u})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const S=this.getStack();S&&S.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qA),this.animationId++)}getTransformTemplate(){const{visualElement:S}=this.options;return S&&S.getProps().transformTemplate}willUpdate(S=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const o=this.path[f];o.shouldResetTransform=!0,o.updateScroll("snapshot"),o.options.layoutRoot&&o.willUpdate(!1)}const{layoutId:d,layout:a}=this.options;if(d===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),S&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Fb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XA),this.nodes.forEach(BA),this.nodes.forEach(VA)):this.nodes.forEach(zb),this.clearAllSnapshots();const d=dn.now();Gt.delta=Ai(0,1e3/60,d-Gt.timestamp),Gt.timestamp=d,Gt.isProcessing=!0,Bh.update.process(Gt),Bh.preRender.process(Gt),Bh.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Pm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(UA),this.sharedNodes.forEach(WA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rn(this.snapshot.measuredBox.x)&&!rn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const S=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,S?S.layoutBox:void 0)}updateScroll(S="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===S&&(d=!1),d&&this.instance){const a=s(this.instance);this.scroll={animationId:this.root.animationId,phase:S,isRoot:a,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!p)return;const S=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!yS(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,f=l!==this.prevTransformTemplateValue;S&&this.instance&&(d||Pr(this.latestValues)||f)&&(p(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(S=!0){const d=this.measurePageBox();let a=this.removeElementScroll(d);return S&&(a=this.removeTransform(a)),JA(a),{animationId:this.root.animationId,measuredBox:d,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:S}=this.options;if(!S)return kt();const d=S.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(e5))){const{scroll:f}=this.root;f&&(Vs(d.x,f.offset.x),Vs(d.y,f.offset.y))}return d}removeElementScroll(S){var a;const d=kt();if(On(d,S),(a=this.scroll)!=null&&a.wasRoot)return d;for(let l=0;l<this.path.length;l++){const f=this.path[l],{scroll:o,options:c}=f;f!==this.root&&o&&c.layoutScroll&&(o.wasRoot&&On(d,S),Vs(d.x,o.offset.x),Vs(d.y,o.offset.y))}return d}applyTransform(S,d=!1){const a=kt();On(a,S);for(let l=0;l<this.path.length;l++){const f=this.path[l];!d&&f.options.layoutScroll&&f.scroll&&f!==f.root&&$s(a,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Pr(f.latestValues)&&$s(a,f.latestValues)}return Pr(this.latestValues)&&$s(a,this.latestValues),a}removeTransform(S){const d=kt();On(d,S);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!Pr(l.latestValues))continue;Lf(l.latestValues)&&l.updateSnapshot();const f=kt(),o=l.measurePageBox();On(f,o),Ob(d,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,f)}return Pr(this.latestValues)&&Ob(d,this.latestValues),d}setTargetDelta(S){this.targetDelta=S,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(S){this.options={...this.options,...S,crossfade:S.crossfade!==void 0?S.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(S=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const a=!!this.resumingFrom||this!==d;if(!(S||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(c=this.parent)!=null&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:o}=this.options;if(!(!this.layout||!(f||o))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),vo(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):On(this.target,this.layout.layoutBox),Jw(this.target,this.targetDelta)):On(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),vo(this.relativeTargetOrigin,this.target,u.target),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Lf(this.parent.latestValues)||Qw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const S=this.getLead(),d=!!this.resumingFrom||this!==S;let a=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(a=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(a=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(a=!1),a)return;const{layout:l,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||f))return;On(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,c=this.treeScale.y;yD(this.layoutCorrected,this.treeScale,this.path,d),S.layout&&!S.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(S.target=S.layout.layoutBox,S.targetWithTransforms=kt());const{target:u}=S;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Nb(this.prevProjectionDelta.x,this.projectionDelta.x),Nb(this.prevProjectionDelta.y,this.projectionDelta.y)),bo(this.projectionDelta,this.layoutCorrected,u,this.latestValues),(this.treeScale.x!==o||this.treeScale.y!==c||!Lb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Lb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(S=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),S){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hs(),this.projectionDelta=Hs(),this.projectionDeltaWithTransform=Hs()}setAnimationOrigin(S,d=!1){const a=this.snapshot,l=a?a.latestValues:{},f={...this.latestValues},o=Hs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const c=kt(),u=a?a.source:void 0,g=this.layout?this.layout.source:void 0,y=u!==g,x=this.getStack(),w=!x||x.members.length<=1,C=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(ZA));this.animationProgress=0;let j;this.mixTargetDelta=T=>{const M=T/1e3;Bb(o.x,S.x,M),Bb(o.y,S.y,M),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vo(c,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KA(this.relativeTarget,this.relativeTargetOrigin,c,M),j&&PA(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=kt()),On(j,this.relativeTarget)),y&&(this.animationValues=f,MA(f,l,this.latestValues,M,C,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(S){var d,a,l;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(l=(a=this.resumingFrom)==null?void 0:a.currentAnimation)==null||l.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{Oc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qr(0)),this.currentAnimation=kA(this.motionValue,[0,1e3],{...S,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),S.onUpdate&&S.onUpdate(f)},onStop:()=>{},onComplete:()=>{S.onComplete&&S.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const S=this.getStack();S&&S.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const S=this.getLead();let{targetWithTransforms:d,target:a,layout:l,latestValues:f}=S;if(!(!d||!a||!l)){if(this!==S&&this.layout&&l&&SS(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||kt();const o=rn(this.layout.layoutBox.x);a.x.min=S.target.x.min,a.x.max=a.x.min+o;const c=rn(this.layout.layoutBox.y);a.y.min=S.target.y.min,a.y.max=a.y.min+c}On(d,a),$s(d,f),bo(this.projectionDeltaWithTransform,this.layoutCorrected,d,f)}}registerSharedNode(S,d){this.sharedNodes.has(S)||this.sharedNodes.set(S,new LA),this.sharedNodes.get(S).add(d);const l=d.options.initialPromotionConfig;d.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(d):void 0})}isLead(){const S=this.getStack();return S?S.lead===this:!0}getLead(){var d;const{layoutId:S}=this.options;return S?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:S}=this.options;return S?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:S}=this.options;if(S)return this.root.sharedNodes.get(S)}promote({needsReset:S,transition:d,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),S&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const S=this.getStack();return S?S.relegate(this):!1}resetSkewAndRotation(){const{visualElement:S}=this.options;if(!S)return;let d=!1;const{latestValues:a}=S;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(d=!0),!d)return;const l={};a.z&&Zh("z",S,l,this.animationValues);for(let f=0;f<Kh.length;f++)Zh(`rotate${Kh[f]}`,S,l,this.animationValues),Zh(`skew${Kh[f]}`,S,l,this.animationValues);S.render();for(const f in l)S.setStaticValue(f,l[f]),this.animationValues&&(this.animationValues[f]=l[f]);S.scheduleRender()}applyProjectionStyles(S,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){S.visibility="hidden";return}const a=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,S.visibility="",S.opacity="",S.pointerEvents=Ec(d==null?void 0:d.pointerEvents)||"",S.transform=a?a(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Ec(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Pr(this.latestValues)&&(S.transform=a?a({},""):"none",this.hasProjected=!1);return}S.visibility="";const f=l.animationValues||l.latestValues;this.applyTransformsToTarget();let o=FA(this.projectionDeltaWithTransform,this.treeScale,f);a&&(o=a(f,o)),S.transform=o;const{x:c,y:u}=this.projectionDelta;S.transformOrigin=`${c.origin*100}% ${u.origin*100}% 0`,l.animationValues?S.opacity=l===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:S.opacity=l===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Ro){if(f[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:w}=Ro[g],C=o==="none"?f[g]:y(f[g],l);if(x){const j=x.length;for(let T=0;T<j;T++)S[x[T]]=C}else w?this.options.visualElement.renderState.vars[g]=C:S[g]=C}this.options.layoutId&&(S.pointerEvents=l===this?Ec(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(S=>{var d;return(d=S.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(Fb),this.root.sharedNodes.clear()}}}function BA(e){e.updateLayout()}function VA(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:p}=e.layout,{animationType:b}=e.options,S=t.source!==e.layout.source;b==="size"?Dn(o=>{const c=S?t.measuredBox[o]:t.layoutBox[o],u=rn(c);c.min=s[o].min,c.max=c.min+u}):SS(b,t.layoutBox,s)&&Dn(o=>{const c=S?t.measuredBox[o]:t.layoutBox[o],u=rn(s[o]);c.max=c.min+u,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[o].max=e.relativeTarget[o].min+u)});const d=Hs();bo(d,s,t.layoutBox);const a=Hs();S?bo(a,e.applyTransform(p,!0),t.measuredBox):bo(a,s,t.layoutBox);const l=!yS(d);let f=!1;if(!e.resumeFrom){const o=e.getClosestProjectingParent();if(o&&!o.resumeFrom){const{snapshot:c,layout:u}=o;if(c&&u){const g=kt();vo(g,t.layoutBox,c.layoutBox);const y=kt();vo(y,s,u.layoutBox),bS(g,y)||(f=!0),o.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=o)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:a,layoutDelta:d,hasLayoutChanged:l,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function $A(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function HA(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function UA(e){e.clearSnapshot()}function Fb(e){e.clearMeasurements()}function zb(e){e.isLayoutDirty=!1}function XA(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ib(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function YA(e){e.resolveTargetDelta()}function GA(e){e.calcProjection()}function qA(e){e.resetSkewAndRotation()}function WA(e){e.removeLeadSnapshot()}function Bb(e,t,r){e.translate=pt(t.translate,0,r),e.scale=pt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Vb(e,t,r,s){e.min=pt(t.min,r.min,s),e.max=pt(t.max,r.max,s)}function KA(e,t,r,s){Vb(e.x,t.x,r.x,s),Vb(e.y,t.y,r.y,s)}function ZA(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const QA={duration:.45,ease:[.4,0,.1,1]},$b=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Hb=$b("applewebkit/")&&!$b("chrome/")?Math.round:Rn;function Ub(e){e.min=Hb(e.min),e.max=Hb(e.max)}function JA(e){Ub(e.x),Ub(e.y)}function SS(e,t,r){return e==="position"||e==="preserve-aspect"&&!sA(Pb(t),Pb(r),.2)}function e5(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const t5=wS({attachResizeListener:(e,t)=>Po(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qh={current:void 0},CS=wS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Qh.current){const e=new t5({});e.mount(window),e.setOptions({layoutScroll:!0}),Qh.current=e}return Qh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),n5={pan:{Feature:vA},drag:{Feature:bA,ProjectionNode:CS,MeasureLayout:gS}};function Xb(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",r==="Start");const p="onHover"+r,b=s[p];b&&ft.postRender(()=>b(t,Qo(t)))}class i5 extends mr{mount(){const{current:t}=this.node;t&&(this.unmount=TO(t,(r,s)=>(Xb(this.node,s,"Start"),p=>Xb(this.node,p,"End"))))}unmount(){}}class r5 extends mr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wo(Po(this.node.current,"focus",()=>this.onFocus()),Po(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yb(e,t,r){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",r==="Start");const p="onTap"+(r==="End"?"":r),b=s[p];b&&ft.postRender(()=>b(t,Qo(t)))}class s5 extends mr{mount(){const{current:t}=this.node;t&&(this.unmount=EO(t,(r,s)=>(Yb(this.node,s,"Start"),(p,{success:b})=>Yb(this.node,p,b?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hf=new WeakMap,Jh=new WeakMap,a5=e=>{const t=Hf.get(e.target);t&&t(e)},o5=e=>{e.forEach(a5)};function l5({root:e,...t}){const r=e||document;Jh.has(r)||Jh.set(r,{});const s=Jh.get(r),p=JSON.stringify(t);return s[p]||(s[p]=new IntersectionObserver(o5,{root:e,...t})),s[p]}function c5(e,t,r){const s=l5(t);return Hf.set(e,r),s.observe(e),()=>{Hf.delete(e),s.unobserve(e)}}const u5={some:0,all:1};class d5 extends mr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:p="some",once:b}=t,S={root:r?r.current:void 0,rootMargin:s,threshold:typeof p=="number"?p:u5[p]},d=a=>{const{isIntersecting:l}=a;if(this.isInView===l||(this.isInView=l,b&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:f,onViewportLeave:o}=this.node.getProps(),c=l?f:o;c&&c(a)};return c5(this.node.current,S,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(h5(t,r))&&this.startObserver()}unmount(){}}function h5({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const f5={inView:{Feature:d5},tap:{Feature:s5},focus:{Feature:r5},hover:{Feature:i5}},m5={layout:{ProjectionNode:CS,MeasureLayout:gS}},g5={...JD,...f5,...n5,...m5},Me=gD(g5,ND);function Gb(e){const t=cu(()=>qr(e)),{isStatic:r}=N.useContext(du);if(r){const[,s]=N.useState(e);N.useEffect(()=>t.on("change",s),[])}return t}function gu(){return(gu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function kS(e,t){if(e==null)return{};var r,s,p={},b=Object.keys(e);for(s=0;s<b.length;s++)t.indexOf(r=b[s])>=0||(p[r]=e[r]);return p}function Uf(e){var t=N.useRef(e),r=N.useRef(function(s){t.current&&t.current(s)});return t.current=e,r.current}var Lo=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e<t?t:e},wo=function(e){return"touches"in e},Xf=function(e){return e&&e.ownerDocument.defaultView||self},qb=function(e,t,r){var s=e.getBoundingClientRect(),p=wo(t)?function(b,S){for(var d=0;d<b.length;d++)if(b[d].identifier===S)return b[d];return b[0]}(t.touches,r):t;return{left:Lo((p.pageX-(s.left+Xf(e).pageXOffset))/s.width),top:Lo((p.pageY-(s.top+Xf(e).pageYOffset))/s.height)}},Wb=function(e){!wo(e)&&e.preventDefault()},jS=Le.memo(function(e){var t=e.onMove,r=e.onKey,s=kS(e,["onMove","onKey"]),p=N.useRef(null),b=Uf(t),S=Uf(r),d=N.useRef(null),a=N.useRef(!1),l=N.useMemo(function(){var u=function(x){Wb(x),(wo(x)?x.touches.length>0:x.buttons>0)&&p.current?b(qb(p.current,x,d.current)):y(!1)},g=function(){return y(!1)};function y(x){var w=a.current,C=Xf(p.current),j=x?C.addEventListener:C.removeEventListener;j(w?"touchmove":"mousemove",u),j(w?"touchend":"mouseup",g)}return[function(x){var w=x.nativeEvent,C=p.current;if(C&&(Wb(w),!function(T,M){return M&&!wo(T)}(w,a.current)&&C)){if(wo(w)){a.current=!0;var j=w.changedTouches||[];j.length&&(d.current=j[0].identifier)}C.focus(),b(qb(C,w,d.current)),y(!0)}},function(x){var w=x.which||x.keyCode;w<37||w>40||(x.preventDefault(),S({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},y]},[S,b]),f=l[0],o=l[1],c=l[2];return N.useEffect(function(){return c},[c]),Le.createElement("div",gu({},s,{onTouchStart:f,onMouseDown:f,className:"react-colorful__interactive",ref:p,onKeyDown:o,tabIndex:0,role:"slider"}))}),Ym=function(e){return e.filter(Boolean).join(" ")},TS=function(e){var t=e.color,r=e.left,s=e.top,p=s===void 0?.5:s,b=Ym(["react-colorful__pointer",e.className]);return Le.createElement("div",{className:b,style:{top:100*p+"%",left:100*r+"%"}},Le.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},qt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r},p5=function(e){return w5(Yf(e))},Yf=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?qt(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?qt(parseInt(e.substring(6,8),16)/255,2):1}},x5=function(e){return v5(b5(e))},y5=function(e){var t=e.s,r=e.v,s=e.a,p=(200-t)*r/100;return{h:qt(e.h),s:qt(p>0&&p<200?t*r/100/(p<=100?p:200-p)*100:0),l:qt(p/2),a:qt(s,2)}},Gf=function(e){var t=y5(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},b5=function(e){var t=e.h,r=e.s,s=e.v,p=e.a;t=t/360*6,r/=100,s/=100;var b=Math.floor(t),S=s*(1-r),d=s*(1-(t-b)*r),a=s*(1-(1-t+b)*r),l=b%6;return{r:qt(255*[s,d,S,S,a,s][l]),g:qt(255*[a,s,s,d,S,S][l]),b:qt(255*[S,S,a,s,s,d][l]),a:qt(p,2)}},bc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},v5=function(e){var t=e.r,r=e.g,s=e.b,p=e.a,b=p<1?bc(qt(255*p)):"";return"#"+bc(t)+bc(r)+bc(s)+b},w5=function(e){var t=e.r,r=e.g,s=e.b,p=e.a,b=Math.max(t,r,s),S=b-Math.min(t,r,s),d=S?b===t?(r-s)/S:b===r?2+(s-t)/S:4+(t-r)/S:0;return{h:qt(60*(d<0?d+6:d)),s:qt(b?S/b*100:0),v:qt(b/255*100),a:p}},S5=Le.memo(function(e){var t=e.hue,r=e.onChange,s=Ym(["react-colorful__hue",e.className]);return Le.createElement("div",{className:s},Le.createElement(jS,{onMove:function(p){r({h:360*p.left})},onKey:function(p){r({h:Lo(t+360*p.left,0,360)})},"aria-label":"Hue","aria-valuenow":qt(t),"aria-valuemax":"360","aria-valuemin":"0"},Le.createElement(TS,{className:"react-colorful__hue-pointer",left:t/360,color:Gf({h:t,s:100,v:100,a:1})})))}),C5=Le.memo(function(e){var t=e.hsva,r=e.onChange,s={backgroundColor:Gf({h:t.h,s:100,v:100,a:1})};return Le.createElement("div",{className:"react-colorful__saturation",style:s},Le.createElement(jS,{onMove:function(p){r({s:100*p.left,v:100-100*p.top})},onKey:function(p){r({s:Lo(t.s+100*p.left,0,100),v:Lo(t.v-100*p.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+qt(t.s)+"%, Brightness "+qt(t.v)+"%"},Le.createElement(TS,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Gf(t)})))}),_S=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0},k5=function(e,t){return e.toLowerCase()===t.toLowerCase()||_S(Yf(e),Yf(t))};function j5(e,t,r){var s=Uf(r),p=N.useState(function(){return e.toHsva(t)}),b=p[0],S=p[1],d=N.useRef({color:t,hsva:b});N.useEffect(function(){if(!e.equal(t,d.current.color)){var l=e.toHsva(t);d.current={hsva:l,color:t},S(l)}},[t,e]),N.useEffect(function(){var l;_S(b,d.current.hsva)||e.equal(l=e.fromHsva(b),d.current.color)||(d.current={hsva:b,color:l},s(l))},[b,e,s]);var a=N.useCallback(function(l){S(function(f){return Object.assign({},f,l)})},[]);return[b,a]}var T5=typeof window<"u"?N.useLayoutEffect:N.useEffect,_5=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Kb=new Map,N5=function(e){T5(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!Kb.has(t)){var r=t.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Kb.set(t,r);var s=_5();s&&r.setAttribute("nonce",s),t.head.appendChild(r)}},[])},M5=function(e){var t=e.className,r=e.colorModel,s=e.color,p=s===void 0?r.defaultColor:s,b=e.onChange,S=kS(e,["className","colorModel","color","onChange"]),d=N.useRef(null);N5(d);var a=j5(r,p,b),l=a[0],f=a[1],o=Ym(["react-colorful",t]);return Le.createElement("div",gu({},S,{ref:d,className:o}),Le.createElement(C5,{hsva:l,onChange:f}),Le.createElement(S5,{hue:l.h,onChange:f,className:"react-colorful__last-control"}))},E5={defaultColor:"000",toHsva:p5,fromHsva:function(e){return x5({h:e.h,s:e.s,v:e.v,a:1})},equal:k5},O5=function(e){return Le.createElement(M5,gu({},e,{colorModel:E5}))};const NS=["shift","alt","meta","mod","ctrl","control"],D5={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function ur(e){return(D5[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function MS(e){return NS.includes(e)}function ef(e,t=","){return e.toLowerCase().split(t)}function tf(e,t="+",r=">",s=!1,p){let b=[],S=!1;e.includes(r)?(S=!0,b=e.toLocaleLowerCase().split(r).map(l=>ur(l))):b=e.toLocaleLowerCase().split(t).map(l=>ur(l));const d={alt:b.includes("alt"),ctrl:b.includes("ctrl")||b.includes("control"),shift:b.includes("shift"),meta:b.includes("meta"),mod:b.includes("mod"),useKey:s},a=b.filter(l=>!NS.includes(l));return{...d,keys:a,description:p,isSequence:S}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&ES([ur(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&OS([ur(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Ei.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Ei.clear()},0)}));const Ei=new Set;function Gm(e){return Array.isArray(e)}function A5(e,t=","){return(Gm(e)?e:e.split(t)).every(r=>Ei.has(r.trim().toLowerCase()))}function ES(e){const t=Array.isArray(e)?e:[e];Ei.has("meta")&&Ei.forEach(r=>!MS(r)&&Ei.delete(r.toLowerCase())),t.forEach(r=>Ei.add(r.toLowerCase()))}function OS(e){const t=Array.isArray(e)?e:[e];e==="meta"?Ei.clear():t.forEach(r=>Ei.delete(r.toLowerCase()))}function R5(e,t,r){(typeof r=="function"&&r(e,t)||r===!0)&&e.preventDefault()}function P5(e,t,r){return typeof r=="function"?r(e,t):r===!0||r===void 0}function L5(e){return DS(e,["input","textarea","select"])}function DS(e,t=!1){const{target:r,composed:s}=e;let p;return F5(r)&&s?p=e.composedPath()[0]&&e.composedPath()[0].tagName:p=r&&r.tagName,Gm(t)?!!(p&&t&&t.some(b=>b.toLowerCase()===p.toLowerCase())):!!(p&&t&&t)}function F5(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function z5(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(r=>t.includes(r))||e.includes("*"):!0}const I5=(e,t,r=!1)=>{const{alt:s,meta:p,mod:b,shift:S,ctrl:d,keys:a,useKey:l}=t,{code:f,key:o,ctrlKey:c,metaKey:u,shiftKey:g,altKey:y}=e,x=ur(f);if(l&&(a==null?void 0:a.length)===1&&a.includes(o))return!0;if(!(a!=null&&a.includes(x))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(x))return!1;if(!r){if(s!==y&&x!=="alt"||S!==g&&x!=="shift")return!1;if(b){if(!u&&!c)return!1}else if(p!==u&&x!=="meta"&&x!=="os"||d!==c&&x!=="ctrl"&&x!=="control")return!1}return a&&a.length===1&&a.includes(x)?!0:a?A5(a):!a},B5=N.createContext(void 0),V5=()=>N.useContext(B5);function AS(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((r,s)=>r&&AS(e[s],t[s]),!0):e===t}const $5=N.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),H5=()=>N.useContext($5);function U5(e){const t=N.useRef(void 0);return AS(t.current,e)||(t.current=e),t.current}const Zb=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},X5=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Ct(e,t,r,s){const p=N.useRef(null),b=N.useRef(!1),S=r instanceof Array?s instanceof Array?void 0:s:r,d=Gm(e)?e.join(S==null?void 0:S.delimiter):e,a=r instanceof Array?r:s instanceof Array?s:void 0,l=N.useCallback(t,a??[]),f=N.useRef(l);a?f.current=l:f.current=t;const o=U5(S),{activeScopes:c}=H5(),u=V5();return X5(()=>{if((o==null?void 0:o.enabled)===!1||!z5(c,o==null?void 0:o.scopes))return;let g=[],y;const x=(T,M=!1)=>{var E;if(!(L5(T)&&!DS(T,o==null?void 0:o.enableOnFormTags))){if(p.current!==null){const A=p.current.getRootNode();if((A instanceof Document||A instanceof ShadowRoot)&&A.activeElement!==p.current&&!p.current.contains(A.activeElement)){Zb(T);return}}(E=T.target)!=null&&E.isContentEditable&&!(o!=null&&o.enableOnContentEditable)||ef(d,o==null?void 0:o.delimiter).forEach(A=>{var R,H,K,X;if(A.includes((o==null?void 0:o.splitKey)??"+")&&A.includes((o==null?void 0:o.sequenceSplitKey)??">")){console.warn(`Hotkey ${A} contains both ${(o==null?void 0:o.splitKey)??"+"} and ${(o==null?void 0:o.sequenceSplitKey)??">"} which is not supported.`);return}const ne=tf(A,o==null?void 0:o.splitKey,o==null?void 0:o.sequenceSplitKey,o==null?void 0:o.useKey,o==null?void 0:o.description);if(ne.isSequence){y=setTimeout(()=>{g=[]},(o==null?void 0:o.sequenceTimeoutMs)??1e3);const de=ne.useKey?T.key:ur(T.code);if(MS(de.toLowerCase()))return;g.push(de);const se=(R=ne.keys)==null?void 0:R[g.length-1];if(de!==se){g=[],y&&clearTimeout(y);return}g.length===((H=ne.keys)==null?void 0:H.length)&&(f.current(T,ne),y&&clearTimeout(y),g=[])}else if(I5(T,ne,o==null?void 0:o.ignoreModifiers)||(K=ne.keys)!=null&&K.includes("*")){if((X=o==null?void 0:o.ignoreEventWhen)!=null&&X.call(o,T)||M&&b.current)return;if(R5(T,ne,o==null?void 0:o.preventDefault),!P5(T,ne,o==null?void 0:o.enabled)){Zb(T);return}f.current(T,ne),M||(b.current=!0)}})}},w=T=>{T.code!==void 0&&(ES(ur(T.code)),((o==null?void 0:o.keydown)===void 0&&(o==null?void 0:o.keyup)!==!0||o!=null&&o.keydown)&&x(T))},C=T=>{T.code!==void 0&&(OS(ur(T.code)),b.current=!1,o!=null&&o.keyup&&x(T,!0))},j=p.current||(S==null?void 0:S.document)||document;return j.addEventListener("keyup",C,S==null?void 0:S.eventListenerOptions),j.addEventListener("keydown",w,S==null?void 0:S.eventListenerOptions),u&&ef(d,o==null?void 0:o.delimiter).forEach(T=>u.addHotkey(tf(T,o==null?void 0:o.splitKey,o==null?void 0:o.sequenceSplitKey,o==null?void 0:o.useKey,o==null?void 0:o.description))),()=>{j.removeEventListener("keyup",C,S==null?void 0:S.eventListenerOptions),j.removeEventListener("keydown",w,S==null?void 0:S.eventListenerOptions),u&&ef(d,o==null?void 0:o.delimiter).forEach(T=>u.removeHotkey(tf(T,o==null?void 0:o.splitKey,o==null?void 0:o.sequenceSplitKey,o==null?void 0:o.useKey,o==null?void 0:o.description))),g=[],y&&clearTimeout(y)}},[d,o,c]),p}var Jo=e=>e.type==="checkbox",zr=e=>e instanceof Date,nn=e=>e==null;const RS=e=>typeof e=="object";var Tt=e=>!nn(e)&&!Array.isArray(e)&&RS(e)&&!zr(e),PS=e=>Tt(e)&&e.target?Jo(e.target)?e.target.checked:e.target.value:e,Y5=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,LS=(e,t)=>e.has(Y5(t)),G5=e=>{const t=e.constructor&&e.constructor.prototype;return Tt(t)&&t.hasOwnProperty("isPrototypeOf")},qm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Rt(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(qm&&(e instanceof Blob||s))&&(r||Tt(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!G5(e))t=e;else for(const p in e)e.hasOwnProperty(p)&&(t[p]=Rt(e[p]));else return e;return t}var pu=e=>/^\w*$/.test(e),jt=e=>e===void 0,Wm=e=>Array.isArray(e)?e.filter(Boolean):[],Km=e=>Wm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),De=(e,t,r)=>{if(!t||!Tt(e))return r;const s=(pu(t)?[t]:Km(t)).reduce((p,b)=>nn(p)?p:p[b],e);return jt(s)||s===e?jt(e[t])?r:e[t]:s},vn=e=>typeof e=="boolean",dt=(e,t,r)=>{let s=-1;const p=pu(t)?[t]:Km(t),b=p.length,S=b-1;for(;++s<b;){const d=p[s];let a=r;if(s!==S){const l=e[d];a=Tt(l)||Array.isArray(l)?l:isNaN(+p[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=a,e=e[d]}};const Xc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Vn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ti={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},FS=Le.createContext(null);FS.displayName="HookFormContext";const Zm=()=>Le.useContext(FS);var zS=(e,t,r,s=!0)=>{const p={defaultValues:t._defaultValues};for(const b in e)Object.defineProperty(p,b,{get:()=>{const S=b;return t._proxyFormState[S]!==Vn.all&&(t._proxyFormState[S]=!s||Vn.all),r&&(r[S]=!0),e[S]}});return p};const Qm=typeof window<"u"?Le.useLayoutEffect:Le.useEffect;function q5(e){const t=Zm(),{control:r=t.control,disabled:s,name:p,exact:b}=e||{},[S,d]=Le.useState(r._formState),a=Le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Qm(()=>r._subscribe({name:p,formState:a.current,exact:b,callback:l=>{!s&&d({...r._formState,...l})}}),[p,s,b]),Le.useEffect(()=>{a.current.isValid&&r._setValid(!0)},[r]),Le.useMemo(()=>zS(S,r,a.current,!1),[S,r])}var Jn=e=>typeof e=="string",IS=(e,t,r,s,p)=>Jn(e)?(s&&t.watch.add(e),De(r,e,p)):Array.isArray(e)?e.map(b=>(s&&t.watch.add(b),De(r,b))):(s&&(t.watchAll=!0),r),qf=e=>nn(e)||!RS(e);function Ni(e,t,r=new WeakSet){if(qf(e)||qf(t))return e===t;if(zr(e)&&zr(t))return e.getTime()===t.getTime();const s=Object.keys(e),p=Object.keys(t);if(s.length!==p.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const b of s){const S=e[b];if(!p.includes(b))return!1;if(b!=="ref"){const d=t[b];if(zr(S)&&zr(d)||Tt(S)&&Tt(d)||Array.isArray(S)&&Array.isArray(d)?!Ni(S,d,r):S!==d)return!1}}return!0}function W5(e){const t=Zm(),{control:r=t.control,name:s,defaultValue:p,disabled:b,exact:S,compute:d}=e||{},a=Le.useRef(p),l=Le.useRef(d),f=Le.useRef(void 0);l.current=d;const o=Le.useMemo(()=>r._getWatch(s,a.current),[r,s]),[c,u]=Le.useState(l.current?l.current(o):o);return Qm(()=>r._subscribe({name:s,formState:{values:!0},exact:S,callback:g=>{if(!b){const y=IS(s,r._names,g.values||r._formValues,!1,a.current);if(l.current){const x=l.current(y);Ni(x,f.current)||(u(x),f.current=x)}else u(y)}}}),[r,b,s,S]),Le.useEffect(()=>r._removeUnmounted()),c}function K5(e){const t=Zm(),{name:r,disabled:s,control:p=t.control,shouldUnregister:b,defaultValue:S}=e,d=LS(p._names.array,r),a=Le.useMemo(()=>De(p._formValues,r,De(p._defaultValues,r,S)),[p,r,S]),l=W5({control:p,name:r,defaultValue:a,exact:!0}),f=q5({control:p,name:r,exact:!0}),o=Le.useRef(e),c=Le.useRef(p.register(r,{...e.rules,value:l,...vn(e.disabled)?{disabled:e.disabled}:{}}));o.current=e;const u=Le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!De(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!De(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!De(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!De(f.validatingFields,r)},error:{enumerable:!0,get:()=>De(f.errors,r)}}),[f,r]),g=Le.useCallback(C=>c.current.onChange({target:{value:PS(C),name:r},type:Xc.CHANGE}),[r]),y=Le.useCallback(()=>c.current.onBlur({target:{value:De(p._formValues,r),name:r},type:Xc.BLUR}),[r,p._formValues]),x=Le.useCallback(C=>{const j=De(p._fields,r);j&&C&&(j._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[p._fields,r]),w=Le.useMemo(()=>({name:r,value:l,...vn(s)||f.disabled?{disabled:f.disabled||s}:{},onChange:g,onBlur:y,ref:x}),[r,s,f.disabled,g,y,x,l]);return Le.useEffect(()=>{const C=p._options.shouldUnregister||b;p.register(r,{...o.current.rules,...vn(o.current.disabled)?{disabled:o.current.disabled}:{}});const j=(T,M)=>{const E=De(p._fields,T);E&&E._f&&(E._f.mount=M)};if(j(r,!0),C){const T=Rt(De(p._options.defaultValues,r));dt(p._defaultValues,r,T),jt(De(p._formValues,r))&&dt(p._formValues,r,T)}return!d&&p.register(r),()=>{(d?C&&!p._state.action:C)?p.unregister(r):j(r,!1)}},[r,p,d,b]),Le.useEffect(()=>{p._setDisabledField({disabled:s,name:r})},[s,r,p]),Le.useMemo(()=>({field:w,formState:f,fieldState:u}),[w,f,u])}const nf=e=>e.render(K5(e));var Z5=(e,t,r,s,p)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:p||!0}}:{},So=e=>Array.isArray(e)?e:[e],Qb=()=>{let e=[];return{get observers(){return e},next:p=>{for(const b of e)b.next&&b.next(p)},subscribe:p=>(e.push(p),{unsubscribe:()=>{e=e.filter(b=>b!==p)}}),unsubscribe:()=>{e=[]}}},un=e=>Tt(e)&&!Object.keys(e).length,Jm=e=>e.type==="file",$n=e=>typeof e=="function",Yc=e=>{if(!qm)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},BS=e=>e.type==="select-multiple",eg=e=>e.type==="radio",Q5=e=>eg(e)||Jo(e),rf=e=>Yc(e)&&e.isConnected;function J5(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=jt(e)?s++:e[t[s++]];return e}function eR(e){for(const t in e)if(e.hasOwnProperty(t)&&!jt(e[t]))return!1;return!0}function Mt(e,t){const r=Array.isArray(t)?t:pu(t)?[t]:Km(t),s=r.length===1?e:J5(e,r),p=r.length-1,b=r[p];return s&&delete s[b],p!==0&&(Tt(s)&&un(s)||Array.isArray(s)&&eR(s))&&Mt(e,r.slice(0,-1)),e}var VS=e=>{for(const t in e)if($n(e[t]))return!0;return!1};function Gc(e,t={}){const r=Array.isArray(e);if(Tt(e)||r)for(const s in e)Array.isArray(e[s])||Tt(e[s])&&!VS(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Gc(e[s],t[s])):nn(e[s])||(t[s]=!0);return t}function $S(e,t,r){const s=Array.isArray(e);if(Tt(e)||s)for(const p in e)Array.isArray(e[p])||Tt(e[p])&&!VS(e[p])?jt(t)||qf(r[p])?r[p]=Array.isArray(e[p])?Gc(e[p],[]):{...Gc(e[p])}:$S(e[p],nn(t)?{}:t[p],r[p]):r[p]=!Ni(e[p],t[p]);return r}var oo=(e,t)=>$S(e,t,Gc(t));const Jb={value:!1,isValid:!1},ev={value:!0,isValid:!0};var HS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!jt(e[0].attributes.value)?jt(e[0].value)||e[0].value===""?ev:{value:e[0].value,isValid:!0}:ev:Jb}return Jb},US=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>jt(e)?e:t?e===""?NaN:e&&+e:r&&Jn(e)?new Date(e):s?s(e):e;const tv={isValid:!1,value:null};var XS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,tv):tv;function nv(e){const t=e.ref;return Jm(t)?t.files:eg(t)?XS(e.refs).value:BS(t)?[...t.selectedOptions].map(({value:r})=>r):Jo(t)?HS(e.refs).value:US(jt(t.value)?e.ref.value:t.value,e)}var tR=(e,t,r,s)=>{const p={};for(const b of e){const S=De(t,b);S&&dt(p,b,S._f)}return{criteriaMode:r,names:[...e],fields:p,shouldUseNativeValidation:s}},qc=e=>e instanceof RegExp,lo=e=>jt(e)?e:qc(e)?e.source:Tt(e)?qc(e.value)?e.value.source:e.value:e,iv=e=>({isOnSubmit:!e||e===Vn.onSubmit,isOnBlur:e===Vn.onBlur,isOnChange:e===Vn.onChange,isOnAll:e===Vn.all,isOnTouch:e===Vn.onTouched});const rv="AsyncFunction";var nR=e=>!!e&&!!e.validate&&!!($n(e.validate)&&e.validate.constructor.name===rv||Tt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===rv)),iR=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),sv=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Co=(e,t,r,s)=>{for(const p of r||Object.keys(e)){const b=De(e,p);if(b){const{_f:S,...d}=b;if(S){if(S.refs&&S.refs[0]&&t(S.refs[0],p)&&!s)return!0;if(S.ref&&t(S.ref,S.name)&&!s)return!0;if(Co(d,t))break}else if(Tt(d)&&Co(d,t))break}}};function av(e,t,r){const s=De(e,r);if(s||pu(r))return{error:s,name:r};const p=r.split(".");for(;p.length;){const b=p.join("."),S=De(t,b),d=De(e,b);if(S&&!Array.isArray(S)&&r!==b)return{name:r};if(d&&d.type)return{name:b,error:d};if(d&&d.root&&d.root.type)return{name:`${b}.root`,error:d.root};p.pop()}return{name:r}}var rR=(e,t,r,s)=>{r(e);const{name:p,...b}=e;return un(b)||Object.keys(b).length>=Object.keys(t).length||Object.keys(b).find(S=>t[S]===(!s||Vn.all))},sR=(e,t,r)=>!e||!t||e===t||So(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),aR=(e,t,r,s,p)=>p.isOnAll?!1:!r&&p.isOnTouch?!(t||e):(r?s.isOnBlur:p.isOnBlur)?!e:(r?s.isOnChange:p.isOnChange)?e:!0,oR=(e,t)=>!Wm(De(e,t)).length&&Mt(e,t),lR=(e,t,r)=>{const s=So(De(e,r));return dt(s,"root",t[r]),dt(e,r,s),e},Dc=e=>Jn(e);function ov(e,t,r="validate"){if(Dc(e)||Array.isArray(e)&&e.every(Dc)||vn(e)&&!e)return{type:r,message:Dc(e)?e:"",ref:t}}var Ps=e=>Tt(e)&&!qc(e)?e:{value:e,message:""},lv=async(e,t,r,s,p,b)=>{const{ref:S,refs:d,required:a,maxLength:l,minLength:f,min:o,max:c,pattern:u,validate:g,name:y,valueAsNumber:x,mount:w}=e._f,C=De(r,y);if(!w||t.has(y))return{};const j=d?d[0]:S,T=ne=>{p&&j.reportValidity&&(j.setCustomValidity(vn(ne)?"":ne||""),j.reportValidity())},M={},E=eg(S),A=Jo(S),R=E||A,H=(x||Jm(S))&&jt(S.value)&&jt(C)||Yc(S)&&S.value===""||C===""||Array.isArray(C)&&!C.length,K=Z5.bind(null,y,s,M),X=(ne,de,se,q=Ti.maxLength,P=Ti.minLength)=>{const $=ne?de:se;M[y]={type:ne?q:P,message:$,ref:S,...K(ne?q:P,$)}};if(b?!Array.isArray(C)||!C.length:a&&(!R&&(H||nn(C))||vn(C)&&!C||A&&!HS(d).isValid||E&&!XS(d).isValid)){const{value:ne,message:de}=Dc(a)?{value:!!a,message:a}:Ps(a);if(ne&&(M[y]={type:Ti.required,message:de,ref:j,...K(Ti.required,de)},!s))return T(de),M}if(!H&&(!nn(o)||!nn(c))){let ne,de;const se=Ps(c),q=Ps(o);if(!nn(C)&&!isNaN(C)){const P=S.valueAsNumber||C&&+C;nn(se.value)||(ne=P>se.value),nn(q.value)||(de=P<q.value)}else{const P=S.valueAsDate||new Date(C),$=O=>new Date(new Date().toDateString()+" "+O),V=S.type=="time",D=S.type=="week";Jn(se.value)&&C&&(ne=V?$(C)>$(se.value):D?C>se.value:P>new Date(se.value)),Jn(q.value)&&C&&(de=V?$(C)<$(q.value):D?C<q.value:P<new Date(q.value))}if((ne||de)&&(X(!!ne,se.message,q.message,Ti.max,Ti.min),!s))return T(M[y].message),M}if((l||f)&&!H&&(Jn(C)||b&&Array.isArray(C))){const ne=Ps(l),de=Ps(f),se=!nn(ne.value)&&C.length>+ne.value,q=!nn(de.value)&&C.length<+de.value;if((se||q)&&(X(se,ne.message,de.message),!s))return T(M[y].message),M}if(u&&!H&&Jn(C)){const{value:ne,message:de}=Ps(u);if(qc(ne)&&!C.match(ne)&&(M[y]={type:Ti.pattern,message:de,ref:S,...K(Ti.pattern,de)},!s))return T(de),M}if(g){if($n(g)){const ne=await g(C,r),de=ov(ne,j);if(de&&(M[y]={...de,...K(Ti.validate,de.message)},!s))return T(de.message),M}else if(Tt(g)){let ne={};for(const de in g){if(!un(ne)&&!s)break;const se=ov(await g[de](C,r),j,de);se&&(ne={...se,...K(de,se.message)},T(se.message),s&&(M[y]=ne))}if(!un(ne)&&(M[y]={ref:j,...ne},!s))return M}}return T(!0),M};const cR={mode:Vn.onSubmit,reValidateMode:Vn.onChange,shouldFocusError:!0};function uR(e={}){let t={...cR,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:$n(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},p=Tt(t.defaultValues)||Tt(t.values)?Rt(t.defaultValues||t.values)||{}:{},b=t.shouldUnregister?{}:Rt(p),S={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},a,l=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let o={...f};const c={array:Qb(),state:Qb()},u=t.criteriaMode===Vn.all,g=Y=>ee=>{clearTimeout(l),l=setTimeout(Y,ee)},y=async Y=>{if(!t.disabled&&(f.isValid||o.isValid||Y)){const ee=t.resolver?un((await A()).errors):await H(s,!0);ee!==r.isValid&&c.state.next({isValid:ee})}},x=(Y,ee)=>{!t.disabled&&(f.isValidating||f.validatingFields||o.isValidating||o.validatingFields)&&((Y||Array.from(d.mount)).forEach(J=>{J&&(ee?dt(r.validatingFields,J,ee):Mt(r.validatingFields,J))}),c.state.next({validatingFields:r.validatingFields,isValidating:!un(r.validatingFields)}))},w=(Y,ee=[],J,xe,Ce=!0,ke=!0)=>{if(xe&&J&&!t.disabled){if(S.action=!0,ke&&Array.isArray(De(s,Y))){const Ne=J(De(s,Y),xe.argA,xe.argB);Ce&&dt(s,Y,Ne)}if(ke&&Array.isArray(De(r.errors,Y))){const Ne=J(De(r.errors,Y),xe.argA,xe.argB);Ce&&dt(r.errors,Y,Ne),oR(r.errors,Y)}if((f.touchedFields||o.touchedFields)&&ke&&Array.isArray(De(r.touchedFields,Y))){const Ne=J(De(r.touchedFields,Y),xe.argA,xe.argB);Ce&&dt(r.touchedFields,Y,Ne)}(f.dirtyFields||o.dirtyFields)&&(r.dirtyFields=oo(p,b)),c.state.next({name:Y,isDirty:X(Y,ee),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else dt(b,Y,ee)},C=(Y,ee)=>{dt(r.errors,Y,ee),c.state.next({errors:r.errors})},j=Y=>{r.errors=Y,c.state.next({errors:r.errors,isValid:!1})},T=(Y,ee,J,xe)=>{const Ce=De(s,Y);if(Ce){const ke=De(b,Y,jt(J)?De(p,Y):J);jt(ke)||xe&&xe.defaultChecked||ee?dt(b,Y,ee?ke:nv(Ce._f)):se(Y,ke),S.mount&&y()}},M=(Y,ee,J,xe,Ce)=>{let ke=!1,Ne=!1;const Oe={name:Y};if(!t.disabled){if(!J||xe){(f.isDirty||o.isDirty)&&(Ne=r.isDirty,r.isDirty=Oe.isDirty=X(),ke=Ne!==Oe.isDirty);const ze=Ni(De(p,Y),ee);Ne=!!De(r.dirtyFields,Y),ze?Mt(r.dirtyFields,Y):dt(r.dirtyFields,Y,!0),Oe.dirtyFields=r.dirtyFields,ke=ke||(f.dirtyFields||o.dirtyFields)&&Ne!==!ze}if(J){const ze=De(r.touchedFields,Y);ze||(dt(r.touchedFields,Y,J),Oe.touchedFields=r.touchedFields,ke=ke||(f.touchedFields||o.touchedFields)&&ze!==J)}ke&&Ce&&c.state.next(Oe)}return ke?Oe:{}},E=(Y,ee,J,xe)=>{const Ce=De(r.errors,Y),ke=(f.isValid||o.isValid)&&vn(ee)&&r.isValid!==ee;if(t.delayError&&J?(a=g(()=>C(Y,J)),a(t.delayError)):(clearTimeout(l),a=null,J?dt(r.errors,Y,J):Mt(r.errors,Y)),(J?!Ni(Ce,J):Ce)||!un(xe)||ke){const Ne={...xe,...ke&&vn(ee)?{isValid:ee}:{},errors:r.errors,name:Y};r={...r,...Ne},c.state.next(Ne)}},A=async Y=>{x(Y,!0);const ee=await t.resolver(b,t.context,tR(Y||d.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return x(Y),ee},R=async Y=>{const{errors:ee}=await A(Y);if(Y)for(const J of Y){const xe=De(ee,J);xe?dt(r.errors,J,xe):Mt(r.errors,J)}else r.errors=ee;return ee},H=async(Y,ee,J={valid:!0})=>{for(const xe in Y){const Ce=Y[xe];if(Ce){const{_f:ke,...Ne}=Ce;if(ke){const Oe=d.array.has(ke.name),ze=Ce._f&&nR(Ce._f);ze&&f.validatingFields&&x([xe],!0);const $e=await lv(Ce,d.disabled,b,u,t.shouldUseNativeValidation&&!ee,Oe);if(ze&&f.validatingFields&&x([xe]),$e[ke.name]&&(J.valid=!1,ee))break;!ee&&(De($e,ke.name)?Oe?lR(r.errors,$e,ke.name):dt(r.errors,ke.name,$e[ke.name]):Mt(r.errors,ke.name))}!un(Ne)&&await H(Ne,ee,J)}}return J.valid},K=()=>{for(const Y of d.unMount){const ee=De(s,Y);ee&&(ee._f.refs?ee._f.refs.every(J=>!rf(J)):!rf(ee._f.ref))&&Q(Y)}d.unMount=new Set},X=(Y,ee)=>!t.disabled&&(Y&&ee&&dt(b,Y,ee),!Ni(O(),p)),ne=(Y,ee,J)=>IS(Y,d,{...S.mount?b:jt(ee)?p:Jn(Y)?{[Y]:ee}:ee},J,ee),de=Y=>Wm(De(S.mount?b:p,Y,t.shouldUnregister?De(p,Y,[]):[])),se=(Y,ee,J={})=>{const xe=De(s,Y);let Ce=ee;if(xe){const ke=xe._f;ke&&(!ke.disabled&&dt(b,Y,US(ee,ke)),Ce=Yc(ke.ref)&&nn(ee)?"":ee,BS(ke.ref)?[...ke.ref.options].forEach(Ne=>Ne.selected=Ce.includes(Ne.value)):ke.refs?Jo(ke.ref)?ke.refs.forEach(Ne=>{(!Ne.defaultChecked||!Ne.disabled)&&(Array.isArray(Ce)?Ne.checked=!!Ce.find(Oe=>Oe===Ne.value):Ne.checked=Ce===Ne.value||!!Ce)}):ke.refs.forEach(Ne=>Ne.checked=Ne.value===Ce):Jm(ke.ref)?ke.ref.value="":(ke.ref.value=Ce,ke.ref.type||c.state.next({name:Y,values:Rt(b)})))}(J.shouldDirty||J.shouldTouch)&&M(Y,Ce,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&D(Y)},q=(Y,ee,J)=>{for(const xe in ee){if(!ee.hasOwnProperty(xe))return;const Ce=ee[xe],ke=Y+"."+xe,Ne=De(s,ke);(d.array.has(Y)||Tt(Ce)||Ne&&!Ne._f)&&!zr(Ce)?q(ke,Ce,J):se(ke,Ce,J)}},P=(Y,ee,J={})=>{const xe=De(s,Y),Ce=d.array.has(Y),ke=Rt(ee);dt(b,Y,ke),Ce?(c.array.next({name:Y,values:Rt(b)}),(f.isDirty||f.dirtyFields||o.isDirty||o.dirtyFields)&&J.shouldDirty&&c.state.next({name:Y,dirtyFields:oo(p,b),isDirty:X(Y,ke)})):xe&&!xe._f&&!nn(ke)?q(Y,ke,J):se(Y,ke,J),sv(Y,d)&&c.state.next({...r,name:Y}),c.state.next({name:S.mount?Y:void 0,values:Rt(b)})},$=async Y=>{S.mount=!0;const ee=Y.target;let J=ee.name,xe=!0;const Ce=De(s,J),ke=ze=>{xe=Number.isNaN(ze)||zr(ze)&&isNaN(ze.getTime())||Ni(ze,De(b,J,ze))},Ne=iv(t.mode),Oe=iv(t.reValidateMode);if(Ce){let ze,$e;const Ht=ee.type?nv(Ce._f):PS(Y),zt=Y.type===Xc.BLUR||Y.type===Xc.FOCUS_OUT,Wt=!iR(Ce._f)&&!t.resolver&&!De(r.errors,J)&&!Ce._f.deps||aR(zt,De(r.touchedFields,J),r.isSubmitted,Oe,Ne),Yn=sv(J,d,zt);dt(b,J,Ht),zt?(!ee||!ee.readOnly)&&(Ce._f.onBlur&&Ce._f.onBlur(Y),a&&a(0)):Ce._f.onChange&&Ce._f.onChange(Y);const Pn=M(J,Ht,zt),Ln=!un(Pn)||Yn;if(!zt&&c.state.next({name:J,type:Y.type,values:Rt(b)}),Wt)return(f.isValid||o.isValid)&&(t.mode==="onBlur"?zt&&y():zt||y()),Ln&&c.state.next({name:J,...Yn?{}:Pn});if(!zt&&Yn&&c.state.next({...r}),t.resolver){const{errors:ci}=await A([J]);if(ke(Ht),xe){const gr=av(r.errors,s,J),tl=av(ci,s,gr.name||J);ze=tl.error,J=tl.name,$e=un(ci)}}else x([J],!0),ze=(await lv(Ce,d.disabled,b,u,t.shouldUseNativeValidation))[J],x([J]),ke(Ht),xe&&(ze?$e=!1:(f.isValid||o.isValid)&&($e=await H(s,!0)));xe&&(Ce._f.deps&&D(Ce._f.deps),E(J,$e,ze,Pn))}},V=(Y,ee)=>{if(De(r.errors,ee)&&Y.focus)return Y.focus(),1},D=async(Y,ee={})=>{let J,xe;const Ce=So(Y);if(t.resolver){const ke=await R(jt(Y)?Y:Ce);J=un(ke),xe=Y?!Ce.some(Ne=>De(ke,Ne)):J}else Y?(xe=(await Promise.all(Ce.map(async ke=>{const Ne=De(s,ke);return await H(Ne&&Ne._f?{[ke]:Ne}:Ne)}))).every(Boolean),!(!xe&&!r.isValid)&&y()):xe=J=await H(s);return c.state.next({...!Jn(Y)||(f.isValid||o.isValid)&&J!==r.isValid?{}:{name:Y},...t.resolver||!Y?{isValid:J}:{},errors:r.errors}),ee.shouldFocus&&!xe&&Co(s,V,Y?Ce:d.mount),xe},O=Y=>{const ee={...S.mount?b:p};return jt(Y)?ee:Jn(Y)?De(ee,Y):Y.map(J=>De(ee,J))},L=(Y,ee)=>({invalid:!!De((ee||r).errors,Y),isDirty:!!De((ee||r).dirtyFields,Y),error:De((ee||r).errors,Y),isValidating:!!De(r.validatingFields,Y),isTouched:!!De((ee||r).touchedFields,Y)}),I=Y=>{Y&&So(Y).forEach(ee=>Mt(r.errors,ee)),c.state.next({errors:Y?r.errors:{}})},G=(Y,ee,J)=>{const xe=(De(s,Y,{_f:{}})._f||{}).ref,Ce=De(r.errors,Y)||{},{ref:ke,message:Ne,type:Oe,...ze}=Ce;dt(r.errors,Y,{...ze,...ee,ref:xe}),c.state.next({name:Y,errors:r.errors,isValid:!1}),J&&J.shouldFocus&&xe&&xe.focus&&xe.focus()},B=(Y,ee)=>$n(Y)?c.state.subscribe({next:J=>"values"in J&&Y(ne(void 0,ee),J)}):ne(Y,ee,!0),z=Y=>c.state.subscribe({next:ee=>{sR(Y.name,ee.name,Y.exact)&&rR(ee,Y.formState||f,W,Y.reRenderRoot)&&Y.callback({values:{...b},...r,...ee,defaultValues:p})}}).unsubscribe,te=Y=>(S.mount=!0,o={...o,...Y.formState},z({...Y,formState:o})),Q=(Y,ee={})=>{for(const J of Y?So(Y):d.mount)d.mount.delete(J),d.array.delete(J),ee.keepValue||(Mt(s,J),Mt(b,J)),!ee.keepError&&Mt(r.errors,J),!ee.keepDirty&&Mt(r.dirtyFields,J),!ee.keepTouched&&Mt(r.touchedFields,J),!ee.keepIsValidating&&Mt(r.validatingFields,J),!t.shouldUnregister&&!ee.keepDefaultValue&&Mt(p,J);c.state.next({values:Rt(b)}),c.state.next({...r,...ee.keepDirty?{isDirty:X()}:{}}),!ee.keepIsValid&&y()},ue=({disabled:Y,name:ee})=>{(vn(Y)&&S.mount||Y||d.disabled.has(ee))&&(Y?d.disabled.add(ee):d.disabled.delete(ee))},le=(Y,ee={})=>{let J=De(s,Y);const xe=vn(ee.disabled)||vn(t.disabled);return dt(s,Y,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:Y}},name:Y,mount:!0,...ee}}),d.mount.add(Y),J?ue({disabled:vn(ee.disabled)?ee.disabled:t.disabled,name:Y}):T(Y,!0,ee.value),{...xe?{disabled:ee.disabled||t.disabled}:{},...t.progressive?{required:!!ee.required,min:lo(ee.min),max:lo(ee.max),minLength:lo(ee.minLength),maxLength:lo(ee.maxLength),pattern:lo(ee.pattern)}:{},name:Y,onChange:$,onBlur:$,ref:Ce=>{if(Ce){le(Y,ee),J=De(s,Y);const ke=jt(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,Ne=Q5(ke),Oe=J._f.refs||[];if(Ne?Oe.find(ze=>ze===ke):ke===J._f.ref)return;dt(s,Y,{_f:{...J._f,...Ne?{refs:[...Oe.filter(rf),ke,...Array.isArray(De(p,Y))?[{}]:[]],ref:{type:ke.type,name:Y}}:{ref:ke}}}),T(Y,!1,void 0,ke)}else J=De(s,Y,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||ee.shouldUnregister)&&!(LS(d.array,Y)&&S.action)&&d.unMount.add(Y)}}},ie=()=>t.shouldFocusError&&Co(s,V,d.mount),Z=Y=>{vn(Y)&&(c.state.next({disabled:Y}),Co(s,(ee,J)=>{const xe=De(s,J);xe&&(ee.disabled=xe._f.disabled||Y,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(Ce=>{Ce.disabled=xe._f.disabled||Y}))},0,!1))},fe=(Y,ee)=>async J=>{let xe;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let Ce=Rt(b);if(c.state.next({isSubmitting:!0}),t.resolver){const{errors:ke,values:Ne}=await A();r.errors=ke,Ce=Rt(Ne)}else await H(s);if(d.disabled.size)for(const ke of d.disabled)Mt(Ce,ke);if(Mt(r.errors,"root"),un(r.errors)){c.state.next({errors:{}});try{await Y(Ce,J)}catch(ke){xe=ke}}else ee&&await ee({...r.errors},J),ie(),setTimeout(ie);if(c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:un(r.errors)&&!xe,submitCount:r.submitCount+1,errors:r.errors}),xe)throw xe},ae=(Y,ee={})=>{De(s,Y)&&(jt(ee.defaultValue)?P(Y,Rt(De(p,Y))):(P(Y,ee.defaultValue),dt(p,Y,Rt(ee.defaultValue))),ee.keepTouched||Mt(r.touchedFields,Y),ee.keepDirty||(Mt(r.dirtyFields,Y),r.isDirty=ee.defaultValue?X(Y,Rt(De(p,Y))):X()),ee.keepError||(Mt(r.errors,Y),f.isValid&&y()),c.state.next({...r}))},ce=(Y,ee={})=>{const J=Y?Rt(Y):p,xe=Rt(J),Ce=un(Y),ke=Ce?p:xe;if(ee.keepDefaultValues||(p=J),!ee.keepValues){if(ee.keepDirtyValues){const Ne=new Set([...d.mount,...Object.keys(oo(p,b))]);for(const Oe of Array.from(Ne))De(r.dirtyFields,Oe)?dt(ke,Oe,De(b,Oe)):P(Oe,De(ke,Oe))}else{if(qm&&jt(Y))for(const Ne of d.mount){const Oe=De(s,Ne);if(Oe&&Oe._f){const ze=Array.isArray(Oe._f.refs)?Oe._f.refs[0]:Oe._f.ref;if(Yc(ze)){const $e=ze.closest("form");if($e){$e.reset();break}}}}if(ee.keepFieldsRef)for(const Ne of d.mount)P(Ne,De(ke,Ne));else s={}}b=t.shouldUnregister?ee.keepDefaultValues?Rt(p):{}:Rt(ke),c.array.next({values:{...ke}}),c.state.next({values:{...ke}})}d={mount:ee.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},S.mount=!f.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,S.watch=!!t.shouldUnregister,c.state.next({submitCount:ee.keepSubmitCount?r.submitCount:0,isDirty:Ce?!1:ee.keepDirty?r.isDirty:!!(ee.keepDefaultValues&&!Ni(Y,p)),isSubmitted:ee.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ce?{}:ee.keepDirtyValues?ee.keepDefaultValues&&b?oo(p,b):r.dirtyFields:ee.keepDefaultValues&&Y?oo(p,Y):ee.keepDirty?r.dirtyFields:{},touchedFields:ee.keepTouched?r.touchedFields:{},errors:ee.keepErrors?r.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:p})},me=(Y,ee)=>ce($n(Y)?Y(b):Y,ee),be=(Y,ee={})=>{const J=De(s,Y),xe=J&&J._f;if(xe){const Ce=xe.refs?xe.refs[0]:xe.ref;Ce.focus&&(Ce.focus(),ee.shouldSelect&&$n(Ce.select)&&Ce.select())}},W=Y=>{r={...r,...Y}},ge={control:{register:le,unregister:Q,getFieldState:L,handleSubmit:fe,setError:G,_subscribe:z,_runSchema:A,_focusError:ie,_getWatch:ne,_getDirty:X,_setValid:y,_setFieldArray:w,_setDisabledField:ue,_setErrors:j,_getFieldArray:de,_reset:ce,_resetDefaultValues:()=>$n(t.defaultValues)&&t.defaultValues().then(Y=>{me(Y,t.resetOptions),c.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:Z,_subjects:c,_proxyFormState:f,get _fields(){return s},get _formValues(){return b},get _state(){return S},set _state(Y){S=Y},get _defaultValues(){return p},get _names(){return d},set _names(Y){d=Y},get _formState(){return r},get _options(){return t},set _options(Y){t={...t,...Y}}},subscribe:te,trigger:D,register:le,handleSubmit:fe,watch:B,setValue:P,getValues:O,reset:me,resetField:ae,clearErrors:I,unregister:Q,setError:G,setFocus:be,getFieldState:L};return{...ge,formControl:ge}}function dR(e={}){const t=Le.useRef(void 0),r=Le.useRef(void 0),[s,p]=Le.useState({isDirty:!1,isValidating:!1,isLoading:$n(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$n(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!$n(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:S,...d}=uR(e);t.current={...d,formState:s}}const b=t.current.control;return b._options=e,Qm(()=>{const S=b._subscribe({formState:b._proxyFormState,callback:()=>p({...b._formState}),reRenderRoot:!0});return p(d=>({...d,isReady:!0})),b._formState.isReady=!0,S},[b]),Le.useEffect(()=>b._disableForm(e.disabled),[b,e.disabled]),Le.useEffect(()=>{e.mode&&(b._options.mode=e.mode),e.reValidateMode&&(b._options.reValidateMode=e.reValidateMode)},[b,e.mode,e.reValidateMode]),Le.useEffect(()=>{e.errors&&(b._setErrors(e.errors),b._focusError())},[b,e.errors]),Le.useEffect(()=>{e.shouldUnregister&&b._subjects.state.next({values:b._getWatch()})},[b,e.shouldUnregister]),Le.useEffect(()=>{if(b._proxyFormState.isDirty){const S=b._getDirty();S!==s.isDirty&&b._subjects.state.next({isDirty:S})}},[b,s.isDirty]),Le.useEffect(()=>{e.values&&!Ni(e.values,r.current)?(b._reset(e.values,{keepFieldsRef:!0,...b._options.resetOptions}),r.current=e.values,p(S=>({...S}))):b._resetDefaultValues()},[b,e.values]),Le.useEffect(()=>{b._state.mount||(b._setValid(),b._state.mount=!0),b._state.watch&&(b._state.watch=!1,b._subjects.state.next({...b._formState})),b._removeUnmounted()}),t.current.formState=zS(s,b),t.current}var sf={exports:{}},af,cv;function hR(){if(cv)return af;cv=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return af=e,af}var of,uv;function fR(){if(uv)return of;uv=1;var e=hR();function t(){}function r(){}return r.resetWarningCache=t,of=function(){function s(S,d,a,l,f,o){if(o!==e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}s.isRequired=s;function p(){return s}var b={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:p,element:s,elementType:s,instanceOf:p,node:s,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:r,resetWarningCache:t};return b.PropTypes=b,b},of}var dv;function mR(){return dv||(dv=1,sf.exports=fR()()),sf.exports}var gR=mR();const Je=tm(gR);Je.elementType.isRequired,Je.string,Je.func,Je.string,Je.oneOf(["sm","md","lg"]),Je.oneOf(["default","primary","highlight"]),Je.string,Je.bool,Je.string;var lf={};const pR={},xR=Object.freeze(Object.defineProperty({__proto__:null,default:pR},Symbol.toStringTag,{value:"Module"})),cf=kk(xR);var hv;function yR(){return hv||(hv=1,function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var r=cf,s=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=s.document,t.jsdomImplForWrapper=cf.implForWrapper,t.nodeCanvas=cf.Canvas,t.window=s,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function d(u,g){if(this.__eventListeners[u]){var y=this.__eventListeners[u];g?y[y.indexOf(g)]=!1:t.util.array.fill(y,!1)}}function a(u,g){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var y in u)this.on(y,u[y]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(g);return this}function l(u,g){var y=(function(){g.apply(this,arguments),this.off(u,y)}).bind(this);this.on(u,y)}function f(u,g){if(arguments.length===1)for(var y in u)l.call(this,y,u[y]);else l.call(this,u,g);return this}function o(u,g){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)d.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var y in u)d.call(this,y,u[y]);else d.call(this,u,g);return this}function c(u,g){if(!this.__eventListeners)return this;var y=this.__eventListeners[u];if(!y)return this;for(var x=0,w=y.length;x<w;x++)y[x]&&y[x].call(this,g||{});return this.__eventListeners[u]=y.filter(function(C){return C!==!1}),this}t.Observable={fire:c,on:a,once:f,off:o}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,a=arguments.length;d<a;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,a,l){var f=this._objects;return l?f[a]=d:f.splice(a,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,a,l=!1,f=0,o=arguments.length;f<o;f++)a=d.indexOf(arguments[f]),a!==-1&&(l=!0,d.splice(a,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&l&&this.requestRenderAll(),this},forEachObject:function(d,a){for(var l=this.getObjects(),f=0,o=l.length;f<o;f++)d.call(a,l[f],f,l);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(a){return a.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d,a){return this._objects.indexOf(d)>-1?!0:a?this._objects.some(function(l){return typeof l.contains=="function"&&l.contains(d,!0)}):!1},complexity:function(){return this._objects.reduce(function(d,a){return d+=a.complexity?a.complexity():0,d},0)}},t.CommonMethods={_setOptions:function(d){for(var a in d)this.set(a,d[a])},_initGradient:function(d,a){d&&d.colorStops&&!(d instanceof t.Gradient)&&this.set(a,new t.Gradient(d))},_initPattern:function(d,a,l){d&&d.source&&!(d instanceof t.Pattern)?this.set(a,new t.Pattern(d,l)):l&&l()},_setObject:function(d){for(var a in d)this._set(a,d[a])},set:function(d,a){return typeof d=="object"?this._setObject(d):this._set(d,a),this},_set:function(d,a){this[d]=a},toggle:function(d){var a=this.get(d);return typeof a=="boolean"&&this.set(d,!a),this},get:function(d){return this[d]}},function(d){var a=Math.sqrt,l=Math.atan2,f=Math.pow,o=Math.PI/180,c=Math.PI/2;t.util={cos:function(u){if(u===0)return 1;u<0&&(u=-u);var g=u/c;switch(g){case 1:case 3:return 0;case 2:return-1}return Math.cos(u)},sin:function(u){if(u===0)return 0;var g=u/c,y=1;switch(u<0&&(y=-1),g){case 1:return y;case 2:return 0;case 3:return-y}return Math.sin(u)},removeFromArray:function(u,g){var y=u.indexOf(g);return y!==-1&&u.splice(y,1),u},getRandomInt:function(u,g){return Math.floor(Math.random()*(g-u+1))+u},degreesToRadians:function(u){return u*o},radiansToDegrees:function(u){return u/o},rotatePoint:function(u,g,y){var x=new t.Point(u.x-g.x,u.y-g.y),w=t.util.rotateVector(x,y);return new t.Point(w.x,w.y).addEquals(g)},rotateVector:function(u,g){var y=t.util.sin(g),x=t.util.cos(g),w=u.x*x-u.y*y,C=u.x*y+u.y*x;return{x:w,y:C}},createVector:function(u,g){return new t.Point(g.x-u.x,g.y-u.y)},calcAngleBetweenVectors:function(u,g){return Math.acos((u.x*g.x+u.y*g.y)/(Math.hypot(u.x,u.y)*Math.hypot(g.x,g.y)))},getHatVector:function(u){return new t.Point(u.x,u.y).multiply(1/Math.hypot(u.x,u.y))},getBisector:function(u,g,y){var x=t.util.createVector(u,g),w=t.util.createVector(u,y),C=t.util.calcAngleBetweenVectors(x,w),j=t.util.calcAngleBetweenVectors(t.util.rotateVector(x,C),w),T=C*(j===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(x,T)),angle:C}},projectStrokeOnPoints:function(u,g,y){var x=[],w=g.strokeWidth/2,C=g.strokeUniform?new t.Point(1/g.scaleX,1/g.scaleY):new t.Point(1,1),j=function(T){var M=w/Math.hypot(T.x,T.y);return new t.Point(T.x*M*C.x,T.y*M*C.y)};return u.length<=1||u.forEach(function(T,M){var E=new t.Point(T.x,T.y),A,R;M===0?(R=u[M+1],A=y?j(t.util.createVector(R,E)).addEquals(E):u[u.length-1]):M===u.length-1?(A=u[M-1],R=y?j(t.util.createVector(A,E)).addEquals(E):u[0]):(A=u[M-1],R=u[M+1]);var H=t.util.getBisector(E,A,R),K=H.vector,X=H.angle,ne,de;if(g.strokeLineJoin==="miter"&&(ne=-w/Math.sin(X/2),de=new t.Point(K.x*ne*C.x,K.y*ne*C.y),Math.hypot(de.x,de.y)/w<=g.strokeMiterLimit)){x.push(E.add(de)),x.push(E.subtract(de));return}ne=-w*Math.SQRT2,de=new t.Point(K.x*ne*C.x,K.y*ne*C.y),x.push(E.add(de)),x.push(E.subtract(de))}),x},transformPoint:function(u,g,y){return y?new t.Point(g[0]*u.x+g[2]*u.y,g[1]*u.x+g[3]*u.y):new t.Point(g[0]*u.x+g[2]*u.y+g[4],g[1]*u.x+g[3]*u.y+g[5])},makeBoundingBoxFromPoints:function(u,g){if(g)for(var y=0;y<u.length;y++)u[y]=t.util.transformPoint(u[y],g);var x=[u[0].x,u[1].x,u[2].x,u[3].x],w=t.util.array.min(x),C=t.util.array.max(x),j=C-w,T=[u[0].y,u[1].y,u[2].y,u[3].y],M=t.util.array.min(T),E=t.util.array.max(T),A=E-M;return{left:w,top:M,width:j,height:A}},invertTransform:function(u){var g=1/(u[0]*u[3]-u[1]*u[2]),y=[g*u[3],-g*u[1],-g*u[2],g*u[0]],x=t.util.transformPoint({x:u[4],y:u[5]},y,!0);return y[4]=-x.x,y[5]=-x.y,y},toFixed:function(u,g){return parseFloat(Number(u).toFixed(g))},parseUnit:function(u,g){var y=/\D{0,2}$/.exec(u),x=parseFloat(u);switch(g||(g=t.Text.DEFAULT_SVG_FONT_SIZE),y[0]){case"mm":return x*t.DPI/25.4;case"cm":return x*t.DPI/2.54;case"in":return x*t.DPI;case"pt":return x*t.DPI/72;case"pc":return x*t.DPI/72*12;case"em":return x*g;default:return x}},falseFunction:function(){return!1},getKlass:function(u,g){return u=t.util.string.camelize(u.charAt(0).toUpperCase()+u.slice(1)),t.util.resolveNamespace(g)[u]},getSvgAttributes:function(u){var g=["instantiated_by_use","style","id","class"];switch(u){case"linearGradient":g=g.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":g=g.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":g=g.concat(["offset","stop-color","stop-opacity"]);break}return g},resolveNamespace:function(u){if(!u)return t;var g=u.split("."),y=g.length,x,w=d||t.window;for(x=0;x<y;++x)w=w[g[x]];return w},loadImage:function(u,g,y,x){if(!u){g&&g.call(y,u);return}var w=t.util.createImage(),C=function(){g&&g.call(y,w,!1),w=w.onload=w.onerror=null};w.onload=C,w.onerror=function(){t.log("Error loading "+w.src),g&&g.call(y,null,!0),w=w.onload=w.onerror=null},u.indexOf("data")!==0&&x!==void 0&&x!==null&&(w.crossOrigin=x),u.substring(0,14)==="data:image/svg"&&(w.onload=null,t.util.loadImageInDom(w,C)),w.src=u},loadImageInDom:function(u,g){var y=t.document.createElement("div");y.style.width=y.style.height="1px",y.style.left=y.style.top="-100%",y.style.position="absolute",y.appendChild(u),t.document.querySelector("body").appendChild(y),u.onload=function(){g(),y.parentNode.removeChild(y),y=null}},enlivenObjects:function(u,g,y,x){u=u||[];var w=[],C=0,j=u.length;function T(){++C===j&&g&&g(w.filter(function(M){return M}))}if(!j){g&&g(w);return}u.forEach(function(M,E){if(!M||!M.type){T();return}var A=t.util.getKlass(M.type,y);A.fromObject(M,function(R,H){H||(w[E]=R),x&&x(M,R,H),T()})})},enlivenObjectEnlivables:function(u,g,y){var x=t.Object.ENLIVEN_PROPS.filter(function(w){return!!u[w]});t.util.enlivenObjects(x.map(function(w){return u[w]}),function(w){var C={};x.forEach(function(j,T){C[j]=w[T],g&&(g[j]=w[T])}),y&&y(C)})},enlivenPatterns:function(u,g){u=u||[];function y(){++w===C&&g&&g(x)}var x=[],w=0,C=u.length;if(!C){g&&g(x);return}u.forEach(function(j,T){j&&j.source?new t.Pattern(j,function(M){x[T]=M,y()}):(x[T]=j,y())})},groupSVGElements:function(u,g,y){var x;return u&&u.length===1?(typeof y<"u"&&(u[0].sourcePath=y),u[0]):(g&&(g.width&&g.height?g.centerPoint={x:g.width/2,y:g.height/2}:(delete g.width,delete g.height)),x=new t.Group(u,g),typeof y<"u"&&(x.sourcePath=y),x)},populateWithProperties:function(u,g,y){if(y&&Array.isArray(y))for(var x=0,w=y.length;x<w;x++)y[x]in u&&(g[y[x]]=u[y[x]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(u){var g=t.util.createCanvasElement();return g.width=u.width,g.height=u.height,g.getContext("2d").drawImage(u,0,0),g},toDataURL:function(u,g,y){return u.toDataURL("image/"+g,y)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(u,g,y){return[u[0]*g[0]+u[2]*g[1],u[1]*g[0]+u[3]*g[1],u[0]*g[2]+u[2]*g[3],u[1]*g[2]+u[3]*g[3],y?0:u[0]*g[4]+u[2]*g[5]+u[4],y?0:u[1]*g[4]+u[3]*g[5]+u[5]]},qrDecompose:function(u){var g=l(u[1],u[0]),y=f(u[0],2)+f(u[1],2),x=a(y),w=(u[0]*u[3]-u[2]*u[1])/x,C=l(u[0]*u[2]+u[1]*u[3],y);return{angle:g/o,scaleX:x,scaleY:w,skewX:C/o,skewY:0,translateX:u[4],translateY:u[5]}},calcRotateMatrix:function(u){if(!u.angle)return t.iMatrix.concat();var g=t.util.degreesToRadians(u.angle),y=t.util.cos(g),x=t.util.sin(g);return[y,x,-x,y,0,0]},calcDimensionsMatrix:function(u){var g=typeof u.scaleX>"u"?1:u.scaleX,y=typeof u.scaleY>"u"?1:u.scaleY,x=[u.flipX?-g:g,0,0,u.flipY?-y:y,0,0],w=t.util.multiplyTransformMatrices,C=t.util.degreesToRadians;return u.skewX&&(x=w(x,[1,0,Math.tan(C(u.skewX)),1],!0)),u.skewY&&(x=w(x,[1,Math.tan(C(u.skewY)),0,1],!0)),x},composeMatrix:function(u){var g=[1,0,0,1,u.translateX||0,u.translateY||0],y=t.util.multiplyTransformMatrices;return u.angle&&(g=y(g,t.util.calcRotateMatrix(u))),(u.scaleX!==1||u.scaleY!==1||u.skewX||u.skewY||u.flipX||u.flipY)&&(g=y(g,t.util.calcDimensionsMatrix(u))),g},resetObjectTransform:function(u){u.scaleX=1,u.scaleY=1,u.skewX=0,u.skewY=0,u.flipX=!1,u.flipY=!1,u.rotate(0)},saveObjectTransform:function(u){return{scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,angle:u.angle,left:u.left,flipX:u.flipX,flipY:u.flipY,top:u.top}},isTransparent:function(u,g,y,x){x>0&&(g>x?g-=x:g=0,y>x?y-=x:y=0);var w=!0,C,j,T=u.getImageData(g,y,x*2||1,x*2||1),M=T.data.length;for(C=3;C<M&&(j=T.data[C],w=j<=0,w!==!1);C+=4);return T=null,w},parsePreserveAspectRatioAttribute:function(u){var g="meet",y="Mid",x="Mid",w=u.split(" "),C;return w&&w.length&&(g=w.pop(),g!=="meet"&&g!=="slice"?(C=g,g="meet"):w.length&&(C=w.pop())),y=C!=="none"?C.slice(1,4):"none",x=C!=="none"?C.slice(5,8):"none",{meetOrSlice:g,alignX:y,alignY:x}},clearFabricFontCache:function(u){u=(u||"").toLowerCase(),u?t.charWidthsCache[u]&&delete t.charWidthsCache[u]:t.charWidthsCache={}},limitDimsByArea:function(u,g){var y=Math.sqrt(g*u),x=Math.floor(g/y);return{x:Math.floor(y),y:x}},capValue:function(u,g,y){return Math.max(u,Math.min(g,y))},findScaleToFit:function(u,g){return Math.min(g.width/u.width,g.height/u.height)},findScaleToCover:function(u,g){return Math.max(g.width/u.width,g.height/u.height)},matrixToSVG:function(u){return"matrix("+u.map(function(g){return t.util.toFixed(g,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(u,g){var y=t.util.invertTransform(g),x=t.util.multiplyTransformMatrices(y,u.calcOwnMatrix());t.util.applyTransformToObject(u,x)},addTransformToObject:function(u,g){t.util.applyTransformToObject(u,t.util.multiplyTransformMatrices(g,u.calcOwnMatrix()))},applyTransformToObject:function(u,g){var y=t.util.qrDecompose(g),x=new t.Point(y.translateX,y.translateY);u.flipX=!1,u.flipY=!1,u.set("scaleX",y.scaleX),u.set("scaleY",y.scaleY),u.skewX=y.skewX,u.skewY=y.skewY,u.angle=y.angle,u.setPositionByOrigin(x,"center","center")},sizeAfterTransform:function(u,g,y){var x=u/2,w=g/2,C=[{x:-x,y:-w},{x,y:-w},{x:-x,y:w},{x,y:w}],j=t.util.calcDimensionsMatrix(y),T=t.util.makeBoundingBoxFromPoints(C,j);return{x:T.width,y:T.height}},mergeClipPaths:function(u,g){var y=u,x=g;y.inverted&&!x.inverted&&(y=g,x=u),t.util.applyTransformToObject(x,t.util.multiplyTransformMatrices(t.util.invertTransform(y.calcTransformMatrix()),x.calcTransformMatrix()));var w=y.inverted&&x.inverted;return w&&(y.inverted=x.inverted=!1),new t.Group([y],{clipPath:x,inverted:w})},hasStyleChanged:function(u,g,y){return y=y||!1,u.fill!==g.fill||u.stroke!==g.stroke||u.strokeWidth!==g.strokeWidth||u.fontSize!==g.fontSize||u.fontFamily!==g.fontFamily||u.fontWeight!==g.fontWeight||u.fontStyle!==g.fontStyle||u.textBackgroundColor!==g.textBackgroundColor||u.deltaY!==g.deltaY||y&&(u.overline!==g.overline||u.underline!==g.underline||u.linethrough!==g.linethrough)},stylesToArray:function(y,g){for(var y=t.util.object.clone(y,!0),x=g.split(`
`),w=-1,C={},j=[],T=0;T<x.length;T++){if(!y[T]){w+=x[T].length;continue}for(var M=0;M<x[T].length;M++){w++;var E=y[T][M];if(E&&Object.keys(E).length>0){var A=t.util.hasStyleChanged(C,E,!0);A?j.push({start:w,end:w+1,style:E}):j[j.length-1].end++}C=E||{}}}return j},stylesFromArray:function(u,g){if(!Array.isArray(u))return u;for(var y=g.split(`
`),x=-1,w=0,C={},j=0;j<y.length;j++)for(var T=0;T<y[j].length;T++)x++,u[w]&&u[w].start<=x&&x<u[w].end&&(C[j]=C[j]||{},C[j][T]=Object.assign({},u[w].style),x===u[w].end-1&&w++);return C}}}(e),function(){var d=Array.prototype.join,a={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};function f(D,O,L,I,G,B,z,te,Q,ue,le){var ie=t.util.cos(D),Z=t.util.sin(D),fe=t.util.cos(O),ae=t.util.sin(O),ce=L*G*fe-I*B*ae+z,me=I*G*fe+L*B*ae+te,be=ue+Q*(-L*G*Z-I*B*ie),W=le+Q*(-I*G*Z+L*B*ie),re=ce+Q*(L*G*ae+I*B*fe),ge=me+Q*(I*G*ae-L*B*fe);return["C",be,W,re,ge,ce,me]}function o(D,O,L,I,G,B,z){var te=Math.PI,Q=z*te/180,ue=t.util.sin(Q),le=t.util.cos(Q),ie=0,Z=0;L=Math.abs(L),I=Math.abs(I);var fe=-le*D*.5-ue*O*.5,ae=-le*O*.5+ue*D*.5,ce=L*L,me=I*I,be=ae*ae,W=fe*fe,re=ce*me-ce*be-me*W,ge=0;if(re<0){var Y=Math.sqrt(1-re/(ce*me));L*=Y,I*=Y}else ge=(G===B?-1:1)*Math.sqrt(re/(ce*be+me*W));var ee=ge*L*ae/I,J=-ge*I*fe/L,xe=le*ee-ue*J+D*.5,Ce=ue*ee+le*J+O*.5,ke=c(1,0,(fe-ee)/L,(ae-J)/I),Ne=c((fe-ee)/L,(ae-J)/I,(-fe-ee)/L,(-ae-J)/I);B===0&&Ne>0?Ne-=2*te:B===1&&Ne<0&&(Ne+=2*te);for(var Oe=Math.ceil(Math.abs(Ne/te*2)),ze=[],$e=Ne/Oe,Ht=8/3*Math.sin($e/4)*Math.sin($e/4)/Math.sin($e/2),zt=ke+$e,Wt=0;Wt<Oe;Wt++)ze[Wt]=f(ke,zt,le,ue,L,I,xe,Ce,Ht,ie,Z),ie=ze[Wt][5],Z=ze[Wt][6],ke=zt,zt+=$e;return ze}function c(D,O,L,I){var G=Math.atan2(O,D),B=Math.atan2(I,L);return B>=G?B-G:2*Math.PI-(G-B)}function u(D,O,L,I,G,B,z,te){var Q;if(t.cachesBoundsOfCurve&&(Q=d.call(arguments),t.boundsOfCurveCache[Q]))return t.boundsOfCurveCache[Q];var ue=Math.sqrt,le=Math.min,ie=Math.max,Z=Math.abs,fe=[],ae=[[],[]],ce,me,be,W,re,ge,Y,ee;me=6*D-12*L+6*G,ce=-3*D+9*L-9*G+3*z,be=3*L-3*D;for(var J=0;J<2;++J){if(J>0&&(me=6*O-12*I+6*B,ce=-3*O+9*I-9*B+3*te,be=3*I-3*O),Z(ce)<1e-12){if(Z(me)<1e-12)continue;W=-be/me,0<W&&W<1&&fe.push(W);continue}Y=me*me-4*be*ce,!(Y<0)&&(ee=ue(Y),re=(-me+ee)/(2*ce),0<re&&re<1&&fe.push(re),ge=(-me-ee)/(2*ce),0<ge&&ge<1&&fe.push(ge))}for(var xe,Ce,ke=fe.length,Ne=ke,Oe;ke--;)W=fe[ke],Oe=1-W,xe=Oe*Oe*Oe*D+3*Oe*Oe*W*L+3*Oe*W*W*G+W*W*W*z,ae[0][ke]=xe,Ce=Oe*Oe*Oe*O+3*Oe*Oe*W*I+3*Oe*W*W*B+W*W*W*te,ae[1][ke]=Ce;ae[0][Ne]=D,ae[1][Ne]=O,ae[0][Ne+1]=z,ae[1][Ne+1]=te;var ze=[{x:le.apply(null,ae[0]),y:le.apply(null,ae[1])},{x:ie.apply(null,ae[0]),y:ie.apply(null,ae[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[Q]=ze),ze}function g(D,O,L){for(var I=L[1],G=L[2],B=L[3],z=L[4],te=L[5],Q=L[6],ue=L[7],le=o(Q-D,ue-O,I,G,z,te,B),ie=0,Z=le.length;ie<Z;ie++)le[ie][1]+=D,le[ie][2]+=O,le[ie][3]+=D,le[ie][4]+=O,le[ie][5]+=D,le[ie][6]+=O;return le}function y(D){var O=0,L=0,I=D.length,G=0,B=0,z,te,Q,ue=[],le,ie,Z;for(te=0;te<I;++te){switch(Q=!1,z=D[te].slice(0),z[0]){case"l":z[0]="L",z[1]+=O,z[2]+=L;case"L":O=z[1],L=z[2];break;case"h":z[1]+=O;case"H":z[0]="L",z[2]=L,O=z[1];break;case"v":z[1]+=L;case"V":z[0]="L",L=z[1],z[1]=O,z[2]=L;break;case"m":z[0]="M",z[1]+=O,z[2]+=L;case"M":O=z[1],L=z[2],G=z[1],B=z[2];break;case"c":z[0]="C",z[1]+=O,z[2]+=L,z[3]+=O,z[4]+=L,z[5]+=O,z[6]+=L;case"C":ie=z[3],Z=z[4],O=z[5],L=z[6];break;case"s":z[0]="S",z[1]+=O,z[2]+=L,z[3]+=O,z[4]+=L;case"S":le==="C"?(ie=2*O-ie,Z=2*L-Z):(ie=O,Z=L),O=z[3],L=z[4],z[0]="C",z[5]=z[3],z[6]=z[4],z[3]=z[1],z[4]=z[2],z[1]=ie,z[2]=Z,ie=z[3],Z=z[4];break;case"q":z[0]="Q",z[1]+=O,z[2]+=L,z[3]+=O,z[4]+=L;case"Q":ie=z[1],Z=z[2],O=z[3],L=z[4];break;case"t":z[0]="T",z[1]+=O,z[2]+=L;case"T":le==="Q"?(ie=2*O-ie,Z=2*L-Z):(ie=O,Z=L),z[0]="Q",O=z[1],L=z[2],z[1]=ie,z[2]=Z,z[3]=O,z[4]=L;break;case"a":z[0]="A",z[6]+=O,z[7]+=L;case"A":Q=!0,ue=ue.concat(g(O,L,z)),O=z[6],L=z[7];break;case"z":case"Z":O=G,L=B;break}Q||ue.push(z),le=z[0]}return ue}function x(D,O,L,I){return Math.sqrt((L-D)*(L-D)+(I-O)*(I-O))}function w(D){return D*D*D}function C(D){return 3*D*D*(1-D)}function j(D){return 3*D*(1-D)*(1-D)}function T(D){return(1-D)*(1-D)*(1-D)}function M(D,O,L,I,G,B,z,te){return function(Q){var ue=w(Q),le=C(Q),ie=j(Q),Z=T(Q);return{x:z*ue+G*le+L*ie+D*Z,y:te*ue+B*le+I*ie+O*Z}}}function E(D,O,L,I,G,B,z,te){return function(Q){var ue=1-Q,le=3*ue*ue*(L-D)+6*ue*Q*(G-L)+3*Q*Q*(z-G),ie=3*ue*ue*(I-O)+6*ue*Q*(B-I)+3*Q*Q*(te-B);return Math.atan2(ie,le)}}function A(D){return D*D}function R(D){return 2*D*(1-D)}function H(D){return(1-D)*(1-D)}function K(D,O,L,I,G,B){return function(z){var te=A(z),Q=R(z),ue=H(z);return{x:G*te+L*Q+D*ue,y:B*te+I*Q+O*ue}}}function X(D,O,L,I,G,B){return function(z){var te=1-z,Q=2*te*(L-D)+2*z*(G-L),ue=2*te*(I-O)+2*z*(B-I);return Math.atan2(ue,Q)}}function ne(D,O,L){var I={x:O,y:L},G,B=0,z;for(z=1;z<=100;z+=1)G=D(z/100),B+=x(I.x,I.y,G.x,G.y),I=G;return B}function de(D,O){for(var L=0,I=0,G=D.iterator,B={x:D.x,y:D.y},z,te,Q=.01,ue=D.angleFinder,le;I<O&&Q>1e-4;)z=G(L),le=L,te=x(B.x,B.y,z.x,z.y),te+I>O?(L-=Q,Q/=2):(B=z,L+=Q,I+=te);return z.angle=ue(le),z}function se(D){for(var O=0,L=D.length,I,G=0,B=0,z=0,te=0,Q=[],ue,le,ie,Z=0;Z<L;Z++){switch(I=D[Z],le={x:G,y:B,command:I[0]},I[0]){case"M":le.length=0,z=G=I[1],te=B=I[2];break;case"L":le.length=x(G,B,I[1],I[2]),G=I[1],B=I[2];break;case"C":ue=M(G,B,I[1],I[2],I[3],I[4],I[5],I[6]),ie=E(G,B,I[1],I[2],I[3],I[4],I[5],I[6]),le.iterator=ue,le.angleFinder=ie,le.length=ne(ue,G,B),G=I[5],B=I[6];break;case"Q":ue=K(G,B,I[1],I[2],I[3],I[4]),ie=X(G,B,I[1],I[2],I[3],I[4]),le.iterator=ue,le.angleFinder=ie,le.length=ne(ue,G,B),G=I[3],B=I[4];break;case"Z":case"z":le.destX=z,le.destY=te,le.length=x(G,B,z,te),G=z,B=te;break}O+=le.length,Q.push(le)}return Q.push({length:O,x:G,y:B}),Q}function q(D,O,L){L||(L=se(D));for(var I=0;O-L[I].length>0&&I<L.length-2;)O-=L[I].length,I++;var G=L[I],B=O/G.length,z=G.command,te=D[I],Q;switch(z){case"M":return{x:G.x,y:G.y,angle:0};case"Z":case"z":return Q=new t.Point(G.x,G.y).lerp(new t.Point(G.destX,G.destY),B),Q.angle=Math.atan2(G.destY-G.y,G.destX-G.x),Q;case"L":return Q=new t.Point(G.x,G.y).lerp(new t.Point(te[1],te[2]),B),Q.angle=Math.atan2(te[2]-G.y,te[1]-G.x),Q;case"C":return de(G,O);case"Q":return de(G,O)}}function P(D){var O=[],L=[],I,G,B=t.rePathCommand,z="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",te="("+z+")"+t.commaWsp,Q="([01])"+t.commaWsp+"?",ue=te+"?"+te+"?"+te+Q+Q+te+"?("+z+")",le=new RegExp(ue,"g"),ie,Z,fe;if(!D||!D.match)return O;fe=D.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ae=0,ce,me=fe.length;ae<me;ae++){I=fe[ae],Z=I.slice(1).trim(),L.length=0;var be=I.charAt(0);if(ce=[be],be.toLowerCase()==="a")for(var W;W=le.exec(Z);)for(var re=1;re<W.length;re++)L.push(W[re]);else for(;ie=B.exec(Z);)L.push(ie[0]);for(var re=0,ge=L.length;re<ge;re++)G=parseFloat(L[re]),isNaN(G)||ce.push(G);var Y=a[be.toLowerCase()],ee=l[be]||be;if(ce.length-1>Y)for(var J=1,xe=ce.length;J<xe;J+=Y)O.push([be].concat(ce.slice(J,J+Y))),be=ee;else O.push(ce)}return O}function $(D,O){var L=[],I,G=new t.Point(D[0].x,D[0].y),B=new t.Point(D[1].x,D[1].y),z=D.length,te=1,Q=0,ue=z>2;for(O=O||0,ue&&(te=D[2].x<B.x?-1:D[2].x===B.x?0:1,Q=D[2].y<B.y?-1:D[2].y===B.y?0:1),L.push(["M",G.x-te*O,G.y-Q*O]),I=1;I<z;I++){if(!G.eq(B)){var le=G.midPointFrom(B);L.push(["Q",G.x,G.y,le.x,le.y])}G=D[I],I+1<D.length&&(B=D[I+1])}return ue&&(te=G.x>D[I-2].x?1:G.x===D[I-2].x?0:-1,Q=G.y>D[I-2].y?1:G.y===D[I-2].y?0:-1),L.push(["L",G.x+te*O,G.y+Q*O]),L}function V(D,O,L){return L&&(O=t.util.multiplyTransformMatrices(O,[1,0,0,1,-L.x,-L.y])),D.map(function(I){for(var G=I.slice(0),B={},z=1;z<I.length-1;z+=2)B.x=I[z],B.y=I[z+1],B=t.util.transformPoint(B,O),G[z]=B.x,G[z+1]=B.y;return G})}t.util.joinPath=function(D){return D.map(function(O){return O.join(" ")}).join(" ")},t.util.parsePath=P,t.util.makePathSimpler=y,t.util.getSmoothPathFromPoints=$,t.util.getPathSegmentsInfo=se,t.util.getBoundsOfCurve=u,t.util.getPointOnPath=q,t.util.transformPath=V}(),function(){var d=Array.prototype.slice;function a(u,g){for(var y=d.call(arguments,2),x=[],w=0,C=u.length;w<C;w++)x[w]=y.length?u[w][g].apply(u[w],y):u[w][g].call(u[w]);return x}function l(u,g){return c(u,g,function(y,x){return y>=x})}function f(u,g){return c(u,g,function(y,x){return y<x})}function o(u,g){for(var y=u.length;y--;)u[y]=g;return u}function c(u,g,y){if(!(!u||u.length===0)){var x=u.length-1,w=g?u[x][g]:u[x];if(g)for(;x--;)y(u[x][g],w)&&(w=u[x][g]);else for(;x--;)y(u[x],w)&&(w=u[x]);return w}}t.util.array={fill:o,invoke:a,min:f,max:l}}(),function(){function d(l,f,o){if(o)if(!t.isLikelyNode&&f instanceof Element)l=f;else if(f instanceof Array){l=[];for(var c=0,u=f.length;c<u;c++)l[c]=d({},f[c],o)}else if(f&&typeof f=="object")for(var g in f)g==="canvas"||g==="group"?l[g]=null:f.hasOwnProperty(g)&&(l[g]=d({},f[g],o));else l=f;else for(var g in f)l[g]=f[g];return l}function a(l,f){return d({},l,f)}t.util.object={extend:d,clone:a},t.util.object.extend(t.util,t.Observable)}(),function(){function d(c){return c.replace(/-+(.)?/g,function(u,g){return g?g.toUpperCase():""})}function a(c,u){return c.charAt(0).toUpperCase()+(u?c.slice(1):c.slice(1).toLowerCase())}function l(c){return c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(c){var u=0,g,y=[];for(u=0,g;u<c.length;u++)(g=o(c,u))!==!1&&y.push(g);return y}function o(c,u){var g=c.charCodeAt(u);if(isNaN(g))return"";if(g<55296||g>57343)return c.charAt(u);if(55296<=g&&g<=56319){if(c.length<=u+1)throw"High surrogate without following low surrogate";var y=c.charCodeAt(u+1);if(56320>y||y>57343)throw"High surrogate without following low surrogate";return c.charAt(u)+c.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var x=c.charCodeAt(u-1);if(55296>x||x>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:d,capitalize:a,escapeXml:l,graphemeSplit:f}}(),function(){var d=Array.prototype.slice,a=function(){},l=function(){for(var g in{toString:1})if(g==="toString")return!1;return!0}(),f=function(g,y,x){for(var w in y)w in g.prototype&&typeof g.prototype[w]=="function"&&(y[w]+"").indexOf("callSuper")>-1?g.prototype[w]=function(C){return function(){var j=this.constructor.superclass;this.constructor.superclass=x;var T=y[C].apply(this,arguments);if(this.constructor.superclass=j,C!=="initialize")return T}}(w):g.prototype[w]=y[w],l&&(y.toString!==Object.prototype.toString&&(g.prototype.toString=y.toString),y.valueOf!==Object.prototype.valueOf&&(g.prototype.valueOf=y.valueOf))};function o(){}function c(g){for(var y=null,x=this;x.constructor.superclass;){var w=x.constructor.superclass.prototype[g];if(x[g]!==w){y=w;break}x=x.constructor.superclass.prototype}return y?arguments.length>1?y.apply(this,d.call(arguments,1)):y.call(this):console.log("tried to callSuper "+g+", method not found in prototype chain",this)}function u(){var g=null,y=d.call(arguments,0);typeof y[0]=="function"&&(g=y.shift());function x(){this.initialize.apply(this,arguments)}x.superclass=g,x.subclasses=[],g&&(o.prototype=g.prototype,x.prototype=new o,g.subclasses.push(x));for(var w=0,C=y.length;w<C;w++)f(x,y[w],g);return x.prototype.initialize||(x.prototype.initialize=a),x.prototype.constructor=x,x.prototype.callSuper=c,x}t.util.createClass=u}(),function(){var d=!!t.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"];t.util.addListener=function(f,o,c,u){f&&f.addEventListener(o,c,d?!1:u)},t.util.removeListener=function(f,o,c,u){f&&f.removeEventListener(o,c,d?!1:u)};function l(f){var o=f.changedTouches;return o&&o[0]?o[0]:f}t.util.getPointer=function(f){var o=f.target,c=t.util.getScrollLeftTop(o),u=l(f);return{x:u.clientX+c.left,y:u.clientY+c.top}},t.util.isTouchEvent=function(f){return a.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function d(u,g){var y=u.style;if(!y)return u;if(typeof g=="string")return u.style.cssText+=";"+g,g.indexOf("opacity")>-1?c(u,g.match(/opacity:\s*(\d?\.?\d*)/)[1]):u;for(var x in g)if(x==="opacity")c(u,g[x]);else{var w=x==="float"||x==="cssFloat"?typeof y.styleFloat>"u"?"cssFloat":"styleFloat":x;y.setProperty(w,g[x])}return u}var a=t.document.createElement("div"),l=typeof a.style.opacity=="string",f=typeof a.style.filter=="string",o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,c=function(u){return u};l?c=function(u,g){return u.style.opacity=g,u}:f&&(c=function(u,g){var y=u.style;return u.currentStyle&&!u.currentStyle.hasLayout&&(y.zoom=1),o.test(y.filter)?(g=g>=.9999?"":"alpha(opacity="+g*100+")",y.filter=y.filter.replace(o,g)):y.filter+=" alpha(opacity="+g*100+")",u}),t.util.setStyle=d}(),function(){var d=Array.prototype.slice;function a(T){return typeof T=="string"?t.document.getElementById(T):T}var l,f=function(T){return d.call(T,0)};try{l=f(t.document.childNodes)instanceof Array}catch{}l||(f=function(T){for(var M=new Array(T.length),E=T.length;E--;)M[E]=T[E];return M});function o(T,M){var E=t.document.createElement(T);for(var A in M)A==="class"?E.className=M[A]:A==="for"?E.htmlFor=M[A]:E.setAttribute(A,M[A]);return E}function c(T,M){T&&(" "+T.className+" ").indexOf(" "+M+" ")===-1&&(T.className+=(T.className?" ":"")+M)}function u(T,M,E){return typeof M=="string"&&(M=o(M,E)),T.parentNode&&T.parentNode.replaceChild(M,T),M.appendChild(T),M}function g(T){for(var M=0,E=0,A=t.document.documentElement,R=t.document.body||{scrollLeft:0,scrollTop:0};T&&(T.parentNode||T.host)&&(T=T.parentNode||T.host,T===t.document?(M=R.scrollLeft||A.scrollLeft||0,E=R.scrollTop||A.scrollTop||0):(M+=T.scrollLeft||0,E+=T.scrollTop||0),!(T.nodeType===1&&T.style.position==="fixed")););return{left:M,top:E}}function y(T){var M,E=T&&T.ownerDocument,A={left:0,top:0},R={left:0,top:0},H,K={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!E)return R;for(var X in K)R[K[X]]+=parseInt(x(T,X),10)||0;return M=E.documentElement,typeof T.getBoundingClientRect<"u"&&(A=T.getBoundingClientRect()),H=g(T),{left:A.left+H.left-(M.clientLeft||0)+R.left,top:A.top+H.top-(M.clientTop||0)+R.top}}var x;t.document.defaultView&&t.document.defaultView.getComputedStyle?x=function(T,M){var E=t.document.defaultView.getComputedStyle(T,null);return E?E[M]:void 0}:x=function(T,M){var E=T.style[M];return!E&&T.currentStyle&&(E=T.currentStyle[M]),E},function(){var T=t.document.documentElement.style,M="userSelect"in T?"userSelect":"MozUserSelect"in T?"MozUserSelect":"WebkitUserSelect"in T?"WebkitUserSelect":"KhtmlUserSelect"in T?"KhtmlUserSelect":"";function E(R){return typeof R.onselectstart<"u"&&(R.onselectstart=t.util.falseFunction),M?R.style[M]="none":typeof R.unselectable=="string"&&(R.unselectable="on"),R}function A(R){return typeof R.onselectstart<"u"&&(R.onselectstart=null),M?R.style[M]="":typeof R.unselectable=="string"&&(R.unselectable=""),R}t.util.makeElementUnselectable=E,t.util.makeElementSelectable=A}();function w(T){var M=t.jsdomImplForWrapper(T);return M._canvas||M._image}function C(T){if(t.isLikelyNode){var M=t.jsdomImplForWrapper(T);M&&(M._image=null,M._canvas=null,M._currentSrc=null,M._attributes=null,M._classList=null)}}function j(T,M){T.imageSmoothingEnabled=T.imageSmoothingEnabled||T.webkitImageSmoothingEnabled||T.mozImageSmoothingEnabled||T.msImageSmoothingEnabled||T.oImageSmoothingEnabled,T.imageSmoothingEnabled=M}t.util.setImageSmoothing=j,t.util.getById=a,t.util.toArray=f,t.util.addClass=c,t.util.makeElement=o,t.util.wrapElement=u,t.util.getScrollLeftTop=g,t.util.getElementOffset=y,t.util.getNodeCanvas=w,t.util.cleanUpJsdomNode=C}(),function(){function d(f,o){return f+(/\?/.test(f)?"&":"?")+o}function a(){}function l(f,o){o||(o={});var c=o.method?o.method.toUpperCase():"GET",u=o.onComplete||function(){},g=new t.window.XMLHttpRequest,y=o.body||o.parameters;return g.onreadystatechange=function(){g.readyState===4&&(u(g),g.onreadystatechange=a)},c==="GET"&&(y=null,typeof o.parameters=="string"&&(f=d(f,o.parameters))),g.open(c,f,!0),(c==="POST"||c==="PUT")&&g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(y),g}t.util.request=l}(),t.log=console.log,t.warn=console.warn,function(){var d=t.util.object.extend,a=t.util.object.clone,l=[];t.util.object.extend(l,{cancelAll:function(){var w=this.splice(0);return w.forEach(function(C){C.cancel()}),w},cancelByCanvas:function(w){if(!w)return[];var C=this.filter(function(j){return typeof j.target=="object"&&j.target.canvas===w});return C.forEach(function(j){j.cancel()}),C},cancelByTarget:function(w){var C=this.findAnimationsByTarget(w);return C.forEach(function(j){j.cancel()}),C},findAnimationIndex:function(w){return this.indexOf(this.findAnimation(w))},findAnimation:function(w){return this.find(function(C){return C.cancel===w})},findAnimationsByTarget:function(w){return w?this.filter(function(C){return C.target===w}):[]}});function f(){return!1}function o(w,C,j,T){return-j*Math.cos(w/T*(Math.PI/2))+j+C}function c(w){w||(w={});var C=!1,j,T=function(){var M=t.runningAnimations.indexOf(j);return M>-1&&t.runningAnimations.splice(M,1)[0]};return j=d(a(w),{cancel:function(){return C=!0,T()},currentValue:"startValue"in w?w.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(j),y(function(M){var E=M||+new Date,A=w.duration||500,R=E+A,H,K=w.onChange||f,X=w.abort||f,ne=w.onComplete||f,de=w.easing||o,se="startValue"in w?w.startValue.length>0:!1,q="startValue"in w?w.startValue:0,P="endValue"in w?w.endValue:100,$=w.byValue||(se?q.map(function(V,D){return P[D]-q[D]}):P-q);w.onStart&&w.onStart(),function V(D){H=D||+new Date;var O=H>R?A:H-E,L=O/A,I=se?q.map(function(B,z){return de(O,q[z],$[z],A)}):de(O,q,$,A),G=Math.abs(se?(I[0]-q[0])/$[0]:(I-q)/$);if(j.currentValue=se?I.slice():I,j.completionRate=G,j.durationRate=L,!C){if(X(I,G,L)){T();return}if(H>R){j.currentValue=se?P.slice():P,j.completionRate=1,j.durationRate=1,K(se?P.slice():P,1,1),ne(P,1,1),T();return}else K(I,G,L),y(V)}}(E)}),j.cancel}var u=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(w){return t.window.setTimeout(w,1e3/60)},g=t.window.cancelAnimationFrame||t.window.clearTimeout;function y(){return u.apply(t.window,arguments)}function x(){return g.apply(t.window,arguments)}t.util.animate=c,t.util.requestAnimFrame=y,t.util.cancelAnimFrame=x,t.runningAnimations=l}(),function(){function d(l,f,o){var c="rgba("+parseInt(l[0]+o*(f[0]-l[0]),10)+","+parseInt(l[1]+o*(f[1]-l[1]),10)+","+parseInt(l[2]+o*(f[2]-l[2]),10);return c+=","+(l&&f?parseFloat(l[3]+o*(f[3]-l[3])):1),c+=")",c}function a(l,f,o,c){var u=new t.Color(l).getSource(),g=new t.Color(f).getSource(),y=c.onComplete,x=c.onChange;return c=c||{},t.util.animate(t.util.object.extend(c,{duration:o||500,startValue:u,endValue:g,byValue:g,easing:function(w,C,j,T){var M=c.colorEasing?c.colorEasing(w,T):1-Math.cos(w/T*(Math.PI/2));return d(C,j,M)},onComplete:function(w,C,j){if(y)return y(d(g,g,0),C,j)},onChange:function(w,C,j){if(x){if(Array.isArray(w))return x(d(w,w,0),C,j);x(w,C,j)}}}))}t.util.animateColor=a}(),function(){function d(D,O,L,I){return D<Math.abs(O)?(D=O,I=L/4):O===0&&D===0?I=L/(2*Math.PI)*Math.asin(1):I=L/(2*Math.PI)*Math.asin(O/D),{a:D,c:O,p:L,s:I}}function a(D,O,L){return D.a*Math.pow(2,10*(O-=1))*Math.sin((O*L-D.s)*(2*Math.PI)/D.p)}function l(D,O,L,I){return L*((D=D/I-1)*D*D+1)+O}function f(D,O,L,I){return D/=I/2,D<1?L/2*D*D*D+O:L/2*((D-=2)*D*D+2)+O}function o(D,O,L,I){return L*(D/=I)*D*D*D+O}function c(D,O,L,I){return-L*((D=D/I-1)*D*D*D-1)+O}function u(D,O,L,I){return D/=I/2,D<1?L/2*D*D*D*D+O:-L/2*((D-=2)*D*D*D-2)+O}function g(D,O,L,I){return L*(D/=I)*D*D*D*D+O}function y(D,O,L,I){return L*((D=D/I-1)*D*D*D*D+1)+O}function x(D,O,L,I){return D/=I/2,D<1?L/2*D*D*D*D*D+O:L/2*((D-=2)*D*D*D*D+2)+O}function w(D,O,L,I){return-L*Math.cos(D/I*(Math.PI/2))+L+O}function C(D,O,L,I){return L*Math.sin(D/I*(Math.PI/2))+O}function j(D,O,L,I){return-L/2*(Math.cos(Math.PI*D/I)-1)+O}function T(D,O,L,I){return D===0?O:L*Math.pow(2,10*(D/I-1))+O}function M(D,O,L,I){return D===I?O+L:L*(-Math.pow(2,-10*D/I)+1)+O}function E(D,O,L,I){return D===0?O:D===I?O+L:(D/=I/2,D<1?L/2*Math.pow(2,10*(D-1))+O:L/2*(-Math.pow(2,-10*--D)+2)+O)}function A(D,O,L,I){return-L*(Math.sqrt(1-(D/=I)*D)-1)+O}function R(D,O,L,I){return L*Math.sqrt(1-(D=D/I-1)*D)+O}function H(D,O,L,I){return D/=I/2,D<1?-L/2*(Math.sqrt(1-D*D)-1)+O:L/2*(Math.sqrt(1-(D-=2)*D)+1)+O}function K(D,O,L,I){var G=1.70158,B=0,z=L;if(D===0)return O;if(D/=I,D===1)return O+L;B||(B=I*.3);var te=d(z,L,B,G);return-a(te,D,I)+O}function X(D,O,L,I){var G=1.70158,B=0,z=L;if(D===0)return O;if(D/=I,D===1)return O+L;B||(B=I*.3);var te=d(z,L,B,G);return te.a*Math.pow(2,-10*D)*Math.sin((D*I-te.s)*(2*Math.PI)/te.p)+te.c+O}function ne(D,O,L,I){var G=1.70158,B=0,z=L;if(D===0)return O;if(D/=I/2,D===2)return O+L;B||(B=I*(.3*1.5));var te=d(z,L,B,G);return D<1?-.5*a(te,D,I)+O:te.a*Math.pow(2,-10*(D-=1))*Math.sin((D*I-te.s)*(2*Math.PI)/te.p)*.5+te.c+O}function de(D,O,L,I,G){return G===void 0&&(G=1.70158),L*(D/=I)*D*((G+1)*D-G)+O}function se(D,O,L,I,G){return G===void 0&&(G=1.70158),L*((D=D/I-1)*D*((G+1)*D+G)+1)+O}function q(D,O,L,I,G){return G===void 0&&(G=1.70158),D/=I/2,D<1?L/2*(D*D*(((G*=1.525)+1)*D-G))+O:L/2*((D-=2)*D*(((G*=1.525)+1)*D+G)+2)+O}function P(D,O,L,I){return L-$(I-D,0,L,I)+O}function $(D,O,L,I){return(D/=I)<1/2.75?L*(7.5625*D*D)+O:D<2/2.75?L*(7.5625*(D-=1.5/2.75)*D+.75)+O:D<2.5/2.75?L*(7.5625*(D-=2.25/2.75)*D+.9375)+O:L*(7.5625*(D-=2.625/2.75)*D+.984375)+O}function V(D,O,L,I){return D<I/2?P(D*2,0,L,I)*.5+O:$(D*2-I,0,L,I)*.5+L*.5+O}t.util.ease={easeInQuad:function(D,O,L,I){return L*(D/=I)*D+O},easeOutQuad:function(D,O,L,I){return-L*(D/=I)*(D-2)+O},easeInOutQuad:function(D,O,L,I){return D/=I/2,D<1?L/2*D*D+O:-L/2*(--D*(D-2)-1)+O},easeInCubic:function(D,O,L,I){return L*(D/=I)*D*D+O},easeOutCubic:l,easeInOutCubic:f,easeInQuart:o,easeOutQuart:c,easeInOutQuart:u,easeInQuint:g,easeOutQuint:y,easeInOutQuint:x,easeInSine:w,easeOutSine:C,easeInOutSine:j,easeInExpo:T,easeOutExpo:M,easeInOutExpo:E,easeInCirc:A,easeOutCirc:R,easeInOutCirc:H,easeInElastic:K,easeOutElastic:X,easeInOutElastic:ne,easeInBack:de,easeOutBack:se,easeInOutBack:q,easeInBounce:P,easeOutBounce:$,easeInOutBounce:V}}(),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.util.object.clone,o=a.util.toFixed,c=a.util.parseUnit,u=a.util.multiplyTransformMatrices,g=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],y=["symbol","image","marker","pattern","view","svg"],x=["pattern","defs","symbol","metadata","clipPath","mask","desc"],w=["symbol","g","a","svg","clipPath","defs"],C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},j={stroke:"strokeOpacity",fill:"fillOpacity"},T="font-size",M="clip-path";a.svgValidTagNamesRegEx=R(g),a.svgViewBoxElementsRegEx=R(y),a.svgInvalidAncestorsRegEx=R(x),a.svgValidParentsRegEx=R(w),a.cssRules={},a.gradientDefs={},a.clipPaths={};function E(B){return B in C?C[B]:B}function A(B,z,te,Q){var ue=Array.isArray(z),le;if((B==="fill"||B==="stroke")&&z==="none")z="";else{if(B==="strokeUniform")return z==="non-scaling-stroke";if(B==="strokeDashArray")z==="none"?z=null:z=z.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(B==="transformMatrix")te&&te.transformMatrix?z=u(te.transformMatrix,a.parseTransformAttribute(z)):z=a.parseTransformAttribute(z);else if(B==="visible")z=z!=="none"&&z!=="hidden",te&&te.visible===!1&&(z=!1);else if(B==="opacity")z=parseFloat(z),te&&typeof te.opacity<"u"&&(z*=te.opacity);else if(B==="textAnchor")z=z==="start"?"left":z==="end"?"right":"center";else if(B==="charSpacing")le=c(z,Q)/Q*1e3;else if(B==="paintFirst"){var ie=z.indexOf("fill"),Z=z.indexOf("stroke"),z="fill";(ie>-1&&Z>-1&&Z<ie||ie===-1&&Z>-1)&&(z="stroke")}else{if(B==="href"||B==="xlink:href"||B==="font")return z;if(B==="imageSmoothing")return z==="optimizeQuality";le=ue?z.map(c):c(z,Q)}}return!ue&&isNaN(le)?z:le}function R(B){return new RegExp("^("+B.join("|")+")\\b","i")}function H(B){for(var z in j)if(!(typeof B[j[z]]>"u"||B[z]==="")){if(typeof B[z]>"u"){if(!a.Object.prototype[z])continue;B[z]=a.Object.prototype[z]}if(B[z].indexOf("url(")!==0){var te=new a.Color(B[z]);B[z]=te.setAlpha(o(te.getAlpha()*B[j[z]],2)).toRgba()}}return B}function K(B,z){var te,Q=[],ue,le,ie;for(le=0,ie=z.length;le<ie;le++)te=z[le],ue=B.getElementsByTagName(te),Q=Q.concat(Array.prototype.slice.call(ue));return Q}a.parseTransformAttribute=function(){function B(J,xe){var Ce=a.util.cos(xe[0]),ke=a.util.sin(xe[0]),Ne=0,Oe=0;xe.length===3&&(Ne=xe[1],Oe=xe[2]),J[0]=Ce,J[1]=ke,J[2]=-ke,J[3]=Ce,J[4]=Ne-(Ce*Ne-ke*Oe),J[5]=Oe-(ke*Ne+Ce*Oe)}function z(J,xe){var Ce=xe[0],ke=xe.length===2?xe[1]:xe[0];J[0]=Ce,J[3]=ke}function te(J,xe,Ce){J[Ce]=Math.tan(a.util.degreesToRadians(xe[0]))}function Q(J,xe){J[4]=xe[0],xe.length===2&&(J[5]=xe[1])}var ue=a.iMatrix,le=a.reNum,ie=a.commaWsp,Z="(?:(skewX)\\s*\\(\\s*("+le+")\\s*\\))",fe="(?:(skewY)\\s*\\(\\s*("+le+")\\s*\\))",ae="(?:(rotate)\\s*\\(\\s*("+le+")(?:"+ie+"("+le+")"+ie+"("+le+"))?\\s*\\))",ce="(?:(scale)\\s*\\(\\s*("+le+")(?:"+ie+"("+le+"))?\\s*\\))",me="(?:(translate)\\s*\\(\\s*("+le+")(?:"+ie+"("+le+"))?\\s*\\))",be="(?:(matrix)\\s*\\(\\s*("+le+")"+ie+"("+le+")"+ie+"("+le+")"+ie+"("+le+")"+ie+"("+le+")"+ie+"("+le+")\\s*\\))",W="(?:"+be+"|"+me+"|"+ce+"|"+ae+"|"+Z+"|"+fe+")",re="(?:"+W+"(?:"+ie+"*"+W+")*)",ge="^\\s*(?:"+re+"?)\\s*$",Y=new RegExp(ge),ee=new RegExp(W,"g");return function(J){var xe=ue.concat(),Ce=[];if(!J||J&&!Y.test(J))return xe;J.replace(ee,function(Ne){var Oe=new RegExp(W).exec(Ne).filter(function(Ht){return!!Ht}),ze=Oe[1],$e=Oe.slice(2).map(parseFloat);switch(ze){case"translate":Q(xe,$e);break;case"rotate":$e[0]=a.util.degreesToRadians($e[0]),B(xe,$e);break;case"scale":z(xe,$e);break;case"skewX":te(xe,$e,2);break;case"skewY":te(xe,$e,1);break;case"matrix":xe=$e;break}Ce.push(xe.concat()),xe=ue.concat()});for(var ke=Ce[0];Ce.length>1;)Ce.shift(),ke=a.util.multiplyTransformMatrices(ke,Ce[0]);return ke}}();function X(B,z){var te,Q;B.replace(/;\s*$/,"").split(";").forEach(function(ue){var le=ue.split(":");te=le[0].trim().toLowerCase(),Q=le[1].trim(),z[te]=Q})}function ne(B,z){var te,Q;for(var ue in B)typeof B[ue]>"u"||(te=ue.toLowerCase(),Q=B[ue],z[te]=Q)}function de(B,z){var te={};for(var Q in a.cssRules[z])if(se(B,Q.split(" ")))for(var ue in a.cssRules[z][Q])te[ue]=a.cssRules[z][Q][ue];return te}function se(B,z){var te,Q=!0;return te=P(B,z.pop()),te&&z.length&&(Q=q(B,z)),te&&Q&&z.length===0}function q(B,z){for(var te,Q=!0;B.parentNode&&B.parentNode.nodeType===1&&z.length;)Q&&(te=z.pop()),B=B.parentNode,Q=P(B,te);return z.length===0}function P(B,z){var te=B.nodeName,Q=B.getAttribute("class"),ue=B.getAttribute("id"),le,ie;if(le=new RegExp("^"+te,"i"),z=z.replace(le,""),ue&&z.length&&(le=new RegExp("#"+ue+"(?![a-zA-Z\\-]+)","i"),z=z.replace(le,"")),Q&&z.length)for(Q=Q.split(" "),ie=Q.length;ie--;)le=new RegExp("\\."+Q[ie]+"(?![a-zA-Z\\-]+)","i"),z=z.replace(le,"");return z.length===0}function $(B,z){var te;if(B.getElementById&&(te=B.getElementById(z)),te)return te;var Q,ue,le,ie=B.getElementsByTagName("*");for(ue=0,le=ie.length;ue<le;ue++)if(Q=ie[ue],z===Q.getAttribute("id"))return Q}function V(B){for(var z=K(B,["use","svg:use"]),te=0;z.length&&te<z.length;){var Q=z[te],ue=Q.getAttribute("xlink:href")||Q.getAttribute("href");if(ue===null)return;var le=ue.slice(1),ie=Q.getAttribute("x")||0,Z=Q.getAttribute("y")||0,fe=$(B,le).cloneNode(!0),ae=(fe.getAttribute("transform")||"")+" translate("+ie+", "+Z+")",ce,me=z.length,be,W,re,ge,Y=a.svgNS;if(O(fe),/^svg$/i.test(fe.nodeName)){var ee=fe.ownerDocument.createElementNS(Y,"g");for(W=0,re=fe.attributes,ge=re.length;W<ge;W++)be=re.item(W),ee.setAttributeNS(Y,be.nodeName,be.nodeValue);for(;fe.firstChild;)ee.appendChild(fe.firstChild);fe=ee}for(W=0,re=Q.attributes,ge=re.length;W<ge;W++)be=re.item(W),!(be.nodeName==="x"||be.nodeName==="y"||be.nodeName==="xlink:href"||be.nodeName==="href")&&(be.nodeName==="transform"?ae=be.nodeValue+" "+ae:fe.setAttribute(be.nodeName,be.nodeValue));fe.setAttribute("transform",ae),fe.setAttribute("instantiated_by_use","1"),fe.removeAttribute("id"),ce=Q.parentNode,ce.replaceChild(fe,Q),z.length===me&&te++}}var D=new RegExp("^\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*,?\\s*("+a.reNum+"+)\\s*$");function O(B){if(!a.svgViewBoxElementsRegEx.test(B.nodeName))return{};var z=B.getAttribute("viewBox"),te=1,Q=1,ue=0,le=0,ie,Z,fe,ae,ce=B.getAttribute("width"),me=B.getAttribute("height"),be=B.getAttribute("x")||0,W=B.getAttribute("y")||0,re=B.getAttribute("preserveAspectRatio")||"",ge=!z||!(z=z.match(D)),Y=!ce||!me||ce==="100%"||me==="100%",ee=ge&&Y,J={},xe="",Ce=0,ke=0;if(J.width=0,J.height=0,J.toBeParsed=ee,ge&&(be||W)&&B.parentNode&&B.parentNode.nodeName!=="#document"&&(xe=" translate("+c(be)+" "+c(W)+") ",fe=(B.getAttribute("transform")||"")+xe,B.setAttribute("transform",fe),B.removeAttribute("x"),B.removeAttribute("y")),ee)return J;if(ge)return J.width=c(ce),J.height=c(me),J;if(ue=-parseFloat(z[1]),le=-parseFloat(z[2]),ie=parseFloat(z[3]),Z=parseFloat(z[4]),J.minX=ue,J.minY=le,J.viewBoxWidth=ie,J.viewBoxHeight=Z,Y?(J.width=ie,J.height=Z):(J.width=c(ce),J.height=c(me),te=J.width/ie,Q=J.height/Z),re=a.util.parsePreserveAspectRatioAttribute(re),re.alignX!=="none"&&(re.meetOrSlice==="meet"&&(Q=te=te>Q?Q:te),re.meetOrSlice==="slice"&&(Q=te=te>Q?te:Q),Ce=J.width-ie*te,ke=J.height-Z*te,re.alignX==="Mid"&&(Ce/=2),re.alignY==="Mid"&&(ke/=2),re.alignX==="Min"&&(Ce=0),re.alignY==="Min"&&(ke=0)),te===1&&Q===1&&ue===0&&le===0&&be===0&&W===0)return J;if((be||W)&&B.parentNode.nodeName!=="#document"&&(xe=" translate("+c(be)+" "+c(W)+") "),fe=xe+" matrix("+te+" 0 0 "+Q+" "+(ue*te+Ce)+" "+(le*Q+ke)+") ",B.nodeName==="svg"){for(ae=B.ownerDocument.createElementNS(a.svgNS,"g");B.firstChild;)ae.appendChild(B.firstChild);B.appendChild(ae)}else ae=B,ae.removeAttribute("x"),ae.removeAttribute("y"),fe=ae.getAttribute("transform")+fe;return ae.setAttribute("transform",fe),J}function L(B,z){for(;B&&(B=B.parentNode);)if(B.nodeName&&z.test(B.nodeName.replace("svg:",""))&&!B.getAttribute("instantiated_by_use"))return!0;return!1}a.parseSVGDocument=function(B,z,te,Q){if(B){V(B);var ue=a.Object.__uid++,le,ie,Z=O(B),fe=a.util.toArray(B.getElementsByTagName("*"));if(Z.crossOrigin=Q&&Q.crossOrigin,Z.svgUid=ue,fe.length===0&&a.isLikelyNode){fe=B.selectNodes('//*[name(.)!="svg"]');var ae=[];for(le=0,ie=fe.length;le<ie;le++)ae[le]=fe[le];fe=ae}var ce=fe.filter(function(be){return O(be),a.svgValidTagNamesRegEx.test(be.nodeName.replace("svg:",""))&&!L(be,a.svgInvalidAncestorsRegEx)});if(!ce||ce&&!ce.length){z&&z([],{});return}var me={};fe.filter(function(be){return be.nodeName.replace("svg:","")==="clipPath"}).forEach(function(be){var W=be.getAttribute("id");me[W]=a.util.toArray(be.getElementsByTagName("*")).filter(function(re){return a.svgValidTagNamesRegEx.test(re.nodeName.replace("svg:",""))})}),a.gradientDefs[ue]=a.getGradientDefs(B),a.cssRules[ue]=a.getCSSRules(B),a.clipPaths[ue]=me,a.parseElements(ce,function(be,W){z&&(z(be,Z,W,fe),delete a.gradientDefs[ue],delete a.cssRules[ue],delete a.clipPaths[ue])},f(Z),te,Q)}};function I(B,z){var te=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Q="xlink:href",ue=z.getAttribute(Q).slice(1),le=$(B,ue);if(le&&le.getAttribute(Q)&&I(B,le),te.forEach(function(Z){le&&!z.hasAttribute(Z)&&le.hasAttribute(Z)&&z.setAttribute(Z,le.getAttribute(Z))}),!z.children.length)for(var ie=le.cloneNode(!0);ie.firstChild;)z.appendChild(ie.firstChild);z.removeAttribute(Q)}var G=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+a.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+a.reNum+"))?\\s+(.*)");l(a,{parseFontDeclaration:function(B,z){var te=B.match(G);if(te){var Q=te[1],ue=te[3],le=te[4],ie=te[5],Z=te[6];Q&&(z.fontStyle=Q),ue&&(z.fontWeight=isNaN(parseFloat(ue))?ue:parseFloat(ue)),le&&(z.fontSize=c(le)),Z&&(z.fontFamily=Z),ie&&(z.lineHeight=ie==="normal"?1:ie)}},getGradientDefs:function(B){var z=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],te=K(B,z),Q,ue=0,le={};for(ue=te.length;ue--;)Q=te[ue],Q.getAttribute("xlink:href")&&I(B,Q),le[Q.getAttribute("id")]=Q;return le},parseAttributes:function(B,z,te){if(B){var Q,ue={},le,ie;typeof te>"u"&&(te=B.getAttribute("svgUid")),B.parentNode&&a.svgValidParentsRegEx.test(B.parentNode.nodeName)&&(ue=a.parseAttributes(B.parentNode,z,te));var Z=z.reduce(function(re,ge){return Q=B.getAttribute(ge),Q&&(re[ge]=Q),re},{}),fe=l(de(B,te),a.parseStyleAttribute(B));Z=l(Z,fe),fe[M]&&B.setAttribute(M,fe[M]),le=ie=ue.fontSize||a.Text.DEFAULT_SVG_FONT_SIZE,Z[T]&&(Z[T]=le=c(Z[T],ie));var ae,ce,me={};for(var be in Z)ae=E(be),ce=A(ae,Z[be],ue,le),me[ae]=ce;me&&me.font&&a.parseFontDeclaration(me.font,me);var W=l(ue,me);return a.svgValidParentsRegEx.test(B.nodeName)?W:H(W)}},parseElements:function(B,z,te,Q,ue){new a.ElementsParser(B,z,te,Q,ue).parse()},parseStyleAttribute:function(B){var z={},te=B.getAttribute("style");return te&&(typeof te=="string"?X(te,z):ne(te,z)),z},parsePointsAttribute:function(B){if(!B)return null;B=B.replace(/,/g," ").trim(),B=B.split(/\s+/);var z=[],te,Q;for(te=0,Q=B.length;te<Q;te+=2)z.push({x:parseFloat(B[te]),y:parseFloat(B[te+1])});return z},getCSSRules:function(B){var z=B.getElementsByTagName("style"),te,Q,ue={},le;for(te=0,Q=z.length;te<Q;te++){var ie=z[te].textContent;ie=ie.replace(/\/\*[\s\S]*?\*\//g,""),ie.trim()!==""&&(le=ie.split("}"),le=le.filter(function(Z){return Z.trim()}),le.forEach(function(Z){var fe=Z.split("{"),ae={},ce=fe[1].trim(),me=ce.split(";").filter(function(ge){return ge.trim()});for(te=0,Q=me.length;te<Q;te++){var be=me[te].split(":"),W=be[0].trim(),re=be[1].trim();ae[W]=re}Z=fe[0].trim(),Z.split(",").forEach(function(ge){ge=ge.replace(/^svg/i,"").trim(),ge!==""&&(ue[ge]?a.util.object.extend(ue[ge],ae):ue[ge]=a.util.object.clone(ae))})}))}return ue},loadSVGFromURL:function(B,z,te,Q){B=B.replace(/^\n\s*/,"").trim(),new a.util.request(B,{method:"get",onComplete:ue});function ue(le){var ie=le.responseXML;if(!ie||!ie.documentElement)return z&&z(null),!1;a.parseSVGDocument(ie.documentElement,function(Z,fe,ae,ce){z&&z(Z,fe,ae,ce)},te,Q)}},loadSVGFromString:function(B,z,te,Q){var ue=new a.window.DOMParser,le=ue.parseFromString(B.trim(),"text/xml");a.parseSVGDocument(le.documentElement,function(ie,Z,fe,ae){z(ie,Z,fe,ae)},te,Q)}})}(e),t.ElementsParser=function(d,a,l,f,o,c){this.elements=d,this.callback=a,this.options=l,this.reviver=f,this.svgUid=l&&l.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=c},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var a=this;this.elements.forEach(function(l,f){l.setAttribute("svgUid",a.svgUid),a.createObject(l,f)})},d.findTag=function(a){return t[t.util.string.capitalize(a.tagName.replace("svg:",""))]},d.createObject=function(a,l){var f=this.findTag(a);if(f&&f.fromElement)try{f.fromElement(a,this.createCallback(l,a),this.options)}catch(o){t.log(o)}else this.checkIfDone()},d.createCallback=function(a,l){var f=this;return function(o){var c;f.resolveGradient(o,l,"fill"),f.resolveGradient(o,l,"stroke"),o instanceof t.Image&&o._originalElement&&(c=o.parsePreserveAspectRatioAttribute(l)),o._removeTransformMatrix(c),f.resolveClipPath(o,l),f.reviver&&f.reviver(l,o),f.instances[a]=o,f.checkIfDone()}},d.extractPropertyDefinition=function(a,l,f){var o=a[l],c=this.regexUrl;if(c.test(o)){c.lastIndex=0;var u=c.exec(o)[1];return c.lastIndex=0,t[f][this.svgUid][u]}},d.resolveGradient=function(a,l,f){var o=this.extractPropertyDefinition(a,f,"gradientDefs");if(o){var c=l.getAttribute(f+"-opacity"),u=t.Gradient.fromElement(o,a,c,this.options);a.set(f,u)}},d.createClipPathCallback=function(a,l){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,l.push(f)}},d.resolveClipPath=function(a,l){var f=this.extractPropertyDefinition(a,"clipPath","clipPaths"),o,c,u,g,y,x;if(f){g=[],u=t.util.invertTransform(a.calcTransformMatrix());for(var w=f[0].parentNode,C=l;C.parentNode&&C.getAttribute("clip-path")!==a.clipPath;)C=C.parentNode;C.parentNode.appendChild(w);for(var j=0;j<f.length;j++)o=f[j],c=this.findTag(o),c.fromElement(o,this.createClipPathCallback(a,g),this.options);g.length===1?f=g[0]:f=new t.Group(g),y=t.util.multiplyTransformMatrices(u,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,C);var x=t.util.qrDecompose(y);f.flipX=!1,f.flipY=!1,f.set("scaleX",x.scaleX),f.set("scaleY",x.scaleY),f.angle=x.angle,f.skewX=x.skewX,f.skewY=0,f.setPositionByOrigin({x:x.translateX,y:x.translateY},"center","center"),a.clipPath=f}else delete a.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(a){return a!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(d){var a=d.fabric||(d.fabric={});if(a.Point){a.warn("fabric.Point is already defined");return}a.Point=l;function l(f,o){this.x=f,this.y=o}l.prototype={type:"point",constructor:l,add:function(f){return new l(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new l(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new l(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new l(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new l(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new l(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,o){return typeof o>"u"&&(o=.5),o=Math.max(Math.min(1,o),0),new l(this.x+(f.x-this.x)*o,this.y+(f.y-this.y)*o)},distanceFrom:function(f){var o=this.x-f.x,c=this.y-f.y;return Math.sqrt(o*o+c*c)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new l(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new l(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,o){return this.x=f,this.y=o,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var o=this.x,c=this.y;this.x=f.x,this.y=f.y,f.x=o,f.y=c},clone:function(){return new l(this.x,this.y)}}}(e),function(d){var a=d.fabric||(d.fabric={});if(a.Intersection){a.warn("fabric.Intersection is already defined");return}function l(f){this.status=f,this.points=[]}a.Intersection=l,a.Intersection.prototype={constructor:l,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},a.Intersection.intersectLineLine=function(f,o,c,u){var g,y=(u.x-c.x)*(f.y-c.y)-(u.y-c.y)*(f.x-c.x),x=(o.x-f.x)*(f.y-c.y)-(o.y-f.y)*(f.x-c.x),w=(u.y-c.y)*(o.x-f.x)-(u.x-c.x)*(o.y-f.y);if(w!==0){var C=y/w,j=x/w;0<=C&&C<=1&&0<=j&&j<=1?(g=new l("Intersection"),g.appendPoint(new a.Point(f.x+C*(o.x-f.x),f.y+C*(o.y-f.y)))):g=new l}else y===0||x===0?g=new l("Coincident"):g=new l("Parallel");return g},a.Intersection.intersectLinePolygon=function(f,o,c){var u=new l,g=c.length,y,x,w,C;for(C=0;C<g;C++)y=c[C],x=c[(C+1)%g],w=l.intersectLineLine(f,o,y,x),u.appendPoints(w.points);return u.points.length>0&&(u.status="Intersection"),u},a.Intersection.intersectPolygonPolygon=function(f,o){var c=new l,u=f.length,g;for(g=0;g<u;g++){var y=f[g],x=f[(g+1)%u],w=l.intersectLinePolygon(y,x,o);c.appendPoints(w.points)}return c.points.length>0&&(c.status="Intersection"),c},a.Intersection.intersectPolygonRectangle=function(f,o,c){var u=o.min(c),g=o.max(c),y=new a.Point(g.x,u.y),x=new a.Point(u.x,g.y),w=l.intersectLinePolygon(u,y,f),C=l.intersectLinePolygon(y,g,f),j=l.intersectLinePolygon(g,x,f),T=l.intersectLinePolygon(x,u,f),M=new l;return M.appendPoints(w.points),M.appendPoints(C.points),M.appendPoints(j.points),M.appendPoints(T.points),M.points.length>0&&(M.status="Intersection"),M}}(e),function(d){var a=d.fabric||(d.fabric={});if(a.Color){a.warn("fabric.Color is already defined.");return}function l(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}a.Color=l,a.Color.prototype={_tryParsingColor:function(o){var c;o in l.colorNameMap&&(o=l.colorNameMap[o]),o==="transparent"&&(c=[255,255,255,0]),c||(c=l.sourceFromHex(o)),c||(c=l.sourceFromRgb(o)),c||(c=l.sourceFromHsl(o)),c||(c=[0,0,0,1]),c&&this.setSource(c)},_rgbToHsl:function(o,c,u){o/=255,c/=255,u/=255;var g,y,x,w=a.util.array.max([o,c,u]),C=a.util.array.min([o,c,u]);if(x=(w+C)/2,w===C)g=y=0;else{var j=w-C;switch(y=x>.5?j/(2-w-C):j/(w+C),w){case o:g=(c-u)/j+(c<u?6:0);break;case c:g=(u-o)/j+2;break;case u:g=(o-c)/j+4;break}g/=6}return[Math.round(g*360),Math.round(y*100),Math.round(x*100)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),c=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+c[0]+","+c[1]+"%,"+c[2]+"%)"},toHsla:function(){var o=this.getSource(),c=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+o[3]+")"},toHex:function(){var o=this.getSource(),c,u,g;return c=o[0].toString(16),c=c.length===1?"0"+c:c,u=o[1].toString(16),u=u.length===1?"0"+u:u,g=o[2].toString(16),g=g.length===1?"0"+g:g,c.toUpperCase()+u.toUpperCase()+g.toUpperCase()},toHexa:function(){var o=this.getSource(),c;return c=Math.round(o[3]*255),c=c.toString(16),c=c.length===1?"0"+c:c,this.toHex()+c.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var c=this.getSource();return c[3]=o,this.setSource(c),this},toGrayscale:function(){var o=this.getSource(),c=parseInt((o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),10),u=o[3];return this.setSource([c,c,c,u]),this},toBlackWhite:function(o){var c=this.getSource(),u=(c[0]*.3+c[1]*.59+c[2]*.11).toFixed(0),g=c[3];return o=o||127,u=Number(u)<Number(o)?0:255,this.setSource([u,u,u,g]),this},overlayWith:function(o){o instanceof l||(o=new l(o));var c=[],u=this.getAlpha(),g=.5,y=this.getSource(),x=o.getSource(),w;for(w=0;w<3;w++)c.push(Math.round(y[w]*(1-g)+x[w]*g));return c[3]=u,this.setSource(c),this}},a.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,a.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,a.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,a.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(o,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?o+(c-o)*6*u:u<1/2?c:u<2/3?o+(c-o)*(2/3-u)*6:o}a.Color.fromRgb=function(o){return l.fromSource(l.sourceFromRgb(o))},a.Color.sourceFromRgb=function(o){var c=o.match(l.reRGBa);if(c){var u=parseInt(c[1],10)/(/%$/.test(c[1])?100:1)*(/%$/.test(c[1])?255:1),g=parseInt(c[2],10)/(/%$/.test(c[2])?100:1)*(/%$/.test(c[2])?255:1),y=parseInt(c[3],10)/(/%$/.test(c[3])?100:1)*(/%$/.test(c[3])?255:1);return[parseInt(u,10),parseInt(g,10),parseInt(y,10),c[4]?parseFloat(c[4]):1]}},a.Color.fromRgba=l.fromRgb,a.Color.fromHsl=function(o){return l.fromSource(l.sourceFromHsl(o))},a.Color.sourceFromHsl=function(o){var c=o.match(l.reHSLa);if(c){var u=(parseFloat(c[1])%360+360)%360/360,g=parseFloat(c[2])/(/%$/.test(c[2])?100:1),y=parseFloat(c[3])/(/%$/.test(c[3])?100:1),x,w,C;if(g===0)x=w=C=y;else{var j=y<=.5?y*(g+1):y+g-y*g,T=y*2-j;x=f(T,j,u+1/3),w=f(T,j,u),C=f(T,j,u-1/3)}return[Math.round(x*255),Math.round(w*255),Math.round(C*255),c[4]?parseFloat(c[4]):1]}},a.Color.fromHsla=l.fromHsl,a.Color.fromHex=function(o){return l.fromSource(l.sourceFromHex(o))},a.Color.sourceFromHex=function(o){if(o.match(l.reHex)){var c=o.slice(o.indexOf("#")+1),u=c.length===3||c.length===4,g=c.length===8||c.length===4,y=u?c.charAt(0)+c.charAt(0):c.substring(0,2),x=u?c.charAt(1)+c.charAt(1):c.substring(2,4),w=u?c.charAt(2)+c.charAt(2):c.substring(4,6),C=g?u?c.charAt(3)+c.charAt(3):c.substring(6,8):"FF";return[parseInt(y,16),parseInt(x,16),parseInt(w,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},a.Color.fromSource=function(o){var c=new l;return c.setSource(o),c}}(e),function(d){var a=d.fabric||(d.fabric={}),l=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],o={},c="left",u="top",g="right",y="bottom",x="center",w={top:y,bottom:u,left:g,right:c,center:x},C=a.util.radiansToDegrees,j=Math.sign||function(ae){return(ae>0)-(ae<0)||+ae};function T(ae,ce){var me=ae.angle+C(Math.atan2(ce.y,ce.x))+360;return Math.round(me%360/45)}function M(ae,ce){var me=ce.transform.target,be=me.canvas,W=a.util.object.clone(ce);W.target=me,be&&be.fire("object:"+ae,W),me.fire(ae,ce)}function E(ae,ce){var me=ce.canvas,be=me.uniScaleKey,W=ae[be];return me.uniformScaling&&!W||!me.uniformScaling&&W}function A(ae){return ae.originX===x&&ae.originY===x}function R(ae,ce,me){var be=ae.lockScalingX,W=ae.lockScalingY;return!!(be&&W||!ce&&(be||W)&&me||be&&ce==="x"||W&&ce==="y")}function H(ae,ce,me){var be="not-allowed",W=E(ae,me),re="";if(ce.x!==0&&ce.y===0?re="x":ce.x===0&&ce.y!==0&&(re="y"),R(me,re,W))return be;var ge=T(me,ce);return l[ge]+"-resize"}function K(ae,ce,me){var be="not-allowed";if(ce.x!==0&&me.lockSkewingY||ce.y!==0&&me.lockSkewingX)return be;var W=T(me,ce)%4;return f[W]+"-resize"}function X(ae,ce,me){return ae[me.canvas.altActionKey]?o.skewCursorStyleHandler(ae,ce,me):o.scaleCursorStyleHandler(ae,ce,me)}function ne(ae,ce,me){var be=ae[me.canvas.altActionKey];if(ce.x===0)return be?"skewX":"scaleY";if(ce.y===0)return be?"skewY":"scaleX"}function de(ae,ce,me){return me.lockRotation?"not-allowed":ce.cursorStyle}function se(ae,ce,me,be){return{e:ae,transform:ce,pointer:{x:me,y:be}}}function q(ae){return function(ce,me,be,W){var re=me.target,ge=re.getCenterPoint(),Y=re.translateToOriginPoint(ge,me.originX,me.originY),ee=ae(ce,me,be,W);return re.setPositionByOrigin(Y,me.originX,me.originY),ee}}function P(ae,ce){return function(me,be,W,re){var ge=ce(me,be,W,re);return ge&&M(ae,se(me,be,W,re)),ge}}function $(ae,ce,me,be,W){var re=ae.target,ge=re.controls[ae.corner],Y=re.canvas.getZoom(),ee=re.padding/Y,J=re.toLocalPoint(new a.Point(be,W),ce,me);return J.x>=ee&&(J.x-=ee),J.x<=-ee&&(J.x+=ee),J.y>=ee&&(J.y-=ee),J.y<=ee&&(J.y+=ee),J.x-=ge.offsetX,J.y-=ge.offsetY,J}function V(ae){return ae.flipX!==ae.flipY}function D(ae,ce,me,be,W){if(ae[ce]!==0){var re=ae._getTransformedDimensions()[be],ge=W/re*ae[me];ae.set(me,ge)}}function O(ae,ce,me,be){var W=ce.target,re=W._getTransformedDimensions(0,W.skewY),ge=$(ce,ce.originX,ce.originY,me,be),Y=Math.abs(ge.x*2)-re.x,ee=W.skewX,J;Y<2?J=0:(J=C(Math.atan2(Y/W.scaleX,re.y/W.scaleY)),ce.originX===c&&ce.originY===y&&(J=-J),ce.originX===g&&ce.originY===u&&(J=-J),V(W)&&(J=-J));var xe=ee!==J;if(xe){var Ce=W._getTransformedDimensions().y;W.set("skewX",J),D(W,"skewY","scaleY","y",Ce)}return xe}function L(ae,ce,me,be){var W=ce.target,re=W._getTransformedDimensions(W.skewX,0),ge=$(ce,ce.originX,ce.originY,me,be),Y=Math.abs(ge.y*2)-re.y,ee=W.skewY,J;Y<2?J=0:(J=C(Math.atan2(Y/W.scaleY,re.x/W.scaleX)),ce.originX===c&&ce.originY===y&&(J=-J),ce.originX===g&&ce.originY===u&&(J=-J),V(W)&&(J=-J));var xe=ee!==J;if(xe){var Ce=W._getTransformedDimensions().x;W.set("skewY",J),D(W,"skewX","scaleX","x",Ce)}return xe}function I(ae,ce,me,be){var W=ce.target,re=W.skewX,ge,Y=ce.originY;if(W.lockSkewingX)return!1;if(re===0){var ee=$(ce,x,x,me,be);ee.x>0?ge=c:ge=g}else re>0&&(ge=Y===u?c:g),re<0&&(ge=Y===u?g:c),V(W)&&(ge=ge===c?g:c);ce.originX=ge;var J=P("skewing",q(O));return J(ae,ce,me,be)}function G(ae,ce,me,be){var W=ce.target,re=W.skewY,ge,Y=ce.originX;if(W.lockSkewingY)return!1;if(re===0){var ee=$(ce,x,x,me,be);ee.y>0?ge=u:ge=y}else re>0&&(ge=Y===c?u:y),re<0&&(ge=Y===c?y:u),V(W)&&(ge=ge===u?y:u);ce.originY=ge;var J=P("skewing",q(L));return J(ae,ce,me,be)}function B(ae,ce,me,be){var W=ce,re=W.target,ge=re.translateToOriginPoint(re.getCenterPoint(),W.originX,W.originY);if(re.lockRotation)return!1;var Y=Math.atan2(W.ey-ge.y,W.ex-ge.x),ee=Math.atan2(be-ge.y,me-ge.x),J=C(ee-Y+W.theta),xe=!0;if(re.snapAngle>0){var Ce=re.snapAngle,ke=re.snapThreshold||Ce,Ne=Math.ceil(J/Ce)*Ce,Oe=Math.floor(J/Ce)*Ce;Math.abs(J-Oe)<ke?J=Oe:Math.abs(J-Ne)<ke&&(J=Ne)}return J<0&&(J=360+J),J%=360,xe=re.angle!==J,re.angle=J,xe}function z(ae,ce,me,be,W){W=W||{};var re=ce.target,ge=re.lockScalingX,Y=re.lockScalingY,ee=W.by,J,xe,Ce,ke,Ne=E(ae,re),Oe=R(re,ee,Ne),ze,$e,Ht=ce.gestureScale;if(Oe)return!1;if(Ht)xe=ce.scaleX*Ht,Ce=ce.scaleY*Ht;else{if(J=$(ce,ce.originX,ce.originY,me,be),ze=ee!=="y"?j(J.x):1,$e=ee!=="x"?j(J.y):1,ce.signX||(ce.signX=ze),ce.signY||(ce.signY=$e),re.lockScalingFlip&&(ce.signX!==ze||ce.signY!==$e))return!1;if(ke=re._getTransformedDimensions(),Ne&&!ee){var zt=Math.abs(J.x)+Math.abs(J.y),Wt=ce.original,Yn=Math.abs(ke.x*Wt.scaleX/re.scaleX)+Math.abs(ke.y*Wt.scaleY/re.scaleY),Pn=zt/Yn;xe=Wt.scaleX*Pn,Ce=Wt.scaleY*Pn}else xe=Math.abs(J.x*re.scaleX/ke.x),Ce=Math.abs(J.y*re.scaleY/ke.y);A(ce)&&(xe*=2,Ce*=2),ce.signX!==ze&&ee!=="y"&&(ce.originX=w[ce.originX],xe*=-1,ce.signX=ze),ce.signY!==$e&&ee!=="x"&&(ce.originY=w[ce.originY],Ce*=-1,ce.signY=$e)}var Ln=re.scaleX,ci=re.scaleY;return ee?(ee==="x"&&re.set("scaleX",xe),ee==="y"&&re.set("scaleY",Ce)):(!ge&&re.set("scaleX",xe),!Y&&re.set("scaleY",Ce)),Ln!==re.scaleX||ci!==re.scaleY}function te(ae,ce,me,be){return z(ae,ce,me,be)}function Q(ae,ce,me,be){return z(ae,ce,me,be,{by:"x"})}function ue(ae,ce,me,be){return z(ae,ce,me,be,{by:"y"})}function le(ae,ce,me,be){return ae[ce.target.canvas.altActionKey]?o.skewHandlerX(ae,ce,me,be):o.scalingY(ae,ce,me,be)}function ie(ae,ce,me,be){return ae[ce.target.canvas.altActionKey]?o.skewHandlerY(ae,ce,me,be):o.scalingX(ae,ce,me,be)}function Z(ae,ce,me,be){var W=ce.target,re=$(ce,ce.originX,ce.originY,me,be),ge=W.strokeWidth/(W.strokeUniform?W.scaleX:1),Y=A(ce)?2:1,ee=W.width,J=Math.abs(re.x*Y/W.scaleX)-ge;return W.set("width",Math.max(J,0)),ee!==J}function fe(ae,ce,me,be){var W=ce.target,re=me-ce.offsetX,ge=be-ce.offsetY,Y=!W.get("lockMovementX")&&W.left!==re,ee=!W.get("lockMovementY")&&W.top!==ge;return Y&&W.set("left",re),ee&&W.set("top",ge),(Y||ee)&&M("moving",se(ae,ce,me,be)),Y||ee}o.scaleCursorStyleHandler=H,o.skewCursorStyleHandler=K,o.scaleSkewCursorStyleHandler=X,o.rotationWithSnapping=P("rotating",q(B)),o.scalingEqually=P("scaling",q(te)),o.scalingX=P("scaling",q(Q)),o.scalingY=P("scaling",q(ue)),o.scalingYOrSkewingX=le,o.scalingXOrSkewingY=ie,o.changeWidth=P("resizing",q(Z)),o.skewHandlerX=I,o.skewHandlerY=G,o.dragHandler=fe,o.scaleOrSkewActionName=ne,o.rotationStyleHandler=de,o.fireEvent=M,o.wrapWithFixedAnchor=q,o.wrapWithFireEvent=P,o.getLocalPoint=$,a.controlsUtils=o}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.degreesToRadians,f=a.controlsUtils;function o(u,g,y,x,w){x=x||{};var C=this.sizeX||x.cornerSize||w.cornerSize,j=this.sizeY||x.cornerSize||w.cornerSize,T=typeof x.transparentCorners<"u"?x.transparentCorners:w.transparentCorners,M=T?"stroke":"fill",E=!T&&(x.cornerStrokeColor||w.cornerStrokeColor),A=g,R=y,H;u.save(),u.fillStyle=x.cornerColor||w.cornerColor,u.strokeStyle=x.cornerStrokeColor||w.cornerStrokeColor,C>j?(H=C,u.scale(1,j/C),R=y*C/j):j>C?(H=j,u.scale(C/j,1),A=g*j/C):H=C,u.lineWidth=1,u.beginPath(),u.arc(A,R,H/2,0,2*Math.PI,!1),u[M](),E&&u.stroke(),u.restore()}function c(u,g,y,x,w){x=x||{};var C=this.sizeX||x.cornerSize||w.cornerSize,j=this.sizeY||x.cornerSize||w.cornerSize,T=typeof x.transparentCorners<"u"?x.transparentCorners:w.transparentCorners,M=T?"stroke":"fill",E=!T&&(x.cornerStrokeColor||w.cornerStrokeColor),A=C/2,R=j/2;u.save(),u.fillStyle=x.cornerColor||w.cornerColor,u.strokeStyle=x.cornerStrokeColor||w.cornerStrokeColor,u.lineWidth=1,u.translate(g,y),u.rotate(l(w.angle)),u[M+"Rect"](-A,-R,C,j),E&&u.strokeRect(-A,-R,C,j),u.restore()}f.renderCircleControl=o,f.renderSquareControl=c}(e),function(d){var a=d.fabric||(d.fabric={});function l(f){for(var o in f)this[o]=f[o]}a.Control=l,a.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,o){return o.cursorStyle},getActionName:function(f,o){return o.actionName},getVisibility:function(f,o){var c=f._controlsVisibility;return c&&typeof c[o]<"u"?c[o]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,o){var c=a.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},o);return c},calcCornerCoords:function(f,o,c,u,g){var y,x,w,C,j=g?this.touchSizeX:this.sizeX,T=g?this.touchSizeY:this.sizeY;if(j&&T&&j!==T){var M=Math.atan2(T,j),E=Math.sqrt(j*j+T*T)/2,A=M-a.util.degreesToRadians(f),R=Math.PI/2-M-a.util.degreesToRadians(f);y=E*a.util.cos(A),x=E*a.util.sin(A),w=E*a.util.cos(R),C=E*a.util.sin(R)}else{var H=j&&T?j:o;E=H*.7071067812;var A=a.util.degreesToRadians(45-f);y=w=E*a.util.cos(A),x=C=E*a.util.sin(A)}return{tl:{x:c-C,y:u-w},tr:{x:c+y,y:u-x},bl:{x:c-y,y:u+x},br:{x:c+C,y:u+w}}},render:function(f,o,c,u,g){switch(u=u||{},u.cornerStyle||g.cornerStyle){case"circle":a.controlsUtils.renderCircleControl.call(this,f,o,c,u,g);break;default:a.controlsUtils.renderSquareControl.call(this,f,o,c,u,g)}}}}(e),function(){function d(c,u){var g=c.getAttribute("style"),y=c.getAttribute("offset")||0,x,w,C,j;if(y=parseFloat(y)/(/%$/.test(y)?100:1),y=y<0?0:y>1?1:y,g){var T=g.split(/\s*;\s*/);for(T[T.length-1]===""&&T.pop(),j=T.length;j--;){var M=T[j].split(/\s*:\s*/),E=M[0].trim(),A=M[1].trim();E==="stop-color"?x=A:E==="stop-opacity"&&(C=A)}}return x||(x=c.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=c.getAttribute("stop-opacity")),x=new t.Color(x),w=x.getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=w*u,{offset:y,color:x.toRgb(),opacity:C}}function a(c){return{x1:c.getAttribute("x1")||0,y1:c.getAttribute("y1")||0,x2:c.getAttribute("x2")||"100%",y2:c.getAttribute("y2")||0}}function l(c){return{x1:c.getAttribute("fx")||c.getAttribute("cx")||"50%",y1:c.getAttribute("fy")||c.getAttribute("cy")||"50%",r1:0,x2:c.getAttribute("cx")||"50%",y2:c.getAttribute("cy")||"50%",r2:c.getAttribute("r")||"50%"}}var f=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(c){c||(c={}),c.coords||(c.coords={});var u,g=this;Object.keys(c).forEach(function(y){g[y]=c[y]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,u={x1:c.coords.x1||0,y1:c.coords.y1||0,x2:c.coords.x2||0,y2:c.coords.y2||0},this.type==="radial"&&(u.r1=c.coords.r1||0,u.r2=c.coords.r2||0),this.coords=u,this.colorStops=c.colorStops.slice()},addColorStop:function(c){for(var u in c){var g=new t.Color(c[u]);this.colorStops.push({offset:parseFloat(u),color:g.toRgb(),opacity:g.getAlpha()})}return this},toObject:function(c){var u={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,u,c),u},toSVG:function(c,w){var g=f(this.coords,!0),y,x,w=w||{},C,j,T=f(this.colorStops,!0),M=g.r1>g.r2,E=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),A=-this.offsetX,R=-this.offsetY,H=!!w.additionalTransform,K=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(T.sort(function(q,P){return q.offset-P.offset}),K==="objectBoundingBox"?(A/=c.width,R/=c.height):(A+=c.width/2,R+=c.height/2),c.type==="path"&&this.gradientUnits!=="percentage"&&(A-=c.pathOffset.x,R-=c.pathOffset.y),E[4]-=A,E[5]-=R,j='id="SVGID_'+this.id+'" gradientUnits="'+K+'"',j+=' gradientTransform="'+(H?w.additionalTransform+" ":"")+t.util.matrixToSVG(E)+'" ',this.type==="linear"?C=["<linearGradient ",j,' x1="',g.x1,'" y1="',g.y1,'" x2="',g.x2,'" y2="',g.y2,`">
`]:this.type==="radial"&&(C=["<radialGradient ",j,' cx="',M?g.x1:g.x2,'" cy="',M?g.y1:g.y2,'" r="',M?g.r1:g.r2,'" fx="',M?g.x2:g.x1,'" fy="',M?g.y2:g.y1,`">
`]),this.type==="radial"){if(M)for(T=T.concat(),T.reverse(),y=0,x=T.length;y<x;y++)T[y].offset=1-T[y].offset;var X=Math.min(g.r1,g.r2);if(X>0){var ne=Math.max(g.r1,g.r2),de=X/ne;for(y=0,x=T.length;y<x;y++)T[y].offset+=de*(1-T[y].offset)}}for(y=0,x=T.length;y<x;y++){var se=T[y];C.push("<stop ",'offset="',se.offset*100+"%",'" style="stop-color:',se.color,typeof se.opacity<"u"?";stop-opacity: "+se.opacity:";",`"/>
`)}return C.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),C.join("")},toLive:function(c){var u,g=t.util.object.clone(this.coords),y,x;if(this.type){for(this.type==="linear"?u=c.createLinearGradient(g.x1,g.y1,g.x2,g.y2):this.type==="radial"&&(u=c.createRadialGradient(g.x1,g.y1,g.r1,g.x2,g.y2,g.r2)),y=0,x=this.colorStops.length;y<x;y++){var w=this.colorStops[y].color,C=this.colorStops[y].opacity,j=this.colorStops[y].offset;typeof C<"u"&&(w=new t.Color(w).setAlpha(C).toRgba()),u.addColorStop(j,w)}return u}}}),t.util.object.extend(t.Gradient,{fromElement:function(c,u,g,y){var x=parseFloat(g)/(/%$/.test(g)?100:1);x=x<0?0:x>1?1:x,isNaN(x)&&(x=1);var w=c.getElementsByTagName("stop"),C,j=c.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",T=c.getAttribute("gradientTransform")||"",M=[],E,A,R=0,H=0,K;for(c.nodeName==="linearGradient"||c.nodeName==="LINEARGRADIENT"?(C="linear",E=a(c)):(C="radial",E=l(c)),A=w.length;A--;)M.push(d(w[A],x));K=t.parseTransformAttribute(T),o(u,E,y,j),j==="pixels"&&(R=-u.left,H=-u.top);var X=new t.Gradient({id:c.getAttribute("id"),type:C,coords:E,colorStops:M,gradientUnits:j,gradientTransform:K,offsetX:R,offsetY:H});return X}});function o(c,u,g,y){var x,w;Object.keys(u).forEach(function(C){x=u[C],x==="Infinity"?w=1:x==="-Infinity"?w=0:(w=parseFloat(u[C],10),typeof x=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(x)&&(w*=.01,y==="pixels"&&((C==="x1"||C==="x2"||C==="r2")&&(w*=g.viewBoxWidth||g.width),(C==="y1"||C==="y2")&&(w*=g.viewBoxHeight||g.height)))),u[C]=w})}}(),function(){var d=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(a,l){if(a||(a={}),this.id=t.Object.__uid++,this.setOptions(a),!a.source||a.source&&typeof a.source!="string"){l&&l(this);return}else{var f=this;this.source=t.util.createImage(),t.util.loadImage(a.source,function(o,c){f.source=o,l&&l(f,c)},null,this.crossOrigin)}},toObject:function(a){var l=t.Object.NUM_FRACTION_DIGITS,f,o;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),o={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,l),offsetY:d(this.offsetY,l),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,o,a),o},toSVG:function(a){var l=typeof this.source=="function"?this.source():this.source,f=l.width/a.width,o=l.height/a.height,c=this.offsetX/a.width,u=this.offsetY/a.height,g="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(o=1,u&&(o+=Math.abs(u))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,c&&(f+=Math.abs(c))),l.src?g=l.src:l.toDataURL&&(g=l.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+c+'" y="'+u+'" width="'+f+'" height="'+o+`">
<image x="0" y="0" width="`+l.width+'" height="'+l.height+'" xlink:href="'+g+`"></image>
</pattern>
`},setOptions:function(a){for(var l in a)this[l]=a[l]},toLive:function(a){var l=this.source;return!l||typeof l.src<"u"&&(!l.complete||l.naturalWidth===0||l.naturalHeight===0)?"":a.createPattern(l,this.repeat)}})}(),function(d){var a=d.fabric||(d.fabric={}),l=a.util.toFixed;if(a.Shadow){a.warn("fabric.Shadow is already defined.");return}a.Shadow=a.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var o in f)this[o]=f[o];this.id=a.Object.__uid++},_parseShadow:function(f){var o=f.trim(),c=a.Shadow.reOffsetsAndBlur.exec(o)||[],u=o.replace(a.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:u.trim(),offsetX:parseFloat(c[1],10)||0,offsetY:parseFloat(c[2],10)||0,blur:parseFloat(c[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var o=40,c=40,u=a.Object.NUM_FRACTION_DIGITS,g=a.util.rotateVector({x:this.offsetX,y:this.offsetY},a.util.degreesToRadians(-f.angle)),y=20,x=new a.Color(this.color);return f.width&&f.height&&(o=l((Math.abs(g.x)+this.blur)/f.width,u)*100+y,c=l((Math.abs(g.y)+this.blur)/f.height,u)*100+y),f.flipX&&(g.x*=-1),f.flipY&&(g.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+c+'%" height="'+(100+2*c)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+l(this.blur?this.blur/2:0,u)+`"></feGaussianBlur>
	<feOffset dx="`+l(g.x,u)+'" dy="'+l(g.y,u)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+x.toRgb()+'" flood-opacity="'+x.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},o=a.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(c){this[c]!==o[c]&&(f[c]=this[c])},this),f}}),a.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var d=t.util.object.extend,a=t.util.getElementOffset,l=t.util.removeFromArray,f=t.util.toFixed,o=t.util.transformPoint,c=t.util.invertTransform,u=t.util.getNodeCanvas,g=t.util.createCanvasElement,y=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(x,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(x,w)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(x,w){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(x),this._initOptions(w),this.interactive||this._initRetinaScaling(),w.overlayImage&&this.setOverlayImage(w.overlayImage,C),w.backgroundImage&&this.setBackgroundImage(w.backgroundImage,C),w.backgroundColor&&this.setBackgroundColor(w.backgroundColor,C),w.overlayColor&&this.setOverlayColor(w.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var x=t.devicePixelRatio;this.__initRetinaScaling(x,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(x,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(x,w,C){w.setAttribute("width",this.width*x),w.setAttribute("height",this.height*x),C.scale(x,x)},calcOffset:function(){return this._offset=a(this.lowerCanvasEl),this},setOverlayImage:function(x,w,C){return this.__setBgOverlayImage("overlayImage",x,w,C)},setBackgroundImage:function(x,w,C){return this.__setBgOverlayImage("backgroundImage",x,w,C)},setOverlayColor:function(x,w){return this.__setBgOverlayColor("overlayColor",x,w)},setBackgroundColor:function(x,w){return this.__setBgOverlayColor("backgroundColor",x,w)},__setBgOverlayImage:function(x,w,C,j){return typeof w=="string"?t.util.loadImage(w,function(T,M){if(T){var E=new t.Image(T,j);this[x]=E,E.canvas=this}C&&C(T,M)},this,j&&j.crossOrigin):(j&&w.setOptions(j),this[x]=w,w&&(w.canvas=this),C&&C(w,!1)),this},__setBgOverlayColor:function(x,w,C){return this[x]=w,this._initGradient(w,x),this._initPattern(w,x,C),this},_createCanvasElement:function(){var x=g();if(!x||(x.style||(x.style={}),typeof x.getContext>"u"))throw y;return x},_initOptions:function(x){var w=this.lowerCanvasEl;this._setOptions(x),this.width=this.width||parseInt(w.width,10)||0,this.height=this.height||parseInt(w.height,10)||0,this.lowerCanvasEl.style&&(w.width=this.width,w.height=this.height,w.style.width=this.width+"px",w.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(x){x&&x.getContext?this.lowerCanvasEl=x:this.lowerCanvasEl=t.util.getById(x)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(x,w){return this.setDimensions({width:x},w)},setHeight:function(x,w){return this.setDimensions({height:x},w)},setDimensions:function(x,w){var C;w=w||{};for(var j in x)C=x[j],w.cssOnly||(this._setBackstoreDimension(j,x[j]),C+="px",this.hasLostContext=!0),w.backstoreOnly||this._setCssDimension(j,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),w.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(x,w){return this.lowerCanvasEl[x]=w,this.upperCanvasEl&&(this.upperCanvasEl[x]=w),this.cacheCanvasEl&&(this.cacheCanvasEl[x]=w),this[x]=w,this},_setCssDimension:function(x,w){return this.lowerCanvasEl.style[x]=w,this.upperCanvasEl&&(this.upperCanvasEl.style[x]=w),this.wrapperEl&&(this.wrapperEl.style[x]=w),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(x){var w=this._activeObject,C=this.backgroundImage,j=this.overlayImage,T,M,E;for(this.viewportTransform=x,M=0,E=this._objects.length;M<E;M++)T=this._objects[M],T.group||T.setCoords(!0);return w&&w.setCoords(),C&&C.setCoords(!0),j&&j.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(x,w){var C=x,j=this.viewportTransform.slice(0);x=o(x,c(this.viewportTransform)),j[0]=w,j[3]=w;var T=o(x,j);return j[4]+=C.x-T.x,j[5]+=C.y-T.y,this.setViewportTransform(j)},setZoom:function(x){return this.zoomToPoint(new t.Point(0,0),x),this},absolutePan:function(x){var w=this.viewportTransform.slice(0);return w[4]=-x.x,w[5]=-x.y,this.setViewportTransform(w)},relativePan:function(x){return this.absolutePan(new t.Point(-x.x-this.viewportTransform[4],-x.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(x){this.stateful&&x.setupState(),x._set("canvas",this),x.setCoords(),this.fire("object:added",{target:x}),x.fire("added")},_onObjectRemoved:function(x){this.fire("object:removed",{target:x}),x.fire("removed"),delete x.canvas},clearContext:function(x){return x.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var x=this.contextContainer;return this.renderCanvas(x,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var x={},w=this.width,C=this.height,j=c(this.viewportTransform);return x.tl=o({x:0,y:0},j),x.br=o({x:w,y:C},j),x.tr=new t.Point(x.br.x,x.tl.y),x.bl=new t.Point(x.tl.x,x.br.y),this.vptCoords=x,x},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(x,w){var C=this.viewportTransform,j=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(x),t.util.setImageSmoothing(x,this.imageSmoothingEnabled),this.fire("before:render",{ctx:x}),this._renderBackground(x),x.save(),x.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(x,w),x.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(x),j&&(j.canvas=this,j.shouldCache(),j._transformDone=!0,j.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(x)),this._renderOverlay(x),this.controlsAboveOverlay&&this.interactive&&this.drawControls(x),this.fire("after:render",{ctx:x})},drawClipPathOnCanvas:function(x){var w=this.viewportTransform,C=this.clipPath;x.save(),x.transform(w[0],w[1],w[2],w[3],w[4],w[5]),x.globalCompositeOperation="destination-in",C.transform(x),x.scale(1/C.zoomX,1/C.zoomY),x.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),x.restore()},_renderObjects:function(x,w){var C,j;for(C=0,j=w.length;C<j;++C)w[C]&&w[C].render(x)},_renderBackgroundOrOverlay:function(x,w){var C=this[w+"Color"],j=this[w+"Image"],T=this.viewportTransform,M=this[w+"Vpt"];if(!(!C&&!j)){if(C){x.save(),x.beginPath(),x.moveTo(0,0),x.lineTo(this.width,0),x.lineTo(this.width,this.height),x.lineTo(0,this.height),x.closePath(),x.fillStyle=C.toLive?C.toLive(x,this):C,M&&x.transform(T[0],T[1],T[2],T[3],T[4],T[5]),x.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var E=C.gradientTransform||C.patternTransform;E&&x.transform(E[0],E[1],E[2],E[3],E[4],E[5]),x.fill(),x.restore()}j&&(x.save(),M&&x.transform(T[0],T[1],T[2],T[3],T[4],T[5]),j.render(x),x.restore())}},_renderBackground:function(x){this._renderBackgroundOrOverlay(x,"background")},_renderOverlay:function(x){this._renderBackgroundOrOverlay(x,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(x){return this._centerObject(x,new t.Point(this.getCenterPoint().x,x.getCenterPoint().y))},centerObjectV:function(x){return this._centerObject(x,new t.Point(x.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(x){var w=this.getCenterPoint();return this._centerObject(x,w)},viewportCenterObject:function(x){var w=this.getVpCenter();return this._centerObject(x,w)},viewportCenterObjectH:function(x){var w=this.getVpCenter();return this._centerObject(x,new t.Point(w.x,x.getCenterPoint().y)),this},viewportCenterObjectV:function(x){var w=this.getVpCenter();return this._centerObject(x,new t.Point(x.getCenterPoint().x,w.y))},getVpCenter:function(){var x=this.getCenterPoint(),w=c(this.viewportTransform);return o(x,w)},_centerObject:function(x,w){return x.setPositionByOrigin(w,"center","center"),x.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(x){return this.toDatalessObject(x)},toObject:function(x){return this._toObjectMethod("toObject",x)},toDatalessObject:function(x){return this._toObjectMethod("toDatalessObject",x)},_toObjectMethod:function(x,w){var C=this.clipPath,j={version:t.version,objects:this._toObjects(x,w)};return C&&!C.excludeFromExport&&(j.clipPath=this._toObject(this.clipPath,x,w)),d(j,this.__serializeBgOverlay(x,w)),t.util.populateWithProperties(this,j,w),j},_toObjects:function(x,w){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,x,w)},this)},_toObject:function(x,w,C){var j;this.includeDefaultValues||(j=x.includeDefaultValues,x.includeDefaultValues=!1);var T=x[w](C);return this.includeDefaultValues||(x.includeDefaultValues=j),T},__serializeBgOverlay:function(x,w){var C={},j=this.backgroundImage,T=this.overlayImage,M=this.backgroundColor,E=this.overlayColor;return M&&M.toObject?M.excludeFromExport||(C.background=M.toObject(w)):M&&(C.background=M),E&&E.toObject?E.excludeFromExport||(C.overlay=E.toObject(w)):E&&(C.overlay=E),j&&!j.excludeFromExport&&(C.backgroundImage=this._toObject(j,x,w)),T&&!T.excludeFromExport&&(C.overlayImage=this._toObject(T,x,w)),C},svgViewportTransformation:!0,toSVG:function(x,w){x||(x={}),x.reviver=w;var C=[];return this._setSVGPreamble(C,x),this._setSVGHeader(C,x),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",w),this._setSVGObjects(C,w),this.clipPath&&C.push(`</g>
`),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",w),C.push("</svg>"),C.join("")},_setSVGPreamble:function(x,w){w.suppressPreamble||x.push('<?xml version="1.0" encoding="',w.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(x,w){var C=w.width||this.width,j=w.height||this.height,T,M='viewBox="0 0 '+this.width+" "+this.height+'" ',E=t.Object.NUM_FRACTION_DIGITS;w.viewBox?M='viewBox="'+w.viewBox.x+" "+w.viewBox.y+" "+w.viewBox.width+" "+w.viewBox.height+'" ':this.svgViewportTransformation&&(T=this.viewportTransform,M='viewBox="'+f(-T[4]/T[0],E)+" "+f(-T[5]/T[3],E)+" "+f(this.width/T[0],E)+" "+f(this.height/T[3],E)+'" '),x.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',j,'" ',M,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(w),`</defs>
`)},createSVGClipPathMarkup:function(x){var w=this.clipPath;return w?(w.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+w.clipPathId+`" >
`+this.clipPath.toClipPathSVG(x.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var x=this,w=["background","overlay"].map(function(C){var j=x[C+"Color"];if(j&&j.toLive){var T=x[C+"Vpt"],M=x.viewportTransform,E={width:x.width/(T?M[0]:1),height:x.height/(T?M[3]:1)};return j.toSVG(E,{additionalTransform:T?t.util.matrixToSVG(M):""})}});return w.join("")},createSVGFontFacesMarkup:function(){var x="",w={},C,j,T,M,E,A,R,H,K,X=t.fontPaths,ne=[];for(this._objects.forEach(function se(q){ne.push(q),q._objects&&q._objects.forEach(se)}),H=0,K=ne.length;H<K;H++)if(C=ne[H],j=C.fontFamily,!(C.type.indexOf("text")===-1||w[j]||!X[j])&&(w[j]=!0,!!C.styles)){T=C.styles;for(E in T){M=T[E];for(R in M)A=M[R],j=A.fontFamily,!w[j]&&X[j]&&(w[j]=!0)}}for(var de in w)x+=[`		@font-face {
`,"			font-family: '",de,`';
`,"			src: url('",X[de],`');
`,`		}
`].join("");return x&&(x=['	<style type="text/css">',`<![CDATA[
`,x,"]]>",`</style>
`].join("")),x},_setSVGObjects:function(x,w){var C,j,T,M=this._objects;for(j=0,T=M.length;j<T;j++)C=M[j],!C.excludeFromExport&&this._setSVGObject(x,C,w)},_setSVGObject:function(x,w,C){x.push(w.toSVG(C))},_setSVGBgOverlayImage:function(x,w,C){this[w]&&!this[w].excludeFromExport&&this[w].toSVG&&x.push(this[w].toSVG(C))},_setSVGBgOverlayColor:function(x,w){var C=this[w+"Color"],j=this.viewportTransform,T=this.width,M=this.height;if(C)if(C.toLive){var E=C.repeat,A=t.util.invertTransform(j),R=this[w+"Vpt"],H=R?t.util.matrixToSVG(A):"";x.push('<rect transform="'+H+" translate(",T/2,",",M/2,')"',' x="',C.offsetX-T/2,'" y="',C.offsetY-M/2,'" ','width="',E==="repeat-y"||E==="no-repeat"?C.source.width:T,'" height="',E==="repeat-x"||E==="no-repeat"?C.source.height:M,'" fill="url(#SVGID_'+C.id+')"',`></rect>
`)}else x.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',`></rect>
`)},sendToBack:function(x){if(!x)return this;var w=this._activeObject,C,j,T;if(x===w&&x.type==="activeSelection")for(T=w._objects,C=T.length;C--;)j=T[C],l(this._objects,j),this._objects.unshift(j);else l(this._objects,x),this._objects.unshift(x);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(x){if(!x)return this;var w=this._activeObject,C,j,T;if(x===w&&x.type==="activeSelection")for(T=w._objects,C=0;C<T.length;C++)j=T[C],l(this._objects,j),this._objects.push(j);else l(this._objects,x),this._objects.push(x);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(x,w){if(!x)return this;var C=this._activeObject,j,T,M,E,A,R=0;if(x===C&&x.type==="activeSelection")for(A=C._objects,j=0;j<A.length;j++)T=A[j],M=this._objects.indexOf(T),M>0+R&&(E=M-1,l(this._objects,T),this._objects.splice(E,0,T)),R++;else M=this._objects.indexOf(x),M!==0&&(E=this._findNewLowerIndex(x,M,w),l(this._objects,x),this._objects.splice(E,0,x));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(x,w,C){var j,T;if(C)for(j=w,T=w-1;T>=0;--T){var M=x.intersectsWithObject(this._objects[T])||x.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(x);if(M){j=T;break}}else j=w-1;return j},bringForward:function(x,w){if(!x)return this;var C=this._activeObject,j,T,M,E,A,R=0;if(x===C&&x.type==="activeSelection")for(A=C._objects,j=A.length;j--;)T=A[j],M=this._objects.indexOf(T),M<this._objects.length-1-R&&(E=M+1,l(this._objects,T),this._objects.splice(E,0,T)),R++;else M=this._objects.indexOf(x),M!==this._objects.length-1&&(E=this._findNewUpperIndex(x,M,w),l(this._objects,x),this._objects.splice(E,0,x));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(x,w,C){var j,T,M;if(C)for(j=w,T=w+1,M=this._objects.length;T<M;++T){var E=x.intersectsWithObject(this._objects[T])||x.isContainedWithinObject(this._objects[T])||this._objects[T].isContainedWithinObject(x);if(E){j=T;break}}else j=w+1;return j},moveTo:function(x,w){return l(this._objects,x),this._objects.splice(w,0,x),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(x){x.dispose&&x.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(t.StaticCanvas.prototype,t.Observable),d(t.StaticCanvas.prototype,t.Collection),d(t.StaticCanvas.prototype,t.DataURLExporter),d(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(x){var w=g();if(!w||!w.getContext)return null;var C=w.getContext("2d");if(!C)return null;switch(x){case"setLineDash":return typeof C.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var x=u(this.lowerCanvasEl);return x&&x.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(x){var w=u(this.lowerCanvasEl);return w&&w.createJPEGStream(x)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(d){d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var a=this.canvas.viewportTransform;d.save(),d.transform(a[0],a[1],a[2],a[3],a[4],a[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,a=this.shadow,l=d.contextTop,f=d.getZoom();d&&d._isRetinaScaling()&&(f*=t.devicePixelRatio),l.shadowColor=a.color,l.shadowBlur=a.blur*f,l.shadowOffsetX=a.offsetX*f,l.shadowOffsetY=a.offsetY*f}},needsFullRender:function(){var d=new t.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(d){this.canvas=d,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(d,a,l){var f=a.midPointFrom(l);return d.quadraticCurveTo(a.x,a.y,f.x,f.y),f},onMouseDown:function(d,a){this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,a){if(this.canvas._isMainEvent(a.e)&&(this.drawStraightLine=a.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var l=this._points,f=l.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,l[f-2],l[f-1],!0),o.stroke(),o.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var a=new t.Point(d.x,d.y);this._reset(),this._addPoint(a),this.canvas.contextTop.moveTo(a.x,a.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(d){var a=new t.Point(d.x,d.y);return this._addPoint(a)},_render:function(d){var a,l,f=this._points[0],o=this._points[1];if(d=d||this.canvas.contextTop,this._saveAndTransform(d),d.beginPath(),this._points.length===2&&f.x===o.x&&f.y===o.y){var c=this.width/1e3;f=new t.Point(f.x,f.y),o=new t.Point(o.x,o.y),f.x-=c,o.x+=c}for(d.moveTo(f.x,f.y),a=1,l=this._points.length;a<l;a++)this._drawSegment(d,f,o),f=this._points[a],o=this._points[a+1];d.lineTo(f.x,f.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var a=this.width/1e3;return t.util.getSmoothPathFromPoints(d,a)},_isEmptySVGPath:function(d){var a=t.util.joinPath(d);return a==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(d){var a=new t.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,a.shadow=new t.Shadow(this.shadow)),a},decimatePoints:function(d,a){if(d.length<=2)return d;var l=this.canvas.getZoom(),f=Math.pow(a/l,2),o,c=d.length-1,u=d[0],g=[u],y;for(o=1;o<c-1;o++)y=Math.pow(u.x-d[o].x,2)+Math.pow(u.y-d[o].y,2),y>=f&&(u=d[o],g.push(u));return g.push(d[c]),g},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var a=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(a)){this.canvas.requestRenderAll();return}var l=this.createPath(a);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.requestRenderAll(),l.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:l})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var a=this.addPoint(d),l=this.canvas.contextTop;this._saveAndTransform(l),this.dot(l,a),l.restore()},dot:function(d,a){d.fillStyle=a.fill,d.beginPath(),d.arc(a.x,a.y,a.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,a,l,f=this.points;for(this._saveAndTransform(d),a=0,l=f.length;a<l;a++)this.dot(d,f[a]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,a,l;this.canvas.renderOnAddRemove=!1;var f=[];for(a=0,l=this.points.length;a<l;a++){var o=this.points[a],c=new t.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(c.shadow=new t.Shadow(this.shadow)),f.push(c)}var u=new t.Group(f);u.canvas=this.canvas,this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var a=new t.Point(d.x,d.y),l=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return a.radius=l,a.fill=f,this.points.push(a),a}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var a=[],l=0,f=this.sprayChunks.length;l<f;l++)for(var o=this.sprayChunks[l],c=0,u=o.length;c<u;c++){var g=new t.Rect({width:o[c].width,height:o[c].width,left:o[c].x+1,top:o[c].y+1,originX:"center",originY:"center",fill:this.color});a.push(g)}this.optimizeOverlapping&&(a=this._getOptimizedRects(a));var y=new t.Group(a);this.shadow&&y.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.fire("path:created",{path:y}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var a={},l,f,o;for(f=0,o=d.length;f<o;f++)l=d[f].left+""+d[f].top,a[l]||(a[l]=d[f]);var c=[];for(l in a)c.push(a[l]);return c},render:function(d){var a=this.canvas.contextTop,l,f;for(a.fillStyle=this.color,this._saveAndTransform(a),l=0,f=d.length;l<f;l++){var o=d[l];typeof o.opacity<"u"&&(a.globalAlpha=o.opacity),a.fillRect(o.x,o.y,o.width,o.width)}a.restore()},_render:function(){var d=this.canvas.contextTop,a,l;for(d.fillStyle=this.color,this._saveAndTransform(d),a=0,l=this.sprayChunks.length;a<l;a++)this.render(this.sprayChunks[a]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var a,l,f,o=this.width/2,c;for(c=0;c<this.density;c++){a=t.util.getRandomInt(d.x-o,d.x+o),l=t.util.getRandomInt(d.y-o,d.y+o),this.dotWidthVariance?f=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var u=new t.Point(a,l);u.width=f,this.randomOpacity&&(u.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(u)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var d=20,a=5,l=t.util.createCanvasElement(),f=l.getContext("2d");return l.width=l.height=d+a,f.fillStyle=this.color,f.beginPath(),f.arc(d/2,d/2,d/2,0,Math.PI*2,!1),f.closePath(),f.fill(),l},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(d){return d.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(d){this.callSuper("_setBrushStyles",d),d.strokeStyle=this.getPattern(d)},createPath:function(d){var a=this.callSuper("createPath",d),l=a._getLeftTopCoords().scalarAdd(a.strokeWidth/2);return a.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-l.x,offsetY:-l.y}),a}}),function(){var d=t.util.getPointer,a=t.util.degreesToRadians,l=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(o,c){c||(c={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,c),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o=this.getActiveObjects(),c,u,g;if(o.length>0&&!this.preserveObjectStacking){u=[],g=[];for(var y=0,x=this._objects.length;y<x;y++)c=this._objects[y],o.indexOf(c)===-1?u.push(c):g.push(c);o.length>1&&(this._activeObject._objects=g),u.push.apply(u,g)}else u=this._objects;return u},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,c){var u=o.calcTransformMatrix(),g=t.util.invertTransform(u),y=this.restorePointerVpt(c);return t.util.transformPoint(y,g)},isTargetTransparent:function(o,c,u){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var g=this._normalizePointer(o,{x:c,y:u}),y=Math.max(o.cacheTranslationX+g.x*o.zoomX,0),x=Math.max(o.cacheTranslationY+g.y*o.zoomY,0),T=t.util.isTransparent(o._cacheContext,Math.round(y),Math.round(x),this.targetFindTolerance);return T}var w=this.contextCache,C=o.selectionBackgroundColor,j=this.viewportTransform;o.selectionBackgroundColor="",this.clearContext(w),w.save(),w.transform(j[0],j[1],j[2],j[3],j[4],j[5]),o.render(w),w.restore(),o.selectionBackgroundColor=C;var T=t.util.isTransparent(w,c,u,this.targetFindTolerance);return T},_isSelectionKeyPressed:function(o){var c=!1;return Array.isArray(this.selectionKey)?c=!!this.selectionKey.find(function(u){return o[u]===!0}):c=o[this.selectionKey],c},_shouldClearSelection:function(o,c){var u=this.getActiveObjects(),g=this._activeObject;return!c||c&&g&&u.length>1&&u.indexOf(c)===-1&&g!==c&&!this._isSelectionKeyPressed(o)||c&&!c.evented||c&&!c.selectable&&g&&g!==c},_shouldCenterTransform:function(o,c,u){if(o){var g;return c==="scale"||c==="scaleX"||c==="scaleY"||c==="resizing"?g=this.centeredScaling||o.centeredScaling:c==="rotate"&&(g=this.centeredRotation||o.centeredRotation),g?!u:u}},_getOriginFromCorner:function(o,c){var u={x:o.originX,y:o.originY};return c==="ml"||c==="tl"||c==="bl"?u.x="right":(c==="mr"||c==="tr"||c==="br")&&(u.x="left"),c==="tl"||c==="mt"||c==="tr"?u.y="bottom":(c==="bl"||c==="mb"||c==="br")&&(u.y="top"),u},_getActionFromCorner:function(o,c,u,g){if(!c||!o)return"drag";var y=g.controls[c];return y.getActionName(u,y,g)},_setupCurrentTransform:function(o,c,u){if(c){var g=this.getPointer(o),y=c.__corner,x=c.controls[y],w=u&&y?x.getActionHandler(o,c,x):t.controlsUtils.dragHandler,C=this._getActionFromCorner(u,y,o,c),j=this._getOriginFromCorner(c,y),T=o[this.centeredKey],M={target:c,action:C,actionHandler:w,corner:y,scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,offsetX:g.x-c.left,offsetY:g.y-c.top,originX:j.x,originY:j.y,ex:g.x,ey:g.y,lastX:g.x,lastY:g.y,theta:a(c.angle),width:c.width*c.scaleX,shiftKey:o.shiftKey,altKey:T,original:t.util.saveObjectTransform(c)};this._shouldCenterTransform(c,C,T)&&(M.originX="center",M.originY="center"),M.original.originX=j.x,M.original.originY=j.y,this._currentTransform=M,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var c=this._groupSelector,u=new t.Point(c.ex,c.ey),g=t.util.transformPoint(u,this.viewportTransform),y=new t.Point(c.ex+c.left,c.ey+c.top),x=t.util.transformPoint(y,this.viewportTransform),w=Math.min(g.x,x.x),C=Math.min(g.y,x.y),j=Math.max(g.x,x.x),T=Math.max(g.y,x.y),M=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(w,C,j-w,T-C)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,w+=M,C+=M,j-=M,T-=M,t.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(w,C,j-w,T-C))},findTarget:function(o,c){if(!this.skipTargetFind){var u=!0,g=this.getPointer(o,u),y=this._activeObject,x=this.getActiveObjects(),w,C,j=l(o),T=x.length>1&&!c||x.length===1;if(this.targets=[],T&&y._findTargetCorner(g,j)||x.length>1&&!c&&y===this._searchPossibleTargets([y],g))return y;if(x.length===1&&y===this._searchPossibleTargets([y],g))if(this.preserveObjectStacking)w=y,C=this.targets,this.targets=[];else return y;var M=this._searchPossibleTargets(this._objects,g);return o[this.altSelectionKey]&&M&&w&&M!==w&&(M=w,this.targets=C),M}},_checkTarget:function(o,c,u){if(c&&c.visible&&c.evented&&c.containsPoint(o))if((this.perPixelTargetFind||c.perPixelTargetFind)&&!c.isEditing){var g=this.isTargetTransparent(c,u.x,u.y);if(!g)return!0}else return!0},_searchPossibleTargets:function(o,c){for(var u,g=o.length,y;g--;){var x=o[g],w=x.group?this._normalizePointer(x.group,c):c;if(this._checkTarget(w,x,c)){u=o[g],u.subTargetCheck&&u instanceof t.Group&&(y=this._searchPossibleTargets(u._objects,c),y&&this.targets.push(y));break}}return u},restorePointerVpt:function(o){return t.util.transformPoint(o,t.util.invertTransform(this.viewportTransform))},getPointer:function(o,c){if(this._absolutePointer&&!c)return this._absolutePointer;if(this._pointer&&c)return this._pointer;var u=d(o),g=this.upperCanvasEl,y=g.getBoundingClientRect(),x=y.width||0,w=y.height||0,C;(!x||!w)&&("top"in y&&"bottom"in y&&(w=Math.abs(y.top-y.bottom)),"right"in y&&"left"in y&&(x=Math.abs(y.right-y.left))),this.calcOffset(),u.x=u.x-this._offset.left,u.y=u.y-this._offset.top,c||(u=this.restorePointerVpt(u));var j=this.getRetinaScaling();return j!==1&&(u.x/=j,u.y/=j),x===0||w===0?C={width:1,height:1}:C={width:g.width/x,height:g.height/w},{x:u.x*C.width,y:u.y*C.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),c=this.lowerCanvasEl,u=this.upperCanvasEl;u?u.className="":(u=this._createCanvasElement(),this.upperCanvasEl=u),t.util.addClass(u,"upper-canvas "+o),this.wrapperEl.appendChild(u),this._copyCanvasStyle(c,u),this._applyCanvasStyle(u),this.contextTop=u.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var c=this.width||o.width,u=this.height||o.height;t.util.setStyle(o,{position:"absolute",width:c+"px",height:u+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=c,o.height=u,t.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,c){c.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,c){var u=!1,g=this.getActiveObjects(),y=[],x=[];o.forEach(function(w){g.indexOf(w)===-1&&(u=!0,w.fire("deselected",{e:c,target:w}),x.push(w))}),g.forEach(function(w){o.indexOf(w)===-1&&(u=!0,w.fire("selected",{e:c,target:w}),y.push(w))}),o.length>0&&g.length>0?u&&this.fire("selection:updated",{e:c,selected:y,deselected:x}):g.length>0?this.fire("selection:created",{e:c,selected:y}):o.length>0&&this.fire("selection:cleared",{e:c,deselected:x})},setActiveObject:function(o,c){var u=this.getActiveObjects();return this._setActiveObject(o,c),this._fireSelectionEvents(u,c),this},_setActiveObject:function(o,c){return this._activeObject===o||!this._discardActiveObject(c,o)||o.onSelect({e:c})?!1:(this._activeObject=o,!0)},_discardActiveObject:function(o,c){var u=this._activeObject;if(u){if(u.onDeselect({e:o,object:c}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var c=this.getActiveObjects(),u=this.getActiveObject();return c.length&&this.fire("before:selection:cleared",{target:u,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(c,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var c=this._activeObject;c&&c._renderControls(o)},_toObject:function(o,c,u){var g=this._realizeGroupTransformOnObject(o),y=this.callSuper("_toObject",o,c,u);return this._unwindGroupTransformOnObject(o,g),y},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var c=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],u={};return c.forEach(function(g){u[g]=o[g]}),t.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),u}else return null},_unwindGroupTransformOnObject:function(o,c){c&&o.set(c)},_setSVGObject:function(o,c,u){var g=this._realizeGroupTransformOnObject(c);this.callSuper("_setSVGObject",o,c,u),this._unwindGroupTransformOnObject(c,g)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,o)}});for(var f in t.StaticCanvas)f!=="prototype"&&(t.Canvas[f]=t.StaticCanvas[f])}(),function(){var d=t.util.addListener,a=t.util.removeListener,l=3,f=2,o=1,c={passive:!1};function u(g,y){return g.button&&g.button===y-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(g,y){var x=this.upperCanvasEl,w=this._getEventPrefix();g(t.window,"resize",this._onResize),g(x,w+"down",this._onMouseDown),g(x,w+"move",this._onMouseMove,c),g(x,w+"out",this._onMouseOut),g(x,w+"enter",this._onMouseEnter),g(x,"wheel",this._onMouseWheel),g(x,"contextmenu",this._onContextMenu),g(x,"dblclick",this._onDoubleClick),g(x,"dragover",this._onDragOver),g(x,"dragenter",this._onDragEnter),g(x,"dragleave",this._onDragLeave),g(x,"drop",this._onDrop),this.enablePointerEvents||g(x,"touchstart",this._onTouchStart,c),typeof eventjs<"u"&&y in eventjs&&(eventjs[y](x,"gesture",this._onGesture),eventjs[y](x,"drag",this._onDrag),eventjs[y](x,"orientation",this._onOrientationChange),eventjs[y](x,"shake",this._onShake),eventjs[y](x,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(a,"remove");var g=this._getEventPrefix();a(t.document,g+"up",this._onMouseUp),a(t.document,"touchend",this._onTouchEnd,c),a(t.document,g+"move",this._onMouseMove,c),a(t.document,"touchmove",this._onMouseMove,c)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(g,y){this.__onTransformGesture&&this.__onTransformGesture(g,y)},_onDrag:function(g,y){this.__onDrag&&this.__onDrag(g,y)},_onMouseWheel:function(g){this.__onMouseWheel(g)},_onMouseOut:function(g){var y=this._hoveredTarget;this.fire("mouse:out",{target:y,e:g}),this._hoveredTarget=null,y&&y.fire("mouseout",{e:g});var x=this;this._hoveredTargets.forEach(function(w){x.fire("mouse:out",{target:y,e:g}),w&&y.fire("mouseout",{e:g})}),this._hoveredTargets=[]},_onMouseEnter:function(g){!this._currentTransform&&!this.findTarget(g)&&(this.fire("mouse:over",{target:null,e:g}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(g,y){this.__onOrientationChange&&this.__onOrientationChange(g,y)},_onShake:function(g,y){this.__onShake&&this.__onShake(g,y)},_onLongPress:function(g,y){this.__onLongPress&&this.__onLongPress(g,y)},_onDragOver:function(g){g.preventDefault();var y=this._simpleEventHandler("dragover",g);this._fireEnterLeaveEvents(y,g)},_onDrop:function(g){return this._simpleEventHandler("drop:before",g),this._simpleEventHandler("drop",g)},_onContextMenu:function(g){return this.stopContextMenu&&(g.stopPropagation(),g.preventDefault()),!1},_onDoubleClick:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"dblclick"),this._resetTransformEventData(g)},getPointerId:function(g){var y=g.changedTouches;return y?y[0]&&y[0].identifier:this.enablePointerEvents?g.pointerId:-1},_isMainEvent:function(g){return g.isPrimary===!0?!0:g.isPrimary===!1?!1:g.type==="touchend"&&g.touches.length===0?!0:g.changedTouches?g.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(g){g.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(g)),this.__onMouseDown(g),this._resetTransformEventData();var y=this.upperCanvasEl,x=this._getEventPrefix();d(t.document,"touchend",this._onTouchEnd,c),d(t.document,"touchmove",this._onMouseMove,c),a(y,x+"down",this._onMouseDown)},_onMouseDown:function(g){this.__onMouseDown(g),this._resetTransformEventData();var y=this.upperCanvasEl,x=this._getEventPrefix();a(y,x+"move",this._onMouseMove,c),d(t.document,x+"up",this._onMouseUp),d(t.document,x+"move",this._onMouseMove,c)},_onTouchEnd:function(g){if(!(g.touches.length>0)){this.__onMouseUp(g),this._resetTransformEventData(),this.mainTouchId=null;var y=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,c),a(t.document,"touchmove",this._onMouseMove,c);var x=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(x.upperCanvasEl,y+"down",x._onMouseDown),x._willAddMouseDown=0},400)}},_onMouseUp:function(g){this.__onMouseUp(g),this._resetTransformEventData();var y=this.upperCanvasEl,x=this._getEventPrefix();this._isMainEvent(g)&&(a(t.document,x+"up",this._onMouseUp),a(t.document,x+"move",this._onMouseMove,c),d(y,x+"move",this._onMouseMove,c))},_onMouseMove:function(g){!this.allowTouchScrolling&&g.preventDefault&&g.preventDefault(),this.__onMouseMove(g)},_onResize:function(){this.calcOffset()},_shouldRender:function(g){var y=this._activeObject;return!!y!=!!g||y&&g&&y!==g?!0:(y&&y.isEditing,!1)},__onMouseUp:function(g){var y,x=this._currentTransform,w=this._groupSelector,C=!1,j=!w||w.left===0&&w.top===0;if(this._cacheTransformEventData(g),y=this._target,this._handleEvent(g,"up:before"),u(g,l)){this.fireRightClick&&this._handleEvent(g,"up",l,j);return}if(u(g,f)){this.fireMiddleClick&&this._handleEvent(g,"up",f,j),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(g);return}if(this._isMainEvent(g)){if(x&&(this._finalizeCurrentTransform(g),C=x.actionPerformed),!j){var T=y===this._activeObject;this._maybeGroupObjects(g),C||(C=this._shouldRender(y)||!T&&y===this._activeObject)}var M,E;if(y){if(M=y._findTargetCorner(this.getPointer(g,!0),t.util.isTouchEvent(g)),y.selectable&&y!==this._activeObject&&y.activeOn==="up")this.setActiveObject(y,g),C=!0;else{var A=y.controls[M],R=A&&A.getMouseUpHandler(g,y,A);R&&(E=this.getPointer(g),R(g,x,E.x,E.y))}y.isMoving=!1}if(x&&(x.target!==y||x.corner!==M)){var H=x.target&&x.target.controls[x.corner],K=H&&H.getMouseUpHandler(g,y,A);E=E||this.getPointer(g),K&&K(g,x,E.x,E.y)}this._setCursorFromEvent(g,y),this._handleEvent(g,"up",o,j),this._groupSelector=null,this._currentTransform=null,y&&(y.__corner=0),C?this.requestRenderAll():j||this.renderTop()}},_simpleEventHandler:function(g,y){var x=this.findTarget(y),w=this.targets,C={e:y,target:x,subTargets:w};if(this.fire(g,C),x&&x.fire(g,C),!w)return x;for(var j=0;j<w.length;j++)w[j].fire(g,C);return x},_handleEvent:function(g,y,x,w){var C=this._target,j=this.targets||[],T={e:g,target:C,subTargets:j,button:x||o,isClick:w||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};y==="up"&&(T.currentTarget=this.findTarget(g),T.currentSubTargets=this.targets),this.fire("mouse:"+y,T),C&&C.fire("mouse"+y,T);for(var M=0;M<j.length;M++)j[M].fire("mouse"+y,T)},_finalizeCurrentTransform:function(g){var y=this._currentTransform,x=y.target,w={e:g,target:x,transform:y,action:y.action};x._scaling&&(x._scaling=!1),x.setCoords(),(y.actionPerformed||this.stateful&&x.hasStateChanged())&&this._fire("modified",w)},_onMouseDownInDrawingMode:function(g){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(g).requestRenderAll();var y=this.getPointer(g);this.freeDrawingBrush.onMouseDown(y,{e:g,pointer:y}),this._handleEvent(g,"down")},_onMouseMoveInDrawingMode:function(g){if(this._isCurrentlyDrawing){var y=this.getPointer(g);this.freeDrawingBrush.onMouseMove(y,{e:g,pointer:y})}this.setCursor(this.freeDrawingCursor),this._handleEvent(g,"move")},_onMouseUpInDrawingMode:function(g){var y=this.getPointer(g);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:g,pointer:y}),this._handleEvent(g,"up")},__onMouseDown:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"down:before");var y=this._target;if(u(g,l)){this.fireRightClick&&this._handleEvent(g,"down",l);return}if(u(g,f)){this.fireMiddleClick&&this._handleEvent(g,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(g);return}if(this._isMainEvent(g)&&!this._currentTransform){var x=this._pointer;this._previousPointer=x;var w=this._shouldRender(y),C=this._shouldGroup(g,y);if(this._shouldClearSelection(g,y)?this.discardActiveObject(g):C&&(this._handleGrouping(g,y),y=this._activeObject),this.selection&&(!y||!y.selectable&&!y.isEditing&&y!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),y){var j=y===this._activeObject;y.selectable&&y.activeOn==="down"&&this.setActiveObject(y,g);var T=y._findTargetCorner(this.getPointer(g,!0),t.util.isTouchEvent(g));if(y.__corner=T,y===this._activeObject&&(T||!C)){this._setupCurrentTransform(g,y,j);var M=y.controls[T],x=this.getPointer(g),E=M&&M.getMouseDownHandler(g,y,M);E&&E(g,this._currentTransform,x.x,x.y)}}this._handleEvent(g,"down"),(w||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(g){this._resetTransformEventData(),this._pointer=this.getPointer(g,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(g)||null},_beforeTransform:function(g){var y=this._currentTransform;this.stateful&&y.target.saveState(),this.fire("before:transform",{e:g,transform:y})},__onMouseMove:function(g){this._handleEvent(g,"move:before"),this._cacheTransformEventData(g);var y,x;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(g);return}if(this._isMainEvent(g)){var w=this._groupSelector;w?(x=this._absolutePointer,w.left=x.x-w.ex,w.top=x.y-w.ey,this.renderTop()):this._currentTransform?this._transformObject(g):(y=this.findTarget(g)||null,this._setCursorFromEvent(g,y),this._fireOverOutEvents(y,g)),this._handleEvent(g,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(g,y){var x=this._hoveredTarget,w=this._hoveredTargets,C=this.targets,j=Math.max(w.length,C.length);this.fireSyntheticInOutEvents(g,y,{oldTarget:x,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var T=0;T<j;T++)this.fireSyntheticInOutEvents(C[T],y,{oldTarget:w[T],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=g,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(g,y){var x=this._draggedoverTarget,w=this._hoveredTargets,C=this.targets,j=Math.max(w.length,C.length);this.fireSyntheticInOutEvents(g,y,{oldTarget:x,evtOut:"dragleave",evtIn:"dragenter"});for(var T=0;T<j;T++)this.fireSyntheticInOutEvents(C[T],y,{oldTarget:w[T],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=g},fireSyntheticInOutEvents:function(g,y,x){var w,C,j=x.oldTarget,T,M,E=j!==g,A=x.canvasEvtIn,R=x.canvasEvtOut;E&&(w={e:y,target:g,previousTarget:j},C={e:y,target:j,nextTarget:g}),M=g&&E,T=j&&E,T&&(R&&this.fire(R,C),j.fire(x.evtOut,C)),M&&(A&&this.fire(A,w),g.fire(x.evtIn,w))},__onMouseWheel:function(g){this._cacheTransformEventData(g),this._handleEvent(g,"wheel"),this._resetTransformEventData()},_transformObject:function(g){var y=this.getPointer(g),x=this._currentTransform;x.reset=!1,x.shiftKey=g.shiftKey,x.altKey=g[this.centeredKey],this._performTransformAction(g,x,y),x.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(g,y,x){var w=x.x,C=x.y,j=y.action,T=!1,M=y.actionHandler;M&&(T=M(g,y,w,C)),j==="drag"&&T&&(y.target.isMoving=!0,this.setCursor(y.target.moveCursor||this.moveCursor)),y.actionPerformed=y.actionPerformed||T},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(g,y){if(!y)return this.setCursor(this.defaultCursor),!1;var x=y.hoverCursor||this.hoverCursor,w=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,C=(!w||!w.contains(y))&&y._findTargetCorner(this.getPointer(g,!0));C?this.setCursor(this.getCornerCursor(C,y,g)):(y.subTargetCheck&&this.targets.concat().reverse().map(function(j){x=j.hoverCursor||x}),this.setCursor(x))},getCornerCursor:function(g,y,x){var w=y.controls[g];return w.cursorStyleHandler(x,w,y)}})}(),function(){var d=Math.min,a=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(l,f){var o=this._activeObject;return o&&this._isSelectionKeyPressed(l)&&f&&f.selectable&&this.selection&&(o!==f||o.type==="activeSelection")&&!f.onSelect({e:l})},_handleGrouping:function(l,f){var o=this._activeObject;o.__corner||f===o&&(f=this.findTarget(l,!0),!f||!f.selectable)||(o&&o.type==="activeSelection"?this._updateActiveSelection(f,l):this._createActiveSelection(f,l))},_updateActiveSelection:function(l,f){var o=this._activeObject,c=o._objects.slice(0);o.contains(l)?(o.removeWithUpdate(l),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat(),o.size()===1&&this._setActiveObject(o.item(0),f)):(o.addWithUpdate(l),this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(c,f)},_createActiveSelection:function(l,f){var o=this.getActiveObjects(),c=this._createGroup(l);this._hoveredTarget=c,this._setActiveObject(c,f),this._fireSelectionEvents(o,f)},_createGroup:function(l){var f=this._objects,o=f.indexOf(this._activeObject)<f.indexOf(l),c=o?[this._activeObject,l]:[l,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(c,{canvas:this})},_groupSelectedObjects:function(l){var f=this._collectObjects(l),o;f.length===1?this.setActiveObject(f[0],l):f.length>1&&(o=new t.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(o,l))},_collectObjects:function(l){for(var f=[],o,c=this._groupSelector.ex,u=this._groupSelector.ey,g=c+this._groupSelector.left,y=u+this._groupSelector.top,x=new t.Point(d(c,g),d(u,y)),w=new t.Point(a(c,g),a(u,y)),C=!this.selectionFullyContained,j=c===g&&u===y,T=this._objects.length;T--&&(o=this._objects[T],!(!(!o||!o.selectable||!o.visible)&&(C&&o.intersectsWithRect(x,w,!0)||o.isContainedWithinRect(x,w,!0)||C&&o.containsPoint(x,null,!0)||C&&o.containsPoint(w,null,!0))&&(f.push(o),j))););return f.length>1&&(f=f.filter(function(M){return!M.onSelect({e:l})})),f},_maybeGroupObjects:function(l){this.selection&&this._groupSelector&&this._groupSelectedObjects(l),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var a=d.format||"png",l=d.quality||1,f=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(f,d);return t.util.toDataURL(o,a,l)},toCanvasElement:function(d,a){d=d||1,a=a||{};var l=(a.width||this.width)*d,f=(a.height||this.height)*d,o=this.getZoom(),c=this.width,u=this.height,g=o*d,y=this.viewportTransform,x=(y[4]-(a.left||0))*d,w=(y[5]-(a.top||0))*d,C=this.interactive,j=[g,0,0,g,x,w],T=this.enableRetinaScaling,M=t.util.createCanvasElement(),E=this.contextTop;return M.width=l,M.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=j,this.width=l,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(M.getContext("2d"),this._objects),this.viewportTransform=y,this.width=c,this.height=u,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=T,this.contextTop=E,M}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(d,a,l){if(d){var f=typeof d=="string"?JSON.parse(d):t.util.object.clone(d),o=this,c=f.clipPath,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(g){o.clear(),o._setBgOverlay(f,function(){c?o._enlivenObjects([c],function(y){o.clipPath=y[0],o.__setupCanvas.call(o,f,g,u,a)}):o.__setupCanvas.call(o,f,g,u,a)})},l),this}},__setupCanvas:function(d,a,l,f){var o=this;a.forEach(function(c,u){o.insertAt(c,u)}),this.renderOnAddRemove=l,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),f&&f()},_setBgOverlay:function(d,a){var l={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){a&&a();return}var f=function(){l.backgroundImage&&l.overlayImage&&l.backgroundColor&&l.overlayColor&&a&&a()};this.__setBgOverlay("backgroundImage",d.backgroundImage,l,f),this.__setBgOverlay("overlayImage",d.overlayImage,l,f),this.__setBgOverlay("backgroundColor",d.background,l,f),this.__setBgOverlay("overlayColor",d.overlay,l,f)},__setBgOverlay:function(d,a,l,f){var o=this;if(!a){l[d]=!0,f&&f();return}d==="backgroundImage"||d==="overlayImage"?t.util.enlivenObjects([a],function(c){o[d]=c[0],l[d]=!0,f&&f()}):this["set"+t.util.string.capitalize(d,!0)](a,function(){l[d]=!0,f&&f()})},_enlivenObjects:function(d,a,l){if(!d||d.length===0){a&&a([]);return}t.util.enlivenObjects(d,function(f){a&&a(f)},null,l)},_toDataURL:function(d,a){this.clone(function(l){a(l.toDataURL(d))})},_toDataURLWithMultiplier:function(d,a,l){this.clone(function(f){l(f.toDataURLWithMultiplier(d,a))})},clone:function(d,a){var l=JSON.stringify(this.toJSON(a));this.cloneWithoutData(function(f){f.loadFromJSON(l,function(){d&&d(f)})})},cloneWithoutData:function(d){var a=t.util.createCanvasElement();a.width=this.width,a.height=this.height;var l=new t.Canvas(a);this.backgroundImage?(l.setBackgroundImage(this.backgroundImage.src,function(){l.renderAll(),d&&d(l)}),l.backgroundImageOpacity=this.backgroundImageOpacity,l.backgroundImageStretch=this.backgroundImageStretch):d&&d(l)}}),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.util.object.clone,o=a.util.toFixed,c=a.util.string.capitalize,u=a.util.degreesToRadians,g=!a.isLikelyNode,y=2;a.Object||(a.Object=a.util.createClass(a.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:g,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(x){x&&this.setOptions(x)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=a.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(x){var w=a.perfLimitSizeTotal,C=x.width,j=x.height,T=a.maxCacheSideLimit,M=a.minCacheSideLimit;if(C<=T&&j<=T&&C*j<=w)return C<M&&(x.width=M),j<M&&(x.height=M),x;var E=C/j,A=a.util.limitDimsByArea(E,w),R=a.util.capValue,H=R(M,A.x,T),K=R(M,A.y,T);return C>H&&(x.zoomX/=C/H,x.width=H,x.capped=!0),j>K&&(x.zoomY/=j/K,x.height=K,x.capped=!0),x},_getCacheCanvasDimensions:function(){var x=this.getTotalObjectScaling(),w=this._getTransformedDimensions(0,0),C=w.x*x.scaleX/this.scaleX,j=w.y*x.scaleY/this.scaleY;return{width:C+y,height:j+y,zoomX:x.scaleX,zoomY:x.scaleY,x:C,y:j}},_updateCacheCanvas:function(){var x=this.canvas;if(this.noScaleCache&&x&&x._currentTransform){var w=x._currentTransform.target,C=x._currentTransform.action;if(this===w&&C.slice&&C.slice(0,5)==="scale")return!1}var j=this._cacheCanvas,T=this._limitCacheSize(this._getCacheCanvasDimensions()),M=a.minCacheSideLimit,E=T.width,A=T.height,R,H,K=T.zoomX,X=T.zoomY,ne=E!==this.cacheWidth||A!==this.cacheHeight,de=this.zoomX!==K||this.zoomY!==X,se=ne||de,q=0,P=0,$=!1;if(ne){var V=this._cacheCanvas.width,D=this._cacheCanvas.height,O=E>V||A>D,L=(E<V*.9||A<D*.9)&&V>M&&D>M;$=O||L,O&&!T.capped&&(E>M||A>M)&&(q=E*.1,P=A*.1)}return this instanceof a.Text&&this.path&&(se=!0,$=!0,q+=this.getHeightOfLine(0)*this.zoomX,P+=this.getHeightOfLine(0)*this.zoomY),se?($?(j.width=Math.ceil(E+q),j.height=Math.ceil(A+P)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,j.width,j.height)),R=T.x/2,H=T.y/2,this.cacheTranslationX=Math.round(j.width/2-R)+R,this.cacheTranslationY=Math.round(j.height/2-H)+H,this.cacheWidth=E,this.cacheHeight=A,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(K,X),this.zoomX=K,this.zoomY=X,!0):!1},setOptions:function(x){this._setOptions(x),this._initGradient(x.fill,"fill"),this._initGradient(x.stroke,"stroke"),this._initPattern(x.fill,"fill"),this._initPattern(x.stroke,"stroke")},transform:function(x){var w=this.group&&!this.group._transformDone||this.group&&this.canvas&&x===this.canvas.contextTop,C=this.calcTransformMatrix(!w);x.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(x){var w=a.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:a.version,originX:this.originX,originY:this.originY,left:o(this.left,w),top:o(this.top,w),width:o(this.width,w),height:o(this.height,w),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,w),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,w),scaleX:o(this.scaleX,w),scaleY:o(this.scaleY,w),angle:o(this.angle,w),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,w),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,w),skewY:o(this.skewY,w)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(x),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),a.util.populateWithProperties(this,C,x),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(x){return this.toObject(x)},_removeDefaultValues:function(x){var w=a.util.getKlass(x.type).prototype,C=w.stateProperties;return C.forEach(function(j){j==="left"||j==="top"||(x[j]===w[j]&&delete x[j],Array.isArray(x[j])&&Array.isArray(w[j])&&x[j].length===0&&w[j].length===0&&delete x[j])}),x},toString:function(){return"#<fabric."+c(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var x=a.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(x.scaleX),scaleY:Math.abs(x.scaleY)}},getTotalObjectScaling:function(){var x=this.getObjectScaling(),w=x.scaleX,C=x.scaleY;if(this.canvas){var j=this.canvas.getZoom(),T=this.canvas.getRetinaScaling();w*=j*T,C*=j*T}return{scaleX:w,scaleY:C}},getObjectOpacity:function(){var x=this.opacity;return this.group&&(x*=this.group.getObjectOpacity()),x},_set:function(x,w){var C=x==="scaleX"||x==="scaleY",j=this[x]!==w,T=!1;return C&&(w=this._constrainScale(w)),x==="scaleX"&&w<0?(this.flipX=!this.flipX,w*=-1):x==="scaleY"&&w<0?(this.flipY=!this.flipY,w*=-1):x==="shadow"&&w&&!(w instanceof a.Shadow)?w=new a.Shadow(w):x==="dirty"&&this.group&&this.group.set("dirty",w),this[x]=w,j&&(T=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(x)>-1?(this.dirty=!0,T&&this.group.set("dirty",!0)):T&&this.stateProperties.indexOf(x)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:a.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(x){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(x.save(),this._setupCompositeOperation(x),this.drawSelectionBackground(x),this.transform(x),this._setOpacity(x),this._setShadow(x,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(x)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(x),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),x.restore())},renderCache:function(x){x=x||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,x.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(x,w){if(x.save(),w.inverted?x.globalCompositeOperation="destination-out":x.globalCompositeOperation="destination-in",w.absolutePositioned){var C=a.util.invertTransform(this.calcTransformMatrix());x.transform(C[0],C[1],C[2],C[3],C[4],C[5])}w.transform(x),x.scale(1/w.zoomX,1/w.zoomY),x.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),x.restore()},drawObject:function(x,w){var C=this.fill,j=this.stroke;w?(this.fill="black",this.stroke="",this._setClippingProperties(x)):this._renderBackground(x),this._render(x),this._drawClipPath(x,this.clipPath),this.fill=C,this.stroke=j},_drawClipPath:function(x,w){w&&(w.canvas=this.canvas,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCache(x,w))},drawCacheOnCanvas:function(x){x.scale(1/this.zoomX,1/this.zoomY),x.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(x){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!x&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!x){var w=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-w/2,-C/2,w,C)}return!0}return!1},_renderBackground:function(x){if(this.backgroundColor){var w=this._getNonTransformedDimensions();x.fillStyle=this.backgroundColor,x.fillRect(-w.x/2,-w.y/2,w.x,w.y),this._removeShadow(x)}},_setOpacity:function(x){this.group&&!this.group._transformDone?x.globalAlpha=this.getObjectOpacity():x.globalAlpha*=this.opacity},_setStrokeStyles:function(x,w){var C=w.stroke;C&&(x.lineWidth=w.strokeWidth,x.lineCap=w.strokeLineCap,x.lineDashOffset=w.strokeDashOffset,x.lineJoin=w.strokeLineJoin,x.miterLimit=w.strokeMiterLimit,C.toLive?C.gradientUnits==="percentage"||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(x,C):(x.strokeStyle=C.toLive(x,this),this._applyPatternGradientTransform(x,C)):x.strokeStyle=w.stroke)},_setFillStyles:function(x,w){var C=w.fill;C&&(C.toLive?(x.fillStyle=C.toLive(x,this),this._applyPatternGradientTransform(x,w.fill)):x.fillStyle=C)},_setClippingProperties:function(x){x.globalAlpha=1,x.strokeStyle="transparent",x.fillStyle="#000000"},_setLineDash:function(x,w){!w||w.length===0||(1&w.length&&w.push.apply(w,w),x.setLineDash(w))},_renderControls:function(x,w){var C=this.getViewportTransform(),j=this.calcTransformMatrix(),T,M,E;w=w||{},M=typeof w.hasBorders<"u"?w.hasBorders:this.hasBorders,E=typeof w.hasControls<"u"?w.hasControls:this.hasControls,j=a.util.multiplyTransformMatrices(C,j),T=a.util.qrDecompose(j),x.save(),x.translate(T.translateX,T.translateY),x.lineWidth=1*this.borderScaleFactor,this.group||(x.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(T.angle-=180),x.rotate(u(this.group?T.angle:this.angle)),w.forActiveSelection||this.group?M&&this.drawBordersInGroup(x,T,w):M&&this.drawBorders(x,w),E&&this.drawControls(x,w),x.restore()},_setShadow:function(x){if(this.shadow){var w=this.shadow,C=this.canvas,j,T=C&&C.viewportTransform[0]||1,M=C&&C.viewportTransform[3]||1;w.nonScaling?j={scaleX:1,scaleY:1}:j=this.getObjectScaling(),C&&C._isRetinaScaling()&&(T*=a.devicePixelRatio,M*=a.devicePixelRatio),x.shadowColor=w.color,x.shadowBlur=w.blur*a.browserShadowBlurConstant*(T+M)*(j.scaleX+j.scaleY)/4,x.shadowOffsetX=w.offsetX*T*j.scaleX,x.shadowOffsetY=w.offsetY*M*j.scaleY}},_removeShadow:function(x){this.shadow&&(x.shadowColor="",x.shadowBlur=x.shadowOffsetX=x.shadowOffsetY=0)},_applyPatternGradientTransform:function(x,w){if(!w||!w.toLive)return{offsetX:0,offsetY:0};var C=w.gradientTransform||w.patternTransform,j=-this.width/2+w.offsetX||0,T=-this.height/2+w.offsetY||0;return w.gradientUnits==="percentage"?x.transform(this.width,0,0,this.height,j,T):x.transform(1,0,0,1,j,T),C&&x.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:j,offsetY:T}},_renderPaintInOrder:function(x){this.paintFirst==="stroke"?(this._renderStroke(x),this._renderFill(x)):(this._renderFill(x),this._renderStroke(x))},_render:function(){},_renderFill:function(x){this.fill&&(x.save(),this._setFillStyles(x,this),this.fillRule==="evenodd"?x.fill("evenodd"):x.fill(),x.restore())},_renderStroke:function(x){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(x),x.save(),this.strokeUniform&&this.group){var w=this.getObjectScaling();x.scale(1/w.scaleX,1/w.scaleY)}else this.strokeUniform&&x.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(x,this.strokeDashArray),this._setStrokeStyles(x,this),x.stroke(),x.restore()}},_applyPatternForTransformedGradient:function(x,w){var C=this._limitCacheSize(this._getCacheCanvasDimensions()),j=a.util.createCanvasElement(),T,M=this.canvas.getRetinaScaling(),E=C.x/this.scaleX/M,A=C.y/this.scaleY/M;j.width=E,j.height=A,T=j.getContext("2d"),T.beginPath(),T.moveTo(0,0),T.lineTo(E,0),T.lineTo(E,A),T.lineTo(0,A),T.closePath(),T.translate(E/2,A/2),T.scale(C.zoomX/this.scaleX/M,C.zoomY/this.scaleY/M),this._applyPatternGradientTransform(T,w),T.fillStyle=w.toLive(x),T.fill(),x.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),x.scale(M*this.scaleX/C.zoomX,M*this.scaleY/C.zoomY),x.strokeStyle=T.createPattern(j,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var x=a.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",x.scaleX),this.set("scaleY",x.scaleY),this.angle=x.angle,this.skewX=x.skewX,this.skewY=0}},_removeTransformMatrix:function(x){var w=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),w=a.util.transformPoint(w,this.transformMatrix)),this.transformMatrix=null,x&&(this.scaleX*=x.scaleX,this.scaleY*=x.scaleY,this.cropX=x.cropX,this.cropY=x.cropY,w.x+=x.offsetLeft,w.y+=x.offsetTop,this.width=x.width,this.height=x.height),this.setPositionByOrigin(w,"center","center")},clone:function(x,w){var C=this.toObject(w);this.constructor.fromObject?this.constructor.fromObject(C,x):a.Object._fromObject("Object",C,x)},cloneAsImage:function(x,w){var C=this.toCanvasElement(w);return x&&x(new a.Image(C)),this},toCanvasElement:function(x){x||(x={});var w=a.util,C=w.saveObjectTransform(this),j=this.group,T=this.shadow,M=Math.abs,E=(x.multiplier||1)*(x.enableRetinaScaling?a.devicePixelRatio:1);delete this.group,x.withoutTransform&&w.resetObjectTransform(this),x.withoutShadow&&(this.shadow=null);var A=a.util.createCanvasElement(),R=this.getBoundingRect(!0,!0),H=this.shadow,K,X={x:0,y:0},ne,de,se;H&&(ne=H.blur,H.nonScaling?K={scaleX:1,scaleY:1}:K=this.getObjectScaling(),X.x=2*Math.round(M(H.offsetX)+ne)*M(K.scaleX),X.y=2*Math.round(M(H.offsetY)+ne)*M(K.scaleY)),de=R.width+X.x,se=R.height+X.y,A.width=Math.ceil(de),A.height=Math.ceil(se);var q=new a.StaticCanvas(A,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});x.format==="jpeg"&&(q.backgroundColor="#fff"),this.setPositionByOrigin(new a.Point(q.width/2,q.height/2),"center","center");var P=this.canvas;q.add(this);var $=q.toCanvasElement(E||1,x);return this.shadow=T,this.set("canvas",P),j&&(this.group=j),this.set(C).setCoords(),q._objects=[],q.dispose(),q=null,$},toDataURL:function(x){return x||(x={}),a.util.toDataURL(this.toCanvasElement(x),x.format||"png",x.quality||1)},isType:function(x){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===x},complexity:function(){return 1},toJSON:function(x){return this.toObject(x)},rotate:function(x){var w=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return w&&this._setOriginToCenter(),this.set("angle",x),w&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(x,w){w=w||this.canvas.getPointer(x);var C=new a.Point(w.x,w.y),j=this._getLeftTopCoords();return this.angle&&(C=a.util.rotatePoint(C,j,u(-this.angle))),{x:C.x-j.x,y:C.y-j.y}},_setupCompositeOperation:function(x){this.globalCompositeOperation&&(x.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){a.runningAnimations&&a.runningAnimations.cancelByTarget(this)}}),a.util.createAccessors&&a.util.createAccessors(a.Object),l(a.Object.prototype,a.Observable),a.Object.NUM_FRACTION_DIGITS=2,a.Object.ENLIVEN_PROPS=["clipPath"],a.Object._fromObject=function(x,w,C,j){var T=a[x];w=f(w,!0),a.util.enlivenPatterns([w.fill,w.stroke],function(M){typeof M[0]<"u"&&(w.fill=M[0]),typeof M[1]<"u"&&(w.stroke=M[1]),a.util.enlivenObjectEnlivables(w,w,function(){var E=j?new T(w[j],w):new T(w);C&&C(E)})})},a.Object.__uid=0)}(e),function(){var d=t.util.degreesToRadians,a={left:-.5,center:0,right:.5},l={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(f,o,c,u,g){var y=f.x,x=f.y,w,C,j;return typeof o=="string"?o=a[o]:o-=.5,typeof u=="string"?u=a[u]:u-=.5,w=u-o,typeof c=="string"?c=l[c]:c-=.5,typeof g=="string"?g=l[g]:g-=.5,C=g-c,(w||C)&&(j=this._getTransformedDimensions(),y=f.x+w*j.x,x=f.y+C*j.y),new t.Point(y,x)},translateToCenterPoint:function(f,o,c){var u=this.translateToGivenOrigin(f,o,c,"center","center");return this.angle?t.util.rotatePoint(u,f,d(this.angle)):u},translateToOriginPoint:function(f,o,c){var u=this.translateToGivenOrigin(f,"center","center",o,c);return this.angle?t.util.rotatePoint(u,f,d(this.angle)):u},getCenterPoint:function(){var f=new t.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,o){var c=this.getCenterPoint();return this.translateToOriginPoint(c,f,o)},toLocalPoint:function(f,o,c){var u=this.getCenterPoint(),g,y;return typeof o<"u"&&typeof c<"u"?g=this.translateToGivenOrigin(u,"center","center",o,c):g=new t.Point(this.left,this.top),y=new t.Point(f.x,f.y),this.angle&&(y=t.util.rotatePoint(y,u,-d(this.angle))),y.subtractEquals(g)},setPositionByOrigin:function(f,o,c){var u=this.translateToCenterPoint(f,o,c),g=this.translateToOriginPoint(u,this.originX,this.originY);this.set("left",g.x),this.set("top",g.y)},adjustPosition:function(f){var o=d(this.angle),c=this.getScaledWidth(),u=t.util.cos(o)*c,g=t.util.sin(o)*c,y,x;typeof this.originX=="string"?y=a[this.originX]:y=this.originX-.5,typeof f=="string"?x=a[f]:x=f-.5,this.left+=u*(x-y),this.top+=g*(x-y),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(c){return[new t.Point(c.tl.x,c.tl.y),new t.Point(c.tr.x,c.tr.y),new t.Point(c.br.x,c.br.y),new t.Point(c.bl.x,c.bl.y)]}var a=t.util,l=a.degreesToRadians,f=a.multiplyTransformMatrices,o=a.transformPoint;a.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(c,u){return u?c?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),c?this.aCoords:this.lineCoords)},getCoords:function(c,u){return d(this._getCoords(c,u))},intersectsWithRect:function(c,u,g,y){var x=this.getCoords(g,y),w=t.Intersection.intersectPolygonRectangle(x,c,u);return w.status==="Intersection"},intersectsWithObject:function(c,u,g){var y=t.Intersection.intersectPolygonPolygon(this.getCoords(u,g),c.getCoords(u,g));return y.status==="Intersection"||c.isContainedWithinObject(this,u,g)||this.isContainedWithinObject(c,u,g)},isContainedWithinObject:function(c,u,g){for(var y=this.getCoords(u,g),x=u?c.aCoords:c.lineCoords,w=0,C=c._getImageLines(x);w<4;w++)if(!c.containsPoint(y[w],C))return!1;return!0},isContainedWithinRect:function(c,u,g,y){var x=this.getBoundingRect(g,y);return x.left>=c.x&&x.left+x.width<=u.x&&x.top>=c.y&&x.top+x.height<=u.y},containsPoint:function(c,w,g,y){var x=this._getCoords(g,y),w=w||this._getImageLines(x),C=this._findCrossPoints(c,w);return C!==0&&C%2===1},isOnScreen:function(c){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br,y=this.getCoords(!0,c);return y.some(function(x){return x.x<=g.x&&x.x>=u.x&&x.y<=g.y&&x.y>=u.y})||this.intersectsWithRect(u,g,!0,c)?!0:this._containsCenterOfCanvas(u,g,c)},_containsCenterOfCanvas:function(c,u,g){var y={x:(c.x+u.x)/2,y:(c.y+u.y)/2};return!!this.containsPoint(y,null,!0,g)},isPartiallyOnScreen:function(c){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,g=this.canvas.vptCoords.br;if(this.intersectsWithRect(u,g,!0,c))return!0;var y=this.getCoords(!0,c).every(function(x){return(x.x>=g.x||x.x<=u.x)&&(x.y>=g.y||x.y<=u.y)});return y&&this._containsCenterOfCanvas(u,g,c)},_getImageLines:function(c){var u={topline:{o:c.tl,d:c.tr},rightline:{o:c.tr,d:c.br},bottomline:{o:c.br,d:c.bl},leftline:{o:c.bl,d:c.tl}};return u},_findCrossPoints:function(c,u){var g,y,x,w,C,j=0,T;for(var M in u)if(T=u[M],!(T.o.y<c.y&&T.d.y<c.y)&&!(T.o.y>=c.y&&T.d.y>=c.y)&&(T.o.x===T.d.x&&T.o.x>=c.x?C=T.o.x:(g=0,y=(T.d.y-T.o.y)/(T.d.x-T.o.x),x=c.y-g*c.x,w=T.o.y-y*T.o.x,C=-(x-w)/(g-y)),C>=c.x&&(j+=1),j===2))break;return j},getBoundingRect:function(c,u){var g=this.getCoords(c,u);return a.makeBoundingBoxFromPoints(g)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(c){return Math.abs(c)<this.minScaleLimit?c<0?-this.minScaleLimit:this.minScaleLimit:c===0?1e-4:c},scale:function(c){return this._set("scaleX",c),this._set("scaleY",c),this.setCoords()},scaleToWidth:function(c,u){var g=this.getBoundingRect(u).width/this.getScaledWidth();return this.scale(c/this.width/g)},scaleToHeight:function(c,u){var g=this.getBoundingRect(u).height/this.getScaledHeight();return this.scale(c/this.height/g)},calcLineCoords:function(){var c=this.getViewportTransform(),u=this.padding,g=l(this.angle),y=a.cos(g),x=a.sin(g),w=y*u,C=x*u,j=w+C,T=w-C,M=this.calcACoords(),E={tl:o(M.tl,c),tr:o(M.tr,c),bl:o(M.bl,c),br:o(M.br,c)};return u&&(E.tl.x-=T,E.tl.y-=j,E.tr.x+=j,E.tr.y-=T,E.bl.x-=j,E.bl.y+=T,E.br.x+=T,E.br.y+=j),E},calcOCoords:function(){var c=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),g=this.getViewportTransform(),y=f(g,u),x=f(y,c),x=f(x,[1/g[0],0,0,1/g[3],0,0]),w=this._calculateCurrentDimensions(),C={};return this.forEachControl(function(j,T,M){C[T]=j.positionHandler(w,x,M)}),C},calcACoords:function(){var c=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),g=f(u,c),y=this._getTransformedDimensions(),x=y.x/2,w=y.y/2;return{tl:o({x:-x,y:-w},g),tr:o({x,y:-w},g),bl:o({x:-x,y:w},g),br:o({x,y:w},g)}},setCoords:function(c){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),c?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return a.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var c=this.getCenterPoint();return[1,0,0,1,c.x,c.y]},transformMatrixKey:function(c){var u="_",g="";return!c&&this.group&&(g=this.group.transformMatrixKey(c)+u),g+this.top+u+this.left+u+this.scaleX+u+this.scaleY+u+this.skewX+u+this.skewY+u+this.angle+u+this.originX+u+this.originY+u+this.width+u+this.height+u+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(c){var u=this.calcOwnMatrix();if(c||!this.group)return u;var g=this.transformMatrixKey(c),y=this.matrixCache||(this.matrixCache={});return y.key===g?y.value:(this.group&&(u=f(this.group.calcTransformMatrix(!1),u)),y.key=g,y.value=u,u)},calcOwnMatrix:function(){var c=this.transformMatrixKey(!0),u=this.ownMatrixCache||(this.ownMatrixCache={});if(u.key===c)return u.value;var g=this._calcTranslateMatrix(),y={angle:this.angle,translateX:g[4],translateY:g[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return u.key=c,u.value=a.composeMatrix(y),u.value},_getNonTransformedDimensions:function(){var c=this.strokeWidth,u=this.width+c,g=this.height+c;return{x:u,y:g}},_getTransformedDimensions:function(c,u){typeof c>"u"&&(c=this.skewX),typeof u>"u"&&(u=this.skewY);var g,y,x,w=c===0&&u===0;if(this.strokeUniform?(y=this.width,x=this.height):(g=this._getNonTransformedDimensions(),y=g.x,x=g.y),w)return this._finalizeDimensions(y*this.scaleX,x*this.scaleY);var C=a.sizeAfterTransform(y,x,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:c,skewY:u});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(c,u){return this.strokeUniform?{x:c+this.strokeWidth,y:u+this.strokeWidth}:{x:c,y:u}},_calculateCurrentDimensions:function(){var c=this.getViewportTransform(),u=this._getTransformedDimensions(),g=o(u,c,!0);return g.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(l,f){if(f){if(f.toLive)return l+": url(#SVGID_"+f.id+"); ";var o=new t.Color(f),c=l+": "+o.toRgb()+"; ",u=o.getAlpha();return u!==1&&(c+=l+"-opacity: "+u.toString()+"; "),c}else return l+": none; "}var a=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(l){var f=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",c=this.strokeDashArray?this.strokeDashArray.join(" "):"none",u=this.strokeDashOffset?this.strokeDashOffset:"0",g=this.strokeLineCap?this.strokeLineCap:"butt",y=this.strokeLineJoin?this.strokeLineJoin:"miter",x=this.strokeMiterLimit?this.strokeMiterLimit:"4",w=typeof this.opacity<"u"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",j=l?"":this.getSvgFilter(),T=d("fill",this.fill),M=d("stroke",this.stroke);return[M,"stroke-width: ",o,"; ","stroke-dasharray: ",c,"; ","stroke-linecap: ",g,"; ","stroke-dashoffset: ",u,"; ","stroke-linejoin: ",y,"; ","stroke-miterlimit: ",x,"; ",T,"fill-rule: ",f,"; ","opacity: ",w,";",j,C].join("")},getSvgSpanStyles:function(l,f){var o="; ",u=l.fontFamily?"font-family: "+(l.fontFamily.indexOf("'")===-1&&l.fontFamily.indexOf('"')===-1?"'"+l.fontFamily+"'":l.fontFamily)+o:"",c=l.strokeWidth?"stroke-width: "+l.strokeWidth+o:"",u=u,g=l.fontSize?"font-size: "+l.fontSize+"px"+o:"",y=l.fontStyle?"font-style: "+l.fontStyle+o:"",x=l.fontWeight?"font-weight: "+l.fontWeight+o:"",w=l.fill?d("fill",l.fill):"",C=l.stroke?d("stroke",l.stroke):"",j=this.getSvgTextDecoration(l),T=l.deltaY?"baseline-shift: "+-l.deltaY+"; ":"";return j&&(j="text-decoration: "+j+o),[C,c,u,g,y,x,j,w,T,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(l){return["overline","underline","line-through"].filter(function(f){return l[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(l,f){var o=l?this.calcTransformMatrix():this.calcOwnMatrix(),c='transform="'+t.util.matrixToSVG(o);return c+(f||"")+'" '},_setSVGBg:function(l){if(this.backgroundColor){var f=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(-this.width/2,f),'" y="',a(-this.height/2,f),'" width="',a(this.width,f),'" height="',a(this.height,f),`"></rect>
`)}},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(l),{reviver:l})},toClipPathSVG:function(l){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(l),{reviver:l})},_createBaseClipPathSVGMarkup:function(l,f){f=f||{};var o=f.reviver,c=f.additionalTransform||"",u=[this.getSvgTransform(!0,c),this.getSvgCommons()].join(""),g=l.indexOf("COMMON_PARTS");return l[g]=u,o?o(l.join("")):l.join("")},_createBaseSVGMarkup:function(l,f){f=f||{};var o=f.noStyle,c=f.reviver,u=o?"":'style="'+this.getSvgStyles()+'" ',g=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",y=this.clipPath,x=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",w=y&&y.absolutePositioned,C=this.stroke,j=this.fill,T=this.shadow,M,E=[],A,R=l.indexOf("COMMON_PARTS"),H=f.additionalTransform;return y&&(y.clipPathId="CLIPPATH_"+t.Object.__uid++,A='<clipPath id="'+y.clipPathId+`" >
`+y.toClipPathSVG(c)+`</clipPath>
`),w&&E.push("<g ",g,this.getSvgCommons(),` >
`),E.push("<g ",this.getSvgTransform(!1),w?"":g+this.getSvgCommons(),` >
`),M=[u,x,o?"":this.addPaintOrder()," ",H?'transform="'+H+'" ':""].join(""),l[R]=M,j&&j.toLive&&E.push(j.toSVG(this)),C&&C.toLive&&E.push(C.toSVG(this)),T&&E.push(T.toSVG(this)),y&&E.push(A),E.push(l.join("")),E.push(`</g>
`),w&&E.push(`</g>
`),c?c(E.join("")):E.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=t.util.object.extend,a="stateProperties";function l(o,c,u){var g={},y=!0;u.forEach(function(x){g[x]=o[x]}),d(o[c],g,y)}function f(o,c,u){if(o===c)return!0;if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(var g=0,y=o.length;g<y;g++)if(!f(o[g],c[g]))return!1;return!0}else if(o&&typeof o=="object"){var x=Object.keys(o),w;if(!c||typeof c!="object"||!u&&x.length!==Object.keys(c).length)return!1;for(var g=0,y=x.length;g<y;g++)if(w=x[g],!(w==="canvas"||w==="group")&&!f(o[w],c[w]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(o){o=o||a;var c="_"+o;return Object.keys(this[c]).length<this[o].length?!0:!f(this[c],this,!0)},saveState:function(o){var c=o&&o.propertySet||a,u="_"+c;return this[u]?(l(this,u,this[c]),o&&o.stateProperties&&l(this,u,o.stateProperties),this):this.setupState(o)},setupState:function(o){o=o||{};var c=o.propertySet||a;return o.propertySet=c,this["_"+c]={},this.saveState(o),this}})}(),function(){var d=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(a,l){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=a.x,o=a.y,c,u,g=Object.keys(this.oCoords),y=g.length-1,x;for(this.__corner=0;y>=0;y--)if(x=g[y],!!this.isControlVisible(x)&&(u=this._getImageLines(l?this.oCoords[x].touchCorner:this.oCoords[x].corner),c=this._findCrossPoints({x:f,y:o},u),c!==0&&c%2===1))return this.__corner=x,x;return!1},forEachControl:function(a){for(var l in this.controls)a(this.controls[l],l,this)},_setCornerCoords:function(){var a=this.oCoords;for(var l in a){var f=this.controls[l];a[l].corner=f.calcCornerCoords(this.angle,this.cornerSize,a[l].x,a[l].y,!1),a[l].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,a[l].x,a[l].y,!0)}},drawSelectionBackground:function(a){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;a.save();var l=this.getCenterPoint(),f=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return a.translate(l.x,l.y),a.scale(1/o[0],1/o[3]),a.rotate(d(this.angle)),a.fillStyle=this.selectionBackgroundColor,a.fillRect(-f.x/2,-f.y/2,f.x,f.y),a.restore(),this},drawBorders:function(a,l){l=l||{};var f=this._calculateCurrentDimensions(),o=this.borderScaleFactor,c=f.x+o,u=f.y+o,g=typeof l.hasControls<"u"?l.hasControls:this.hasControls,y=!1;return a.save(),a.strokeStyle=l.borderColor||this.borderColor,this._setLineDash(a,l.borderDashArray||this.borderDashArray),a.strokeRect(-c/2,-u/2,c,u),g&&(a.beginPath(),this.forEachControl(function(x,w,C){x.withConnection&&x.getVisibility(C,w)&&(y=!0,a.moveTo(x.x*c,x.y*u),a.lineTo(x.x*c+x.offsetX,x.y*u+x.offsetY))}),y&&a.stroke()),a.restore(),this},drawBordersInGroup:function(a,l,f){f=f||{};var o=t.util.sizeAfterTransform(this.width,this.height,l),c=this.strokeWidth,u=this.strokeUniform,g=this.borderScaleFactor,y=o.x+c*(u?this.canvas.getZoom():l.scaleX)+g,x=o.y+c*(u?this.canvas.getZoom():l.scaleY)+g;return a.save(),this._setLineDash(a,f.borderDashArray||this.borderDashArray),a.strokeStyle=f.borderColor||this.borderColor,a.strokeRect(-y/2,-x/2,y,x),a.restore(),this},drawControls:function(a,l){l=l||{},a.save();var f=this.canvas.getRetinaScaling(),o,c;return a.setTransform(f,0,0,f,0,0),a.strokeStyle=a.fillStyle=l.cornerColor||this.cornerColor,this.transparentCorners||(a.strokeStyle=l.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(a,l.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(o=this.group.calcTransformMatrix()),this.forEachControl(function(u,g,y){c=y.oCoords[g],u.getVisibility(y,g)&&(o&&(c=t.util.transformPoint(c,o)),u.render(a,c.x,c.y,l,y))}),a.restore(),this},isControlVisible:function(a){return this.controls[a]&&this.controls[a].getVisibility(this,a)},setControlVisible:function(a,l){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[a]=l,this},setControlsVisibility:function(a){a||(a={});for(var l in a)this.setControlVisible(l,a[l]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,a){a=a||{};var l=function(){},f=a.onComplete||l,o=a.onChange||l,c=this;return t.util.animate({target:this,startValue:d.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(u){d.set("left",u),c.requestRenderAll(),o()},onComplete:function(){d.setCoords(),f()}})},fxCenterObjectV:function(d,a){a=a||{};var l=function(){},f=a.onComplete||l,o=a.onChange||l,c=this;return t.util.animate({target:this,startValue:d.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(u){d.set("top",u),c.requestRenderAll(),o()},onComplete:function(){d.setCoords(),f()}})},fxRemove:function(d,a){a=a||{};var l=function(){},f=a.onComplete||l,o=a.onChange||l,c=this;return t.util.animate({target:this,startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(u){d.set("opacity",u),c.requestRenderAll(),o()},onComplete:function(){c.remove(d),f()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],a,l,f=[];for(a in arguments[0])d.push(a);for(var o=0,c=d.length;o<c;o++)a=d[o],l=o!==c-1,f.push(this._animate(a,arguments[0][a],arguments[1],l));return f}else return this._animate.apply(this,arguments)},_animate:function(d,a,l,f){var o=this,c;a=a.toString(),l?l=t.util.object.clone(l):l={},~d.indexOf(".")&&(c=d.split("."));var u=o.colorProperties.indexOf(d)>-1||c&&o.colorProperties.indexOf(c[1])>-1,g=c?this.get(c[0])[c[1]]:this.get(d);"from"in l||(l.from=g),u||(~a.indexOf("=")?a=g+parseFloat(a.replace("=","")):a=parseFloat(a));var y={target:this,startValue:l.from,endValue:a,byValue:l.by,easing:l.easing,duration:l.duration,abort:l.abort&&function(x,w,C){return l.abort.call(o,x,w,C)},onChange:function(x,w,C){c?o[c[0]][c[1]]=x:o.set(d,x),!f&&l.onChange&&l.onChange(x,w,C)},onComplete:function(x,w,C){f||(o.setCoords(),l.onComplete&&l.onComplete(x,w,C))}};return u?t.util.animateColor(y.startValue,y.endValue,y.duration,y):t.util.animate(y)}}),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};if(a.Line){a.warn("fabric.Line is already defined");return}a.Line=a.util.createClass(a.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:a.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,g){u||(u=[0,0,0,0]),this.callSuper("initialize",g),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(g)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,g){return this.callSuper("_set",u,g),typeof o[u]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){u.beginPath();var g=this.calcLinePoints();u.moveTo(g.x1,g.y1),u.lineTo(g.x2,g.y2),u.lineWidth=this.strokeWidth;var y=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=y},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return l(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,g=this.y1<=this.y2?-1:1,y=u*this.width*.5,x=g*this.height*.5,w=u*this.width*-.5,C=g*this.height*-.5;return{x1:y,x2:w,y1:x,y2:C}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),a.Line.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),a.Line.fromElement=function(u,g,y){y=y||{};var x=a.parseAttributes(u,a.Line.ATTRIBUTE_NAMES),w=[x.x1||0,x.y1||0,x.x2||0,x.y2||0];g(new a.Line(w,l(x,y)))},a.Line.fromObject=function(u,g){function y(w){delete w.points,g&&g(w)}var x=f(u,!0);x.points=[u.x1,u.y1,u.x2,u.y2],a.Object._fromObject("Line",x,y,"points")};function c(u,g){var y=u.origin,x=u.axis1,w=u.axis2,C=u.dimension,j=g.nearest,T=g.center,M=g.farthest;return function(){switch(this.get(y)){case j:return Math.min(this.get(x),this.get(w));case T:return Math.min(this.get(x),this.get(w))+.5*this.get(C);case M:return Math.max(this.get(x),this.get(w))}}}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.degreesToRadians;if(a.Circle){a.warn("fabric.Circle is already defined.");return}a.Circle=a.util.createClass(a.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:a.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(o,c){return this.callSuper("_set",o,c),o==="radius"&&this.setRadius(c),this},toObject:function(o){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(o))},_toSVG:function(){var o,c=0,u=0,g=(this.endAngle-this.startAngle)%360;if(g===0)o=["<circle ","COMMON_PARTS",'cx="'+c+'" cy="'+u+'" ','r="',this.radius,`" />
`];else{var y=l(this.startAngle),x=l(this.endAngle),w=this.radius,C=a.util.cos(y)*w,j=a.util.sin(y)*w,T=a.util.cos(x)*w,M=a.util.sin(x)*w,E=g>180?"1":"0";o=['<path d="M '+C+" "+j," A "+w+" "+w," 0 ",+E+" 1"," "+T+" "+M,'" ',"COMMON_PARTS",` />
`]}return o},_render:function(o){o.beginPath(),o.arc(0,0,this.radius,l(this.startAngle),l(this.endAngle),!1),this._renderPaintInOrder(o)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(o){return this.radius=o,this.set("width",o*2).set("height",o*2)}}),a.Circle.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),a.Circle.fromElement=function(o,c){var u=a.parseAttributes(o,a.Circle.ATTRIBUTE_NAMES);if(!f(u))throw new Error("value of `r` attribute is required and can not be negative");u.left=(u.left||0)-u.radius,u.top=(u.top||0)-u.radius,c(new a.Circle(u))};function f(o){return"radius"in o&&o.radius>=0}a.Circle.fromObject=function(o,c){a.Object._fromObject("Circle",o,c)}}(e),function(d){var a=d.fabric||(d.fabric={});if(a.Triangle){a.warn("fabric.Triangle is already defined");return}a.Triangle=a.util.createClass(a.Object,{type:"triangle",width:100,height:100,_render:function(l){var f=this.width/2,o=this.height/2;l.beginPath(),l.moveTo(-f,o),l.lineTo(0,-o),l.lineTo(f,o),l.closePath(),this._renderPaintInOrder(l)},_toSVG:function(){var l=this.width/2,f=this.height/2,o=[-l+" "+f,"0 "+-f,l+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',o,'" />']}}),a.Triangle.fromObject=function(l,f){return a.Object._fromObject("Triangle",l,f)}}(e),function(d){var a=d.fabric||(d.fabric={}),l=Math.PI*2;if(a.Ellipse){a.warn("fabric.Ellipse is already defined.");return}a.Ellipse=a.util.createClass(a.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,o){switch(this.callSuper("_set",f,o),f){case"rx":this.rx=o,this.set("width",o*2);break;case"ry":this.ry=o,this.set("height",o*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,l,!1),f.restore(),this._renderPaintInOrder(f)}}),a.Ellipse.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),a.Ellipse.fromElement=function(f,o){var c=a.parseAttributes(f,a.Ellipse.ATTRIBUTE_NAMES);c.left=(c.left||0)-c.rx,c.top=(c.top||0)-c.ry,o(new a.Ellipse(c))},a.Ellipse.fromObject=function(f,o){a.Object._fromObject("Ellipse",f,o)}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend;if(a.Rect){a.warn("fabric.Rect is already defined");return}a.Rect=a.util.createClass(a.Object,{stateProperties:a.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:a.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var o=this.rx?Math.min(this.rx,this.width/2):0,c=this.ry?Math.min(this.ry,this.height/2):0,u=this.width,g=this.height,y=-this.width/2,x=-this.height/2,w=o!==0||c!==0,C=1-.5522847498;f.beginPath(),f.moveTo(y+o,x),f.lineTo(y+u-o,x),w&&f.bezierCurveTo(y+u-C*o,x,y+u,x+C*c,y+u,x+c),f.lineTo(y+u,x+g-c),w&&f.bezierCurveTo(y+u,x+g-C*c,y+u-C*o,x+g,y+u-o,x+g),f.lineTo(y+o,x+g),w&&f.bezierCurveTo(y+C*o,x+g,y,x+g-C*c,y,x+g-c),f.lineTo(y,x+c),w&&f.bezierCurveTo(y,x+C*c,y+C*o,x,y+o,x),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,o=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',o,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),a.Rect.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),a.Rect.fromElement=function(f,o,c){if(!f)return o(null);c=c||{};var u=a.parseAttributes(f,a.Rect.ATTRIBUTE_NAMES);u.left=u.left||0,u.top=u.top||0,u.height=u.height||0,u.width=u.width||0;var g=new a.Rect(l(c?a.util.object.clone(c):{},u));g.visible=g.visible&&g.width>0&&g.height>0,o(g)},a.Rect.fromObject=function(f,o){return a.Object._fromObject("Rect",f,o)}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.util.array.min,o=a.util.array.max,c=a.util.toFixed,u=a.util.projectStrokeOnPoints;if(a.Polyline){a.warn("fabric.Polyline is already defined");return}a.Polyline=a.util.createClass(a.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:a.Object.prototype.cacheProperties.concat("points"),initialize:function(g,y){y=y||{},this.points=g||[],this.callSuper("initialize",y),this._setPositionDimensions(y)},_projectStrokeOnPoints:function(){return u(this.points,this,!0)},_setPositionDimensions:function(g){var y=this._calcDimensions(g),x,w=this.exactBoundingBox?this.strokeWidth:0;this.width=y.width-w,this.height=y.height-w,g.fromSVG||(x=this.translateToGivenOrigin({x:y.left-this.strokeWidth/2+w/2,y:y.top-this.strokeWidth/2+w/2},"left","top",this.originX,this.originY)),typeof g.left>"u"&&(this.left=g.fromSVG?y.left:x.x),typeof g.top>"u"&&(this.top=g.fromSVG?y.top:x.y),this.pathOffset={x:y.left+this.width/2+w/2,y:y.top+this.height/2+w/2}},_calcDimensions:function(){var g=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,y=f(g,"x")||0,x=f(g,"y")||0,w=o(g,"x")||0,C=o(g,"y")||0,j=w-y,T=C-x;return{left:y,top:x,width:j,height:T}},toObject:function(g){return l(this.callSuper("toObject",g),{points:this.points.concat()})},_toSVG:function(){for(var g=[],y=this.pathOffset.x,x=this.pathOffset.y,w=a.Object.NUM_FRACTION_DIGITS,C=0,j=this.points.length;C<j;C++)g.push(c(this.points[C].x-y,w),",",c(this.points[C].y-x,w)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',g.join(""),`" />
`]},commonRender:function(g){var y,x=this.points.length,w=this.pathOffset.x,C=this.pathOffset.y;if(!x||isNaN(this.points[x-1].y))return!1;g.beginPath(),g.moveTo(this.points[0].x-w,this.points[0].y-C);for(var j=0;j<x;j++)y=this.points[j],g.lineTo(y.x-w,y.y-C);return!0},_render:function(g){this.commonRender(g)&&this._renderPaintInOrder(g)},complexity:function(){return this.get("points").length}}),a.Polyline.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polyline.fromElementGenerator=function(g){return function(y,x,w){if(!y)return x(null);w||(w={});var C=a.parsePointsAttribute(y.getAttribute("points")),j=a.parseAttributes(y,a[g].ATTRIBUTE_NAMES);j.fromSVG=!0,x(new a[g](C,l(j,w)))}},a.Polyline.fromElement=a.Polyline.fromElementGenerator("Polyline"),a.Polyline.fromObject=function(g,y){return a.Object._fromObject("Polyline",g,y,"points")}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.projectStrokeOnPoints;if(a.Polygon){a.warn("fabric.Polygon is already defined");return}a.Polygon=a.util.createClass(a.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return l(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),a.Polygon.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(),a.Polygon.fromElement=a.Polyline.fromElementGenerator("Polygon"),a.Polygon.fromObject=function(f,o){a.Object._fromObject("Polygon",f,o,"points")}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.array.min,f=a.util.array.max,o=a.util.object.extend,c=a.util.object.clone,u=a.util.toFixed;if(a.Path){a.warn("fabric.Path is already defined");return}a.Path=a.util.createClass(a.Object,{type:"path",path:null,cacheProperties:a.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:a.Object.prototype.stateProperties.concat("path"),initialize:function(g,y){y=c(y||{}),delete y.path,this.callSuper("initialize",y),this._setPath(g||[],y)},_setPath:function(g,y){this.path=a.util.makePathSimpler(Array.isArray(g)?g:a.util.parsePath(g)),a.Polyline.prototype._setPositionDimensions.call(this,y||{})},_renderPathCommands:function(g){var y,x=0,w=0,C=0,j=0,T=0,M=0,E=-this.pathOffset.x,A=-this.pathOffset.y;g.beginPath();for(var R=0,H=this.path.length;R<H;++R)switch(y=this.path[R],y[0]){case"L":C=y[1],j=y[2],g.lineTo(C+E,j+A);break;case"M":C=y[1],j=y[2],x=C,w=j,g.moveTo(C+E,j+A);break;case"C":C=y[5],j=y[6],T=y[3],M=y[4],g.bezierCurveTo(y[1]+E,y[2]+A,T+E,M+A,C+E,j+A);break;case"Q":g.quadraticCurveTo(y[1]+E,y[2]+A,y[3]+E,y[4]+A),C=y[3],j=y[4],T=y[1],M=y[2];break;case"z":case"Z":C=x,j=w,g.closePath();break}},_render:function(g){this._renderPathCommands(g),this._renderPaintInOrder(g)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(g){return o(this.callSuper("toObject",g),{path:this.path.map(function(y){return y.slice()})})},toDatalessObject:function(g){var y=this.toObject(["sourcePath"].concat(g));return y.sourcePath&&delete y.path,y},_toSVG:function(){var g=a.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',g,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var g=a.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,g)+", "+u(-this.pathOffset.y,g)+")"},toClipPathSVG:function(g){var y=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:y})},toSVG:function(g){var y=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:g,additionalTransform:y})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var g=[],y=[],x,w=0,C=0,j=0,T=0,M,E=0,A=this.path.length;E<A;++E){switch(x=this.path[E],x[0]){case"L":j=x[1],T=x[2],M=[];break;case"M":j=x[1],T=x[2],w=j,C=T,M=[];break;case"C":M=a.util.getBoundsOfCurve(j,T,x[1],x[2],x[3],x[4],x[5],x[6]),j=x[5],T=x[6];break;case"Q":M=a.util.getBoundsOfCurve(j,T,x[1],x[2],x[1],x[2],x[3],x[4]),j=x[3],T=x[4];break;case"z":case"Z":j=w,T=C;break}M.forEach(function(se){g.push(se.x),y.push(se.y)}),g.push(j),y.push(T)}var R=l(g)||0,H=l(y)||0,K=f(g)||0,X=f(y)||0,ne=K-R,de=X-H;return{left:R,top:H,width:ne,height:de}}}),a.Path.fromObject=function(g,y){if(typeof g.sourcePath=="string"){var x=g.sourcePath;a.loadSVGFromURL(x,function(w){var C=w[0];C.setOptions(g),g.clipPath?a.util.enlivenObjects([g.clipPath],function(j){C.clipPath=j[0],y&&y(C)}):y&&y(C)})}else a.Object._fromObject("Path",g,y,"path")},a.Path.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat(["d"]),a.Path.fromElement=function(g,y,x){var w=a.parseAttributes(g,a.Path.ATTRIBUTE_NAMES);w.fromSVG=!0,y(new a.Path(w.d,o(w,x)))}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.array.min,f=a.util.array.max;a.Group||(a.Group=a.util.createClass(a.Object,a.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,c,u){c=c||{},this._objects=[],u&&this.callSuper("initialize",c),this._objects=o||[];for(var g=this._objects.length;g--;)this._objects[g].group=this;if(u)this._updateObjectsACoords();else{var y=c&&c.centerPoint;c.originX!==void 0&&(this.originX=c.originX),c.originY!==void 0&&(this.originY=c.originY),y||this._calcBounds(),this._updateObjectsCoords(y),delete c.centerPoint,this.callSuper("initialize",c)}this.setCoords()},_updateObjectsACoords:function(){for(var o=!0,c=this._objects.length;c--;)this._objects[c].setCoords(o)},_updateObjectsCoords:function(c){for(var c=c||this.getCenterPoint(),u=this._objects.length;u--;)this._updateObjectCoords(this._objects[u],c)},_updateObjectCoords:function(o,c){var u=o.left,g=o.top,y=!0;o.set({left:u-c.x,top:g-c.y}),o.group=this,o.setCoords(y)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var c=!!this.group;return this._restoreObjectsState(),a.util.resetObjectTransform(this),o&&(c&&a.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,c?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),a.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,c){var u=this._objects.length;if(this.useSetOnGroup)for(;u--;)this._objects[u].setOnGroup(o,c);if(o==="canvas")for(;u--;)this._objects[u]._set(o,c);a.Object.prototype._set.call(this,o,c)},toObject:function(o){var c=this.includeDefaultValues,u=this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){var x=y.includeDefaultValues;y.includeDefaultValues=c;var w=y.toObject(o);return y.includeDefaultValues=x,w}),g=a.Object.prototype.toObject.call(this,o);return g.objects=u,g},toDatalessObject:function(o){var c,u=this.sourcePath;if(u)c=u;else{var g=this.includeDefaultValues;c=this._objects.map(function(x){var w=x.includeDefaultValues;x.includeDefaultValues=g;var C=x.toDatalessObject(o);return x.includeDefaultValues=w,C})}var y=a.Object.prototype.toDatalessObject.call(this,o);return y.objects=c,y},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=a.Object.prototype.shouldCache.call(this);if(o){for(var c=0,u=this._objects.length;c<u;c++)if(this._objects[c].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(a.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,c=this._objects.length;o<c;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var c=0,u=this._objects.length;c<u;c++)this._objects[c].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var c=0,u=this._objects.length;c<u;c++)if(this._objects[c].isCacheDirty(!0)){if(this._cacheCanvas){var g=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-y/2,g,y)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(c){a.util.addTransformToObject(c,o),delete c.group,c.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,c=this.canvas;this._objects=[];var u=this.toObject();delete u.objects;var g=new a.ActiveSelection([]);return g.set(u),g.type="activeSelection",c.remove(this),o.forEach(function(y){y.group=g,y.dirty=!0,c.add(y)}),g.canvas=c,g._objects=o,c._activeObject=g,g.setCoords(),g}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var o=!0;return this.forEachObject(function(c){c.setCoords(o)}),this},_calcBounds:function(o){for(var c=[],u=[],g,y,x,w=["tr","br","bl","tl"],C=0,j=this._objects.length,T,M=w.length;C<j;++C){for(g=this._objects[C],x=g.calcACoords(),T=0;T<M;T++)y=w[T],c.push(x[y].x),u.push(x[y].y);g.aCoords=x}this._getBounds(c,u,o)},_getBounds:function(o,c,u){var g=new a.Point(l(o),l(c)),y=new a.Point(f(o),f(c)),x=g.y||0,w=g.x||0,C=y.x-g.x||0,j=y.y-g.y||0;this.width=C,this.height=j,u||this.setPositionByOrigin({x:w,y:x},"left","top")},_toSVG:function(o){for(var c=["<g ","COMMON_PARTS",` >
`],u=0,g=this._objects.length;u<g;u++)c.push("		",this._objects[u].toSVG(o));return c.push(`</g>
`),c},getSvgStyles:function(){var o=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",c=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),c].join("")},toClipPathSVG:function(o){for(var c=[],u=0,g=this._objects.length;u<g;u++)c.push("	",this._objects[u].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(c,{reviver:o})}}),a.Group.fromObject=function(o,c){var u=o.objects,g=a.util.object.clone(o,!0);if(delete g.objects,typeof u=="string"){a.loadSVGFromURL(u,function(y){var x=a.util.groupSVGElements(y,o,u),w=g.clipPath;delete g.clipPath,x.set(g),w?a.util.enlivenObjects([w],function(C){x.clipPath=C[0],c&&c(x)}):c&&c(x)});return}a.util.enlivenObjects(u,function(y){a.util.enlivenObjectEnlivables(o,g,function(){c&&c(new a.Group(y,g,!0))})})})}(e),function(d){var a=d.fabric||(d.fabric={});a.ActiveSelection||(a.ActiveSelection=a.util.createClass(a.Group,{type:"activeSelection",initialize:function(l,f){f=f||{},this._objects=l||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),a.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var l=this._objects.concat();this._objects=[];var f=a.Object.prototype.toObject.call(this),o=new a.Group([]);if(delete f.type,o.set(f),l.forEach(function(u){u.canvas.remove(u),u.group=o}),o._objects=l,!this.canvas)return o;var c=this.canvas;return c.add(o),c._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(l,f,o){l.save(),l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",l,f),o=o||{},typeof o.hasControls>"u"&&(o.hasControls=!1),o.forActiveSelection=!0;for(var c=0,u=this._objects.length;c<u;c++)this._objects[c]._renderControls(l,o);l.restore()}}),a.ActiveSelection.fromObject=function(l,f){a.util.enlivenObjects(l.objects,function(o){delete l.objects,f&&f(new a.ActiveSelection(o,l,!0))})})}(e),function(d){var a=t.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(l,f){f||(f={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",f),this._initElement(l,f)},getElement:function(){return this._element||{}},setElement:function(l,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=l,this._originalElement=l,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(l){var f=t.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(l)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var l=this.getElement();return{width:l.naturalWidth||l.width,height:l.naturalHeight||l.height}},_stroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,o=this.height/2;l.beginPath(),l.moveTo(-f,-o),l.lineTo(f,-o),l.lineTo(f,o),l.lineTo(-f,o),l.lineTo(-f,-o),l.closePath()}},toObject:function(l){var f=[];this.filters.forEach(function(c){c&&f.push(c.toObject())});var o=a(this.callSuper("toObject",["cropX","cropY"].concat(l)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var l=[],f=[],o,c=this._element,u=-this.width/2,g=-this.height/2,y="",x="";if(!c)return[];if(this.hasCrop()){var w=t.Object.__uid++;l.push('<clipPath id="imageCrop_'+w+`">
`,'	<rect x="'+u+'" y="'+g+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),y=' clip-path="url(#imageCrop_'+w+')" '}if(this.imageSmoothing||(x='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',u-this.cropX,'" y="',g-this.cropY,'" width="',c.width||c.naturalWidth,'" height="',c.height||c.height,x,'"',y,`></image>
`),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,o=["	<rect ",'x="',u,'" y="',g,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=C}return this.paintFirst!=="fill"?l=l.concat(o,f):l=l.concat(f,o),l},getSrc:function(l){var f=l?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(l,f,o){return t.util.loadImage(l,function(c,u){this.setElement(c,o),this._setWidthHeight(),f&&f(this,u)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var l=this.resizeFilter,f=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),c=o.scaleX,u=o.scaleY,g=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!l||c>f&&u>f){this._element=g,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=c,this._lastScaleY=u;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var y=t.util.createCanvasElement(),x=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,w=g.width,C=g.height;y.width=w,y.height=C,this._element=y,this._lastScaleX=l.scaleX=c,this._lastScaleY=l.scaleY=u,t.filterBackend.applyFilters([l],g,w,C,this._element,x),this._filterScalingX=y.width/this._originalElement.width,this._filterScalingY=y.height/this._originalElement.height},applyFilters:function(l){if(l=l||this.filters||[],l=l.filter(function(g){return g&&!g.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),l.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,o=f.naturalWidth||f.width,c=f.naturalHeight||f.height;if(this._element===this._originalElement){var u=t.util.createCanvasElement();u.width=o,u.height=c,this._element=u,this._filteredEl=u}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,c),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(l,this._originalElement,o,c,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(l),this._renderPaintInOrder(l)},drawCacheOnCanvas:function(l){t.util.setImageSmoothing(l,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,l)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(l){var f=this._element;if(f){var o=this._filterScalingX,c=this._filterScalingY,u=this.width,g=this.height,y=Math.min,x=Math.max,w=x(this.cropX,0),C=x(this.cropY,0),j=f.naturalWidth||f.width,T=f.naturalHeight||f.height,M=w*o,E=C*c,A=y(u*o,j-M),R=y(g*c,T-E),H=-u/2,K=-g/2,X=y(u,j/o-w),ne=y(g,T/c-C);f&&l.drawImage(f,M,E,A,R,H,K,X,ne)}},_needsResize:function(){var l=this.getTotalObjectScaling();return l.scaleX!==this._lastScaleX||l.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(l,f){this.setElement(t.util.getById(l),f),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(l){l||(l={}),this.setOptions(l),this._setWidthHeight(l)},_initFilters:function(l,f){l&&l.length?t.util.enlivenObjects(l,function(o){f&&f(o)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(l){l||(l={});var f=this.getElement();this.width=l.width||f.naturalWidth||f.width||0,this.height=l.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var l=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,o=this._element.height,c=1,u=1,g=0,y=0,x=0,w=0,C,j=this.width,T=this.height,M={width:j,height:T};return l&&(l.alignX!=="none"||l.alignY!=="none")?(l.meetOrSlice==="meet"&&(c=u=t.util.findScaleToFit(this._element,M),C=(j-f*c)/2,l.alignX==="Min"&&(g=-C),l.alignX==="Max"&&(g=C),C=(T-o*u)/2,l.alignY==="Min"&&(y=-C),l.alignY==="Max"&&(y=C)),l.meetOrSlice==="slice"&&(c=u=t.util.findScaleToCover(this._element,M),C=f-j/c,l.alignX==="Mid"&&(x=C/2),l.alignX==="Max"&&(x=C),C=o-T/u,l.alignY==="Mid"&&(w=C/2),l.alignY==="Max"&&(w=C),f=j/c,o=T/u)):(c=j/f,u=T/o),{width:f,height:o,scaleX:c,scaleY:u,offsetLeft:g,offsetTop:y,cropX:x,cropY:w}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(l,f){var o=t.util.object.clone(l);t.util.loadImage(o.src,function(c,u){if(u){f&&f(null,!0);return}t.Image.prototype._initFilters.call(o,o.filters,function(g){o.filters=g||[],t.Image.prototype._initFilters.call(o,[o.resizeFilter],function(y){o.resizeFilter=y[0],t.util.enlivenObjectEnlivables(o,o,function(){var x=new t.Image(c,o);f(x,!1)})})})},null,o.crossOrigin)},t.Image.fromURL=function(l,f,o){t.util.loadImage(l,function(c,u){f&&f(new t.Image(c,o),u)},null,o&&o.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(l,f,o){var c=t.parseAttributes(l,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(c["xlink:href"],f,a(o?t.util.object.clone(o):{},c))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(d){d=d||{};var a=function(){},l=d.onComplete||a,f=d.onChange||a,o=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(c){o.rotate(c),f()},onComplete:function(){o.setCoords(),l()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function d(l,f){var o="precision "+f+` float;
void main(){}`,c=l.createShader(l.FRAGMENT_SHADER);return l.shaderSource(c,o),l.compileShader(c),!!l.getShaderParameter(c,l.COMPILE_STATUS)}t.isWebglSupported=function(l){if(t.isLikelyNode)return!1;l=l||t.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),o=f.getContext("webgl")||f.getContext("experimental-webgl"),c=!1;if(o){t.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),c=t.maxTextureSize>=l;for(var u=["highp","mediump","lowp"],g=0;g<3;g++)if(d(o,u[g])){t.webGlPrecision=u[g];break}}return this.isSupported=c,c},t.WebglFilterBackend=a;function a(l){l&&l.tileSize&&(this.tileSize=l.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}a.prototype={tileSize:2048,resources:{},setupGLContext:function(l,f){this.dispose(),this.createWebGLCanvas(l,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(l,f)},chooseFastestCopyGLTo2DMethod:function(l,f){var o=typeof window.performance<"u",c;try{new ImageData(1,1),c=!0}catch{c=!1}var u=typeof ArrayBuffer<"u",g=typeof Uint8ClampedArray<"u";if(o&&c&&u&&g){var y=t.util.createCanvasElement(),x=new ArrayBuffer(l*f*4);if(t.forceGLPutImageData){this.imageBuffer=x,this.copyGLTo2D=S;return}var w={imageBuffer:x,destinationWidth:l,destinationHeight:f,targetCanvas:y},C,j,T;y.width=l,y.height=f,C=window.performance.now(),b.call(w,this.gl,w),j=window.performance.now()-C,C=window.performance.now(),S.call(w,this.gl,w),T=window.performance.now()-C,j>T?(this.imageBuffer=x,this.copyGLTo2D=S):this.copyGLTo2D=b}},createWebGLCanvas:function(l,f){var o=t.util.createCanvasElement();o.width=l,o.height=f;var c={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},u=o.getContext("webgl",c);u||(u=o.getContext("experimental-webgl",c)),u&&(u.clearColor(0,0,0,0),this.canvas=o,this.gl=u)},applyFilters:function(l,f,o,c,u,g){var y=this.gl,x;g&&(x=this.getCachedTexture(g,f));var w={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:o,sourceHeight:c,destinationWidth:o,destinationHeight:c,context:y,sourceTexture:this.createTexture(y,o,c,!x&&f),targetTexture:this.createTexture(y,o,c),originalTexture:x||this.createTexture(y,o,c,!x&&f),passes:l.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:u},C=y.createFramebuffer();return y.bindFramebuffer(y.FRAMEBUFFER,C),l.forEach(function(j){j&&j.applyTo(w)}),p(w),this.copyGLTo2D(y,w),y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(w.sourceTexture),y.deleteTexture(w.targetTexture),y.deleteFramebuffer(C),u.getContext("2d").setTransform(1,0,0,1,0,0),w},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(l,f,o,c,u){var g=l.createTexture();return l.bindTexture(l.TEXTURE_2D,g),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,u||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,u||l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),c?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,c):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,f,o,0,l.RGBA,l.UNSIGNED_BYTE,null),g},getCachedTexture:function(l,f){if(this.textureCache[l])return this.textureCache[l];var o=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[l]=o,o},evictCachesForKey:function(l){this.textureCache[l]&&(this.gl.deleteTexture(this.textureCache[l]),delete this.textureCache[l])},copyGLTo2D:b,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var l=this.gl,f={renderer:"",vendor:""};if(!l)return f;var o=l.getExtension("WEBGL_debug_renderer_info");if(o){var c=l.getParameter(o.UNMASKED_RENDERER_WEBGL),u=l.getParameter(o.UNMASKED_VENDOR_WEBGL);c&&(f.renderer=c.toLowerCase()),u&&(f.vendor=u.toLowerCase())}return this.gpuInfo=f,f}}}();function p(d){var a=d.targetCanvas,l=a.width,f=a.height,o=d.destinationWidth,c=d.destinationHeight;(l!==o||f!==c)&&(a.width=o,a.height=c)}function b(d,a){var l=d.canvas,f=a.targetCanvas,o=f.getContext("2d");o.translate(0,f.height),o.scale(1,-1);var c=l.height-f.height;o.drawImage(l,0,c,f.width,f.height,0,0,f.width,f.height)}function S(d,a){var l=a.targetCanvas,f=l.getContext("2d"),o=a.destinationWidth,c=a.destinationHeight,u=o*c*4,g=new Uint8Array(this.imageBuffer,0,u),y=new Uint8ClampedArray(this.imageBuffer,0,u);d.readPixels(0,0,o,c,d.RGBA,d.UNSIGNED_BYTE,g);var x=new ImageData(y,o,c);f.putImageData(x,0,0)}(function(){var d=function(){};t.Canvas2dFilterBackend=a;function a(){}a.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(l,f,o,c,u){var g=u.getContext("2d");g.drawImage(f,0,0,o,c);var y=g.getImageData(0,0,o,c),x=g.getImageData(0,0,o,c),w={sourceWidth:o,sourceHeight:c,imageData:y,originalEl:f,originalImageData:x,canvasEl:u,ctx:g,filterBackend:this};return l.forEach(function(C){C.applyTo(w)}),(w.imageData.width!==o||w.imageData.height!==c)&&(u.width=w.imageData.width,u.height=w.imageData.height),g.putImageData(w.imageData,0,0),w}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var a in d)this[a]=d[a]},createProgram:function(d,a,l){a=a||this.fragmentSource,l=l||this.vertexSource,t.webGlPrecision!=="highp"&&(a=a.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var f=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(f,l),d.compileShader(f),!d.getShaderParameter(f,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(f));var o=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(o,a),d.compileShader(o),!d.getShaderParameter(o,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(o));var c=d.createProgram();if(d.attachShader(c,f),d.attachShader(c,o),d.linkProgram(c),!d.getProgramParameter(c,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(c));var u=this.getAttributeLocations(d,c),g=this.getUniformLocations(d,c)||{};return g.uStepW=d.getUniformLocation(c,"uStepW"),g.uStepH=d.getUniformLocation(c,"uStepH"),{program:c,attributeLocations:u,uniformLocations:g}},getAttributeLocations:function(d,a){return{aPosition:d.getAttribLocation(a,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,a,l){var f=a.aPosition,o=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,o),d.enableVertexAttribArray(f),d.vertexAttribPointer(f,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,l,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var a=d.context,l,f;d.passes>1?(l=d.destinationWidth,f=d.destinationHeight,(d.sourceWidth!==l||d.sourceHeight!==f)&&(a.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(a,l,f)),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,d.targetTexture,0)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.finish())},_swapTextures:function(d){d.passes--,d.pass++;var a=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=a},isNeutralState:function(){var d=this.mainParameter,a=t.Image.filters[this.type].prototype;if(d)if(Array.isArray(a[d])){for(var l=a[d].length;l--;)if(this[d][l]!==a[d][l])return!1;return!0}else return a[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var a=d.context,l=this.retrieveShader(d);d.pass===0&&d.originalTexture?a.bindTexture(a.TEXTURE_2D,d.originalTexture):a.bindTexture(a.TEXTURE_2D,d.sourceTexture),a.useProgram(l.program),this.sendAttributeData(a,l.attributeLocations,d.aPosition),a.uniform1f(l.uniformLocations.uStepW,1/d.sourceWidth),a.uniform1f(l.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(a,l.uniformLocations),a.viewport(0,0,d.destinationWidth,d.destinationHeight),a.drawArrays(a.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,a,l){d.activeTexture(l),d.bindTexture(d.TEXTURE_2D,a),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,a){d.activeTexture(a),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var a=document.createElement("canvas");a.width=d.sourceWidth,a.height=d.sourceHeight,d.helpLayer=a}},toObject:function(){var d={type:this.type},a=this.mainParameter;return a&&(d[a]=this[a]),d},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(d,a){var l=new t.Image.filters[d.type](d);return a&&a(l),l},function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.ColorMatrix=f(l.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var c=o.imageData,u=c.data,g=u.length,y=this.matrix,x,w,C,j,T,M=this.colorsOnly;for(T=0;T<g;T+=4)x=u[T],w=u[T+1],C=u[T+2],M?(u[T]=x*y[0]+w*y[1]+C*y[2]+y[4]*255,u[T+1]=x*y[5]+w*y[6]+C*y[7]+y[9]*255,u[T+2]=x*y[10]+w*y[11]+C*y[12]+y[14]*255):(j=u[T+3],u[T]=x*y[0]+w*y[1]+C*y[2]+j*y[3]+y[4]*255,u[T+1]=x*y[5]+w*y[6]+C*y[7]+j*y[8]+y[9]*255,u[T+2]=x*y[10]+w*y[11]+C*y[12]+j*y[13]+y[14]*255,u[T+3]=x*y[15]+w*y[16]+C*y[17]+j*y[18]+y[19]*255)},getUniformLocations:function(o,c){return{uColorMatrix:o.getUniformLocation(c,"uColorMatrix"),uConstants:o.getUniformLocation(c,"uConstants")}},sendUniformData:function(o,c){var u=this.matrix,g=[u[0],u[1],u[2],u[3],u[5],u[6],u[7],u[8],u[10],u[11],u[12],u[13],u[15],u[16],u[17],u[18]],y=[u[4],u[9],u[14],u[19]];o.uniformMatrix4fv(c.uColorMatrix,!1,g),o.uniform4fv(c.uConstants,y)}}),a.Image.filters.ColorMatrix.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Brightness=f(l.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var c=o.imageData,u=c.data,g,y=u.length,x=Math.round(this.brightness*255);for(g=0;g<y;g+=4)u[g]=u[g]+x,u[g+1]=u[g+1]+x,u[g+2]=u[g+2]+x}},getUniformLocations:function(o,c){return{uBrightness:o.getUniformLocation(c,"uBrightness")}},sendUniformData:function(o,c){o.uniform1f(c.uBrightness,this.brightness)}}),a.Image.filters.Brightness.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.Image.filters,o=a.util.createClass;f.Convolute=o(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(c){var u=Math.sqrt(this.matrix.length),g=this.type+"_"+u+"_"+(this.opaque?1:0),y=this.fragmentSource[g];return c.programCache.hasOwnProperty(g)||(c.programCache[g]=this.createProgram(c.context,y)),c.programCache[g]},applyTo2d:function(c){var u=c.imageData,g=u.data,y=this.matrix,x=Math.round(Math.sqrt(y.length)),w=Math.floor(x/2),C=u.width,j=u.height,T=c.ctx.createImageData(C,j),M=T.data,E=this.opaque?1:0,A,R,H,K,X,ne,de,se,q,P,$,V,D;for($=0;$<j;$++)for(P=0;P<C;P++){for(X=($*C+P)*4,A=0,R=0,H=0,K=0,D=0;D<x;D++)for(V=0;V<x;V++)de=$+D-w,ne=P+V-w,!(de<0||de>=j||ne<0||ne>=C)&&(se=(de*C+ne)*4,q=y[D*x+V],A+=g[se]*q,R+=g[se+1]*q,H+=g[se+2]*q,E||(K+=g[se+3]*q));M[X]=A,M[X+1]=R,M[X+2]=H,E?M[X+3]=g[X+3]:M[X+3]=K}c.imageData=T},getUniformLocations:function(c,u){return{uMatrix:c.getUniformLocation(u,"uMatrix"),uOpaque:c.getUniformLocation(u,"uOpaque"),uHalfSize:c.getUniformLocation(u,"uHalfSize"),uSize:c.getUniformLocation(u,"uSize")}},sendUniformData:function(c,u){c.uniform1fv(u.uMatrix,this.matrix)},toObject:function(){return l(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),a.Image.filters.Convolute.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Grayscale=f(l.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var c=o.imageData,u=c.data,g,y=u.length,x,w=this.mode;for(g=0;g<y;g+=4)w==="average"?x=(u[g]+u[g+1]+u[g+2])/3:w==="lightness"?x=(Math.min(u[g],u[g+1],u[g+2])+Math.max(u[g],u[g+1],u[g+2]))/2:w==="luminosity"&&(x=.21*u[g]+.72*u[g+1]+.07*u[g+2]),u[g]=x,u[g+1]=x,u[g+2]=x},retrieveShader:function(o){var c=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(c)){var u=this.fragmentSource[this.mode];o.programCache[c]=this.createProgram(o.context,u)}return o.programCache[c]},getUniformLocations:function(o,c){return{uMode:o.getUniformLocation(c,"uMode")}},sendUniformData:function(o,c){var u=1;o.uniform1i(c.uMode,u)},isNeutralState:function(){return!1}}),a.Image.filters.Grayscale.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Invert=f(l.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var c=o.imageData,u=c.data,g,y=u.length;for(g=0;g<y;g+=4)u[g]=255-u[g],u[g+1]=255-u[g+1],u[g+2]=255-u[g+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,c){return{uInvert:o.getUniformLocation(c,"uInvert")}},sendUniformData:function(o,c){o.uniform1i(c.uInvert,this.invert)}}),a.Image.filters.Invert.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.Image.filters,o=a.util.createClass;f.Noise=o(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(c){if(this.noise!==0){var u=c.imageData,g=u.data,y,x=g.length,w=this.noise,C;for(y=0,x=g.length;y<x;y+=4)C=(.5-Math.random())*w,g[y]+=C,g[y+1]+=C,g[y+2]+=C}},getUniformLocations:function(c,u){return{uNoise:c.getUniformLocation(u,"uNoise"),uSeed:c.getUniformLocation(u,"uSeed")}},sendUniformData:function(c,u){c.uniform1f(u.uNoise,this.noise/255),c.uniform1f(u.uSeed,Math.random())},toObject:function(){return l(this.callSuper("toObject"),{noise:this.noise})}}),a.Image.filters.Noise.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Pixelate=f(l.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var c=o.imageData,u=c.data,g=c.height,y=c.width,x,w,C,j,T,M,E,A,R,H,K;for(w=0;w<g;w+=this.blocksize)for(C=0;C<y;C+=this.blocksize)for(x=w*4*y+C*4,j=u[x],T=u[x+1],M=u[x+2],E=u[x+3],H=Math.min(w+this.blocksize,g),K=Math.min(C+this.blocksize,y),A=w;A<H;A++)for(R=C;R<K;R++)x=A*4*y+R*4,u[x]=j,u[x+1]=T,u[x+2]=M,u[x+3]=E},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,c){return{uBlocksize:o.getUniformLocation(c,"uBlocksize"),uStepW:o.getUniformLocation(c,"uStepW"),uStepH:o.getUniformLocation(c,"uStepH")}},sendUniformData:function(o,c){o.uniform1f(c.uBlocksize,this.blocksize)}}),a.Image.filters.Pixelate.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.extend,f=a.Image.filters,o=a.util.createClass;f.RemoveColor=o(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(c){var u=c.imageData,g=u.data,y,x=this.distance*255,w,C,j,T=new a.Color(this.color).getSource(),M=[T[0]-x,T[1]-x,T[2]-x],E=[T[0]+x,T[1]+x,T[2]+x];for(y=0;y<g.length;y+=4)w=g[y],C=g[y+1],j=g[y+2],w>M[0]&&C>M[1]&&j>M[2]&&w<E[0]&&C<E[1]&&j<E[2]&&(g[y+3]=0)},getUniformLocations:function(c,u){return{uLow:c.getUniformLocation(u,"uLow"),uHigh:c.getUniformLocation(u,"uHigh")}},sendUniformData:function(c,u){var g=new a.Color(this.color).getSource(),y=parseFloat(this.distance),x=[0+g[0]/255-y,0+g[1]/255-y,0+g[2]/255-y,1],w=[g[0]/255+y,g[1]/255+y,g[2]/255+y,1];c.uniform4fv(u.uLow,x),c.uniform4fv(u.uHigh,w)},toObject:function(){return l(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),a.Image.filters.RemoveColor.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var c in o)l[c]=f(l.ColorMatrix,{type:c,matrix:o[c],mainParameter:!1,colorsOnly:!0}),a.Image.filters[c].fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric,l=a.Image.filters,f=a.util.createClass;l.BlendColor=f(l.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var c=this.type+"_"+this.mode,u;return o.programCache.hasOwnProperty(c)||(u=this.buildSource(this.mode),o.programCache[c]=this.createProgram(o.context,u)),o.programCache[c]},applyTo2d:function(o){var c=o.imageData,u=c.data,g=u.length,y,x,w,C,j,T,M,E=1-this.alpha;M=new a.Color(this.color).getSource(),y=M[0]*this.alpha,x=M[1]*this.alpha,w=M[2]*this.alpha;for(var A=0;A<g;A+=4)switch(C=u[A],j=u[A+1],T=u[A+2],this.mode){case"multiply":u[A]=C*y/255,u[A+1]=j*x/255,u[A+2]=T*w/255;break;case"screen":u[A]=255-(255-C)*(255-y)/255,u[A+1]=255-(255-j)*(255-x)/255,u[A+2]=255-(255-T)*(255-w)/255;break;case"add":u[A]=C+y,u[A+1]=j+x,u[A+2]=T+w;break;case"diff":case"difference":u[A]=Math.abs(C-y),u[A+1]=Math.abs(j-x),u[A+2]=Math.abs(T-w);break;case"subtract":u[A]=C-y,u[A+1]=j-x,u[A+2]=T-w;break;case"darken":u[A]=Math.min(C,y),u[A+1]=Math.min(j,x),u[A+2]=Math.min(T,w);break;case"lighten":u[A]=Math.max(C,y),u[A+1]=Math.max(j,x),u[A+2]=Math.max(T,w);break;case"overlay":u[A]=y<128?2*C*y/255:255-2*(255-C)*(255-y)/255,u[A+1]=x<128?2*j*x/255:255-2*(255-j)*(255-x)/255,u[A+2]=w<128?2*T*w/255:255-2*(255-T)*(255-w)/255;break;case"exclusion":u[A]=y+C-2*y*C/255,u[A+1]=x+j-2*x*j/255,u[A+2]=w+T-2*w*T/255;break;case"tint":u[A]=y+C*E,u[A+1]=x+j*E,u[A+2]=w+T*E}},getUniformLocations:function(o,c){return{uColor:o.getUniformLocation(c,"uColor")}},sendUniformData:function(o,c){var u=new a.Color(this.color).getSource();u[0]=this.alpha*u[0]/255,u[1]=this.alpha*u[1]/255,u[2]=this.alpha*u[2]/255,u[3]=this.alpha,o.uniform4fv(c.uColor,u)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendColor.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric,l=a.Image.filters,f=a.util.createClass;l.BlendImage=f(l.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var c=this.type+"_"+this.mode,u=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(c)||(o.programCache[c]=this.createProgram(o.context,u)),o.programCache[c]},applyToWebGL:function(o){var c=o.context,u=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(c,u,c.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(c,c.TEXTURE1)},createTexture:function(o,c){return o.getCachedTexture(c.cacheKey,c._element)},calculateMatrix:function(){var o=this.image,c=o._element.width,u=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/c,-o.top/u,1]},applyTo2d:function(o){var c=o.imageData,u=o.filterBackend.resources,g=c.data,y=g.length,x=c.width,w=c.height,C,j,T,M,E,A,R,H,K,X,ne=this.image,de;u.blendImage||(u.blendImage=a.util.createCanvasElement()),K=u.blendImage,X=K.getContext("2d"),K.width!==x||K.height!==w?(K.width=x,K.height=w):X.clearRect(0,0,x,w),X.setTransform(ne.scaleX,0,0,ne.scaleY,ne.left,ne.top),X.drawImage(ne._element,0,0,x,w),de=X.getImageData(0,0,x,w).data;for(var se=0;se<y;se+=4)switch(E=g[se],A=g[se+1],R=g[se+2],H=g[se+3],C=de[se],j=de[se+1],T=de[se+2],M=de[se+3],this.mode){case"multiply":g[se]=E*C/255,g[se+1]=A*j/255,g[se+2]=R*T/255,g[se+3]=H*M/255;break;case"mask":g[se+3]=M;break}},getUniformLocations:function(o,c){return{uTransformMatrix:o.getUniformLocation(c,"uTransformMatrix"),uImage:o.getUniformLocation(c,"uImage")}},sendUniformData:function(o,c){var u=this.calculateMatrix();o.uniform1i(c.uImage,1),o.uniformMatrix3fv(c.uTransformMatrix,!1,u)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),a.Image.filters.BlendImage.fromObject=function(o,c){a.Image.fromObject(o.image,function(u){var g=a.util.object.clone(o);g.image=u,c(new a.Image.filters.BlendImage(g))})}}(e),function(d){var a=d.fabric||(d.fabric={}),l=Math.pow,f=Math.floor,o=Math.sqrt,c=Math.abs,u=Math.round,g=Math.sin,y=Math.ceil,x=a.Image.filters,w=a.util.createClass;x.Resize=w(x.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,j){return{uDelta:C.getUniformLocation(j,"uDelta"),uTaps:C.getUniformLocation(j,"uTaps")}},sendUniformData:function(C,j){C.uniform2fv(j.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(j.uTaps,this.taps)},retrieveShader:function(C){var j=this.getFilterWindow(),T=this.type+"_"+j;if(!C.programCache.hasOwnProperty(T)){var M=this.generateShader(j);C.programCache[T]=this.createProgram(C.context,M)}return C.programCache[T]},getFilterWindow:function(){var C=this.tempScale;return Math.ceil(this.lanczosLobes/C)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),j=this.tempScale,T=this.getFilterWindow(),M=new Array(T),E=1;E<=T;E++)M[E-1]=C(E*j);return M},generateShader:function(M){for(var j=new Array(M),T=this.fragmentSourceTOP,M,E=1;E<=M;E++)j[E-1]=E+".0 * uDelta";return T+="uniform float uTaps["+M+`];
`,T+=`void main() {
`,T+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,T+=`  float sum = 1.0;
`,j.forEach(function(A,R){T+="  color += texture2D(uTexture, vTexCoord + "+A+") * uTaps["+R+`];
`,T+="  color += texture2D(uTexture, vTexCoord - "+A+") * uTaps["+R+`];
`,T+="  sum += 2.0 * uTaps["+R+`];
`}),T+=`  gl_FragColor = color / sum;
`,T+="}",T},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(C){return function(j){if(j>=C||j<=-C)return 0;if(j<11920929e-14&&j>-11920929e-14)return 1;j*=Math.PI;var T=j/C;return g(j)/j*g(T)/T}},applyTo2d:function(C){var j=C.imageData,T=this.scaleX,M=this.scaleY;this.rcpScaleX=1/T,this.rcpScaleY=1/M;var E=j.width,A=j.height,R=u(E*T),H=u(A*M),K;this.resizeType==="sliceHack"?K=this.sliceByTwo(C,E,A,R,H):this.resizeType==="hermite"?K=this.hermiteFastResize(C,E,A,R,H):this.resizeType==="bilinear"?K=this.bilinearFiltering(C,E,A,R,H):this.resizeType==="lanczos"&&(K=this.lanczosResize(C,E,A,R,H)),C.imageData=K},sliceByTwo:function(C,j,T,M,E){var A=C.imageData,R=.5,H=!1,K=!1,X=j*R,ne=T*R,de=a.filterBackend.resources,se,q,P=0,$=0,V=j,D=0;for(de.sliceByTwo||(de.sliceByTwo=document.createElement("canvas")),se=de.sliceByTwo,(se.width<j*1.5||se.height<T)&&(se.width=j*1.5,se.height=T),q=se.getContext("2d"),q.clearRect(0,0,j*1.5,T),q.putImageData(A,0,0),M=f(M),E=f(E);!H||!K;)j=X,T=ne,M<f(X*R)?X=f(X*R):(X=M,H=!0),E<f(ne*R)?ne=f(ne*R):(ne=E,K=!0),q.drawImage(se,P,$,j,T,V,D,X,ne),P=V,$=D,D+=ne;return q.getImageData(P,$,M,E)},lanczosResize:function(C,j,T,M,E){function A(L){var I,G,B,z,te,Q,ue,le,ie,Z,fe;for(D.x=(L+.5)*ne,O.x=f(D.x),I=0;I<E;I++){for(D.y=(I+.5)*de,O.y=f(D.y),te=0,Q=0,ue=0,le=0,ie=0,G=O.x-P;G<=O.x+P;G++)if(!(G<0||G>=j)){Z=f(1e3*c(G-D.x)),V[Z]||(V[Z]={});for(var ae=O.y-$;ae<=O.y+$;ae++)ae<0||ae>=T||(fe=f(1e3*c(ae-D.y)),V[Z][fe]||(V[Z][fe]=X(o(l(Z*se,2)+l(fe*q,2))/1e3)),B=V[Z][fe],B>0&&(z=(ae*j+G)*4,te+=B,Q+=B*R[z],ue+=B*R[z+1],le+=B*R[z+2],ie+=B*R[z+3]))}z=(I*M+L)*4,K[z]=Q/te,K[z+1]=ue/te,K[z+2]=le/te,K[z+3]=ie/te}return++L<M?A(L):H}var R=C.imageData.data,H=C.ctx.createImageData(M,E),K=H.data,X=this.lanczosCreate(this.lanczosLobes),ne=this.rcpScaleX,de=this.rcpScaleY,se=2/this.rcpScaleX,q=2/this.rcpScaleY,P=y(ne*this.lanczosLobes/2),$=y(de*this.lanczosLobes/2),V={},D={},O={};return A(0)},bilinearFiltering:function(C,j,T,M,E){var A,R,H,K,X,ne,de,se,q,P,$,V,D=0,O,L=this.rcpScaleX,I=this.rcpScaleY,G=4*(j-1),B=C.imageData,z=B.data,te=C.ctx.createImageData(M,E),Q=te.data;for(de=0;de<E;de++)for(se=0;se<M;se++)for(X=f(L*se),ne=f(I*de),q=L*se-X,P=I*de-ne,O=4*(ne*j+X),$=0;$<4;$++)A=z[O+$],R=z[O+4+$],H=z[O+G+$],K=z[O+G+4+$],V=A*(1-q)*(1-P)+R*q*(1-P)+H*P*(1-q)+K*q*P,Q[D++]=V;return te},hermiteFastResize:function(C,j,T,M,E){for(var A=this.rcpScaleX,R=this.rcpScaleY,H=y(A/2),K=y(R/2),X=C.imageData,ne=X.data,de=C.ctx.createImageData(M,E),se=de.data,q=0;q<E;q++)for(var P=0;P<M;P++){for(var $=(P+q*M)*4,V=0,D=0,O=0,L=0,I=0,G=0,B=0,z=(q+.5)*R,te=f(q*R);te<(q+1)*R;te++)for(var Q=c(z-(te+.5))/K,ue=(P+.5)*A,le=Q*Q,ie=f(P*A);ie<(P+1)*A;ie++){var Z=c(ue-(ie+.5))/H,fe=o(le+Z*Z);fe>1&&fe<-1||(V=2*fe*fe*fe-3*fe*fe+1,V>0&&(Z=4*(ie+te*j),B+=V*ne[Z+3],O+=V,ne[Z+3]<255&&(V=V*ne[Z+3]/250),L+=V*ne[Z],I+=V*ne[Z+1],G+=V*ne[Z+2],D+=V))}se[$]=L/D,se[$+1]=I/D,se[$+2]=G/D,se[$+3]=B/O}return de},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),a.Image.filters.Resize.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Contrast=f(l.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var c=o.imageData,u,y,g=c.data,y=g.length,x=Math.floor(this.contrast*255),w=259*(x+255)/(255*(259-x));for(u=0;u<y;u+=4)g[u]=w*(g[u]-128)+128,g[u+1]=w*(g[u+1]-128)+128,g[u+2]=w*(g[u+2]-128)+128}},getUniformLocations:function(o,c){return{uContrast:o.getUniformLocation(c,"uContrast")}},sendUniformData:function(o,c){o.uniform1f(c.uContrast,this.contrast)}}),a.Image.filters.Contrast.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Saturation=f(l.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var c=o.imageData,u=c.data,g=u.length,y=-this.saturation,x,w;for(x=0;x<g;x+=4)w=Math.max(u[x],u[x+1],u[x+2]),u[x]+=w!==u[x]?(w-u[x])*y:0,u[x+1]+=w!==u[x+1]?(w-u[x+1])*y:0,u[x+2]+=w!==u[x+2]?(w-u[x+2])*y:0}},getUniformLocations:function(o,c){return{uSaturation:o.getUniformLocation(c,"uSaturation")}},sendUniformData:function(o,c){o.uniform1f(c.uSaturation,-this.saturation)}}),a.Image.filters.Saturation.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Vibrance=f(l.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var c=o.imageData,u=c.data,g=u.length,y=-this.vibrance,x,w,C,j;for(x=0;x<g;x+=4)w=Math.max(u[x],u[x+1],u[x+2]),C=(u[x]+u[x+1]+u[x+2])/3,j=Math.abs(w-C)*2/255*y,u[x]+=w!==u[x]?(w-u[x])*j:0,u[x+1]+=w!==u[x+1]?(w-u[x+1])*j:0,u[x+2]+=w!==u[x+2]?(w-u[x+2])*j:0}},getUniformLocations:function(o,c){return{uVibrance:o.getUniformLocation(c,"uVibrance")}},sendUniformData:function(o,c){o.uniform1f(c.uVibrance,-this.vibrance)}}),a.Image.filters.Vibrance.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Blur=f(l.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var c=o.filterBackend.resources,u,g,y=o.imageData.width,x=o.imageData.height;c.blurLayer1||(c.blurLayer1=a.util.createCanvasElement(),c.blurLayer2=a.util.createCanvasElement()),u=c.blurLayer1,g=c.blurLayer2,(u.width!==y||u.height!==x)&&(g.width=u.width=y,g.height=u.height=x);var w=u.getContext("2d"),C=g.getContext("2d"),j=15,T,M,E,A,R=this.blur*.06*.5;for(w.putImageData(o.imageData,0,0),C.clearRect(0,0,y,x),A=-15;A<=j;A++)T=(Math.random()-.5)/4,M=A/j,E=R*M*y+T,C.globalAlpha=1-Math.abs(M),C.drawImage(u,E,T),w.drawImage(g,0,0),C.globalAlpha=1,C.clearRect(0,0,g.width,g.height);for(A=-15;A<=j;A++)T=(Math.random()-.5)/4,M=A/j,E=R*M*x+T,C.globalAlpha=1-Math.abs(M),C.drawImage(u,T,E),w.drawImage(g,0,0),C.globalAlpha=1,C.clearRect(0,0,g.width,g.height);o.ctx.drawImage(u,0,0);var H=o.ctx.getImageData(0,0,u.width,u.height);return w.globalAlpha=1,w.clearRect(0,0,u.width,u.height),H},getUniformLocations:function(o,c){return{delta:o.getUniformLocation(c,"uDelta")}},sendUniformData:function(o,c){var u=this.chooseRightDelta();o.uniform2fv(c.delta,u)},chooseRightDelta:function(){var o=1,c=[0,0],u;return this.horizontal?this.aspectRatio>1&&(o=1/this.aspectRatio):this.aspectRatio<1&&(o=this.aspectRatio),u=o*this.blur*.12,this.horizontal?c[0]=u:c[1]=u,c}}),l.Blur.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Gamma=f(l.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],l.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var c=o.imageData,u=c.data,g=this.gamma,y=u.length,x=1/g[0],w=1/g[1],C=1/g[2],j;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),j=0,y=256;j<y;j++)this.rVals[j]=Math.pow(j/255,x)*255,this.gVals[j]=Math.pow(j/255,w)*255,this.bVals[j]=Math.pow(j/255,C)*255;for(j=0,y=u.length;j<y;j+=4)u[j]=this.rVals[u[j]],u[j+1]=this.gVals[u[j+1]],u[j+2]=this.bVals[u[j+2]]},getUniformLocations:function(o,c){return{uGamma:o.getUniformLocation(c,"uGamma")}},sendUniformData:function(o,c){o.uniform3fv(c.uGamma,this.gamma)}}),a.Image.filters.Gamma.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.Composed=f(l.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(c){c.applyTo(o)})},toObject:function(){return a.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),a.Image.filters.Composed.fromObject=function(o,c){var u=o.subFilters||[],g=u.map(function(x){return new a.Image.filters[x.type](x)}),y=new a.Image.filters.Composed({subFilters:g});return c&&c(y),y}}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.Image.filters,f=a.util.createClass;l.HueRotation=f(l.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,c=a.util.cos(o),u=a.util.sin(o),g=1/3,y=Math.sqrt(g)*u,x=1-c;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=c+x/3,this.matrix[1]=g*x-y,this.matrix[2]=g*x+y,this.matrix[5]=g*x+y,this.matrix[6]=c+g*x,this.matrix[7]=g*x-y,this.matrix[10]=g*x-y,this.matrix[11]=g*x+y,this.matrix[12]=c+g*x},isNeutralState:function(o){return this.calculateMatrix(),l.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),l.BaseFilter.prototype.applyTo.call(this,o)}}),a.Image.filters.HueRotation.fromObject=a.Image.filters.BaseFilter.fromObject}(e),function(d){var a=d.fabric||(d.fabric={}),l=a.util.object.clone;if(a.Text){a.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");a.Text=a.util.createClass(a.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:a.Object.prototype.stateProperties.concat(f),cacheProperties:a.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,c){this.styles=c?c.styles||{}:{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",c),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=a.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return a._measuringContext||(a._measuringContext=this.canvas&&this.canvas.contextCache||a.util.createCanvasElement().getContext("2d")),a._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var o,c,u,g,y,x,w,C=0,j=this._textLines.length;C<j;C++)if(!(this.textAlign!=="justify"&&(C===j-1||this.isEndOfWrapping(C)))&&(g=0,y=this._textLines[C],c=this.getLineWidth(C),c<this.width&&(w=this.textLines[C].match(this._reSpacesAndTabs)))){u=w.length,o=(this.width-c)/u;for(var T=0,M=y.length;T<=M;T++)x=this.__charBounds[C][T],this._reSpaceAndTab.test(y[T])?(x.width+=o,x.kernedWidth+=o,x.left+=g,g+=o):x.left+=g}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),c=this.fontSize;return o.width+=c*o.zoomX,o.height+=c*o.zoomY,o},_render:function(o){var c=this.path;c&&!c.isNotVisible()&&c._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,c,u){if(o.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom";break}o.font=this._getFontDeclaration(c,u)},calcTextWidth:function(){for(var o=this.getLineWidth(0),c=1,u=this._textLines.length;c<u;c++){var g=this.getLineWidth(c);g>o&&(o=g)}return o},_renderTextLine:function(o,c,u,g,y,x){this._renderChars(o,c,u,g,y,x)},_renderTextLinesBackground:function(o){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var c,u,g=o.fillStyle,y,x,w=this._getLeftOffset(),C=this._getTopOffset(),j=0,T=0,M,E,A=this.path,R,H=0,K=this._textLines.length;H<K;H++){if(c=this.getHeightOfLine(H),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",H)){C+=c;continue}y=this._textLines[H],u=this._getLineLeftOffset(H),T=0,j=0,x=this.getValueOfPropertyAt(H,0,"textBackgroundColor");for(var X=0,ne=y.length;X<ne;X++)M=this.__charBounds[H][X],E=this.getValueOfPropertyAt(H,X,"textBackgroundColor"),A?(o.save(),o.translate(M.renderLeft,M.renderTop),o.rotate(M.angle),o.fillStyle=E,E&&o.fillRect(-M.width/2,-c/this.lineHeight*(1-this._fontSizeFraction),M.width,c/this.lineHeight),o.restore()):E!==x?(R=w+u+j,this.direction==="rtl"&&(R=this.width-R-T),o.fillStyle=x,x&&o.fillRect(R,C,T,c/this.lineHeight),j=M.left,T=M.width,x=E):T+=M.kernedWidth;E&&!A&&(R=w+u+j,this.direction==="rtl"&&(R=this.width-R-T),o.fillStyle=E,o.fillRect(R,C,T,c/this.lineHeight)),C+=c}o.fillStyle=g,this._removeShadow(o)}},getFontCache:function(o){var c=o.fontFamily.toLowerCase();a.charWidthsCache[c]||(a.charWidthsCache[c]={});var u=a.charWidthsCache[c],g=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return u[g]||(u[g]={}),u[g]},_measureChar:function(o,c,u,g){var y=this.getFontCache(c),x=this._getFontDeclaration(c),w=this._getFontDeclaration(g),C=u+o,j=x===w,T,M,E,A=c.fontSize/this.CACHE_FONT_SIZE,R;if(u&&y[u]!==void 0&&(E=y[u]),y[o]!==void 0&&(R=T=y[o]),j&&y[C]!==void 0&&(M=y[C],R=M-E),T===void 0||E===void 0||M===void 0){var H=this.getMeasuringContext();this._setTextStyles(H,c,!0)}return T===void 0&&(R=T=H.measureText(o).width,y[o]=T),E===void 0&&j&&u&&(E=H.measureText(u).width,y[u]=E),j&&M===void 0&&(M=H.measureText(C).width,y[C]=M,R=M-E),{width:T*A,kernedWidth:R*A}},getHeightOfChar:function(o,c){return this.getValueOfPropertyAt(o,c,"fontSize")},measureLine:function(o){var c=this._measureLine(o);return this.charSpacing!==0&&(c.width-=this._getWidthOfCharSpacing()),c.width<0&&(c.width=0),c},_measureLine:function(o){var c=0,u,g,y=this._textLines[o],x,w,C=0,j=new Array(y.length),T=0,M,E,A=this.path,R=this.pathSide==="right";for(this.__charBounds[o]=j,u=0;u<y.length;u++)g=y[u],w=this._getGraphemeBox(g,o,u,x),j[u]=w,c+=w.kernedWidth,x=g;if(j[u]={left:w?w.left+w.width:0,width:0,kernedWidth:0,height:this.fontSize},A){switch(E=A.segmentsInfo[A.segmentsInfo.length-1].length,M=a.util.getPointOnPath(A.path,0,A.segmentsInfo),M.x+=A.pathOffset.x,M.y+=A.pathOffset.y,this.textAlign){case"left":T=R?E-c:0;break;case"center":T=(E-c)/2;break;case"right":T=R?0:E-c;break}for(T+=this.pathStartOffset*(R?-1:1),u=R?y.length-1:0;R?u>=0:u<y.length;R?u--:u++)w=j[u],T>E?T%=E:T<0&&(T+=E),this._setGraphemeOnPath(T,w,M),T+=w.kernedWidth}return{width:c,numOfSpaces:C}},_setGraphemeOnPath:function(o,c,u){var g=o+c.kernedWidth/2,y=this.path,x=a.util.getPointOnPath(y.path,g,y.segmentsInfo);c.renderLeft=x.x-u.x,c.renderTop=x.y-u.y,c.angle=x.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,c,u,g,y){var x=this.getCompleteStyleDeclaration(c,u),w=g?this.getCompleteStyleDeclaration(c,u-1):{},C=this._measureChar(o,x,g,w),j=C.kernedWidth,T=C.width,M;this.charSpacing!==0&&(M=this._getWidthOfCharSpacing(),T+=M,j+=M);var E={width:T,left:0,height:x.fontSize,kernedWidth:j,deltaY:x.deltaY};if(u>0&&!y){var A=this.__charBounds[c][u-1];E.left=A.left+A.width+C.kernedWidth-C.width}return E},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var c=this._textLines[o],u=this.getHeightOfChar(o,0),g=1,y=c.length;g<y;g++)u=Math.max(this.getHeightOfChar(o,g),u);return this.__lineHeights[o]=u*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,c=0,u=0,g=this._textLines.length;u<g;u++)o=this.getHeightOfLine(u),c+=u===g-1?o/this.lineHeight:o;return c},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,c){o.save();for(var u=0,g=this._getLeftOffset(),y=this._getTopOffset(),x=0,w=this._textLines.length;x<w;x++){var C=this.getHeightOfLine(x),j=C/this.lineHeight,T=this._getLineLeftOffset(x);this._renderTextLine(c,o,this._textLines[x],g+T,y+u+j,x),u+=C}o.restore()},_renderTextFill:function(o){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,c,u,g,y,x){var w=this.getHeightOfLine(x),C=this.textAlign.indexOf("justify")!==-1,j,T,M="",E,A=0,R,H=this.path,K=!C&&this.charSpacing===0&&this.isEmptyStyles(x)&&!H,X=this.direction==="ltr",ne=this.direction==="ltr"?1:-1,de,se=c.canvas.getAttribute("dir");if(c.save(),se!==this.direction&&(c.canvas.setAttribute("dir",X?"ltr":"rtl"),c.direction=X?"ltr":"rtl",c.textAlign=X?"left":"right"),y-=w*this._fontSizeFraction/this.lineHeight,K){this._renderChar(o,c,x,0,u.join(""),g,y,w),c.restore();return}for(var q=0,P=u.length-1;q<=P;q++)R=q===P||this.charSpacing||H,M+=u[q],E=this.__charBounds[x][q],A===0?(g+=ne*(E.kernedWidth-E.width),A+=E.width):A+=E.kernedWidth,C&&!R&&this._reSpaceAndTab.test(u[q])&&(R=!0),R||(j=j||this.getCompleteStyleDeclaration(x,q),T=this.getCompleteStyleDeclaration(x,q+1),R=a.util.hasStyleChanged(j,T,!1)),R&&(H?(c.save(),c.translate(E.renderLeft,E.renderTop),c.rotate(E.angle),this._renderChar(o,c,x,q,M,-A/2,0,w),c.restore()):(de=g,this._renderChar(o,c,x,q,M,de,y,w)),M="",j=T,g+=ne*A,A=0);c.restore()},_applyPatternGradientTransformText:function(o){var c=a.util.createCanvasElement(),u,g=this.width+this.strokeWidth,y=this.height+this.strokeWidth;return c.width=g,c.height=y,u=c.getContext("2d"),u.beginPath(),u.moveTo(0,0),u.lineTo(g,0),u.lineTo(g,y),u.lineTo(0,y),u.closePath(),u.translate(g/2,y/2),u.fillStyle=o.toLive(u),this._applyPatternGradientTransform(u,o),u.fill(),u.createPattern(c,"no-repeat")},handleFiller:function(o,c,u){var g,y;return u.toLive?u.gradientUnits==="percentage"||u.gradientTransform||u.patternTransform?(g=-this.width/2,y=-this.height/2,o.translate(g,y),o[c]=this._applyPatternGradientTransformText(u),{offsetX:g,offsetY:y}):(o[c]=u.toLive(o,this),this._applyPatternGradientTransform(o,u)):(o[c]=u,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,c){return o.lineWidth=c.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",c.stroke)},_setFillStyles:function(o,c){return this.handleFiller(o,"fillStyle",c.fill)},_renderChar:function(o,c,u,g,y,x,w){var C=this._getStyleDeclaration(u,g),j=this.getCompleteStyleDeclaration(u,g),T=o==="fillText"&&j.fill,M=o==="strokeText"&&j.stroke&&j.strokeWidth,E,A;!M&&!T||(c.save(),T&&(E=this._setFillStyles(c,j)),M&&(A=this._setStrokeStyles(c,j)),c.font=this._getFontDeclaration(j),C&&C.textBackgroundColor&&this._removeShadow(c),C&&C.deltaY&&(w+=C.deltaY),T&&c.fillText(y,x-E.offsetX,w-E.offsetY),M&&c.strokeText(y,x-A.offsetX,w-A.offsetY),c.restore())},setSuperscript:function(o,c){return this._setScript(o,c,this.superscript)},setSubscript:function(o,c){return this._setScript(o,c,this.subscript)},_setScript:function(o,c,u){var g=this.get2DCursorLocation(o,!0),y=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"fontSize"),x=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"deltaY"),w={fontSize:y*u.size,deltaY:x+y*u.baseline};return this.setSelectionStyles(w,o,c),this},_getLineLeftOffset:function(o){var c=this.getLineWidth(o),u=this.width-c,g=this.textAlign,y=this.direction,w,x=0,w=this.isEndOfWrapping(o);return g==="justify"||g==="justify-center"&&!w||g==="justify-right"&&!w||g==="justify-left"&&!w?0:(g==="center"&&(x=u/2),g==="right"&&(x=u),g==="justify-center"&&(x=u/2),g==="justify-right"&&(x=u),y==="rtl"&&(x-=u),x)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var c=this.measureLine(o),u=c.width;return this.__lineWidths[o]=u,u},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,c,u){var g=this._getStyleDeclaration(o,c);return g&&typeof g[u]<"u"?g[u]:this[u]},_renderTextDecoration:function(o,c){if(!(!this[c]&&!this.styleHas(c))){for(var u,g,y,x,w,C,j,T,M=this._getLeftOffset(),E=this._getTopOffset(),A,R,H,K,X,ne,de,se,q=this.path,P=this._getWidthOfCharSpacing(),$=this.offsets[c],V=0,D=this._textLines.length;V<D;V++){if(u=this.getHeightOfLine(V),!this[c]&&!this.styleHas(c,V)){E+=u;continue}j=this._textLines[V],ne=u/this.lineHeight,x=this._getLineLeftOffset(V),R=0,H=0,T=this.getValueOfPropertyAt(V,0,c),se=this.getValueOfPropertyAt(V,0,"fill"),A=E+ne*(1-this._fontSizeFraction),g=this.getHeightOfChar(V,0),w=this.getValueOfPropertyAt(V,0,"deltaY");for(var O=0,L=j.length;O<L;O++)if(K=this.__charBounds[V][O],X=this.getValueOfPropertyAt(V,O,c),de=this.getValueOfPropertyAt(V,O,"fill"),y=this.getHeightOfChar(V,O),C=this.getValueOfPropertyAt(V,O,"deltaY"),q&&X&&de)o.save(),o.fillStyle=se,o.translate(K.renderLeft,K.renderTop),o.rotate(K.angle),o.fillRect(-K.kernedWidth/2,$*y+C,K.kernedWidth,this.fontSize/15),o.restore();else if((X!==T||de!==se||y!==g||C!==w)&&H>0){var I=M+x+R;this.direction==="rtl"&&(I=this.width-I-H),T&&se&&(o.fillStyle=se,o.fillRect(I,A+$*g+w,H,this.fontSize/15)),R=K.left,H=K.width,T=X,se=de,g=y,w=C}else H+=K.kernedWidth;var I=M+x+R;this.direction==="rtl"&&(I=this.width-I-H),o.fillStyle=de,X&&de&&o.fillRect(I,A+$*g+w,H-P,this.fontSize/15),E+=u}this._removeShadow(o)}},_getFontDeclaration:function(o,c){var u=o||this,g=this.fontFamily,y=a.Text.genericFonts.indexOf(g.toLowerCase())>-1,x=g===void 0||g.indexOf("'")>-1||g.indexOf(",")>-1||g.indexOf('"')>-1||y?u.fontFamily:'"'+u.fontFamily+'"';return[a.isLikelyNode?u.fontWeight:u.fontStyle,a.isLikelyNode?u.fontStyle:u.fontWeight,c?this.CACHE_FONT_SIZE+"px":u.fontSize+"px",x].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var c=o.split(this._reNewline),u=new Array(c.length),g=[`
`],y=[],x=0;x<c.length;x++)u[x]=a.util.string.graphemeSplit(c[x]),y=y.concat(u[x],g);return y.pop(),{_unwrappedLines:u,lines:c,graphemeText:y,graphemeLines:u}},toObject:function(o){var c=f.concat(o),u=this.callSuper("toObject",c);return u.styles=a.util.stylesToArray(this.styles,this.text),u.path&&(u.path=this.path.toObject()),u},set:function(o,c){this.callSuper("set",o,c);var u=!1,g=!1;if(typeof o=="object")for(var y in o)y==="path"&&this.setPathInfo(),u=u||this._dimensionAffectingProps.indexOf(y)!==-1,g=g||y==="path";else u=this._dimensionAffectingProps.indexOf(o)!==-1,g=o==="path";return g&&this.setPathInfo(),u&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),a.Text.ATTRIBUTE_NAMES=a.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),a.Text.DEFAULT_SVG_FONT_SIZE=16,a.Text.fromElement=function(o,c,u){if(!o)return c(null);var g=a.parseAttributes(o,a.Text.ATTRIBUTE_NAMES),y=g.textAnchor||"left";if(u=a.util.object.extend(u?l(u):{},g),u.top=u.top||0,u.left=u.left||0,g.textDecoration){var x=g.textDecoration;x.indexOf("underline")!==-1&&(u.underline=!0),x.indexOf("overline")!==-1&&(u.overline=!0),x.indexOf("line-through")!==-1&&(u.linethrough=!0),delete u.textDecoration}"dx"in g&&(u.left+=g.dx),"dy"in g&&(u.top+=g.dy),"fontSize"in u||(u.fontSize=a.Text.DEFAULT_SVG_FONT_SIZE);var w="";"textContent"in o?w=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(w=o.firstChild.data),w=w.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=u.strokeWidth;u.strokeWidth=0;var j=new a.Text(w,u),T=j.getScaledHeight()/j.height,M=(j.height+j.strokeWidth)*j.lineHeight-j.height,E=M*T,A=j.getScaledHeight()+E,R=0;y==="center"&&(R=j.getScaledWidth()/2),y==="right"&&(R=j.getScaledWidth()),j.set({left:j.left-R,top:j.top-(A-j.fontSize*(.07+j._fontSizeFraction))/j.lineHeight,strokeWidth:typeof C<"u"?C:1}),c(j)},a.Text.fromObject=function(o,c){var u=l(o),g=o.path;return delete u.path,a.Object._fromObject("Text",u,function(y){y.styles=a.util.stylesFromArray(o.styles,o.text),g?a.Object._fromObject("Path",g,function(x){y.set("path",x),c(y)},"path"):c(y)},"text")},a.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],a.util.createAccessors&&a.util.createAccessors(a.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var a=typeof d>"u"?this.styles:{line:this.styles[d]};for(var l in a)for(var f in a[l])for(var o in a[l][f])return!1;return!0},styleHas:function(d,a){if(!this.styles||!d||d===""||typeof a<"u"&&!this.styles[a])return!1;var l=typeof a>"u"?this.styles:{0:this.styles[a]};for(var f in l)for(var o in l[f])if(typeof l[f][o][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var a=this.styles,l=0,f,o,c=!0,u=0,g;for(var y in a){f=0;for(var x in a[y]){var g=a[y][x],w=g.hasOwnProperty(d);l++,w?(o?g[d]!==o&&(c=!1):o=g[d],g[d]===this[d]&&delete g[d]):c=!1,Object.keys(g).length!==0?f++:delete a[y][x]}f===0&&delete a[y]}for(var C=0;C<this._textLines.length;C++)u+=this._textLines[C].length;c&&l===u&&(this[d]=o,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var a=this.styles,l,f,o;for(f in a){l=a[f];for(o in l)delete l[o][d],Object.keys(l[o]).length===0&&delete l[o];Object.keys(l).length===0&&delete a[f]}}},_extendStyles:function(d,a){var l=this.get2DCursorLocation(d);this._getLineStyle(l.lineIndex)||this._setLineStyle(l.lineIndex),this._getStyleDeclaration(l.lineIndex,l.charIndex)||this._setStyleDeclaration(l.lineIndex,l.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(l.lineIndex,l.charIndex),a)},get2DCursorLocation:function(d,a){typeof d>"u"&&(d=this.selectionStart);for(var l=a?this._unwrappedTextLines:this._textLines,f=l.length,o=0;o<f;o++){if(d<=l[o].length)return{lineIndex:o,charIndex:d};d-=l[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:l[o-1].length<d?l[o-1].length:d}},getSelectionStyles:function(d,a,l){typeof d>"u"&&(d=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||d);for(var f=[],o=d;o<a;o++)f.push(this.getStyleAtPosition(o,l));return f},getStyleAtPosition:function(d,a){var l=this.get2DCursorLocation(d),f=a?this.getCompleteStyleDeclaration(l.lineIndex,l.charIndex):this._getStyleDeclaration(l.lineIndex,l.charIndex);return f||{}},setSelectionStyles:function(d,a,l){typeof a>"u"&&(a=this.selectionStart||0),typeof l>"u"&&(l=this.selectionEnd||a);for(var f=a;f<l;f++)this._extendStyles(f,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,a){var l=this.styles&&this.styles[d];return l?l[a]:null},getCompleteStyleDeclaration:function(d,a){for(var l=this._getStyleDeclaration(d,a)||{},f={},o,c=0;c<this._styleProperties.length;c++)o=this._styleProperties[c],f[o]=typeof l[o]>"u"?this[o]:l[o];return f},_setStyleDeclaration:function(d,a,l){this.styles[d][a]=l},_deleteStyleDeclaration:function(d,a){delete this.styles[d][a]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(a){a.textDecoration&&(a.textDecoration.indexOf("underline")>-1&&(a.underline=!0),a.textDecoration.indexOf("line-through")>-1&&(a.linethrough=!0),a.textDecoration.indexOf("overline")>-1&&(a.overline=!0),delete a.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(a,l){this.callSuper("initialize",a,l),this.initBehavior()},setSelectionStart:function(a){a=Math.max(a,0),this._updateAndFire("selectionStart",a)},setSelectionEnd:function(a){a=Math.min(a,this.text.length),this._updateAndFire("selectionEnd",a)},_updateAndFire:function(a,l){this[a]!==l&&(this._fireSelectionChanged(),this[a]=l),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(a){this.clearContextTop(),this.callSuper("render",a),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(a){this.callSuper("_render",a)},clearContextTop:function(a){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var l=this.canvas.contextTop,f=this.canvas.viewportTransform;l.save(),l.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(l),this._clearTextArea(l),a||l.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this._getCursorBoundaries(),l=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(a,l):this.renderSelection(a,l),l.restore()}},_clearTextArea:function(a){var l=this.width+4,f=this.height+4;a.clearRect(-l/2,-f/2,l,f)},_getCursorBoundaries:function(a){typeof a>"u"&&(a=this.selectionStart);var l=this._getLeftOffset(),f=this._getTopOffset(),o=this._getCursorBoundariesOffsets(a);return{left:l,top:f,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(a){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var l,f,o,c=0,u=0,g,y=this.get2DCursorLocation(a);o=y.charIndex,f=y.lineIndex;for(var x=0;x<f;x++)c+=this.getHeightOfLine(x);l=this._getLineLeftOffset(f);var w=this.__charBounds[f][o];return w&&(u=w.left),this.charSpacing!==0&&o===this._textLines[f].length&&(u-=this._getWidthOfCharSpacing()),g={top:c,left:l+(u>0?u:0)},this.direction==="rtl"&&(g.left*=-1),this.cursorOffsetCache=g,this.cursorOffsetCache},renderCursor:function(a,l){var f=this.get2DCursorLocation(),o=f.lineIndex,c=f.charIndex>0?f.charIndex-1:0,u=this.getValueOfPropertyAt(o,c,"fontSize"),g=this.scaleX*this.canvas.getZoom(),y=this.cursorWidth/g,x=a.topOffset,w=this.getValueOfPropertyAt(o,c,"deltaY");x+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-u*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(a,l),l.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,c,"fill"),l.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,l.fillRect(a.left+a.leftOffset-y/2,x+a.top+w,y,u)},renderSelection:function(a,l){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,c=this.textAlign.indexOf("justify")!==-1,u=this.get2DCursorLocation(f),g=this.get2DCursorLocation(o),y=u.lineIndex,x=g.lineIndex,w=u.charIndex<0?0:u.charIndex,C=g.charIndex<0?0:g.charIndex,j=y;j<=x;j++){var T=this._getLineLeftOffset(j)||0,M=this.getHeightOfLine(j),E=0,A=0,R=0;if(j===y&&(A=this.__charBounds[y][w].left),j>=y&&j<x)R=c&&!this.isEndOfWrapping(j)?this.width:this.getLineWidth(j)||5;else if(j===x)if(C===0)R=this.__charBounds[x][C].left;else{var H=this._getWidthOfCharSpacing();R=this.__charBounds[x][C-1].left+this.__charBounds[x][C-1].width-H}E=M,(this.lineHeight<1||j===x&&this.lineHeight>1)&&(M/=this.lineHeight);var K=a.left+T+A,X=R-A,ne=M,de=0;this.inCompositionMode?(l.fillStyle=this.compositionColor||"black",ne=1,de=M):l.fillStyle=this.selectionColor,this.direction==="rtl"&&(K=this.width-K-X),l.fillRect(K,a.top+a.topOffset+de,X,ne),a.topOffset+=E}},getCurrentCharFontSize:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fontSize")},getCurrentCharColor:function(){var a=this._getCurrentCharIndex();return this.getValueOfPropertyAt(a.l,a.c,"fill")},_getCurrentCharIndex:function(){var a=this.get2DCursorLocation(this.selectionStart,!0),l=a.charIndex>0?a.charIndex-1:0;return{l:a.lineIndex,c:l}}}),t.IText.fromObject=function(a,l){var f=t.util.stylesFromArray(a.styles,a.text),o=Object.assign({},a,{styles:f});if(d(o),o.styles)for(var c in o.styles)for(var u in o.styles[c])d(o.styles[c][u]);t.Object._fromObject("IText",o,l,"text")}}(),function(){var d=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var a=this;this.on("added",function(){var l=a.canvas;l&&(l._hasITextHandlers||(l._hasITextHandlers=!0,a._initCanvasHandlers(l)),l._iTextInstances=l._iTextInstances||[],l._iTextInstances.push(a))})},initRemovedHandler:function(){var a=this;this.on("removed",function(){var l=a.canvas;l&&(l._iTextInstances=l._iTextInstances||[],t.util.removeFromArray(l._iTextInstances,a),l._iTextInstances.length===0&&(l._hasITextHandlers=!1,a._removeCanvasHandlers(l)))})},_initCanvasHandlers:function(a){a._mouseUpITextHandler=function(){a._iTextInstances&&a._iTextInstances.forEach(function(l){l.__isMousedown=!1})},a.on("mouse:up",a._mouseUpITextHandler)},_removeCanvasHandlers:function(a){a.off("mouse:up",a._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(a,l,f,o){var c;return c={isAborted:!1,abort:function(){this.isAborted=!0}},a.animate("_currentCursorOpacity",l,{duration:f,onComplete:function(){c.isAborted||a[o]()},onChange:function(){a.canvas&&a.selectionStart===a.selectionEnd&&a.renderCursorOrSelection()},abort:function(){return c.isAborted}}),c},_onTickComplete:function(){var a=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){a._currentTickCompleteState=a._animateCursor(a,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(a){var l=this,f=a?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){l._tick()},f)},abortCursorAnimation:function(){var a=this._currentTickState||this._currentTickCompleteState,l=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,a&&l&&l.clearContext(l.contextTop||l.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(a){var l=0,f=a-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)l++,f--;for(;/\S/.test(this._text[f])&&f>-1;)l++,f--;return a-l},findWordBoundaryRight:function(a){var l=0,f=a;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)l++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)l++,f++;return a+l},findLineBoundaryLeft:function(a){for(var l=0,f=a-1;!/\n/.test(this._text[f])&&f>-1;)l++,f--;return a-l},findLineBoundaryRight:function(a){for(var l=0,f=a;!/\n/.test(this._text[f])&&f<this._text.length;)l++,f++;return a+l},searchWordBoundary:function(a,l){for(var f=this._text,o=this._reSpace.test(f[a])?a-1:a,c=f[o],u=t.reNonWord;!u.test(c)&&o>0&&o<f.length;)o+=l,c=f[o];return u.test(c)&&(o+=l===1?0:1),o},selectWord:function(a){a=a||this.selectionStart;var l=this.searchWordBoundary(a,-1),f=this.searchWordBoundary(a,1);this.selectionStart=l,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(a){a=a||this.selectionStart;var l=this.findLineBoundaryLeft(a),f=this.findLineBoundaryRight(a);return this.selectionStart=l,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(a){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(a),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(a){a._iTextInstances&&a._iTextInstances.forEach(function(l){l.selected=!1,l.isEditing&&l.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(a){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var l=this.getSelectionStartFromPointer(a.e),f=this.selectionStart,o=this.selectionEnd;(l!==this.__selectionStartOnMouseDown||f===o)&&(f===l||o===l)||(l>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=l):(this.selectionStart=l,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(a,l,f){var o=f.slice(0,a),c=t.util.string.graphemeSplit(o).length;if(a===l)return{selectionStart:c,selectionEnd:c};var u=f.slice(a,l),g=t.util.string.graphemeSplit(u).length;return{selectionStart:c,selectionEnd:c+g}},fromGraphemeToStringSelection:function(a,l,f){var o=f.slice(0,a),c=o.join("").length;if(a===l)return{selectionStart:c,selectionEnd:c};var u=f.slice(a,l),g=u.join("").length;return{selectionStart:c,selectionEnd:c+g}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var a=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=a.selectionStart,this.hiddenTextarea.selectionEnd=a.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var a=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=a.selectionEnd,this.inCompositionMode||(this.selectionStart=a.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var a=this._calcTextareaPosition();this.hiddenTextarea.style.left=a.left,this.hiddenTextarea.style.top=a.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var a=this.inCompositionMode?this.compositionStart:this.selectionStart,l=this._getCursorBoundaries(a),f=this.get2DCursorLocation(a),o=f.lineIndex,c=f.charIndex,u=this.getValueOfPropertyAt(o,c,"fontSize")*this.lineHeight,g=l.leftOffset,y=this.calcTransformMatrix(),x={x:l.left+g,y:l.top+l.topOffset+u},w=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,j=C.width/w,T=C.height/w,M=j-u,E=T-u,A=C.clientWidth/j,R=C.clientHeight/T;return x=t.util.transformPoint(x,y),x=t.util.transformPoint(x,this.canvas.viewportTransform),x.x*=A,x.y*=R,x.x<0&&(x.x=0),x.x>M&&(x.x=M),x.y<0&&(x.y=0),x.y>E&&(x.y=E),x.x+=this.canvas._offset.left,x.y+=this.canvas._offset.top,{left:x.x+"px",top:x.y+"px",fontSize:u+"px",charHeight:u}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var a=this._textBeforeEdit!==this.text,l=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,l&&(l.blur&&l.blur(),l.parentNode&&l.parentNode.removeChild(l)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),a&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),a&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var a in this.styles)this._textLines[a]||delete this.styles[a]},removeStyleFromTo:function(a,l){var f=this.get2DCursorLocation(a,!0),o=this.get2DCursorLocation(l,!0),c=f.lineIndex,u=f.charIndex,g=o.lineIndex,y=o.charIndex,x,w;if(c!==g){if(this.styles[c])for(x=u;x<this._unwrappedTextLines[c].length;x++)delete this.styles[c][x];if(this.styles[g])for(x=y;x<this._unwrappedTextLines[g].length;x++)w=this.styles[g][x],w&&(this.styles[c]||(this.styles[c]={}),this.styles[c][u+x-y]=w);for(x=c+1;x<=g;x++)delete this.styles[x];this.shiftLineStyles(g,c-g)}else if(this.styles[c]){w=this.styles[c];var C=y-u,j,T;for(x=u;x<y;x++)delete w[x];for(T in this.styles[c])j=parseInt(T,10),j>=y&&(w[j-C]=w[T],delete w[T])}},shiftLineStyles:function(a,l){var f=d(this.styles);for(var o in this.styles){var c=parseInt(o,10);c>a&&(this.styles[c+l]=f[c],f[c-l]||delete this.styles[c])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(a,l,f,o){var c,u={},g=!1,y=this._unwrappedTextLines[a].length===l;f||(f=1),this.shiftLineStyles(a,f),this.styles[a]&&(c=this.styles[a][l===0?l:l-1]);for(var x in this.styles[a]){var w=parseInt(x,10);w>=l&&(g=!0,u[w-l]=this.styles[a][x],y&&l===0||delete this.styles[a][x])}var C=!1;for(g&&!y&&(this.styles[a+f]=u,C=!0),C&&f--;f>0;)o&&o[f-1]?this.styles[a+f]={0:d(o[f-1])}:c?this.styles[a+f]={0:d(c)}:delete this.styles[a+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(a,l,f,o){this.styles||(this.styles={});var c=this.styles[a],u=c?d(c):{};f||(f=1);for(var g in u){var y=parseInt(g,10);y>=l&&(c[y+f]=u[y],u[y-f]||delete c[y])}if(this._forceClearCache=!0,o){for(;f--;)Object.keys(o[f]).length&&(this.styles[a]||(this.styles[a]={}),this.styles[a][l+f]=d(o[f]));return}if(c)for(var x=c[l?l-1:1];x&&f--;)this.styles[a][l+f]=d(x)},insertNewStyleBlock:function(a,l,f){for(var o=this.get2DCursorLocation(l,!0),c=[0],u=0,g=0;g<a.length;g++)a[g]===`
`?(u++,c[u]=0):c[u]++;c[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,c[0],f),f=f&&f.slice(c[0]+1)),u&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+c[0],u);for(var g=1;g<u;g++)c[g]>0?this.insertCharStyleObject(o.lineIndex+g,0,c[g],f):f&&this.styles[o.lineIndex+g]&&f[0]&&(this.styles[o.lineIndex+g][0]=f[0]),f=f&&f.slice(c[g]+1);c[g]>0&&this.insertCharStyleObject(o.lineIndex+g,0,c[g],f)},setSelectionStartEndWithShift:function(a,l,f){f<=a?(l===a?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=a),this.selectionStart=f):f>a&&f<l?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(l===a?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=l),this.selectionEnd=f)},setSelectionInBoundaries:function(){var a=this.text.length;this.selectionStart>a?this.selectionStart=a:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>a?this.selectionEnd=a:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var a=d.pointer;this.isTripleClick(a)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=a,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var a=this.canvas._activeObject;if(a&&a!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var a=this.getSelectionStartFromPointer(d),l=this.selectionStart,f=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(l,f,a):(this.selectionStart=a,this.selectionEnd=a),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var a=this.getLocalPointer(d),l=0,f=0,o=0,c=0,u=0,g,y,x=0,w=this._textLines.length;x<w&&o<=a.y;x++)o+=this.getHeightOfLine(x)*this.scaleY,u=x,x>0&&(c+=this._textLines[x-1].length+this.missingNewlineOffset(x-1));g=this._getLineLeftOffset(u),f=g*this.scaleX,y=this._textLines[u],this.direction==="rtl"&&(a.x=this.width*this.scaleX-a.x+f);for(var C=0,j=y.length;C<j&&(l=f,f+=this.__charBounds[u][C].kernedWidth*this.scaleX,f<=a.x);C++)c++;return this._getNewSelectionStartFromOffset(a,l,f,c,j)},_getNewSelectionStartFromOffset:function(d,a,l,f,o){var c=d.x-a,u=l-d.x,g=u>c||u<0?0:1,y=f+g;return this.flipX&&(y=o-y),y>this._text.length&&(y=this._text.length),y}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+d.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var a=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in a)this[a[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var a=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,o=l.length,c,u,g=o-f,y=this.selectionStart,x=this.selectionEnd,w=y!==x,C,j,T;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var M=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),E=y>M.selectionStart;w?(c=this._text.slice(y,x),g+=x-y):o<f&&(E?c=this._text.slice(x+g,x):c=this._text.slice(y,y-g)),u=l.slice(M.selectionEnd-g,M.selectionEnd),c&&c.length&&(u.length&&(C=this.getSelectionStyles(y,y+1,!1),C=u.map(function(){return C[0]})),w?(j=y,T=x):E?(j=x-c.length,T=x):(j=x,T=x+c.length),this.removeStyleFromTo(j,T)),u.length&&(a&&u.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(C=t.copiedTextStyle),this.insertNewStyleBlock(u,y,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(d,a){var l=this._getLineLeftOffset(d),f;return a>0&&(f=this.__charBounds[d][a-1],l+=f.left+f.width),l},getDownCursorOffset:function(d,a){var l=this._getSelectionForOffset(d,a),f=this.get2DCursorLocation(l),o=f.lineIndex;if(o===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-l;var c=f.charIndex,u=this._getWidthBeforeCursor(o,c),g=this._getIndexOnLine(o+1,u),y=this._textLines[o].slice(c);return y.length+g+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(d,a){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&a?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,a){var l=this._getSelectionForOffset(d,a),f=this.get2DCursorLocation(l),o=f.lineIndex;if(o===0||d.metaKey||d.keyCode===33)return-l;var c=f.charIndex,u=this._getWidthBeforeCursor(o,c),g=this._getIndexOnLine(o-1,u),y=this._textLines[o].slice(0,c),x=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+g-y.length+(1-x)},_getIndexOnLine:function(d,a){for(var l=this._textLines[d],f=this._getLineLeftOffset(d),o=f,c=0,u,g,y=0,x=l.length;y<x;y++)if(u=this.__charBounds[d][y].width,o+=u,o>a){g=!0;var w=o-u,C=o,j=Math.abs(w-a),T=Math.abs(C-a);c=T<j?y:y-1;break}return g||(c=l.length-1),c},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,a){var l="get"+d+"CursorOffset",f=this[l](a,this._selectionDirection==="right");a.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var a=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,a),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,a,l){var f;if(d.altKey)f=this["findWordBoundary"+l](this[a]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)f=this["findLineBoundary"+l](this[a]);else return this[a]+=l==="Left"?-1:1,!0;if(typeof f<"u"&&this[a]!==f)return this[a]=f,!0},_moveLeft:function(d,a){return this._move(d,a,"Left")},_moveRight:function(d,a){return this._move(d,a,"Right")},moveCursorLeftWithoutShift:function(d){var a=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(a=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,a},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,a){var l="moveCursor"+d+"With";this._currentCursorOpacity=1,a.shiftKey?l+="Shift":l+="outShift",this[l](a)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var a=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(a=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,a},removeChars:function(d,a){typeof a>"u"&&(a=d+1),this.removeStyleFromTo(d,a),this._text.splice(d,a-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,a,l,f){typeof f>"u"&&(f=l),f>l&&this.removeStyleFromTo(l,f);var o=t.util.string.graphemeSplit(d);this.insertNewStyleBlock(o,l,a),this._text=[].concat(this._text.slice(0,l),o,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=t.util.toFixed,a=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var l=this._getSVGLeftTopOffsets(),f=this._getSVGTextAndBg(l.textTop,l.textLeft);return this._wrapSVGTextAndBg(f)},toSVG:function(l){return this._createBaseSVGMarkup(this._toSVG(),{reviver:l,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(l){var f=!0,o=this.getSvgTextDecoration(this);return[l.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",o?'text-decoration="'+o+'" ':"",'style="',this.getSvgStyles(f),'"',this.addPaintOrder()," >",l.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(l,f){var o=[],c=[],u=l,g;this._setSVGBg(c);for(var y=0,x=this._textLines.length;y<x;y++)g=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(c,y,f+g,u),this._setSVGTextLineText(o,y,f+g,u),u+=this.getHeightOfLine(y);return{textSpans:o,textBgRects:c}},_createTextCharSpan:function(l,f,o,c){var u=l!==l.trim()||l.match(a),g=this.getSvgSpanStyles(f,u),y=g?'style="'+g+'"':"",x=f.deltaY,w="",C=t.Object.NUM_FRACTION_DIGITS;return x&&(w=' dy="'+d(x,C)+'" '),['<tspan x="',d(o,C),'" y="',d(c,C),'" ',w,y,">",t.util.string.escapeXml(l),"</tspan>"].join("")},_setSVGTextLineText:function(l,f,o,c){var u=this.getHeightOfLine(f),g=this.textAlign.indexOf("justify")!==-1,y,x,w="",C,j,T=0,M=this._textLines[f],E;c+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var A=0,R=M.length-1;A<=R;A++)E=A===R||this.charSpacing,w+=M[A],C=this.__charBounds[f][A],T===0?(o+=C.kernedWidth-C.width,T+=C.width):T+=C.kernedWidth,g&&!E&&this._reSpaceAndTab.test(M[A])&&(E=!0),E||(y=y||this.getCompleteStyleDeclaration(f,A),x=this.getCompleteStyleDeclaration(f,A+1),E=t.util.hasStyleChanged(y,x,!0)),E&&(j=this._getStyleDeclaration(f,A)||{},l.push(this._createTextCharSpan(w,j,o,c)),w="",y=x,o+=T,T=0)},_pushTextBgRect:function(l,f,o,c,u,g){var y=t.Object.NUM_FRACTION_DIGITS;l.push("		<rect ",this._getFillAttributes(f),' x="',d(o,y),'" y="',d(c,y),'" width="',d(u,y),'" height="',d(g,y),`"></rect>
`)},_setSVGTextLineBg:function(l,f,o,c){for(var u=this._textLines[f],g=this.getHeightOfLine(f)/this.lineHeight,y=0,x=0,w,C,j=this.getValueOfPropertyAt(f,0,"textBackgroundColor"),T=0,M=u.length;T<M;T++)w=this.__charBounds[f][T],C=this.getValueOfPropertyAt(f,T,"textBackgroundColor"),C!==j?(j&&this._pushTextBgRect(l,j,o+x,c,y,g),x=w.left,y=w.width,j=C):y+=w.kernedWidth;C&&this._pushTextBgRect(l,C,o+x,c,y,g)},_getFillAttributes:function(l){var f=l&&typeof l=="string"?new t.Color(l):"";return!f||!f.getSource()||f.getAlpha()===1?'fill="'+l+'"':'opacity="'+f.getAlpha()+'" fill="'+f.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(l){for(var f=0,o=0,c=0;c<l;c++)f+=this.getHeightOfLine(c);return o=this.getHeightOfLine(c),{lineTop:f,offset:(this._fontSizeMult-this._fontSizeFraction)*o/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(l){var f=t.Object.prototype.getSvgStyles.call(this,l);return f+" white-space: pre;"}})}(),function(d){var a=d.fabric||(d.fabric={});a.Textbox=a.util.createClass(a.IText,a.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:a.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(l){for(var f=0,o=0,c=0,u={},g=0;g<l.graphemeLines.length;g++)l.graphemeText[c]===`
`&&g>0?(o=0,c++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(l.graphemeText[c])&&g>0&&(o++,c++),u[g]={line:f,offset:o},c+=l.graphemeLines[g].length,o+=l.graphemeLines[g].length;return u},styleHas:function(l,f){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[f];o&&(f=o.line)}return a.Text.prototype.styleHas.call(this,l,f)},isEmptyStyles:function(l){if(!this.styles)return!0;var f=0,o=l+1,c,u,g=!1,y=this._styleMap[l],x=this._styleMap[l+1];y&&(l=y.line,f=y.offset),x&&(o=x.line,g=o===l,c=x.offset),u=typeof l>"u"?this.styles:{line:this.styles[l]};for(var w in u)for(var C in u[w])if(C>=f&&(!g||C<c))for(var j in u[w][C])return!1;return!0},_getStyleDeclaration:function(l,f){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[l];if(!o)return null;l=o.line,f=o.offset+f}return this.callSuper("_getStyleDeclaration",l,f)},_setStyleDeclaration:function(l,f,o){var c=this._styleMap[l];l=c.line,f=c.offset+f,this.styles[l][f]=o},_deleteStyleDeclaration:function(l,f){var o=this._styleMap[l];l=o.line,f=o.offset+f,delete this.styles[l][f]},_getLineStyle:function(l){var f=this._styleMap[l];return!!this.styles[f.line]},_setLineStyle:function(l){var f=this._styleMap[l];this.styles[f.line]={}},_wrapText:function(l,f){var o=[],c;for(this.isWrapping=!0,c=0;c<l.length;c++)o=o.concat(this._wrapLine(l[c],c,f));return this.isWrapping=!1,o},_measureWord:function(l,f,o){var c=0,u,g=!0;o=o||0;for(var y=0,x=l.length;y<x;y++){var w=this._getGraphemeBox(l[y],f,y+o,u,g);c+=w.kernedWidth,u=l[y]}return c},_wrapLine:function(l,f,o,K){var u=0,g=this.splitByGrapheme,y=[],x=[],w=g?a.util.string.graphemeSplit(l):l.split(this._wordJoiners),C="",j=0,T=g?"":" ",M=0,E=0,A=0,R=!0,H=this._getWidthOfCharSpacing(),K=K||0;w.length===0&&w.push([]),o-=K;for(var X=0;X<w.length;X++)C=g?w[X]:a.util.string.graphemeSplit(w[X]),M=this._measureWord(C,f,j),j+=C.length,u+=E+M-H,u>o&&!R?(y.push(x),x=[],u=M,R=!0):u+=H,!R&&!g&&x.push(T),x=x.concat(C),E=g?0:this._measureWord([T],f,j),j++,R=!1,M>A&&(A=M);return X&&y.push(x),A+K>this.dynamicMinWidth&&(this.dynamicMinWidth=A-H+K),y},isEndOfWrapping:function(l){return!this._styleMap[l+1]||this._styleMap[l+1].line!==this._styleMap[l].line},missingNewlineOffset:function(l){return this.splitByGrapheme?this.isEndOfWrapping(l)?1:0:1},_splitTextIntoLines:function(l){for(var f=a.Text.prototype._splitTextIntoLines.call(this,l),o=this._wrapText(f.lines,this.width),c=new Array(o.length),u=0;u<o.length;u++)c[u]=o[u].join("");return f.lines=c,f.graphemeLines=o,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var l={};for(var f in this._styleMap)this._textLines[f]&&(l[this._styleMap[f].line]=1);for(var f in this.styles)l[f]||delete this.styles[f]},toObject:function(l){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(l))}}),a.Textbox.fromObject=function(l,f){var o=a.util.stylesFromArray(l.styles,l.text),c=Object.assign({},l,{styles:o});return a.Object._fromObject("Textbox",c,f,"text")}}(e),function(){var d=t.controlsUtils,a=d.scaleSkewCursorStyleHandler,l=d.scaleCursorStyleHandler,f=d.scalingEqually,o=d.scalingYOrSkewingX,c=d.scalingXOrSkewingY,u=d.scaleOrSkewActionName,g=t.Object.prototype.controls;if(g.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:a,actionHandler:c,getActionName:u}),g.mr=new t.Control({x:.5,y:0,cursorStyleHandler:a,actionHandler:c,getActionName:u}),g.mb=new t.Control({x:0,y:.5,cursorStyleHandler:a,actionHandler:o,getActionName:u}),g.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:a,actionHandler:o,getActionName:u}),g.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:l,actionHandler:f}),g.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:l,actionHandler:f}),g.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:l,actionHandler:f}),g.br=new t.Control({x:.5,y:.5,cursorStyleHandler:l,actionHandler:f}),g.mtr=new t.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var y=t.Textbox.prototype.controls={};y.mtr=g.mtr,y.tr=g.tr,y.br=g.br,y.tl=g.tl,y.bl=g.bl,y.mt=g.mt,y.mb=g.mb,y.mr=new t.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:a,actionName:"resizing"}),y.ml=new t.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:a,actionName:"resizing"})}}()}(lf)),lf}var Ve=yR();const YS=N.createContext(),bR=()=>{const e=N.useContext(YS);if(!e)throw new Error("useLayer must be used within LayerProvider");return e},vR=({children:e})=>{const[t,r]=N.useState([]),[s,p]=N.useState(null),b=N.useRef(0),S=N.useCallback((A,R="default",H={})=>{const K={id:`layer-${b.current++}`,name:A,type:R,visible:!0,opacity:H.opacity!==void 0?H.opacity:100,locked:!1,objects:[],metadata:H.metadata||{},createdAt:new Date().toISOString(),zIndex:t.length};return r(X=>[...X,K]),p(K.id),K},[t.length]),d=N.useCallback(A=>{r(R=>R.filter(H=>H.id!==A)),s===A&&p(R=>{const H=t.filter(K=>K.id!==A);return H.length>0?H[H.length-1].id:null})},[s,t]),a=N.useCallback((A,R)=>{r(H=>H.map(K=>K.id===A?{...K,...R}:K))},[]),l=N.useCallback(A=>{r(R=>R.map(H=>H.id===A?{...H,visible:!H.visible}:H))},[]),f=N.useCallback((A,R)=>{r(H=>H.map(K=>K.id===A?{...K,opacity:Math.max(0,Math.min(100,R))}:K))},[]),o=N.useCallback(A=>{r(R=>R.map(H=>H.id===A?{...H,locked:!H.locked}:H))},[]),c=N.useCallback((A,R)=>{r(H=>{const K=Array.from(H),[X]=K.splice(A,1);return K.splice(R,0,X),K.map((ne,de)=>({...ne,zIndex:de}))})},[]),u=N.useCallback(A=>{r(R=>{const H=R.findIndex(K=>K.id===A);if(H<R.length-1){const K=Array.from(R);return[K[H],K[H+1]]=[K[H+1],K[H]],K.map((X,ne)=>({...X,zIndex:ne}))}return R})},[]),g=N.useCallback(A=>{r(R=>{const H=R.findIndex(K=>K.id===A);if(H>0){const K=Array.from(R);return[K[H],K[H-1]]=[K[H-1],K[H]],K.map((X,ne)=>({...X,zIndex:ne}))}return R})},[]),y=N.useCallback((A,R)=>{r(H=>H.map(K=>K.id===A?{...K,objects:[...K.objects,R]}:K)),R&&(R.layerId=A)},[]),x=N.useCallback((A,R)=>{r(H=>H.map(K=>K.id===A?{...K,objects:K.objects.filter(X=>X!==R)}:K))},[]),w=N.useCallback(A=>t.find(R=>R.id===A),[t]),C=N.useCallback(()=>t.find(A=>A.id===s),[t,s]),j=N.useCallback(A=>{const R=w(A);if(R)return S(`${R.name} Copy`,R.type,{opacity:R.opacity,metadata:{...R.metadata}})},[w,S]),T=N.useCallback(()=>{r([]),p(null)},[]),M=N.useCallback(A=>{const R=t.filter(X=>A.includes(X.id));if(R.length<2)return;const H=R.flatMap(X=>X.objects),K=S("Merged Layer","merged",{opacity:100,metadata:{mergedFrom:A}});return H.forEach(X=>{y(K.id,X)}),A.forEach(X=>d(X)),K},[t,S,y,d]),E={layers:t,activeLayerId:s,setActiveLayerId:p,createLayer:S,deleteLayer:d,updateLayer:a,toggleLayerVisibility:l,setLayerOpacity:f,toggleLayerLock:o,reorderLayers:c,moveLayerUp:u,moveLayerDown:g,addObjectToLayer:y,removeObjectFromLayer:x,getLayerById:w,getActiveLayer:C,duplicateLayer:j,clearLayers:T,mergeLayers:M};return h.jsx(YS.Provider,{value:E,children:e})},tg=(e,t,r,s)=>{const{createLayer:p,getActiveLayer:b,addObjectToLayer:S,removeObjectFromLayer:d,layers:a,setActiveLayerId:l}=bR(),f=N.useRef(null);N.useEffect(()=>{if(s&&!f.current){const y=a.find(x=>x.type===t&&x.objects.length===0);if(y)f.current=y,l(y.id);else{const x=p(e,t,{metadata:{createdBy:e}});f.current=x}}},[s,e,t,p,a,l]);const o=N.useCallback(y=>{const x=f.current||b();if(x&&y&&(S(x.id,y),y.set({opacity:x.opacity/100,visible:x.visible,layerId:x.id}),r)){const w=()=>{const C=a.find(j=>j.id===x.id);C&&y&&(y.set({opacity:C.opacity/100,visible:C.visible}),r.renderAll())};y._layerUpdateFn=w}},[S,b,a,r]),c=N.useCallback(y=>{const x=f.current||b();x&&y&&(d(x.id,y),y._layerUpdateFn&&delete y._layerUpdateFn)},[d,b]),u=N.useCallback(()=>f.current||b(),[b]),g=N.useCallback(()=>{const y=u();if(!(!y||!r))try{y.objects.forEach(x=>{x&&x.set({opacity:y.opacity/100,visible:y.visible,selectable:!y.locked,evented:!y.locked})}),r.getContext&&r.getContext("2d")&&r.renderAll()}catch(x){console.warn("Error syncing layer to objects:",x)}},[u,r]);return N.useEffect(()=>{g()},[a,g]),N.useEffect(()=>{s||(f.current=null)},[s]),{currentLayer:f.current,addToLayer:o,removeFromLayer:c,getCurrentLayer:u,syncLayerToObjects:g}},wR=({canvas:e,isActive:t,brushColor:r="#ff0000",brushWidth:s=5})=>{const p=N.useRef(null),{addToLayer:b,getCurrentLayer:S}=tg("Brush","brush",e,t);return Le.useEffect(()=>{var d;if(e&&t){p.current=new Ve.fabric.PencilBrush(e),p.current.width=s,p.current.color=r,e.isDrawingMode=!0,e.freeDrawingBrush=p.current,e.contextTop&&(e.contextTop.globalCompositeOperation="source-over");const a=l=>{var f;l.path&&(b(l.path),console.log(" Brush stroke added to layer:",(f=S())==null?void 0:f.name))};return e.on("path:created",a),console.log(" Brush tool activated with layer:",(d=S())==null?void 0:d.name),()=>{e.off("path:created",a)}}},[e,t,r,s,b,S]),Le.useEffect(()=>{e&&!t&&(e.isDrawingMode=!1,console.log(" Brush tool deactivated"))},[e,t]),h.jsxs("div",{className:"brush-tool",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Brush Tool - Draw freely"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs",children:"Color:"}),h.jsx("input",{type:"color",value:r,onChange:d=>{p.current&&(p.current.color=d.target.value)},className:"w-8 h-6 rounded border"}),h.jsx("label",{className:"text-xs",children:"Width:"}),h.jsx("input",{type:"range",min:"1",max:"20",value:s,onChange:d=>{p.current&&(p.current.width=parseInt(d.target.value))},className:"w-20"}),h.jsxs("span",{className:"text-xs",children:[s,"px"]})]})]})};N.forwardRef(({canvas:e,isActive:t},r)=>{const[s,p]=Le.useState(20),[b,S]=Le.useState(!1),d=N.useRef(!1),a=N.useRef(null);return N.useImperativeHandle(r,()=>({togglePanel:()=>S(l=>!l),showPanel:()=>S(!0),hidePanel:()=>S(!1)})),Le.useEffect(()=>{if(e&&t){e.isDrawingMode=!1,e.selection=!1,e.defaultCursor="none",e.hoverCursor="none";const l=C=>{d.current=!0;const j=e.getPointer(C.e);x(j),g(j)},f=C=>{const j=e.getPointer(C.e);x(j),d.current&&g(j)},o=()=>{d.current=!1},c=C=>{const j=e.getPointer(C.e);x(j)},u=()=>{d.current=!1,w()},g=C=>{const j=e.getObjects(),T=[];j.forEach(M=>{M===e.backgroundImage||M===a.current||y(M,C,s/2)&&T.push(M)}),T.forEach(M=>{e.remove(M)}),T.length>0&&e.renderAll()},y=(C,j,T)=>{const M=C.getBoundingRect(),E=M.left+M.width/2,A=M.top+M.height/2,R=Math.sqrt(Math.pow(j.x-E,2)+Math.pow(j.y-A,2)),H=Math.max(M.width,M.height)/2;return R<T+H},x=C=>{a.current?(a.current.set({left:C.x,top:C.y,radius:s/2}),a.current.setCoords()):(a.current=new Ve.fabric.Circle({left:C.x,top:C.y,radius:s/2,fill:"transparent",stroke:"#ff0000",strokeWidth:2,strokeDashArray:[5,5],selectable:!1,evented:!1,excludeFromExport:!0,originX:"center",originY:"center"}),e.add(a.current)),e.bringToFront(a.current),e.requestRenderAll()},w=()=>{a.current&&(e.remove(a.current),a.current=null,e.renderAll())};return e.on("mouse:down",l),e.on("mouse:move",f),e.on("mouse:up",o),e.on("mouse:over",c),e.on("mouse:leave",u),console.log(" Eraser tool activated"),()=>{e.off("mouse:down",l),e.off("mouse:move",f),e.off("mouse:up",o),e.off("mouse:over",c),e.off("mouse:leave",u),w()}}else e&&!t&&(e.isDrawingMode=!1,e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",a.current&&(e.remove(a.current),a.current=null,e.renderAll()),console.log(" Eraser tool deactivated"))},[e,t,s]),h.jsx("div",{className:"eraser-tool p-3 border-t border-gray-200",children:b?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Eraser Tool"}),h.jsx("button",{onClick:()=>S(!1),className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:""})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Size: ",s,"px"]}),h.jsx("input",{type:"range",min:"10",max:"100",value:s,onChange:l=>{p(parseInt(l.target.value))},className:"w-full"})]}),h.jsx("div",{className:"mb-3 flex justify-center",children:h.jsx("div",{className:"border-2 border-dashed border-red-400 rounded-full bg-red-50",style:{width:`${Math.min(s,60)}px`,height:`${Math.min(s,60)}px`}})}),h.jsx("button",{onClick:()=>{e&&(e.getObjects().slice().forEach(f=>{f!==e.backgroundImage&&e.remove(f)}),e.renderAll(),console.log(" All objects cleared"))},className:"w-full px-3 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"Clear All"})]}):h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Eraser Active"}),h.jsx("button",{onClick:()=>S(!0),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Settings"})]})})});const SR=({canvas:e,isActive:t,lineColor:r="#ff0000",lineWidth:s=2})=>{const p=N.useRef(!1),b=N.useRef(null),S=N.useCallback(l=>{if(!e||!t)return;const f=e.getPointer(l.e),o=new Ve.fabric.Line([f.x,f.y,f.x,f.y],{stroke:r,strokeWidth:s,selectable:!0,evented:!0});e.add(o),e.setActiveObject(o),b.current=o,p.current=!0,console.log(" Line started at:",f)},[e,t,r,s]),d=N.useCallback(l=>{if(!e||!t||!p.current||!b.current)return;const f=e.getPointer(l.e);b.current.set({x2:f.x,y2:f.y}),e.renderAll()},[e,t]),a=N.useCallback(()=>{!e||!t||(p.current=!1,b.current=null,console.log(" Line finished"))},[e,t]);return Le.useEffect(()=>{if(e&&t)return e.isDrawingMode=!1,e.selection=!1,e.on("mouse:down",S),e.on("mouse:move",d),e.on("mouse:up",a),()=>{e.off("mouse:down",S),e.off("mouse:move",d),e.off("mouse:up",a)}},[e,t,S,d,a]),Le.useEffect(()=>{e&&!t&&(e.selection=!0,console.log(" Line tool deactivated"))},[e,t]),h.jsxs("div",{className:"line-tool",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Line Tool - Click and drag to draw lines"}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs",children:"Color:"}),h.jsx("input",{type:"color",value:r,onChange:l=>{},className:"w-8 h-6 rounded border"}),h.jsx("label",{className:"text-xs",children:"Width:"}),h.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:l=>{},className:"w-20"}),h.jsxs("span",{className:"text-xs",children:[s,"px"]})]})]})},CR=({canvas:e,isActive:t})=>{const r=N.useRef(!1),s=N.useRef(null),p=N.useCallback(d=>{if(!e||!t)return;const a=e.getPointer(d.e),l=e.findTarget(d.e);l&&l!==e.backgroundImage&&(e.setActiveObject(l),r.current=!0,s.current=a,console.log(" Moving object:",l.type))},[e,t]),b=N.useCallback(d=>{if(!e||!t||!r.current)return;const a=e.getPointer(d.e),l=e.getActiveObject();if(l){const f=a.x-s.current.x,o=a.y-s.current.y;l.set({left:l.left+f,top:l.top+o}),e.renderAll(),s.current=a}},[e,t]),S=N.useCallback(()=>{!e||!t||(r.current=!1,s.current=null,console.log(" Move finished"))},[e,t]);return Le.useEffect(()=>{if(e&&t)return e.isDrawingMode=!1,e.selection=!0,e.on("mouse:down",p),e.on("mouse:move",b),e.on("mouse:up",S),()=>{e.off("mouse:down",p),e.off("mouse:move",b),e.off("mouse:up",S)}},[e,t,p,b,S]),Le.useEffect(()=>{e&&!t&&console.log(" Move tool deactivated")},[e,t]),h.jsxs("div",{className:"move-tool",children:[h.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Move Tool - Click and drag to move objects"}),h.jsx("div",{className:"text-xs text-gray-500",children:"Click on any object to select and move it"})]})},kR=N.forwardRef(({canvas:e,isActive:t,onClose:r},s)=>{const[p,b]=N.useState(!1),[S,d]=N.useState(!1),[a,l]=N.useState("free"),[f,o]=N.useState(!1),[c,u]=N.useState(null),[g,y]=N.useState(null),[x,w]=N.useState(!1),C=N.useRef(null),j=N.useRef([]),T=N.useCallback(()=>{if(!(e!=null&&e.backgroundImage))return;const q=e.backgroundImage,P=q._element||q._originalElement;if(!P)return;const $=e.getObjects().filter(V=>!V.excludeFromExport).map(V=>({object:V,left:V.left,top:V.top,path:V.path?JSON.parse(JSON.stringify(V.path)):null}));y({src:P.src,canvasWidth:e.width,canvasHeight:e.height,imageScaleX:q.scaleX,imageScaleY:q.scaleY,imageLeft:q.left,imageTop:q.top,objectsState:$}),w(!0)},[e]),M=N.useCallback(()=>{if(!e||!g)return;e.setWidth(g.canvasWidth),e.setHeight(g.canvasHeight);const q=e.getElement();q&&(q.width=g.canvasWidth,q.height=g.canvasHeight,q.style.width=`${g.canvasWidth}px`,q.style.height=`${g.canvasHeight}px`),g.objectsState&&g.objectsState.forEach(P=>{const $=P.object;$.set({left:P.left,top:P.top}),P.path&&$.path&&($.path=JSON.parse(JSON.stringify(P.path)),$.setCoords())}),Ve.fabric.Image.fromURL(g.src,P=>{P.set({left:g.imageLeft,top:g.imageTop,scaleX:g.imageScaleX,scaleY:g.imageScaleY,selectable:!1,evented:!1}),e.setBackgroundImage(P,()=>{e.renderAll(),w(!1),y(null),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:g.canvasWidth,height:g.canvasHeight,canvas:e}}))})})},[e,g]),E=N.useCallback(()=>{C.current&&e&&(j.current.forEach(q=>e.remove(q)),j.current=[],e.remove(C.current),C.current=null,e.renderAll())},[e]),A=N.useCallback(q=>{if(!e)return;const P={left:0,top:0,width:e.width,height:e.height},$=q.width*q.scaleX,V=q.height*q.scaleY,D=[new Ve.fabric.Rect({left:P.left,top:P.top,width:P.width,height:Math.max(0,q.top-P.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:P.left,top:q.top+V,width:P.width,height:Math.max(0,P.height-(q.top+V)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:P.left,top:q.top,width:Math.max(0,q.left-P.left),height:V,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:q.left+$,top:q.top,width:Math.max(0,P.width-(q.left+$)),height:V,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})];D.forEach(O=>e.add(O)),j.current=D},[e]),R=N.useCallback((q,P,$,V)=>{if(!e)return;E(),C.current=new Ve.fabric.Rect({left:q,top:P,width:$,height:V,fill:"transparent",stroke:"#007bff",strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockRotation:!0,borderColor:"#007bff",cornerColor:"#007bff",cornerSize:12,transparentCorners:!1}),e.add(C.current),A(C.current);const D=()=>A(C.current);C.current.on("moving",D),C.current.on("scaling",D),e.setActiveObject(C.current),e.renderAll()},[e,E,A]),H=N.useCallback(()=>{if(!e||!t)return;d(!0),e.isDrawingMode=!1,e.selection=!1,e.defaultCursor="crosshair",e.hoverCursor="crosshair";const q=e.width*.25,P=e.height*.25,$=e.width*.5,V=e.height*.5;R(q,P,$,V)},[e,t,R]),K=N.useCallback(()=>{e&&(d(!1),E(),e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[E,e]),X=N.useCallback(()=>{if(!C.current||!(e!=null&&e.backgroundImage))return;const q=C.current,P=e.backgroundImage,$=P._element||P._originalElement;if(!$)return;T();const V=q.width*q.scaleX,D=q.height*q.scaleY,O=q.left,L=q.top,I=e.getObjects().filter(Z=>!Z.excludeFromExport&&Z!==C.current&&!j.current.includes(Z)),G=$.naturalWidth||$.width,B=$.naturalHeight||$.height,z=G/e.width,te=B/e.height,Q={left:O*z,top:L*te,width:V*z,height:D*te},ue={left:Math.max(0,Math.min(Q.left,G)),top:Math.max(0,Math.min(Q.top,B)),width:Math.min(Q.width,G-Math.max(0,Q.left)),height:Math.min(Q.height,B-Math.max(0,Q.top))},le=document.createElement("canvas");le.width=Math.max(1,Math.round(ue.width)),le.height=Math.max(1,Math.round(ue.height));const ie=le.getContext("2d");ie.imageSmoothingEnabled=!0,ie.imageSmoothingQuality="high",ie.drawImage($,Math.round(ue.left),Math.round(ue.top),Math.round(ue.width),Math.round(ue.height),0,0,Math.round(ue.width),Math.round(ue.height)),Ve.fabric.Image.fromURL(le.toDataURL(),Z=>{const fe=V/2,ae=D/2;Z.set({left:fe,top:ae,originX:"center",originY:"center",scaleX:1,scaleY:1,selectable:!1,evented:!1}),I.forEach(me=>{const be=me.left-O,W=me.top-L;me.set({left:be,top:W}),me.path&&(me.path.forEach(re=>{re.length>1&&(re[1]-=O),re.length>2&&(re[2]-=L),re.length>3&&(re[3]-=O),re.length>4&&(re[4]-=L),re.length>5&&(re[5]-=O),re.length>6&&(re[6]-=L)}),me.setCoords())}),e.setWidth(V),e.setHeight(D);const ce=e.getElement();ce&&(ce.width=V,ce.height=D,ce.style.width=`${V}px`,ce.style.height=`${D}px`),e.setBackgroundImage(Z,()=>{e.renderAll(),K(),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:V,height:D,canvas:e}}))})})},[e,T,K]),ne=N.useCallback(q=>{if(!S||a!=="free"||!e)return;const P=e.getPointer(q.e);o(!0),u(P),E()},[S,a,e,E]),de=N.useCallback(q=>{if(!S||a!=="free"||!f||!c||!e)return;const P=e.getPointer(q.e),$=Math.min(c.x,P.x),V=Math.min(c.y,P.y),D=Math.abs(P.x-c.x),O=Math.abs(P.y-c.y);D>10&&O>10&&(E(),R($,V,D,O))},[S,a,f,c,e,E,R]),se=N.useCallback(q=>{!S||a!=="free"||!f||!e||(o(!1),u(null),C.current&&(C.current.set({selectable:!0,evented:!0}),e.renderAll()))},[S,a,f,e]);return N.useImperativeHandle(s,()=>({togglePanel:()=>b(q=>!q),showPanel:()=>b(!0),hidePanel:()=>b(!1),startCrop:H,cancelCrop:K,undoCrop:M,canUndo:x}),[H,K,M,x]),N.useEffect(()=>{e&&t?H():e&&!t&&C.current&&(d(!1),j.current.forEach(q=>e.remove(q)),j.current=[],e.remove(C.current),C.current=null,e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[e,t,H]),N.useEffect(()=>{if(!(!e||!S))return a==="free"&&(e.on("mouse:down",ne),e.on("mouse:move",de),e.on("mouse:up",se)),()=>{e.off("mouse:down",ne),e.off("mouse:move",de),e.off("mouse:up",se)}},[e,S,a,ne,de,se]),h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!p&&!S?h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(uo,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Tool"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>b(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:14,className:"sm:w-4 sm:h-4"})}),h.jsx(Me.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):S?h.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx(Me.div,{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:h.jsx(uo,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-primary",children:"Crop Active"})]}),h.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[x&&h.jsx(Me.button,{onClick:M,className:"p-2 sm:p-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Undo Last Crop",children:h.jsx(jy,{size:14,className:"sm:w-4 sm:h-4"})}),h.jsx(Me.button,{onClick:X,className:"p-2 sm:p-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-green-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Apply Crop",children:h.jsx(YT,{size:14,className:"sm:w-4 sm:h-4"})}),h.jsx(Me.button,{onClick:K,className:"p-2 sm:p-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-red-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Cancel",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),h.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:h.jsx("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:" Click and drag to draw crop area, then adjust as needed. Click  to apply or  to cancel."})})]}):h.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(uo,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Settings"})]}),h.jsx(Me.button,{onClick:()=>b(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 shadow-sm hover:shadow-md",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[h.jsxs(Me.button,{onClick:H,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[h.jsx(uo,{size:16,className:"sm:w-4 sm:h-5"}),h.jsx("span",{children:"Start Crop"})]}),x&&h.jsxs(Me.button,{onClick:M,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[h.jsx(jy,{size:16,className:"sm:w-4 sm:h-5"}),h.jsx("span",{children:"Undo Last Crop"})]})]})]})})}),jR=N.forwardRef(({canvas:e,isActive:t,onClose:r},s)=>{const[p,b]=N.useState(!1),[S,d]=N.useState(100),[a,l]=N.useState(!1),[f,o]=N.useState(null),[c,u]=N.useState(null),g=[25,50,75,100,125,150,200,300,400,500],y=N.useCallback(()=>{e&&u({zoom:e.getZoom(),viewportTransform:e.viewportTransform.slice()})},[e]),x=N.useCallback(()=>{e&&(y(),e.setViewportTransform([1,0,0,1,0,0]),e.setZoom(1),d(100),e.renderAll())},[e,y]),w=N.useCallback(()=>{if(!e)return;y();const X=e.getZoom(),ne=Math.min(X*1.2,5);e.setZoom(ne),d(Math.round(ne*100)),e.renderAll()},[e,y]),C=N.useCallback(()=>{if(!e)return;y();const X=e.getZoom(),ne=Math.max(X/1.2,.1);e.setZoom(ne),d(Math.round(ne*100)),e.renderAll()},[e,y]),j=N.useCallback(X=>{if(!e)return;y();const ne=X/100;e.setZoom(ne),d(X),e.renderAll()},[e,y]),T=N.useCallback(()=>{e&&(l(!0),e.defaultCursor="grab",e.hoverCursor="grab",e.selection=!1,e.isDrawingMode=!1,y())},[e,y]),M=N.useCallback(()=>{e&&(l(!1),e.defaultCursor="default",e.hoverCursor="move",e.selection=!0)},[e]),E=N.useCallback(X=>{if(!a||!e)return;const ne=e.getPointer(X.e);o(ne),e.defaultCursor="grabbing"},[a,e]),A=N.useCallback(X=>{if(!a||!f||!e)return;const ne=e.getPointer(X.e),de=ne.x-f.x,se=ne.y-f.y,q=e.viewportTransform.slice();q[4]+=de,q[5]+=se,e.setViewportTransform(q),e.renderAll(),o(ne)},[a,f,e]),R=N.useCallback(()=>{a&&(o(null),e.defaultCursor="grab")},[a,e]),H=N.useCallback(X=>{if(!e)return;X.preventDefault();const ne=X.deltaY,de=e.getZoom(),se=Math.max(.1,Math.min(5,de-ne*.001));y(),e.setZoom(se),d(Math.round(se*100)),e.renderAll()},[e,y]),K=N.useCallback(()=>{!e||!c||(e.setZoom(c.zoom),e.setViewportTransform(c.viewportTransform),d(Math.round(c.zoom*100)),e.renderAll())},[e,c]);return N.useImperativeHandle(s,()=>({togglePanel:()=>b(X=>!X),showPanel:()=>b(!0),hidePanel:()=>b(!1),zoomIn:w,zoomOut:C,resetZoom:x,setZoom:j,startPan:T,stopPan:M,undoZoom:K,canUndo:!!c}),[w,C,x,j,T,M,K,c]),N.useEffect(()=>{if(!(!e||!a))return e.on("mouse:down",E),e.on("mouse:move",A),e.on("mouse:up",R),()=>{e.off("mouse:down",E),e.off("mouse:move",A),e.off("mouse:up",R)}},[e,a,E,A,R]),N.useEffect(()=>{if(e)return e.on("mouse:wheel",H),()=>{e.off("mouse:wheel",H)}},[e,H]),N.useEffect(()=>{if(!e)return;const X=()=>{x()};return e.on("mouse:dblclick",X),()=>{e.off("mouse:dblclick",X)}},[e,x]),N.useEffect(()=>{if(!e)return;const X=()=>{const ne=e.getZoom();d(Math.round(ne*100))};return e.on("mouse:wheel",X),()=>{e.off("mouse:wheel",X)}},[e]),h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!p&&!a?h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(ho,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Zoom Tool"}),h.jsxs("span",{className:"text-xs bg-accent dark:bg-background-primary px-2 py-0.5 rounded-lg text-accent-dark font-semibold",children:[S,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>b(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:14,className:"sm:w-4 sm:h-4"})}),h.jsx(Me.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):a?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-md",children:h.jsx(_c,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Pan Mode"})]}),h.jsx(Me.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsx(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl border border-orange-500",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(_c,{size:18,className:"animate-pulse"}),h.jsx("p",{className:"text-sm font-semibold",children:"Click and drag to pan..."})]})}),h.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:h.jsxs("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:[h.jsx("strong",{children:"Click and drag"})," to pan around the canvas.",h.jsx("br",{}),h.jsx("strong",{children:"Mouse wheel"})," to zoom in/out.",h.jsx("br",{}),h.jsx("strong",{children:"Double-click"})," to fit to screen."]})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Me.button,{onClick:C,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[h.jsx(My,{size:12}),h.jsx("span",{children:"Out"})]}),h.jsxs(Me.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[h.jsx(ho,{size:12}),h.jsx("span",{children:"In"})]}),h.jsxs(Me.button,{onClick:x,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[h.jsx(Mo,{size:12}),h.jsx("span",{children:"Fit"})]})]})]}):h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(ho,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Zoom & Pan Controls"})]}),h.jsx(Me.button,{onClick:()=>b(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsx("div",{className:"bg-accent dark:bg-background-primary border border-border rounded-xl p-3 sm:p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-medium text-text",children:"Current Zoom"}),h.jsxs("span",{className:"text-lg sm:text-xl font-bold text-primary",children:[S,"%"]})]})}),h.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Me.button,{onClick:C,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-md hover:shadow-lg shadow-gray-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[h.jsx(My,{size:16}),h.jsx("span",{children:"Zoom Out"})]}),h.jsxs(Me.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[h.jsx(ho,{size:16}),h.jsx("span",{children:"Zoom In"})]})]}),h.jsxs(Me.button,{onClick:x,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(Mo,{size:16}),h.jsx("span",{children:"Fit to Screen"})]}),h.jsxs(Me.button,{onClick:T,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(_c,{size:16}),h.jsx("span",{children:"Pan Mode"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"block text-sm font-semibold text-text",children:"Quick Zoom"}),h.jsx("div",{className:"grid grid-cols-5 gap-1",children:g.map(X=>h.jsxs(Me.button,{onClick:()=>j(X),className:`px-2 py-1.5 text-xs rounded-lg font-semibold shadow-sm ${S===X?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[X,"%"]},X))})]}),c&&h.jsxs(Me.button,{onClick:K,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(ai,{size:16}),h.jsx("span",{children:"Undo Last Zoom"})]}),h.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(ea,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),h.jsxs("div",{className:"text-sm text-text",children:[h.jsx("p",{className:"font-semibold mb-1",children:"Tips:"}),h.jsxs("ul",{className:"space-y-1 leading-relaxed",children:[h.jsx("li",{children:" Use mouse wheel to zoom in/out"}),h.jsx("li",{children:" Hold Space + drag to pan"}),h.jsx("li",{children:" Double-click to fit to screen"})]})]})]})})]})})}),Wf=({canvas:e,isActive:t=!1,onToolChange:r,onSettingsChange:s,onClose:p,initialSettings:b={}})=>{const[S,d]=N.useState({size:15,minSize:5,maxSize:100,opacity:.8,shape:"circle",pressure:!0,preview:!0,smoothing:.7,hardness:.8,spacing:.25,flow:1,dynamics:!0,antiAliasing:!0,blendMode:"destination-out",...b}),[a,l]=N.useState(!1),[f,o]=N.useState(!1),[c,u]=N.useState(!1),[g,y]=N.useState(null),[x,w]=N.useState([]),[C,j]=N.useState(1),[T,M]=N.useState(0),[E,A]=N.useState([]),[R,H]=N.useState(!1),[K,X]=N.useState({totalErased:0,sessionTime:0,undoCount:0});N.useRef({x:0,y:0});const ne=N.useRef(null);N.useRef([]);const de=N.useRef([]);N.useRef([]);const se=N.useRef(!1);N.useRef(1),N.useRef({x:0,y:0}),N.useRef(0),N.useRef(null),N.useRef(null),N.useRef(Date.now());const q=N.useRef(null);Gb(1),Gb(.8);const P=N.useMemo(()=>{let Q=S.size;if(S.pressure&&(Q*=.3+C*.7),S.dynamics&&T>0){const ue=Math.min(T/1e3,1);Q*=1-ue*.3}return Math.max(S.minSize,Math.min(S.maxSize,Q))},[S.size,S.pressure,S.dynamics,S.minSize,S.maxSize,C,T]),$=N.useCallback(Q=>{var le,ie,Z,fe;if(!e||!t)return;(ie=(le=Q.e)==null?void 0:le.preventDefault)==null||ie.call(le),(fe=(Z=Q.e)==null?void 0:Z.stopPropagation)==null||fe.call(Z),e.discardActiveObject();const ue=e.getPointer(Q.e);se.current=!0,u(!0),ne.current=ue,console.log(`

 =============== MOUSE DOWN - ERASING STARTED ===============`),console.log(" Mouse down at:",ue),console.log(" Canvas objects count:",e.getObjects().length),console.log(" isMouseDownRef.current:",se.current),I(ue)},[e,t]),V=N.useCallback(Q=>{if(!e||!t)return;const ue=e.getPointer(Q.e);y(ue);const le=e.contextTop;le&&(le.save(),le.clearRect(0,0,e.width,e.height),le.strokeStyle="#ff0000",le.lineWidth=2,le.setLineDash([5,5]),le.beginPath(),le.arc(ue.x,ue.y,S.size/2,0,Math.PI*2),le.stroke(),le.restore()),se.current?(console.log(" MOUSE MOVE (dragging) at:",ue,"| isMouseDown:",se.current),I(ue)):console.log(" MOUSE MOVE (hover) at:",ue,"| isMouseDown:",se.current)},[e,t,S.size]),D=N.useCallback(()=>{!e||!t||(console.log(" =============== MOUSE UP - ERASING FINISHED ==============="),console.log(" Setting isMouseDownRef.current to false"),se.current=!1,u(!1),ne.current=null,console.log(` Erasing session ended

`))},[e,t]),O=N.useCallback(()=>{y(null),se.current&&D()},[D]),L=N.useCallback((Q,ue,le,ie,Z,fe)=>{const ae=Q-le,ce=ue-ie,me=Z-le,be=fe-ie,W=ae*me+ce*be,re=me*me+be*be;let ge=-1;re!==0&&(ge=W/re);let Y,ee;ge<0?(Y=le,ee=ie):ge>1?(Y=Z,ee=fe):(Y=le+ge*me,ee=ie+ge*be);const J=Q-Y,xe=ue-ee;return Math.sqrt(J*J+xe*xe)},[]),I=N.useCallback(Q=>{if(!e)return;console.log(`
 ==================== PERFORM ERASE ACTION ====================`),console.log(" Eraser position:",Q),console.log(" Eraser size:",S.size),console.log(" Tolerance:",8);const ue=e.getObjects(),le=[],ie=8;if(console.log(" Total objects on canvas:",ue.length),ue.length===0){console.log(" No objects on canvas to erase!");return}ue.forEach((Z,fe)=>{var ce;if(Z===e.backgroundImage||Z._isPreview){console.log(`Object ${fe}: SKIPPED (background/preview)`);return}let ae=!1;if(console.log(`
--- Object ${fe} ---`),console.log("Object type:",Z.type),console.log("Object position - left:",Z.left,"top:",Z.top),console.log("Stroke width:",Z.strokeWidth),Z.type==="line"){const me=Z.x1+Z.left,be=Z.y1+Z.top,W=Z.x2+Z.left,re=Z.y2+Z.top;console.log("Line endpoints:",{x1:me,y1:be,x2:W,y2:re});const ge=L(Q.x,Q.y,me,be,W,re),ee=(Z.strokeWidth||1)/2+ie;console.log("Distance to line:",ge.toFixed(2),"Threshold:",ee.toFixed(2)),ge<=ee?(ae=!0,console.log(" WILL ERASE - within threshold")):console.log(" NO ERASE - too far from line")}else if(Z.type==="path"){if(console.log(" PATH OBJECT FOUND"),console.log("   Path points count:",((ce=Z.path)==null?void 0:ce.length)||0),console.log("   Stroke color:",Z.stroke),console.log("   Stroke width:",Z.strokeWidth),Z.path&&Z.path.length>0){const be=(Z.strokeWidth||1)/2+ie;console.log("    Threshold for hit detection:",be.toFixed(2),"px"),console.log("    First 5 path points:",Z.path.slice(0,5).map((Y,ee)=>{var J,xe;return`[${ee}]: [${(J=Y[1])==null?void 0:J.toFixed(1)}, ${(xe=Y[2])==null?void 0:xe.toFixed(1)}]`}).join(", "));let W=1/0,re=null,ge=[];for(let Y=0;Y<Z.path.length;Y++){const ee=Z.path[Y];if(ee.length>=3){const J=ee[1],xe=ee[2],Ce=Math.sqrt(Math.pow(Q.x-J,2)+Math.pow(Q.y-xe,2));if(Ce<W&&(W=Ce,re={px:J,py:xe,index:Y,distance:Ce.toFixed(2)}),Ce<=be&&(ae=!0,ge.push({index:Y,distance:Ce.toFixed(2)})),Y>0&&Z.path[Y-1].length>=3){const ke=Z.path[Y-1][1],Ne=Z.path[Y-1][2],Oe=L(Q.x,Q.y,ke,Ne,J,xe);Oe<W&&(W=Oe,re={px:J,py:xe,index:Y,distance:Oe.toFixed(2),type:"line-segment"}),Oe<=be&&(ae=!0,ge.push({index:`${Y-1}-${Y}`,distance:Oe.toFixed(2),type:"line"}))}}}ae?(console.log(`    HIT DETECTED! - Hit ${ge.length} points/segments:`,ge),console.log("    Instead of partial erase, removing entire object for now..."),ae=!0,console.log("    Marking object for complete removal")):console.log(`    NO HIT - Closest distance: ${W.toFixed(2)}px at`,re)}}else{const me=Z.getBoundingRect();if(Q.x>=me.left-ie&&Q.x<=me.left+me.width+ie&&Q.y>=me.top-ie&&Q.y<=me.top+me.height+ie)if(Z.containsPoint){const be=new Ve.fabric.Point(Q.x,Q.y);ae=Z.containsPoint(be)}else ae=!0}ae&&(console.log(" Adding to removal list"),le.push(Z))}),console.log(`
 ========== SUMMARY ==========`),console.log("Objects marked for complete removal:",le.length),le.length>0?(le.forEach((Z,fe)=>{console.log(`    Removing object ${fe}:`,Z.type),e.remove(Z)}),e.requestRenderAll(),console.log(" Successfully removed",le.length,"objects")):console.log(" No objects marked for complete removal"),console.log(" Final canvas objects count:",e.getObjects().length),console.log(`======================================================
`)},[e,P,L,S.size]),G=N.useCallback(Q=>{d(ue=>{const le={...ue,...Q};return s==null||s(le),le})},[s]);N.useCallback(()=>{if(de.current.length>0){const Q=de.current.pop();e.loadFromJSON(Q,()=>{e.renderAll(),console.log(" Undo  ")})}},[e]);const B=N.useCallback(()=>{if(!e)return;const Q=JSON.stringify(e.toJSON());de.current.push(Q),e.getObjects().forEach(le=>{le!==e.backgroundImage&&e.remove(le)}),e.renderAll(),w([]),console.log("  objects  ")},[e]),z=N.useCallback(()=>{if(!e||!g)return;const Q=e.contextTop;Q&&(Q.save(),Q.clearRect(0,0,e.width,e.height),Q.strokeStyle="#ff0000",Q.lineWidth=2,Q.setLineDash([5,5]),Q.beginPath(),Q.arc(g.x,g.y,P/2,0,Math.PI*2),Q.stroke(),Q.restore())},[e,g,P]),te=N.useRef({handleMouseDown:null,handleMouseMove:null,handleMouseUp:null,handleMouseLeave:null});return N.useEffect(()=>{te.current.handleMouseDown=$,te.current.handleMouseMove=V,te.current.handleMouseUp=D,te.current.handleMouseLeave=O}),N.useEffect(()=>{if(!e||!t)return;e.discardActiveObject(),e.renderAll();const Q=Z=>{var fe,ae;return(ae=(fe=te.current).handleMouseDown)==null?void 0:ae.call(fe,Z)},ue=Z=>{var fe,ae;return(ae=(fe=te.current).handleMouseMove)==null?void 0:ae.call(fe,Z)},le=Z=>{var fe,ae;return(ae=(fe=te.current).handleMouseUp)==null?void 0:ae.call(fe,Z)},ie=Z=>{var fe,ae;return(ae=(fe=te.current).handleMouseLeave)==null?void 0:ae.call(fe,Z)};return e.on("mouse:down",Q),e.on("mouse:move",ue),e.on("mouse:up",le),e.on("mouse:leave",ie),()=>{e.off("mouse:down",Q),e.off("mouse:move",ue),e.off("mouse:up",le),e.off("mouse:leave",ie)}},[e,t]),N.useEffect(()=>{z()},[z]),N.useEffect(()=>{e&&t?(e.defaultCursor="crosshair",e.hoverCursor="crosshair",e.isDrawingMode=!1,e.selection=!1,e.renderAll()):e&&!t&&(e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[e,t]),N.useEffect(()=>{if(e&&!t){const Q=e.contextTop;Q&&Q.clearRect(0,0,e.width,e.height)}},[e,t]),N.useEffect(()=>{const Q=ue=>{q.current&&!q.current.contains(ue.target)&&l(!1)};return document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[a]),h.jsx(Me.div,{ref:q,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:f?h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:h.jsx(yf,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Eraser Tool"})]}),h.jsx(Me.button,{onClick:()=>o(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("label",{className:"text-sm font-semibold text-text",children:"Size"}),h.jsxs("span",{className:"text-xs text-text-muted",children:[P,"px"]})]}),h.jsx("input",{type:"range",min:S.minSize,max:S.maxSize,value:S.size,onChange:Q=>G({size:parseInt(Q.target.value)}),className:"w-full h-2 bg-accent rounded-lg appearance-none cursor-pointer slider"}),h.jsxs("div",{className:"flex justify-between text-xs text-text-muted mt-1",children:[h.jsxs("span",{children:[S.minSize,"px"]}),h.jsxs("span",{children:[S.maxSize,"px"]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Shape"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"circle",label:"Circle",icon:_o},{value:"square",label:"Square",icon:cr},{value:"line",label:"Line",icon:Vr}].map(({value:Q,label:ue,icon:le})=>h.jsxs(Me.button,{onClick:()=>G({shape:Q}),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${S.shape===Q?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[h.jsx(le,{size:18}),h.jsx("span",{className:"text-xs font-semibold",children:ue})]},Q))})]}),h.jsx("div",{className:"flex items-center justify-center bg-accent dark:bg-background-primary rounded-xl border border-border p-4",children:h.jsx("div",{className:`border-2 border-dashed border-red-400 bg-red-100 ${S.shape==="square"?"":"rounded-full"}`,style:{width:`${Math.min(P,60)}px`,height:S.shape==="line"?"4px":`${Math.min(P,60)}px`}})}),h.jsxs(Me.button,{onClick:B,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(ou,{size:18}),h.jsx("span",{children:"Clear All"})]}),x.length>0&&h.jsxs(Me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-xl text-sm text-orange-800 dark:text-orange-300",children:[x.length," objects erased"]})]}):h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:h.jsx(yf,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Eraser Tool"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>o(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:14,className:"sm:w-4 sm:h-4"})}),h.jsx(Me.button,{onClick:p,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]})]})})})};Wf.propTypes={canvas:Je.object,isActive:Je.bool,onToolChange:Je.func,onSettingsChange:Je.func,onClose:Je.func,initialSettings:Je.object};Je.object,Je.object,Je.oneOf(["rectangle","circle","ellipse","polygon"]),Je.bool,Je.shape({color:Je.string,strokeWidth:Je.number,strokeDashArray:Je.array,opacity:Je.number,selectable:Je.bool,evented:Je.bool,extendBeyondROI:Je.bool,showCenter:Je.bool,centerRadius:Je.number,centerColor:Je.string}),Je.func,Je.string;Je.bool.isRequired,Je.func.isRequired,Je.object.isRequired,Je.func.isRequired,Je.string;const GS=N.createContext(),ng=()=>{const e=N.useContext(GS);if(!e)throw new Error("useHistogram must be used within HistogramProvider");return e},TR=({children:e})=>{const[t,r]=N.useState(null),[s,p]=N.useState(null),[b,S]=N.useState("gray"),[d,a]=N.useState(null),[l,f]=N.useState(null),[o,c]=N.useState(null),[u,g]=N.useState(0),[y,x]=N.useState(255),[w,C]=N.useState(8),[j,T]=N.useState(null),[M,E]=N.useState(!1),A=N.useCallback((V,D,O)=>{const I=(O===16?65535:255)+1,G=new Uint16Array(I),B=D-V;for(let z=0;z<I;z++)z<=V?G[z]=0:z>=D?G[z]=255:G[z]=Math.round((z-V)/B*255);return G},[]);N.useEffect(()=>{if(u!==null&&y!==null&&w){const V=A(u,y,w);T(V)}},[u,y,w,A]);const R=N.useCallback((V,D)=>{f(V),c(D);const O=Math.max(0,V-D/2),I=Math.min(w===16?65535:255,V+D/2);g(Math.round(O)),x(Math.round(I))},[w]),H=N.useCallback((V,D)=>{g(V),x(D);const O=(V+D)/2,L=D-V;f(O),c(L)},[]),K=N.useCallback(V=>{C(V);const D=V===16?65535:255;g(0),x(D),f(D/2),c(D)},[]),X=N.useCallback((V,D,O=null,L=8)=>{r(V),p(D),a(O),L!==w&&K(L)},[w,K]),ne=N.useCallback(()=>{r(null),p(null),a(null)},[]),de=N.useCallback(V=>{S(V)},[]),se=N.useCallback(()=>{const V=w===16?65535:255;g(0),x(V),f(V/2),c(V)},[w]),[q,P]=N.useState(null),$=N.useCallback(V=>{P(()=>V)},[]);return N.useEffect(()=>{q&&u!==null&&y!==null&&q(u,y,w)},[u,y,w,q]),h.jsx(GS.Provider,{value:{histogramData:t,selectedPoint:s,currentChannel:b,selectionRegion:d,windowCenter:l,windowWidth:o,minLevel:u,maxLevel:y,bitDepth:w,lut:j,isWindowLevelApplied:M,updateHistogram:X,clearHistogram:ne,changeChannel:de,updateWindowLevel:R,updateLevels:H,updateBitDepth:K,resetLevels:se,registerWindowLevelCallback:$,setIsWindowLevelApplied:E},children:e})},_R=({canvas:e,isActive:t,onClose:r})=>{var q;const[s,p]=N.useState("area"),[b,S]=N.useState(!1),[d,a]=N.useState(null),[l,f]=N.useState(!1),o=N.useRef(null),c=N.useRef([]),{updateHistogram:u}=ng(),{formData:g}=A1(),x=(((q=g==null?void 0:g.initialParameters)==null?void 0:q.bitDepth)||"8-bit")==="16-bit"?16:8,{addToLayer:w,removeFromLayer:C}=tg("Histogram Selection","histogram",e,t),j=N.useCallback((P,$=8)=>{const V=$===16?65536:256,D={red:new Array(V).fill(0),green:new Array(V).fill(0),blue:new Array(V).fill(0),gray:new Array(V).fill(0)};if($===8)for(let O=0;O<P.length;O+=4){const L=P[O],I=P[O+1],G=P[O+2],B=Math.round(.299*L+.587*I+.114*G);D.red[L]++,D.green[I]++,D.blue[G]++,D.gray[B]++}else for(let O=0;O<P.length;O+=8){const L=P[O]|P[O+1]<<8,I=P[O+2]|P[O+3]<<8,G=P[O+4]|P[O+5]<<8,B=Math.round(.299*L+.587*I+.114*G);D.red[L]++,D.green[I]++,D.blue[G]++,D.gray[B]++}return{histogram:D,bitDepth:$}},[]),T=N.useCallback((P,$)=>{if(!e)return null;try{const O=e.getContext("2d").getImageData(P,$,1,1).data;return{r:O[0],g:O[1],b:O[2],a:O[3]}}catch(V){return console.error("Error getting pixel data:",V),null}},[e]),M=N.useCallback(P=>{let $=0,V=0,D=0,O=0;const L=P.data,I=L.length/4;for(let G=0;G<L.length;G+=4)$+=L[G],V+=L[G+1],D+=L[G+2],O+=L[G+3];return{r:Math.round($/I),g:Math.round(V/I),b:Math.round(D/I),a:Math.round(O/I)}},[]),E=N.useCallback(P=>{if(!e)return;const $={left:0,top:0,width:e.width,height:e.height};let V=[];if(P.type==="circle"){const D=new Ve.fabric.Rect({left:$.left,top:$.top,width:$.width,height:$.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),O=new Ve.fabric.Circle({left:P.left,top:P.top,radius:P.radius,fill:"transparent",stroke:"transparent",originX:"center",originY:"center",selectable:!1,evented:!1,excludeFromExport:!0,globalCompositeOperation:"destination-out"});V=[D,O]}else if(P.type==="rect"){const D=P.width*(P.scaleX||1),O=P.height*(P.scaleY||1);V=[new Ve.fabric.Rect({left:$.left,top:$.top,width:$.width,height:Math.max(0,P.top-$.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:$.left,top:P.top+O,width:$.width,height:Math.max(0,$.height-(P.top+O)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:$.left,top:P.top,width:Math.max(0,P.left-$.left),height:O,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ve.fabric.Rect({left:P.left+D,top:P.top,width:Math.max(0,$.width-(P.left+D)),height:O,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]}else P.type==="line"&&(V=[new Ve.fabric.Rect({left:$.left,top:$.top,width:$.width,height:$.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]);V.forEach(D=>e.add(D)),c.current=V},[e]),A=N.useCallback(()=>{if(e)try{c.current.forEach(P=>{P&&(e.remove(P),C(P))}),c.current=[],o.current&&(e.remove(o.current),C(o.current),o.current=null),e.getContext&&e.getContext("2d")&&e.renderAll()}catch(P){console.warn("Error removing selection objects:",P)}},[e,C]),R=N.useCallback(P=>{const $=Math.round(P.x),V=Math.round(P.y);console.log(" Point Selection:"),console.log("  Position:",{x:$,y:V});const D=T($,V);console.log("  Pixel at point:",D);try{const O=e.getContext("2d"),L=50,I=O.getImageData(Math.max(0,$-L),Math.max(0,V-L),Math.min(L*2,e.width-($-L)),Math.min(L*2,e.height-(V-L)));console.log("  Analyzed pixels:",I.data.length/4),console.log("  Area size:",I.width,"x",I.height);const{histogram:G}=j(I.data,x);console.log("  Histogram calculated - Gray channel sample:",G.gray.slice(0,10));const B=new Ve.fabric.Circle({left:$,top:V,radius:L,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,originX:"center",originY:"center",selectable:!1,evented:!1});u(G,{x:$,y:V,pixel:D,mode:"point"},{type:"point",x:$,y:V,radius:L,fabricObject:B},x),A(),o.current=B,e.add(B),w(B),E(B),c.current.forEach(te=>w(te)),e.renderAll()}catch(O){console.error(" Error calculating histogram:",O)}},[e,T,j,u,A,E,w]),H=N.useCallback((P,$,V,D)=>{console.log(" Area Selection:"),console.log("  Start:",{x:P,y:$}),console.log("  End:",{x:V,y:D});try{const O=e.getContext("2d"),L=Math.min(P,V),I=Math.min($,D),G=Math.abs(V-P),B=Math.abs(D-$);console.log("  Rectangle:",{left:L,top:I,width:G,height:B});const z=O.getImageData(L,I,G,B);console.log("  Analyzed pixels:",z.data.length/4);const{histogram:te}=j(z.data,x),Q=M(z);console.log("  Average pixel:",Q),console.log("  Histogram calculated - Gray channel sample:",te.gray.slice(0,10));const ue=new Ve.fabric.Rect({left:L,top:I,width:G,height:B,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),le={type:"area",left:L,top:I,width:G,height:B,fabricObject:ue};u(te,{x:Math.round((P+V)/2),y:Math.round(($+D)/2),pixel:Q,mode:"area",width:G,height:B},le,x),A(),o.current=ue,e.add(ue),w(ue),E(ue),c.current.forEach(ie=>w(ie)),e.renderAll()}catch(O){console.error(" Error calculating histogram:",O)}},[e,j,M,u,A,E,w]),K=N.useCallback((P,$,V,D)=>{console.log(" Line Selection:"),console.log("  Start:",{x:P,y:$}),console.log("  End:",{x:V,y:D});try{const O=e.getContext("2d"),L=[],I=Math.abs(V-P),G=Math.abs(D-$),B=P<V?1:-1,z=$<D?1:-1;let te=I-G,Q=P,ue=$;for(;L.push({x:Q,y:ue}),!(Q===V&&ue===D);){const me=2*te;me>-G&&(te-=G,Q+=B),me<I&&(te+=I,ue+=z)}console.log("  Points on line:",L.length),console.log("  First 5 points:",L.slice(0,5));const le=[];L.forEach(me=>{const be=O.getImageData(me.x,me.y,1,1);le.push(...Array.from(be.data))}),console.log("  Total pixels analyzed:",le.length/4);const{histogram:ie}=j(new Uint8ClampedArray(le),x),Z=M({data:new Uint8ClampedArray(le)}),fe=Math.round(Math.sqrt(I*I+G*G));console.log("  Line length:",fe,"pixels"),console.log("  Average pixel:",Z),console.log("  Histogram calculated - Gray channel sample:",ie.gray.slice(0,10));const ae=new Ve.fabric.Line([P,$,V,D],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),ce={type:"line",x1:P,y1:$,x2:V,y2:D,length:fe,fabricObject:ae};u(ie,{x:Math.round((P+V)/2),y:Math.round(($+D)/2),pixel:Z,mode:"line",length:fe},ce,x),A(),o.current=ae,e.add(ae),w(ae),E(ae),c.current.forEach(me=>w(me)),e.renderAll()}catch(O){console.error(" Error calculating histogram:",O)}},[e,j,M,u,A,E,w]),X=N.useCallback(P=>{if(!e||!t||!b)return;const $=e.getPointer(P.e);a($),s==="point"&&(R($),S(!1),e.defaultCursor="default",e.hoverCursor="move")},[e,t,b,s,R]),ne=N.useCallback(P=>{if(!e||!t||!b||!d||s==="point")return;const $=e.getPointer(P.e);if(A(),s==="area"){const V=new Ve.fabric.Rect({left:Math.min(d.x,$.x),top:Math.min(d.y,$.y),width:Math.abs($.x-d.x),height:Math.abs($.y-d.y),fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});o.current=V,e.add(V)}else if(s==="line"){const V=new Ve.fabric.Line([d.x,d.y,$.x,$.y],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});o.current=V,e.add(V)}e.renderAll()},[e,t,b,d,s,A]),de=N.useCallback(P=>{if(!e||!t||!b||!d||s==="point")return;const $=e.getPointer(P.e);s==="area"?H(d.x,d.y,$.x,$.y):s==="line"&&K(Math.round(d.x),Math.round(d.y),Math.round($.x),Math.round($.y)),S(!1),a(null),e.defaultCursor="default",e.hoverCursor="move"},[e,t,b,d,s,H,K]),se=N.useCallback(()=>{e&&(S(!0),e.defaultCursor="crosshair",e.hoverCursor="crosshair")},[e]);return N.useEffect(()=>{if(!(!e||!t))return e.on("mouse:down",X),e.on("mouse:move",ne),e.on("mouse:up",de),()=>{e.off("mouse:down",X),e.off("mouse:move",ne),e.off("mouse:up",de)}},[e,t,X,ne,de]),N.useEffect(()=>{t&&e?se():!t&&e&&(S(!1),a(null),A(),e.defaultCursor="default",e.hoverCursor="move")},[t,e,A]),h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!l&&!b?h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(Mi,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Histogram Tool"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>{f(!0),S(!1)},className:"p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:16})}),h.jsx(Me.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:16})})]})]})}):b?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(Mi,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>{f(!0),S(!1)},className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx(Me.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),h.jsx(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl border border-primary",children:h.jsxs("div",{className:"flex items-center gap-2",children:[s==="point"&&h.jsx(Xs,{size:18,className:"animate-pulse"}),s==="area"&&h.jsx(cr,{size:18,className:"animate-pulse"}),s==="line"&&h.jsx(Vr,{size:18,className:"animate-pulse"}),h.jsxs("p",{className:"text-sm font-semibold",children:[s==="point"&&"Click anywhere on the image...",s==="area"&&"Click and drag to select area...",s==="line"&&"Click and drag to draw line..."]})]})})]}):h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:h.jsx(Mi,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),h.jsx(Me.button,{onClick:()=>f(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Selection Mode"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"point",label:"Point",icon:Xs},{mode:"area",label:"Area",icon:cr},{mode:"line",label:"Line",icon:Vr}].map(({mode:P,label:$,icon:V})=>h.jsxs(Me.button,{onClick:()=>p(P),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${s===P?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[h.jsx(V,{size:18}),h.jsx("span",{className:"text-xs font-semibold",children:$})]},P))})]}),h.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(ea,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),h.jsxs("p",{className:"text-sm text-text leading-relaxed",children:[s==="point"&&"Click on a point to analyze 50px radius around it",s==="area"&&"Click and drag to select a rectangular area",s==="line"&&"Click and drag to draw a line across the image"]})]})}),h.jsxs(Me.button,{onClick:se,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[s==="point"&&h.jsx(Xs,{size:18}),s==="area"&&h.jsx(cr,{size:18}),s==="line"&&h.jsx(Vr,{size:18}),h.jsxs("span",{children:["Start ",s==="point"?"Point":s==="area"?"Area":"Line"," Selection"]})]})]})})},qS=N.createContext(),NR=()=>{const e=N.useContext(qS);if(!e)throw new Error("useIntensityProfile must be used within IntensityProfileProvider");return e},MR=({children:e})=>{const[t,r]=N.useState([]),[s,p]=N.useState(null),[b,S]=N.useState(null),d=N.useCallback(u=>{const g={id:`profile-${Date.now()}`,timestamp:new Date().toISOString(),...u};return r(y=>[...y,g]),p(g.id),g},[]),a=N.useCallback(u=>{r(g=>g.filter(y=>y.id!==u)),s===u&&p(null)},[s]),l=N.useCallback((u,g)=>{r(y=>y.map(x=>x.id===u?{...x,...g}:x))},[]),f=N.useCallback(()=>{r([]),p(null),S(null)},[]),o=N.useCallback(()=>t.find(u=>u.id===s),[t,s]),c={profiles:t,activeProfileId:s,selectedRegion:b,setActiveProfileId:p,setSelectedRegion:S,addProfile:d,removeProfile:a,updateProfile:l,clearProfiles:f,getActiveProfile:o};return h.jsx(qS.Provider,{value:c,children:e})},WS=()=>{try{const e=localStorage.getItem("intensityProfileLineSpacing");return e?parseInt(e):50}catch{return 50}},vc={current:WS()},ER=({canvas:e,isActive:t,onClose:r})=>{const[s,p]=N.useState("parallel-lines"),[b,S]=N.useState(!1),[d,a]=N.useState(!1),[l,f]=N.useState(WS()),o=N.useRef(null),c=N.useRef([]),u=N.useRef(null),g=N.useRef({mouseDown:null,mouseMove:null,mouseUp:null}),{addProfile:y,selectedRegion:x,setSelectedRegion:w}=NR(),{addToLayer:C,removeFromLayer:j,getCurrentLayer:T}=tg("Intensity Profile","intensity-profile",e,t);N.useEffect(()=>{vc.current=l},[l]);const M=N.useCallback((se,q,P,$)=>{if(!e)return null;try{const V=e.getContext("2d"),D=[],O=Math.abs(P-se),L=Math.abs($-q),I=se<P?1:-1,G=q<$?1:-1;let B=O-L,z=Math.round(se),te=Math.round(q);const Q=Math.round(P),ue=Math.round($);for(;;){const ie=V.getImageData(z,te,1,1).data,Z=.299*ie[0]+.587*ie[1]+.114*ie[2];if(D.push({x:z,y:te,r:ie[0],g:ie[1],b:ie[2],intensity:Z,distance:Math.sqrt((z-se)**2+(te-q)**2)}),z===Q&&te===ue)break;const fe=2*B;fe>-L&&(B-=L,z+=I),fe<O&&(B+=O,te+=G)}return D}catch(V){return console.error("Error calculating line intensity:",V),null}},[e]),E=N.useCallback((se,q,P,$,V)=>{if(!e)return null;try{const D=e.getContext("2d"),O=P-se,L=$-q,I=Math.sqrt(O*O+L*L),G=O/I,z=-(L/I),te=G,Q={x1:se+z*V/2,y1:q+te*V/2,x2:P+z*V/2,y2:$+te*V/2},ue={x1:se-z*V/2,y1:q-te*V/2,x2:P-z*V/2,y2:$-te*V/2},le=Math.ceil(I),ie=[];for(let Z=0;Z<le;Z++){const fe=Z/(le-1),ae=se+O*fe,ce=q+L*fe,me=[],be=Math.ceil(V);for(let W=0;W<be;W++){const re=(W/(be-1)-.5)*V,ge=Math.round(ae+z*re),Y=Math.round(ce+te*re);if(ge>=0&&ge<e.width&&Y>=0&&Y<e.height){const J=D.getImageData(ge,Y,1,1).data;me.push({r:J[0],g:J[1],b:J[2],intensity:.299*J[0]+.587*J[1]+.114*J[2]})}}if(me.length>0){const W=me.reduce((ee,J)=>ee+J.r,0)/me.length,re=me.reduce((ee,J)=>ee+J.g,0)/me.length,ge=me.reduce((ee,J)=>ee+J.b,0)/me.length,Y=me.reduce((ee,J)=>ee+J.intensity,0)/me.length;ie.push({position:Z,x:ae,y:ce,r:W,g:re,b:ge,intensity:Y,distance:Z})}}return{profiles:ie,line1:Q,line2:ue,spacing:V,length:I}}catch(D){return console.error("Error calculating parallel lines intensity:",D),null}},[e]),A=N.useCallback((se,q,P,$)=>{if(!e)return null;try{const O=e.getContext("2d").getImageData(se,q,P,$).data,L=[];for(let ie=0;ie<P;ie++){let Z=0,fe=0,ae=0,ce=0;for(let me=0;me<$;me++){const be=(me*P+ie)*4,W=O[be],re=O[be+1],ge=O[be+2],Y=.299*W+.587*re+.114*ge;Z+=W,fe+=re,ae+=ge,ce+=Y}L.push({position:ie,r:Z/$,g:fe/$,b:ae/$,intensity:ce/$})}const I=[];for(let ie=0;ie<$;ie++){let Z=0,fe=0,ae=0,ce=0;for(let me=0;me<P;me++){const be=(ie*P+me)*4,W=O[be],re=O[be+1],ge=O[be+2],Y=.299*W+.587*re+.114*ge;Z+=W,fe+=re,ae+=ge,ce+=Y}I.push({position:ie,r:Z/P,g:fe/P,b:ae/P,intensity:ce/P})}const G=[];for(let ie=0;ie<O.length;ie+=4){const Z=.299*O[ie]+.587*O[ie+1]+.114*O[ie+2];G.push(Z)}const B=G.reduce((ie,Z)=>ie+Z,0)/G.length,z=[...G].sort((ie,Z)=>ie-Z),te=z[0],Q=z[z.length-1],ue=z[Math.floor(z.length/2)],le=Math.sqrt(G.reduce((ie,Z)=>ie+(Z-B)**2,0)/G.length);return{horizontalProfile:L,verticalProfile:I,statistics:{mean:B,min:te,max:Q,median:ue,stdDev:le,pixelCount:G.length}}}catch(V){return console.error("Error calculating rectangle intensity:",V),null}},[e]),R=N.useCallback(()=>{if(e)try{if(c.current.length>0&&(c.current.forEach(se=>{if(se)try{e.remove(se),j(se)}catch{}}),c.current=[]),o.current){if(Array.isArray(o.current))o.current.forEach(se=>{if(se)try{e.remove(se),j(se)}catch{}});else if(typeof o.current=="object")Object.values(o.current).forEach(se=>{if(se)try{e.remove(se),j(se)}catch{}});else try{e.remove(o.current),j(o.current)}catch{}o.current=null}e.renderAll()}catch(se){console.error("Error removing region objects:",se)}},[e,j]);N.useCallback((se,q,P,$)=>{R();const V=new Ve.fabric.Line([se,q,P,$],{stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});o.current=V,e.add(V),C(V),e.renderAll();const D=M(se,q,P,$);if(D){const O=y({type:"line",region:{x1:se,y1:q,x2:P,y2:$},data:D,length:Math.sqrt((P-se)**2+($-q)**2)});w({type:"line",fabricObject:V,profile:O})}},[e,C,M,y,w,R]);const H=N.useCallback((se,q,P,$)=>{R(),c.current.forEach(O=>e.remove(O)),c.current=[];const V=vc.current,D=E(se,q,P,$,V);if(D){const{profiles:O,line1:L,line2:I}=D;new Ve.fabric.Group([],{selectable:!1,evented:!1});const G=new Ve.fabric.Line([L.x1,L.y1,L.x2,L.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1}),B=new Ve.fabric.Line([I.x1,I.y1,I.x2,I.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1});e.add(G),e.add(B),C(G),C(B);const z=new Ve.fabric.Line([L.x1,L.y1,I.x1,I.y1],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1}),te=new Ve.fabric.Line([L.x2,L.y2,I.x2,I.y2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1});e.add(z),e.add(te),C(z),C(te);const Q=P-se,ue=$-q,le=Math.sqrt(Q*Q+ue*ue),ie=-ue/le,Z=Q/le,fe=Math.min(...O.map(ee=>ee.intensity)),ae=Math.max(...O.map(ee=>ee.intensity)),ce=ae-fe||1,be=O.map((ee,J)=>{const Ce=((ee.intensity-fe)/ce-.5)*V;return{x:ee.x+ie*Ce,y:ee.y+Z*Ce}}).map(ee=>({x:ee.x,y:ee.y})),W=new Ve.fabric.Polyline(be,{stroke:"#00ff00",strokeWidth:2,fill:"",selectable:!1,evented:!1,objectCaching:!1});e.add(W),C(W),c.current.push(W);const re=new Ve.fabric.Text(`Min: ${fe.toFixed(0)}`,{left:se-ie*V/2,top:q-Z*V/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"}),ge=new Ve.fabric.Text(`Max: ${ae.toFixed(0)}`,{left:se+ie*V/2,top:q+Z*V/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"});e.add(re),e.add(ge),C(re),C(ge),c.current.push(re),c.current.push(ge),o.current={fabricLine1:G,fabricLine2:B,startConnector:z,endConnector:te},e.renderAll();const Y=y({type:"parallel-lines",region:{x1:se,y1:q,x2:P,y2:$,spacing:V},data:O,length:D.length,spacing:D.spacing});w({type:"parallel-lines",fabricObject:{fabricLine1:G,fabricLine2:B},profile:Y})}},[e,C,E,y,w,R]);N.useCallback((se,q,P,$)=>{R();const V=Math.min(se,P),D=Math.min(q,$),O=Math.abs(P-se),L=Math.abs($-q),I=new Ve.fabric.Rect({left:V,top:D,width:O,height:L,fill:"transparent",stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});o.current=I,e.add(I),C(I),e.renderAll();const G=A(V,D,O,L);if(G){const B=y({type:"rectangle",region:{left:V,top:D,width:O,height:L},data:G,area:O*L});w({type:"rectangle",fabricObject:I,profile:B})}},[e,C,A,y,w,R]);const K=N.useCallback(se=>{if(!e||!t)return;R();const q=e.getPointer(se.e);u.current=q,S(!0)},[e,t,R]),X=N.useCallback(se=>{if(!e||!t||!u.current)return;const q=e.getPointer(se.e),P=u.current;o.current&&(typeof o.current=="object"&&o.current.line1&&(e.remove(o.current.line1),e.remove(o.current.line2),e.remove(o.current.startConnector),e.remove(o.current.endConnector)),o.current=null);const $=q.x-P.x,V=q.y-P.y,D=Math.sqrt($*$+V*V),O=vc.current;if(D>0){const L=-V/D,I=$/D,G=new Ve.fabric.Line([P.x+L*O/2,P.y+I*O/2,q.x+L*O/2,q.y+I*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),B=new Ve.fabric.Line([P.x-L*O/2,P.y-I*O/2,q.x-L*O/2,q.y-I*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),z=new Ve.fabric.Line([P.x+L*O/2,P.y+I*O/2,P.x-L*O/2,P.y-I*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7}),te=new Ve.fabric.Line([q.x+L*O/2,q.y+I*O/2,q.x-L*O/2,q.y-I*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7});e.add(G),e.add(B),e.add(z),e.add(te),o.current={line1:G,line2:B,startConnector:z,endConnector:te}}e.renderAll()},[e,t]),ne=N.useCallback(se=>{if(!e||!t||!u.current)return;const q=e.getPointer(se.e),P=u.current;H(Math.round(P.x),Math.round(P.y),Math.round(q.x),Math.round(q.y)),S(!1),u.current=null,e.defaultCursor="crosshair",e.hoverCursor="crosshair"},[e,t,H]);N.useEffect(()=>{g.current={mouseDown:K,mouseMove:X,mouseUp:ne}},[K,X,ne]),N.useEffect(()=>{if(!e||!t)return;const se=$=>{var V,D;return(D=(V=g.current).mouseDown)==null?void 0:D.call(V,$)},q=$=>{var V,D;return(D=(V=g.current).mouseMove)==null?void 0:D.call(V,$)},P=$=>{var V,D;return(D=(V=g.current).mouseUp)==null?void 0:D.call(V,$)};return e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up"),e.on("mouse:down",se),e.on("mouse:move",q),e.on("mouse:up",P),()=>{e.off("mouse:down",se),e.off("mouse:move",q),e.off("mouse:up",P)}},[e,t]),N.useEffect(()=>{t&&e?(de(),e.selection=!1):!t&&e&&(S(!1),u.current=null,e.selection=!0,e.defaultCursor&&(e.defaultCursor="default"),e.hoverCursor&&(e.hoverCursor="move"))},[t,e]);const de=N.useCallback(()=>{e&&(S(!0),e.defaultCursor="crosshair",e.hoverCursor="crosshair")},[e]);return h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!d&&!b?h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:h.jsx(lr,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Intensity Profile"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>{a(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:16})}),h.jsx(Me.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:16})})]})]})}):b?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:h.jsx(lr,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Me.button,{onClick:()=>{a(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:h.jsx(Pt,{size:16,className:"sm:w-5 sm:h-5"})}),h.jsx(Me.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:h.jsx(Ft,{size:16,className:"sm:w-4 sm:h-4"})})]})]}),h.jsx(Me.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl border border-green-500",children:h.jsxs("div",{className:"flex items-center gap-2",children:[s==="line"&&h.jsx(Vr,{size:18,className:"animate-pulse"}),s==="parallel-lines"&&h.jsx(xy,{size:18,className:"animate-pulse"}),s==="rectangle"&&h.jsx(cr,{size:18,className:"animate-pulse"}),h.jsxs("p",{className:"text-sm font-semibold",children:[s==="line"&&"Click and drag to draw line...",s==="parallel-lines"&&"Click and drag to draw parallel lines...",s==="rectangle"&&"Click and drag to draw rectangle..."]})]})})]}):h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:h.jsx(lr,{size:20})}),h.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),h.jsx(Me.button,{onClick:()=>a(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold text-text mb-2",children:["Region Width: ",l,"px"]}),h.jsx("input",{type:"range",min:"20",max:"200",value:l,onChange:se=>{const q=parseInt(se.target.value);f(q),vc.current=q,localStorage.setItem("intensityProfileLineSpacing",q.toString())},className:"w-full h-2 bg-background-secondary rounded-lg appearance-none cursor-pointer slider-green",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${(l-20)/180*100}%, #e5e7eb ${(l-20)/180*100}%, #e5e7eb 100%)`}}),h.jsxs("div",{className:"flex justify-between text-xs text-text-secondary mt-1",children:[h.jsx("span",{children:"20px"}),h.jsx("span",{children:"200px"})]})]}),h.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(ea,{size:18,className:"text-green-500 mt-0.5 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-text leading-relaxed",children:"Click and drag to select a region. The intensity profile will be displayed directly on the image with min/max values."})]})}),h.jsxs(Me.button,{onClick:de,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[s==="line"&&h.jsx(Vr,{size:18}),s==="parallel-lines"&&h.jsx(xy,{size:18}),s==="rectangle"&&h.jsx(cr,{size:18}),h.jsxs("span",{children:["Draw ",s==="line"?"Line":s==="parallel-lines"?"Parallel Lines":"Rectangle"]})]}),T()&&h.jsxs("div",{className:"p-3 bg-background-secondary dark:bg-background-primary rounded-lg border border-border",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Layer"}),h.jsx("div",{className:"text-sm font-semibold text-text",children:T().name})]})]})})},OR=({canvas:e,enabled:t=!0,config:r={}})=>{const s=N.useRef(null),p=N.useRef(null),b=N.useRef(null),d={...{color:"#00ff00",strokeWidth:2,strokeDashArray:[10,5],opacity:.8,showCenter:!0,centerRadius:5,centerColor:"#ff0000",centerX:null,centerY:null},...r};return N.useEffect(()=>{if(!e||!t){s.current&&(e.remove(s.current),s.current=null),p.current&&(e.remove(p.current),p.current=null),b.current&&(e.remove(b.current),b.current=null),e==null||e.renderAll();return}const a=e.width||800,l=e.height||600,f=d.centerX??a/2,o=d.centerY??l/2;console.log(`[SimpleCrosshair] Drawing crosshair at (${f}, ${o})`),s.current&&e.remove(s.current),p.current&&e.remove(p.current),b.current&&e.remove(b.current);const c=new Ve.fabric.Line([0,o,a,o],{stroke:d.color,strokeWidth:d.strokeWidth,strokeDashArray:d.strokeDashArray,opacity:d.opacity,selectable:!1,evented:!1,name:"crosshair-horizontal"}),u=new Ve.fabric.Line([f,0,f,l],{stroke:d.color,strokeWidth:d.strokeWidth,strokeDashArray:d.strokeDashArray,opacity:d.opacity,selectable:!1,evented:!1,name:"crosshair-vertical"});if(e.add(c),e.add(u),s.current=c,p.current=u,d.showCenter){const g=new Ve.fabric.Circle({left:f-d.centerRadius,top:o-d.centerRadius,radius:d.centerRadius,fill:d.centerColor,stroke:d.centerColor,strokeWidth:1,opacity:d.opacity,selectable:!1,evented:!1,name:"crosshair-center"});e.add(g),b.current=g}return e.renderAll(),()=>{s.current&&(e.remove(s.current),s.current=null),p.current&&(e.remove(p.current),p.current=null),b.current&&(e.remove(b.current),b.current=null),e==null||e.renderAll()}},[e,t,d.color,d.strokeWidth,d.opacity,d.showCenter,d.centerColor,d.centerRadius,d.centerX,d.centerY]),null},DR=({canvas:e,isActive:t,onClose:r})=>{const{t:s}=et(),[p,b]=N.useState(!0),[S,d]=N.useState({color:"#00ff00",strokeWidth:2,strokeDashArray:[10,5],opacity:.8,showCenter:!0,centerRadius:5,centerColor:"#ff0000"}),a=N.useCallback(l=>{d(f=>({...f,...l}))},[]);return t?h.jsxs(h.Fragment,{children:[h.jsx(OR,{canvas:e,enabled:p,config:S}),h.jsxs(Me.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.3,ease:[.4,0,.2,1]},className:"bg-white dark:bg-background-secondary border-2 border-border rounded-2xl shadow-2xl w-80 overflow-hidden",children:[h.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 p-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:h.jsx(Xs,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold text-lg",children:s("crosshairTool")||"Crosshair Tool"}),h.jsx("p",{className:"text-white/80 text-xs",children:s("requirement22")||"Requirement #22"})]})]}),h.jsx(Me.button,{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:h.jsx(Ft,{className:"w-5 h-5"})})]})}),h.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[h.jsxs(Me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[h.jsx(ea,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[h.jsx("p",{className:"font-semibold mb-1",children:s("crosshairInfo")||"Crosshair Lines"}),h.jsx("p",{className:"text-xs",children:s("crosshairDescription")||"Two perpendicular lines passing through the center of the canvas."})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Xs,{className:"w-4 h-4 text-primary"}),h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s("showCrosshair")||"Show Crosshair"})]}),h.jsx("button",{onClick:()=>b(!p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:h.jsx(Me.span,{layout:!0,className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:p?26:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),h.jsx(_i,{children:p&&h.jsxs(Me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("lineColor")||"Line Color"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"color",value:S.color,onChange:l=>a({color:l.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),h.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:S.color})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("lineWidth")||"Line Width"}),h.jsxs("span",{className:"font-mono text-primary",children:[S.strokeWidth,"px"]})]}),h.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:S.strokeWidth,onChange:l=>a({strokeWidth:parseFloat(l.target.value)}),className:"w-full accent-primary"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("opacity")||"Opacity"}),h.jsxs("span",{className:"font-mono text-primary",children:[(S.opacity*100).toFixed(0),"%"]})]}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:S.opacity,onChange:l=>a({opacity:parseFloat(l.target.value)}),className:"w-full accent-primary"})]}),h.jsxs("div",{className:"border-t border-border pt-3 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s("showCenterMarker")||"Show Center Marker"}),h.jsx("button",{onClick:()=>a({showCenter:!S.showCenter}),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${S.showCenter?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:S.showCenter?s("yes")||"Yes":s("no")||"No"})]}),S.showCenter&&h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("centerMarkerColor")||"Center Marker Color"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"color",value:S.centerColor,onChange:l=>a({centerColor:l.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),h.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:S.centerColor})]})]}),S.showCenter&&h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("centerMarkerSize")||"Center Marker Size"}),h.jsxs("span",{className:"font-mono text-primary",children:[S.centerRadius,"px"]})]}),h.jsx("input",{type:"range",min:"2",max:"15",step:"1",value:S.centerRadius,onChange:l=>a({centerRadius:parseInt(l.target.value)}),className:"w-full accent-primary"})]})]})]})})]}),h.jsx("div",{className:"p-4 bg-background-secondary dark:bg-accent border-t border-border",children:h.jsxs("div",{className:"text-xs text-center text-text-muted",children:[h.jsx("kbd",{className:"px-2 py-1 bg-background-white dark:bg-background-secondary rounded border border-border",children:"X"})," ",s("toCrosshair")||"to toggle crosshair"]})})]})]}):null},AR=({canvas:e,enabled:t=!0,displayMode:r="tooltip",showPixelValue:s=!0,config:p={}})=>{const[b,S]=N.useState({x:null,y:null,value:null}),[d,a]=N.useState({clientX:0,clientY:0}),[l,f]=N.useState(!1),o=N.useRef(null),c=N.useRef(null),u=N.useRef(0),y={...{tooltipOffsetX:15,tooltipOffsetY:15,hudPosition:"top-right",backgroundColor:"rgba(0, 0, 0, 0.8)",textColor:"#00ff00",fontSize:12,padding:8,borderRadius:4,throttleMs:16},...p},x=N.useCallback((T,M,E)=>{if(!T||M<0||E<0)return null;try{const A=T.getContext("2d");if(!A)return null;const H=A.getImageData(M,E,1,1).data;return Math.round((H[0]+H[1]+H[2])/3)}catch(A){return console.warn("[PixelCoordinateTracker] Error getting pixel value:",A),null}},[]),w=N.useCallback(T=>{if(!e||!t)return;const M=Date.now();if(M-u.current<y.throttleMs)return;u.current=M;const E=e.getPointer(T.e),A=Math.round(E.x),R=Math.round(E.y),H=e.width||0,K=e.height||0;if(A<0||R<0||A>=H||R>=K){f(!1);return}let X=null;s&&(X=x(e.lowerCanvasEl,A,R)),S({x:A,y:R,value:X}),a({clientX:T.e.clientX,clientY:T.e.clientY}),f(!0)},[e,t,y.throttleMs,s,x]),C=N.useCallback(()=>{f(!0)},[]),j=N.useCallback(()=>{f(!1),S({x:null,y:null,value:null})},[]);if(N.useEffect(()=>{if(!e||!t){f(!1),S({x:null,y:null,value:null});return}return e.on("mouse:move",w),e.on("mouse:over",C),e.on("mouse:out",j),console.log("[PixelCoordinateTracker] Event listeners attached"),()=>{e.off("mouse:move",w),e.off("mouse:over",C),e.off("mouse:out",j),console.log("[PixelCoordinateTracker] Event listeners removed")}},[e,t,w,C,j]),N.useEffect(()=>{!o.current||r!=="tooltip"||(o.current.style.left=`${d.clientX+y.tooltipOffsetX}px`,o.current.style.top=`${d.clientY+y.tooltipOffsetY}px`)},[d,r,y.tooltipOffsetX,y.tooltipOffsetY]),!t)return null;if(r==="tooltip"&&l&&b.x!==null)return h.jsxs("div",{ref:o,style:{position:"fixed",backgroundColor:y.backgroundColor,color:y.textColor,fontSize:`${y.fontSize}px`,padding:`${y.padding}px`,borderRadius:`${y.borderRadius}px`,pointerEvents:"none",zIndex:9999,fontFamily:"monospace",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",userSelect:"none"},children:[h.jsxs("div",{children:["X: ",b.x]}),h.jsxs("div",{children:["Y: ",b.y]}),s&&b.value!==null&&h.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",marginTop:"4px",paddingTop:"4px"},children:["Gray: ",b.value]})]});if(r==="hud"){const T={"top-left":{top:"10px",left:"10px"},"top-right":{top:"10px",right:"10px"},"bottom-left":{bottom:"10px",left:"10px"},"bottom-right":{bottom:"10px",right:"10px"}};return h.jsxs("div",{ref:c,style:{position:"fixed",...T[y.hudPosition],backgroundColor:y.backgroundColor,color:y.textColor,fontSize:`${y.fontSize}px`,padding:`${y.padding}px`,borderRadius:`${y.borderRadius}px`,zIndex:9999,fontFamily:"monospace",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",userSelect:"none",minWidth:"120px",opacity:l?1:.5,transition:"opacity 0.2s ease"},children:[h.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"4px"},children:"Coordinates"}),h.jsxs("div",{children:["X: ",b.x??"---"]}),h.jsxs("div",{children:["Y: ",b.y??"---"]}),s&&h.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",marginTop:"4px",paddingTop:"4px"},children:["Gray: ",b.value??"---"]})]})}return null},RR=({canvas:e,isActive:t,onClose:r})=>{const{t:s}=et(),[p,b]=N.useState(!0),[S,d]=N.useState("tooltip"),[a,l]=N.useState(!0),[f,o]=N.useState({backgroundColor:"rgba(0, 0, 0, 0.85)",textColor:"#00ff00",fontSize:13,padding:10,borderRadius:6,hudPosition:"top-right"}),c=N.useCallback(u=>{o(g=>({...g,...u}))},[]);return t?h.jsxs(h.Fragment,{children:[h.jsx(AR,{canvas:e,enabled:p,displayMode:S,showPixelValue:a,config:f}),h.jsxs(Me.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.3,ease:[.4,0,.2,1]},className:"bg-white dark:bg-background-secondary border-2 border-border rounded-2xl shadow-2xl w-80 overflow-hidden",children:[h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 p-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:h.jsx(zc,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold text-lg",children:s("pixelCoordinateTool")||"Pixel Coordinates"}),h.jsx("p",{className:"text-white/80 text-xs",children:s("requirement23")||"Requirement #23"})]})]}),h.jsx(Me.button,{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:h.jsx(Ft,{className:"w-5 h-5"})})]})}),h.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[h.jsxs(Me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[h.jsx(ea,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[h.jsx("p",{className:"font-semibold mb-1",children:s("pixelCoordinateInfo")||"Pixel Coordinates"}),h.jsx("p",{className:"text-xs",children:s("pixelCoordinateDescription")||"Move your mouse over the canvas to see pixel coordinates (X,Y) and gray value."})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(zc,{className:"w-4 h-4 text-primary"}),h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s("showCoordinates")||"Show Coordinates"})]}),h.jsx("button",{onClick:()=>b(!p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:h.jsx(Me.span,{layout:!0,className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:p?26:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),h.jsx(_i,{children:p&&h.jsxs(Me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("displayMode")||"Display Mode"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx("button",{onClick:()=>d("tooltip"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S==="tooltip"?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:s("tooltip")||"Tooltip"}),h.jsx("button",{onClick:()=>d("hud"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S==="hud"?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:s("hud")||"HUD"})]})]}),S==="hud"&&h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("hudPosition")||"HUD Position"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["top-left","top-right","bottom-left","bottom-right"].map(u=>h.jsx("button",{onClick:()=>c({hudPosition:u}),className:`px-3 py-2 rounded-lg text-xs font-medium transition-all ${f.hudPosition===u?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:u.replace("-"," ").replace(/\b\w/g,g=>g.toUpperCase())},u))})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s("showPixelValue")||"Show Gray Value"}),h.jsx("button",{onClick:()=>l(!a),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${a?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:a?s("yes")||"Yes":s("no")||"No"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("textColor")||"Text Color"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"color",value:f.textColor,onChange:u=>c({textColor:u.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),h.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:f.textColor})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("backgroundColor")||"Background Color"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"relative",children:h.jsx("input",{type:"color",value:f.backgroundColor.replace(/rgba?\((\d+),\s*(\d+),\s*(\d+).*\)/,(u,g,y,x)=>`#${Number(g).toString(16).padStart(2,"0")}${Number(y).toString(16).padStart(2,"0")}${Number(x).toString(16).padStart(2,"0")}`),onChange:u=>c({backgroundColor:`rgba(${parseInt(u.target.value.slice(1,3),16)}, ${parseInt(u.target.value.slice(3,5),16)}, ${parseInt(u.target.value.slice(5,7),16)}, 0.85)`}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"})}),h.jsx("span",{className:"text-xs font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:"Semi-transparent"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("fontSize")||"Font Size"}),h.jsxs("span",{className:"font-mono text-primary",children:[f.fontSize,"px"]})]}),h.jsx("input",{type:"range",min:"10",max:"20",step:"1",value:f.fontSize,onChange:u=>c({fontSize:parseInt(u.target.value)}),className:"w-full accent-primary"})]})]})})]}),h.jsx("div",{className:"p-4 bg-background-secondary dark:bg-accent border-t border-border",children:h.jsxs("div",{className:"text-xs text-center text-text-muted",children:[h.jsx("kbd",{className:"px-2 py-1 bg-background-white dark:bg-background-secondary rounded border border-border",children:"P"})," ",s("toTogglePixelCoordinates")||"to toggle pixel coordinates"]})})]})]}):null},PR=({canvas:e,enabled:t=!0,config:r={}})=>{const s=N.useRef([]),b={...{spacing:50,color:"#00ff00",strokeWidth:1,opacity:.5,strokeDashArray:[]},...r};return N.useEffect(()=>{if(!e||!t){s.current.forEach(l=>{e==null||e.remove(l)}),s.current=[],e==null||e.renderAll();return}const S=e.width||800,d=e.height||600;console.log(`[GridOverlay] Drawing grid on ${S}x${d} canvas with ${b.spacing}px spacing`),s.current.forEach(l=>{e.remove(l)}),s.current=[];const a=[];for(let l=0;l<=S;l+=b.spacing){const f=new Ve.fabric.Line([l,0,l,d],{stroke:b.color,strokeWidth:b.strokeWidth,strokeDashArray:b.strokeDashArray,opacity:b.opacity,selectable:!1,evented:!1,excludeFromExport:!0,name:"grid-line-vertical"});e.add(f),a.push(f)}for(let l=0;l<=d;l+=b.spacing){const f=new Ve.fabric.Line([0,l,S,l],{stroke:b.color,strokeWidth:b.strokeWidth,strokeDashArray:b.strokeDashArray,opacity:b.opacity,selectable:!1,evented:!1,excludeFromExport:!0,name:"grid-line-horizontal"});e.add(f),a.push(f)}return s.current=a,a.forEach(l=>{e.sendToBack(l)}),e.renderAll(),console.log(`[GridOverlay] Drew ${a.length} grid lines`),()=>{s.current.forEach(l=>{e.remove(l)}),s.current=[],e==null||e.renderAll()}},[e,t,b.spacing,b.color,b.strokeWidth,b.opacity,JSON.stringify(b.strokeDashArray)]),null},LR=({canvas:e,isActive:t,onClose:r})=>{const{t:s}=et(),[p,b]=N.useState(!0),[S,d]=N.useState({spacing:50,color:"#00ff00",strokeWidth:1,opacity:.5,strokeDashArray:[]}),a=N.useCallback(f=>{d(o=>({...o,...f}))},[]),l=[25,50,75,100];return t?h.jsxs(h.Fragment,{children:[h.jsx(PR,{canvas:e,enabled:p,config:S}),h.jsxs(Me.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.3,ease:[.4,0,.2,1]},className:"bg-white dark:bg-background-secondary border-2 border-border rounded-2xl shadow-2xl w-80 overflow-hidden",children:[h.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 dark:from-purple-600 dark:to-purple-700 p-4",children:h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:h.jsx(Fc,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold text-lg",children:s("gridTool")||"Grid Overlay"}),h.jsx("p",{className:"text-white/80 text-xs",children:s("requirement25")||"Requirement #25"})]})]}),h.jsx(Me.button,{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:h.jsx(Ft,{className:"w-5 h-5"})})]})}),h.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[h.jsxs(Me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[h.jsx(ea,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:[h.jsx("p",{className:"font-semibold mb-1",children:s("gridOverlayInfo")||"Grid Overlay"}),h.jsx("p",{className:"text-xs",children:s("gridOverlayDescription")||"Display a grid overlay on the entire canvas to help with alignment and measurements."})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fc,{className:"w-4 h-4 text-primary"}),h.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s("showGrid")||"Show Grid"})]}),h.jsx("button",{onClick:()=>b(!p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-purple-500":"bg-gray-300 dark:bg-gray-600"}`,children:h.jsx(Me.span,{layout:!0,className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:p?26:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),h.jsx(_i,{children:p&&h.jsxs(Me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("gridSpacing")||"Grid Spacing"}),h.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:l.map(f=>h.jsxs("button",{onClick:()=>a({spacing:f}),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S.spacing===f?"bg-purple-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-purple-100 dark:hover:bg-purple-900/30"}`,children:[f,"px"]},f))}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs font-medium text-text-muted mb-1 flex justify-between",children:[h.jsx("span",{children:s("customSpacing")||"Custom Spacing"}),h.jsxs("span",{className:"font-mono text-primary",children:[S.spacing,"px"]})]}),h.jsx("input",{type:"range",min:"10",max:"200",step:"5",value:S.spacing,onChange:f=>a({spacing:parseInt(f.target.value)}),className:"w-full accent-primary"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("lineColor")||"Line Color"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("input",{type:"color",value:S.color,onChange:f=>a({color:f.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),h.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:S.color})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("lineWidth")||"Line Width"}),h.jsxs("span",{className:"font-mono text-primary",children:[S.strokeWidth,"px"]})]}),h.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:S.strokeWidth,onChange:f=>a({strokeWidth:parseFloat(f.target.value)}),className:"w-full accent-primary"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[h.jsx("span",{children:s("opacity")||"Opacity"}),h.jsxs("span",{className:"font-mono text-primary",children:[(S.opacity*100).toFixed(0),"%"]})]}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:S.opacity,onChange:f=>a({opacity:parseFloat(f.target.value)}),className:"w-full accent-primary"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:s("lineStyle")||"Line Style"}),h.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[h.jsx("button",{onClick:()=>a({strokeDashArray:[]}),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S.strokeDashArray.length===0?"bg-purple-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-purple-100 dark:hover:bg-purple-900/30"}`,children:s("solid")||"Solid"}),h.jsx("button",{onClick:()=>a({strokeDashArray:[5,5]}),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${JSON.stringify(S.strokeDashArray)===JSON.stringify([5,5])?"bg-purple-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-purple-100 dark:hover:bg-purple-900/30"}`,children:s("dashed")||"Dashed"}),h.jsx("button",{onClick:()=>a({strokeDashArray:[2,2]}),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${JSON.stringify(S.strokeDashArray)===JSON.stringify([2,2])?"bg-purple-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-purple-100 dark:hover:bg-purple-900/30"}`,children:s("dotted")||"Dotted"})]})]})]})})]}),h.jsx("div",{className:"p-4 bg-background-secondary dark:bg-accent border-t border-border",children:h.jsxs("div",{className:"text-xs text-center text-text-muted",children:[h.jsx("kbd",{className:"px-2 py-1 bg-background-white dark:bg-background-secondary rounded border border-border",children:"G"})," ",s("toToggleGrid")||"to toggle grid overlay"]})})]})]}):null},Pi=e=>!e||e.length===0?0:e.reduce((r,s)=>r+s,0)/e.length,FR=e=>{if(!e||e.length===0)return 0;let t=e[0];for(let r=1;r<e.length;r++)e[r]<t&&(t=e[r]);return t},zR=e=>{if(!e||e.length===0)return 0;let t=e[0];for(let r=1;r<e.length;r++)e[r]>t&&(t=e[r]);return t},ig=(e,t=null)=>{if(!e||e.length===0)return 0;const r=t!==null?t:Pi(e),p=e.map(b=>Math.pow(b-r,2)).reduce((b,S)=>b+S,0)/e.length;return Math.sqrt(p)},IR=e=>{if(!e||e.length===0)return 0;const t=[...e].sort((s,p)=>s-p),r=Math.floor(t.length/2);return t.length%2===0?(t[r-1]+t[r])/2:t[r]},BR=e=>{if(!e||e.length===0)return{mean:0,median:0,min:0,max:0,stdDev:0,variance:0,count:0};const t=Pi(e),r=FR(e),s=zR(e),p=IR(e),b=ig(e,t),S=b*b;return{mean:t,median:p,min:r,max:s,stdDev:b,variance:S,count:e.length}},VR=(e,t=null,r=null)=>0,$R=(e,t)=>{if(!e||!t)return 0;const r=Math.abs(e.mean-t.mean),s=Math.pow(e.stdDev,2)+Math.pow(t.stdDev,2),p=Math.sqrt(s);return p===0?1/0:r/p},HR=e=>{if(!e||e.length===0)return 0;const t=Pi(e),r=ig(e,t);return r===0?1/0:t/r},UR=(e,t)=>{if(!e||e.length===0||!t||t.length===0)return 0;const r=Pi(e),s=Pi(t),p=ig(t);return p===0?1/0:Math.abs(r-s)/p},rg=(e,t)=>t===0?0:e/t*100,XR=(e,t)=>{if(!e||!t||e.length===0||t.length===0)return 0;const r=Pi(e),s=Pi(t);return rg(r,s)},YR=(e,t)=>{if(!e||e.length===0||t===0)return 0;const r=Math.min(...e);return rg(r,t)},GR=(e,t,r=1)=>{if(t===0||e===0)return 0;const s=e/t;return-Math.log(s)/r},qR=({roiData:e,backgroundData:t=null,referenceData:r=null,referenceIntensity:s=null})=>{const p={snr:0,cnr:0,transmission:0,minTransmission:0,attenuation:0};if(!e||e.length===0)return p;if(p.snr=HR(e),t&&t.length>0&&(p.cnr=UR(e,t)),r&&r.length>0)p.transmission=XR(e,r);else if(s!==null){const b=Pi(e);p.transmission=rg(b,s),p.minTransmission=YR(e,s)}if(s!==null){const b=Pi(e);p.attenuation=GR(b,s)}return p},fv=(e,t,r="gray")=>{const{x:s,y:p,width:b,height:S}=t,d=[],a=e.data,l=e.width;for(let f=p;f<p+S;f++)for(let o=s;o<s+b;o++){const c=(f*l+o)*4;if(r==="gray"){const u=a[c],g=a[c+1],y=a[c+2];d.push(Math.round((u+g+y)/3))}else r==="r"?d.push(a[c]):r==="g"?d.push(a[c+1]):r==="b"?d.push(a[c+2]):r==="alpha"&&d.push(a[c+3])}return d},mv=(e,t,r="gray")=>{const{centerX:s,centerY:p,radius:b}=t,S=[],d=e.data,a=e.width,l=Math.max(0,Math.floor(s-b)),f=Math.min(e.width,Math.ceil(s+b)),o=Math.max(0,Math.floor(p-b)),c=Math.min(e.height,Math.ceil(p+b));for(let u=o;u<c;u++)for(let g=l;g<f;g++){const y=g-s,x=u-p;if(Math.sqrt(y*y+x*x)<=b){const C=(u*a+g)*4;if(r==="gray"){const j=d[C],T=d[C+1],M=d[C+2];S.push(Math.round((j+T+M)/3))}else r==="r"?S.push(d[C]):r==="g"?S.push(d[C+1]):r==="b"&&S.push(d[C+2])}}return S},WR=(e,t)=>e==="rectangle"?t.width*t.height:e==="circle"?Math.PI*t.radius*t.radius:0,gv=(e,t,r="rectangle",s={})=>{const{channel:p="gray",calculateMetrics:b=!0,backgroundROI:S=null,referenceIntensity:d=null}=s;let a;if(r==="rectangle")a=fv(e,t,p);else if(r==="circle")a=mv(e,t,p);else return null;const l=BR(a),f=WR(r,t),o={shape:r,roi:t,channel:p,area:f,pixelCount:a.length,statistics:l};if(b){let c=null;S&&(r==="rectangle"?c=fv(e,S,p):r==="circle"&&(c=mv(e,S,p)));const u=qR({roiData:a,backgroundData:c,referenceIntensity:d});o.metrics=u}return o},pv=e=>{if(!e)return[];const t=e.getObjects();console.log(` detectROIsOnCanvas: Found ${t.length} object(s) on canvas`);const r=[];return t.forEach((s,p)=>{if(console.log(`  Object ${p}: type=${s.type}, width=${s.width}, height=${s.height}`),s.type==="rect"){const b=s.scaleX||1,S=s.scaleY||1,d=Math.round(s.width*b),a=Math.round(s.height*S);r.push({id:s.name||`roi-rect-${p}`,type:"rectangle",shape:"rectangle",object:s,bounds:{x:Math.round(s.left),y:Math.round(s.top),width:d,height:a}})}else if(s.type==="circle"){const b=s.scaleX||1,S=Math.round(s.radius*b);r.push({id:s.name||`roi-circle-${p}`,type:"circle",shape:"circle",object:s,bounds:{centerX:Math.round(s.left+s.radius*b),centerY:Math.round(s.top+s.radius*b),radius:S}})}}),r},xv=e=>{if(!e)return null;try{return e.getContext("2d").getImageData(0,0,e.width,e.height)}catch(t){return console.error("Error getting canvas ImageData:",t),null}},KR=({canvas:e,isActive:t,onClose:r})=>{const{t:s}=et(),[p,b]=N.useState([]),[S,d]=N.useState(null),[a,l]=N.useState(null),[f,o]=N.useState(!1),[c,u]=N.useState(null),[g,y]=N.useState(null),x=N.useCallback(()=>{if(!e){console.log(" ROIStatsPanel: No canvas available");return}const T=pv(e);console.log(` ROIStatsPanel: Detected ${T.length} ROI(s)`,T),b(T),S&&(T.find(E=>E.id===S.id)||(d(null),l(null)))},[e,S]),w=N.useCallback(async T=>{if(!(!e||!T)){o(!0);try{const M=xv(e.lowerCanvasEl);if(!M){console.error("Failed to get image data from canvas"),o(!1);return}const E=gv(M,T.bounds,T.shape,{channel:"gray",calculateMetrics:!1});l(E)}catch(M){console.error("Error calculating ROI statistics:",M),l(null)}finally{o(!1)}}},[e]),C=N.useCallback(T=>{d(T),w(T),e&&T.object&&(e.setActiveObject(T.object),e.renderAll())},[w,e]),j=N.useCallback(async T=>{if(!(!e||!T)){console.log(" Comparison ROI selected:",T.id),u(T);try{const M=xv(e.lowerCanvasEl);if(!M){console.error(" Failed to get image data for comparison ROI");return}const E=gv(M,T.bounds,T.shape,{channel:"gray",calculateMetrics:!1});console.log(" Comparison ROI stats calculated:",E.statistics),y(E)}catch(M){console.error("Error calculating comparison ROI statistics:",M),y(null)}}},[e]);return N.useEffect(()=>{if(!e||!t)return;x();const T=()=>x(),M=()=>x(),E=()=>{x(),S&&w(S)};return e.on("object:added",T),e.on("object:removed",M),e.on("object:modified",E),e.on("selection:created",E),e.on("selection:updated",E),()=>{e.off("object:added",T),e.off("object:removed",M),e.off("object:modified",E),e.off("selection:created",E),e.off("selection:updated",E)}},[e,t,x,S,w]),N.useEffect(()=>{const T=()=>{console.log(" ROIStatsPanel received roiAdded event"),x(),setTimeout(()=>{const M=pv(e);if(M.length>0){const E=M[M.length-1];console.log(" Auto-selecting latest ROI:",E.id),C(E)}},100)};return window.addEventListener("roiAdded",T),()=>{window.removeEventListener("roiAdded",T)}},[e,x,C]),t?h.jsxs(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-80 h-[600px] bg-background-secondary border border-border rounded-xl shadow-lg overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-gradient-to-r from-primary/10 to-primary-dark/10 flex-shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Mi,{className:"w-5 h-5 text-primary"}),h.jsx("h3",{className:"font-semibold text-text",children:s("roiStatistics")})]}),h.jsx("button",{onClick:r,className:"p-1 rounded-lg hover:bg-background-primary/50 transition-colors",children:h.jsx(Ft,{className:"w-4 h-4 text-text-muted"})})]}),h.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto flex-1",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-medium text-text-muted mb-2 block",children:s("selectROI")}),p.length===0?h.jsxs("div",{className:"text-sm text-text-muted italic p-3 bg-background-primary rounded-lg space-y-2",children:[h.jsx("p",{children:s("noROIsDetected")}),h.jsxs("p",{className:"text-xs pt-2 border-t border-border",children:[" Press ",h.jsx("kbd",{className:"px-2 py-1 bg-background-secondary rounded font-mono text-xs",children:"R"})," to draw a rectangle ROI"]})]}):h.jsxs("div",{className:"space-y-2",children:[p.map((T,M)=>h.jsxs(Me.button,{onClick:()=>C(T),className:`w-full flex items-center gap-2 p-3 rounded-lg border transition-all ${(S==null?void 0:S.id)===T.id?"bg-primary/10 border-primary text-primary":"bg-background-primary border-border hover:border-primary/50 text-text"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[T.type==="rectangle"?h.jsx(cr,{className:"w-4 h-4"}):h.jsx(_o,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-sm font-medium",children:[s(T.type)," #",M+1]})]},T.id)),h.jsx("button",{onClick:()=>{if(!e)return;e.getObjects().forEach(M=>{(M.type==="rect"||M.type==="circle")&&e.remove(M)}),e.renderAll(),d(null),l(null),u(null),y(null),x()},className:"w-full px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium mt-2",children:" Clear All ROIs"})]})]}),p.length>=2&&h.jsxs("div",{className:"border-t border-border pt-4",children:[h.jsxs("label",{className:"text-xs font-medium text-text-muted mb-2 block",children:[s("cnrComparison")," (CNR)"]}),h.jsx("p",{className:"text-xs text-text-muted mb-3",children:s("cnrDescription")}),h.jsx("div",{className:"space-y-2",children:p.map((T,M)=>{const E=(S==null?void 0:S.id)===T.id,A=(c==null?void 0:c.id)===T.id;return h.jsxs(Me.button,{onClick:()=>{console.log(" Clicked comparison ROI:",T.id,"isPrimary:",E),E||j(T)},disabled:E,className:`w-full flex items-center gap-2 p-2 rounded-lg border transition-all text-sm ${A?"bg-purple-500/10 border-purple-500 text-purple-500":E?"bg-background-primary border-border text-text-muted opacity-50 cursor-not-allowed":"bg-background-primary border-border hover:border-purple-500/50 text-text cursor-pointer"}`,whileHover:E?{}:{scale:1.02},whileTap:E?{}:{scale:.98},children:[T.type==="rectangle"?h.jsx(cr,{className:"w-3 h-3"}):h.jsx(_o,{className:"w-3 h-3"}),h.jsxs("span",{children:[s(T.type)," #",M+1,E&&" (Primary)",A&&" (Comparison)"]})]},`comparison-${T.id}`)})})]}),h.jsxs(_i,{mode:"wait",children:[S&&a&&!f&&h.jsxs(Me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"space-y-3",children:[h.jsx("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Mi,{className:"w-4 h-4 text-primary"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("averageGrayValue")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:a.statistics.mean.toFixed(2)})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(M1,{className:"w-4 h-4 text-blue-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("minGrayValue")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:a.statistics.min})]}),h.jsxs("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(qs,{className:"w-4 h-4 text-green-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("maxGrayValue")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:a.statistics.max})]})]}),h.jsx("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bf,{className:"w-4 h-4 text-purple-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("roiArea")})]}),h.jsxs("span",{className:"text-lg font-bold text-text",children:[Math.round(a.area)," ",s("pixels"),""]})]})}),h.jsx("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(w_,{className:"w-4 h-4 text-orange-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("pixelCount")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:a.pixelCount.toLocaleString()})]})}),h.jsx("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Mi,{className:"w-4 h-4 text-indigo-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("standardDeviation")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:a.statistics.stdDev.toFixed(2)})]})}),h.jsxs("div",{className:"p-3 bg-background-primary rounded-lg border border-border",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qs,{className:"w-4 h-4 text-emerald-500"}),h.jsx("span",{className:"text-xs font-medium text-text-muted",children:s("snr")})]}),h.jsx("span",{className:"text-lg font-bold text-text",children:VR(null,a.statistics.mean,a.statistics.stdDev).toFixed(2)})]}),h.jsxs("div",{className:"mt-1 text-xs text-text-muted",children:["/ = ",a.statistics.mean.toFixed(2),"/",a.statistics.stdDev.toFixed(2)]})]}),c&&g&&h.jsxs("div",{className:"p-3 bg-purple-500/10 rounded-lg border border-purple-500/30",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Mi,{className:"w-4 h-4 text-purple-500"}),h.jsx("span",{className:"text-xs font-medium text-purple-300",children:s("cnr")})]}),h.jsx("span",{className:"text-lg font-bold text-purple-100",children:$R(a.statistics,g.statistics).toFixed(2)})]}),h.jsxs("div",{className:"text-xs text-purple-300/80 space-y-1",children:[h.jsxs("div",{children:["ROI 1: =",a.statistics.mean.toFixed(1),", =",a.statistics.stdDev.toFixed(1)]}),h.jsxs("div",{children:["ROI 2: =",g.statistics.mean.toFixed(1),", =",g.statistics.stdDev.toFixed(1)]}),h.jsx("div",{className:"pt-1 border-t border-purple-500/20",children:"CNR = |-| / (+)"})]})]}),h.jsx("div",{className:"p-3 bg-gradient-to-r from-primary/5 to-primary-dark/5 rounded-lg border border-primary/20",children:h.jsx("div",{className:"text-xs text-text-muted",children:h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{children:[s("median"),":"]}),h.jsx("span",{className:"font-mono",children:a.statistics.median.toFixed(2)})]})})})]}),f&&h.jsx(Me.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center p-8",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}),h.jsx("div",{className:"text-xs text-text-muted italic p-3 bg-background-primary rounded-lg",children:s("roiStatsDescription")})]})]}):null},ZR=`
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, and Opera */
  }
`;if(typeof document<"u"&&!document.getElementById("scrollbar-hide-styles")){const e=document.createElement("style");e.id="scrollbar-hide-styles",e.textContent=ZR,document.head.appendChild(e)}const QR=[{Icon:uo,name:"crop",hotkey:"c",category:"edit"},{Icon:zT,name:"brush",hotkey:"b",category:"draw"},{Icon:yf,name:"eraser",hotkey:"e",category:"draw"},{Icon:_o,name:"circle",hotkey:"o",category:"shape"},{Icon:Z_,name:"rectangle",hotkey:"r",category:"shape"},{Icon:Vr,name:"line",hotkey:"l",category:"shape"},{Icon:$T,name:"lineChart",hotkey:"shift+l",category:"shape"},{Icon:_c,name:"move",hotkey:"v",category:"nav"},{Icon:ho,name:"zoom",hotkey:"z",category:"view"},{Icon:Mi,name:"histogram",hotkey:"h",category:"analyze"},{Icon:lr,name:"intensity",hotkey:"i",category:"analyze"},{Icon:Xs,name:"crosshair",hotkey:"x",category:"analyze"},{Icon:zc,name:"pixelCoordinate",hotkey:"p",category:"analyze"},{Icon:UT,name:"roiStats",hotkey:"s",category:"analyze"},{Icon:Fc,name:"grid",hotkey:"shift+g",category:"view"},{Icon:_1,name:"grayscale",hotkey:"g",category:"filter"},{Icon:b_,name:"pan",hotkey:"space",category:"nav"},{Icon:ai,name:"undo",hotkey:"ctrl+z",category:"edit"}],yv=({className:e=""})=>{const{t}=et(),{activeTool:r,applyTool:s,toggleGrayscale:p,undoLastChange:b,clearDrawings:S,imageSettings:d,updateImageSettings:a}=hm(),[l,f]=N.useState(!1),[o,c]=N.useState(!1),[u,g]=N.useState(!1),[y,x]=N.useState(!1),[w,C]=N.useState("#ff0000"),[j,T]=N.useState(5),[M,E]=N.useState(15),[A,R]=N.useState(null),{control:H,watch:K}=dR({defaultValues:{brightness:d.brightness||100,contrast:d.contrast||100,saturation:d.saturation||100}}),X=K(),ne=N.useCallback(()=>{if(window.fabricCanvas){const P=window.fabricCanvas.toDataURL("image/png"),$=document.createElement("a");$.download=`artwork-${Date.now()}.png`,$.href=P,$.click()}},[]),de=N.useCallback(P=>{C(P),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.color=P)},[]),se=N.useCallback(P=>{T(P),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.width=P)},[]),q=N.useCallback(P=>{if(console.log(` Tool selected: ${P}`),P==="grayscale"?p():P==="undo"?b():P==="eraser"?r==="eraser"&&y?x(!1):(r==="eraser"&&!y||s(P),x(!0)):(s(P),x(!1)),window.fabricCanvas){const $=window.fabricCanvas;$.freeDrawingBrush&&($.freeDrawingBrush.color=w,$.freeDrawingBrush.width=j)}},[p,b,s,w,j,r,y]);return Ct("c",()=>q("crop"),{preventDefault:!0}),Ct("b",()=>q("brush"),{preventDefault:!0}),Ct("e",()=>q("eraser"),{preventDefault:!0}),Ct("o",()=>q("circle"),{preventDefault:!0}),Ct("r",()=>q("rectangle"),{preventDefault:!0}),Ct("l",()=>q("line"),{preventDefault:!0}),Ct("shift+l",()=>q("lineChart"),{preventDefault:!0}),Ct("v",()=>q("move"),{preventDefault:!0}),Ct("z",()=>q("zoom"),{preventDefault:!0}),Ct("h",()=>q("histogram"),{preventDefault:!0}),Ct("i",()=>q("intensity"),{preventDefault:!0}),Ct("x",()=>q("crosshair"),{preventDefault:!0}),Ct("p",()=>q("pixelCoordinate"),{preventDefault:!0}),Ct("s",()=>q("roiStats"),{preventDefault:!0}),Ct("shift+g",()=>q("grid"),{preventDefault:!0}),Ct("g",()=>q("grayscale"),{preventDefault:!0}),Ct("space",()=>q("pan"),{preventDefault:!0}),Ct("ctrl+z",()=>q("undo"),{preventDefault:!0}),Ct("ctrl+s",ne,{preventDefault:!0}),Ct("ctrl+shift+c",S,{preventDefault:!0}),Ct("tab",()=>f(!l),{preventDefault:!0}),N.useEffect(()=>{a(X)},[X.brightness,X.contrast,X.saturation,X.grayscale,a]),N.useEffect(()=>{const P=()=>{window.fabricCanvas?R(window.fabricCanvas):setTimeout(P,100)};P()},[]),h.jsxs(Me.div,{className:An("bg-background-secondary h-full flex flex-col border-r border-border shadow-card dark:bg-background-secondary dark:border-border relative",l?"w-48 sm:w-64":"w-12 sm:w-16",e),animate:{width:l?window.innerWidth<640?192:256:window.innerWidth<640?48:64},transition:{duration:.4,ease:[.4,0,.2,1]},children:[h.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 border-b border-border",children:[h.jsx(_i,{children:l&&h.jsxs(Me.h3,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs sm:text-sm font-semibold text-text",children:[h.jsx("span",{className:"hidden sm:inline",children:""}),h.jsx("span",{className:"sm:hidden",children:"Tools"})]})}),h.jsx(Me.button,{onClick:()=>f(!l),className:"p-1.5 sm:p-2 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1},whileTap:{scale:.92},children:l?h.jsx(S1,{size:14,className:"text-primary sm:w-4 sm:h-4"}):h.jsx(C1,{size:14,className:"text-primary sm:w-4 sm:h-4"})})]}),h.jsx("div",{className:"flex-1 py-2 sm:py-4 overflow-y-auto scrollbar-hide",children:h.jsx("div",{className:`flex ${l?"flex-col gap-1 sm:gap-2 px-2 sm:px-3":"flex-col items-center gap-2 sm:gap-4 px-1 sm:px-2"}`,children:QR.map(({Icon:P,name:$,hotkey:V,category:D},O)=>{const L=r===$;return h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:O*.05},children:l?h.jsxs(Me.button,{onClick:()=>q($),className:An("w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl group font-medium shadow-sm hover:shadow-md",L?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[h.jsx(P,{size:16,className:An(L?"drop-shadow-md":"","sm:w-5 sm:h-5")}),h.jsxs("div",{className:"flex-1 text-left min-w-0",children:[h.jsx("div",{className:"text-xs sm:text-sm font-semibold truncate",children:t($)}),h.jsx("div",{className:An("text-xs font-mono",L?"opacity-80":"opacity-50"),children:V})]}),L&&h.jsx(Me.div,{layoutId:"activeIndicator",className:"w-2 h-2 sm:w-2.5 sm:h-2.5 bg-white rounded-full shadow-md flex-shrink-0",animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0}})]}):h.jsxs(Me.div,{className:"relative group",children:[h.jsx(Me.button,{onClick:()=>q($),className:An("p-1.5 sm:p-2.5 rounded-xl shadow-sm hover:shadow-md",L?"bg-gradient-to-br from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text-muted hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.12,y:-2},whileTap:{scale:.93},title:`${t($)} (${V})`,children:h.jsx(P,{size:16,className:An(L?"drop-shadow-md":"","sm:w-5 sm:h-5")})}),L&&h.jsx(Me.div,{layoutId:"compactActiveIndicator",className:"absolute -right-0.5 sm:-right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 sm:h-8 bg-gradient-to-b from-primary to-primary-dark rounded-full shadow-md",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5}})]})},O)})})}),h.jsx(_i,{children:l&&h.jsxs(Me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-border p-2 sm:p-3 space-y-2 sm:space-y-3",children:[h.jsxs(Me.button,{onClick:()=>c(!o),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(_1,{size:16,className:"text-primary sm:w-4 sm:h-5"}),h.jsx("span",{className:"text-xs sm:text-sm font-medium",children:" "}),h.jsx("div",{className:"ml-auto w-4 h-4 sm:w-5 sm:h-5 rounded-lg border-2 border-white shadow-md ring-2 ring-border flex-shrink-0",style:{backgroundColor:w}})]}),h.jsxs(Me.button,{onClick:()=>g(!u),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h.jsx(Pt,{size:16,className:"text-primary sm:w-4 sm:h-5"}),h.jsx("span",{className:"text-xs sm:text-sm font-medium",children:""})]}),h.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[h.jsxs(Me.button,{onClick:ne,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[h.jsx(Xo,{size:14,className:"sm:w-4 sm:h-4"}),h.jsx("span",{className:"text-xs font-semibold",children:""})]}),h.jsxs(Me.button,{onClick:S,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[h.jsx(Ft,{size:14,className:"sm:w-4 sm:h-4"}),h.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]})}),h.jsx(_i,{children:o&&l&&h.jsxs(Me.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50",children:[h.jsxs("div",{className:"mb-3",children:[h.jsx("h4",{className:"text-sm font-medium mb-2",children:" "}),h.jsx(O5,{color:w,onChange:de})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("label",{className:"text-sm font-medium block mb-1",children:[" : ",j,"px"]}),h.jsx("input",{type:"range",min:"1",max:"50",value:j,onChange:P=>se(parseInt(P.target.value)),className:"w-full"})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("label",{className:"text-sm font-medium block mb-1",children:[" : ",M,"px"]}),h.jsx("input",{type:"range",min:"5",max:"100",value:M,onChange:P=>E(parseInt(P.target.value)),className:"w-full"})]}),h.jsx(Me.button,{onClick:()=>c(!1),className:"w-full py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})}),h.jsx(_i,{children:u&&l&&h.jsxs(Me.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50 w-64",children:[h.jsx("h4",{className:"text-sm font-medium mb-3",children:" "}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(X.brightness),"%"]}),h.jsx(nf,{name:"brightness",control:H,render:({field:P})=>h.jsx("input",{...P,type:"range",min:"0",max:"200",className:"w-full"})})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(X.contrast),"%"]}),h.jsx(nf,{name:"contrast",control:H,render:({field:P})=>h.jsx("input",{...P,type:"range",min:"0",max:"200",className:"w-full"})})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(X.saturation),"%"]}),h.jsx(nf,{name:"saturation",control:H,render:({field:P})=>h.jsx("input",{...P,type:"range",min:"0",max:"200",className:"w-full"})})]})]}),h.jsx(Me.button,{onClick:()=>g(!1),className:"w-full mt-4 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})}),h.jsx(_i,{children:r==="eraser"&&A&&y&&h.jsx(Me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"absolute left-full top-0 ml-2 z-50",children:h.jsx(Wf,{canvas:A,isActive:!0,initialSettings:{size:M},onSettingsChange:P=>{E(P.size)},onClose:()=>{x(!1)}})})}),r==="eraser"&&A&&!y&&h.jsx("div",{style:{display:"none"},children:h.jsx(Wf,{canvas:A,isActive:!0,initialSettings:{size:M},onSettingsChange:P=>{E(P.size)},onClose:()=>{}})}),A&&h.jsxs("div",{style:{display:"none"},children:[r==="brush"&&h.jsx(wR,{canvas:A,isActive:r==="brush",brushColor:w,brushWidth:j}),r==="line"&&h.jsx(SR,{canvas:A,isActive:r==="line",lineColor:w,lineWidth:j}),r==="move"&&h.jsx(CR,{canvas:A,isActive:r==="move"})]}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="crop"?"":"hidden"}`,children:h.jsx(kR,{canvas:A,isActive:r==="crop",onClose:()=>s(null)})}),r==="zoom"&&A&&h.jsx("div",{className:"absolute left-full top-0 ml-2 z-50",children:h.jsx(jR,{canvas:A,isActive:r==="zoom",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="histogram"?"":"hidden"}`,children:h.jsx(_R,{canvas:A,isActive:r==="histogram",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="intensity"?"":"hidden"}`,children:h.jsx(ER,{canvas:A,isActive:r==="intensity",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="crosshair"?"":"hidden"}`,children:h.jsx(DR,{canvas:A,isActive:r==="crosshair",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="pixelCoordinate"?"":"hidden"}`,children:h.jsx(RR,{canvas:A,isActive:r==="pixelCoordinate",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="grid"?"":"hidden"}`,children:h.jsx(LR,{canvas:A,isActive:r==="grid",onClose:()=>s(null)})}),A&&h.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="roiStats"?"":"hidden"}`,children:h.jsx(KR,{canvas:A,isActive:r==="roiStats",onClose:()=>s(null)})})]})},JR=({tabs:e})=>{const{i18n:t,t:r}=et();return h.jsx("div",{className:An("flex gap-1 overflow-x-auto scrollbar-hide pb-1",t.language==="fa"?"font-vazir":""),dir:t.language==="fa"?"rtl":"ltr",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.map((s,p)=>h.jsxs(g1,{to:s.to,className:({isActive:b})=>An("px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium flex items-center whitespace-nowrap flex-shrink-0 min-w-fit",b?"tab-active":"tab-inactive"),children:[s.icon,h.jsx("span",{className:An(t.language==="fa"?"mr-1":"ml-1","hidden xs:inline"),children:s.label})]},p))})};function e3(e,t=!0){const{minLevel:r,maxLevel:s,bitDepth:p,isWindowLevelApplied:b}=ng(),S=N.useRef(null);N.useEffect(()=>{const a=r===0&&s===(p===16?65535:255);if(console.log(" useWindowLevel effect triggered:",{enabled:t,hasCanvas:!!e.current,isWindowLevelApplied:b,minLevel:r,maxLevel:s,bitDepth:p,isDefaultRange:a,hasOriginalImage:!!S.current}),!t||!e.current||!b||a){e.current&&S.current&&(console.log(" Restoring original image (disabled or default range)"),bv(e.current,S.current));return}const l=e.current;S.current||(console.log(" Saving original image for first time"),S.current=t3(l)),console.log(" Applying Window/Level:",{minLevel:r,maxLevel:s,bitDepth:p}),n3(l,r,s,p)},[e,r,s,p,b,t]),N.useEffect(()=>()=>{e.current&&S.current&&bv(e.current,S.current)},[e])}function t3(e){if(console.log(" Saving original image..."),e.backgroundImage){const b=e.backgroundImage.getSrc();return console.log(" Saved original Fabric backgroundImage src"),{type:"fabric",src:b}}let t,r,s;if(e.getContext?(t=e.getContext("2d",{willReadFrequently:!0}),r=e.width,s=e.height):e.lowerCanvasEl&&(t=e.lowerCanvasEl.getContext("2d",{willReadFrequently:!0}),r=e.width,s=e.height),t&&r&&s){const p=t.getImageData(0,0,r,s);return console.log(" Saved original HTML Canvas imageData"),{type:"html",imageData:p}}return console.warn(" Could not save original image"),null}function bv(e,t){if(t){if(console.log(" Restoring original image...",t.type),t.type==="fabric"&&e.backgroundImage){e.backgroundImage.setSrc(t.src,()=>{console.log(" Original Fabric backgroundImage restored"),e.renderAll()});return}if(t.type==="html"&&t.imageData){let r;e.getContext?r=e.getContext("2d",{willReadFrequently:!0}):e.lowerCanvasEl&&(r=e.lowerCanvasEl.getContext("2d",{willReadFrequently:!0})),r&&(r.putImageData(t.imageData,0,0),console.log(" Original HTML Canvas imageData restored"),e.renderAll&&e.renderAll())}}}function n3(e,t,r,s){if(console.log(" applyWindowLevel called:",{minLevel:t,maxLevel:r,bitDepth:s}),e.backgroundImage){console.log(" Fabric Canvas with backgroundImage detected");const c=e.backgroundImage,u=document.createElement("canvas");u.width=c.width,u.height=c.height;const g=u.getContext("2d",{willReadFrequently:!0});g.drawImage(c.getElement(),0,0);const y=g.getImageData(0,0,u.width,u.height),x=y.data;if(s===16){console.log(" 16-bit mode: scaling levels from 16-bit to 8-bit range");const w=Math.round(t/65535*255),C=Math.round(r/65535*255);console.log(`   Original: ${t}-${r}`),console.log(`   Scaled: ${w}-${C}`);const j=C-w;if(j===0){console.warn(" Range is zero, skipping Window/Level");return}for(let T=0;T<x.length;T+=4){const M=x[T],E=x[T+1],A=x[T+2];M<=w?x[T]=0:M>=C?x[T]=255:x[T]=Math.round((M-w)/j*255),E<=w?x[T+1]=0:E>=C?x[T+1]=255:x[T+1]=Math.round((E-w)/j*255),A<=w?x[T+2]=0:A>=C?x[T+2]=255:x[T+2]=Math.round((A-w)/j*255)}}else{console.log(" 8-bit mode: using LUT");const w=new Uint8Array(256),C=r-t;if(C===0){console.warn(" Range is zero, skipping Window/Level");return}for(let j=0;j<=255;j++)j<=t?w[j]=0:j>=r?w[j]=255:w[j]=Math.round((j-t)/C*255);for(let j=0;j<x.length;j+=4)x[j]=w[x[j]],x[j+1]=w[x[j+1]],x[j+2]=w[x[j+2]]}g.putImageData(y,0,0),c.setSrc(u.toDataURL(),()=>{console.log(" Window/Level applied successfully"),e.renderAll()});return}let p,b,S;if(e.getContext?(p=e.getContext("2d",{willReadFrequently:!0}),b=e.width,S=e.height):e.lowerCanvasEl&&(p=e.lowerCanvasEl.getContext("2d",{willReadFrequently:!0}),b=e.width,S=e.height),!p)return;const d=p.getImageData(0,0,b,S),a=d.data,l=s===16?65535:255,f=new Uint8Array(l+1),o=r-t;for(let c=0;c<=l;c++)c<=t?f[c]=0:c>=r?f[c]=255:f[c]=Math.round((c-t)/o*255);for(let c=0;c<a.length;c+=4)a[c]=f[a[c]],a[c+1]=f[a[c+1]],a[c+2]=f[a[c+2]];p.putImageData(d,0,0),e.renderAll&&e.renderAll()}const i3=()=>{ti.logRender("BaslerDisplay");const e=N.useRef(null),t=N.useRef(null),r=N.useRef(null),s=N.useRef(null),p=N.useRef(null);N.useRef(null);const b=N.useRef(null);N.useRef(null);const S=N.useRef(null),d=N.useRef(null),a=N.useRef(null),[l,f]=N.useState(!1),[o,c]=N.useState({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),[u,g]=N.useState({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),{cameras:y,addFrameCallback:x,activeTool:w,drawings:C,toolDrawings:j,isDrawing:T,currentPath:M,imageSettings:E,cursorPosition:A,startDrawing:R,continueDrawing:H,finishDrawing:K,addToolDrawing:X,wsStatus:ne,panImage:de}=hm(),{resetToOriginal:se}=P1(),{t:q}=et(),P=N.useRef(null);N.useEffect(()=>{a.current=w,console.log(" activeToolRef updated to:",w)},[w]),N.useEffect(()=>{const re=x(ge=>{if(ge!=="basler")return;const Y=y.basler.currentFrame;!Y||Y===P.current||(P.current=Y,t.current&&z())});return()=>re()},[y,x]);const $=N.useCallback(W=>{c(re=>({...re,[W]:!re[W]}))},[]),V=N.useCallback((W,re)=>{g(ge=>({...ge,[W]:parseFloat(re)}))},[]),D=N.useCallback(()=>{c({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),g({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),se()},[se]),O=N.useCallback(W=>{W.path&&W.path.set({selectable:w==="move",evented:w==="move",hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4}),w==="eraser"&&t.current&&t.current.contextTop&&(t.current.contextTop.globalCompositeOperation="source-over")},[w]),L=N.useCallback(()=>{},[]),I=N.useCallback(W=>{if(!t.current)return;const re=t.current.getPointer(W.e),ge=a.current;if(console.log(" Mouse Down - currentTool from ref:",ge),console.log(" Pointer:",re),console.log(' currentTool === "rectangle":',ge==="rectangle"),ge==="rectangle"){console.log(" Starting rectangle draw at:",re),t.current.discardActiveObject(),t.current.renderAll(),console.log(" Deselected previous objects"),d.current=re;const Y=`roi-rectangle-${Date.now()}`,ee=new Ve.fabric.Rect({left:re.x,top:re.y,width:0,height:0,fill:"rgba(0, 255, 0, 0.1)",stroke:"#00ff00",strokeWidth:1,selectable:!1,evented:!1,hasRotatingPoint:!1,name:Y,originX:"left",originY:"top"});t.current.add(ee),S.current=ee,t.current.renderAll(),console.log(" Rectangle object created")}else console.log(" Not rectangle tool, current tool is:",ge);ge==="pan"&&(p.current=re)},[]),G=N.useCallback(W=>{if(!t.current)return;const re=t.current.getPointer(W.e),ge=a.current;if(ge==="rectangle"&&S.current&&d.current){const Y=S.current,ee=d.current,J=re.x-ee.x,xe=re.y-ee.y;J>0?Y.set({left:ee.x,width:J}):Y.set({left:re.x,width:Math.abs(J)}),xe>0?Y.set({top:ee.y,height:xe}):Y.set({top:re.y,height:Math.abs(xe)}),t.current.renderAll()}if(ge==="eraser"&&t.current.contextTop&&(t.current.contextTop.globalCompositeOperation="destination-out"),ge==="pan"&&W.e.buttons===1&&p.current){const Y={x:re.x-p.current.x,y:re.y-p.current.y};de(Y.x,Y.y),p.current=re}t.current._isCurrentlyDrawing&&t.current.renderAll()},[de]),B=N.useCallback(()=>{t.current&&(t.current._isCurrentlyDrawing=!1);const W=a.current;if(console.log(" Mouse Up - currentTool from ref:",W,"Drawing Rect:",!!S.current),W==="rectangle"&&S.current){const re=S.current;console.log(" Finishing rectangle - Size:",re.width,"x",re.height),re.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockRotation:!1,lockMovementX:!1,lockMovementY:!1,cornerSize:8,cornerColor:"#00ff00",cornerStyle:"circle",borderColor:"#00ff00",transparentCorners:!1,originX:"left",originY:"top",padding:0,strokeUniform:!0,objectCaching:!1,noScaleCache:!0,borderDashArray:null,borderOpacityWhenMoving:.4}),console.log(" Rectangle properties set:",{selectable:re.selectable,evented:re.evented,width:re.width,height:re.height,left:re.left,top:re.top}),t.current.setActiveObject(re),t.current.renderAll(),console.log(" Rectangle ROI created and made active"),console.log(" Total objects on canvas:",t.current.getObjects().length),window.dispatchEvent(new CustomEvent("roiAdded",{detail:{roi:re}})),console.log(" Dispatched roiAdded event"),S.current=null,d.current=null}p.current=null},[]);N.useEffect(()=>{if(e.current&&!t.current){const W=new Ve.fabric.Canvas(e.current,{width:640,height:480,backgroundColor:"transparent",selection:!0,preserveObjectStacking:!0,enableRetinaScaling:!0,perPixelTargetFind:!0});return t.current=W,te(W),W.on("path:created",O),W.on("object:added",L),W.on("mouse:down",I),W.on("mouse:move",G),W.on("mouse:up",B),W.on("object:moving",re=>{const ge=re.target,Y=5;ge.left<Y&&(ge.left=Y),ge.left+ge.width*ge.scaleX>W.width-Y&&(ge.left=W.width-ge.width*ge.scaleX-Y),ge.top<Y&&(ge.top=Y),ge.top+ge.height*ge.scaleY>W.height-Y&&(ge.top=W.height-ge.height*ge.scaleY-Y)}),W.on("object:scaling",re=>{const ge=re.target,Y=5,ee=ge.width*ge.scaleX,J=ge.height*ge.scaleY;ge.left+ee>W.width-Y&&(ge.scaleX=(W.width-ge.left-Y)/ge.width),ge.top+J>W.height-Y&&(ge.scaleY=(W.height-ge.top-Y)/ge.height),ge.left<Y&&(ge.left=Y),ge.top<Y&&(ge.top=Y)}),W.on("object:added",re=>{re.target===W.backgroundImage&&re.target.set({selectable:!1,evented:!1,excludeFromExport:!1})}),()=>{W.dispose(),t.current=null}}},[]),e3(t,!0);const z=N.useCallback(async()=>{const W=y.basler.currentFrame;if(!t.current||!W)return;const re=JSON.stringify({frame:W.substring(0,100),activeFilters:o,processingParams:u});if(b.current===re)return;b.current=re,console.log(" Updating Fabric.js background image (frame or filter changed)");const ge=Object.values(o).some(ee=>ee)||u.brightness!==0||u.contrast!==0||u.rotation!==0;let Y=W;if(ge)try{console.log(" [FILTER] Starting image processing..."),console.log(" [FILTER] Active filters:",JSON.stringify(o)),console.log(" [FILTER] Processing params:",JSON.stringify(u));const ee=performance.now();if(await Ie.loadImage(W),console.log(` [FILTER] Image loaded in ${(performance.now()-ee).toFixed(2)}ms`),o.grayscale){const xe=performance.now();Ie.convertToGrayscale(),console.log(` [FILTER] Grayscale applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.denoising){const xe=performance.now();Ie.applyGaussianFilter(u.gaussianSigma),console.log(` [FILTER] Gaussian (=${u.gaussianSigma}) applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.median){const xe=performance.now();Ie.applyMedianFilter(3),console.log(` [FILTER] Median applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.sharpening){const xe=performance.now();Ie.applySharpen(u.sharpenFactor),console.log(` [FILTER] Sharpen (factor=${u.sharpenFactor}) applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.sobel||o.edgeEnhancement){const xe=performance.now();Ie.applySobelFilter(),console.log(` [FILTER] Sobel edge detection applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.histogramEq){const xe=performance.now();Ie.applyHistogramEqualization(),console.log(` [FILTER] Histogram Equalization applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(o.invert){const xe=performance.now();Ie.applyInvert(),console.log(` [FILTER] Invert applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(u.brightness!==0){const xe=performance.now();Ie.adjustBrightness(u.brightness),console.log(` [FILTER] Brightness (${u.brightness}) applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(u.contrast!==0){const xe=performance.now();Ie.adjustContrast(u.contrast),console.log(` [FILTER] Contrast (${u.contrast}) applied in ${(performance.now()-xe).toFixed(2)}ms`)}if(u.rotation!==0){const xe=performance.now();Ie.applyRotation(u.rotation),console.log(` [FILTER] Rotation (${u.rotation}) applied in ${(performance.now()-xe).toFixed(2)}ms`)}const J=Ie.getImageDataURL(!0);if(J){const xe=(J.length/1024).toFixed(2);Y=J,console.log(` [FILTER] Processed image ready (${xe} KB)`),console.log(` [FILTER] Image preview: ${Y.substring(0,50)}...`)}else console.error(" [FILTER] CRITICAL: No processed image returned!")}catch(ee){console.error(" [FILTER] Error processing image:",ee),console.error(" [FILTER] Error stack:",ee.stack)}Ve.fabric.Image.fromURL(Y,ee=>{const J=t.current.width||640,xe=t.current.height||480;ee.set({left:0,top:0,scaleX:J/ee.width,scaleY:xe/ee.height,selectable:!1,evented:!1,excludeFromExport:!1});const Ce=[];E.brightness!==100&&Ce.push(new Ve.fabric.Image.filters.Brightness({brightness:(E.brightness-100)/100})),E.contrast!==100&&Ce.push(new Ve.fabric.Image.filters.Contrast({contrast:(E.contrast-100)/100})),E.grayscale&&Ce.push(new Ve.fabric.Image.filters.Grayscale),ee.filters=Ce,ee.applyFilters(),t.current.setBackgroundImage(ee,t.current.renderAll.bind(t.current))})},[E,o,u,y]),te=N.useCallback(W=>{W&&(console.log(" setupFabricTools - Active Tool:",w),W.isDrawingMode=!1,W.selection=!0,W.defaultCursor="default",W.hoverCursor="move",w==="move"||w==="rectangle"?(console.log(" Making objects selectable for tool:",w),W.getObjects().forEach(re=>{re!==W.backgroundImage&&re.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4})})):(console.log(" Making objects non-selectable for tool:",w),W.getObjects().forEach(re=>{re!==W.backgroundImage&&re.set({selectable:!1,evented:!1})})),w==="crop"||w==="eraser"?(W.selection=!1,W.defaultCursor="crosshair",W.hoverCursor="crosshair"):w==="move"?(W.selection=!0,W.defaultCursor="default",W.hoverCursor="move"):w==="rectangle"?(W.selection=!0,W.defaultCursor="crosshair",W.hoverCursor="crosshair",console.log(" Rectangle tool configured")):(w==="brush"||w==="line")&&(W.isDrawingMode=!0,W.selection=!1,W.defaultCursor="crosshair",W.hoverCursor="crosshair"),W.renderAll(),console.log(" setupFabricTools complete - Objects count:",W.getObjects().length))},[w]);N.useEffect(()=>{console.log(" activeTool changed to:",w),t.current&&w&&te(t.current)},[w,te]),N.useEffect(()=>{if(t.current&&w){const W=setTimeout(()=>{t.current&&!t.current.backgroundImage&&y.basler.currentFrame&&z()},100);return()=>clearTimeout(W)}},[w,z,y]),N.useEffect(()=>{t.current&&y.basler.currentFrame&&z()},[o,u,z,y]),N.useEffect(()=>{const W=re=>{e.current&&re.detail&&(e.current.width=re.detail.width,e.current.height=re.detail.height,e.current.style.width=`${re.detail.width}px`,e.current.style.height=`${re.detail.height}px`),t.current&&t.current.renderAll()};return window.addEventListener("canvasResized",W),()=>{window.removeEventListener("canvasResized",W)}},[]),N.useEffect(()=>{if(t.current){const W=setTimeout(()=>{t.current&&t.current.renderAll()},50);return()=>clearTimeout(W)}},[w,y]);const Q=N.useCallback(()=>{if(!t.current||!t.current.backgroundImage)return;const W=t.current.backgroundImage,re=[];E.brightness!==100&&re.push(new Ve.fabric.Image.filters.Brightness({brightness:(E.brightness-100)/100})),E.contrast!==100&&re.push(new Ve.fabric.Image.filters.Contrast({contrast:(E.contrast-100)/100})),E.grayscale&&re.push(new Ve.fabric.Image.filters.Grayscale),W.filters=re,W.applyFilters(),t.current.renderAll()},[E.brightness,E.contrast,E.grayscale]);N.useEffect(()=>{Q()},[Q]);const ue=N.useCallback(()=>{if(!t.current)return;const W=t.current.backgroundImage;t.current.getObjects().forEach(ge=>{ge!==t.current.backgroundImage&&t.current.remove(ge)}),W?t.current.setBackgroundImage(W,t.current.renderAll.bind(t.current)):y.basler.currentFrame&&z()},[z]),le=N.useCallback(()=>{if(!t.current)return;t.current.getObjects().forEach(re=>{re!==t.current.backgroundImage&&t.current.remove(re)}),t.current.renderAll()},[]),ie=N.useCallback(()=>{if(!t.current)return;const W=t.current.getObjects();for(let re=W.length-1;re>=0;re--)if(W[re]!==t.current.backgroundImage){t.current.remove(W[re]);break}},[]);N.useEffect(()=>{t.current&&window&&(window.fabricCanvas=t.current,window.clearFabricCanvas=ue,window.clearAllUserObjects=le,window.undoLastFabricAction=ie)},[ue,le,ie]);const Z=N.useCallback(()=>{},[C,j,T,M,w,E,y]),fe=N.useCallback(W=>{const re=e.current;if(!re)return{x:0,y:0,rawX:0,rawY:0};const ge=re.getBoundingClientRect(),Y=W.clientX-ge.left,ee=W.clientY-ge.top,J=t.current,xe=J?J.width:re.width,Ce=J?J.height:re.height;(Math.abs(xe-re.width)>10||Math.abs(Ce-re.height)>10)&&console.log(" Canvas dimensions mismatch - Fabric:",xe,"x",Ce,"HTML:",re.width,"x",re.height);const ke=xe/ge.width,Ne=Ce/ge.height,Oe=Y*ke,ze=ee*Ne,$e=Math.max(0,Math.min(xe,Oe)),Ht=Math.max(0,Math.min(Ce,ze)),zt=($e-E.panOffset.x)/E.zoom,Wt=(Ht-E.panOffset.y)/E.zoom;return{x:zt,y:Wt,rawX:$e,rawY:Ht,clientX:Y,clientY:ee}},[E.zoom,E.panOffset]),ae=N.useCallback(W=>{if(w==="pan"&&E.zoom>1){const re=fe(W);p.current={x:re.rawX,y:re.rawY},t.current&&(t.current.defaultCursor="grabbing")}},[w,E,fe]),ce=N.useCallback(W=>{if(w==="pan"&&p.current&&E.zoom>1){const re=fe(W),ge=re.rawX-p.current.x,Y=re.rawY-p.current.y;de(ge,Y),p.current={x:re.rawX,y:re.rawY}}},[w,E.zoom,de,fe]),me=N.useCallback(()=>{w==="pan"&&(p.current=null,t.current&&(t.current.defaultCursor="crosshair"))},[w]);N.useEffect(()=>{if(y.basler.currentFrame&&r.current){const W=r.current;W.src&&W.src.startsWith("data:")&&URL.revokeObjectURL(W.src),W.src=y.basler.currentFrame,W.onload=()=>{const re=e.current;if(re&&W){const ge=W.naturalWidth||640,Y=W.naturalHeight||480,ee=t.current;(!ee||ee.width===640&&ee.height===480)&&(re.width=ge,re.height=Y)}Z()},W.onerror=re=>{console.error(" Error loading Basler image:",re)}}},[Z,y]),N.useEffect(()=>{Z()},[Z]);const be=N.useCallback(W=>{if(!W)return"No data";try{return new Date(W).toLocaleTimeString()}catch{return"Invalid time"}},[]);return h.jsxs("div",{ref:s,className:"w-full h-full bg-black rounded-lg overflow-hidden relative flex flex-col",children:[h.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10",children:[h.jsxs("button",{onClick:()=>f(!l),className:"w-full bg-gradient-to-b from-black/90 to-black/70 text-white px-4 py-2 flex items-center justify-between hover:from-black/95 hover:to-black/75 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wn,{size:18,className:"text-primary"}),h.jsx("span",{className:"text-sm font-medium",children:q("imageProcessing")||" "}),Object.values(o).some(W=>W)&&h.jsx("span",{className:"text-xs bg-primary text-white px-2 py-0.5 rounded-full",children:Object.values(o).filter(W=>W).length})]}),l?h.jsx(xf,{size:18}):h.jsx(Pc,{size:18})]}),l&&h.jsxs("div",{className:"bg-gradient-to-b from-black/95 to-black/85 text-white p-4 max-h-96 overflow-y-auto backdrop-blur-sm",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"text-xs font-semibold mb-2 flex items-center gap-2",children:[h.jsx($r,{size:14,className:"text-primary"}),q("quickFilters")||" "]}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[h.jsx("button",{onClick:()=>$("grayscale"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.grayscale?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("grayscale")||""}),h.jsx("button",{onClick:()=>$("denoising"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.denoising?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("denoising")||" "}),h.jsx("button",{onClick:()=>$("sharpening"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.sharpening?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("sharpening")||""}),h.jsx("button",{onClick:()=>$("sobel"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.sobel?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("edgeDetection")||" "}),h.jsx("button",{onClick:()=>$("median"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.median?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("medianFilter")||" "}),h.jsx("button",{onClick:()=>$("histogramEq"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.histogramEq?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("histogramEq")||""}),h.jsx("button",{onClick:()=>$("invert"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${o.invert?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:q("invert")||""}),h.jsxs("button",{onClick:D,className:"px-3 py-2 rounded text-xs font-medium bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-all flex items-center justify-center gap-1",children:[h.jsx(ai,{size:12}),q("reset")||""]})]})]}),h.jsxs("div",{className:"space-y-3",children:[o.denoising&&h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[q("gaussianSigma")||" Gaussian",": ",u.gaussianSigma]}),h.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:u.gaussianSigma,onChange:W=>V("gaussianSigma",W.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),o.sharpening&&h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[q("sharpenFactor")||" ",": ",u.sharpenFactor]}),h.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:u.sharpenFactor,onChange:W=>V("sharpenFactor",W.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[q("brightness")||"",": ",u.brightness]}),h.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:u.brightness,onChange:W=>V("brightness",W.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[q("contrast")||"",": ",u.contrast]}),h.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:u.contrast,onChange:W=>V("contrast",W.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[q("rotation")||"",": ",u.rotation,""]}),h.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:u.rotation,onChange:W=>V("rotation",W.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]})]})]})]}),h.jsxs("div",{className:"flex-1 flex justify-center items-center relative",children:[h.jsx("img",{ref:r,style:{display:"none"},alt:"Basler frame"}),h.jsx("canvas",{ref:e,width:640,height:480,className:"w-full h-full object-contain cursor-crosshair mx-auto",onMouseDown:ae,onMouseMove:ce,onMouseUp:me,onMouseLeave:me,style:{maxWidth:"100%",maxHeight:"100%",display:"block",imageRendering:"high-quality"}}),!y.basler.currentFrame&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsxs("div",{className:"text-center p-4",children:[h.jsxs("div",{className:"text-white text-xs sm:text-sm mb-2",children:[ne==="connecting"&&"   ...",ne==="connected"&&"    ...",ne==="reconnecting"&&"    ...",ne==="error"&&"     ",ne==="failed"&&"   -  ",ne==="disconnected"&&"    "]}),(ne==="error"||ne==="failed")&&h.jsx("div",{className:"text-gray-400 text-xs",children:"    "})]})}),h.jsxs("div",{className:"absolute top-1 sm:top-2 left-1 sm:left-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm font-mono",children:[h.jsxs("span",{className:"hidden sm:inline",children:["X: ",Math.round(A.x)," | Y: ",Math.round(A.y)]}),h.jsxs("span",{className:"sm:hidden",children:[Math.round(A.x),",",Math.round(A.y)]})]}),w&&h.jsxs("div",{className:"absolute top-1 sm:top-2 right-1 sm:right-2 bg-primary text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm",children:[h.jsx("span",{className:"hidden sm:inline",children:w}),h.jsx("span",{className:"sm:hidden",children:w.charAt(0)})]}),h.jsx("div",{className:`absolute bottom-1 sm:bottom-2 left-1 sm:left-2 w-2 h-2 sm:w-3 sm:h-3 rounded-full ${y.basler.isConnected&&y.basler.currentFrame?"bg-green-500":"bg-red-500"}`}),y.basler.lastUpdate&&h.jsxs("div",{className:"absolute bottom-1 sm:bottom-2 right-1 sm:right-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:[h.jsx("div",{className:"hidden sm:block",children:be(y.basler.lastUpdate)}),h.jsx("div",{className:"sm:hidden text-xs",children:be(y.basler.lastUpdate).split(" ")[1]}),y.basler.avgFps>0&&h.jsxs("div",{className:"text-green-400 text-xs",children:[h.jsxs("span",{className:"hidden sm:inline",children:["FPS: ",y.basler.avgFps," | Frames: ",y.basler.frameCount]}),h.jsxs("span",{className:"sm:hidden",children:[y.basler.avgFps,"fps"]})]})]})]})]})},KS=Le.memo(i3);function Ac(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r3(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ZS(e){let t,r,s;e.length!==2?(t=Ac,r=(d,a)=>Ac(e(d),a),s=(d,a)=>e(d)-a):(t=e===Ac||e===r3?e:s3,r=e,s=e);function p(d,a,l=0,f=d.length){if(l<f){if(t(a,a)!==0)return f;do{const o=l+f>>>1;r(d[o],a)<0?l=o+1:f=o}while(l<f)}return l}function b(d,a,l=0,f=d.length){if(l<f){if(t(a,a)!==0)return f;do{const o=l+f>>>1;r(d[o],a)<=0?l=o+1:f=o}while(l<f)}return l}function S(d,a,l=0,f=d.length){const o=p(d,a,l,f-1);return o>l&&s(d[o-1],a)>-s(d[o],a)?o-1:o}return{left:p,center:S,right:b}}function s3(){return 0}function a3(e){return e===null?NaN:+e}const o3=ZS(Ac),l3=o3.right;ZS(a3).center;const c3=Math.sqrt(50),u3=Math.sqrt(10),d3=Math.sqrt(2);function Wc(e,t,r){const s=(t-e)/Math.max(0,r),p=Math.floor(Math.log10(s)),b=s/Math.pow(10,p),S=b>=c3?10:b>=u3?5:b>=d3?2:1;let d,a,l;return p<0?(l=Math.pow(10,-p)/S,d=Math.round(e*l),a=Math.round(t*l),d/l<e&&++d,a/l>t&&--a,l=-l):(l=Math.pow(10,p)*S,d=Math.round(e/l),a=Math.round(t/l),d*l<e&&++d,a*l>t&&--a),a<d&&.5<=r&&r<2?Wc(e,t,r*2):[d,a,l]}function h3(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[p,b,S]=s?Wc(t,e,r):Wc(e,t,r);if(!(b>=p))return[];const d=b-p+1,a=new Array(d);if(s)if(S<0)for(let l=0;l<d;++l)a[l]=(b-l)/-S;else for(let l=0;l<d;++l)a[l]=(b-l)*S;else if(S<0)for(let l=0;l<d;++l)a[l]=(p+l)/-S;else for(let l=0;l<d;++l)a[l]=(p+l)*S;return a}function Kf(e,t,r){return t=+t,e=+e,r=+r,Wc(e,t,r)[2]}function f3(e,t,r){t=+t,e=+e,r=+r;const s=t<e,p=s?Kf(t,e,r):Kf(e,t,r);return(s?-1:1)*(p<0?1/-p:p)}function m3(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function sg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function QS(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function el(){}var Fo=.7,Kc=1/Fo,Gs="\\s*([+-]?\\d+)\\s*",zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g3=/^#([0-9a-f]{3,8})$/,p3=new RegExp(`^rgb\\(${Gs},${Gs},${Gs}\\)$`),x3=new RegExp(`^rgb\\(${si},${si},${si}\\)$`),y3=new RegExp(`^rgba\\(${Gs},${Gs},${Gs},${zo}\\)$`),b3=new RegExp(`^rgba\\(${si},${si},${si},${zo}\\)$`),v3=new RegExp(`^hsl\\(${zo},${si},${si}\\)$`),w3=new RegExp(`^hsla\\(${zo},${si},${si},${zo}\\)$`),vv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sg(el,Io,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wv,formatHex:wv,formatHex8:S3,formatHsl:C3,formatRgb:Sv,toString:Sv});function wv(){return this.rgb().formatHex()}function S3(){return this.rgb().formatHex8()}function C3(){return JS(this).formatHsl()}function Sv(){return this.rgb().formatRgb()}function Io(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=g3.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Cv(t):r===3?new hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?wc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?wc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=p3.exec(e))?new hn(t[1],t[2],t[3],1):(t=x3.exec(e))?new hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y3.exec(e))?wc(t[1],t[2],t[3],t[4]):(t=b3.exec(e))?wc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=v3.exec(e))?Tv(t[1],t[2]/100,t[3]/100,1):(t=w3.exec(e))?Tv(t[1],t[2]/100,t[3]/100,t[4]):vv.hasOwnProperty(e)?Cv(vv[e]):e==="transparent"?new hn(NaN,NaN,NaN,0):null}function Cv(e){return new hn(e>>16&255,e>>8&255,e&255,1)}function wc(e,t,r,s){return s<=0&&(e=t=r=NaN),new hn(e,t,r,s)}function k3(e){return e instanceof el||(e=Io(e)),e?(e=e.rgb(),new hn(e.r,e.g,e.b,e.opacity)):new hn}function Zf(e,t,r,s){return arguments.length===1?k3(e):new hn(e,t,r,s??1)}function hn(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}sg(hn,Zf,QS(el,{brighter(e){return e=e==null?Kc:Math.pow(Kc,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fo:Math.pow(Fo,e),new hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hn(Yr(this.r),Yr(this.g),Yr(this.b),Zc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kv,formatHex:kv,formatHex8:j3,formatRgb:jv,toString:jv}));function kv(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}`}function j3(){return`#${Ir(this.r)}${Ir(this.g)}${Ir(this.b)}${Ir((isNaN(this.opacity)?1:this.opacity)*255)}`}function jv(){const e=Zc(this.opacity);return`${e===1?"rgb(":"rgba("}${Yr(this.r)}, ${Yr(this.g)}, ${Yr(this.b)}${e===1?")":`, ${e})`}`}function Zc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ir(e){return e=Yr(e),(e<16?"0":"")+e.toString(16)}function Tv(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hn(e,t,r,s)}function JS(e){if(e instanceof Hn)return new Hn(e.h,e.s,e.l,e.opacity);if(e instanceof el||(e=Io(e)),!e)return new Hn;if(e instanceof Hn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,p=Math.min(t,r,s),b=Math.max(t,r,s),S=NaN,d=b-p,a=(b+p)/2;return d?(t===b?S=(r-s)/d+(r<s)*6:r===b?S=(s-t)/d+2:S=(t-r)/d+4,d/=a<.5?b+p:2-b-p,S*=60):d=a>0&&a<1?0:S,new Hn(S,d,a,e.opacity)}function T3(e,t,r,s){return arguments.length===1?JS(e):new Hn(e,t,r,s??1)}function Hn(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}sg(Hn,T3,QS(el,{brighter(e){return e=e==null?Kc:Math.pow(Kc,e),new Hn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fo:Math.pow(Fo,e),new Hn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,p=2*r-s;return new hn(uf(e>=240?e-240:e+120,p,s),uf(e,p,s),uf(e<120?e+240:e-120,p,s),this.opacity)},clamp(){return new Hn(_v(this.h),Sc(this.s),Sc(this.l),Zc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zc(this.opacity);return`${e===1?"hsl(":"hsla("}${_v(this.h)}, ${Sc(this.s)*100}%, ${Sc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _v(e){return e=(e||0)%360,e<0?e+360:e}function Sc(e){return Math.max(0,Math.min(1,e||0))}function uf(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ag=e=>()=>e;function _3(e,t){return function(r){return e+r*t}}function N3(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function M3(e){return(e=+e)==1?e2:function(t,r){return r-t?N3(t,r,e):ag(isNaN(t)?r:t)}}function e2(e,t){var r=t-e;return r?_3(e,r):ag(isNaN(e)?t:e)}const Nv=function e(t){var r=M3(t);function s(p,b){var S=r((p=Zf(p)).r,(b=Zf(b)).r),d=r(p.g,b.g),a=r(p.b,b.b),l=e2(p.opacity,b.opacity);return function(f){return p.r=S(f),p.g=d(f),p.b=a(f),p.opacity=l(f),p+""}}return s.gamma=e,s}(1);function E3(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),p;return function(b){for(p=0;p<r;++p)s[p]=e[p]*(1-b)+t[p]*b;return s}}function O3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function D3(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,p=new Array(s),b=new Array(r),S;for(S=0;S<s;++S)p[S]=og(e[S],t[S]);for(;S<r;++S)b[S]=t[S];return function(d){for(S=0;S<s;++S)b[S]=p[S](d);return b}}function A3(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function Qc(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function R3(e,t){var r={},s={},p;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(p in t)p in e?r[p]=og(e[p],t[p]):s[p]=t[p];return function(b){for(p in r)s[p]=r[p](b);return s}}var Qf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,df=new RegExp(Qf.source,"g");function P3(e){return function(){return e}}function L3(e){return function(t){return e(t)+""}}function F3(e,t){var r=Qf.lastIndex=df.lastIndex=0,s,p,b,S=-1,d=[],a=[];for(e=e+"",t=t+"";(s=Qf.exec(e))&&(p=df.exec(t));)(b=p.index)>r&&(b=t.slice(r,b),d[S]?d[S]+=b:d[++S]=b),(s=s[0])===(p=p[0])?d[S]?d[S]+=p:d[++S]=p:(d[++S]=null,a.push({i:S,x:Qc(s,p)})),r=df.lastIndex;return r<t.length&&(b=t.slice(r),d[S]?d[S]+=b:d[++S]=b),d.length<2?a[0]?L3(a[0].x):P3(t):(t=a.length,function(l){for(var f=0,o;f<t;++f)d[(o=a[f]).i]=o.x(l);return d.join("")})}function og(e,t){var r=typeof t,s;return t==null||r==="boolean"?ag(t):(r==="number"?Qc:r==="string"?(s=Io(t))?(t=s,Nv):F3:t instanceof Io?Nv:t instanceof Date?A3:O3(t)?E3:Array.isArray(t)?D3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R3:Qc)(e,t)}function z3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function I3(e){return function(){return e}}function B3(e){return+e}var Mv=[0,1];function Us(e){return e}function Jf(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:I3(isNaN(t)?NaN:.5)}function V3(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function $3(e,t,r){var s=e[0],p=e[1],b=t[0],S=t[1];return p<s?(s=Jf(p,s),b=r(S,b)):(s=Jf(s,p),b=r(b,S)),function(d){return b(s(d))}}function H3(e,t,r){var s=Math.min(e.length,t.length)-1,p=new Array(s),b=new Array(s),S=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++S<s;)p[S]=Jf(e[S],e[S+1]),b[S]=r(t[S],t[S+1]);return function(d){var a=l3(e,d,1,s)-1;return b[a](p[a](d))}}function U3(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function X3(){var e=Mv,t=Mv,r=og,s,p,b,S=Us,d,a,l;function f(){var c=Math.min(e.length,t.length);return S!==Us&&(S=V3(e[0],e[c-1])),d=c>2?H3:$3,a=l=null,o}function o(c){return c==null||isNaN(c=+c)?b:(a||(a=d(e.map(s),t,r)))(s(S(c)))}return o.invert=function(c){return S(p((l||(l=d(t,e.map(s),Qc)))(c)))},o.domain=function(c){return arguments.length?(e=Array.from(c,B3),f()):e.slice()},o.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},o.rangeRound=function(c){return t=Array.from(c),r=z3,f()},o.clamp=function(c){return arguments.length?(S=c?!0:Us,f()):S!==Us},o.interpolate=function(c){return arguments.length?(r=c,f()):r},o.unknown=function(c){return arguments.length?(b=c,o):b},function(c,u){return s=c,p=u,f()}}function Y3(){return X3()(Us,Us)}function G3(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jc(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Ks(e){return e=Jc(Math.abs(e)),e?e[1]:NaN}function q3(e,t){return function(r,s){for(var p=r.length,b=[],S=0,d=e[0],a=0;p>0&&d>0&&(a+d+1>s&&(d=Math.max(1,s-a)),b.push(r.substring(p-=d,p+d)),!((a+=d+1)>s));)d=e[S=(S+1)%e.length];return b.reverse().join(t)}}function W3(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var K3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function eu(e){if(!(t=K3.exec(e)))throw new Error("invalid format: "+e);var t;return new lg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}eu.prototype=lg.prototype;function lg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z3(e){e:for(var t=e.length,r=1,s=-1,p;r<t;++r)switch(e[r]){case".":s=p=r;break;case"0":s===0&&(s=r),p=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(p+1):e}var t2;function Q3(e,t){var r=Jc(e,t);if(!r)return e+"";var s=r[0],p=r[1],b=p-(t2=Math.max(-8,Math.min(8,Math.floor(p/3)))*3)+1,S=s.length;return b===S?s:b>S?s+new Array(b-S+1).join("0"):b>0?s.slice(0,b)+"."+s.slice(b):"0."+new Array(1-b).join("0")+Jc(e,Math.max(0,t+b-1))[0]}function Ev(e,t){var r=Jc(e,t);if(!r)return e+"";var s=r[0],p=r[1];return p<0?"0."+new Array(-p).join("0")+s:s.length>p+1?s.slice(0,p+1)+"."+s.slice(p+1):s+new Array(p-s.length+2).join("0")}const Ov={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:G3,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ev(e*100,t),r:Ev,s:Q3,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Dv(e){return e}var Av=Array.prototype.map,Rv=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function J3(e){var t=e.grouping===void 0||e.thousands===void 0?Dv:q3(Av.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",p=e.decimal===void 0?".":e.decimal+"",b=e.numerals===void 0?Dv:W3(Av.call(e.numerals,String)),S=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function l(o){o=eu(o);var c=o.fill,u=o.align,g=o.sign,y=o.symbol,x=o.zero,w=o.width,C=o.comma,j=o.precision,T=o.trim,M=o.type;M==="n"?(C=!0,M="g"):Ov[M]||(j===void 0&&(j=12),T=!0,M="g"),(x||c==="0"&&u==="=")&&(x=!0,c="0",u="=");var E=y==="$"?r:y==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",A=y==="$"?s:/[%p]/.test(M)?S:"",R=Ov[M],H=/[defgprs%]/.test(M);j=j===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function K(X){var ne=E,de=A,se,q,P;if(M==="c")de=R(X)+de,X="";else{X=+X;var $=X<0||1/X<0;if(X=isNaN(X)?a:R(Math.abs(X),j),T&&(X=Z3(X)),$&&+X==0&&g!=="+"&&($=!1),ne=($?g==="("?g:d:g==="-"||g==="("?"":g)+ne,de=(M==="s"?Rv[8+t2/3]:"")+de+($&&g==="("?")":""),H){for(se=-1,q=X.length;++se<q;)if(P=X.charCodeAt(se),48>P||P>57){de=(P===46?p+X.slice(se+1):X.slice(se))+de,X=X.slice(0,se);break}}}C&&!x&&(X=t(X,1/0));var V=ne.length+X.length+de.length,D=V<w?new Array(w-V+1).join(c):"";switch(C&&x&&(X=t(D+X,D.length?w-de.length:1/0),D=""),u){case"<":X=ne+X+de+D;break;case"=":X=ne+D+X+de;break;case"^":X=D.slice(0,V=D.length>>1)+ne+X+de+D.slice(V);break;default:X=D+ne+X+de;break}return b(X)}return K.toString=function(){return o+""},K}function f(o,c){var u=l((o=eu(o),o.type="f",o)),g=Math.max(-8,Math.min(8,Math.floor(Ks(c)/3)))*3,y=Math.pow(10,-g),x=Rv[8+g/3];return function(w){return u(y*w)+x}}return{format:l,formatPrefix:f}}var Cc,n2,i2;eP({thousands:",",grouping:[3],currency:["$",""]});function eP(e){return Cc=J3(e),n2=Cc.format,i2=Cc.formatPrefix,Cc}function tP(e){return Math.max(0,-Ks(Math.abs(e)))}function nP(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ks(t)/3)))*3-Ks(Math.abs(e)))}function iP(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ks(t)-Ks(e))+1}function rP(e,t,r,s){var p=f3(e,t,r),b;switch(s=eu(s??",f"),s.type){case"s":{var S=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(b=nP(p,S))&&(s.precision=b),i2(s,S)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(b=iP(p,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=b-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(b=tP(p))&&(s.precision=b-(s.type==="%")*2);break}}return n2(s)}function sP(e){var t=e.domain;return e.ticks=function(r){var s=t();return h3(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var p=t();return rP(p[0],p[p.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),p=0,b=s.length-1,S=s[p],d=s[b],a,l,f=10;for(d<S&&(l=S,S=d,d=l,l=p,p=b,b=l);f-- >0;){if(l=Kf(S,d,r),l===a)return s[p]=S,s[b]=d,t(s);if(l>0)S=Math.floor(S/l)*l,d=Math.ceil(d/l)*l;else if(l<0)S=Math.ceil(S*l)/l,d=Math.floor(d*l)/l;else break;a=l}return e},e}function r2(){var e=Y3();return e.copy=function(){return U3(e,r2())},m3.apply(e,arguments),sP(e)}const aP=()=>{ti.logRender("HistogramDisplay");const{histogramData:e,selectedPoint:t,selectionRegion:r,minLevel:s,maxLevel:p,updateLevels:b,resetLevels:S,bitDepth:d,isWindowLevelApplied:a,setIsWindowLevelApplied:l}=ng(),f=N.useRef(null),o=N.useRef(null),[c,u]=N.useState(null),[g,y]=N.useState(null),[x,w]=N.useState(null),[C,j]=N.useState(null),T=d===16?65535:255,[M,E]=N.useState({min:0,max:0,mean:0,stdDev:0,pixelCount:0});N.useEffect(()=>{if(!e)return;const X=e.gray;if(!X)return;let ne=0,de=0,se=-1,q=-1;for(let D=0;D<X.length;D++){const O=X[D];O>0&&(se===-1&&(se=D),q=D,ne+=O,de+=D*O)}const P=ne>0?de/ne:0;let $=0;for(let D=0;D<X.length;D++){const O=X[D];O>0&&($+=O*Math.pow(D-P,2))}const V=ne>0?Math.sqrt($/ne):0;E({min:se===-1?0:se,max:q===-1?0:q,mean:Math.round(P),stdDev:Math.round(V*10)/10,pixelCount:ne})},[e]),N.useEffect(()=>{a||(console.log(" Auto-enabling Window/Level (Live mode):",{minLevel:s,maxLevel:p,bitDepth:d}),l(!0))},[s,p,d,a,l]),N.useEffect(()=>{if(!o.current)return;const X=o.current,ne=X.getContext("2d"),de=X.width,se=X.height;ne.clearRect(0,0,de,se);const q=ne.createLinearGradient(0,0,de,0);q.addColorStop(0,"#000000"),q.addColorStop(.5,"#808080"),q.addColorStop(1,"#FFFFFF"),ne.fillStyle=q,ne.fillRect(0,0,de,se),ne.strokeStyle="#6b7280",ne.lineWidth=1,ne.strokeRect(0,0,de,se);const P=70,$=20,V=de-P-$,D=P+(x??s)/T*V;ne.fillStyle="rgba(239, 68, 68, 0.9)",ne.fillRect(D-3,0,6,se);const O=P+(C??p)/T*V;ne.fillStyle="rgba(34, 197, 94, 0.9)",ne.fillRect(O-3,0,6,se),ne.fillStyle="rgba(0, 0, 0, 0.6)",ne.fillRect(P,0,D-P,se),ne.fillRect(O,0,de-O-$,se)},[s,p,T,x,C]),N.useEffect(()=>{if(!e||!f.current)return;const X=f.current.getContext("2d"),ne=f.current.width,de=f.current.height;X.clearRect(0,0,ne,de);const se=e.gray;if(!se)return;const q=70,P=35,$=15,V=20,D=ne-q-V,O=de-P-$,L=[...se].sort((Z,fe)=>fe-Z),I=L[Math.floor(L.length*.001)]||Math.max(...se);X.strokeStyle="#6b7280",X.lineWidth=1,X.beginPath(),X.moveTo(q,$),X.lineTo(q,de-P),X.stroke(),X.beginPath(),X.moveTo(q,de-P),X.lineTo(ne-V,de-P),X.stroke(),X.fillStyle="#1f2937",X.font="bold 13px monospace",X.textAlign="right",X.textBaseline="middle";const G=5;for(let Z=0;Z<=G;Z++){const fe=Math.round(I/G*Z),ae=de-P-O/G*Z;X.fillText(fe.toLocaleString(),q-8,ae),X.strokeStyle="#e5e7eb",X.lineWidth=.5,X.beginPath(),X.moveTo(q,ae),X.lineTo(ne-V,ae),X.stroke()}X.fillStyle="#1f2937",X.font="bold 12px monospace",X.textAlign="center",X.textBaseline="top";const B=8;for(let Z=0;Z<=B;Z++){const fe=Math.round(T/B*Z),ae=q+D/B*Z;X.fillText(fe.toLocaleString(),ae,de-P+5)}X.fillStyle="#2563eb",X.font="bold 11px monospace",X.textAlign="right",X.fillText(`${d}-bit`,ne-V,de-P+5);const z=D/se.length,te=r2().domain([0,I]).range(["rgba(107, 114, 128, 0.3)","rgba(107, 114, 128, 0.9)"]);for(let Z=0;Z<se.length;Z++){const fe=se[Z];if(fe===0)continue;const ae=Math.min(fe/I*O,O),ce=q+Z*z,me=de-P-ae;X.fillStyle=te(fe),X.fillRect(ce,me,Math.max(z,.5),ae)}const Q=x??s,ue=C??p,le=q+Q/T*D;X.strokeStyle="rgba(239, 68, 68, 0.9)",X.lineWidth=2,X.beginPath(),X.moveTo(le,$),X.lineTo(le,de-P),X.stroke(),X.fillStyle="rgba(239, 68, 68, 0.95)",X.beginPath(),X.arc(le,de-P+20,10,0,Math.PI*2),X.fill(),X.strokeStyle="#fff",X.lineWidth=3,X.stroke();const ie=q+ue/T*D;X.strokeStyle="rgba(34, 197, 94, 0.9)",X.lineWidth=2,X.beginPath(),X.moveTo(ie,$),X.lineTo(ie,de-P),X.stroke(),X.fillStyle="rgba(34, 197, 94, 0.95)",X.beginPath(),X.arc(ie,de-P+20,10,0,Math.PI*2),X.fill(),X.strokeStyle="#fff",X.lineWidth=3,X.stroke(),X.fillStyle="rgba(59, 130, 246, 0.1)",X.fillRect(le,$,ie-le,O)},[e,s,p,T,d,x,C]);const A=N.useCallback(X=>{if(!f.current)return;const ne=f.current.getBoundingClientRect(),de=X.clientX-ne.left,se=X.clientY-ne.top,q=f.current.width/ne.width,P=f.current.height/ne.height,$=de*q,V=se*P,D=70,O=35,I=f.current.width-D-20,G=D+s/T*I,B=D+p/T*I,z=f.current.height-O+15;if(Math.abs($-G)<20&&Math.abs(V-z)<20){u("min"),y({x:$,minLevel:s,maxLevel:p}),w(s);return}if(Math.abs($-B)<20&&Math.abs(V-z)<20){u("max"),y({x:$,minLevel:s,maxLevel:p}),j(p);return}if($>G&&$<B&&V<f.current.height-O){u("both"),y({x:$,minLevel:s,maxLevel:p}),w(s),j(p);return}},[s,p,T]),R=N.useCallback(X=>{if(!c||!f.current||!g)return;const ne=f.current.getBoundingClientRect(),de=X.clientX-ne.left,se=f.current.width/ne.width,q=de*se,V=f.current.width-70-20,O=(q-g.x)/V*T;if(c==="min"){const L=Math.round(g.minLevel+O),I=Math.max(0,Math.min(L,g.maxLevel-1));w(I)}else if(c==="max"){const L=Math.round(g.maxLevel+O),I=Math.max(g.minLevel+1,Math.min(L,T));j(I)}else if(c==="both"){const L=g.maxLevel-g.minLevel;let I=Math.round(g.minLevel+O),G=Math.round(g.maxLevel+O);I<0&&(I=0,G=L),G>T&&(G=T,I=T-L),w(I),j(G)}},[c,g,T,f]),H=N.useCallback(()=>{if(c&&(x!==null||C!==null)){const X=x??s,ne=C??p;console.log(" Mouse Up - Applying new levels:",{finalMin:X,finalMax:ne,tempMinLevel:x,tempMaxLevel:C,isDragging:c}),b(X,ne)}u(null),y(null),w(null),j(null)},[c,x,C,s,p,b]);N.useEffect(()=>{if(c)return window.addEventListener("mousemove",R),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",H)}},[c,R,H]);const K=N.useCallback(X=>{if(!f.current||c)return;const ne=f.current.getBoundingClientRect(),de=X.clientX-ne.left,se=X.clientY-ne.top,q=f.current.width/ne.width,P=f.current.height/ne.height,$=de*q,V=se*P,D=70,O=35,I=f.current.width-D-20,G=D+s/T*I,B=D+p/T*I,z=f.current.height-O+15;Math.abs($-G)<20&&Math.abs(V-z)<20||Math.abs($-B)<20&&Math.abs(V-z)<20?f.current.style.cursor="ew-resize":$>G&&$<B&&V<f.current.height-O?f.current.style.cursor="move":f.current.style.cursor="default"},[s,p,T,c]);return!e||!t?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted",children:[h.jsx(Mi,{size:32,className:"mb-2 opacity-50"}),h.jsx("p",{className:"text-sm text-center",children:"Select Histogram tool and click on image to see distribution"})]}):h.jsxs("div",{className:"h-full flex flex-col gap-2 overflow-hidden p-2",children:[h.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"bg-accent dark:bg-background-primary rounded-lg px-2 py-1 border border-border flex-shrink-0",children:[(r==null?void 0:r.type)==="point"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-xs text-text-muted",children:["Point (R=",r.radius,"px)"]}),h.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]}),(r==null?void 0:r.type)==="area"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-xs text-text-muted",children:["Area ",r.width,"",r.height,"px"]}),h.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]}),(r==null?void 0:r.type)==="line"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"text-xs text-text-muted",children:["Line (",r.length,"px)"]}),h.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]})]}),h.jsxs("div",{className:"text-center bg-gray-100 dark:bg-gray-900/20 rounded-lg px-2 py-1 border border-border flex-shrink-0",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Gray Value"}),h.jsx("div",{className:"font-mono text-xs font-semibold text-gray-700 dark:text-gray-400",children:t.pixel.gray||Math.round((t.pixel.r+t.pixel.g+t.pixel.b)/3)})]}),h.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[h.jsxs("div",{className:"text-center bg-blue-50 dark:bg-blue-900/20 rounded-lg px-2 py-1 border border-blue-300 dark:border-blue-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Min"}),h.jsx("div",{className:"font-mono text-xs font-semibold text-blue-700 dark:text-blue-400",children:M.min})]}),h.jsxs("div",{className:"text-center bg-blue-50 dark:bg-blue-900/20 rounded-lg px-2 py-1 border border-blue-300 dark:border-blue-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Max"}),h.jsx("div",{className:"font-mono text-xs font-semibold text-blue-700 dark:text-blue-400",children:M.max})]}),h.jsxs("div",{className:"text-center bg-blue-50 dark:bg-blue-900/20 rounded-lg px-2 py-1 border border-blue-300 dark:border-blue-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Mean"}),h.jsx("div",{className:"font-mono text-xs font-semibold text-blue-700 dark:text-blue-400",children:M.mean})]}),h.jsxs("div",{className:"text-center bg-blue-50 dark:bg-blue-900/20 rounded-lg px-2 py-1 border border-blue-300 dark:border-blue-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:""}),h.jsx("div",{className:"font-mono text-xs font-semibold text-blue-700 dark:text-blue-400",children:M.stdDev})]})]}),h.jsx("div",{className:"flex gap-1 flex-shrink-0",children:h.jsxs("button",{onClick:()=>{S(),l(!1)},className:"flex items-center gap-1 px-2 py-1 rounded-lg bg-gray-500 hover:bg-gray-600 text-white text-xs font-semibold transition-colors",title:"Reset Window/Level to Original",children:[h.jsx(ai,{size:14}),"Reset"]})})]}),h.jsxs("div",{className:"flex-shrink-0",children:[h.jsx("div",{className:"text-xs text-text-muted mb-1 font-semibold",children:"Grayscale Color Bar"}),h.jsx("canvas",{ref:o,width:1400,height:40,className:"w-full rounded border border-border",style:{height:"40px"}})]}),h.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",style:{minHeight:"180px"},children:h.jsx("canvas",{ref:f,width:1400,height:180,className:"w-full h-full",onMouseDown:A,onMouseMove:K})}),h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[h.jsxs("div",{className:"flex-1 bg-red-50 dark:bg-red-900/20 rounded-lg px-2 py-1 border border-red-300 dark:border-red-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Min Level"}),h.jsx("div",{className:"font-mono text-sm font-semibold text-red-700 dark:text-red-400",children:x??s})]}),h.jsxs("div",{className:"flex-1 bg-green-50 dark:bg-green-900/20 rounded-lg px-2 py-1 border border-green-300 dark:border-green-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Max Level"}),h.jsx("div",{className:"font-mono text-sm font-semibold text-green-700 dark:text-green-400",children:C??p})]}),h.jsxs("div",{className:"flex-1 bg-purple-50 dark:bg-purple-900/20 rounded-lg px-2 py-1 border border-purple-300 dark:border-purple-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Window"}),h.jsx("div",{className:"font-mono text-sm font-semibold text-purple-700 dark:text-purple-400",children:(C??p)-(x??s)})]}),h.jsxs("div",{className:"flex-1 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg px-2 py-1 border border-indigo-300 dark:border-indigo-700",children:[h.jsx("div",{className:"text-xs text-text-muted",children:"Bit Depth"}),h.jsxs("div",{className:"font-mono text-sm font-semibold text-indigo-700 dark:text-indigo-400",children:[d,"-bit"]})]})]})]})},s2=N.createContext(),oP=()=>{const e=N.useContext(s2);if(!e)throw new Error("useXray must be used within XrayProvider");return e},lP=({children:e})=>{const[t,r]=N.useState(!1),s=N.useCallback(()=>{r(!0),console.log("X-ray Generator: ON")},[]),p=N.useCallback(()=>{r(!1),console.log("X-ray Generator: OFF")},[]),b=N.useCallback(()=>{r(d=>!d)},[]),S={isXrayOn:t,turnOnXray:s,turnOffXray:p,toggleXray:b};return h.jsx(s2.Provider,{value:S,children:e})},cP=[{to:"/initial",label:"initial",icon:h.jsx(M_,{className:"w-4 h-4 mr-1"})},{to:"/position",label:"position",icon:h.jsx(cm,{className:"w-4 h-4 mr-1"})},{to:"/projection",label:"projection",icon:h.jsx(j1,{className:"w-4 h-4 mr-1"})},{to:"/post-processing",label:"postProcessing",icon:h.jsx(EN,{className:"w-4 h-4 mr-1"})},{to:"/reconstruction",label:"reconstruction",icon:h.jsx(k_,{className:"w-4 h-4 mr-1"})}],Pv=({lng:e,current:t,onClick:r})=>h.jsx("button",{onClick:()=>r(e),className:An("px-2 py-1 text-sm rounded-md",t===e?"bg-primary text-white":"bg-background-secondary text-text-muted"),children:e.toUpperCase()}),uP=({t:e,isPowerOn:t,onPowerOn:r,onPowerOff:s})=>h.jsxs("div",{className:"flex-shrink-0 px-4 py-3 border-b border-border bg-background-secondary dark:bg-background-secondary",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:`panel flex-1 flex items-center justify-center gap-2 text-sm text-white font-semibold h-10 transition-all duration-200 ${t?"bg-green-500":"bg-red-500"}`,children:[h.jsx(Un,{className:"w-4 h-4"}),h.jsxs("span",{children:[e("xrayStatus"),": ",e(t?"xrayOn":"xrayOff")]}),t&&h.jsx(Ic,{className:"w-4 h-4 ml-2 animate-pulse"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:r,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${t?"bg-green-600 text-white shadow-md":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-green-500 hover:text-white"}`,children:"ON"}),h.jsx("button",{onClick:s,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${t?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-500 hover:text-white":"bg-red-600 text-white shadow-md"}`,children:"OFF"})]})]}),t&&h.jsxs("div",{className:"mt-2 px-3 py-2 bg-yellow-500/20 border border-yellow-500/50 rounded-lg flex items-center gap-2",children:[h.jsx(Ic,{className:"w-4 h-4 text-yellow-500"}),h.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-medium",children:e("xraySafetyWarning")})]})]}),dP=()=>{const e=fr();ti.logRender("Layout",{route:e.pathname});const t=e.pathname.includes("settings")?"Settings":null,[r,s]=N.useState(t),[p,b]=N.useState(!1),S=N.useRef(null),{t:d,i18n:a}=et(),{isXrayOn:l,turnOnXray:f,turnOffXray:o}=oP(),c=N.useCallback(g=>{s(g)},[]),u=N.useCallback(g=>{a.changeLanguage(g),console.log("Changed language to:",g)},[a]);return N.useEffect(()=>{const g=y=>{S.current&&!S.current.contains(y.target)&&b(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),h.jsxs("div",{className:"responsive-layout gap-2 sm:gap-4 p-2 sm:p-4 bg-background dark:bg-background",children:[h.jsx("div",{className:"mobile-column",children:h.jsxs("div",{className:"card flex-1 flex flex-col min-h-0",children:[h.jsx(uP,{t:d,isPowerOn:l,onPowerOn:f,onPowerOff:o}),h.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-start sm:items-center justify-between px-2 sm:px-4 py-2 sm:py-3 border-b border-border bg-background-secondary dark:bg-background-secondary dark:border-border gap-2 sm:gap-0",children:[h.jsx("div",{className:"w-full sm:w-auto",children:h.jsx(JR,{tabs:cP.map(g=>({...g,label:d(g.label)}))})}),h.jsxs("div",{className:"flex gap-2 items-center relative",ref:S,children:[h.jsxs("button",{onClick:()=>b(!p),className:An("flex items-center gap-1 px-3 py-2 rounded-lg transition-all",p||r==="Settings"?"bg-primary text-white":"bg-background-secondary text-text hover:bg-accent border border-border"),children:[h.jsx(Pt,{className:"w-4 h-4"}),h.jsx(Pc,{className:An("w-4 h-4 transition-transform",p&&"rotate-180")})]}),p&&h.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background-secondary dark:bg-background-primary border border-border rounded-lg shadow-lg z-50 overflow-hidden",children:[h.jsx(lm,{to:"/settings",onClick:()=>{b(!1),c("Settings")},className:"block px-4 py-2 hover:bg-accent text-text transition-colors",children:d("settings")}),h.jsxs("div",{className:"border-t border-border px-4 py-2",children:[h.jsx("div",{className:"text-xs text-text-muted mb-2",children:d("language")||"Language"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Pv,{lng:"en",current:a.language,onClick:u}),h.jsx(Pv,{lng:"fa",current:a.language,onClick:u})]})]})]})]})]}),h.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 overflow-auto",children:h.jsx("div",{className:"h-full",children:h.jsx(_j,{})})})]})}),h.jsxs("div",{className:"desktop-column",children:[h.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-0",children:[h.jsxs("div",{className:"card flex-1 border-b-0 relative overflow-hidden flex flex-col sm:flex-row min-h-[300px] sm:min-h-[400px] md:min-h-[450px] lg:min-h-[500px]",children:[h.jsx("div",{className:"hidden sm:block flex-shrink-0",children:h.jsx(yv,{})}),h.jsxs("div",{className:"flex-1 min-h-0 min-w-0 relative",children:[h.jsx(KS,{}),h.jsx("div",{className:"sm:hidden absolute top-2 left-2 z-10",children:h.jsx("div",{className:"bg-black/70 rounded-lg p-1",children:h.jsx("div",{className:"transform scale-75 origin-top-left",children:h.jsx(yv,{})})})})]})]}),h.jsx("div",{className:"card flex-shrink-0 border-t-0 text-text dark:text-text font-medium text-center p-2 sm:p-3 text-xs sm:text-sm min-h-[40px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px] flex items-center justify-center",children:d("imageReel")})]}),h.jsxs("div",{className:"card flex-shrink-0 p-2 sm:p-3 min-h-[180px] sm:min-h-[200px] md:min-h-[220px] lg:min-h-[240px] max-h-[240px] sm:max-h-[280px] md:max-h-[320px] lg:max-h-[360px] flex",children:[h.jsx("div",{className:"flex-1 min-h-0 overflow-hidden rounded-lg bg-background-secondary dark:bg-background-primary border border-border p-2",children:h.jsx(aP,{})}),h.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[220px] md:w-[260px] lg:w-[300px] rounded-lg border border-border overflow-hidden ml-2",children:h.jsx(O1,{})})]})]})]})},hP=Le.memo(dP),a2=N.createContext();function fP({children:e}){const[t,r]=N.useState(()=>localStorage.getItem("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),[s,p]=N.useState(()=>localStorage.getItem("industrialUI")==="true");return N.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark"),localStorage.setItem("theme",t)},[t]),N.useEffect(()=>{document.documentElement.classList.toggle("industrial",s),localStorage.setItem("industrialUI",s)},[s]),h.jsx(a2.Provider,{value:{theme:t,setTheme:r,industrialUI:s,setIndustrialUI:p},children:e})}function mP(){const e=N.useContext(a2);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function gP(){const{theme:e,setTheme:t,industrialUI:r,setIndustrialUI:s}=mP(),{t:p,i18n:b}=et(),S=()=>{t(e==="light"?"dark":"light")},d=()=>{s(!r)},a=l=>{b.changeLanguage(l)};return h.jsxs("div",{className:"p-4 sm:p-6 text-text dark:text-text space-y-6 sm:space-y-8 max-w-xl mx-auto",children:[h.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center",children:p("settingsPage")}),h.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center",children:p("settingsDescription")}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx(u_,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-500 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-sm sm:text-base block",children:"Industrial UI"}),h.jsx("span",{className:"text-xs text-text-muted",children:"Windows XP-inspired interface"})]})]}),h.jsx("button",{onClick:d,className:`w-full sm:w-auto px-4 py-2 rounded-lg transition text-sm sm:text-base ${r?"bg-highlight text-white hover:bg-highlight-dark":"bg-primary text-white hover:bg-primary/90"}`,children:r?"Disable Industrial":"Enable Industrial"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e==="light"?h.jsx(gN,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 flex-shrink-0"}):h.jsx(I_,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-400 flex-shrink-0"}),h.jsx("span",{className:"font-medium text-sm sm:text-base",children:p("theme")})]}),h.jsx("button",{onClick:S,className:"w-full sm:w-auto px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition text-sm sm:text-base",children:p("switchTo",{mode:p(e==="light"?"dark":"light")})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[h.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:h.jsx("span",{className:"font-medium text-sm sm:text-base",children:p("language")})}),h.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:["en","fa"].map(l=>h.jsx("button",{onClick:()=>a(l),className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 rounded-lg text-sm transition font-medium
                ${b.language===l?"bg-primary text-white shadow":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:l.toUpperCase()},l))})]})]})}const pP=()=>h.jsx(qo,{title:" Canvas ",description:"       ",children:h.jsx("div",{className:"h-full",children:h.jsx(KS,{})})}),xP=[{path:"/",element:h.jsx(hP,{}),children:[{index:!0,element:h.jsx(CT,{})},{path:"initial",element:h.jsx(HN,{})},{path:"position",element:h.jsx(YN,{})},{path:"projection",element:h.jsx(ZN,{})},{path:"post-processing",element:h.jsx(iM,{})},{path:"reconstruction",element:h.jsx(rM,{})},{path:"settings",element:h.jsx(gP,{})},{path:"canvas-test",element:h.jsx(pP,{})}]}];function yP(){return mj(xP)}const Ye=e=>typeof e=="string",co=()=>{let e,t;const r=new Promise((s,p)=>{e=s,t=p});return r.resolve=e,r.reject=t,r},Lv=e=>e==null?"":""+e,bP=(e,t,r)=>{e.forEach(s=>{t[s]&&(r[s]=t[s])})},vP=/###/g,Fv=e=>e&&e.indexOf("###")>-1?e.replace(vP,"."):e,zv=e=>!e||Ye(e),ko=(e,t,r)=>{const s=Ye(t)?t.split("."):t;let p=0;for(;p<s.length-1;){if(zv(e))return{};const b=Fv(s[p]);!e[b]&&r&&(e[b]=new r),Object.prototype.hasOwnProperty.call(e,b)?e=e[b]:e={},++p}return zv(e)?{}:{obj:e,k:Fv(s[p])}},Iv=(e,t,r)=>{const{obj:s,k:p}=ko(e,t,Object);if(s!==void 0||t.length===1){s[p]=r;return}let b=t[t.length-1],S=t.slice(0,t.length-1),d=ko(e,S,Object);for(;d.obj===void 0&&S.length;)b=`${S[S.length-1]}.${b}`,S=S.slice(0,S.length-1),d=ko(e,S,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${b}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${b}`]=r},wP=(e,t,r,s)=>{const{obj:p,k:b}=ko(e,t,Object);p[b]=p[b]||[],p[b].push(r)},tu=(e,t)=>{const{obj:r,k:s}=ko(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,s))return r[s]},SP=(e,t,r)=>{const s=tu(e,r);return s!==void 0?s:tu(t,r)},o2=(e,t,r)=>{for(const s in t)s!=="__proto__"&&s!=="constructor"&&(s in e?Ye(e[s])||e[s]instanceof String||Ye(t[s])||t[s]instanceof String?r&&(e[s]=t[s]):o2(e[s],t[s],r):e[s]=t[s]);return e},Ls=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var CP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const kP=e=>Ye(e)?e.replace(/[&<>"'\/]/g,t=>CP[t]):e;class jP{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const s=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,s),this.regExpQueue.push(t),s}}const TP=[" ",",","?","!",";"],_P=new jP(20),NP=(e,t,r)=>{t=t||"",r=r||"";const s=TP.filter(S=>t.indexOf(S)<0&&r.indexOf(S)<0);if(s.length===0)return!0;const p=_P.getRegExp(`(${s.map(S=>S==="?"?"\\?":S).join("|")})`);let b=!p.test(e);if(!b){const S=e.indexOf(r);S>0&&!p.test(e.substring(0,S))&&(b=!0)}return b},em=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const s=t.split(r);let p=e;for(let b=0;b<s.length;){if(!p||typeof p!="object")return;let S,d="";for(let a=b;a<s.length;++a)if(a!==b&&(d+=r),d+=s[a],S=p[d],S!==void 0){if(["string","number","boolean"].indexOf(typeof S)>-1&&a<s.length-1)continue;b+=a-b+1;break}p=S}return p},Bo=e=>e==null?void 0:e.replace("_","-"),MP={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var r,s;(s=(r=console==null?void 0:console[e])==null?void 0:r.apply)==null||s.call(r,console,t)}};class nu{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||MP,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,s,p){return p&&!this.debug?null:(Ye(t[0])&&(t[0]=`${s}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new nu(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new nu(this.logger,t)}}var ei=new nu;class xu{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const p=this.observers[s].get(r)||0;this.observers[s].set(r,p+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([p,b])=>{for(let S=0;S<b;S++)p(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([p,b])=>{for(let S=0;S<b;S++)p.apply(p,[t,...r])})}}class Bv extends xu{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,s,p={}){var l,f;const b=p.keySeparator!==void 0?p.keySeparator:this.options.keySeparator,S=p.ignoreJSONStructure!==void 0?p.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;t.indexOf(".")>-1?d=t.split("."):(d=[t,r],s&&(Array.isArray(s)?d.push(...s):Ye(s)&&b?d.push(...s.split(b)):d.push(s)));const a=tu(this.data,d);return!a&&!r&&!s&&t.indexOf(".")>-1&&(t=d[0],r=d[1],s=d.slice(2).join(".")),a||!S||!Ye(s)?a:em((f=(l=this.data)==null?void 0:l[t])==null?void 0:f[r],s,b)}addResource(t,r,s,p,b={silent:!1}){const S=b.keySeparator!==void 0?b.keySeparator:this.options.keySeparator;let d=[t,r];s&&(d=d.concat(S?s.split(S):s)),t.indexOf(".")>-1&&(d=t.split("."),p=r,r=d[1]),this.addNamespaces(r),Iv(this.data,d,p),b.silent||this.emit("added",t,r,s,p)}addResources(t,r,s,p={silent:!1}){for(const b in s)(Ye(s[b])||Array.isArray(s[b]))&&this.addResource(t,r,b,s[b],{silent:!0});p.silent||this.emit("added",t,r,s)}addResourceBundle(t,r,s,p,b,S={silent:!1,skipCopy:!1}){let d=[t,r];t.indexOf(".")>-1&&(d=t.split("."),p=s,s=r,r=d[1]),this.addNamespaces(r);let a=tu(this.data,d)||{};S.skipCopy||(s=JSON.parse(JSON.stringify(s))),p?o2(a,s,b):a={...a,...s},Iv(this.data,d,a),S.silent||this.emit("added",t,r,s)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(p=>r[p]&&Object.keys(r[p]).length>0)}toJSON(){return this.data}}var l2={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,s,p){return e.forEach(b=>{var S;t=((S=this.processors[b])==null?void 0:S.process(t,r,s,p))??t}),t}};const Vv={},$v=e=>!Ye(e)&&typeof e!="boolean"&&typeof e!="number";class iu extends xu{constructor(t,r={}){super(),bP(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ei.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const s={...r};if(t==null)return!1;const p=this.resolve(t,s);return(p==null?void 0:p.res)!==void 0}extractFromKey(t,r){let s=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const p=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let b=r.ns||this.options.defaultNS||[];const S=s&&t.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!NP(t,s,p);if(S&&!d){const a=t.match(this.interpolator.nestingRegexp);if(a&&a.length>0)return{key:t,namespaces:Ye(b)?[b]:b};const l=t.split(s);(s!==p||s===p&&this.options.ns.indexOf(l[0])>-1)&&(b=l.shift()),t=l.join(p)}return{key:t,namespaces:Ye(b)?[b]:b}}translate(t,r,s){let p=typeof r=="object"?{...r}:r;if(typeof p!="object"&&this.options.overloadTranslationOptionHandler&&(p=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(p={...p}),p||(p={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const b=p.returnDetails!==void 0?p.returnDetails:this.options.returnDetails,S=p.keySeparator!==void 0?p.keySeparator:this.options.keySeparator,{key:d,namespaces:a}=this.extractFromKey(t[t.length-1],p),l=a[a.length-1];let f=p.nsSeparator!==void 0?p.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const o=p.lng||this.language,c=p.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((o==null?void 0:o.toLowerCase())==="cimode")return c?b?{res:`${l}${f}${d}`,usedKey:d,exactUsedKey:d,usedLng:o,usedNS:l,usedParams:this.getUsedParamsDetails(p)}:`${l}${f}${d}`:b?{res:d,usedKey:d,exactUsedKey:d,usedLng:o,usedNS:l,usedParams:this.getUsedParamsDetails(p)}:d;const u=this.resolve(t,p);let g=u==null?void 0:u.res;const y=(u==null?void 0:u.usedKey)||d,x=(u==null?void 0:u.exactUsedKey)||d,w=["[object Number]","[object Function]","[object RegExp]"],C=p.joinArrays!==void 0?p.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,T=p.count!==void 0&&!Ye(p.count),M=iu.hasDefaultValue(p),E=T?this.pluralResolver.getSuffix(o,p.count,p):"",A=p.ordinal&&T?this.pluralResolver.getSuffix(o,p.count,{ordinal:!1}):"",R=T&&!p.ordinal&&p.count===0,H=R&&p[`defaultValue${this.options.pluralSeparator}zero`]||p[`defaultValue${E}`]||p[`defaultValue${A}`]||p.defaultValue;let K=g;j&&!g&&M&&(K=H);const X=$v(K),ne=Object.prototype.toString.apply(K);if(j&&K&&X&&w.indexOf(ne)<0&&!(Ye(C)&&Array.isArray(K))){if(!p.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const de=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,K,{...p,ns:a}):`key '${d} (${this.language})' returned an object instead of string.`;return b?(u.res=de,u.usedParams=this.getUsedParamsDetails(p),u):de}if(S){const de=Array.isArray(K),se=de?[]:{},q=de?x:y;for(const P in K)if(Object.prototype.hasOwnProperty.call(K,P)){const $=`${q}${S}${P}`;M&&!g?se[P]=this.translate($,{...p,defaultValue:$v(H)?H[P]:void 0,joinArrays:!1,ns:a}):se[P]=this.translate($,{...p,joinArrays:!1,ns:a}),se[P]===$&&(se[P]=K[P])}g=se}}else if(j&&Ye(C)&&Array.isArray(g))g=g.join(C),g&&(g=this.extendTranslation(g,t,p,s));else{let de=!1,se=!1;!this.isValidLookup(g)&&M&&(de=!0,g=H),this.isValidLookup(g)||(se=!0,g=d);const P=(p.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:g,$=M&&H!==g&&this.options.updateMissing;if(se||de||$){if(this.logger.log($?"updateKey":"missingKey",o,l,d,$?H:g),S){const L=this.resolve(d,{...p,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let V=[];const D=this.languageUtils.getFallbackCodes(this.options.fallbackLng,p.lng||this.language);if(this.options.saveMissingTo==="fallback"&&D&&D[0])for(let L=0;L<D.length;L++)V.push(D[L]);else this.options.saveMissingTo==="all"?V=this.languageUtils.toResolveHierarchy(p.lng||this.language):V.push(p.lng||this.language);const O=(L,I,G)=>{var z;const B=M&&G!==g?G:P;this.options.missingKeyHandler?this.options.missingKeyHandler(L,l,I,B,$,p):(z=this.backendConnector)!=null&&z.saveMissing&&this.backendConnector.saveMissing(L,l,I,B,$,p),this.emit("missingKey",L,l,I,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?V.forEach(L=>{const I=this.pluralResolver.getSuffixes(L,p);R&&p[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(G=>{O([L],d+G,p[`defaultValue${G}`]||H)})}):O(V,d,H))}g=this.extendTranslation(g,t,p,u,s),se&&g===d&&this.options.appendNamespaceToMissingKey&&(g=`${l}${f}${d}`),(se||de)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${f}${d}`:d,de?g:void 0,p))}return b?(u.res=g,u.usedParams=this.getUsedParamsDetails(p),u):g}extendTranslation(t,r,s,p,b){var a,l;if((a=this.i18nFormat)!=null&&a.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||p.usedLng,p.usedNS,p.usedKey,{resolved:p});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const f=Ye(t)&&(((l=s==null?void 0:s.interpolation)==null?void 0:l.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(f){const u=t.match(this.interpolator.nestingRegexp);o=u&&u.length}let c=s.replace&&!Ye(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),t=this.interpolator.interpolate(t,c,s.lng||this.language||p.usedLng,s),f){const u=t.match(this.interpolator.nestingRegexp),g=u&&u.length;o<g&&(s.nest=!1)}!s.lng&&p&&p.res&&(s.lng=this.language||p.usedLng),s.nest!==!1&&(t=this.interpolator.nest(t,(...u)=>(b==null?void 0:b[0])===u[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${u[0]} in key: ${r[0]}`),null):this.translate(...u,r),s)),s.interpolation&&this.interpolator.reset()}const S=s.postProcess||this.options.postProcess,d=Ye(S)?[S]:S;return t!=null&&(d!=null&&d.length)&&s.applyPostProcessor!==!1&&(t=l2.handle(d,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...p,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),t}resolve(t,r={}){let s,p,b,S,d;return Ye(t)&&(t=[t]),t.forEach(a=>{if(this.isValidLookup(s))return;const l=this.extractFromKey(a,r),f=l.key;p=f;let o=l.namespaces;this.options.fallbackNS&&(o=o.concat(this.options.fallbackNS));const c=r.count!==void 0&&!Ye(r.count),u=c&&!r.ordinal&&r.count===0,g=r.context!==void 0&&(Ye(r.context)||typeof r.context=="number")&&r.context!=="",y=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);o.forEach(x=>{var w,C;this.isValidLookup(s)||(d=x,!Vv[`${y[0]}-${x}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(d))&&(Vv[`${y[0]}-${x}`]=!0,this.logger.warn(`key "${p}" for languages "${y.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(j=>{var E;if(this.isValidLookup(s))return;S=j;const T=[f];if((E=this.i18nFormat)!=null&&E.addLookupKeys)this.i18nFormat.addLookupKeys(T,f,j,x,r);else{let A;c&&(A=this.pluralResolver.getSuffix(j,r.count,r));const R=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(T.push(f+A),r.ordinal&&A.indexOf(H)===0&&T.push(f+A.replace(H,this.options.pluralSeparator)),u&&T.push(f+R)),g){const K=`${f}${this.options.contextSeparator}${r.context}`;T.push(K),c&&(T.push(K+A),r.ordinal&&A.indexOf(H)===0&&T.push(K+A.replace(H,this.options.pluralSeparator)),u&&T.push(K+R))}}let M;for(;M=T.pop();)this.isValidLookup(s)||(b=M,s=this.getResource(j,x,M,r))}))})}),{res:s,usedKey:p,exactUsedKey:b,usedLng:S,usedNS:d}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,s,p={}){var b;return(b=this.i18nFormat)!=null&&b.getResource?this.i18nFormat.getResource(t,r,s,p):this.resourceStore.getResource(t,r,s,p)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=t.replace&&!Ye(t.replace);let p=s?t.replace:t;if(s&&typeof t.count<"u"&&(p.count=t.count),this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),!s){p={...p};for(const b of r)delete p[b]}return p}static hasDefaultValue(t){const r="defaultValue";for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&r===s.substring(0,r.length)&&t[s]!==void 0)return!0;return!1}}class Hv{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ei.create("languageUtils")}getScriptPartFromCode(t){if(t=Bo(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Bo(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Ye(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(s=>{if(r)return;const p=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(p))&&(r=p)}),!r&&this.options.supportedLngs&&t.forEach(s=>{if(r)return;const p=this.getScriptPartFromCode(s);if(this.isSupportedCode(p))return r=p;const b=this.getLanguagePartFromCode(s);if(this.isSupportedCode(b))return r=b;r=this.options.supportedLngs.find(S=>{if(S===b)return S;if(!(S.indexOf("-")<0&&b.indexOf("-")<0)&&(S.indexOf("-")>0&&b.indexOf("-")<0&&S.substring(0,S.indexOf("-"))===b||S.indexOf(b)===0&&b.length>1))return S})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Ye(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let s=t[r];return s||(s=t[this.getScriptPartFromCode(r)]),s||(s=t[this.formatLanguageCode(r)]),s||(s=t[this.getLanguagePartFromCode(r)]),s||(s=t.default),s||[]}toResolveHierarchy(t,r){const s=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),p=[],b=S=>{S&&(this.isSupportedCode(S)?p.push(S):this.logger.warn(`rejecting language code not found in supportedLngs: ${S}`))};return Ye(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&b(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&b(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&b(this.getLanguagePartFromCode(t))):Ye(t)&&b(this.formatLanguageCode(t)),s.forEach(S=>{p.indexOf(S)<0&&b(this.formatLanguageCode(S))}),p}}const Uv={zero:0,one:1,two:2,few:3,many:4,other:5},Xv={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class EP{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=ei.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const s=Bo(t==="dev"?"en":t),p=r.ordinal?"ordinal":"cardinal",b=JSON.stringify({cleanedCode:s,type:p});if(b in this.pluralRulesCache)return this.pluralRulesCache[b];let S;try{S=new Intl.PluralRules(s,{type:p})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Xv;if(!t.match(/-|_/))return Xv;const a=this.languageUtils.getLanguagePartFromCode(t);S=this.getRule(a,r)}return this.pluralRulesCache[b]=S,S}needsPlural(t,r={}){let s=this.getRule(t,r);return s||(s=this.getRule("dev",r)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,r,s={}){return this.getSuffixes(t,s).map(p=>`${r}${p}`)}getSuffixes(t,r={}){let s=this.getRule(t,r);return s||(s=this.getRule("dev",r)),s?s.resolvedOptions().pluralCategories.sort((p,b)=>Uv[p]-Uv[b]).map(p=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${p}`):[]}getSuffix(t,r,s={}){const p=this.getRule(t,s);return p?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${p.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,s))}}const Yv=(e,t,r,s=".",p=!0)=>{let b=SP(e,t,r);return!b&&p&&Ye(r)&&(b=em(e,r,s),b===void 0&&(b=em(t,r,s))),b},hf=e=>e.replace(/\$/g,"$$$$");class OP{constructor(t={}){var r;this.logger=ei.create("interpolator"),this.options=t,this.format=((r=t==null?void 0:t.interpolation)==null?void 0:r.format)||(s=>s),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:s,useRawValueToEscape:p,prefix:b,prefixEscaped:S,suffix:d,suffixEscaped:a,formatSeparator:l,unescapeSuffix:f,unescapePrefix:o,nestingPrefix:c,nestingPrefixEscaped:u,nestingSuffix:g,nestingSuffixEscaped:y,nestingOptionsSeparator:x,maxReplaces:w,alwaysFormat:C}=t.interpolation;this.escape=r!==void 0?r:kP,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=p!==void 0?p:!1,this.prefix=b?Ls(b):S||"{{",this.suffix=d?Ls(d):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=f?"":o||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=c?Ls(c):u||Ls("$t("),this.nestingSuffix=g?Ls(g):y||Ls(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=w||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,s)=>(r==null?void 0:r.source)===s?(r.lastIndex=0,r):new RegExp(s,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,r,s,p){var u;let b,S,d;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=g=>{if(g.indexOf(this.formatSeparator)<0){const C=Yv(r,a,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,s,{...p,...r,interpolationkey:g}):C}const y=g.split(this.formatSeparator),x=y.shift().trim(),w=y.join(this.formatSeparator).trim();return this.format(Yv(r,a,x,this.options.keySeparator,this.options.ignoreJSONStructure),w,s,{...p,...r,interpolationkey:x})};this.resetRegExp();const f=(p==null?void 0:p.missingInterpolationHandler)||this.options.missingInterpolationHandler,o=((u=p==null?void 0:p.interpolation)==null?void 0:u.skipOnVariables)!==void 0?p.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>hf(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?hf(this.escape(g)):hf(g)}].forEach(g=>{for(d=0;b=g.regex.exec(t);){const y=b[1].trim();if(S=l(y),S===void 0)if(typeof f=="function"){const w=f(t,b,p);S=Ye(w)?w:""}else if(p&&Object.prototype.hasOwnProperty.call(p,y))S="";else if(o){S=b[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${t}`),S="";else!Ye(S)&&!this.useRawValueToEscape&&(S=Lv(S));const x=g.safeValue(S);if(t=t.replace(b[0],x),o?(g.regex.lastIndex+=S.length,g.regex.lastIndex-=b[0].length):g.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),t}nest(t,r,s={}){let p,b,S;const d=(a,l)=>{const f=this.nestingOptionsSeparator;if(a.indexOf(f)<0)return a;const o=a.split(new RegExp(`${f}[ ]*{`));let c=`{${o[1]}`;a=o[0],c=this.interpolate(c,S);const u=c.match(/'/g),g=c.match(/"/g);(((u==null?void 0:u.length)??0)%2===0&&!g||g.length%2!==0)&&(c=c.replace(/'/g,'"'));try{S=JSON.parse(c),l&&(S={...l,...S})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${a}`,y),`${a}${f}${c}`}return S.defaultValue&&S.defaultValue.indexOf(this.prefix)>-1&&delete S.defaultValue,a};for(;p=this.nestingRegexp.exec(t);){let a=[];S={...s},S=S.replace&&!Ye(S.replace)?S.replace:S,S.applyPostProcessor=!1,delete S.defaultValue;let l=!1;if(p[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(p[1])){const f=p[1].split(this.formatSeparator).map(o=>o.trim());p[1]=f.shift(),a=f,l=!0}if(b=r(d.call(this,p[1].trim(),S),S),b&&p[0]===t&&!Ye(b))return b;Ye(b)||(b=Lv(b)),b||(this.logger.warn(`missed to resolve ${p[1]} for nesting ${t}`),b=""),l&&(b=a.reduce((f,o)=>this.format(f,o,s.lng,{...s,interpolationkey:p[1].trim()}),b.trim())),t=t.replace(p[0],b),this.regexp.lastIndex=0}return t}}const DP=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const p=s[1].substring(0,s[1].length-1);t==="currency"&&p.indexOf(":")<0?r.currency||(r.currency=p.trim()):t==="relativetime"&&p.indexOf(":")<0?r.range||(r.range=p.trim()):p.split(";").forEach(S=>{if(S){const[d,...a]=S.split(":"),l=a.join(":").trim().replace(/^'+|'+$/g,""),f=d.trim();r[f]||(r[f]=l),l==="false"&&(r[f]=!1),l==="true"&&(r[f]=!0),isNaN(l)||(r[f]=parseInt(l,10))}})}return{formatName:t,formatOptions:r}},Gv=e=>{const t={};return(r,s,p)=>{let b=p;p&&p.interpolationkey&&p.formatParams&&p.formatParams[p.interpolationkey]&&p[p.interpolationkey]&&(b={...b,[p.interpolationkey]:void 0});const S=s+JSON.stringify(b);let d=t[S];return d||(d=e(Bo(s),p),t[S]=d),d(r)}},AP=e=>(t,r,s)=>e(Bo(r),s)(t);class RP{constructor(t={}){this.logger=ei.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const s=r.cacheInBuiltFormats?Gv:AP;this.formats={number:s((p,b)=>{const S=new Intl.NumberFormat(p,{...b});return d=>S.format(d)}),currency:s((p,b)=>{const S=new Intl.NumberFormat(p,{...b,style:"currency"});return d=>S.format(d)}),datetime:s((p,b)=>{const S=new Intl.DateTimeFormat(p,{...b});return d=>S.format(d)}),relativetime:s((p,b)=>{const S=new Intl.RelativeTimeFormat(p,{...b});return d=>S.format(d,b.range||"day")}),list:s((p,b)=>{const S=new Intl.ListFormat(p,{...b});return d=>S.format(d)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=Gv(r)}format(t,r,s,p={}){const b=r.split(this.formatSeparator);if(b.length>1&&b[0].indexOf("(")>1&&b[0].indexOf(")")<0&&b.find(d=>d.indexOf(")")>-1)){const d=b.findIndex(a=>a.indexOf(")")>-1);b[0]=[b[0],...b.splice(1,d)].join(this.formatSeparator)}return b.reduce((d,a)=>{var o;const{formatName:l,formatOptions:f}=DP(a);if(this.formats[l]){let c=d;try{const u=((o=p==null?void 0:p.formatParams)==null?void 0:o[p.interpolationkey])||{},g=u.locale||u.lng||p.locale||p.lng||s;c=this.formats[l](d,g,{...f,...p,...u})}catch(u){this.logger.warn(u)}return c}else this.logger.warn(`there was no format function for ${l}`);return d},t)}}const PP=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class LP extends xu{constructor(t,r,s,p={}){var b,S;super(),this.backend=t,this.store=r,this.services=s,this.languageUtils=s.languageUtils,this.options=p,this.logger=ei.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=p.maxParallelReads||10,this.readingCalls=0,this.maxRetries=p.maxRetries>=0?p.maxRetries:5,this.retryTimeout=p.retryTimeout>=1?p.retryTimeout:350,this.state={},this.queue=[],(S=(b=this.backend)==null?void 0:b.init)==null||S.call(b,s,p.backend,p)}queueLoad(t,r,s,p){const b={},S={},d={},a={};return t.forEach(l=>{let f=!0;r.forEach(o=>{const c=`${l}|${o}`;!s.reload&&this.store.hasResourceBundle(l,o)?this.state[c]=2:this.state[c]<0||(this.state[c]===1?S[c]===void 0&&(S[c]=!0):(this.state[c]=1,f=!1,S[c]===void 0&&(S[c]=!0),b[c]===void 0&&(b[c]=!0),a[o]===void 0&&(a[o]=!0)))}),f||(d[l]=!0)}),(Object.keys(b).length||Object.keys(S).length)&&this.queue.push({pending:S,pendingCount:Object.keys(S).length,loaded:{},errors:[],callback:p}),{toLoad:Object.keys(b),pending:Object.keys(S),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(a)}}loaded(t,r,s){const p=t.split("|"),b=p[0],S=p[1];r&&this.emit("failedLoading",b,S,r),!r&&s&&this.store.addResourceBundle(b,S,s,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&s&&(this.state[t]=0);const d={};this.queue.forEach(a=>{wP(a.loaded,[b],S),PP(a,t),r&&a.errors.push(r),a.pendingCount===0&&!a.done&&(Object.keys(a.loaded).forEach(l=>{d[l]||(d[l]={});const f=a.loaded[l];f.length&&f.forEach(o=>{d[l][o]===void 0&&(d[l][o]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(a=>!a.done)}read(t,r,s,p=0,b=this.retryTimeout,S){if(!t.length)return S(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:s,tried:p,wait:b,callback:S});return}this.readingCalls++;const d=(l,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const o=this.waitingReads.shift();this.read(o.lng,o.ns,o.fcName,o.tried,o.wait,o.callback)}if(l&&f&&p<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,s,p+1,b*2,S)},b);return}S(l,f)},a=this.backend[s].bind(this.backend);if(a.length===2){try{const l=a(t,r);l&&typeof l.then=="function"?l.then(f=>d(null,f)).catch(d):d(null,l)}catch(l){d(l)}return}return a(t,r,d)}prepareLoading(t,r,s={},p){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),p&&p();Ye(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ye(r)&&(r=[r]);const b=this.queueLoad(t,r,s,p);if(!b.toLoad.length)return b.pending.length||p(),null;b.toLoad.forEach(S=>{this.loadOne(S)})}load(t,r,s){this.prepareLoading(t,r,{},s)}reload(t,r,s){this.prepareLoading(t,r,{reload:!0},s)}loadOne(t,r=""){const s=t.split("|"),p=s[0],b=s[1];this.read(p,b,"read",void 0,void 0,(S,d)=>{S&&this.logger.warn(`${r}loading namespace ${b} for language ${p} failed`,S),!S&&d&&this.logger.log(`${r}loaded namespace ${b} for language ${p}`,d),this.loaded(t,S,d)})}saveMissing(t,r,s,p,b,S={},d=()=>{}){var a,l,f,o,c;if((l=(a=this.services)==null?void 0:a.utils)!=null&&l.hasLoadedNamespace&&!((o=(f=this.services)==null?void 0:f.utils)!=null&&o.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${s}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((c=this.backend)!=null&&c.create){const u={...S,isUpdate:b},g=this.backend.create.bind(this.backend);if(g.length<6)try{let y;g.length===5?y=g(t,r,s,p,u):y=g(t,r,s,p),y&&typeof y.then=="function"?y.then(x=>d(null,x)).catch(d):d(null,y)}catch(y){d(y)}else g(t,r,s,p,d,u)}!t||!t[0]||this.store.addResource(t[0],r,s,p)}}}const qv=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Ye(e[1])&&(t.defaultValue=e[1]),Ye(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(s=>{t[s]=r[s]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Wv=e=>{var t,r;return Ye(e.ns)&&(e.ns=[e.ns]),Ye(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ye(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((r=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:r.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},kc=()=>{},FP=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class Vo extends xu{constructor(t={},r){if(super(),this.options=Wv(t),this.services={},this.logger=ei,this.modules={external:[]},FP(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Ye(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=qv();this.options={...s,...this.options,...Wv(t)},this.options.interpolation={...s.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const p=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?ei.init(p(this.modules.logger),this.options):ei.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:l=RP;const f=new Hv(this.options);this.store=new Bv(this.options.resources,this.options);const o=this.services;o.logger=ei,o.resourceStore=this.store,o.languageUtils=f,o.pluralResolver=new EP(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(o.formatter=p(l),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new OP(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new LP(p(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(c,...u)=>{this.emit(c,...u)}),this.modules.languageDetector&&(o.languageDetector=p(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=p(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new iu(this.services,this.options),this.translator.on("*",(c,...u)=>{this.emit(c,...u)}),this.modules.external.forEach(c=>{c.init&&c.init(this)})}if(this.format=this.options.interpolation.format,r||(r=kc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=(...f)=>this.store[l](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=(...f)=>(this.store[l](...f),this)});const d=co(),a=()=>{const l=(f,o)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(o),r(f,o)};if(this.languages&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),d}loadResources(t,r=kc){var b,S;let s=r;const p=Ye(t)?t:this.language;if(typeof t=="function"&&(s=t),!this.options.resources||this.options.partialBundledLanguages){if((p==null?void 0:p.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const d=[],a=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(o=>{o!=="cimode"&&d.indexOf(o)<0&&d.push(o)})};p?a(p):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>a(f)),(S=(b=this.options.preload)==null?void 0:b.forEach)==null||S.call(b,l=>a(l)),this.services.backendConnector.load(d,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(l)})}else s(null)}reloadResources(t,r,s){const p=co();return typeof t=="function"&&(s=t,t=void 0),typeof r=="function"&&(s=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),s||(s=kc),this.services.backendConnector.reload(t,r,b=>{p.resolve(),s(b)}),p}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&l2.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const s=this.languages[r];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const s=co();this.emit("languageChanging",t);const p=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},b=(d,a)=>{a?this.isLanguageChangingTo===t&&(p(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,s.resolve((...l)=>this.t(...l)),r&&r(d,(...l)=>this.t(...l))},S=d=>{var f,o;!t&&!d&&this.services.languageDetector&&(d=[]);const a=Ye(d)?d:d&&d[0],l=this.store.hasLanguageSomeTranslations(a)?a:this.services.languageUtils.getBestMatchFromCodes(Ye(d)?[d]:d);l&&(this.language||p(l),this.translator.language||this.translator.changeLanguage(l),(o=(f=this.services.languageDetector)==null?void 0:f.cacheUserLanguage)==null||o.call(f,l)),this.loadResources(l,c=>{b(c,l)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?S(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(S):this.services.languageDetector.detect(S):S(t),s}getFixedT(t,r,s){const p=(b,S,...d)=>{let a;typeof S!="object"?a=this.options.overloadTranslationOptionHandler([b,S].concat(d)):a={...S},a.lng=a.lng||p.lng,a.lngs=a.lngs||p.lngs,a.ns=a.ns||p.ns,a.keyPrefix!==""&&(a.keyPrefix=a.keyPrefix||s||p.keyPrefix);const l=this.options.keySeparator||".";let f;return a.keyPrefix&&Array.isArray(b)?f=b.map(o=>`${a.keyPrefix}${l}${o}`):f=a.keyPrefix?`${a.keyPrefix}${l}${b}`:b,this.t(f,a)};return Ye(t)?p.lng=t:p.lngs=t,p.ns=r,p.keyPrefix=s,p}t(...t){var r;return(r=this.translator)==null?void 0:r.translate(...t)}exists(...t){var r;return(r=this.translator)==null?void 0:r.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=r.lng||this.resolvedLanguage||this.languages[0],p=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const S=(d,a)=>{const l=this.services.backendConnector.state[`${d}|${a}`];return l===-1||l===0||l===2};if(r.precheck){const d=r.precheck(this,S);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||S(s,t)&&(!p||S(b,t)))}loadNamespaces(t,r){const s=co();return this.options.ns?(Ye(t)&&(t=[t]),t.forEach(p=>{this.options.ns.indexOf(p)<0&&this.options.ns.push(p)}),this.loadResources(p=>{s.resolve(),r&&r(p)}),s):(r&&r(),Promise.resolve())}loadLanguages(t,r){const s=co();Ye(t)&&(t=[t]);const p=this.options.preload||[],b=t.filter(S=>p.indexOf(S)<0&&this.services.languageUtils.isSupportedCode(S));return b.length?(this.options.preload=p.concat(b),this.loadResources(S=>{s.resolve(),r&&r(S)}),s):(r&&r(),Promise.resolve())}dir(t){var p,b;if(t||(t=this.resolvedLanguage||(((p=this.languages)==null?void 0:p.length)>0?this.languages[0]:this.language)),!t)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((b=this.services)==null?void 0:b.languageUtils)||new Hv(qv());return r.indexOf(s.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new Vo(t,r)}cloneInstance(t={},r=kc){const s=t.forkResourceStore;s&&delete t.forkResourceStore;const p={...this.options,...t,isClone:!0},b=new Vo(p);if((t.debug!==void 0||t.prefix!==void 0)&&(b.logger=b.logger.clone(t)),["store","services","language"].forEach(d=>{b[d]=this[d]}),b.services={...this.services},b.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},s){const d=Object.keys(this.store.data).reduce((a,l)=>(a[l]={...this.store.data[l]},a[l]=Object.keys(a[l]).reduce((f,o)=>(f[o]={...a[l][o]},f),a[l]),a),{});b.store=new Bv(d,p),b.services.resourceStore=b.store}return b.translator=new iu(b.services,p),b.translator.on("*",(d,...a)=>{b.emit(d,...a)}),b.init(p,r),b.translator.options=p,b.translator.backendConnector.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},b}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const en=Vo.createInstance();en.createInstance=Vo.createInstance;en.createInstance;en.dir;en.init;en.loadResources;en.reloadResources;en.use;en.changeLanguage;en.getFixedT;en.t;en.exists;en.setDefaultNamespace;en.hasLoadedNamespace;en.loadNamespaces;en.loadLanguages;const{slice:zP,forEach:IP}=[];function BP(e){return IP.call(zP.call(arguments,1),t=>{if(t)for(const r in t)e[r]===void 0&&(e[r]=t[r])}),e}function VP(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(e))}const Kv=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,$P=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},p=encodeURIComponent(t);let b=`${e}=${p}`;if(s.maxAge>0){const S=s.maxAge-0;if(Number.isNaN(S))throw new Error("maxAge should be a Number");b+=`; Max-Age=${Math.floor(S)}`}if(s.domain){if(!Kv.test(s.domain))throw new TypeError("option domain is invalid");b+=`; Domain=${s.domain}`}if(s.path){if(!Kv.test(s.path))throw new TypeError("option path is invalid");b+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");b+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(b+="; HttpOnly"),s.secure&&(b+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;case"none":b+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(b+="; Partitioned"),b},Zv={create(e,t,r,s){let p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(p.expires=new Date,p.expires.setTime(p.expires.getTime()+r*60*1e3)),s&&(p.domain=s),document.cookie=$P(e,encodeURIComponent(t),p)},read(e){const t=`${e}=`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){let p=r[s];for(;p.charAt(0)===" ";)p=p.substring(1,p.length);if(p.indexOf(t)===0)return p.substring(t.length,p.length)}return null},remove(e){this.create(e,"",-1)}};var HP={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return Zv.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:r,cookieMinutes:s,cookieDomain:p,cookieOptions:b}=t;r&&typeof document<"u"&&Zv.create(r,e,s,p,b)}},UP={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,r;if(typeof window<"u"){let{search:p}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(p=window.location.hash.substring(window.location.hash.indexOf("?")));const S=p.substring(1).split("&");for(let d=0;d<S.length;d++){const a=S[d].indexOf("=");a>0&&S[d].substring(0,a)===t&&(r=S[d].substring(a+1))}}return r}};let Fs=null;const Qv=()=>{if(Fs!==null)return Fs;try{if(Fs=typeof window<"u"&&window.localStorage!==null,!Fs)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Fs=!1}return Fs};var XP={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Qv())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:r}=t;r&&Qv()&&window.localStorage.setItem(r,e)}};let zs=null;const Jv=()=>{if(zs!==null)return zs;try{if(zs=typeof window<"u"&&window.sessionStorage!==null,!zs)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{zs=!1}return zs};var YP={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Jv())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:r}=t;r&&Jv()&&window.sessionStorage.setItem(r,e)}},GP={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:s,language:p}=navigator;if(r)for(let b=0;b<r.length;b++)t.push(r[b]);s&&t.push(s),p&&t.push(p)}return t.length>0?t:void 0}},qP={name:"htmlTag",lookup(e){let{htmlTag:t}=e,r;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(r=s.getAttribute("lang")),r}},WP={name:"path",lookup(e){var p;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(p=r[typeof t=="number"?t:0])==null?void 0:p.replace("/",""):void 0}},KP={name:"subdomain",lookup(e){var p,b;let{lookupFromSubdomainIndex:t}=e;const r=typeof t=="number"?t+1:1,s=typeof window<"u"&&((b=(p=window.location)==null?void 0:p.hostname)==null?void 0:b.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[r]}};let c2=!1;try{document.cookie,c2=!0}catch{}const u2=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];c2||u2.splice(1,1);const ZP=()=>({order:u2,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class d2{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=BP(r,this.options||{},ZP()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=p=>p.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(HP),this.addDetector(UP),this.addDetector(XP),this.addDetector(YP),this.addDetector(GP),this.addDetector(qP),this.addDetector(WP),this.addDetector(KP)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(s=>{if(this.detectors[s]){let p=this.detectors[s].lookup(this.options);p&&typeof p=="string"&&(p=[p]),p&&(r=r.concat(p))}}),r=r.filter(s=>s!=null&&!VP(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}d2.type="languageDetector";const QP="Home",JP="Settings",e4="Initial",t4="Position",n4="Projection",i4="Post Processing",r4="Reconstruction",s4="System Status & Warnings",a4="X-ray Generator Status",o4="X-ray ON",l4="X-ray OFF",c4="Warning: X-ray is active!",u4="Camera",d4="Projection Display",h4="Image Reel",f4="Histogram",m4="Toggle Theme",g4="Crop",p4="Brush",x4="Eraser",y4="Circle",b4="Rectangle",v4="Line Chart",w4="Line",S4="Move",C4="Zoom In",k4="Zoom Out",j4="Home Page",T4="Welcome to the Home page! This page is styled to match the overall theme of the application.",_4="Settings Page",N4="This is the Settings page. Adjust your preferences here.",M4="Switch to {{mode}} Mode",E4="Input Showcase",O4="Checkboxes",D4="Checkbox 1",A4="Checkbox 2 (Default Checked)",R4="Checkbox (Disabled)",P4="Confirm {{label}}",L4="Disabled Input",F4="Inputs",z4="Text Input",I4="Number Input",B4="Email Input",V4="Save {{label}}",$4="Textarea",H4="Enter your text here...",U4="Save Textarea",X4="Other Inputs",Y4="Radio Buttons",G4="Option 1",q4="Option 2",W4="Select Dropdown",K4="Select an option",Z4="Upload File",Q4="Selected: {{name}}",J4="Password Input",eL="Enter password",tL="Range Slider",nL="Color Picker",iL="Date Picker",rL="IconButton Showcase",sL="{{variant}} Variant",aL="Size: {{size}} (Normal)",oL="Size: {{size}} (Disabled)",lL="{{variant}} {{size}} clicked!",cL="Run",uL="Initial Parameters",dL="Name",hL="Email",fL="Enter your name",mL="Enter your email",gL="X Position",pL="Y Position",xL="Enable Filter",yL="Connecting to WebSocket...",bL="Theme",vL="Language",wL="Dark",SL="Light",CL="Projection Acquisition",kL="Transmission Percentage",jL="Enter transmission percentage",TL="Percentage of X-ray transmission through the sample (0-100%)",_L="Success",NL="Form data submitted successfully",ML="Error",EL="No data available to submit",OL="Are you sure?",DL="Cancel",AL="Sending...",RL="No data available to send",PL="Invalid initial parameters",LL="Power",FL="Enter power (Watts)",zL="Tube Voltage",IL="Enter tube voltage (kVp)",BL="Anode Current",VL="Enter anode current",$L="Filtration",HL="Aluminum",UL="Copper",XL="Silver",YL="Enter filter thickness (mm)",GL="Exposure Time",qL="Bit Depth",WL="Tube Status",KL="Manipulator",ZL="X Position",QL="Y Position",JL="Z Position",eF="Theta Angle",tF="Gamma Angle",nF="Joystick Speed",iF="Low",rF="Medium",sF="High",aF="Cabin Camera Status",oF="Standard Preset",lF="High Power Preset",cF="Clear All",uF="Voltage",dF="Current",hF="Active",fF="Inactive",mF="Connected to WebSocket",gF="Fast Imaging",pF="Rotation Speed",xF="Enter rotation speed",yF="Dual Energy",bF="Single Calibration",vF="Enter single calibration",wF="Rotate Calibration",SF="Enter rotate calibration",CF="Selected File",kF="Enter X position",jF="Enter Y position",TF="Enter Z position",_F="Enter Theta angle",NF="Enter Gamma angle",MF="Imaging Mode",EF="Multi-Segment Size",OF="Enter multi-segment size",DF="Image Adjustments",AF="Gain",RF="Offset",PF="Preprocess",LF="HDR",FF="Energy Level 1",zF="Energy Level 2",IF="Enter energy level 1",BF="Enter energy level 2",VF="Image Count",$F="Enter image count",HF="Image Transform",UF="None",XF="Basic Operations",YF="Normalize",GF="FFT",qF="FFT Inverse",WF="Fourier Filter",KF="Low Pass",ZF="Band Pass",QF="High Pass",JF="Apply Fourier Filter",ez="Export Image",tz="TIFF",nz="JPG",iz="DICOM",rz="Image Filters",sz="Median Filter",az="Mean Filter",oz="Variance Filter",lz="Pseudo Color Filter",cz="Gaussian Filter",uz="Enter Gaussian sigma",dz="Sharpening",hz="Kernel Size",fz="Sharpening Strength",mz="Enter sharpening strength",gz="Edge Detection",pz="Threshold",xz="Enter threshold",yz="Edge Method",bz="Sobel",vz="Canny",wz="Prewitt",Sz="OK",Cz="Failed to send data",kz="Grayscale",jz="Pan",Tz="Undo",_z="System Stability Check",Nz="Interlock",Mz="Temperature",Ez="Pressure",Oz="Cooling System",Dz="Real-time monitoring of critical system parameters",Az="X-ray Tube & Exposure Log",Rz="Time",Pz="Download",Lz="Clear",Fz="Pause",zz="Resume",Iz="Paused",Bz="Total logs",Vz="No logs recorded yet",$z="Step Size",Hz="Linear Movement",Uz="Rotational Movement",Xz="Control",Yz="Manual Input",Gz="Saved Positions",qz="Precise movements, best for fine-tuning",Wz="Balanced speed for general positioning",Kz="Fast movements for large adjustments",Zz="Current Speed",Qz="Turn On",Jz="Turn Off",e6="Camera is turned off",t6="Click 'Turn On' to activate the camera",n6="Connecting to camera...",i6="Camera Connection Error",r6="Please check camera connection",s6="Retry",a6="Refresh",o6="Fullscreen",l6="Exit Fullscreen",c6="Resolution",u6="Frame Rate",d6="Exposure",h6="Brightness",f6="Trajectory Definition",m6="Select Trajectory Type",g6="Discrete angular steps",p6="Continuous circular motion",x6="Spiral path for tall objects",y6="Custom trajectory path",b6="Trajectory Parameters",v6="Number of Steps",w6="Angle per Step",S6="Start Angle",C6="End Angle",k6="Helix Pitch",j6="Height Steps",T6="Use trajectory designer or import custom points",_6="Open Trajectory Designer",N6="Saved Trajectories",M6="Enter trajectory name",E6="Geometry Configuration",O6="Calibrate",D6="System Calibrated",A6="Last calibration",R6="Geometric accuracy",P6="Distance Parameters",L6="Detector Parameters",F6="Detector Width",z6="Detector Height",I6="Pixel Pitch",B6="Calculated Values",V6="Magnification",$6="Effective Pixel Size",H6="Width",U6="Height",X6="Additional Parameters",Y6="Cone Beam Angle",G6="Focal Spot Size",q6="Acquisition Settings",W6="Start",K6="Stop",Z6="Reset",Q6="Acquiring",J6="Completed",eI="Rotation Mode",tI="Half rotation",nI="Full rotation",iI="Multi-Segment Imaging",rI="Number of Segments",sI="Overlap",aI="Total Height",oI="Number of Projections",lI="Exposure per Projection",cI="Acquisition Summary",uI="Mode",dI="Segments",hI="Total Proj.",fI="Est. Time",mI="Position Feedback",gI="Real-time Position Display",pI="Target Position",xI="Current Position",yI="Position Error",bI="Linear Detector Imaging",vI="Linear Detector Mode",wI="Scan Height",SI="Vertical Step Size",CI="Stitching Overlap",kI="Estimated Scan Time",jI="Calibration System",TI="Calibration Type",_I="Single Image Calibration",NI="Rotational Calibration",MI="Capture Calibration Image",EI="Start Calibration Scan",OI="Calibration Status",DI="Not Calibrated",AI="Calibrating",RI="Calibrated",PI="Calibration Date",LI="Calibration Quality",FI="Recalibrate",zI="Image Quality Assessment",II="Overall Quality",BI="Excellent",VI="Good",$I="Needs Improvement",HI="Spatial Resolution",UI="Uniformity",XI="Artifacts",YI="Last Assessment",GI="Assessments",qI="Click 'Start Assessment' to begin quality evaluation",WI="Detector Configuration",KI="Detector Status",ZI="Readout Noise",QI="Dark Current",JI="Hardware Settings",eB="Pixel Binning",tB="Readout Mode",nB="Cooling Temperature",iB="Gain Mode",rB="Imaging Settings",sB="Trigger Mode",aB="Processing Settings",oB="Dark Frame Correction",lB="Flat Field Correction",cB="Bad Pixel Correction",uB="Lag Correction",dB="Settings saved successfully",hB="Settings imported successfully",fB="Advanced Filtering",mB="Denoising",gB="Edge Enhancement",pB="Histogram Equalization",xB="Morphology",yB="Wavelet",bB="Method",vB="Strength",wB="Amount",SB="Radius",CB="Low Threshold",kB="High Threshold",jB="Clip Limit",TB="Tile Size",_B="Operation",NB="Kernel Shape",MB="Wavelet Type",EB="Decomposition Level",OB="Select a filter type to configure settings",DB="Please select a filter first",AB="Filter applied successfully",RB="Apply Filter",PB="Scan Protocol Management",LB="Edit Protocol",FB="New Protocol",zB="Enter protocol name",IB="Description",BB="Enter description",VB="Are you sure you want to delete this protocol?",$B="Protocol applied successfully",HB="Protocols imported successfully",UB="No protocols available",XB="Apply",YB="Edit",GB="Duplicate",qB="Last Used",WB="Never",KB="Real-time Monitoring Dashboard",ZB="Tube temperature is high",QB="X-ray power is high",JB="Cooling flow rate is low",eV="Tube Temp",tV="Last 20s",nV="Detector Temp",iV="Cooling Flow",rV="Data Rate",sV="System Load",aV="Acquisition Progress",oV="Images Acquired",lV="Est. Time Remaining",cV="Image Viewer",uV="Original",dV="Processed",hV="Compare Images",fV="No image loaded",mV="Upload Image",gV="Image Statistics",pV="Processing History",xV="Quick Filters",yV="Transformations",bV="Adjustments",vV="Invert",wV="Flip Vertical",SV="Contrast",CV="Processing",kV="Auto Process",jV="Filters",TV="Waiting for image",_V="Apply Filters",NV="Live Processing",MV="Image Processing",EV="Crosshair Tool",OV="Crosshair",DV="ROI Crosshair",AV="Requirement #22",RV="Line Color",PV="Line Width",LV="Extend Beyond ROI",FV="Show Center Marker",zV="Show Crosshair",IV="Select ROI",BV="All ROIs",VV="No ROIs detected on canvas",$V="Draw a rectangle or circle on the canvas to create an ROI.",HV="Detected {{count}} ROI(s)",UV="ROI(s) detected",XV="Crosshair lines will be drawn through the center of each ROI.",YV="to toggle crosshair",GV="Pixel Coordinates",qV="Pixel Coordinate Tool",WV="Requirement #23",KV="Pixel Coordinates",ZV="Move your mouse over the canvas to see pixel coordinates (X,Y) and gray value.",QV="Show Coordinates",JV="Display Mode",e8="Tooltip",t8="HUD",n8="HUD Position",i8="Show Gray Value",r8="Text Color",s8="Background Color",a8="Font Size",o8="to toggle pixel coordinates",l8="Yes",c8="No",u8="Opacity",d8="Center Marker Color",h8="Center Marker Size",f8="Grid",m8="Grid Overlay",g8="Requirement #25",p8="ROI Statistics",x8="ROI Statistics",y8="Average Gray Value",b8="Min Gray Value",v8="Max Gray Value",w8="ROI Area",S8="Pixel Count",C8="pixels",k8="Standard Deviation",j8="Median",T8="SNR (Signal-to-Noise Ratio)",_8="CNR (Contrast-to-Noise Ratio)",N8="CNR Comparison",M8="Select a second ROI below to calculate CNR between two regions:",E8="Draw a rectangle or circle on the canvas, then select it to view statistics.",O8="Requirement #28",D8="Requirement #29",A8="Requirement #30",R8="Requirement #31",P8="Grid Overlay",L8="Display a grid overlay on the entire canvas to help with alignment and measurements.",F8="Show Grid",z8="Grid Spacing",I8="Custom Spacing",B8="Line Style",V8="Solid",$8="Dashed",H8="Dotted",U8="to toggle grid overlay",X8={home:QP,settings:JP,initial:e4,position:t4,projection:n4,postProcessing:i4,reconstruction:r4,systemStatus:s4,xrayStatus:a4,xrayOn:o4,xrayOff:l4,xraySafetyWarning:c4,camera:u4,projectionDisplay:d4,imageReel:h4,histogram:f4,toggleTheme:m4,crop:g4,brush:p4,eraser:x4,circle:y4,rectangle:b4,lineChart:v4,line:w4,move:S4,zoomIn:C4,zoomOut:k4,homePage:j4,welcome:T4,settingsPage:_4,settingsDescription:N4,switchTo:M4,inputShowcase:E4,checkboxes:O4,checkbox1:D4,checkbox2:A4,disabledCheckbox:R4,confirm:P4,disabledInput:L4,inputs:F4,textInput:z4,numberInput:I4,emailInput:B4,save:V4,textarea:$4,enterText:H4,saveTextarea:U4,otherInputs:X4,radioButtons:Y4,option1:G4,option2:q4,selectDropdown:W4,selectOption:K4,uploadFile:Z4,selected:Q4,passwordInput:J4,enterPassword:eL,rangeSlider:tL,colorPicker:nL,datePicker:iL,iconButtonShowcase:rL,variant:sL,sizeNormal:aL,sizeDisabled:oL,clicked:lL,run:cL,initialParameters:uL,name:dL,email:hL,enterName:fL,enterEmail:mL,xPosition:gL,yPosition:pL,enableFilter:xL,websocketConnecting:yL,theme:bL,language:vL,dark:wL,light:SL,projectionAcquisition:CL,transmissionPercentage:kL,enterTransmissionPercentage:jL,transmissionPercentageDescription:TL,success:_L,dataSubmittedSuccessfully:NL,error:ML,noDataToSubmit:EL,areYouSure:OL,cancel:DL,sendingData:AL,noDataAvailable:RL,invalidInitialParameters:PL,power:LL,enterPower:FL,tubeVoltage:zL,enterTubeVoltage:IL,anodeCurrent:BL,enterAnodeCurrent:VL,filtration:$L,aluminum:HL,copper:UL,silver:XL,enterThickness:YL,exposureTime:GL,bitDepth:qL,"8bit":"8-bit","16bit":"16-bit",tubeStatus:WL,manipulator:KL,manipulatorX:ZL,manipulatorY:QL,manipulatorZ:JL,manipulatorTheta:eF,manipulatorGamma:tF,joystickSpeed:nF,joystickSpeedLow:iF,joystickSpeedMedium:rF,joystickSpeedHigh:sF,cabinCameraStatus:aF,presetStandard:oF,presetHighPower:lF,clearAll:cF,voltage:uF,current:dF,active:hF,inactive:fF,websocketConnected:mF,fastImaging:gF,rotationSpeed:pF,enterRotationSpeed:xF,dualEnergy:yF,singleCalibration:bF,enterSingleCalibration:vF,rotateCalibration:wF,enterRotateCalibration:SF,selectedFile:CF,enterManipulatorX:kF,enterManipulatorY:jF,enterManipulatorZ:TF,enterManipulatorTheta:_F,enterManipulatorGamma:NF,"180degree":"180","360degree":"360",imagingMode:MF,multiSegmentSize:EF,enterMultiSegmentSize:OF,imageAdjustments:DF,gain:AF,offset:RF,preprocess:PF,hdr:LF,energyLevel1:FF,energyLevel2:zF,enterEnergyLevel1:IF,enterEnergyLevel2:BF,imageCount:VF,enterImageCount:$F,imageTransform:HF,none:UF,"90degree":"90","270degree":"270",basicOperations:XF,normalize:YF,fft:GF,fftInverse:qF,fourierFilter:WF,lowPass:KF,bandPass:ZF,highPass:QF,applyFourierFilter:JF,exportImage:ez,export:"Export",tiff:tz,jpg:nz,dicom:iz,imageFilters:rz,medianFilter:sz,meanFilter:az,varianceFilter:oz,pseudoColorFilter:lz,gaussianFilter:cz,enterGaussianSigma:uz,sharpening:dz,kernelSize:hz,sharpeningStrength:fz,enterSharpeningStrength:mz,edgeDetection:gz,threshold:pz,enterThreshold:xz,edgeMethod:yz,sobel:bz,canny:vz,prewitt:wz,ok:Sz,failedToSendData:Cz,grayscale:kz,pan:jz,undo:Tz,systemStabilityCheck:_z,interlock:Nz,temperature:Mz,pressure:Ez,coolingSystem:Oz,stabilityCheckDescription:Dz,xrayExposureLog:Az,time:Rz,download:Pz,clear:Lz,pause:Fz,resume:zz,paused:Iz,totalLogs:Bz,noLogsYet:Vz,stepSize:$z,linearMovement:Hz,rotationalMovement:Uz,control:Xz,manualInput:Yz,savedPositions:Gz,lowSpeedDesc:qz,mediumSpeedDesc:Wz,highSpeedDesc:Kz,currentSpeed:Zz,turnOn:Qz,turnOff:Jz,cameraOff:e6,clickTurnOn:t6,connectingToCamera:n6,cameraError:i6,checkCameraConnection:r6,retry:s6,refresh:a6,fullscreen:o6,exitFullscreen:l6,resolution:c6,frameRate:u6,exposure:d6,brightness:h6,trajectoryDefinition:f6,import:"Import",selectTrajectoryType:m6,stepwiseDesc:g6,circularDesc:p6,helicalDesc:x6,arbitraryDesc:y6,trajectoryParameters:b6,numberOfSteps:v6,anglePerStep:w6,startAngle:S6,endAngle:C6,helixPitch:k6,heightSteps:j6,arbitraryTrajectoryInfo:T6,openDesigner:_6,savedTrajectories:N6,enterTrajectoryName:M6,geometryConfiguration:E6,calibrate:O6,systemCalibrated:D6,lastCalibration:A6,geometricAccuracy:R6,distanceParameters:P6,detectorParameters:L6,detectorWidth:F6,detectorHeight:z6,pixelPitch:I6,calculatedValues:B6,magnification:V6,effectivePixelSize:$6,width:H6,height:U6,additionalParameters:X6,coneBeamAngle:Y6,focalSpotSize:G6,acquisitionSettings:q6,start:W6,stop:K6,reset:Z6,acquiring:Q6,completed:J6,rotationMode:eI,halfRotation:tI,fullRotation:nI,multiSegmentImaging:iI,numberOfSegments:rI,segmentOverlap:sI,totalHeight:aI,numberOfProjections:oI,exposurePerProjection:lI,acquisitionSummary:cI,mode:uI,segments:dI,totalProjections:hI,estimatedTime:fI,positionFeedback:mI,realTimePosition:gI,targetPosition:pI,currentPosition:xI,positionError:yI,linearDetectorImaging:bI,linearDetectorMode:vI,scanHeight:wI,verticalStepSize:SI,stitchingOverlap:CI,estimatedScanTime:kI,calibrationSystem:jI,calibrationType:TI,singleImageCalibration:_I,rotationalCalibration:NI,captureCalibrationImage:MI,startCalibrationScan:EI,calibrationStatus:OI,notCalibrated:DI,calibrating:AI,calibrated:RI,calibrationDate:PI,calibrationQuality:LI,recalibrate:FI,imageQualityAssessment:zI,overallQuality:II,excellent:BI,good:VI,needsImprovement:$I,spatialResolution:HI,uniformity:UI,artifacts:XI,lastAssessment:YI,assessments:GI,startAssessmentMessage:qI,detectorConfiguration:WI,detectorStatus:KI,readoutNoise:ZI,darkCurrent:QI,hardwareSettings:JI,binning:eB,readoutMode:tB,coolingTemperature:nB,gainMode:iB,imagingSettings:rB,triggerMode:sB,processingSettings:aB,darkFrameCorrection:oB,flatFieldCorrection:lB,badPixelCorrection:cB,lagCorrection:uB,settingsSaved:dB,settingsImported:hB,advancedFiltering:fB,denoising:mB,edgeEnhancement:gB,histogramEqualization:pB,morphology:xB,wavelet:yB,method:bB,strength:vB,amount:wB,radius:SB,lowThreshold:CB,highThreshold:kB,clipLimit:jB,tileSize:TB,operation:_B,kernelShape:NB,waveletType:MB,decompositionLevel:EB,selectFilterType:OB,selectFilterFirst:DB,filterApplied:AB,applyFilter:RB,scanProtocolManagement:PB,new:"New",editProtocol:LB,newProtocol:FB,enterProtocolName:zB,description:IB,enterDescription:BB,confirmDeleteProtocol:VB,protocolApplied:$B,protocolsImported:HB,noProtocols:UB,apply:XB,edit:YB,duplicate:GB,delete:"Delete",lastUsed:qB,never:WB,realtimeMonitoring:KB,tubeTempHigh:ZB,powerHigh:QB,coolingFlowLow:JB,tubeTemp:eV,last20s:tV,detectorTemp:nV,coolingFlow:iV,dataRate:rV,systemLoad:sV,acquisitionProgress:aV,imagesAcquired:oV,estimatedTimeRemaining:lV,imageViewer:cV,original:uV,processed:dV,compareImages:hV,noImageLoaded:fV,uploadImage:mV,imageStatistics:gV,processingHistory:pV,quickFilters:xV,transformations:yV,adjustments:bV,invert:vV,flipVertical:wV,contrast:SV,processing:CV,autoProcess:kV,filters:jV,waitingForImage:TV,applyFilters:_V,liveProcessing:NV,imageProcessing:MV,crosshairTool:EV,crosshair:OV,roiCrosshair:DV,requirement22:AV,lineColor:RV,lineWidth:PV,extendBeyondROI:LV,showCenterMarker:FV,showCrosshair:zV,selectROI:IV,allROIs:BV,noROIsDetected:VV,drawROIOnCanvas:$V,detectedROIs:HV,roisDetected:UV,crosshairInfo:XV,toCrosshair:YV,pixelCoordinate:GV,pixelCoordinateTool:qV,requirement23:WV,pixelCoordinateInfo:KV,pixelCoordinateDescription:ZV,showCoordinates:QV,displayMode:JV,tooltip:e8,hud:t8,hudPosition:n8,showPixelValue:i8,textColor:r8,backgroundColor:s8,fontSize:a8,toTogglePixelCoordinates:o8,yes:l8,no:c8,opacity:u8,centerMarkerColor:d8,centerMarkerSize:h8,grid:f8,gridTool:m8,requirement25:g8,roiStats:p8,roiStatistics:x8,averageGrayValue:y8,minGrayValue:b8,maxGrayValue:v8,roiArea:w8,pixelCount:S8,pixels:C8,standardDeviation:k8,median:j8,snr:T8,cnr:_8,cnrComparison:N8,cnrDescription:M8,roiStatsDescription:E8,requirement28:O8,requirement29:D8,requirement30:A8,requirement31:R8,gridOverlayInfo:P8,gridOverlayDescription:L8,showGrid:F8,gridSpacing:z8,customSpacing:I8,lineStyle:B8,solid:V8,dashed:$8,dotted:H8,toToggleGrid:U8},Y8="",G8="",q8="",W8="",K8="",Z8="",Q8="",J8="   ",e$="   ",t$="  ",n$="  ",i$=":    !",r$="",s$=" ",a$=" ",o$="",l$=" ",c$="",u$="",d$="",h$="",f$="",m$=" ",g$="",p$="",x$="",y$="",b$=" ",v$="    !         .",w$=" ",S$="   .       .",C$="   {{mode}}",k$=" ",j$="",T$=" ",_$="  ( )",N$=" ()",M$="",E$=" ",O$="",D$=" ",A$=" ",R$=" ",P$=" {{label}}",L$=" ",F$="     ...",z$="  ",I$=" ",B$=" ",V$=" ",$$=" ",H$=" ",U$="   ",X$=" ",Y$=": {{name}}",G$="  ",q$="    ",W$=" ",K$=" ",Z$=" ",Q$="  ",J$=" {{variant}}",eH=": {{size}} ()",tH=": {{size}} ()",nH="{{variant}} {{size}}  !",iH="",rH=" ",sH="",aH="",oH="    ",lH="    ",cH=" X",uH=" Y",dH="  ",hH="    WebSocket...",fH="",mH="",gH="",pH="",xH=" ",yH=" ",bH="    ",vH="   X   (   )",wH="",SH="     ",CH="",kH="     ",jH="  ",TH="",_H="  ...",NH="     ",MH="   ",EH="",OH="     ()",DH=" ",AH="      (kVp)",RH=" ",PH="     ",LH="",FH="",zH="",IH="",BH="     (mm)",VH=" ",$H=" ",HH=" ",UH="",XH=" X",YH=" Y",GH=" Z",qH=" ",WH=" ",KH=" ",ZH="",QH="",JH="",eU="  ",tU=" ",nU="  ",iU="  ",rU="",sU="",aU="",oU="",lU=" WebSocket  ",cU=" ",uU=" ",dU="    ",hU=" ",fU=" ",mU="    ",gU=" ",pU="    ",xU=" ",yU=" X   ",bU=" Y   ",vU=" Z   ",wU="    ",SU="    ",CU=" ",kU="  ",jU="     ",TU=" ",_U="",NU="",MU="",EU="HDR",OU="  ",DU="  ",AU="     ",RU="     ",PU=" ",LU="    ",FU=" ",zU="",IU=" ",BU="",VU=" ",$U="  ",HU=" ",UU="",XU="",YU="",GU="  ",qU=" ",WU="TIFF",KU="JPG",ZU="DICOM",QU=" ",JU=" ",e9=" ",t9=" ",n9="  ",i9=" ",r9="    ",s9="",a9=" ",o9=" ",l9="    ",c9=" ",u9="",d9="   ",h9="  ",f9="",m9="",g9="",p9="",x9="   ",y9="  ",b9="",v9="",w9="  ",S9=" ",C9="",k9="",j9=" ",T9="     ",_9="     ",N9="",M9="",E9=" ",O9="",D9="",A9=" ",R9="  ",P9="    ",L9=" ",F9=" ",z9=" ",I9="",B9=" ",V9="  ",$9="     ",H9="    ",U9="    ",X9=" ",Y9=" ",G9=" ",q9="  ",W9="    ' '  ",K9="    ...",Z9="   ",Q9="     ",J9=" ",e7=" ",t7=" ",n7="   ",i7="",r7=" ",s7="",a7="",o7="  ",l7="  ",c7="  ",u7="  ",d7="    ",h7="  ",f7=" ",m7=" ",g7="   ",p7=" ",x7=" ",y7=" ",b7=" ",v7="         ",w7="   ",S7="  ",C7="    ",k7=" ",j7="",T7="  ",_7=" ",N7=" ",M7=" ",E7=" ",O7=" ",D7=" ",A7=" ",R7="  ",P7="",L7="  ",F7="",z7="",I7=" ",B7="  ",V7="  ",$7=" ",H7="",U7="",X7="",Y7="  ",G7=" ",q7=" ",W7="  ",K7=" ",Z7="  ",Q7=" ",J7="",eX=" ",tX=" ",nX="   ",iX=" ",rX="",sX="",aX=" ",oX=" ",lX=" ",cX="  ",uX=" ",dX=" ",hX=" ",fX="  ",mX="  ",gX=" ",pX="  ",xX=" ",yX="  ",bX=" ",vX=" ",wX="  ",SX=" ",CX="  ",kX="  ",jX=" ",TX=" ",_X="  ",NX=" ",MX=" ",EX=" ",OX=" ",DX="  ",AX=" ",RX="",PX="",LX="  ",FX=" ",zX="",IX="",BX=" ",VX=" ",$X="     ' '  ",HX=" ",UX=" ",XX=" ",YX=" ",GX=" ",qX=" ",WX=" ",KX=" ",ZX=" ",QX=" ",JX=" ",eY=" ",tY="  ",nY="  ",iY="  ",rY=" ",sY="    ",aY="    ",oY=" ",lY=" ",cY=" ",uY=" ",dY="",hY="",fY="",mY="",gY="",pY="",xY=" ",yY=" ",bY=" ",vY=" ",wY="",SY=" ",CY=" ",kY=" ",jY="       ",TY="      ",_Y="    ",NY=" ",MY="  ",EY=" ",OY=" ",DY="    ",AY="",RY="   ",PY="         ",LY="    ",FY="    ",zY="   ",IY="",BY="",VY="",$Y=" ",HY="",UY="  ",XY="   ",YY="    ",GY="   ",qY=" ",WY="  ",KY=" ",ZY=" ",QY=" ",JY=" ",eG=" ",tG="  ",nG="  ",iG=" ",rG="",sG=" ",aG=" ",oG="   ",lG=" ",cG=" ",uG=" ",dG=" ",hG="",fG="",mG="",gG=" ",pG="",xG="  ",yG=" ",bG="",vG="  ",wG=" ",SG=" ",CG=" ",kG="  ",jG=" ",TG="  ROI",_G=" 22",NG=" ",MG=" ",EG="   ROI",OG="  ",DG="  ",AG="  ROI",RG=" ROI",PG=" ROI    ",LG="         ROI  .",FG="{{count}} ROI  ",zG="ROI  ",IG="     ROI   .",BG=" /   ",VG=" ",$G="  ",HG=" 23",UG=" ",XG="          (X,Y)     .",YG=" ",GG=" ",qG=" ",WG=" ",KG=" ",ZG="  ",QG=" ",JG=" ",eq=" ",tq=" /   ",nq="",iq="",rq="",sq="  ",aq="  ",oq="",lq="  ",cq=" 25",uq=" ROI",dq="  ROI",hq="  ",fq="  ",mq="  ",gq=" ",pq=" ",xq="",yq=" ",bq="",vq="SNR (   )",wq="CNR (   )",Sq=" CNR",Cq=" ROI     CNR     :",kq="                .",jq=" 28",Tq=" 29",_q=" 30",Nq=" 31",Mq="",Eq="            .",Oq=" ",Dq=" ",Aq=" ",Rq=" ",Pq="",Lq="",Fq="",zq=" /  ",Iq={home:Y8,settings:G8,initial:q8,position:W8,projection:K8,postProcessing:Z8,reconstruction:Q8,systemStatus:J8,xrayStatus:e$,xrayOn:t$,xrayOff:n$,xraySafetyWarning:i$,camera:r$,projectionDisplay:s$,imageReel:a$,histogram:o$,toggleTheme:l$,crop:c$,brush:u$,eraser:d$,circle:h$,rectangle:f$,lineChart:m$,line:g$,move:p$,zoomIn:x$,zoomOut:y$,homePage:b$,welcome:v$,settingsPage:w$,settingsDescription:S$,switchTo:C$,inputShowcase:k$,checkboxes:j$,checkbox1:T$,checkbox2:_$,disabledCheckbox:N$,confirm:M$,disabledInput:E$,inputs:O$,textInput:D$,numberInput:A$,emailInput:R$,save:P$,textarea:L$,enterText:F$,saveTextarea:z$,otherInputs:I$,radioButtons:B$,option1:V$,option2:$$,selectDropdown:H$,selectOption:U$,uploadFile:X$,selected:Y$,passwordInput:G$,enterPassword:q$,rangeSlider:W$,colorPicker:K$,datePicker:Z$,iconButtonShowcase:Q$,variant:J$,sizeNormal:eH,sizeDisabled:tH,clicked:nH,run:iH,initialParameters:rH,name:sH,email:aH,enterName:oH,enterEmail:lH,xPosition:cH,yPosition:uH,enableFilter:dH,websocketConnecting:hH,theme:fH,language:mH,dark:gH,light:pH,projectionAcquisition:xH,transmissionPercentage:yH,enterTransmissionPercentage:bH,transmissionPercentageDescription:vH,success:wH,dataSubmittedSuccessfully:SH,error:CH,noDataToSubmit:kH,areYouSure:jH,cancel:TH,sendingData:_H,noDataAvailable:NH,invalidInitialParameters:MH,power:EH,enterPower:OH,tubeVoltage:DH,enterTubeVoltage:AH,anodeCurrent:RH,enterAnodeCurrent:PH,filtration:LH,aluminum:FH,copper:zH,silver:IH,enterThickness:BH,exposureTime:VH,bitDepth:$H,"8bit":"8 ","16bit":"16 ",tubeStatus:HH,manipulator:UH,manipulatorX:XH,manipulatorY:YH,manipulatorZ:GH,manipulatorTheta:qH,manipulatorGamma:WH,joystickSpeed:KH,joystickSpeedLow:ZH,joystickSpeedMedium:QH,joystickSpeedHigh:JH,cabinCameraStatus:eU,presetStandard:tU,presetHighPower:nU,clearAll:iU,voltage:rU,current:sU,active:aU,inactive:oU,websocketConnected:lU,fastImaging:cU,rotationSpeed:uU,enterRotationSpeed:dU,dualEnergy:hU,singleCalibration:fU,enterSingleCalibration:mU,rotateCalibration:gU,enterRotateCalibration:pU,selectedFile:xU,enterManipulatorX:yU,enterManipulatorY:bU,enterManipulatorZ:vU,enterManipulatorTheta:wU,enterManipulatorGamma:SU,"180degree":" ","360degree":" ",imagingMode:CU,multiSegmentSize:kU,enterMultiSegmentSize:jU,imageAdjustments:TU,gain:_U,offset:NU,preprocess:MU,hdr:EU,energyLevel1:OU,energyLevel2:DU,enterEnergyLevel1:AU,enterEnergyLevel2:RU,imageCount:PU,enterImageCount:LU,imageTransform:FU,none:zU,"90degree":" ","270degree":" ",basicOperations:IU,normalize:BU,fft:VU,fftInverse:$U,fourierFilter:HU,lowPass:UU,bandPass:XU,highPass:YU,applyFourierFilter:GU,exportImage:qU,export:"",tiff:WU,jpg:KU,dicom:ZU,imageFilters:QU,medianFilter:JU,meanFilter:e9,varianceFilter:t9,pseudoColorFilter:n9,gaussianFilter:i9,enterGaussianSigma:r9,sharpening:s9,kernelSize:a9,sharpeningStrength:o9,enterSharpeningStrength:l9,edgeDetection:c9,threshold:u9,enterThreshold:d9,edgeMethod:h9,sobel:f9,canny:m9,prewitt:g9,ok:p9,failedToSendData:x9,grayscale:y9,pan:b9,undo:v9,systemStabilityCheck:w9,interlock:S9,temperature:C9,pressure:k9,coolingSystem:j9,stabilityCheckDescription:T9,xrayExposureLog:_9,time:N9,download:M9,clear:E9,pause:O9,resume:D9,paused:A9,totalLogs:R9,noLogsYet:P9,stepSize:L9,linearMovement:F9,rotationalMovement:z9,control:I9,manualInput:B9,savedPositions:V9,lowSpeedDesc:$9,mediumSpeedDesc:H9,highSpeedDesc:U9,currentSpeed:X9,turnOn:Y9,turnOff:G9,cameraOff:q9,clickTurnOn:W9,connectingToCamera:K9,cameraError:Z9,checkCameraConnection:Q9,retry:J9,refresh:e7,fullscreen:t7,exitFullscreen:n7,resolution:i7,frameRate:r7,exposure:s7,brightness:a7,trajectoryDefinition:o7,import:" ",selectTrajectoryType:l7,stepwiseDesc:c7,circularDesc:u7,helicalDesc:d7,arbitraryDesc:h7,trajectoryParameters:f7,numberOfSteps:m7,anglePerStep:g7,startAngle:p7,endAngle:x7,helixPitch:y7,heightSteps:b7,arbitraryTrajectoryInfo:v7,openDesigner:w7,savedTrajectories:S7,enterTrajectoryName:C7,geometryConfiguration:k7,calibrate:j7,systemCalibrated:T7,lastCalibration:_7,geometricAccuracy:N7,distanceParameters:M7,detectorParameters:E7,detectorWidth:O7,detectorHeight:D7,pixelPitch:A7,calculatedValues:R7,magnification:P7,effectivePixelSize:L7,width:F7,height:z7,additionalParameters:I7,coneBeamAngle:B7,focalSpotSize:V7,acquisitionSettings:$7,start:H7,stop:U7,reset:X7,acquiring:Y7,completed:G7,rotationMode:q7,halfRotation:W7,fullRotation:K7,multiSegmentImaging:Z7,numberOfSegments:Q7,segmentOverlap:J7,totalHeight:eX,numberOfProjections:tX,exposurePerProjection:nX,acquisitionSummary:iX,mode:rX,segments:sX,totalProjections:aX,estimatedTime:oX,positionFeedback:lX,realTimePosition:cX,targetPosition:uX,currentPosition:dX,positionError:hX,linearDetectorImaging:fX,linearDetectorMode:mX,scanHeight:gX,verticalStepSize:pX,stitchingOverlap:xX,estimatedScanTime:yX,calibrationSystem:bX,calibrationType:vX,singleImageCalibration:wX,rotationalCalibration:SX,captureCalibrationImage:CX,startCalibrationScan:kX,calibrationStatus:jX,notCalibrated:TX,calibrating:_X,calibrated:NX,calibrationDate:MX,calibrationQuality:EX,recalibrate:OX,imageQualityAssessment:DX,overallQuality:AX,excellent:RX,good:PX,needsImprovement:LX,spatialResolution:FX,uniformity:zX,artifacts:IX,lastAssessment:BX,assessments:VX,startAssessmentMessage:$X,detectorConfiguration:HX,detectorStatus:UX,readoutNoise:XX,darkCurrent:YX,hardwareSettings:GX,binning:qX,readoutMode:WX,coolingTemperature:KX,gainMode:ZX,imagingSettings:QX,triggerMode:JX,processingSettings:eY,darkFrameCorrection:tY,flatFieldCorrection:nY,badPixelCorrection:iY,lagCorrection:rY,settingsSaved:sY,settingsImported:aY,advancedFiltering:oY,denoising:lY,edgeEnhancement:cY,histogramEqualization:uY,morphology:dY,wavelet:hY,method:fY,strength:mY,amount:gY,radius:pY,lowThreshold:xY,highThreshold:yY,clipLimit:bY,tileSize:vY,operation:wY,kernelShape:SY,waveletType:CY,decompositionLevel:kY,selectFilterType:jY,selectFilterFirst:TY,filterApplied:_Y,applyFilter:NY,scanProtocolManagement:MY,new:"",editProtocol:EY,newProtocol:OY,enterProtocolName:DY,description:AY,enterDescription:RY,confirmDeleteProtocol:PY,protocolApplied:LY,protocolsImported:FY,noProtocols:zY,apply:IY,edit:BY,duplicate:VY,delete:"",lastUsed:$Y,never:HY,realtimeMonitoring:UY,tubeTempHigh:XY,powerHigh:YY,coolingFlowLow:GY,tubeTemp:qY,last20s:WY,detectorTemp:KY,coolingFlow:ZY,dataRate:QY,systemLoad:JY,acquisitionProgress:eG,imagesAcquired:tG,estimatedTimeRemaining:nG,imageViewer:iG,original:rG,processed:sG,compareImages:aG,noImageLoaded:oG,uploadImage:lG,imageStatistics:cG,processingHistory:uG,quickFilters:dG,transformations:hG,adjustments:fG,invert:mG,flipVertical:gG,contrast:pG,processing:xG,autoProcess:yG,filters:bG,waitingForImage:vG,applyFilters:wG,liveProcessing:SG,imageProcessing:CG,crosshairTool:kG,crosshair:jG,roiCrosshair:TG,requirement22:_G,lineColor:NG,lineWidth:MG,extendBeyondROI:EG,showCenterMarker:OG,showCrosshair:DG,selectROI:AG,allROIs:RG,noROIsDetected:PG,drawROIOnCanvas:LG,detectedROIs:FG,roisDetected:zG,crosshairInfo:IG,toCrosshair:BG,pixelCoordinate:VG,pixelCoordinateTool:$G,requirement23:HG,pixelCoordinateInfo:UG,pixelCoordinateDescription:XG,showCoordinates:YG,displayMode:GG,tooltip:qG,hud:WG,hudPosition:KG,showPixelValue:ZG,textColor:QG,backgroundColor:JG,fontSize:eq,toTogglePixelCoordinates:tq,yes:nq,no:iq,opacity:rq,centerMarkerColor:sq,centerMarkerSize:aq,grid:oq,gridTool:lq,requirement25:cq,roiStats:uq,roiStatistics:dq,averageGrayValue:hq,minGrayValue:fq,maxGrayValue:mq,roiArea:gq,pixelCount:pq,pixels:xq,standardDeviation:yq,median:bq,snr:vq,cnr:wq,cnrComparison:Sq,cnrDescription:Cq,roiStatsDescription:kq,requirement28:jq,requirement29:Tq,requirement30:_q,requirement31:Nq,gridOverlayInfo:Mq,gridOverlayDescription:Eq,showGrid:Oq,gridSpacing:Dq,customSpacing:Aq,lineStyle:Rq,solid:Pq,dashed:Lq,dotted:Fq,toToggleGrid:zq},Bq={en:{translation:X8},fa:{translation:Iq}};en.use(d2).use(yT).init({resources:Bq,fallbackLng:"en",supportedLngs:["en","fa"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},debug:!1,saveMissing:!1,missingKeyHandler:!1}).catch(e=>{console.error("i18next initialization error:",e)});const Vq=N.createContext(),$q=({children:e})=>{const[t,r]=N.useState(null);return N.useEffect(()=>{const s=()=>{window.qt&&window.qt.webChannelTransport&&window.QWebChannel?new window.QWebChannel(window.qt.webChannelTransport,p=>{var b;(b=p==null?void 0:p.objects)!=null&&b.backend?r(p.objects.backend):console.error("WebChannel backend object not found.")}):setTimeout(s,100)};s()},[]),h.jsx(Vq.Provider,{value:{backend:t},children:e})};Pk.createRoot(document.getElementById("root")).render(h.jsx(Qj,{children:h.jsx(fP,{children:h.jsx(lP,{children:h.jsx($q,{children:h.jsx(jT,{children:h.jsx(BN,{children:h.jsx(LN,{children:h.jsx(TR,{children:h.jsx(MR,{children:h.jsx(tM,{children:h.jsx(vR,{children:h.jsx(yP,{})})})})})})})})})})})}));
