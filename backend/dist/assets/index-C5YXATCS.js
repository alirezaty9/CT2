(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))o(x);new MutationObserver(x=>{for(const b of x)if(b.type==="childList")for(const C of b.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&o(C)}).observe(document,{childList:!0,subtree:!0});function r(x){const b={};return x.integrity&&(b.integrity=x.integrity),x.referrerPolicy&&(b.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?b.credentials="include":x.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function o(x){if(x.ep)return;x.ep=!0;const b=r(x);fetch(x.href,b)}})();function wf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h2(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var x=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,x.get?x:{enumerable:!0,get:function(){return t[o]}})}),r}var td={exports:{}},Va={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function d2(){if(f0)return Va;f0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(o,x,b){var C=null;if(b!==void 0&&(C=""+b),x.key!==void 0&&(C=""+x.key),"key"in x){b={};for(var f in x)f!=="key"&&(b[f]=x[f])}else b=x;return x=b.ref,{$$typeof:t,type:o,key:C,ref:x!==void 0?x:null,props:b}}return Va.Fragment=e,Va.jsx=r,Va.jsxs=r,Va}var m0;function f2(){return m0||(m0=1,td.exports=d2()),td.exports}var p=f2(),nd={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function m2(){if(g0)return Ge;g0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),C=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),a=Symbol.iterator;function l(O){return O===null||typeof O!="object"?null:(O=a&&O[a]||O["@@iterator"],typeof O=="function"?O:null)}var c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function g(O,L,I){this.props=O,this.context=L,this.refs=y,this.updater=I||c}g.prototype.isReactComponent={},g.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},g.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=g.prototype;function S(O,L,I){this.props=O,this.context=L,this.refs=y,this.updater=I||c}var k=S.prototype=new w;k.constructor=S,m(k,g.prototype),k.isPureReactComponent=!0;var j=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function D(O,L,I,K,V,F){return I=F.ref,{$$typeof:t,type:O,key:L,ref:I!==void 0?I:null,props:F}}function A(O,L){return D(O.type,L,void 0,void 0,void 0,O.props)}function B(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function Y(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(I){return L[I]})}var oe=/\/+/g;function Z(O,L){return typeof O=="object"&&O!==null&&O.key!=null?Y(""+O.key):L.toString(36)}function ae(){}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ae,ae):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function G(O,L,I,K,V){var F=typeof O;(F==="undefined"||F==="boolean")&&(O=null);var J=!1;if(O===null)J=!0;else switch(F){case"bigint":case"string":case"number":J=!0;break;case"object":switch(O.$$typeof){case t:case e:J=!0;break;case d:return J=O._init,G(J(O._payload),L,I,K,V)}}if(J)return V=V(O),J=K===""?"."+Z(O,0):K,j(V)?(I="",J!=null&&(I=J.replace(oe,"$&/")+"/"),G(V,L,I,"",function(ce){return ce})):V!=null&&(B(V)&&(V=A(V,I+(V.key==null||O&&O.key===V.key?"":(""+V.key).replace(oe,"$&/")+"/")+J)),L.push(V)),1;J=0;var W=K===""?".":K+":";if(j(O))for(var ue=0;ue<O.length;ue++)K=O[ue],F=W+Z(K,ue),J+=G(K,L,I,F,V);else if(ue=l(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(K=O.next()).done;)K=K.value,F=W+Z(K,ue++),J+=G(K,L,I,F,V);else if(F==="object"){if(typeof O.then=="function")return G(te(O),L,I,K,V);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return J}function z(O,L,I){if(O==null)return O;var K=[],V=0;return G(O,K,"","",function(F){return L.call(I,F,V++)}),K}function q(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(I){(O._status===0||O._status===-1)&&(O._status=1,O._result=I)},function(I){(O._status===0||O._status===-1)&&(O._status=2,O._result=I)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var X=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function R(){}return Ge.Children={map:z,forEach:function(O,L,I){z(O,function(){L.apply(this,arguments)},I)},count:function(O){var L=0;return z(O,function(){L++}),L},toArray:function(O){return z(O,function(L){return L})||[]},only:function(O){if(!B(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ge.Component=g,Ge.Fragment=r,Ge.Profiler=x,Ge.PureComponent=S,Ge.StrictMode=o,Ge.Suspense=s,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return M.H.useMemoCache(O)}},Ge.cache=function(O){return function(){return O.apply(null,arguments)}},Ge.cloneElement=function(O,L,I){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=m({},O.props),V=O.key,F=void 0;if(L!=null)for(J in L.ref!==void 0&&(F=void 0),L.key!==void 0&&(V=""+L.key),L)!N.call(L,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&L.ref===void 0||(K[J]=L[J]);var J=arguments.length-2;if(J===1)K.children=I;else if(1<J){for(var W=Array(J),ue=0;ue<J;ue++)W[ue]=arguments[ue+2];K.children=W}return D(O.type,V,void 0,void 0,F,K)},Ge.createContext=function(O){return O={$$typeof:C,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:b,_context:O},O},Ge.createElement=function(O,L,I){var K,V={},F=null;if(L!=null)for(K in L.key!==void 0&&(F=""+L.key),L)N.call(L,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(V[K]=L[K]);var J=arguments.length-2;if(J===1)V.children=I;else if(1<J){for(var W=Array(J),ue=0;ue<J;ue++)W[ue]=arguments[ue+2];V.children=W}if(O&&O.defaultProps)for(K in J=O.defaultProps,J)V[K]===void 0&&(V[K]=J[K]);return D(O,F,void 0,void 0,null,V)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(O){return{$$typeof:f,render:O}},Ge.isValidElement=B,Ge.lazy=function(O){return{$$typeof:d,_payload:{_status:-1,_result:O},_init:q}},Ge.memo=function(O,L){return{$$typeof:h,type:O,compare:L===void 0?null:L}},Ge.startTransition=function(O){var L=M.T,I={};M.T=I;try{var K=O(),V=M.S;V!==null&&V(I,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(R,X)}catch(F){X(F)}finally{M.T=L}},Ge.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ge.use=function(O){return M.H.use(O)},Ge.useActionState=function(O,L,I){return M.H.useActionState(O,L,I)},Ge.useCallback=function(O,L){return M.H.useCallback(O,L)},Ge.useContext=function(O){return M.H.useContext(O)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(O,L){return M.H.useDeferredValue(O,L)},Ge.useEffect=function(O,L,I){var K=M.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(O,L)},Ge.useId=function(){return M.H.useId()},Ge.useImperativeHandle=function(O,L,I){return M.H.useImperativeHandle(O,L,I)},Ge.useInsertionEffect=function(O,L){return M.H.useInsertionEffect(O,L)},Ge.useLayoutEffect=function(O,L){return M.H.useLayoutEffect(O,L)},Ge.useMemo=function(O,L){return M.H.useMemo(O,L)},Ge.useOptimistic=function(O,L){return M.H.useOptimistic(O,L)},Ge.useReducer=function(O,L,I){return M.H.useReducer(O,L,I)},Ge.useRef=function(O){return M.H.useRef(O)},Ge.useState=function(O){return M.H.useState(O)},Ge.useSyncExternalStore=function(O,L,I){return M.H.useSyncExternalStore(O,L,I)},Ge.useTransition=function(){return M.H.useTransition()},Ge.version="19.1.0",Ge}var p0;function Sf(){return p0||(p0=1,nd.exports=m2()),nd.exports}var E=Sf();const Ae=wf(E);var id={exports:{}},Ua={},rd={exports:{}},sd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function g2(){return x0||(x0=1,function(t){function e(z,q){var X=z.length;z.push(q);e:for(;0<X;){var R=X-1>>>1,O=z[R];if(0<x(O,q))z[R]=q,z[X]=O,X=R;else break e}}function r(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var q=z[0],X=z.pop();if(X!==q){z[0]=X;e:for(var R=0,O=z.length,L=O>>>1;R<L;){var I=2*(R+1)-1,K=z[I],V=I+1,F=z[V];if(0>x(K,X))V<O&&0>x(F,K)?(z[R]=F,z[V]=X,R=V):(z[R]=K,z[I]=X,R=I);else if(V<O&&0>x(F,X))z[R]=F,z[V]=X,R=V;else break e}}return q}function x(z,q){var X=z.sortIndex-q.sortIndex;return X!==0?X:z.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;t.unstable_now=function(){return b.now()}}else{var C=Date,f=C.now();t.unstable_now=function(){return C.now()-f}}var s=[],h=[],d=1,a=null,l=3,c=!1,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var q=r(h);q!==null;){if(q.callback===null)o(h);else if(q.startTime<=z)o(h),q.sortIndex=q.expirationTime,e(s,q);else break;q=r(h)}}function M(z){if(y=!1,j(z),!m)if(r(s)!==null)m=!0,N||(N=!0,Z());else{var q=r(h);q!==null&&G(M,q.startTime-z)}}var N=!1,D=-1,A=5,B=-1;function Y(){return g?!0:!(t.unstable_now()-B<A)}function oe(){if(g=!1,N){var z=t.unstable_now();B=z;var q=!0;try{e:{m=!1,y&&(y=!1,S(D),D=-1),c=!0;var X=l;try{t:{for(j(z),a=r(s);a!==null&&!(a.expirationTime>z&&Y());){var R=a.callback;if(typeof R=="function"){a.callback=null,l=a.priorityLevel;var O=R(a.expirationTime<=z);if(z=t.unstable_now(),typeof O=="function"){a.callback=O,j(z),q=!0;break t}a===r(s)&&o(s),j(z)}else o(s);a=r(s)}if(a!==null)q=!0;else{var L=r(h);L!==null&&G(M,L.startTime-z),q=!1}}break e}finally{a=null,l=X,c=!1}q=void 0}}finally{q?Z():N=!1}}}var Z;if(typeof k=="function")Z=function(){k(oe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,te=ae.port2;ae.port1.onmessage=oe,Z=function(){te.postMessage(null)}}else Z=function(){w(oe,0)};function G(z,q){D=w(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return l},t.unstable_next=function(z){switch(l){case 1:case 2:case 3:var q=3;break;default:q=l}var X=l;l=q;try{return z()}finally{l=X}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=l;l=z;try{return q()}finally{l=X}},t.unstable_scheduleCallback=function(z,q,X){var R=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?R+X:R):X=R,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=X+O,z={id:d++,callback:q,priorityLevel:z,startTime:X,expirationTime:O,sortIndex:-1},X>R?(z.sortIndex=X,e(h,z),r(s)===null&&z===r(h)&&(y?(S(D),D=-1):y=!0,G(M,X-R))):(z.sortIndex=O,e(s,z),m||c||(m=!0,N||(N=!0,Z()))),z},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(z){var q=l;return function(){var X=l;l=q;try{return z.apply(this,arguments)}finally{l=X}}}}(sd)),sd}var y0;function p2(){return y0||(y0=1,rd.exports=g2()),rd.exports}var ad={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function x2(){if(v0)return qt;v0=1;var t=Sf();function e(s){var h="https://react.dev/errors/"+s;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+s+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},x=Symbol.for("react.portal");function b(s,h,d){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:a==null?null:""+a,children:s,containerInfo:h,implementation:d}}var C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(s,h){if(s==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,qt.createPortal=function(s,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return b(s,h,null,d)},qt.flushSync=function(s){var h=C.T,d=o.p;try{if(C.T=null,o.p=2,s)return s()}finally{C.T=h,o.p=d,o.d.f()}},qt.preconnect=function(s,h){typeof s=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(s,h))},qt.prefetchDNS=function(s){typeof s=="string"&&o.d.D(s)},qt.preinit=function(s,h){if(typeof s=="string"&&h&&typeof h.as=="string"){var d=h.as,a=f(d,h.crossOrigin),l=typeof h.integrity=="string"?h.integrity:void 0,c=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?o.d.S(s,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:a,integrity:l,fetchPriority:c}):d==="script"&&o.d.X(s,{crossOrigin:a,integrity:l,fetchPriority:c,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qt.preinitModule=function(s,h){if(typeof s=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=f(h.as,h.crossOrigin);o.d.M(s,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(s)},qt.preload=function(s,h){if(typeof s=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,a=f(d,h.crossOrigin);o.d.L(s,d,{crossOrigin:a,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qt.preloadModule=function(s,h){if(typeof s=="string")if(h){var d=f(h.as,h.crossOrigin);o.d.m(s,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(s)},qt.requestFormReset=function(s){o.d.r(s)},qt.unstable_batchedUpdates=function(s,h){return s(h)},qt.useFormState=function(s,h,d){return C.H.useFormState(s,h,d)},qt.useFormStatus=function(){return C.H.useHostTransitionStatus()},qt.version="19.1.0",qt}var b0;function y2(){if(b0)return ad.exports;b0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ad.exports=x2(),ad.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0;function v2(){if(w0)return Ua;w0=1;var t=p2(),e=Sf(),r=y2();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function b(n){var i=n,u=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(u=i.return),n=i.return;while(n)}return i.tag===3?u:null}function C(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(b(n)!==n)throw Error(o(188))}function s(n){var i=n.alternate;if(!i){if(i=b(n),i===null)throw Error(o(188));return i!==n?null:n}for(var u=n,v=i;;){var T=u.return;if(T===null)break;var _=T.alternate;if(_===null){if(v=T.return,v!==null){u=v;continue}break}if(T.child===_.child){for(_=T.child;_;){if(_===u)return f(T),n;if(_===v)return f(T),i;_=_.sibling}throw Error(o(188))}if(u.return!==v.return)u=T,v=_;else{for(var P=!1,U=T.child;U;){if(U===u){P=!0,u=T,v=_;break}if(U===v){P=!0,v=T,u=_;break}U=U.sibling}if(!P){for(U=_.child;U;){if(U===u){P=!0,u=_,v=T;break}if(U===v){P=!0,v=_,u=T;break}U=U.sibling}if(!P)throw Error(o(189))}}if(u.alternate!==v)throw Error(o(190))}if(u.tag!==3)throw Error(o(188));return u.stateNode.current===u?n:i}function h(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=h(n),i!==null)return i;n=n.sibling}return null}var d=Object.assign,a=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Symbol.for("react.client.reference");function te(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case g:return"Profiler";case y:return"StrictMode";case M:return"Suspense";case N:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case c:return"Portal";case k:return(n.displayName||"Context")+".Provider";case S:return(n._context.displayName||"Context")+".Consumer";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:te(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return te(n(i))}catch{}}return null}var G=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},R=[],O=-1;function L(n){return{current:n}}function I(n){0>O||(n.current=R[O],R[O]=null,O--)}function K(n,i){O++,R[O]=n.current,n.current=i}var V=L(null),F=L(null),J=L(null),W=L(null);function ue(n,i){switch(K(J,i),K(F,n),K(V,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Vx(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Vx(i),n=Ux(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}I(V),K(V,n)}function ce(){I(V),I(F),I(J)}function ie(n){n.memoizedState!==null&&K(W,n);var i=V.current,u=Ux(i,n.type);i!==u&&(K(F,n),K(V,u))}function Q(n){F.current===n&&(I(V),I(F)),W.current===n&&(I(W),La._currentValue=X)}var me=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,H=t.unstable_cancelCallback,re=t.unstable_shouldYield,ge=t.unstable_requestPaint,he=t.unstable_now,fe=t.unstable_getCurrentPriorityLevel,Se=t.unstable_ImmediatePriority,$=t.unstable_UserBlockingPriority,ne=t.unstable_NormalPriority,ee=t.unstable_LowPriority,we=t.unstable_IdlePriority,Ce=t.log,Te=t.unstable_setDisableYieldValue,Ee=null,Ne=null;function ze(n){if(typeof Ce=="function"&&Te(n),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(Ee,n)}catch{}}var Ue=Math.clz32?Math.clz32:rn,nn=Math.log,Xt=Math.LN2;function rn(n){return n>>>=0,n===0?32:31-(nn(n)/Xt|0)|0}var $n=256,Rn=4194304;function Pn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function si(n,i,u){var v=n.pendingLanes;if(v===0)return 0;var T=0,_=n.suspendedLanes,P=n.pingedLanes;n=n.warmLanes;var U=v&134217727;return U!==0?(v=U&~_,v!==0?T=Pn(v):(P&=U,P!==0?T=Pn(P):u||(u=U&~n,u!==0&&(T=Pn(u))))):(U=v&~_,U!==0?T=Pn(U):P!==0?T=Pn(P):u||(u=v&~n,u!==0&&(T=Pn(u)))),T===0?0:i!==0&&i!==T&&(i&_)===0&&(_=T&-T,u=i&-i,_>=u||_===32&&(u&4194048)!==0)?i:T}function lr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function zo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tm(){var n=$n;return $n<<=1,($n&4194048)===0&&($n=256),n}function km(){var n=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),n}function $c(n){for(var i=[],u=0;31>u;u++)i.push(n);return i}function Ys(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Jw(n,i,u,v,T,_){var P=n.pendingLanes;n.pendingLanes=u,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=u,n.entangledLanes&=u,n.errorRecoveryDisabledLanes&=u,n.shellSuspendCounter=0;var U=n.entanglements,se=n.expirationTimes,ye=n.hiddenUpdates;for(u=P&~u;0<u;){var ke=31-Ue(u),_e=1<<ke;U[ke]=0,se[ke]=-1;var ve=ye[ke];if(ve!==null)for(ye[ke]=null,ke=0;ke<ve.length;ke++){var be=ve[ke];be!==null&&(be.lane&=-536870913)}u&=~_e}v!==0&&jm(n,v,0),_!==0&&T===0&&n.tag!==0&&(n.suspendedLanes|=_&~(P&~i))}function jm(n,i,u){n.pendingLanes|=i,n.suspendedLanes&=~i;var v=31-Ue(i);n.entangledLanes|=i,n.entanglements[v]=n.entanglements[v]|1073741824|u&4194090}function _m(n,i){var u=n.entangledLanes|=i;for(n=n.entanglements;u;){var v=31-Ue(u),T=1<<v;T&i|n[v]&i&&(n[v]|=i),u&=~T}}function Xc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Yc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Em(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:o0(n.type))}function eS(n,i){var u=q.p;try{return q.p=n,i()}finally{q.p=u}}var Ni=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ni,sn="__reactProps$"+Ni,Ir="__reactContainer$"+Ni,Gc="__reactEvents$"+Ni,tS="__reactListeners$"+Ni,nS="__reactHandles$"+Ni,Mm="__reactResources$"+Ni,Gs="__reactMarker$"+Ni;function qc(n){delete n[Yt],delete n[sn],delete n[Gc],delete n[tS],delete n[nS]}function Vr(n){var i=n[Yt];if(i)return i;for(var u=n.parentNode;u;){if(i=u[Ir]||u[Yt]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(n=Yx(n);n!==null;){if(u=n[Yt])return u;n=Yx(n)}return i}n=u,u=n.parentNode}return null}function Ur(n){if(n=n[Yt]||n[Ir]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function qs(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function Hr(n){var i=n[Mm];return i||(i=n[Mm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(n){n[Gs]=!0}var Nm=new Set,Om={};function cr(n,i){$r(n,i),$r(n+"Capture",i)}function $r(n,i){for(Om[n]=i,n=0;n<i.length;n++)Nm.add(i[n])}var iS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dm={},Am={};function rS(n){return me.call(Am,n)?!0:me.call(Dm,n)?!1:iS.test(n)?Am[n]=!0:(Dm[n]=!0,!1)}function Bo(n,i,u){if(rS(i))if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var v=i.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+u)}}function Io(n,i,u){if(u===null)n.removeAttribute(i);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+u)}}function ai(n,i,u,v){if(v===null)n.removeAttribute(u);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(u);return}n.setAttributeNS(i,u,""+v)}}var Wc,Rm;function Xr(n){if(Wc===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);Wc=i&&i[1]||"",Rm=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wc+n+Rm}var Kc=!1;function Zc(n,i){if(!n||Kc)return"";Kc=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(i){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(be){var ve=be}Reflect.construct(n,[],_e)}else{try{_e.call()}catch(be){ve=be}n.call(_e.prototype)}}else{try{throw Error()}catch(be){ve=be}(_e=n())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(be){if(be&&ve&&typeof be.stack=="string")return[be.stack,ve.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=v.DetermineComponentFrameRoot(),P=_[0],U=_[1];if(P&&U){var se=P.split(`
`),ye=U.split(`
`);for(T=v=0;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;for(;T<ye.length&&!ye[T].includes("DetermineComponentFrameRoot");)T++;if(v===se.length||T===ye.length)for(v=se.length-1,T=ye.length-1;1<=v&&0<=T&&se[v]!==ye[T];)T--;for(;1<=v&&0<=T;v--,T--)if(se[v]!==ye[T]){if(v!==1||T!==1)do if(v--,T--,0>T||se[v]!==ye[T]){var ke=`
`+se[v].replace(" at new "," at ");return n.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",n.displayName)),ke}while(1<=v&&0<=T);break}}}finally{Kc=!1,Error.prepareStackTrace=u}return(u=n?n.displayName||n.name:"")?Xr(u):""}function sS(n){switch(n.tag){case 26:case 27:case 5:return Xr(n.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return Zc(n.type,!1);case 11:return Zc(n.type.render,!1);case 1:return Zc(n.type,!0);case 31:return Xr("Activity");default:return""}}function Pm(n){try{var i="";do i+=sS(n),n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Lm(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function aS(n){var i=Lm(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),v=""+n[i];if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var T=u.get,_=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return T.call(this)},set:function(P){v=""+P,_.call(this,P)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return v},setValue:function(P){v=""+P},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Vo(n){n._valueTracker||(n._valueTracker=aS(n))}function Fm(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var u=i.getValue(),v="";return n&&(v=Lm(n)?n.checked?"true":"false":n.value),n=v,n!==u?(i.setValue(n),!0):!1}function Uo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var oS=/[\n"\\]/g;function Sn(n){return n.replace(oS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Qc(n,i,u,v,T,_,P,U){n.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.type=P:n.removeAttribute("type"),i!=null?P==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+wn(i)):n.value!==""+wn(i)&&(n.value=""+wn(i)):P!=="submit"&&P!=="reset"||n.removeAttribute("value"),i!=null?Jc(n,P,wn(i)):u!=null?Jc(n,P,wn(u)):v!=null&&n.removeAttribute("value"),T==null&&_!=null&&(n.defaultChecked=!!_),T!=null&&(n.checked=T&&typeof T!="function"&&typeof T!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+wn(U):n.removeAttribute("name")}function zm(n,i,u,v,T,_,P,U){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),i!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||i!=null))return;u=u!=null?""+wn(u):"",i=i!=null?""+wn(i):u,U||i===n.value||(n.value=i),n.defaultValue=i}v=v??T,v=typeof v!="function"&&typeof v!="symbol"&&!!v,n.checked=U?n.checked:!!v,n.defaultChecked=!!v,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(n.name=P)}function Jc(n,i,u){i==="number"&&Uo(n.ownerDocument)===n||n.defaultValue===""+u||(n.defaultValue=""+u)}function Yr(n,i,u,v){if(n=n.options,i){i={};for(var T=0;T<u.length;T++)i["$"+u[T]]=!0;for(u=0;u<n.length;u++)T=i.hasOwnProperty("$"+n[u].value),n[u].selected!==T&&(n[u].selected=T),T&&v&&(n[u].defaultSelected=!0)}else{for(u=""+wn(u),i=null,T=0;T<n.length;T++){if(n[T].value===u){n[T].selected=!0,v&&(n[T].defaultSelected=!0);return}i!==null||n[T].disabled||(i=n[T])}i!==null&&(i.selected=!0)}}function Bm(n,i,u){if(i!=null&&(i=""+wn(i),i!==n.value&&(n.value=i),u==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=u!=null?""+wn(u):""}function Im(n,i,u,v){if(i==null){if(v!=null){if(u!=null)throw Error(o(92));if(G(v)){if(1<v.length)throw Error(o(93));v=v[0]}u=v}u==null&&(u=""),i=u}u=wn(i),n.defaultValue=u,v=n.textContent,v===u&&v!==""&&v!==null&&(n.value=v)}function Gr(n,i){if(i){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=i;return}}n.textContent=i}var lS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vm(n,i,u){var v=i.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?v?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":v?n.setProperty(i,u):typeof u!="number"||u===0||lS.has(i)?i==="float"?n.cssFloat=u:n[i]=(""+u).trim():n[i]=u+"px"}function Um(n,i,u){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,u!=null){for(var v in u)!u.hasOwnProperty(v)||i!=null&&i.hasOwnProperty(v)||(v.indexOf("--")===0?n.setProperty(v,""):v==="float"?n.cssFloat="":n[v]="");for(var T in i)v=i[T],i.hasOwnProperty(T)&&u[T]!==v&&Vm(n,T,v)}else for(var _ in i)i.hasOwnProperty(_)&&Vm(n,_,i[_])}function eu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ho(n){return uS.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var tu=null;function nu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qr=null,Wr=null;function Hm(n){var i=Ur(n);if(i&&(n=i.stateNode)){var u=n[sn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Qc(n,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),i=u.name,u.type==="radio"&&i!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Sn(""+i)+'"][type="radio"]'),i=0;i<u.length;i++){var v=u[i];if(v!==n&&v.form===n.form){var T=v[sn]||null;if(!T)throw Error(o(90));Qc(v,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(i=0;i<u.length;i++)v=u[i],v.form===n.form&&Fm(v)}break e;case"textarea":Bm(n,u.value,u.defaultValue);break e;case"select":i=u.value,i!=null&&Yr(n,!!u.multiple,i,!1)}}}var iu=!1;function $m(n,i,u){if(iu)return n(i,u);iu=!0;try{var v=n(i);return v}finally{if(iu=!1,(qr!==null||Wr!==null)&&(El(),qr&&(i=qr,n=Wr,Wr=qr=null,Hm(i),n)))for(i=0;i<n.length;i++)Hm(n[i])}}function Ws(n,i){var u=n.stateNode;if(u===null)return null;var v=u[sn]||null;if(v===null)return null;u=v[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(n=n.type,v=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!v;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(o(231,i,typeof u));return u}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=!1;if(oi)try{var Ks={};Object.defineProperty(Ks,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Ks,Ks),window.removeEventListener("test",Ks,Ks)}catch{ru=!1}var Oi=null,su=null,$o=null;function Xm(){if($o)return $o;var n,i=su,u=i.length,v,T="value"in Oi?Oi.value:Oi.textContent,_=T.length;for(n=0;n<u&&i[n]===T[n];n++);var P=u-n;for(v=1;v<=P&&i[u-v]===T[_-v];v++);return $o=T.slice(n,1<v?1-v:void 0)}function Xo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yo(){return!0}function Ym(){return!1}function an(n){function i(u,v,T,_,P){this._reactName=u,this._targetInst=T,this.type=v,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(u=n[U],this[U]=u?u(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yo:Ym,this.isPropagationStopped=Ym,this}return d(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),i}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=an(ur),Zs=d({},ur,{view:0,detail:0}),hS=an(Zs),au,ou,Qs,qo=d({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qs&&(Qs&&n.type==="mousemove"?(au=n.screenX-Qs.screenX,ou=n.screenY-Qs.screenY):ou=au=0,Qs=n),au)},movementY:function(n){return"movementY"in n?n.movementY:ou}}),Gm=an(qo),dS=d({},qo,{dataTransfer:0}),fS=an(dS),mS=d({},Zs,{relatedTarget:0}),lu=an(mS),gS=d({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),pS=an(gS),xS=d({},ur,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yS=an(xS),vS=d({},ur,{data:0}),qm=an(vS),bS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CS(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=SS[n])?!!i[n]:!1}function cu(){return CS}var TS=d({},Zs,{key:function(n){if(n.key){var i=bS[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Xo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(n){return n.type==="keypress"?Xo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),kS=an(TS),jS=d({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wm=an(jS),_S=d({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),ES=an(_S),MS=d({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),NS=an(MS),OS=d({},qo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),DS=an(OS),AS=d({},ur,{newState:0,oldState:0}),RS=an(AS),PS=[9,13,27,32],uu=oi&&"CompositionEvent"in window,Js=null;oi&&"documentMode"in document&&(Js=document.documentMode);var LS=oi&&"TextEvent"in window&&!Js,Km=oi&&(!uu||Js&&8<Js&&11>=Js),Zm=" ",Qm=!1;function Jm(n,i){switch(n){case"keyup":return PS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Kr=!1;function FS(n,i){switch(n){case"compositionend":return eg(i);case"keypress":return i.which!==32?null:(Qm=!0,Zm);case"textInput":return n=i.data,n===Zm&&Qm?null:n;default:return null}}function zS(n,i){if(Kr)return n==="compositionend"||!uu&&Jm(n,i)?(n=Xm(),$o=su=Oi=null,Kr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Km&&i.locale!=="ko"?null:i.data;default:return null}}var BS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tg(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!BS[n.type]:i==="textarea"}function ng(n,i,u,v){qr?Wr?Wr.push(v):Wr=[v]:qr=v,i=Rl(i,"onChange"),0<i.length&&(u=new Go("onChange","change",null,u,v),n.push({event:u,listeners:i}))}var ea=null,ta=null;function IS(n){Lx(n,0)}function Wo(n){var i=qs(n);if(Fm(i))return n}function ig(n,i){if(n==="change")return i}var rg=!1;if(oi){var hu;if(oi){var du="oninput"in document;if(!du){var sg=document.createElement("div");sg.setAttribute("oninput","return;"),du=typeof sg.oninput=="function"}hu=du}else hu=!1;rg=hu&&(!document.documentMode||9<document.documentMode)}function ag(){ea&&(ea.detachEvent("onpropertychange",og),ta=ea=null)}function og(n){if(n.propertyName==="value"&&Wo(ta)){var i=[];ng(i,ta,n,nu(n)),$m(IS,i)}}function VS(n,i,u){n==="focusin"?(ag(),ea=i,ta=u,ea.attachEvent("onpropertychange",og)):n==="focusout"&&ag()}function US(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Wo(ta)}function HS(n,i){if(n==="click")return Wo(i)}function $S(n,i){if(n==="input"||n==="change")return Wo(i)}function XS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var dn=typeof Object.is=="function"?Object.is:XS;function na(n,i){if(dn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var u=Object.keys(n),v=Object.keys(i);if(u.length!==v.length)return!1;for(v=0;v<u.length;v++){var T=u[v];if(!me.call(i,T)||!dn(n[T],i[T]))return!1}return!0}function lg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cg(n,i){var u=lg(n);n=0;for(var v;u;){if(u.nodeType===3){if(v=n+u.textContent.length,n<=i&&v>=i)return{node:u,offset:i-n};n=v}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=lg(u)}}function ug(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ug(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function hg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Uo(n.document);i instanceof n.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)n=i.contentWindow;else break;i=Uo(n.document)}return i}function fu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var YS=oi&&"documentMode"in document&&11>=document.documentMode,Zr=null,mu=null,ia=null,gu=!1;function dg(n,i,u){var v=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;gu||Zr==null||Zr!==Uo(v)||(v=Zr,"selectionStart"in v&&fu(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ia&&na(ia,v)||(ia=v,v=Rl(mu,"onSelect"),0<v.length&&(i=new Go("onSelect","select",null,i,u),n.push({event:i,listeners:v}),i.target=Zr)))}function hr(n,i){var u={};return u[n.toLowerCase()]=i.toLowerCase(),u["Webkit"+n]="webkit"+i,u["Moz"+n]="moz"+i,u}var Qr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},pu={},fg={};oi&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function dr(n){if(pu[n])return pu[n];if(!Qr[n])return n;var i=Qr[n],u;for(u in i)if(i.hasOwnProperty(u)&&u in fg)return pu[n]=i[u];return n}var mg=dr("animationend"),gg=dr("animationiteration"),pg=dr("animationstart"),GS=dr("transitionrun"),qS=dr("transitionstart"),WS=dr("transitioncancel"),xg=dr("transitionend"),yg=new Map,xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xu.push("scrollEnd");function Ln(n,i){yg.set(n,i),cr(i,[n])}var vg=new WeakMap;function Cn(n,i){if(typeof n=="object"&&n!==null){var u=vg.get(n);return u!==void 0?u:(i={value:n,source:i,stack:Pm(i)},vg.set(n,i),i)}return{value:n,source:i,stack:Pm(i)}}var Tn=[],Jr=0,yu=0;function Ko(){for(var n=Jr,i=yu=Jr=0;i<n;){var u=Tn[i];Tn[i++]=null;var v=Tn[i];Tn[i++]=null;var T=Tn[i];Tn[i++]=null;var _=Tn[i];if(Tn[i++]=null,v!==null&&T!==null){var P=v.pending;P===null?T.next=T:(T.next=P.next,P.next=T),v.pending=T}_!==0&&bg(u,T,_)}}function Zo(n,i,u,v){Tn[Jr++]=n,Tn[Jr++]=i,Tn[Jr++]=u,Tn[Jr++]=v,yu|=v,n.lanes|=v,n=n.alternate,n!==null&&(n.lanes|=v)}function vu(n,i,u,v){return Zo(n,i,u,v),Qo(n)}function es(n,i){return Zo(n,null,null,i),Qo(n)}function bg(n,i,u){n.lanes|=u;var v=n.alternate;v!==null&&(v.lanes|=u);for(var T=!1,_=n.return;_!==null;)_.childLanes|=u,v=_.alternate,v!==null&&(v.childLanes|=u),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(T=!0)),n=_,_=_.return;return n.tag===3?(_=n.stateNode,T&&i!==null&&(T=31-Ue(u),n=_.hiddenUpdates,v=n[T],v===null?n[T]=[i]:v.push(i),i.lane=u|536870912),_):null}function Qo(n){if(50<Ea)throw Ea=0,kh=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ts={};function KS(n,i,u,v){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,i,u,v){return new KS(n,i,u,v)}function bu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function li(n,i){var u=n.alternate;return u===null?(u=fn(n.tag,i,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=i,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&65011712,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,i=n.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u.refCleanup=n.refCleanup,u}function wg(n,i){n.flags&=65011714;var u=n.alternate;return u===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=u.childLanes,n.lanes=u.lanes,n.child=u.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,n.type=u.type,i=u.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Jo(n,i,u,v,T,_){var P=0;if(v=n,typeof n=="function")bu(n)&&(P=1);else if(typeof n=="string")P=QC(n,u,V.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=fn(31,u,i,T),n.elementType=B,n.lanes=_,n;case m:return fr(u.children,T,_,i);case y:P=8,T|=24;break;case g:return n=fn(12,u,i,T|2),n.elementType=g,n.lanes=_,n;case M:return n=fn(13,u,i,T),n.elementType=M,n.lanes=_,n;case N:return n=fn(19,u,i,T),n.elementType=N,n.lanes=_,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case k:P=10;break e;case S:P=9;break e;case j:P=11;break e;case D:P=14;break e;case A:P=16,v=null;break e}P=29,u=Error(o(130,n===null?"null":typeof n,"")),v=null}return i=fn(P,u,i,T),i.elementType=n,i.type=v,i.lanes=_,i}function fr(n,i,u,v){return n=fn(7,n,v,i),n.lanes=u,n}function wu(n,i,u){return n=fn(6,n,null,i),n.lanes=u,n}function Su(n,i,u){return i=fn(4,n.children!==null?n.children:[],n.key,i),i.lanes=u,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ns=[],is=0,el=null,tl=0,kn=[],jn=0,mr=null,ci=1,ui="";function gr(n,i){ns[is++]=tl,ns[is++]=el,el=n,tl=i}function Sg(n,i,u){kn[jn++]=ci,kn[jn++]=ui,kn[jn++]=mr,mr=n;var v=ci;n=ui;var T=32-Ue(v)-1;v&=~(1<<T),u+=1;var _=32-Ue(i)+T;if(30<_){var P=T-T%5;_=(v&(1<<P)-1).toString(32),v>>=P,T-=P,ci=1<<32-Ue(i)+T|u<<T|v,ui=_+n}else ci=1<<_|u<<T|v,ui=n}function Cu(n){n.return!==null&&(gr(n,1),Sg(n,1,0))}function Tu(n){for(;n===el;)el=ns[--is],ns[is]=null,tl=ns[--is],ns[is]=null;for(;n===mr;)mr=kn[--jn],kn[jn]=null,ui=kn[--jn],kn[jn]=null,ci=kn[--jn],kn[jn]=null}var Zt=null,gt=null,nt=!1,pr=null,Xn=!1,ku=Error(o(519));function xr(n){var i=Error(o(418,""));throw aa(Cn(i,n)),ku}function Cg(n){var i=n.stateNode,u=n.type,v=n.memoizedProps;switch(i[Yt]=n,i[sn]=v,u){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(u=0;u<Na.length;u++)Qe(Na[u],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Qe("invalid",i),zm(i,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),Vo(i);break;case"select":Qe("invalid",i);break;case"textarea":Qe("invalid",i),Im(i,v.value,v.defaultValue,v.children),Vo(i)}u=v.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||i.textContent===""+u||v.suppressHydrationWarning===!0||Ix(i.textContent,u)?(v.popover!=null&&(Qe("beforetoggle",i),Qe("toggle",i)),v.onScroll!=null&&Qe("scroll",i),v.onScrollEnd!=null&&Qe("scrollend",i),v.onClick!=null&&(i.onclick=Pl),i=!0):i=!1,i||xr(n)}function Tg(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Zt=Zt.return}}function ra(n){if(n!==Zt)return!1;if(!nt)return Tg(n),nt=!0,!1;var i=n.tag,u;if((u=i!==3&&i!==27)&&((u=i===5)&&(u=n.type,u=!(u!=="form"&&u!=="button")||Vh(n.type,n.memoizedProps)),u=!u),u&&gt&&xr(n),Tg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(u=n.data,u==="/$"){if(i===0){gt=zn(n.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++;n=n.nextSibling}gt=null}}else i===27?(i=gt,Gi(n.type)?(n=Xh,Xh=null,gt=n):gt=i):gt=Zt?zn(n.stateNode.nextSibling):null;return!0}function sa(){gt=Zt=null,nt=!1}function kg(){var n=pr;return n!==null&&(cn===null?cn=n:cn.push.apply(cn,n),pr=null),n}function aa(n){pr===null?pr=[n]:pr.push(n)}var ju=L(null),yr=null,hi=null;function Di(n,i,u){K(ju,i._currentValue),i._currentValue=u}function di(n){n._currentValue=ju.current,I(ju)}function _u(n,i,u){for(;n!==null;){var v=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,v!==null&&(v.childLanes|=i)):v!==null&&(v.childLanes&i)!==i&&(v.childLanes|=i),n===u)break;n=n.return}}function Eu(n,i,u,v){var T=n.child;for(T!==null&&(T.return=n);T!==null;){var _=T.dependencies;if(_!==null){var P=T.child;_=_.firstContext;e:for(;_!==null;){var U=_;_=T;for(var se=0;se<i.length;se++)if(U.context===i[se]){_.lanes|=u,U=_.alternate,U!==null&&(U.lanes|=u),_u(_.return,u,n),v||(P=null);break e}_=U.next}}else if(T.tag===18){if(P=T.return,P===null)throw Error(o(341));P.lanes|=u,_=P.alternate,_!==null&&(_.lanes|=u),_u(P,u,n),P=null}else P=T.child;if(P!==null)P.return=T;else for(P=T;P!==null;){if(P===n){P=null;break}if(T=P.sibling,T!==null){T.return=P.return,P=T;break}P=P.return}T=P}}function oa(n,i,u,v){n=null;for(var T=i,_=!1;T!==null;){if(!_){if((T.flags&524288)!==0)_=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var P=T.alternate;if(P===null)throw Error(o(387));if(P=P.memoizedProps,P!==null){var U=T.type;dn(T.pendingProps.value,P.value)||(n!==null?n.push(U):n=[U])}}else if(T===W.current){if(P=T.alternate,P===null)throw Error(o(387));P.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(n!==null?n.push(La):n=[La])}T=T.return}n!==null&&Eu(i,n,u,v),i.flags|=262144}function nl(n){for(n=n.firstContext;n!==null;){if(!dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function vr(n){yr=n,hi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Gt(n){return jg(yr,n)}function il(n,i){return yr===null&&vr(n),jg(n,i)}function jg(n,i){var u=i._currentValue;if(i={context:i,memoizedValue:u,next:null},hi===null){if(n===null)throw Error(o(308));hi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else hi=hi.next=i;return u}var ZS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(u,v){n.push(v)}};this.abort=function(){i.aborted=!0,n.forEach(function(u){return u()})}},QS=t.unstable_scheduleCallback,JS=t.unstable_NormalPriority,Mt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new ZS,data:new Map,refCount:0}}function la(n){n.refCount--,n.refCount===0&&QS(JS,function(){n.controller.abort()})}var ca=null,Nu=0,rs=0,ss=null;function eC(n,i){if(ca===null){var u=ca=[];Nu=0,rs=Dh(),ss={status:"pending",value:void 0,then:function(v){u.push(v)}}}return Nu++,i.then(_g,_g),i}function _g(){if(--Nu===0&&ca!==null){ss!==null&&(ss.status="fulfilled");var n=ca;ca=null,rs=0,ss=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function tC(n,i){var u=[],v={status:"pending",value:null,reason:null,then:function(T){u.push(T)}};return n.then(function(){v.status="fulfilled",v.value=i;for(var T=0;T<u.length;T++)(0,u[T])(i)},function(T){for(v.status="rejected",v.reason=T,T=0;T<u.length;T++)(0,u[T])(void 0)}),v}var Eg=z.S;z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&eC(n,i),Eg!==null&&Eg(n,i)};var br=L(null);function Ou(){var n=br.current;return n!==null?n:ct.pooledCache}function rl(n,i){i===null?K(br,br.current):K(br,i.pool)}function Mg(){var n=Ou();return n===null?null:{parent:Mt._currentValue,pool:n}}var ua=Error(o(460)),Ng=Error(o(474)),sl=Error(o(542)),Du={then:function(){}};function Og(n){return n=n.status,n==="fulfilled"||n==="rejected"}function al(){}function Dg(n,i,u){switch(u=n[u],u===void 0?n.push(i):u!==i&&(i.then(al,al),i=u),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Rg(n),n;default:if(typeof i.status=="string")i.then(al,al);else{if(n=ct,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(v){if(i.status==="pending"){var T=i;T.status="fulfilled",T.value=v}},function(v){if(i.status==="pending"){var T=i;T.status="rejected",T.reason=v}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Rg(n),n}throw ha=i,ua}}var ha=null;function Ag(){if(ha===null)throw Error(o(459));var n=ha;return ha=null,n}function Rg(n){if(n===ua||n===sl)throw Error(o(483))}var Ai=!1;function Au(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ru(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(n,i,u){var v=n.updateQueue;if(v===null)return null;if(v=v.shared,(it&2)!==0){var T=v.pending;return T===null?i.next=i:(i.next=T.next,T.next=i),v.pending=i,i=Qo(n),bg(n,null,u),i}return Zo(n,v,i,u),Qo(n)}function da(n,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194048)!==0)){var v=i.lanes;v&=n.pendingLanes,u|=v,i.lanes=u,_m(n,u)}}function Pu(n,i){var u=n.updateQueue,v=n.alternate;if(v!==null&&(v=v.updateQueue,u===v)){var T=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?T=_=P:_=_.next=P,u=u.next}while(u!==null);_===null?T=_=i:_=_.next=i}else T=_=i;u={baseState:v.baseState,firstBaseUpdate:T,lastBaseUpdate:_,shared:v.shared,callbacks:v.callbacks},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=i:n.next=i,u.lastBaseUpdate=i}var Lu=!1;function fa(){if(Lu){var n=ss;if(n!==null)throw n}}function ma(n,i,u,v){Lu=!1;var T=n.updateQueue;Ai=!1;var _=T.firstBaseUpdate,P=T.lastBaseUpdate,U=T.shared.pending;if(U!==null){T.shared.pending=null;var se=U,ye=se.next;se.next=null,P===null?_=ye:P.next=ye,P=se;var ke=n.alternate;ke!==null&&(ke=ke.updateQueue,U=ke.lastBaseUpdate,U!==P&&(U===null?ke.firstBaseUpdate=ye:U.next=ye,ke.lastBaseUpdate=se))}if(_!==null){var _e=T.baseState;P=0,ke=ye=se=null,U=_;do{var ve=U.lane&-536870913,be=ve!==U.lane;if(be?(Je&ve)===ve:(v&ve)===ve){ve!==0&&ve===rs&&(Lu=!0),ke!==null&&(ke=ke.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var He=n,Ie=U;ve=i;var ot=u;switch(Ie.tag){case 1:if(He=Ie.payload,typeof He=="function"){_e=He.call(ot,_e,ve);break e}_e=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ie.payload,ve=typeof He=="function"?He.call(ot,_e,ve):He,ve==null)break e;_e=d({},_e,ve);break e;case 2:Ai=!0}}ve=U.callback,ve!==null&&(n.flags|=64,be&&(n.flags|=8192),be=T.callbacks,be===null?T.callbacks=[ve]:be.push(ve))}else be={lane:ve,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ke===null?(ye=ke=be,se=_e):ke=ke.next=be,P|=ve;if(U=U.next,U===null){if(U=T.shared.pending,U===null)break;be=U,U=be.next,be.next=null,T.lastBaseUpdate=be,T.shared.pending=null}}while(!0);ke===null&&(se=_e),T.baseState=se,T.firstBaseUpdate=ye,T.lastBaseUpdate=ke,_===null&&(T.shared.lanes=0),Hi|=P,n.lanes=P,n.memoizedState=_e}}function Pg(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function Lg(n,i){var u=n.callbacks;if(u!==null)for(n.callbacks=null,n=0;n<u.length;n++)Pg(u[n],i)}var as=L(null),ol=L(0);function Fg(n,i){n=vi,K(ol,n),K(as,i),vi=n|i.baseLanes}function Fu(){K(ol,vi),K(as,as.current)}function zu(){vi=ol.current,I(as),I(ol)}var Li=0,qe=null,st=null,kt=null,ll=!1,os=!1,wr=!1,cl=0,ga=0,ls=null,nC=0;function vt(){throw Error(o(321))}function Bu(n,i){if(i===null)return!1;for(var u=0;u<i.length&&u<n.length;u++)if(!dn(n[u],i[u]))return!1;return!0}function Iu(n,i,u,v,T,_){return Li=_,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=n===null||n.memoizedState===null?bp:wp,wr=!1,_=u(v,T),wr=!1,os&&(_=Bg(i,u,v,T)),zg(n),_}function zg(n){z.H=gl;var i=st!==null&&st.next!==null;if(Li=0,kt=st=qe=null,ll=!1,ga=0,ls=null,i)throw Error(o(300));n===null||Pt||(n=n.dependencies,n!==null&&nl(n)&&(Pt=!0))}function Bg(n,i,u,v){qe=n;var T=0;do{if(os&&(ls=null),ga=0,os=!1,25<=T)throw Error(o(301));if(T+=1,kt=st=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=cC,_=i(u,v)}while(os);return _}function iC(){var n=z.H,i=n.useState()[0];return i=typeof i.then=="function"?pa(i):i,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(qe.flags|=1024),i}function Vu(){var n=cl!==0;return cl=0,n}function Uu(n,i,u){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~u}function Hu(n){if(ll){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ll=!1}Li=0,kt=st=qe=null,os=!1,ga=cl=0,ls=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?qe.memoizedState=kt=n:kt=kt.next=n,kt}function jt(){if(st===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var i=kt===null?qe.memoizedState:kt.next;if(i!==null)kt=i,st=n;else{if(n===null)throw qe.alternate===null?Error(o(467)):Error(o(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?qe.memoizedState=kt=n:kt=kt.next=n}return kt}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pa(n){var i=ga;return ga+=1,ls===null&&(ls=[]),n=Dg(ls,n,i),i=qe,(kt===null?i.memoizedState:kt.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?bp:wp),n}function ul(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pa(n);if(n.$$typeof===k)return Gt(n)}throw Error(o(438,String(n)))}function Xu(n){var i=null,u=qe.updateQueue;if(u!==null&&(i=u.memoCache),i==null){var v=qe.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(i={data:v.data.map(function(T){return T.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),u===null&&(u=$u(),qe.updateQueue=u),u.memoCache=i,u=i.data[i.index],u===void 0)for(u=i.data[i.index]=Array(n),v=0;v<n;v++)u[v]=Y;return i.index++,u}function fi(n,i){return typeof i=="function"?i(n):i}function hl(n){var i=jt();return Yu(i,st,n)}function Yu(n,i,u){var v=n.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var T=n.baseQueue,_=v.pending;if(_!==null){if(T!==null){var P=T.next;T.next=_.next,_.next=P}i.baseQueue=T=_,v.pending=null}if(_=n.baseState,T===null)n.memoizedState=_;else{i=T.next;var U=P=null,se=null,ye=i,ke=!1;do{var _e=ye.lane&-536870913;if(_e!==ye.lane?(Je&_e)===_e:(Li&_e)===_e){var ve=ye.revertLane;if(ve===0)se!==null&&(se=se.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),_e===rs&&(ke=!0);else if((Li&ve)===ve){ye=ye.next,ve===rs&&(ke=!0);continue}else _e={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(U=se=_e,P=_):se=se.next=_e,qe.lanes|=ve,Hi|=ve;_e=ye.action,wr&&u(_,_e),_=ye.hasEagerState?ye.eagerState:u(_,_e)}else ve={lane:_e,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(U=se=ve,P=_):se=se.next=ve,qe.lanes|=_e,Hi|=_e;ye=ye.next}while(ye!==null&&ye!==i);if(se===null?P=_:se.next=U,!dn(_,n.memoizedState)&&(Pt=!0,ke&&(u=ss,u!==null)))throw u;n.memoizedState=_,n.baseState=P,n.baseQueue=se,v.lastRenderedState=_}return T===null&&(v.lanes=0),[n.memoizedState,v.dispatch]}function Gu(n){var i=jt(),u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=n;var v=u.dispatch,T=u.pending,_=i.memoizedState;if(T!==null){u.pending=null;var P=T=T.next;do _=n(_,P.action),P=P.next;while(P!==T);dn(_,i.memoizedState)||(Pt=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),u.lastRenderedState=_}return[_,v]}function Ig(n,i,u){var v=qe,T=jt(),_=nt;if(_){if(u===void 0)throw Error(o(407));u=u()}else u=i();var P=!dn((st||T).memoizedState,u);P&&(T.memoizedState=u,Pt=!0),T=T.queue;var U=Hg.bind(null,v,T,n);if(xa(2048,8,U,[n]),T.getSnapshot!==i||P||kt!==null&&kt.memoizedState.tag&1){if(v.flags|=2048,cs(9,dl(),Ug.bind(null,v,T,u,i),null),ct===null)throw Error(o(349));_||(Li&124)!==0||Vg(v,i,u)}return u}function Vg(n,i,u){n.flags|=16384,n={getSnapshot:i,value:u},i=qe.updateQueue,i===null?(i=$u(),qe.updateQueue=i,i.stores=[n]):(u=i.stores,u===null?i.stores=[n]:u.push(n))}function Ug(n,i,u,v){i.value=u,i.getSnapshot=v,$g(i)&&Xg(n)}function Hg(n,i,u){return u(function(){$g(i)&&Xg(n)})}function $g(n){var i=n.getSnapshot;n=n.value;try{var u=i();return!dn(n,u)}catch{return!0}}function Xg(n){var i=es(n,2);i!==null&&yn(i,n,2)}function qu(n){var i=on();if(typeof n=="function"){var u=n;if(n=u(),wr){ze(!0);try{u()}finally{ze(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},i}function Yg(n,i,u,v){return n.baseState=u,Yu(n,st,typeof v=="function"?v:fi)}function rC(n,i,u,v,T){if(ml(n))throw Error(o(485));if(n=i.action,n!==null){var _={payload:T,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};z.T!==null?u(!0):_.isTransition=!1,v(_),u=i.pending,u===null?(_.next=i.pending=_,Gg(i,_)):(_.next=u.next,i.pending=u.next=_)}}function Gg(n,i){var u=i.action,v=i.payload,T=n.state;if(i.isTransition){var _=z.T,P={};z.T=P;try{var U=u(T,v),se=z.S;se!==null&&se(P,U),qg(n,i,U)}catch(ye){Wu(n,i,ye)}finally{z.T=_}}else try{_=u(T,v),qg(n,i,_)}catch(ye){Wu(n,i,ye)}}function qg(n,i,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(v){Wg(n,i,v)},function(v){return Wu(n,i,v)}):Wg(n,i,u)}function Wg(n,i,u){i.status="fulfilled",i.value=u,Kg(i),n.state=u,i=n.pending,i!==null&&(u=i.next,u===i?n.pending=null:(u=u.next,i.next=u,Gg(n,u)))}function Wu(n,i,u){var v=n.pending;if(n.pending=null,v!==null){v=v.next;do i.status="rejected",i.reason=u,Kg(i),i=i.next;while(i!==v)}n.action=null}function Kg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Zg(n,i){return i}function Qg(n,i){if(nt){var u=ct.formState;if(u!==null){e:{var v=qe;if(nt){if(gt){t:{for(var T=gt,_=Xn;T.nodeType!==8;){if(!_){T=null;break t}if(T=zn(T.nextSibling),T===null){T=null;break t}}_=T.data,T=_==="F!"||_==="F"?T:null}if(T){gt=zn(T.nextSibling),v=T.data==="F!";break e}}xr(v)}v=!1}v&&(i=u[0])}}return u=on(),u.memoizedState=u.baseState=i,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zg,lastRenderedState:i},u.queue=v,u=xp.bind(null,qe,v),v.dispatch=u,v=qu(!1),_=eh.bind(null,qe,!1,v.queue),v=on(),T={state:i,dispatch:null,action:n,pending:null},v.queue=T,u=rC.bind(null,qe,T,_,u),T.dispatch=u,v.memoizedState=n,[i,u,!1]}function Jg(n){var i=jt();return ep(i,st,n)}function ep(n,i,u){if(i=Yu(n,i,Zg)[0],n=hl(fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var v=pa(i)}catch(P){throw P===ua?sl:P}else v=i;i=jt();var T=i.queue,_=T.dispatch;return u!==i.memoizedState&&(qe.flags|=2048,cs(9,dl(),sC.bind(null,T,u),null)),[v,_,n]}function sC(n,i){n.action=i}function tp(n){var i=jt(),u=st;if(u!==null)return ep(i,u,n);jt(),i=i.memoizedState,u=jt();var v=u.queue.dispatch;return u.memoizedState=n,[i,v,!1]}function cs(n,i,u,v){return n={tag:n,create:u,deps:v,inst:i,next:null},i=qe.updateQueue,i===null&&(i=$u(),qe.updateQueue=i),u=i.lastEffect,u===null?i.lastEffect=n.next=n:(v=u.next,u.next=n,n.next=v,i.lastEffect=n),n}function dl(){return{destroy:void 0,resource:void 0}}function np(){return jt().memoizedState}function fl(n,i,u,v){var T=on();v=v===void 0?null:v,qe.flags|=n,T.memoizedState=cs(1|i,dl(),u,v)}function xa(n,i,u,v){var T=jt();v=v===void 0?null:v;var _=T.memoizedState.inst;st!==null&&v!==null&&Bu(v,st.memoizedState.deps)?T.memoizedState=cs(i,_,u,v):(qe.flags|=n,T.memoizedState=cs(1|i,_,u,v))}function ip(n,i){fl(8390656,8,n,i)}function rp(n,i){xa(2048,8,n,i)}function sp(n,i){return xa(4,2,n,i)}function ap(n,i){return xa(4,4,n,i)}function op(n,i){if(typeof i=="function"){n=n();var u=i(n);return function(){typeof u=="function"?u():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function lp(n,i,u){u=u!=null?u.concat([n]):null,xa(4,4,op.bind(null,i,n),u)}function Ku(){}function cp(n,i){var u=jt();i=i===void 0?null:i;var v=u.memoizedState;return i!==null&&Bu(i,v[1])?v[0]:(u.memoizedState=[n,i],n)}function up(n,i){var u=jt();i=i===void 0?null:i;var v=u.memoizedState;if(i!==null&&Bu(i,v[1]))return v[0];if(v=n(),wr){ze(!0);try{n()}finally{ze(!1)}}return u.memoizedState=[v,i],v}function Zu(n,i,u){return u===void 0||(Li&1073741824)!==0?n.memoizedState=i:(n.memoizedState=u,n=fx(),qe.lanes|=n,Hi|=n,u)}function hp(n,i,u,v){return dn(u,i)?u:as.current!==null?(n=Zu(n,u,v),dn(n,i)||(Pt=!0),n):(Li&42)===0?(Pt=!0,n.memoizedState=u):(n=fx(),qe.lanes|=n,Hi|=n,i)}function dp(n,i,u,v,T){var _=q.p;q.p=_!==0&&8>_?_:8;var P=z.T,U={};z.T=U,eh(n,!1,i,u);try{var se=T(),ye=z.S;if(ye!==null&&ye(U,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var ke=tC(se,v);ya(n,i,ke,xn(n))}else ya(n,i,v,xn(n))}catch(_e){ya(n,i,{then:function(){},status:"rejected",reason:_e},xn())}finally{q.p=_,z.T=P}}function aC(){}function Qu(n,i,u,v){if(n.tag!==5)throw Error(o(476));var T=fp(n).queue;dp(n,T,i,X,u===null?aC:function(){return mp(n),u(v)})}function fp(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:X},next:null};var u={};return i.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:u},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function mp(n){var i=fp(n).next.queue;ya(n,i,{},xn())}function Ju(){return Gt(La)}function gp(){return jt().memoizedState}function pp(){return jt().memoizedState}function oC(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var u=xn();n=Ri(u);var v=Pi(i,n,u);v!==null&&(yn(v,i,u),da(v,i,u)),i={cache:Mu()},n.payload=i;return}i=i.return}}function lC(n,i,u){var v=xn();u={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ml(n)?yp(i,u):(u=vu(n,i,u,v),u!==null&&(yn(u,n,v),vp(u,i,v)))}function xp(n,i,u){var v=xn();ya(n,i,u,v)}function ya(n,i,u,v){var T={lane:v,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ml(n))yp(i,T);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var P=i.lastRenderedState,U=_(P,u);if(T.hasEagerState=!0,T.eagerState=U,dn(U,P))return Zo(n,i,T,0),ct===null&&Ko(),!1}catch{}finally{}if(u=vu(n,i,T,v),u!==null)return yn(u,n,v),vp(u,i,v),!0}return!1}function eh(n,i,u,v){if(v={lane:2,revertLane:Dh(),action:v,hasEagerState:!1,eagerState:null,next:null},ml(n)){if(i)throw Error(o(479))}else i=vu(n,u,v,2),i!==null&&yn(i,n,2)}function ml(n){var i=n.alternate;return n===qe||i!==null&&i===qe}function yp(n,i){os=ll=!0;var u=n.pending;u===null?i.next=i:(i.next=u.next,u.next=i),n.pending=i}function vp(n,i,u){if((u&4194048)!==0){var v=i.lanes;v&=n.pendingLanes,u|=v,i.lanes=u,_m(n,u)}}var gl={readContext:Gt,use:ul,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},bp={readContext:Gt,use:ul,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Gt,useEffect:ip,useImperativeHandle:function(n,i,u){u=u!=null?u.concat([n]):null,fl(4194308,4,op.bind(null,i,n),u)},useLayoutEffect:function(n,i){return fl(4194308,4,n,i)},useInsertionEffect:function(n,i){fl(4,2,n,i)},useMemo:function(n,i){var u=on();i=i===void 0?null:i;var v=n();if(wr){ze(!0);try{n()}finally{ze(!1)}}return u.memoizedState=[v,i],v},useReducer:function(n,i,u){var v=on();if(u!==void 0){var T=u(i);if(wr){ze(!0);try{u(i)}finally{ze(!1)}}}else T=i;return v.memoizedState=v.baseState=T,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:T},v.queue=n,n=n.dispatch=lC.bind(null,qe,n),[v.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=qu(n);var i=n.queue,u=xp.bind(null,qe,i);return i.dispatch=u,[n.memoizedState,u]},useDebugValue:Ku,useDeferredValue:function(n,i){var u=on();return Zu(u,n,i)},useTransition:function(){var n=qu(!1);return n=dp.bind(null,qe,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,u){var v=qe,T=on();if(nt){if(u===void 0)throw Error(o(407));u=u()}else{if(u=i(),ct===null)throw Error(o(349));(Je&124)!==0||Vg(v,i,u)}T.memoizedState=u;var _={value:u,getSnapshot:i};return T.queue=_,ip(Hg.bind(null,v,_,n),[n]),v.flags|=2048,cs(9,dl(),Ug.bind(null,v,_,u,i),null),u},useId:function(){var n=on(),i=ct.identifierPrefix;if(nt){var u=ui,v=ci;u=(v&~(1<<32-Ue(v)-1)).toString(32)+u,i="«"+i+"R"+u,u=cl++,0<u&&(i+="H"+u.toString(32)),i+="»"}else u=nC++,i="«"+i+"r"+u.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Ju,useFormState:Qg,useActionState:Qg,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=u,i=eh.bind(null,qe,!0,u),u.dispatch=i,[n,i]},useMemoCache:Xu,useCacheRefresh:function(){return on().memoizedState=oC.bind(null,qe)}},wp={readContext:Gt,use:ul,useCallback:cp,useContext:Gt,useEffect:rp,useImperativeHandle:lp,useInsertionEffect:sp,useLayoutEffect:ap,useMemo:up,useReducer:hl,useRef:np,useState:function(){return hl(fi)},useDebugValue:Ku,useDeferredValue:function(n,i){var u=jt();return hp(u,st.memoizedState,n,i)},useTransition:function(){var n=hl(fi)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:pa(n),i]},useSyncExternalStore:Ig,useId:gp,useHostTransitionStatus:Ju,useFormState:Jg,useActionState:Jg,useOptimistic:function(n,i){var u=jt();return Yg(u,st,n,i)},useMemoCache:Xu,useCacheRefresh:pp},cC={readContext:Gt,use:ul,useCallback:cp,useContext:Gt,useEffect:rp,useImperativeHandle:lp,useInsertionEffect:sp,useLayoutEffect:ap,useMemo:up,useReducer:Gu,useRef:np,useState:function(){return Gu(fi)},useDebugValue:Ku,useDeferredValue:function(n,i){var u=jt();return st===null?Zu(u,n,i):hp(u,st.memoizedState,n,i)},useTransition:function(){var n=Gu(fi)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:pa(n),i]},useSyncExternalStore:Ig,useId:gp,useHostTransitionStatus:Ju,useFormState:tp,useActionState:tp,useOptimistic:function(n,i){var u=jt();return st!==null?Yg(u,st,n,i):(u.baseState=n,[n,u.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:pp},us=null,va=0;function pl(n){var i=va;return va+=1,us===null&&(us=[]),Dg(us,n,i)}function ba(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function xl(n,i){throw i.$$typeof===a?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Sp(n){var i=n._init;return i(n._payload)}function Cp(n){function i(pe,de){if(n){var xe=pe.deletions;xe===null?(pe.deletions=[de],pe.flags|=16):xe.push(de)}}function u(pe,de){if(!n)return null;for(;de!==null;)i(pe,de),de=de.sibling;return null}function v(pe){for(var de=new Map;pe!==null;)pe.key!==null?de.set(pe.key,pe):de.set(pe.index,pe),pe=pe.sibling;return de}function T(pe,de){return pe=li(pe,de),pe.index=0,pe.sibling=null,pe}function _(pe,de,xe){return pe.index=xe,n?(xe=pe.alternate,xe!==null?(xe=xe.index,xe<de?(pe.flags|=67108866,de):xe):(pe.flags|=67108866,de)):(pe.flags|=1048576,de)}function P(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function U(pe,de,xe,je){return de===null||de.tag!==6?(de=wu(xe,pe.mode,je),de.return=pe,de):(de=T(de,xe),de.return=pe,de)}function se(pe,de,xe,je){var Re=xe.type;return Re===m?ke(pe,de,xe.props.children,je,xe.key):de!==null&&(de.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Sp(Re)===de.type)?(de=T(de,xe.props),ba(de,xe),de.return=pe,de):(de=Jo(xe.type,xe.key,xe.props,null,pe.mode,je),ba(de,xe),de.return=pe,de)}function ye(pe,de,xe,je){return de===null||de.tag!==4||de.stateNode.containerInfo!==xe.containerInfo||de.stateNode.implementation!==xe.implementation?(de=Su(xe,pe.mode,je),de.return=pe,de):(de=T(de,xe.children||[]),de.return=pe,de)}function ke(pe,de,xe,je,Re){return de===null||de.tag!==7?(de=fr(xe,pe.mode,je,Re),de.return=pe,de):(de=T(de,xe),de.return=pe,de)}function _e(pe,de,xe){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=wu(""+de,pe.mode,xe),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case l:return xe=Jo(de.type,de.key,de.props,null,pe.mode,xe),ba(xe,de),xe.return=pe,xe;case c:return de=Su(de,pe.mode,xe),de.return=pe,de;case A:var je=de._init;return de=je(de._payload),_e(pe,de,xe)}if(G(de)||Z(de))return de=fr(de,pe.mode,xe,null),de.return=pe,de;if(typeof de.then=="function")return _e(pe,pl(de),xe);if(de.$$typeof===k)return _e(pe,il(pe,de),xe);xl(pe,de)}return null}function ve(pe,de,xe,je){var Re=de!==null?de.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return Re!==null?null:U(pe,de,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return xe.key===Re?se(pe,de,xe,je):null;case c:return xe.key===Re?ye(pe,de,xe,je):null;case A:return Re=xe._init,xe=Re(xe._payload),ve(pe,de,xe,je)}if(G(xe)||Z(xe))return Re!==null?null:ke(pe,de,xe,je,null);if(typeof xe.then=="function")return ve(pe,de,pl(xe),je);if(xe.$$typeof===k)return ve(pe,de,il(pe,xe),je);xl(pe,xe)}return null}function be(pe,de,xe,je,Re){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return pe=pe.get(xe)||null,U(de,pe,""+je,Re);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case l:return pe=pe.get(je.key===null?xe:je.key)||null,se(de,pe,je,Re);case c:return pe=pe.get(je.key===null?xe:je.key)||null,ye(de,pe,je,Re);case A:var Ke=je._init;return je=Ke(je._payload),be(pe,de,xe,je,Re)}if(G(je)||Z(je))return pe=pe.get(xe)||null,ke(de,pe,je,Re,null);if(typeof je.then=="function")return be(pe,de,xe,pl(je),Re);if(je.$$typeof===k)return be(pe,de,xe,il(de,je),Re);xl(de,je)}return null}function He(pe,de,xe,je){for(var Re=null,Ke=null,Fe=de,Ve=de=0,Ft=null;Fe!==null&&Ve<xe.length;Ve++){Fe.index>Ve?(Ft=Fe,Fe=null):Ft=Fe.sibling;var et=ve(pe,Fe,xe[Ve],je);if(et===null){Fe===null&&(Fe=Ft);break}n&&Fe&&et.alternate===null&&i(pe,Fe),de=_(et,de,Ve),Ke===null?Re=et:Ke.sibling=et,Ke=et,Fe=Ft}if(Ve===xe.length)return u(pe,Fe),nt&&gr(pe,Ve),Re;if(Fe===null){for(;Ve<xe.length;Ve++)Fe=_e(pe,xe[Ve],je),Fe!==null&&(de=_(Fe,de,Ve),Ke===null?Re=Fe:Ke.sibling=Fe,Ke=Fe);return nt&&gr(pe,Ve),Re}for(Fe=v(Fe);Ve<xe.length;Ve++)Ft=be(Fe,pe,Ve,xe[Ve],je),Ft!==null&&(n&&Ft.alternate!==null&&Fe.delete(Ft.key===null?Ve:Ft.key),de=_(Ft,de,Ve),Ke===null?Re=Ft:Ke.sibling=Ft,Ke=Ft);return n&&Fe.forEach(function(Qi){return i(pe,Qi)}),nt&&gr(pe,Ve),Re}function Ie(pe,de,xe,je){if(xe==null)throw Error(o(151));for(var Re=null,Ke=null,Fe=de,Ve=de=0,Ft=null,et=xe.next();Fe!==null&&!et.done;Ve++,et=xe.next()){Fe.index>Ve?(Ft=Fe,Fe=null):Ft=Fe.sibling;var Qi=ve(pe,Fe,et.value,je);if(Qi===null){Fe===null&&(Fe=Ft);break}n&&Fe&&Qi.alternate===null&&i(pe,Fe),de=_(Qi,de,Ve),Ke===null?Re=Qi:Ke.sibling=Qi,Ke=Qi,Fe=Ft}if(et.done)return u(pe,Fe),nt&&gr(pe,Ve),Re;if(Fe===null){for(;!et.done;Ve++,et=xe.next())et=_e(pe,et.value,je),et!==null&&(de=_(et,de,Ve),Ke===null?Re=et:Ke.sibling=et,Ke=et);return nt&&gr(pe,Ve),Re}for(Fe=v(Fe);!et.done;Ve++,et=xe.next())et=be(Fe,pe,Ve,et.value,je),et!==null&&(n&&et.alternate!==null&&Fe.delete(et.key===null?Ve:et.key),de=_(et,de,Ve),Ke===null?Re=et:Ke.sibling=et,Ke=et);return n&&Fe.forEach(function(u2){return i(pe,u2)}),nt&&gr(pe,Ve),Re}function ot(pe,de,xe,je){if(typeof xe=="object"&&xe!==null&&xe.type===m&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:e:{for(var Re=xe.key;de!==null;){if(de.key===Re){if(Re=xe.type,Re===m){if(de.tag===7){u(pe,de.sibling),je=T(de,xe.props.children),je.return=pe,pe=je;break e}}else if(de.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Sp(Re)===de.type){u(pe,de.sibling),je=T(de,xe.props),ba(je,xe),je.return=pe,pe=je;break e}u(pe,de);break}else i(pe,de);de=de.sibling}xe.type===m?(je=fr(xe.props.children,pe.mode,je,xe.key),je.return=pe,pe=je):(je=Jo(xe.type,xe.key,xe.props,null,pe.mode,je),ba(je,xe),je.return=pe,pe=je)}return P(pe);case c:e:{for(Re=xe.key;de!==null;){if(de.key===Re)if(de.tag===4&&de.stateNode.containerInfo===xe.containerInfo&&de.stateNode.implementation===xe.implementation){u(pe,de.sibling),je=T(de,xe.children||[]),je.return=pe,pe=je;break e}else{u(pe,de);break}else i(pe,de);de=de.sibling}je=Su(xe,pe.mode,je),je.return=pe,pe=je}return P(pe);case A:return Re=xe._init,xe=Re(xe._payload),ot(pe,de,xe,je)}if(G(xe))return He(pe,de,xe,je);if(Z(xe)){if(Re=Z(xe),typeof Re!="function")throw Error(o(150));return xe=Re.call(xe),Ie(pe,de,xe,je)}if(typeof xe.then=="function")return ot(pe,de,pl(xe),je);if(xe.$$typeof===k)return ot(pe,de,il(pe,xe),je);xl(pe,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,de!==null&&de.tag===6?(u(pe,de.sibling),je=T(de,xe),je.return=pe,pe=je):(u(pe,de),je=wu(xe,pe.mode,je),je.return=pe,pe=je),P(pe)):u(pe,de)}return function(pe,de,xe,je){try{va=0;var Re=ot(pe,de,xe,je);return us=null,Re}catch(Fe){if(Fe===ua||Fe===sl)throw Fe;var Ke=fn(29,Fe,null,pe.mode);return Ke.lanes=je,Ke.return=pe,Ke}finally{}}}var hs=Cp(!0),Tp=Cp(!1),_n=L(null),Yn=null;function Fi(n){var i=n.alternate;K(Nt,Nt.current&1),K(_n,n),Yn===null&&(i===null||as.current!==null||i.memoizedState!==null)&&(Yn=n)}function kp(n){if(n.tag===22){if(K(Nt,Nt.current),K(_n,n),Yn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Yn=n)}}else zi()}function zi(){K(Nt,Nt.current),K(_n,_n.current)}function mi(n){I(_n),Yn===n&&(Yn=null),I(Nt)}var Nt=L(0);function yl(n){for(var i=n;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||$h(u)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function th(n,i,u,v){i=n.memoizedState,u=u(v,i),u=u==null?i:d({},i,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var nh={enqueueSetState:function(n,i,u){n=n._reactInternals;var v=xn(),T=Ri(v);T.payload=i,u!=null&&(T.callback=u),i=Pi(n,T,v),i!==null&&(yn(i,n,v),da(i,n,v))},enqueueReplaceState:function(n,i,u){n=n._reactInternals;var v=xn(),T=Ri(v);T.tag=1,T.payload=i,u!=null&&(T.callback=u),i=Pi(n,T,v),i!==null&&(yn(i,n,v),da(i,n,v))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var u=xn(),v=Ri(u);v.tag=2,i!=null&&(v.callback=i),i=Pi(n,v,u),i!==null&&(yn(i,n,u),da(i,n,u))}};function jp(n,i,u,v,T,_,P){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(v,_,P):i.prototype&&i.prototype.isPureReactComponent?!na(u,v)||!na(T,_):!0}function _p(n,i,u,v){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,v),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,v),i.state!==n&&nh.enqueueReplaceState(i,i.state,null)}function Sr(n,i){var u=i;if("ref"in i){u={};for(var v in i)v!=="ref"&&(u[v]=i[v])}if(n=n.defaultProps){u===i&&(u=d({},u));for(var T in n)u[T]===void 0&&(u[T]=n[T])}return u}var vl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ep(n){vl(n)}function Mp(n){console.error(n)}function Np(n){vl(n)}function bl(n,i){try{var u=n.onUncaughtError;u(i.value,{componentStack:i.stack})}catch(v){setTimeout(function(){throw v})}}function Op(n,i,u){try{var v=n.onCaughtError;v(u.value,{componentStack:u.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function ih(n,i,u){return u=Ri(u),u.tag=3,u.payload={element:null},u.callback=function(){bl(n,i)},u}function Dp(n){return n=Ri(n),n.tag=3,n}function Ap(n,i,u,v){var T=u.type.getDerivedStateFromError;if(typeof T=="function"){var _=v.value;n.payload=function(){return T(_)},n.callback=function(){Op(i,u,v)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(n.callback=function(){Op(i,u,v),typeof T!="function"&&($i===null?$i=new Set([this]):$i.add(this));var U=v.stack;this.componentDidCatch(v.value,{componentStack:U!==null?U:""})})}function uC(n,i,u,v,T){if(u.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(i=u.alternate,i!==null&&oa(i,u,T,!0),u=_n.current,u!==null){switch(u.tag){case 13:return Yn===null?_h():u.alternate===null&&pt===0&&(pt=3),u.flags&=-257,u.flags|=65536,u.lanes=T,v===Du?u.flags|=16384:(i=u.updateQueue,i===null?u.updateQueue=new Set([v]):i.add(v),Mh(n,v,T)),!1;case 22:return u.flags|=65536,v===Du?u.flags|=16384:(i=u.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([v])},u.updateQueue=i):(u=i.retryQueue,u===null?i.retryQueue=new Set([v]):u.add(v)),Mh(n,v,T)),!1}throw Error(o(435,u.tag))}return Mh(n,v,T),_h(),!1}if(nt)return i=_n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=T,v!==ku&&(n=Error(o(422),{cause:v}),aa(Cn(n,u)))):(v!==ku&&(i=Error(o(423),{cause:v}),aa(Cn(i,u))),n=n.current.alternate,n.flags|=65536,T&=-T,n.lanes|=T,v=Cn(v,u),T=ih(n.stateNode,v,T),Pu(n,T),pt!==4&&(pt=2)),!1;var _=Error(o(520),{cause:v});if(_=Cn(_,u),_a===null?_a=[_]:_a.push(_),pt!==4&&(pt=2),i===null)return!0;v=Cn(v,u),u=i;do{switch(u.tag){case 3:return u.flags|=65536,n=T&-T,u.lanes|=n,n=ih(u.stateNode,v,n),Pu(u,n),!1;case 1:if(i=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($i===null||!$i.has(_))))return u.flags|=65536,T&=-T,u.lanes|=T,T=Dp(T),Ap(T,n,u,v),Pu(u,T),!1}u=u.return}while(u!==null);return!1}var Rp=Error(o(461)),Pt=!1;function Bt(n,i,u,v){i.child=n===null?Tp(i,null,u,v):hs(i,n.child,u,v)}function Pp(n,i,u,v,T){u=u.render;var _=i.ref;if("ref"in v){var P={};for(var U in v)U!=="ref"&&(P[U]=v[U])}else P=v;return vr(i),v=Iu(n,i,u,P,_,T),U=Vu(),n!==null&&!Pt?(Uu(n,i,T),gi(n,i,T)):(nt&&U&&Cu(i),i.flags|=1,Bt(n,i,v,T),i.child)}function Lp(n,i,u,v,T){if(n===null){var _=u.type;return typeof _=="function"&&!bu(_)&&_.defaultProps===void 0&&u.compare===null?(i.tag=15,i.type=_,Fp(n,i,_,v,T)):(n=Jo(u.type,null,v,i,i.mode,T),n.ref=i.ref,n.return=i,i.child=n)}if(_=n.child,!hh(n,T)){var P=_.memoizedProps;if(u=u.compare,u=u!==null?u:na,u(P,v)&&n.ref===i.ref)return gi(n,i,T)}return i.flags|=1,n=li(_,v),n.ref=i.ref,n.return=i,i.child=n}function Fp(n,i,u,v,T){if(n!==null){var _=n.memoizedProps;if(na(_,v)&&n.ref===i.ref)if(Pt=!1,i.pendingProps=v=_,hh(n,T))(n.flags&131072)!==0&&(Pt=!0);else return i.lanes=n.lanes,gi(n,i,T)}return rh(n,i,u,v,T)}function zp(n,i,u){var v=i.pendingProps,T=v.children,_=n!==null?n.memoizedState:null;if(v.mode==="hidden"){if((i.flags&128)!==0){if(v=_!==null?_.baseLanes|u:u,n!==null){for(T=i.child=n.child,_=0;T!==null;)_=_|T.lanes|T.childLanes,T=T.sibling;i.childLanes=_&~v}else i.childLanes=0,i.child=null;return Bp(n,i,v,u)}if((u&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&rl(i,_!==null?_.cachePool:null),_!==null?Fg(i,_):Fu(),kp(i);else return i.lanes=i.childLanes=536870912,Bp(n,i,_!==null?_.baseLanes|u:u,u)}else _!==null?(rl(i,_.cachePool),Fg(i,_),zi(),i.memoizedState=null):(n!==null&&rl(i,null),Fu(),zi());return Bt(n,i,T,u),i.child}function Bp(n,i,u,v){var T=Ou();return T=T===null?null:{parent:Mt._currentValue,pool:T},i.memoizedState={baseLanes:u,cachePool:T},n!==null&&rl(i,null),Fu(),kp(i),n!==null&&oa(n,i,v,!0),null}function wl(n,i){var u=i.ref;if(u===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(o(284));(n===null||n.ref!==u)&&(i.flags|=4194816)}}function rh(n,i,u,v,T){return vr(i),u=Iu(n,i,u,v,void 0,T),v=Vu(),n!==null&&!Pt?(Uu(n,i,T),gi(n,i,T)):(nt&&v&&Cu(i),i.flags|=1,Bt(n,i,u,T),i.child)}function Ip(n,i,u,v,T,_){return vr(i),i.updateQueue=null,u=Bg(i,v,u,T),zg(n),v=Vu(),n!==null&&!Pt?(Uu(n,i,_),gi(n,i,_)):(nt&&v&&Cu(i),i.flags|=1,Bt(n,i,u,_),i.child)}function Vp(n,i,u,v,T){if(vr(i),i.stateNode===null){var _=ts,P=u.contextType;typeof P=="object"&&P!==null&&(_=Gt(P)),_=new u(v,_),i.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=nh,i.stateNode=_,_._reactInternals=i,_=i.stateNode,_.props=v,_.state=i.memoizedState,_.refs={},Au(i),P=u.contextType,_.context=typeof P=="object"&&P!==null?Gt(P):ts,_.state=i.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(th(i,u,P,v),_.state=i.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&nh.enqueueReplaceState(_,_.state,null),ma(i,v,_,T),fa(),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308),v=!0}else if(n===null){_=i.stateNode;var U=i.memoizedProps,se=Sr(u,U);_.props=se;var ye=_.context,ke=u.contextType;P=ts,typeof ke=="object"&&ke!==null&&(P=Gt(ke));var _e=u.getDerivedStateFromProps;ke=typeof _e=="function"||typeof _.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,ke||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U||ye!==P)&&_p(i,_,v,P),Ai=!1;var ve=i.memoizedState;_.state=ve,ma(i,v,_,T),fa(),ye=i.memoizedState,U||ve!==ye||Ai?(typeof _e=="function"&&(th(i,u,_e,v),ye=i.memoizedState),(se=Ai||jp(i,u,se,v,ve,ye,P))?(ke||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=v,i.memoizedState=ye),_.props=v,_.state=ye,_.context=P,v=se):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),v=!1)}else{_=i.stateNode,Ru(n,i),P=i.memoizedProps,ke=Sr(u,P),_.props=ke,_e=i.pendingProps,ve=_.context,ye=u.contextType,se=ts,typeof ye=="object"&&ye!==null&&(se=Gt(ye)),U=u.getDerivedStateFromProps,(ye=typeof U=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==_e||ve!==se)&&_p(i,_,v,se),Ai=!1,ve=i.memoizedState,_.state=ve,ma(i,v,_,T),fa();var be=i.memoizedState;P!==_e||ve!==be||Ai||n!==null&&n.dependencies!==null&&nl(n.dependencies)?(typeof U=="function"&&(th(i,u,U,v),be=i.memoizedState),(ke=Ai||jp(i,u,ke,v,ve,be,se)||n!==null&&n.dependencies!==null&&nl(n.dependencies))?(ye||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(v,be,se),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(v,be,se)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&ve===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&ve===n.memoizedState||(i.flags|=1024),i.memoizedProps=v,i.memoizedState=be),_.props=v,_.state=be,_.context=se,v=ke):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&ve===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&ve===n.memoizedState||(i.flags|=1024),v=!1)}return _=v,wl(n,i),v=(i.flags&128)!==0,_||v?(_=i.stateNode,u=v&&typeof u.getDerivedStateFromError!="function"?null:_.render(),i.flags|=1,n!==null&&v?(i.child=hs(i,n.child,null,T),i.child=hs(i,null,u,T)):Bt(n,i,u,T),i.memoizedState=_.state,n=i.child):n=gi(n,i,T),n}function Up(n,i,u,v){return sa(),i.flags|=256,Bt(n,i,u,v),i.child}var sh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ah(n){return{baseLanes:n,cachePool:Mg()}}function oh(n,i,u){return n=n!==null?n.childLanes&~u:0,i&&(n|=En),n}function Hp(n,i,u){var v=i.pendingProps,T=!1,_=(i.flags&128)!==0,P;if((P=_)||(P=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),P&&(T=!0,i.flags&=-129),P=(i.flags&32)!==0,i.flags&=-33,n===null){if(nt){if(T?Fi(i):zi(),nt){var U=gt,se;if(se=U){e:{for(se=U,U=Xn;se.nodeType!==8;){if(!U){U=null;break e}if(se=zn(se.nextSibling),se===null){U=null;break e}}U=se}U!==null?(i.memoizedState={dehydrated:U,treeContext:mr!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},se=fn(18,null,null,0),se.stateNode=U,se.return=i,i.child=se,Zt=i,gt=null,se=!0):se=!1}se||xr(i)}if(U=i.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return $h(U)?i.lanes=32:i.lanes=536870912,null;mi(i)}return U=v.children,v=v.fallback,T?(zi(),T=i.mode,U=Sl({mode:"hidden",children:U},T),v=fr(v,T,u,null),U.return=i,v.return=i,U.sibling=v,i.child=U,T=i.child,T.memoizedState=ah(u),T.childLanes=oh(n,P,u),i.memoizedState=sh,v):(Fi(i),lh(i,U))}if(se=n.memoizedState,se!==null&&(U=se.dehydrated,U!==null)){if(_)i.flags&256?(Fi(i),i.flags&=-257,i=ch(n,i,u)):i.memoizedState!==null?(zi(),i.child=n.child,i.flags|=128,i=null):(zi(),T=v.fallback,U=i.mode,v=Sl({mode:"visible",children:v.children},U),T=fr(T,U,u,null),T.flags|=2,v.return=i,T.return=i,v.sibling=T,i.child=v,hs(i,n.child,null,u),v=i.child,v.memoizedState=ah(u),v.childLanes=oh(n,P,u),i.memoizedState=sh,i=T);else if(Fi(i),$h(U)){if(P=U.nextSibling&&U.nextSibling.dataset,P)var ye=P.dgst;P=ye,v=Error(o(419)),v.stack="",v.digest=P,aa({value:v,source:null,stack:null}),i=ch(n,i,u)}else if(Pt||oa(n,i,u,!1),P=(u&n.childLanes)!==0,Pt||P){if(P=ct,P!==null&&(v=u&-u,v=(v&42)!==0?1:Xc(v),v=(v&(P.suspendedLanes|u))!==0?0:v,v!==0&&v!==se.retryLane))throw se.retryLane=v,es(n,v),yn(P,n,v),Rp;U.data==="$?"||_h(),i=ch(n,i,u)}else U.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=se.treeContext,gt=zn(U.nextSibling),Zt=i,nt=!0,pr=null,Xn=!1,n!==null&&(kn[jn++]=ci,kn[jn++]=ui,kn[jn++]=mr,ci=n.id,ui=n.overflow,mr=i),i=lh(i,v.children),i.flags|=4096);return i}return T?(zi(),T=v.fallback,U=i.mode,se=n.child,ye=se.sibling,v=li(se,{mode:"hidden",children:v.children}),v.subtreeFlags=se.subtreeFlags&65011712,ye!==null?T=li(ye,T):(T=fr(T,U,u,null),T.flags|=2),T.return=i,v.return=i,v.sibling=T,i.child=v,v=T,T=i.child,U=n.child.memoizedState,U===null?U=ah(u):(se=U.cachePool,se!==null?(ye=Mt._currentValue,se=se.parent!==ye?{parent:ye,pool:ye}:se):se=Mg(),U={baseLanes:U.baseLanes|u,cachePool:se}),T.memoizedState=U,T.childLanes=oh(n,P,u),i.memoizedState=sh,v):(Fi(i),u=n.child,n=u.sibling,u=li(u,{mode:"visible",children:v.children}),u.return=i,u.sibling=null,n!==null&&(P=i.deletions,P===null?(i.deletions=[n],i.flags|=16):P.push(n)),i.child=u,i.memoizedState=null,u)}function lh(n,i){return i=Sl({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Sl(n,i){return n=fn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function ch(n,i,u){return hs(i,n.child,null,u),n=lh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $p(n,i,u){n.lanes|=i;var v=n.alternate;v!==null&&(v.lanes|=i),_u(n.return,i,u)}function uh(n,i,u,v,T){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:v,tail:u,tailMode:T}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=v,_.tail=u,_.tailMode=T)}function Xp(n,i,u){var v=i.pendingProps,T=v.revealOrder,_=v.tail;if(Bt(n,i,v.children,u),v=Nt.current,(v&2)!==0)v=v&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$p(n,u,i);else if(n.tag===19)$p(n,u,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}v&=1}switch(K(Nt,v),T){case"forwards":for(u=i.child,T=null;u!==null;)n=u.alternate,n!==null&&yl(n)===null&&(T=u),u=u.sibling;u=T,u===null?(T=i.child,i.child=null):(T=u.sibling,u.sibling=null),uh(i,!1,T,u,_);break;case"backwards":for(u=null,T=i.child,i.child=null;T!==null;){if(n=T.alternate,n!==null&&yl(n)===null){i.child=T;break}n=T.sibling,T.sibling=u,u=T,T=n}uh(i,!0,u,null,_);break;case"together":uh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gi(n,i,u){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(u&i.childLanes)===0)if(n!==null){if(oa(n,i,u,!1),(u&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,u=li(n,n.pendingProps),i.child=u,u.return=i;n.sibling!==null;)n=n.sibling,u=u.sibling=li(n,n.pendingProps),u.return=i;u.sibling=null}return i.child}function hh(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&nl(n)))}function hC(n,i,u){switch(i.tag){case 3:ue(i,i.stateNode.containerInfo),Di(i,Mt,n.memoizedState.cache),sa();break;case 27:case 5:ie(i);break;case 4:ue(i,i.stateNode.containerInfo);break;case 10:Di(i,i.type,i.memoizedProps.value);break;case 13:var v=i.memoizedState;if(v!==null)return v.dehydrated!==null?(Fi(i),i.flags|=128,null):(u&i.child.childLanes)!==0?Hp(n,i,u):(Fi(i),n=gi(n,i,u),n!==null?n.sibling:null);Fi(i);break;case 19:var T=(n.flags&128)!==0;if(v=(u&i.childLanes)!==0,v||(oa(n,i,u,!1),v=(u&i.childLanes)!==0),T){if(v)return Xp(n,i,u);i.flags|=128}if(T=i.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),K(Nt,Nt.current),v)break;return null;case 22:case 23:return i.lanes=0,zp(n,i,u);case 24:Di(i,Mt,n.memoizedState.cache)}return gi(n,i,u)}function Yp(n,i,u){if(n!==null)if(n.memoizedProps!==i.pendingProps)Pt=!0;else{if(!hh(n,u)&&(i.flags&128)===0)return Pt=!1,hC(n,i,u);Pt=(n.flags&131072)!==0}else Pt=!1,nt&&(i.flags&1048576)!==0&&Sg(i,tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var v=i.elementType,T=v._init;if(v=T(v._payload),i.type=v,typeof v=="function")bu(v)?(n=Sr(v,n),i.tag=1,i=Vp(null,i,v,n,u)):(i.tag=0,i=rh(null,i,v,n,u));else{if(v!=null){if(T=v.$$typeof,T===j){i.tag=11,i=Pp(null,i,v,n,u);break e}else if(T===D){i.tag=14,i=Lp(null,i,v,n,u);break e}}throw i=te(v)||v,Error(o(306,i,""))}}return i;case 0:return rh(n,i,i.type,i.pendingProps,u);case 1:return v=i.type,T=Sr(v,i.pendingProps),Vp(n,i,v,T,u);case 3:e:{if(ue(i,i.stateNode.containerInfo),n===null)throw Error(o(387));v=i.pendingProps;var _=i.memoizedState;T=_.element,Ru(n,i),ma(i,v,null,u);var P=i.memoizedState;if(v=P.cache,Di(i,Mt,v),v!==_.cache&&Eu(i,[Mt],u,!0),fa(),v=P.element,_.isDehydrated)if(_={element:v,isDehydrated:!1,cache:P.cache},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){i=Up(n,i,v,u);break e}else if(v!==T){T=Cn(Error(o(424)),i),aa(T),i=Up(n,i,v,u);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(gt=zn(n.firstChild),Zt=i,nt=!0,pr=null,Xn=!0,u=Tp(i,null,v,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(sa(),v===T){i=gi(n,i,u);break e}Bt(n,i,v,u)}i=i.child}return i;case 26:return wl(n,i),n===null?(u=Kx(i.type,null,i.pendingProps,null))?i.memoizedState=u:nt||(u=i.type,n=i.pendingProps,v=Ll(J.current).createElement(u),v[Yt]=i,v[sn]=n,Vt(v,u,n),Rt(v),i.stateNode=v):i.memoizedState=Kx(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ie(i),n===null&&nt&&(v=i.stateNode=Gx(i.type,i.pendingProps,J.current),Zt=i,Xn=!0,T=gt,Gi(i.type)?(Xh=T,gt=zn(v.firstChild)):gt=T),Bt(n,i,i.pendingProps.children,u),wl(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&nt&&((T=v=gt)&&(v=BC(v,i.type,i.pendingProps,Xn),v!==null?(i.stateNode=v,Zt=i,gt=zn(v.firstChild),Xn=!1,T=!0):T=!1),T||xr(i)),ie(i),T=i.type,_=i.pendingProps,P=n!==null?n.memoizedProps:null,v=_.children,Vh(T,_)?v=null:P!==null&&Vh(T,P)&&(i.flags|=32),i.memoizedState!==null&&(T=Iu(n,i,iC,null,null,u),La._currentValue=T),wl(n,i),Bt(n,i,v,u),i.child;case 6:return n===null&&nt&&((n=u=gt)&&(u=IC(u,i.pendingProps,Xn),u!==null?(i.stateNode=u,Zt=i,gt=null,n=!0):n=!1),n||xr(i)),null;case 13:return Hp(n,i,u);case 4:return ue(i,i.stateNode.containerInfo),v=i.pendingProps,n===null?i.child=hs(i,null,v,u):Bt(n,i,v,u),i.child;case 11:return Pp(n,i,i.type,i.pendingProps,u);case 7:return Bt(n,i,i.pendingProps,u),i.child;case 8:return Bt(n,i,i.pendingProps.children,u),i.child;case 12:return Bt(n,i,i.pendingProps.children,u),i.child;case 10:return v=i.pendingProps,Di(i,i.type,v.value),Bt(n,i,v.children,u),i.child;case 9:return T=i.type._context,v=i.pendingProps.children,vr(i),T=Gt(T),v=v(T),i.flags|=1,Bt(n,i,v,u),i.child;case 14:return Lp(n,i,i.type,i.pendingProps,u);case 15:return Fp(n,i,i.type,i.pendingProps,u);case 19:return Xp(n,i,u);case 31:return v=i.pendingProps,u=i.mode,v={mode:v.mode,children:v.children},n===null?(u=Sl(v,u),u.ref=i.ref,i.child=u,u.return=i,i=u):(u=li(n.child,v),u.ref=i.ref,i.child=u,u.return=i,i=u),i;case 22:return zp(n,i,u);case 24:return vr(i),v=Gt(Mt),n===null?(T=Ou(),T===null&&(T=ct,_=Mu(),T.pooledCache=_,_.refCount++,_!==null&&(T.pooledCacheLanes|=u),T=_),i.memoizedState={parent:v,cache:T},Au(i),Di(i,Mt,T)):((n.lanes&u)!==0&&(Ru(n,i),ma(i,null,null,u),fa()),T=n.memoizedState,_=i.memoizedState,T.parent!==v?(T={parent:v,cache:v},i.memoizedState=T,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=T),Di(i,Mt,v)):(v=_.cache,Di(i,Mt,v),v!==T.cache&&Eu(i,[Mt],u,!0))),Bt(n,i,i.pendingProps.children,u),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function pi(n){n.flags|=4}function Gp(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!t0(i)){if(i=_n.current,i!==null&&((Je&4194048)===Je?Yn!==null:(Je&62914560)!==Je&&(Je&536870912)===0||i!==Yn))throw ha=Du,Ng;n.flags|=8192}}function Cl(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?km():536870912,n.lanes|=i,gs|=i)}function wa(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:v.sibling=null}}function ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,u=0,v=0;if(i)for(var T=n.child;T!==null;)u|=T.lanes|T.childLanes,v|=T.subtreeFlags&65011712,v|=T.flags&65011712,T.return=n,T=T.sibling;else for(T=n.child;T!==null;)u|=T.lanes|T.childLanes,v|=T.subtreeFlags,v|=T.flags,T.return=n,T=T.sibling;return n.subtreeFlags|=v,n.childLanes=u,i}function dC(n,i,u){var v=i.pendingProps;switch(Tu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return u=i.stateNode,v=null,n!==null&&(v=n.memoizedState.cache),i.memoizedState.cache!==v&&(i.flags|=2048),di(Mt),ce(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(n===null||n.child===null)&&(ra(i)?pi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kg())),ft(i),null;case 26:return u=i.memoizedState,n===null?(pi(i),u!==null?(ft(i),Gp(i,u)):(ft(i),i.flags&=-16777217)):u?u!==n.memoizedState?(pi(i),ft(i),Gp(i,u)):(ft(i),i.flags&=-16777217):(n.memoizedProps!==v&&pi(i),ft(i),i.flags&=-16777217),null;case 27:Q(i),u=J.current;var T=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==v&&pi(i);else{if(!v){if(i.stateNode===null)throw Error(o(166));return ft(i),null}n=V.current,ra(i)?Cg(i):(n=Gx(T,v,u),i.stateNode=n,pi(i))}return ft(i),null;case 5:if(Q(i),u=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==v&&pi(i);else{if(!v){if(i.stateNode===null)throw Error(o(166));return ft(i),null}if(n=V.current,ra(i))Cg(i);else{switch(T=Ll(J.current),n){case 1:n=T.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:n=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":n=T.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":n=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":n=T.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof v.is=="string"?T.createElement("select",{is:v.is}):T.createElement("select"),v.multiple?n.multiple=!0:v.size&&(n.size=v.size);break;default:n=typeof v.is=="string"?T.createElement(u,{is:v.is}):T.createElement(u)}}n[Yt]=i,n[sn]=v;e:for(T=i.child;T!==null;){if(T.tag===5||T.tag===6)n.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===i)break e;for(;T.sibling===null;){if(T.return===null||T.return===i)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}i.stateNode=n;e:switch(Vt(n,u,v),u){case"button":case"input":case"select":case"textarea":n=!!v.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&pi(i)}}return ft(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==v&&pi(i);else{if(typeof v!="string"&&i.stateNode===null)throw Error(o(166));if(n=J.current,ra(i)){if(n=i.stateNode,u=i.memoizedProps,v=null,T=Zt,T!==null)switch(T.tag){case 27:case 5:v=T.memoizedProps}n[Yt]=i,n=!!(n.nodeValue===u||v!==null&&v.suppressHydrationWarning===!0||Ix(n.nodeValue,u)),n||xr(i)}else n=Ll(n).createTextNode(v),n[Yt]=i,i.stateNode=n}return ft(i),null;case 13:if(v=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(T=ra(i),v!==null&&v.dehydrated!==null){if(n===null){if(!T)throw Error(o(318));if(T=i.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(o(317));T[Yt]=i}else sa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),T=!1}else T=kg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=T),T=!0;if(!T)return i.flags&256?(mi(i),i):(mi(i),null)}if(mi(i),(i.flags&128)!==0)return i.lanes=u,i;if(u=v!==null,n=n!==null&&n.memoizedState!==null,u){v=i.child,T=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(T=v.alternate.memoizedState.cachePool.pool);var _=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(_=v.memoizedState.cachePool.pool),_!==T&&(v.flags|=2048)}return u!==n&&u&&(i.child.flags|=8192),Cl(i,i.updateQueue),ft(i),null;case 4:return ce(),n===null&&Lh(i.stateNode.containerInfo),ft(i),null;case 10:return di(i.type),ft(i),null;case 19:if(I(Nt),T=i.memoizedState,T===null)return ft(i),null;if(v=(i.flags&128)!==0,_=T.rendering,_===null)if(v)wa(T,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=yl(n),_!==null){for(i.flags|=128,wa(T,!1),n=_.updateQueue,i.updateQueue=n,Cl(i,n),i.subtreeFlags=0,n=u,u=i.child;u!==null;)wg(u,n),u=u.sibling;return K(Nt,Nt.current&1|2),i.child}n=n.sibling}T.tail!==null&&he()>jl&&(i.flags|=128,v=!0,wa(T,!1),i.lanes=4194304)}else{if(!v)if(n=yl(_),n!==null){if(i.flags|=128,v=!0,n=n.updateQueue,i.updateQueue=n,Cl(i,n),wa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!_.alternate&&!nt)return ft(i),null}else 2*he()-T.renderingStartTime>jl&&u!==536870912&&(i.flags|=128,v=!0,wa(T,!1),i.lanes=4194304);T.isBackwards?(_.sibling=i.child,i.child=_):(n=T.last,n!==null?n.sibling=_:i.child=_,T.last=_)}return T.tail!==null?(i=T.tail,T.rendering=i,T.tail=i.sibling,T.renderingStartTime=he(),i.sibling=null,n=Nt.current,K(Nt,v?n&1|2:n&1),i):(ft(i),null);case 22:case 23:return mi(i),zu(),v=i.memoizedState!==null,n!==null?n.memoizedState!==null!==v&&(i.flags|=8192):v&&(i.flags|=8192),v?(u&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),u=i.updateQueue,u!==null&&Cl(i,u.retryQueue),u=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),v=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(v=i.memoizedState.cachePool.pool),v!==u&&(i.flags|=2048),n!==null&&I(br),null;case 24:return u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),di(Mt),ft(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function fC(n,i){switch(Tu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return di(Mt),ce(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Q(i),null;case 13:if(mi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));sa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return I(Nt),null;case 4:return ce(),null;case 10:return di(i.type),null;case 22:case 23:return mi(i),zu(),n!==null&&I(br),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return di(Mt),null;case 25:return null;default:return null}}function qp(n,i){switch(Tu(i),i.tag){case 3:di(Mt),ce();break;case 26:case 27:case 5:Q(i);break;case 4:ce();break;case 13:mi(i);break;case 19:I(Nt);break;case 10:di(i.type);break;case 22:case 23:mi(i),zu(),n!==null&&I(br);break;case 24:di(Mt)}}function Sa(n,i){try{var u=i.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var T=v.next;u=T;do{if((u.tag&n)===n){v=void 0;var _=u.create,P=u.inst;v=_(),P.destroy=v}u=u.next}while(u!==T)}}catch(U){lt(i,i.return,U)}}function Bi(n,i,u){try{var v=i.updateQueue,T=v!==null?v.lastEffect:null;if(T!==null){var _=T.next;v=_;do{if((v.tag&n)===n){var P=v.inst,U=P.destroy;if(U!==void 0){P.destroy=void 0,T=i;var se=u,ye=U;try{ye()}catch(ke){lt(T,se,ke)}}}v=v.next}while(v!==_)}}catch(ke){lt(i,i.return,ke)}}function Wp(n){var i=n.updateQueue;if(i!==null){var u=n.stateNode;try{Lg(i,u)}catch(v){lt(n,n.return,v)}}}function Kp(n,i,u){u.props=Sr(n.type,n.memoizedProps),u.state=n.memoizedState;try{u.componentWillUnmount()}catch(v){lt(n,i,v)}}function Ca(n,i){try{var u=n.ref;if(u!==null){switch(n.tag){case 26:case 27:case 5:var v=n.stateNode;break;case 30:v=n.stateNode;break;default:v=n.stateNode}typeof u=="function"?n.refCleanup=u(v):u.current=v}}catch(T){lt(n,i,T)}}function Gn(n,i){var u=n.ref,v=n.refCleanup;if(u!==null)if(typeof v=="function")try{v()}catch(T){lt(n,i,T)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(T){lt(n,i,T)}else u.current=null}function Zp(n){var i=n.type,u=n.memoizedProps,v=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":u.autoFocus&&v.focus();break e;case"img":u.src?v.src=u.src:u.srcSet&&(v.srcset=u.srcSet)}}catch(T){lt(n,n.return,T)}}function dh(n,i,u){try{var v=n.stateNode;RC(v,n.type,u,i),v[sn]=i}catch(T){lt(n,n.return,T)}}function Qp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gi(n.type)||n.tag===4}function fh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mh(n,i,u){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(n,i):(i=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,i.appendChild(n),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=Pl));else if(v!==4&&(v===27&&Gi(n.type)&&(u=n.stateNode,i=null),n=n.child,n!==null))for(mh(n,i,u),n=n.sibling;n!==null;)mh(n,i,u),n=n.sibling}function Tl(n,i,u){var v=n.tag;if(v===5||v===6)n=n.stateNode,i?u.insertBefore(n,i):u.appendChild(n);else if(v!==4&&(v===27&&Gi(n.type)&&(u=n.stateNode),n=n.child,n!==null))for(Tl(n,i,u),n=n.sibling;n!==null;)Tl(n,i,u),n=n.sibling}function Jp(n){var i=n.stateNode,u=n.memoizedProps;try{for(var v=n.type,T=i.attributes;T.length;)i.removeAttributeNode(T[0]);Vt(i,v,u),i[Yt]=n,i[sn]=u}catch(_){lt(n,n.return,_)}}var xi=!1,bt=!1,gh=!1,ex=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function mC(n,i){if(n=n.containerInfo,Bh=Ul,n=hg(n),fu(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var v=u.getSelection&&u.getSelection();if(v&&v.rangeCount!==0){u=v.anchorNode;var T=v.anchorOffset,_=v.focusNode;v=v.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var P=0,U=-1,se=-1,ye=0,ke=0,_e=n,ve=null;t:for(;;){for(var be;_e!==u||T!==0&&_e.nodeType!==3||(U=P+T),_e!==_||v!==0&&_e.nodeType!==3||(se=P+v),_e.nodeType===3&&(P+=_e.nodeValue.length),(be=_e.firstChild)!==null;)ve=_e,_e=be;for(;;){if(_e===n)break t;if(ve===u&&++ye===T&&(U=P),ve===_&&++ke===v&&(se=P),(be=_e.nextSibling)!==null)break;_e=ve,ve=_e.parentNode}_e=be}u=U===-1||se===-1?null:{start:U,end:se}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ih={focusedElem:n,selectionRange:u},Ul=!1,Lt=i;Lt!==null;)if(i=Lt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Lt=n;else for(;Lt!==null;){switch(i=Lt,_=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,u=i,T=_.memoizedProps,_=_.memoizedState,v=u.stateNode;try{var He=Sr(u.type,T,u.elementType===u.type);n=v.getSnapshotBeforeUpdate(He,_),v.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){lt(u,u.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,u=n.nodeType,u===9)Hh(n);else if(u===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,Lt=n;break}Lt=i.return}}function tx(n,i,u){var v=u.flags;switch(u.tag){case 0:case 11:case 15:Ii(n,u),v&4&&Sa(5,u);break;case 1:if(Ii(n,u),v&4)if(n=u.stateNode,i===null)try{n.componentDidMount()}catch(P){lt(u,u.return,P)}else{var T=Sr(u.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(T,i,n.__reactInternalSnapshotBeforeUpdate)}catch(P){lt(u,u.return,P)}}v&64&&Wp(u),v&512&&Ca(u,u.return);break;case 3:if(Ii(n,u),v&64&&(n=u.updateQueue,n!==null)){if(i=null,u.child!==null)switch(u.child.tag){case 27:case 5:i=u.child.stateNode;break;case 1:i=u.child.stateNode}try{Lg(n,i)}catch(P){lt(u,u.return,P)}}break;case 27:i===null&&v&4&&Jp(u);case 26:case 5:Ii(n,u),i===null&&v&4&&Zp(u),v&512&&Ca(u,u.return);break;case 12:Ii(n,u);break;case 13:Ii(n,u),v&4&&rx(n,u),v&64&&(n=u.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(u=CC.bind(null,u),VC(n,u))));break;case 22:if(v=u.memoizedState!==null||xi,!v){i=i!==null&&i.memoizedState!==null||bt,T=xi;var _=bt;xi=v,(bt=i)&&!_?Vi(n,u,(u.subtreeFlags&8772)!==0):Ii(n,u),xi=T,bt=_}break;case 30:break;default:Ii(n,u)}}function nx(n){var i=n.alternate;i!==null&&(n.alternate=null,nx(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&qc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,ln=!1;function yi(n,i,u){for(u=u.child;u!==null;)ix(n,i,u),u=u.sibling}function ix(n,i,u){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(Ee,u)}catch{}switch(u.tag){case 26:bt||Gn(u,i),yi(n,i,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:bt||Gn(u,i);var v=ht,T=ln;Gi(u.type)&&(ht=u.stateNode,ln=!1),yi(n,i,u),Da(u.stateNode),ht=v,ln=T;break;case 5:bt||Gn(u,i);case 6:if(v=ht,T=ln,ht=null,yi(n,i,u),ht=v,ln=T,ht!==null)if(ln)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(u.stateNode)}catch(_){lt(u,i,_)}else try{ht.removeChild(u.stateNode)}catch(_){lt(u,i,_)}break;case 18:ht!==null&&(ln?(n=ht,Xx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,u.stateNode),Ia(n)):Xx(ht,u.stateNode));break;case 4:v=ht,T=ln,ht=u.stateNode.containerInfo,ln=!0,yi(n,i,u),ht=v,ln=T;break;case 0:case 11:case 14:case 15:bt||Bi(2,u,i),bt||Bi(4,u,i),yi(n,i,u);break;case 1:bt||(Gn(u,i),v=u.stateNode,typeof v.componentWillUnmount=="function"&&Kp(u,i,v)),yi(n,i,u);break;case 21:yi(n,i,u);break;case 22:bt=(v=bt)||u.memoizedState!==null,yi(n,i,u),bt=v;break;default:yi(n,i,u)}}function rx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ia(n)}catch(u){lt(i,i.return,u)}}function gC(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new ex),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new ex),i;default:throw Error(o(435,n.tag))}}function ph(n,i){var u=gC(n);i.forEach(function(v){var T=TC.bind(null,n,v);u.has(v)||(u.add(v),v.then(T,T))})}function mn(n,i){var u=i.deletions;if(u!==null)for(var v=0;v<u.length;v++){var T=u[v],_=n,P=i,U=P;e:for(;U!==null;){switch(U.tag){case 27:if(Gi(U.type)){ht=U.stateNode,ln=!1;break e}break;case 5:ht=U.stateNode,ln=!1;break e;case 3:case 4:ht=U.stateNode.containerInfo,ln=!0;break e}U=U.return}if(ht===null)throw Error(o(160));ix(_,P,T),ht=null,ln=!1,_=T.alternate,_!==null&&(_.return=null),T.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)sx(i,n),i=i.sibling}var Fn=null;function sx(n,i){var u=n.alternate,v=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(i,n),gn(n),v&4&&(Bi(3,n,n.return),Sa(3,n),Bi(5,n,n.return));break;case 1:mn(i,n),gn(n),v&512&&(bt||u===null||Gn(u,u.return)),v&64&&xi&&(n=n.updateQueue,n!==null&&(v=n.callbacks,v!==null&&(u=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=u===null?v:u.concat(v))));break;case 26:var T=Fn;if(mn(i,n),gn(n),v&512&&(bt||u===null||Gn(u,u.return)),v&4){var _=u!==null?u.memoizedState:null;if(v=n.memoizedState,u===null)if(v===null)if(n.stateNode===null){e:{v=n.type,u=n.memoizedProps,T=T.ownerDocument||T;t:switch(v){case"title":_=T.getElementsByTagName("title")[0],(!_||_[Gs]||_[Yt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=T.createElement(v),T.head.insertBefore(_,T.querySelector("head > title"))),Vt(_,v,u),_[Yt]=n,Rt(_),v=_;break e;case"link":var P=Jx("link","href",T).get(v+(u.href||""));if(P){for(var U=0;U<P.length;U++)if(_=P[U],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(U,1);break t}}_=T.createElement(v),Vt(_,v,u),T.head.appendChild(_);break;case"meta":if(P=Jx("meta","content",T).get(v+(u.content||""))){for(U=0;U<P.length;U++)if(_=P[U],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(U,1);break t}}_=T.createElement(v),Vt(_,v,u),T.head.appendChild(_);break;default:throw Error(o(468,v))}_[Yt]=n,Rt(_),v=_}n.stateNode=v}else e0(T,n.type,n.stateNode);else n.stateNode=Qx(T,v,n.memoizedProps);else _!==v?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,v===null?e0(T,n.type,n.stateNode):Qx(T,v,n.memoizedProps)):v===null&&n.stateNode!==null&&dh(n,n.memoizedProps,u.memoizedProps)}break;case 27:mn(i,n),gn(n),v&512&&(bt||u===null||Gn(u,u.return)),u!==null&&v&4&&dh(n,n.memoizedProps,u.memoizedProps);break;case 5:if(mn(i,n),gn(n),v&512&&(bt||u===null||Gn(u,u.return)),n.flags&32){T=n.stateNode;try{Gr(T,"")}catch(be){lt(n,n.return,be)}}v&4&&n.stateNode!=null&&(T=n.memoizedProps,dh(n,T,u!==null?u.memoizedProps:T)),v&1024&&(gh=!0);break;case 6:if(mn(i,n),gn(n),v&4){if(n.stateNode===null)throw Error(o(162));v=n.memoizedProps,u=n.stateNode;try{u.nodeValue=v}catch(be){lt(n,n.return,be)}}break;case 3:if(Bl=null,T=Fn,Fn=Fl(i.containerInfo),mn(i,n),Fn=T,gn(n),v&4&&u!==null&&u.memoizedState.isDehydrated)try{Ia(i.containerInfo)}catch(be){lt(n,n.return,be)}gh&&(gh=!1,ax(n));break;case 4:v=Fn,Fn=Fl(n.stateNode.containerInfo),mn(i,n),gn(n),Fn=v;break;case 12:mn(i,n),gn(n);break;case 13:mn(i,n),gn(n),n.child.flags&8192&&n.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Sh=he()),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,ph(n,v)));break;case 22:T=n.memoizedState!==null;var se=u!==null&&u.memoizedState!==null,ye=xi,ke=bt;if(xi=ye||T,bt=ke||se,mn(i,n),bt=ke,xi=ye,gn(n),v&8192)e:for(i=n.stateNode,i._visibility=T?i._visibility&-2:i._visibility|1,T&&(u===null||se||xi||bt||Cr(n)),u=null,i=n;;){if(i.tag===5||i.tag===26){if(u===null){se=u=i;try{if(_=se.stateNode,T)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{U=se.stateNode;var _e=se.memoizedProps.style,ve=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;U.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(be){lt(se,se.return,be)}}}else if(i.tag===6){if(u===null){se=i;try{se.stateNode.nodeValue=T?"":se.memoizedProps}catch(be){lt(se,se.return,be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;u===i&&(u=null),i=i.return}u===i&&(u=null),i.sibling.return=i.return,i=i.sibling}v&4&&(v=n.updateQueue,v!==null&&(u=v.retryQueue,u!==null&&(v.retryQueue=null,ph(n,u))));break;case 19:mn(i,n),gn(n),v&4&&(v=n.updateQueue,v!==null&&(n.updateQueue=null,ph(n,v)));break;case 30:break;case 21:break;default:mn(i,n),gn(n)}}function gn(n){var i=n.flags;if(i&2){try{for(var u,v=n.return;v!==null;){if(Qp(v)){u=v;break}v=v.return}if(u==null)throw Error(o(160));switch(u.tag){case 27:var T=u.stateNode,_=fh(n);Tl(n,_,T);break;case 5:var P=u.stateNode;u.flags&32&&(Gr(P,""),u.flags&=-33);var U=fh(n);Tl(n,U,P);break;case 3:case 4:var se=u.stateNode.containerInfo,ye=fh(n);mh(n,ye,se);break;default:throw Error(o(161))}}catch(ke){lt(n,n.return,ke)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function ax(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;ax(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ii(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)tx(n,i.alternate,i),i=i.sibling}function Cr(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Bi(4,i,i.return),Cr(i);break;case 1:Gn(i,i.return);var u=i.stateNode;typeof u.componentWillUnmount=="function"&&Kp(i,i.return,u),Cr(i);break;case 27:Da(i.stateNode);case 26:case 5:Gn(i,i.return),Cr(i);break;case 22:i.memoizedState===null&&Cr(i);break;case 30:Cr(i);break;default:Cr(i)}n=n.sibling}}function Vi(n,i,u){for(u=u&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var v=i.alternate,T=n,_=i,P=_.flags;switch(_.tag){case 0:case 11:case 15:Vi(T,_,u),Sa(4,_);break;case 1:if(Vi(T,_,u),v=_,T=v.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ye){lt(v,v.return,ye)}if(v=_,T=v.updateQueue,T!==null){var U=v.stateNode;try{var se=T.shared.hiddenCallbacks;if(se!==null)for(T.shared.hiddenCallbacks=null,T=0;T<se.length;T++)Pg(se[T],U)}catch(ye){lt(v,v.return,ye)}}u&&P&64&&Wp(_),Ca(_,_.return);break;case 27:Jp(_);case 26:case 5:Vi(T,_,u),u&&v===null&&P&4&&Zp(_),Ca(_,_.return);break;case 12:Vi(T,_,u);break;case 13:Vi(T,_,u),u&&P&4&&rx(T,_);break;case 22:_.memoizedState===null&&Vi(T,_,u),Ca(_,_.return);break;case 30:break;default:Vi(T,_,u)}i=i.sibling}}function xh(n,i){var u=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==u&&(n!=null&&n.refCount++,u!=null&&la(u))}function yh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&la(n))}function qn(n,i,u,v){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ox(n,i,u,v),i=i.sibling}function ox(n,i,u,v){var T=i.flags;switch(i.tag){case 0:case 11:case 15:qn(n,i,u,v),T&2048&&Sa(9,i);break;case 1:qn(n,i,u,v);break;case 3:qn(n,i,u,v),T&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&la(n)));break;case 12:if(T&2048){qn(n,i,u,v),n=i.stateNode;try{var _=i.memoizedProps,P=_.id,U=_.onPostCommit;typeof U=="function"&&U(P,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(se){lt(i,i.return,se)}}else qn(n,i,u,v);break;case 13:qn(n,i,u,v);break;case 23:break;case 22:_=i.stateNode,P=i.alternate,i.memoizedState!==null?_._visibility&2?qn(n,i,u,v):Ta(n,i):_._visibility&2?qn(n,i,u,v):(_._visibility|=2,ds(n,i,u,v,(i.subtreeFlags&10256)!==0)),T&2048&&xh(P,i);break;case 24:qn(n,i,u,v),T&2048&&yh(i.alternate,i);break;default:qn(n,i,u,v)}}function ds(n,i,u,v,T){for(T=T&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var _=n,P=i,U=u,se=v,ye=P.flags;switch(P.tag){case 0:case 11:case 15:ds(_,P,U,se,T),Sa(8,P);break;case 23:break;case 22:var ke=P.stateNode;P.memoizedState!==null?ke._visibility&2?ds(_,P,U,se,T):Ta(_,P):(ke._visibility|=2,ds(_,P,U,se,T)),T&&ye&2048&&xh(P.alternate,P);break;case 24:ds(_,P,U,se,T),T&&ye&2048&&yh(P.alternate,P);break;default:ds(_,P,U,se,T)}i=i.sibling}}function Ta(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var u=n,v=i,T=v.flags;switch(v.tag){case 22:Ta(u,v),T&2048&&xh(v.alternate,v);break;case 24:Ta(u,v),T&2048&&yh(v.alternate,v);break;default:Ta(u,v)}i=i.sibling}}var ka=8192;function fs(n){if(n.subtreeFlags&ka)for(n=n.child;n!==null;)lx(n),n=n.sibling}function lx(n){switch(n.tag){case 26:fs(n),n.flags&ka&&n.memoizedState!==null&&e2(Fn,n.memoizedState,n.memoizedProps);break;case 5:fs(n);break;case 3:case 4:var i=Fn;Fn=Fl(n.stateNode.containerInfo),fs(n),Fn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=ka,ka=16777216,fs(n),ka=i):fs(n));break;default:fs(n)}}function cx(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ja(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var v=i[u];Lt=v,hx(v,n)}cx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ux(n),n=n.sibling}function ux(n){switch(n.tag){case 0:case 11:case 15:ja(n),n.flags&2048&&Bi(9,n,n.return);break;case 3:ja(n);break;case 12:ja(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,kl(n)):ja(n);break;default:ja(n)}}function kl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var u=0;u<i.length;u++){var v=i[u];Lt=v,hx(v,n)}cx(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Bi(8,i,i.return),kl(i);break;case 22:u=i.stateNode,u._visibility&2&&(u._visibility&=-3,kl(i));break;default:kl(i)}n=n.sibling}}function hx(n,i){for(;Lt!==null;){var u=Lt;switch(u.tag){case 0:case 11:case 15:Bi(8,u,i);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var v=u.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:la(u.memoizedState.cache)}if(v=u.child,v!==null)v.return=u,Lt=v;else e:for(u=n;Lt!==null;){v=Lt;var T=v.sibling,_=v.return;if(nx(v),v===u){Lt=null;break e}if(T!==null){T.return=_,Lt=T;break e}Lt=_}}}var pC={getCacheForType:function(n){var i=Gt(Mt),u=i.data.get(n);return u===void 0&&(u=n(),i.data.set(n,u)),u}},xC=typeof WeakMap=="function"?WeakMap:Map,it=0,ct=null,Ze=null,Je=0,rt=0,pn=null,Ui=!1,ms=!1,vh=!1,vi=0,pt=0,Hi=0,Tr=0,bh=0,En=0,gs=0,_a=null,cn=null,wh=!1,Sh=0,jl=1/0,_l=null,$i=null,It=0,Xi=null,ps=null,xs=0,Ch=0,Th=null,dx=null,Ea=0,kh=null;function xn(){if((it&2)!==0&&Je!==0)return Je&-Je;if(z.T!==null){var n=rs;return n!==0?n:Dh()}return Em()}function fx(){En===0&&(En=(Je&536870912)===0||nt?Tm():536870912);var n=_n.current;return n!==null&&(n.flags|=32),En}function yn(n,i,u){(n===ct&&(rt===2||rt===9)||n.cancelPendingCommit!==null)&&(ys(n,0),Yi(n,Je,En,!1)),Ys(n,u),((it&2)===0||n!==ct)&&(n===ct&&((it&2)===0&&(Tr|=u),pt===4&&Yi(n,Je,En,!1)),Wn(n))}function mx(n,i,u){if((it&6)!==0)throw Error(o(327));var v=!u&&(i&124)===0&&(i&n.expiredLanes)===0||lr(n,i),T=v?bC(n,i):Eh(n,i,!0),_=v;do{if(T===0){ms&&!v&&Yi(n,i,0,!1);break}else{if(u=n.current.alternate,_&&!yC(u)){T=Eh(n,i,!1),_=!1;continue}if(T===2){if(_=i,n.errorRecoveryDisabledLanes&_)var P=0;else P=n.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){i=P;e:{var U=n;T=_a;var se=U.current.memoizedState.isDehydrated;if(se&&(ys(U,P).flags|=256),P=Eh(U,P,!1),P!==2){if(vh&&!se){U.errorRecoveryDisabledLanes|=_,Tr|=_,T=4;break e}_=cn,cn=T,_!==null&&(cn===null?cn=_:cn.push.apply(cn,_))}T=P}if(_=!1,T!==2)continue}}if(T===1){ys(n,0),Yi(n,i,0,!0);break}e:{switch(v=n,_=T,_){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Yi(v,i,En,!Ui);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(T=Sh+300-he(),10<T)){if(Yi(v,i,En,!Ui),si(v,0,!0)!==0)break e;v.timeoutHandle=Hx(gx.bind(null,v,u,cn,_l,wh,i,En,Tr,gs,Ui,_,2,-0,0),T);break e}gx(v,u,cn,_l,wh,i,En,Tr,gs,Ui,_,0,-0,0)}}break}while(!0);Wn(n)}function gx(n,i,u,v,T,_,P,U,se,ye,ke,_e,ve,be){if(n.timeoutHandle=-1,_e=i.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Pa={stylesheets:null,count:0,unsuspend:JC},lx(i),_e=t2(),_e!==null)){n.cancelPendingCommit=_e(Sx.bind(null,n,i,_,u,v,T,P,U,se,ke,1,ve,be)),Yi(n,_,P,!ye);return}Sx(n,i,_,u,v,T,P,U,se)}function yC(n){for(var i=n;;){var u=i.tag;if((u===0||u===11||u===15)&&i.flags&16384&&(u=i.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var v=0;v<u.length;v++){var T=u[v],_=T.getSnapshot;T=T.value;try{if(!dn(_(),T))return!1}catch{return!1}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yi(n,i,u,v){i&=~bh,i&=~Tr,n.suspendedLanes|=i,n.pingedLanes&=~i,v&&(n.warmLanes|=i),v=n.expirationTimes;for(var T=i;0<T;){var _=31-Ue(T),P=1<<_;v[_]=-1,T&=~P}u!==0&&jm(n,u,i)}function El(){return(it&6)===0?(Ma(0),!1):!0}function jh(){if(Ze!==null){if(rt===0)var n=Ze.return;else n=Ze,hi=yr=null,Hu(n),us=null,va=0,n=Ze;for(;n!==null;)qp(n.alternate,n),n=n.return;Ze=null}}function ys(n,i){var u=n.timeoutHandle;u!==-1&&(n.timeoutHandle=-1,LC(u)),u=n.cancelPendingCommit,u!==null&&(n.cancelPendingCommit=null,u()),jh(),ct=n,Ze=u=li(n.current,null),Je=i,rt=0,pn=null,Ui=!1,ms=lr(n,i),vh=!1,gs=En=bh=Tr=Hi=pt=0,cn=_a=null,wh=!1,(i&8)!==0&&(i|=i&32);var v=n.entangledLanes;if(v!==0)for(n=n.entanglements,v&=i;0<v;){var T=31-Ue(v),_=1<<T;i|=n[T],v&=~_}return vi=i,Ko(),u}function px(n,i){qe=null,z.H=gl,i===ua||i===sl?(i=Ag(),rt=3):i===Ng?(i=Ag(),rt=4):rt=i===Rp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pn=i,Ze===null&&(pt=1,bl(n,Cn(i,n.current)))}function xx(){var n=z.H;return z.H=gl,n===null?gl:n}function yx(){var n=z.A;return z.A=pC,n}function _h(){pt=4,Ui||(Je&4194048)!==Je&&_n.current!==null||(ms=!0),(Hi&134217727)===0&&(Tr&134217727)===0||ct===null||Yi(ct,Je,En,!1)}function Eh(n,i,u){var v=it;it|=2;var T=xx(),_=yx();(ct!==n||Je!==i)&&(_l=null,ys(n,i)),i=!1;var P=pt;e:do try{if(rt!==0&&Ze!==null){var U=Ze,se=pn;switch(rt){case 8:jh(),P=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(i=!0);var ye=rt;if(rt=0,pn=null,vs(n,U,se,ye),u&&ms){P=0;break e}break;default:ye=rt,rt=0,pn=null,vs(n,U,se,ye)}}vC(),P=pt;break}catch(ke){px(n,ke)}while(!0);return i&&n.shellSuspendCounter++,hi=yr=null,it=v,z.H=T,z.A=_,Ze===null&&(ct=null,Je=0,Ko()),P}function vC(){for(;Ze!==null;)vx(Ze)}function bC(n,i){var u=it;it|=2;var v=xx(),T=yx();ct!==n||Je!==i?(_l=null,jl=he()+500,ys(n,i)):ms=lr(n,i);e:do try{if(rt!==0&&Ze!==null){i=Ze;var _=pn;t:switch(rt){case 1:rt=0,pn=null,vs(n,i,_,1);break;case 2:case 9:if(Og(_)){rt=0,pn=null,bx(i);break}i=function(){rt!==2&&rt!==9||ct!==n||(rt=7),Wn(n)},_.then(i,i);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:Og(_)?(rt=0,pn=null,bx(i)):(rt=0,pn=null,vs(n,i,_,7));break;case 5:var P=null;switch(Ze.tag){case 26:P=Ze.memoizedState;case 5:case 27:var U=Ze;if(!P||t0(P)){rt=0,pn=null;var se=U.sibling;if(se!==null)Ze=se;else{var ye=U.return;ye!==null?(Ze=ye,Ml(ye)):Ze=null}break t}}rt=0,pn=null,vs(n,i,_,5);break;case 6:rt=0,pn=null,vs(n,i,_,6);break;case 8:jh(),pt=6;break e;default:throw Error(o(462))}}wC();break}catch(ke){px(n,ke)}while(!0);return hi=yr=null,z.H=v,z.A=T,it=u,Ze!==null?0:(ct=null,Je=0,Ko(),pt)}function wC(){for(;Ze!==null&&!re();)vx(Ze)}function vx(n){var i=Yp(n.alternate,n,vi);n.memoizedProps=n.pendingProps,i===null?Ml(n):Ze=i}function bx(n){var i=n,u=i.alternate;switch(i.tag){case 15:case 0:i=Ip(u,i,i.pendingProps,i.type,void 0,Je);break;case 11:i=Ip(u,i,i.pendingProps,i.type.render,i.ref,Je);break;case 5:Hu(i);default:qp(u,i),i=Ze=wg(i,vi),i=Yp(u,i,vi)}n.memoizedProps=n.pendingProps,i===null?Ml(n):Ze=i}function vs(n,i,u,v){hi=yr=null,Hu(i),us=null,va=0;var T=i.return;try{if(uC(n,T,i,u,Je)){pt=1,bl(n,Cn(u,n.current)),Ze=null;return}}catch(_){if(T!==null)throw Ze=T,_;pt=1,bl(n,Cn(u,n.current)),Ze=null;return}i.flags&32768?(nt||v===1?n=!0:ms||(Je&536870912)!==0?n=!1:(Ui=n=!0,(v===2||v===9||v===3||v===6)&&(v=_n.current,v!==null&&v.tag===13&&(v.flags|=16384))),wx(i,n)):Ml(i)}function Ml(n){var i=n;do{if((i.flags&32768)!==0){wx(i,Ui);return}n=i.return;var u=dC(i.alternate,i,vi);if(u!==null){Ze=u;return}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=n}while(i!==null);pt===0&&(pt=5)}function wx(n,i){do{var u=fC(n.alternate,n);if(u!==null){u.flags&=32767,Ze=u;return}if(u=n.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!i&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=u}while(n!==null);pt=6,Ze=null}function Sx(n,i,u,v,T,_,P,U,se){n.cancelPendingCommit=null;do Nl();while(It!==0);if((it&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(_=i.lanes|i.childLanes,_|=yu,Jw(n,u,_,P,U,se),n===ct&&(Ze=ct=null,Je=0),ps=i,Xi=n,xs=u,Ch=_,Th=T,dx=v,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,kC(ne,function(){return _x(),null})):(n.callbackNode=null,n.callbackPriority=0),v=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||v){v=z.T,z.T=null,T=q.p,q.p=2,P=it,it|=4;try{mC(n,i,u)}finally{it=P,q.p=T,z.T=v}}It=1,Cx(),Tx(),kx()}}function Cx(){if(It===1){It=0;var n=Xi,i=ps,u=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||u){u=z.T,z.T=null;var v=q.p;q.p=2;var T=it;it|=4;try{sx(i,n);var _=Ih,P=hg(n.containerInfo),U=_.focusedElem,se=_.selectionRange;if(P!==U&&U&&U.ownerDocument&&ug(U.ownerDocument.documentElement,U)){if(se!==null&&fu(U)){var ye=se.start,ke=se.end;if(ke===void 0&&(ke=ye),"selectionStart"in U)U.selectionStart=ye,U.selectionEnd=Math.min(ke,U.value.length);else{var _e=U.ownerDocument||document,ve=_e&&_e.defaultView||window;if(ve.getSelection){var be=ve.getSelection(),He=U.textContent.length,Ie=Math.min(se.start,He),ot=se.end===void 0?Ie:Math.min(se.end,He);!be.extend&&Ie>ot&&(P=ot,ot=Ie,Ie=P);var pe=cg(U,Ie),de=cg(U,ot);if(pe&&de&&(be.rangeCount!==1||be.anchorNode!==pe.node||be.anchorOffset!==pe.offset||be.focusNode!==de.node||be.focusOffset!==de.offset)){var xe=_e.createRange();xe.setStart(pe.node,pe.offset),be.removeAllRanges(),Ie>ot?(be.addRange(xe),be.extend(de.node,de.offset)):(xe.setEnd(de.node,de.offset),be.addRange(xe))}}}}for(_e=[],be=U;be=be.parentNode;)be.nodeType===1&&_e.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<_e.length;U++){var je=_e[U];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}Ul=!!Bh,Ih=Bh=null}finally{it=T,q.p=v,z.T=u}}n.current=i,It=2}}function Tx(){if(It===2){It=0;var n=Xi,i=ps,u=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||u){u=z.T,z.T=null;var v=q.p;q.p=2;var T=it;it|=4;try{tx(n,i.alternate,i)}finally{it=T,q.p=v,z.T=u}}It=3}}function kx(){if(It===4||It===3){It=0,ge();var n=Xi,i=ps,u=xs,v=dx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?It=5:(It=0,ps=Xi=null,jx(n,n.pendingLanes));var T=n.pendingLanes;if(T===0&&($i=null),Yc(u),i=i.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(Ee,i,void 0,(i.current.flags&128)===128)}catch{}if(v!==null){i=z.T,T=q.p,q.p=2,z.T=null;try{for(var _=n.onRecoverableError,P=0;P<v.length;P++){var U=v[P];_(U.value,{componentStack:U.stack})}}finally{z.T=i,q.p=T}}(xs&3)!==0&&Nl(),Wn(n),T=n.pendingLanes,(u&4194090)!==0&&(T&42)!==0?n===kh?Ea++:(Ea=0,kh=n):Ea=0,Ma(0)}}function jx(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,la(i)))}function Nl(n){return Cx(),Tx(),kx(),_x()}function _x(){if(It!==5)return!1;var n=Xi,i=Ch;Ch=0;var u=Yc(xs),v=z.T,T=q.p;try{q.p=32>u?32:u,z.T=null,u=Th,Th=null;var _=Xi,P=xs;if(It=0,ps=Xi=null,xs=0,(it&6)!==0)throw Error(o(331));var U=it;if(it|=4,ux(_.current),ox(_,_.current,P,u),it=U,Ma(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(Ee,_)}catch{}return!0}finally{q.p=T,z.T=v,jx(n,i)}}function Ex(n,i,u){i=Cn(u,i),i=ih(n.stateNode,i,2),n=Pi(n,i,2),n!==null&&(Ys(n,2),Wn(n))}function lt(n,i,u){if(n.tag===3)Ex(n,n,u);else for(;i!==null;){if(i.tag===3){Ex(i,n,u);break}else if(i.tag===1){var v=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&($i===null||!$i.has(v))){n=Cn(u,n),u=Dp(2),v=Pi(i,u,2),v!==null&&(Ap(u,v,i,n),Ys(v,2),Wn(v));break}}i=i.return}}function Mh(n,i,u){var v=n.pingCache;if(v===null){v=n.pingCache=new xC;var T=new Set;v.set(i,T)}else T=v.get(i),T===void 0&&(T=new Set,v.set(i,T));T.has(u)||(vh=!0,T.add(u),n=SC.bind(null,n,i,u),i.then(n,n))}function SC(n,i,u){var v=n.pingCache;v!==null&&v.delete(i),n.pingedLanes|=n.suspendedLanes&u,n.warmLanes&=~u,ct===n&&(Je&u)===u&&(pt===4||pt===3&&(Je&62914560)===Je&&300>he()-Sh?(it&2)===0&&ys(n,0):bh|=u,gs===Je&&(gs=0)),Wn(n)}function Mx(n,i){i===0&&(i=km()),n=es(n,i),n!==null&&(Ys(n,i),Wn(n))}function CC(n){var i=n.memoizedState,u=0;i!==null&&(u=i.retryLane),Mx(n,u)}function TC(n,i){var u=0;switch(n.tag){case 13:var v=n.stateNode,T=n.memoizedState;T!==null&&(u=T.retryLane);break;case 19:v=n.stateNode;break;case 22:v=n.stateNode._retryCache;break;default:throw Error(o(314))}v!==null&&v.delete(i),Mx(n,u)}function kC(n,i){return le(n,i)}var Ol=null,bs=null,Nh=!1,Dl=!1,Oh=!1,kr=0;function Wn(n){n!==bs&&n.next===null&&(bs===null?Ol=bs=n:bs=bs.next=n),Dl=!0,Nh||(Nh=!0,_C())}function Ma(n,i){if(!Oh&&Dl){Oh=!0;do for(var u=!1,v=Ol;v!==null;){if(n!==0){var T=v.pendingLanes;if(T===0)var _=0;else{var P=v.suspendedLanes,U=v.pingedLanes;_=(1<<31-Ue(42|n)+1)-1,_&=T&~(P&~U),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,Ax(v,_))}else _=Je,_=si(v,v===ct?_:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(_&3)===0||lr(v,_)||(u=!0,Ax(v,_));v=v.next}while(u);Oh=!1}}function jC(){Nx()}function Nx(){Dl=Nh=!1;var n=0;kr!==0&&(PC()&&(n=kr),kr=0);for(var i=he(),u=null,v=Ol;v!==null;){var T=v.next,_=Ox(v,i);_===0?(v.next=null,u===null?Ol=T:u.next=T,T===null&&(bs=u)):(u=v,(n!==0||(_&3)!==0)&&(Dl=!0)),v=T}Ma(n)}function Ox(n,i){for(var u=n.suspendedLanes,v=n.pingedLanes,T=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var P=31-Ue(_),U=1<<P,se=T[P];se===-1?((U&u)===0||(U&v)!==0)&&(T[P]=zo(U,i)):se<=i&&(n.expiredLanes|=U),_&=~U}if(i=ct,u=Je,u=si(n,n===i?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v=n.callbackNode,u===0||n===i&&(rt===2||rt===9)||n.cancelPendingCommit!==null)return v!==null&&v!==null&&H(v),n.callbackNode=null,n.callbackPriority=0;if((u&3)===0||lr(n,u)){if(i=u&-u,i===n.callbackPriority)return i;switch(v!==null&&H(v),Yc(u)){case 2:case 8:u=$;break;case 32:u=ne;break;case 268435456:u=we;break;default:u=ne}return v=Dx.bind(null,n),u=le(u,v),n.callbackPriority=i,n.callbackNode=u,i}return v!==null&&v!==null&&H(v),n.callbackPriority=2,n.callbackNode=null,2}function Dx(n,i){if(It!==0&&It!==5)return n.callbackNode=null,n.callbackPriority=0,null;var u=n.callbackNode;if(Nl()&&n.callbackNode!==u)return null;var v=Je;return v=si(n,n===ct?v:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),v===0?null:(mx(n,v,i),Ox(n,he()),n.callbackNode!=null&&n.callbackNode===u?Dx.bind(null,n):null)}function Ax(n,i){if(Nl())return null;mx(n,i,!0)}function _C(){FC(function(){(it&6)!==0?le(Se,jC):Nx()})}function Dh(){return kr===0&&(kr=Tm()),kr}function Rx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ho(""+n)}function Px(n,i){var u=i.ownerDocument.createElement("input");return u.name=i.name,u.value=i.value,n.id&&u.setAttribute("form",n.id),i.parentNode.insertBefore(u,i),n=new FormData(n),u.parentNode.removeChild(u),n}function EC(n,i,u,v,T){if(i==="submit"&&u&&u.stateNode===T){var _=Rx((T[sn]||null).action),P=v.submitter;P&&(i=(i=P[sn]||null)?Rx(i.formAction):P.getAttribute("formAction"),i!==null&&(_=i,P=null));var U=new Go("action","action",null,v,T);n.push({event:U,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(kr!==0){var se=P?Px(T,P):new FormData(T);Qu(u,{pending:!0,data:se,method:T.method,action:_},null,se)}}else typeof _=="function"&&(U.preventDefault(),se=P?Px(T,P):new FormData(T),Qu(u,{pending:!0,data:se,method:T.method,action:_},_,se))},currentTarget:T}]})}}for(var Ah=0;Ah<xu.length;Ah++){var Rh=xu[Ah],MC=Rh.toLowerCase(),NC=Rh[0].toUpperCase()+Rh.slice(1);Ln(MC,"on"+NC)}Ln(mg,"onAnimationEnd"),Ln(gg,"onAnimationIteration"),Ln(pg,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(GS,"onTransitionRun"),Ln(qS,"onTransitionStart"),Ln(WS,"onTransitionCancel"),Ln(xg,"onTransitionEnd"),$r("onMouseEnter",["mouseout","mouseover"]),$r("onMouseLeave",["mouseout","mouseover"]),$r("onPointerEnter",["pointerout","pointerover"]),$r("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Na));function Lx(n,i){i=(i&4)!==0;for(var u=0;u<n.length;u++){var v=n[u],T=v.event;v=v.listeners;e:{var _=void 0;if(i)for(var P=v.length-1;0<=P;P--){var U=v[P],se=U.instance,ye=U.currentTarget;if(U=U.listener,se!==_&&T.isPropagationStopped())break e;_=U,T.currentTarget=ye;try{_(T)}catch(ke){vl(ke)}T.currentTarget=null,_=se}else for(P=0;P<v.length;P++){if(U=v[P],se=U.instance,ye=U.currentTarget,U=U.listener,se!==_&&T.isPropagationStopped())break e;_=U,T.currentTarget=ye;try{_(T)}catch(ke){vl(ke)}T.currentTarget=null,_=se}}}}function Qe(n,i){var u=i[Gc];u===void 0&&(u=i[Gc]=new Set);var v=n+"__bubble";u.has(v)||(Fx(i,n,2,!1),u.add(v))}function Ph(n,i,u){var v=0;i&&(v|=4),Fx(u,n,v,i)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Lh(n){if(!n[Al]){n[Al]=!0,Nm.forEach(function(u){u!=="selectionchange"&&(OC.has(u)||Ph(u,!1,n),Ph(u,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Al]||(i[Al]=!0,Ph("selectionchange",!1,i))}}function Fx(n,i,u,v){switch(o0(i)){case 2:var T=r2;break;case 8:T=s2;break;default:T=Kh}u=T.bind(null,i,u,n),T=void 0,!ru||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(T=!0),v?T!==void 0?n.addEventListener(i,u,{capture:!0,passive:T}):n.addEventListener(i,u,!0):T!==void 0?n.addEventListener(i,u,{passive:T}):n.addEventListener(i,u,!1)}function Fh(n,i,u,v,T){var _=v;if((i&1)===0&&(i&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var U=v.stateNode.containerInfo;if(U===T)break;if(P===4)for(P=v.return;P!==null;){var se=P.tag;if((se===3||se===4)&&P.stateNode.containerInfo===T)return;P=P.return}for(;U!==null;){if(P=Vr(U),P===null)return;if(se=P.tag,se===5||se===6||se===26||se===27){v=_=P;continue e}U=U.parentNode}}v=v.return}$m(function(){var ye=_,ke=nu(u),_e=[];e:{var ve=yg.get(n);if(ve!==void 0){var be=Go,He=n;switch(n){case"keypress":if(Xo(u)===0)break e;case"keydown":case"keyup":be=kS;break;case"focusin":He="focus",be=lu;break;case"focusout":He="blur",be=lu;break;case"beforeblur":case"afterblur":be=lu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=ES;break;case mg:case gg:case pg:be=pS;break;case xg:be=NS;break;case"scroll":case"scrollend":be=hS;break;case"wheel":be=DS;break;case"copy":case"cut":case"paste":be=yS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Wm;break;case"toggle":case"beforetoggle":be=RS}var Ie=(i&4)!==0,ot=!Ie&&(n==="scroll"||n==="scrollend"),pe=Ie?ve!==null?ve+"Capture":null:ve;Ie=[];for(var de=ye,xe;de!==null;){var je=de;if(xe=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||xe===null||pe===null||(je=Ws(de,pe),je!=null&&Ie.push(Oa(de,je,xe))),ot)break;de=de.return}0<Ie.length&&(ve=new be(ve,He,null,u,ke),_e.push({event:ve,listeners:Ie}))}}if((i&7)===0){e:{if(ve=n==="mouseover"||n==="pointerover",be=n==="mouseout"||n==="pointerout",ve&&u!==tu&&(He=u.relatedTarget||u.fromElement)&&(Vr(He)||He[Ir]))break e;if((be||ve)&&(ve=ke.window===ke?ke:(ve=ke.ownerDocument)?ve.defaultView||ve.parentWindow:window,be?(He=u.relatedTarget||u.toElement,be=ye,He=He?Vr(He):null,He!==null&&(ot=b(He),Ie=He.tag,He!==ot||Ie!==5&&Ie!==27&&Ie!==6)&&(He=null)):(be=null,He=ye),be!==He)){if(Ie=Gm,je="onMouseLeave",pe="onMouseEnter",de="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=Wm,je="onPointerLeave",pe="onPointerEnter",de="pointer"),ot=be==null?ve:qs(be),xe=He==null?ve:qs(He),ve=new Ie(je,de+"leave",be,u,ke),ve.target=ot,ve.relatedTarget=xe,je=null,Vr(ke)===ye&&(Ie=new Ie(pe,de+"enter",He,u,ke),Ie.target=xe,Ie.relatedTarget=ot,je=Ie),ot=je,be&&He)t:{for(Ie=be,pe=He,de=0,xe=Ie;xe;xe=ws(xe))de++;for(xe=0,je=pe;je;je=ws(je))xe++;for(;0<de-xe;)Ie=ws(Ie),de--;for(;0<xe-de;)pe=ws(pe),xe--;for(;de--;){if(Ie===pe||pe!==null&&Ie===pe.alternate)break t;Ie=ws(Ie),pe=ws(pe)}Ie=null}else Ie=null;be!==null&&zx(_e,ve,be,Ie,!1),He!==null&&ot!==null&&zx(_e,ot,He,Ie,!0)}}e:{if(ve=ye?qs(ye):window,be=ve.nodeName&&ve.nodeName.toLowerCase(),be==="select"||be==="input"&&ve.type==="file")var Re=ig;else if(tg(ve))if(rg)Re=$S;else{Re=US;var Ke=VS}else be=ve.nodeName,!be||be.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?ye&&eu(ye.elementType)&&(Re=ig):Re=HS;if(Re&&(Re=Re(n,ye))){ng(_e,Re,u,ke);break e}Ke&&Ke(n,ve,ye),n==="focusout"&&ye&&ve.type==="number"&&ye.memoizedProps.value!=null&&Jc(ve,"number",ve.value)}switch(Ke=ye?qs(ye):window,n){case"focusin":(tg(Ke)||Ke.contentEditable==="true")&&(Zr=Ke,mu=ye,ia=null);break;case"focusout":ia=mu=Zr=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,dg(_e,u,ke);break;case"selectionchange":if(YS)break;case"keydown":case"keyup":dg(_e,u,ke)}var Fe;if(uu)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Kr?Jm(n,u)&&(Ve="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ve="onCompositionStart");Ve&&(Km&&u.locale!=="ko"&&(Kr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Kr&&(Fe=Xm()):(Oi=ke,su="value"in Oi?Oi.value:Oi.textContent,Kr=!0)),Ke=Rl(ye,Ve),0<Ke.length&&(Ve=new qm(Ve,n,null,u,ke),_e.push({event:Ve,listeners:Ke}),Fe?Ve.data=Fe:(Fe=eg(u),Fe!==null&&(Ve.data=Fe)))),(Fe=LS?FS(n,u):zS(n,u))&&(Ve=Rl(ye,"onBeforeInput"),0<Ve.length&&(Ke=new qm("onBeforeInput","beforeinput",null,u,ke),_e.push({event:Ke,listeners:Ve}),Ke.data=Fe)),EC(_e,n,ye,u,ke)}Lx(_e,i)})}function Oa(n,i,u){return{instance:n,listener:i,currentTarget:u}}function Rl(n,i){for(var u=i+"Capture",v=[];n!==null;){var T=n,_=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||_===null||(T=Ws(n,u),T!=null&&v.unshift(Oa(n,T,_)),T=Ws(n,i),T!=null&&v.push(Oa(n,T,_))),n.tag===3)return v;n=n.return}return[]}function ws(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function zx(n,i,u,v,T){for(var _=i._reactName,P=[];u!==null&&u!==v;){var U=u,se=U.alternate,ye=U.stateNode;if(U=U.tag,se!==null&&se===v)break;U!==5&&U!==26&&U!==27||ye===null||(se=ye,T?(ye=Ws(u,_),ye!=null&&P.unshift(Oa(u,ye,se))):T||(ye=Ws(u,_),ye!=null&&P.push(Oa(u,ye,se)))),u=u.return}P.length!==0&&n.push({event:i,listeners:P})}var DC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function Bx(n){return(typeof n=="string"?n:""+n).replace(DC,`
`).replace(AC,"")}function Ix(n,i){return i=Bx(i),Bx(n)===i}function Pl(){}function at(n,i,u,v,T,_){switch(u){case"children":typeof v=="string"?i==="body"||i==="textarea"&&v===""||Gr(n,v):(typeof v=="number"||typeof v=="bigint")&&i!=="body"&&Gr(n,""+v);break;case"className":Io(n,"class",v);break;case"tabIndex":Io(n,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Io(n,u,v);break;case"style":Um(n,v,_);break;case"data":if(i!=="object"){Io(n,"data",v);break}case"src":case"href":if(v===""&&(i!=="a"||u!=="href")){n.removeAttribute(u);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(u);break}v=Ho(""+v),n.setAttribute(u,v);break;case"action":case"formAction":if(typeof v=="function"){n.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(i!=="input"&&at(n,i,"name",T.name,T,null),at(n,i,"formEncType",T.formEncType,T,null),at(n,i,"formMethod",T.formMethod,T,null),at(n,i,"formTarget",T.formTarget,T,null)):(at(n,i,"encType",T.encType,T,null),at(n,i,"method",T.method,T,null),at(n,i,"target",T.target,T,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){n.removeAttribute(u);break}v=Ho(""+v),n.setAttribute(u,v);break;case"onClick":v!=null&&(n.onclick=Pl);break;case"onScroll":v!=null&&Qe("scroll",n);break;case"onScrollEnd":v!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(o(61));if(u=v.__html,u!=null){if(T.children!=null)throw Error(o(60));n.innerHTML=u}}break;case"multiple":n.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":n.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){n.removeAttribute("xlink:href");break}u=Ho(""+v),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(u,""+v):n.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(u,""):n.removeAttribute(u);break;case"capture":case"download":v===!0?n.setAttribute(u,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?n.setAttribute(u,v):n.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?n.setAttribute(u,v):n.removeAttribute(u);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?n.removeAttribute(u):n.setAttribute(u,v);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Bo(n,"popover",v);break;case"xlinkActuate":ai(n,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":ai(n,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":ai(n,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":ai(n,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":ai(n,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":ai(n,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":ai(n,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":ai(n,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":ai(n,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Bo(n,"is",v);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=cS.get(u)||u,Bo(n,u,v))}}function zh(n,i,u,v,T,_){switch(u){case"style":Um(n,v,_);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(o(61));if(u=v.__html,u!=null){if(T.children!=null)throw Error(o(60));n.innerHTML=u}}break;case"children":typeof v=="string"?Gr(n,v):(typeof v=="number"||typeof v=="bigint")&&Gr(n,""+v);break;case"onScroll":v!=null&&Qe("scroll",n);break;case"onScrollEnd":v!=null&&Qe("scrollend",n);break;case"onClick":v!=null&&(n.onclick=Pl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Om.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(T=u.endsWith("Capture"),i=u.slice(2,T?u.length-7:void 0),_=n[sn]||null,_=_!=null?_[u]:null,typeof _=="function"&&n.removeEventListener(i,_,T),typeof v=="function")){typeof _!="function"&&_!==null&&(u in n?n[u]=null:n.hasAttribute(u)&&n.removeAttribute(u)),n.addEventListener(i,v,T);break e}u in n?n[u]=v:v===!0?n.setAttribute(u,""):Bo(n,u,v)}}}function Vt(n,i,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var v=!1,T=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var P=u[_];if(P!=null)switch(_){case"src":v=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:at(n,i,_,P,u,null)}}T&&at(n,i,"srcSet",u.srcSet,u,null),v&&at(n,i,"src",u.src,u,null);return;case"input":Qe("invalid",n);var U=_=P=T=null,se=null,ye=null;for(v in u)if(u.hasOwnProperty(v)){var ke=u[v];if(ke!=null)switch(v){case"name":T=ke;break;case"type":P=ke;break;case"checked":se=ke;break;case"defaultChecked":ye=ke;break;case"value":_=ke;break;case"defaultValue":U=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(o(137,i));break;default:at(n,i,v,ke,u,null)}}zm(n,_,U,se,ye,P,T,!1),Vo(n);return;case"select":Qe("invalid",n),v=P=_=null;for(T in u)if(u.hasOwnProperty(T)&&(U=u[T],U!=null))switch(T){case"value":_=U;break;case"defaultValue":P=U;break;case"multiple":v=U;default:at(n,i,T,U,u,null)}i=_,u=P,n.multiple=!!v,i!=null?Yr(n,!!v,i,!1):u!=null&&Yr(n,!!v,u,!0);return;case"textarea":Qe("invalid",n),_=T=v=null;for(P in u)if(u.hasOwnProperty(P)&&(U=u[P],U!=null))switch(P){case"value":v=U;break;case"defaultValue":T=U;break;case"children":_=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(91));break;default:at(n,i,P,U,u,null)}Im(n,v,T,_),Vo(n);return;case"option":for(se in u)if(u.hasOwnProperty(se)&&(v=u[se],v!=null))switch(se){case"selected":n.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:at(n,i,se,v,u,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(v=0;v<Na.length;v++)Qe(Na[v],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in u)if(u.hasOwnProperty(ye)&&(v=u[ye],v!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:at(n,i,ye,v,u,null)}return;default:if(eu(i)){for(ke in u)u.hasOwnProperty(ke)&&(v=u[ke],v!==void 0&&zh(n,i,ke,v,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(v=u[U],v!=null&&at(n,i,U,v,u,null))}function RC(n,i,u,v){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,_=null,P=null,U=null,se=null,ye=null,ke=null;for(be in u){var _e=u[be];if(u.hasOwnProperty(be)&&_e!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":se=_e;default:v.hasOwnProperty(be)||at(n,i,be,null,v,_e)}}for(var ve in v){var be=v[ve];if(_e=u[ve],v.hasOwnProperty(ve)&&(be!=null||_e!=null))switch(ve){case"type":_=be;break;case"name":T=be;break;case"checked":ye=be;break;case"defaultChecked":ke=be;break;case"value":P=be;break;case"defaultValue":U=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,i));break;default:be!==_e&&at(n,i,ve,be,v,_e)}}Qc(n,P,U,se,ye,ke,_,T);return;case"select":be=P=U=ve=null;for(_ in u)if(se=u[_],u.hasOwnProperty(_)&&se!=null)switch(_){case"value":break;case"multiple":be=se;default:v.hasOwnProperty(_)||at(n,i,_,null,v,se)}for(T in v)if(_=v[T],se=u[T],v.hasOwnProperty(T)&&(_!=null||se!=null))switch(T){case"value":ve=_;break;case"defaultValue":U=_;break;case"multiple":P=_;default:_!==se&&at(n,i,T,_,v,se)}i=U,u=P,v=be,ve!=null?Yr(n,!!u,ve,!1):!!v!=!!u&&(i!=null?Yr(n,!!u,i,!0):Yr(n,!!u,u?[]:"",!1));return;case"textarea":be=ve=null;for(U in u)if(T=u[U],u.hasOwnProperty(U)&&T!=null&&!v.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:at(n,i,U,null,v,T)}for(P in v)if(T=v[P],_=u[P],v.hasOwnProperty(P)&&(T!=null||_!=null))switch(P){case"value":ve=T;break;case"defaultValue":be=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(o(91));break;default:T!==_&&at(n,i,P,T,v,_)}Bm(n,ve,be);return;case"option":for(var He in u)if(ve=u[He],u.hasOwnProperty(He)&&ve!=null&&!v.hasOwnProperty(He))switch(He){case"selected":n.selected=!1;break;default:at(n,i,He,null,v,ve)}for(se in v)if(ve=v[se],be=u[se],v.hasOwnProperty(se)&&ve!==be&&(ve!=null||be!=null))switch(se){case"selected":n.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:at(n,i,se,ve,v,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in u)ve=u[Ie],u.hasOwnProperty(Ie)&&ve!=null&&!v.hasOwnProperty(Ie)&&at(n,i,Ie,null,v,ve);for(ye in v)if(ve=v[ye],be=u[ye],v.hasOwnProperty(ye)&&ve!==be&&(ve!=null||be!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,i));break;default:at(n,i,ye,ve,v,be)}return;default:if(eu(i)){for(var ot in u)ve=u[ot],u.hasOwnProperty(ot)&&ve!==void 0&&!v.hasOwnProperty(ot)&&zh(n,i,ot,void 0,v,ve);for(ke in v)ve=v[ke],be=u[ke],!v.hasOwnProperty(ke)||ve===be||ve===void 0&&be===void 0||zh(n,i,ke,ve,v,be);return}}for(var pe in u)ve=u[pe],u.hasOwnProperty(pe)&&ve!=null&&!v.hasOwnProperty(pe)&&at(n,i,pe,null,v,ve);for(_e in v)ve=v[_e],be=u[_e],!v.hasOwnProperty(_e)||ve===be||ve==null&&be==null||at(n,i,_e,ve,v,be)}var Bh=null,Ih=null;function Ll(n){return n.nodeType===9?n:n.ownerDocument}function Vx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ux(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Vh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Uh=null;function PC(){var n=window.event;return n&&n.type==="popstate"?n===Uh?!1:(Uh=n,!0):(Uh=null,!1)}var Hx=typeof setTimeout=="function"?setTimeout:void 0,LC=typeof clearTimeout=="function"?clearTimeout:void 0,$x=typeof Promise=="function"?Promise:void 0,FC=typeof queueMicrotask=="function"?queueMicrotask:typeof $x<"u"?function(n){return $x.resolve(null).then(n).catch(zC)}:Hx;function zC(n){setTimeout(function(){throw n})}function Gi(n){return n==="head"}function Xx(n,i){var u=i,v=0,T=0;do{var _=u.nextSibling;if(n.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(0<v&&8>v){u=v;var P=n.ownerDocument;if(u&1&&Da(P.documentElement),u&2&&Da(P.body),u&4)for(u=P.head,Da(u),P=u.firstChild;P;){var U=P.nextSibling,se=P.nodeName;P[Gs]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&P.rel.toLowerCase()==="stylesheet"||u.removeChild(P),P=U}}if(T===0){n.removeChild(_),Ia(i);return}T--}else u==="$"||u==="$?"||u==="$!"?T++:v=u.charCodeAt(0)-48;else v=0;u=_}while(u);Ia(i)}function Hh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var u=i;switch(i=i.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Hh(u),qc(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}n.removeChild(u)}}function BC(n,i,u,v){for(;n.nodeType===1;){var T=u;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!v&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(v){if(!n[Gs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==T.rel||n.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||n.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||n.getAttribute("title")!==(T.title==null?null:T.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(T.src==null?null:T.src)||n.getAttribute("type")!==(T.type==null?null:T.type)||n.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var _=T.name==null?null:""+T.name;if(T.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=zn(n.nextSibling),n===null)break}return null}function IC(n,i,u){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!u||(n=zn(n.nextSibling),n===null))return null;return n}function $h(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function VC(n,i){var u=n.ownerDocument;if(n.data!=="$?"||u.readyState==="complete")i();else{var v=function(){i(),u.removeEventListener("DOMContentLoaded",v)};u.addEventListener("DOMContentLoaded",v),n._reactRetry=v}}function zn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Xh=null;function Yx(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return n;i--}else u==="/$"&&i++}n=n.previousSibling}return null}function Gx(n,i,u){switch(i=Ll(u),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Da(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);qc(n)}var Mn=new Map,qx=new Set;function Fl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var bi=q.d;q.d={f:UC,r:HC,D:$C,C:XC,L:YC,m:GC,X:WC,S:qC,M:KC};function UC(){var n=bi.f(),i=El();return n||i}function HC(n){var i=Ur(n);i!==null&&i.tag===5&&i.type==="form"?mp(i):bi.r(n)}var Ss=typeof document>"u"?null:document;function Wx(n,i,u){var v=Ss;if(v&&typeof i=="string"&&i){var T=Sn(i);T='link[rel="'+n+'"][href="'+T+'"]',typeof u=="string"&&(T+='[crossorigin="'+u+'"]'),qx.has(T)||(qx.add(T),n={rel:n,crossOrigin:u,href:i},v.querySelector(T)===null&&(i=v.createElement("link"),Vt(i,"link",n),Rt(i),v.head.appendChild(i)))}}function $C(n){bi.D(n),Wx("dns-prefetch",n,null)}function XC(n,i){bi.C(n,i),Wx("preconnect",n,i)}function YC(n,i,u){bi.L(n,i,u);var v=Ss;if(v&&n&&i){var T='link[rel="preload"][as="'+Sn(i)+'"]';i==="image"&&u&&u.imageSrcSet?(T+='[imagesrcset="'+Sn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(T+='[imagesizes="'+Sn(u.imageSizes)+'"]')):T+='[href="'+Sn(n)+'"]';var _=T;switch(i){case"style":_=Cs(n);break;case"script":_=Ts(n)}Mn.has(_)||(n=d({rel:"preload",href:i==="image"&&u&&u.imageSrcSet?void 0:n,as:i},u),Mn.set(_,n),v.querySelector(T)!==null||i==="style"&&v.querySelector(Aa(_))||i==="script"&&v.querySelector(Ra(_))||(i=v.createElement("link"),Vt(i,"link",n),Rt(i),v.head.appendChild(i)))}}function GC(n,i){bi.m(n,i);var u=Ss;if(u&&n){var v=i&&typeof i.as=="string"?i.as:"script",T='link[rel="modulepreload"][as="'+Sn(v)+'"][href="'+Sn(n)+'"]',_=T;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ts(n)}if(!Mn.has(_)&&(n=d({rel:"modulepreload",href:n},i),Mn.set(_,n),u.querySelector(T)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ra(_)))return}v=u.createElement("link"),Vt(v,"link",n),Rt(v),u.head.appendChild(v)}}}function qC(n,i,u){bi.S(n,i,u);var v=Ss;if(v&&n){var T=Hr(v).hoistableStyles,_=Cs(n);i=i||"default";var P=T.get(_);if(!P){var U={loading:0,preload:null};if(P=v.querySelector(Aa(_)))U.loading=5;else{n=d({rel:"stylesheet",href:n,"data-precedence":i},u),(u=Mn.get(_))&&Yh(n,u);var se=P=v.createElement("link");Rt(se),Vt(se,"link",n),se._p=new Promise(function(ye,ke){se.onload=ye,se.onerror=ke}),se.addEventListener("load",function(){U.loading|=1}),se.addEventListener("error",function(){U.loading|=2}),U.loading|=4,zl(P,i,v)}P={type:"stylesheet",instance:P,count:1,state:U},T.set(_,P)}}}function WC(n,i){bi.X(n,i);var u=Ss;if(u&&n){var v=Hr(u).hoistableScripts,T=Ts(n),_=v.get(T);_||(_=u.querySelector(Ra(T)),_||(n=d({src:n,async:!0},i),(i=Mn.get(T))&&Gh(n,i),_=u.createElement("script"),Rt(_),Vt(_,"link",n),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(T,_))}}function KC(n,i){bi.M(n,i);var u=Ss;if(u&&n){var v=Hr(u).hoistableScripts,T=Ts(n),_=v.get(T);_||(_=u.querySelector(Ra(T)),_||(n=d({src:n,async:!0,type:"module"},i),(i=Mn.get(T))&&Gh(n,i),_=u.createElement("script"),Rt(_),Vt(_,"link",n),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},v.set(T,_))}}function Kx(n,i,u,v){var T=(T=J.current)?Fl(T):null;if(!T)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(i=Cs(u.href),u=Hr(T).hoistableStyles,v=u.get(i),v||(v={type:"style",instance:null,count:0,state:null},u.set(i,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){n=Cs(u.href);var _=Hr(T).hoistableStyles,P=_.get(n);if(P||(T=T.ownerDocument||T,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,P),(_=T.querySelector(Aa(n)))&&!_._p&&(P.instance=_,P.state.loading=5),Mn.has(n)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Mn.set(n,u),_||ZC(T,n,u,P.state))),i&&v===null)throw Error(o(528,""));return P}if(i&&v!==null)throw Error(o(529,""));return null;case"script":return i=u.async,u=u.src,typeof u=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ts(u),u=Hr(T).hoistableScripts,v=u.get(i),v||(v={type:"script",instance:null,count:0,state:null},u.set(i,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Cs(n){return'href="'+Sn(n)+'"'}function Aa(n){return'link[rel="stylesheet"]['+n+"]"}function Zx(n){return d({},n,{"data-precedence":n.precedence,precedence:null})}function ZC(n,i,u,v){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?v.loading=1:(i=n.createElement("link"),v.preload=i,i.addEventListener("load",function(){return v.loading|=1}),i.addEventListener("error",function(){return v.loading|=2}),Vt(i,"link",u),Rt(i),n.head.appendChild(i))}function Ts(n){return'[src="'+Sn(n)+'"]'}function Ra(n){return"script[async]"+n}function Qx(n,i,u){if(i.count++,i.instance===null)switch(i.type){case"style":var v=n.querySelector('style[data-href~="'+Sn(u.href)+'"]');if(v)return i.instance=v,Rt(v),v;var T=d({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return v=(n.ownerDocument||n).createElement("style"),Rt(v),Vt(v,"style",T),zl(v,u.precedence,n),i.instance=v;case"stylesheet":T=Cs(u.href);var _=n.querySelector(Aa(T));if(_)return i.state.loading|=4,i.instance=_,Rt(_),_;v=Zx(u),(T=Mn.get(T))&&Yh(v,T),_=(n.ownerDocument||n).createElement("link"),Rt(_);var P=_;return P._p=new Promise(function(U,se){P.onload=U,P.onerror=se}),Vt(_,"link",v),i.state.loading|=4,zl(_,u.precedence,n),i.instance=_;case"script":return _=Ts(u.src),(T=n.querySelector(Ra(_)))?(i.instance=T,Rt(T),T):(v=u,(T=Mn.get(_))&&(v=d({},u),Gh(v,T)),n=n.ownerDocument||n,T=n.createElement("script"),Rt(T),Vt(T,"link",v),n.head.appendChild(T),i.instance=T);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(v=i.instance,i.state.loading|=4,zl(v,u.precedence,n));return i.instance}function zl(n,i,u){for(var v=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=v.length?v[v.length-1]:null,_=T,P=0;P<v.length;P++){var U=v[P];if(U.dataset.precedence===i)_=U;else if(_!==T)break}_?_.parentNode.insertBefore(n,_.nextSibling):(i=u.nodeType===9?u.head:u,i.insertBefore(n,i.firstChild))}function Yh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Gh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Bl=null;function Jx(n,i,u){if(Bl===null){var v=new Map,T=Bl=new Map;T.set(u,v)}else T=Bl,v=T.get(u),v||(v=new Map,T.set(u,v));if(v.has(n))return v;for(v.set(n,null),u=u.getElementsByTagName(n),T=0;T<u.length;T++){var _=u[T];if(!(_[Gs]||_[Yt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(i)||"";P=n+P;var U=v.get(P);U?U.push(_):v.set(P,[_])}}return v}function e0(n,i,u){n=n.ownerDocument||n,n.head.insertBefore(u,i==="title"?n.querySelector("head > title"):null)}function QC(n,i,u){if(u===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function t0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Pa=null;function JC(){}function e2(n,i,u){if(Pa===null)throw Error(o(475));var v=Pa;if(i.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var T=Cs(u.href),_=n.querySelector(Aa(T));if(_){n=_._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(v.count++,v=Il.bind(v),n.then(v,v)),i.state.loading|=4,i.instance=_,Rt(_);return}_=n.ownerDocument||n,u=Zx(u),(T=Mn.get(T))&&Yh(u,T),_=_.createElement("link"),Rt(_);var P=_;P._p=new Promise(function(U,se){P.onload=U,P.onerror=se}),Vt(_,"link",u),i.instance=_}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(v.count++,i=Il.bind(v),n.addEventListener("load",i),n.addEventListener("error",i))}}function t2(){if(Pa===null)throw Error(o(475));var n=Pa;return n.stylesheets&&n.count===0&&qh(n,n.stylesheets),0<n.count?function(i){var u=setTimeout(function(){if(n.stylesheets&&qh(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(u)}}:null}function Il(){if(this.count--,this.count===0){if(this.stylesheets)qh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vl=null;function qh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vl=new Map,i.forEach(n2,n),Vl=null,Il.call(n))}function n2(n,i){if(!(i.state.loading&4)){var u=Vl.get(n);if(u)var v=u.get(null);else{u=new Map,Vl.set(n,u);for(var T=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<T.length;_++){var P=T[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),v=P)}v&&u.set(null,v)}T=i.instance,P=T.getAttribute("data-precedence"),_=u.get(P)||v,_===v&&u.set(null,T),u.set(P,T),this.count++,v=Il.bind(this),T.addEventListener("load",v),T.addEventListener("error",v),_?_.parentNode.insertBefore(T,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(T,n.firstChild)),i.state.loading|=4}}var La={$$typeof:k,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function i2(n,i,u,v,T,_,P,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$c(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.hiddenUpdates=$c(null),this.identifierPrefix=v,this.onUncaughtError=T,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function n0(n,i,u,v,T,_,P,U,se,ye,ke,_e){return n=new i2(n,i,u,P,U,se,ye,_e),i=1,_===!0&&(i|=24),_=fn(3,null,null,i),n.current=_,_.stateNode=n,i=Mu(),i.refCount++,n.pooledCache=i,i.refCount++,_.memoizedState={element:v,isDehydrated:u,cache:i},Au(_),n}function i0(n){return n?(n=ts,n):ts}function r0(n,i,u,v,T,_){T=i0(T),v.context===null?v.context=T:v.pendingContext=T,v=Ri(i),v.payload={element:u},_=_===void 0?null:_,_!==null&&(v.callback=_),u=Pi(n,v,i),u!==null&&(yn(u,n,i),da(u,n,i))}function s0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<i?u:i}}function Wh(n,i){s0(n,i),(n=n.alternate)&&s0(n,i)}function a0(n){if(n.tag===13){var i=es(n,67108864);i!==null&&yn(i,n,67108864),Wh(n,67108864)}}var Ul=!0;function r2(n,i,u,v){var T=z.T;z.T=null;var _=q.p;try{q.p=2,Kh(n,i,u,v)}finally{q.p=_,z.T=T}}function s2(n,i,u,v){var T=z.T;z.T=null;var _=q.p;try{q.p=8,Kh(n,i,u,v)}finally{q.p=_,z.T=T}}function Kh(n,i,u,v){if(Ul){var T=Zh(v);if(T===null)Fh(n,i,v,Hl,u),l0(n,v);else if(o2(T,n,i,u,v))v.stopPropagation();else if(l0(n,v),i&4&&-1<a2.indexOf(n)){for(;T!==null;){var _=Ur(T);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=Pn(_.pendingLanes);if(P!==0){var U=_;for(U.pendingLanes|=2,U.entangledLanes|=2;P;){var se=1<<31-Ue(P);U.entanglements[1]|=se,P&=~se}Wn(_),(it&6)===0&&(jl=he()+500,Ma(0))}}break;case 13:U=es(_,2),U!==null&&yn(U,_,2),El(),Wh(_,2)}if(_=Zh(v),_===null&&Fh(n,i,v,Hl,u),_===T)break;T=_}T!==null&&v.stopPropagation()}else Fh(n,i,v,null,u)}}function Zh(n){return n=nu(n),Qh(n)}var Hl=null;function Qh(n){if(Hl=null,n=Vr(n),n!==null){var i=b(n);if(i===null)n=null;else{var u=i.tag;if(u===13){if(n=C(i),n!==null)return n;n=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Hl=n,null}function o0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Se:return 2;case $:return 8;case ne:case ee:return 32;case we:return 268435456;default:return 32}default:return 32}}var Jh=!1,qi=null,Wi=null,Ki=null,Fa=new Map,za=new Map,Zi=[],a2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l0(n,i){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Fa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(i.pointerId)}}function Ba(n,i,u,v,T,_){return n===null||n.nativeEvent!==_?(n={blockedOn:i,domEventName:u,eventSystemFlags:v,nativeEvent:_,targetContainers:[T]},i!==null&&(i=Ur(i),i!==null&&a0(i)),n):(n.eventSystemFlags|=v,i=n.targetContainers,T!==null&&i.indexOf(T)===-1&&i.push(T),n)}function o2(n,i,u,v,T){switch(i){case"focusin":return qi=Ba(qi,n,i,u,v,T),!0;case"dragenter":return Wi=Ba(Wi,n,i,u,v,T),!0;case"mouseover":return Ki=Ba(Ki,n,i,u,v,T),!0;case"pointerover":var _=T.pointerId;return Fa.set(_,Ba(Fa.get(_)||null,n,i,u,v,T)),!0;case"gotpointercapture":return _=T.pointerId,za.set(_,Ba(za.get(_)||null,n,i,u,v,T)),!0}return!1}function c0(n){var i=Vr(n.target);if(i!==null){var u=b(i);if(u!==null){if(i=u.tag,i===13){if(i=C(u),i!==null){n.blockedOn=i,eS(n.priority,function(){if(u.tag===13){var v=xn();v=Xc(v);var T=es(u,v);T!==null&&yn(T,u,v),Wh(u,v)}});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $l(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var u=Zh(n.nativeEvent);if(u===null){u=n.nativeEvent;var v=new u.constructor(u.type,u);tu=v,u.target.dispatchEvent(v),tu=null}else return i=Ur(u),i!==null&&a0(i),n.blockedOn=u,!1;i.shift()}return!0}function u0(n,i,u){$l(n)&&u.delete(i)}function l2(){Jh=!1,qi!==null&&$l(qi)&&(qi=null),Wi!==null&&$l(Wi)&&(Wi=null),Ki!==null&&$l(Ki)&&(Ki=null),Fa.forEach(u0),za.forEach(u0)}function Xl(n,i){n.blockedOn===i&&(n.blockedOn=null,Jh||(Jh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,l2)))}var Yl=null;function h0(n){Yl!==n&&(Yl=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Yl===n&&(Yl=null);for(var i=0;i<n.length;i+=3){var u=n[i],v=n[i+1],T=n[i+2];if(typeof v!="function"){if(Qh(v||u)===null)continue;break}var _=Ur(u);_!==null&&(n.splice(i,3),i-=3,Qu(_,{pending:!0,data:T,method:u.method,action:v},v,T))}}))}function Ia(n){function i(se){return Xl(se,n)}qi!==null&&Xl(qi,n),Wi!==null&&Xl(Wi,n),Ki!==null&&Xl(Ki,n),Fa.forEach(i),za.forEach(i);for(var u=0;u<Zi.length;u++){var v=Zi[u];v.blockedOn===n&&(v.blockedOn=null)}for(;0<Zi.length&&(u=Zi[0],u.blockedOn===null);)c0(u),u.blockedOn===null&&Zi.shift();if(u=(n.ownerDocument||n).$$reactFormReplay,u!=null)for(v=0;v<u.length;v+=3){var T=u[v],_=u[v+1],P=T[sn]||null;if(typeof _=="function")P||h0(u);else if(P){var U=null;if(_&&_.hasAttribute("formAction")){if(T=_,P=_[sn]||null)U=P.formAction;else if(Qh(T)!==null)continue}else U=P.action;typeof U=="function"?u[v+1]=U:(u.splice(v,3),v-=3),h0(u)}}}function ed(n){this._internalRoot=n}Gl.prototype.render=ed.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var u=i.current,v=xn();r0(u,v,n,i,null,null)},Gl.prototype.unmount=ed.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;r0(n.current,2,null,n,null,null),El(),i[Ir]=null}};function Gl(n){this._internalRoot=n}Gl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Em();n={blockedOn:null,target:n,priority:i};for(var u=0;u<Zi.length&&i!==0&&i<Zi[u].priority;u++);Zi.splice(u,0,n),u===0&&c0(n)}};var d0=e.version;if(d0!=="19.1.0")throw Error(o(527,d0,"19.1.0"));q.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=s(i),n=n!==null?h(n):null,n=n===null?null:n.stateNode,n};var c2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Ee=ql.inject(c2),Ne=ql}catch{}}return Ua.createRoot=function(n,i){if(!x(n))throw Error(o(299));var u=!1,v="",T=Ep,_=Mp,P=Np,U=null;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(v=i.identifierPrefix),i.onUncaughtError!==void 0&&(T=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(U=i.unstable_transitionCallbacks)),i=n0(n,1,!1,null,null,u,v,T,_,P,U,null),n[Ir]=i.current,Lh(n),new ed(i)},Ua.hydrateRoot=function(n,i,u){if(!x(n))throw Error(o(299));var v=!1,T="",_=Ep,P=Mp,U=Np,se=null,ye=null;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(se=u.unstable_transitionCallbacks),u.formState!==void 0&&(ye=u.formState)),i=n0(n,1,!0,i,u??null,v,T,_,P,U,se,ye),i.context=i0(null),u=i.current,v=xn(),v=Xc(v),T=Ri(v),T.callback=null,Pi(u,T,v),u=v,i.current.lanes=u,Ys(i,u),Wn(i),n[Ir]=i.current,Lh(n),new Gl(i)},Ua.version="19.1.0",Ua}var S0;function b2(){if(S0)return id.exports;S0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),id.exports=v2(),id.exports}var w2=b2();const S2=wf(w2);var Ha={},C0;function C2(){if(C0)return Ha;C0=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.parse=C,Ha.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,x=Object.prototype.toString,b=(()=>{const l=function(){};return l.prototype=Object.create(null),l})();function C(l,c){const m=new b,y=l.length;if(y<2)return m;const g=(c==null?void 0:c.decode)||d;let w=0;do{const S=l.indexOf("=",w);if(S===-1)break;const k=l.indexOf(";",w),j=k===-1?y:k;if(S>j){w=l.lastIndexOf(";",S-1)+1;continue}const M=f(l,w,S),N=s(l,S,M),D=l.slice(M,N);if(m[D]===void 0){let A=f(l,S+1,j),B=s(l,j,A);const Y=g(l.slice(A,B));m[D]=Y}w=j+1}while(w<y);return m}function f(l,c,m){do{const y=l.charCodeAt(c);if(y!==32&&y!==9)return c}while(++c<m);return m}function s(l,c,m){for(;c>m;){const y=l.charCodeAt(--c);if(y!==32&&y!==9)return c+1}return m}function h(l,c,m){const y=(m==null?void 0:m.encode)||encodeURIComponent;if(!t.test(l))throw new TypeError(`argument name is invalid: ${l}`);const g=y(c);if(!e.test(g))throw new TypeError(`argument val is invalid: ${c}`);let w=l+"="+g;if(!m)return w;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);w+="; Max-Age="+m.maxAge}if(m.domain){if(!r.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);w+="; Domain="+m.domain}if(m.path){if(!o.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);w+="; Path="+m.path}if(m.expires){if(!a(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);w+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(w+="; HttpOnly"),m.secure&&(w+="; Secure"),m.partitioned&&(w+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return w}function d(l){if(l.indexOf("%")===-1)return l;try{return decodeURIComponent(l)}catch{return l}}function a(l){return x.call(l)==="[object Date]"}return Ha}C2();var T0="popstate";function T2(t={}){function e(x,b){let{pathname:C="/",search:f="",hash:s=""}=zs(x.location.hash.substring(1));return!C.startsWith("/")&&!C.startsWith(".")&&(C="/"+C),Fd("",{pathname:C,search:f,hash:s},b.state&&b.state.usr||null,b.state&&b.state.key||"default")}function r(x,b){let C=x.document.querySelector("base"),f="";if(C&&C.getAttribute("href")){let s=x.location.href,h=s.indexOf("#");f=h===-1?s:s.slice(0,h)}return f+"#"+(typeof b=="string"?b:fo(b))}function o(x,b){Hn(x.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(b)})`)}return j2(e,r,o,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k2(){return Math.random().toString(36).substring(2,10)}function k0(t,e){return{usr:t.state,key:t.key,idx:e}}function Fd(t,e,r=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zs(e):e,state:r,key:e&&e.key||o||k2()}}function fo({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zs(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function j2(t,e,r,o={}){let{window:x=document.defaultView,v5Compat:b=!1}=o,C=x.history,f="POP",s=null,h=d();h==null&&(h=0,C.replaceState({...C.state,idx:h},""));function d(){return(C.state||{idx:null}).idx}function a(){f="POP";let g=d(),w=g==null?null:g-h;h=g,s&&s({action:f,location:y.location,delta:w})}function l(g,w){f="PUSH";let S=Fd(y.location,g,w);r&&r(S,g),h=d()+1;let k=k0(S,h),j=y.createHref(S);try{C.pushState(k,"",j)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;x.location.assign(j)}b&&s&&s({action:f,location:y.location,delta:1})}function c(g,w){f="REPLACE";let S=Fd(y.location,g,w);r&&r(S,g),h=d();let k=k0(S,h),j=y.createHref(S);C.replaceState(k,"",j),b&&s&&s({action:f,location:y.location,delta:0})}function m(g){let w=x.location.origin!=="null"?x.location.origin:x.location.href,S=typeof g=="string"?g:fo(g);return S=S.replace(/ $/,"%20"),At(w,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,w)}let y={get action(){return f},get location(){return t(x,C)},listen(g){if(s)throw new Error("A history only accepts one active listener");return x.addEventListener(T0,a),s=g,()=>{x.removeEventListener(T0,a),s=null}},createHref(g){return e(x,g)},createURL:m,encodeLocation(g){let w=m(g);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:l,replace:c,go(g){return C.go(g)}};return y}function Wv(t,e,r="/"){return _2(t,e,r,!1)}function _2(t,e,r,o){let x=typeof e=="string"?zs(e):e,b=ji(x.pathname||"/",r);if(b==null)return null;let C=Kv(t);E2(C);let f=null;for(let s=0;f==null&&s<C.length;++s){let h=B2(b);f=F2(C[s],h,o)}return f}function Kv(t,e=[],r=[],o=""){let x=(b,C,f)=>{let s={relativePath:f===void 0?b.path||"":f,caseSensitive:b.caseSensitive===!0,childrenIndex:C,route:b};s.relativePath.startsWith("/")&&(At(s.relativePath.startsWith(o),`Absolute route path "${s.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(o.length));let h=ki([o,s.relativePath]),d=r.concat(s);b.children&&b.children.length>0&&(At(b.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Kv(b.children,e,d,h)),!(b.path==null&&!b.index)&&e.push({path:h,score:P2(h,b.index),routesMeta:d})};return t.forEach((b,C)=>{var f;if(b.path===""||!((f=b.path)!=null&&f.includes("?")))x(b,C);else for(let s of Zv(b.path))x(b,C,s)}),e}function Zv(t){let e=t.split("/");if(e.length===0)return[];let[r,...o]=e,x=r.endsWith("?"),b=r.replace(/\?$/,"");if(o.length===0)return x?[b,""]:[b];let C=Zv(o.join("/")),f=[];return f.push(...C.map(s=>s===""?b:[b,s].join("/"))),x&&f.push(...C),f.map(s=>t.startsWith("/")&&s===""?"/":s)}function E2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:L2(e.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var M2=/^:[\w-]+$/,N2=3,O2=2,D2=1,A2=10,R2=-2,j0=t=>t==="*";function P2(t,e){let r=t.split("/"),o=r.length;return r.some(j0)&&(o+=R2),e&&(o+=O2),r.filter(x=>!j0(x)).reduce((x,b)=>x+(M2.test(b)?N2:b===""?D2:A2),o)}function L2(t,e){return t.length===e.length&&t.slice(0,-1).every((o,x)=>o===e[x])?t[t.length-1]-e[e.length-1]:0}function F2(t,e,r=!1){let{routesMeta:o}=t,x={},b="/",C=[];for(let f=0;f<o.length;++f){let s=o[f],h=f===o.length-1,d=b==="/"?e:e.slice(b.length)||"/",a=fc({path:s.relativePath,caseSensitive:s.caseSensitive,end:h},d),l=s.route;if(!a&&h&&r&&!o[o.length-1].route.index&&(a=fc({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},d)),!a)return null;Object.assign(x,a.params),C.push({params:x,pathname:ki([b,a.pathname]),pathnameBase:H2(ki([b,a.pathnameBase])),route:l}),a.pathnameBase!=="/"&&(b=ki([b,a.pathnameBase]))}return C}function fc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,o]=z2(t.path,t.caseSensitive,t.end),x=e.match(r);if(!x)return null;let b=x[0],C=b.replace(/(.)\/+$/,"$1"),f=x.slice(1);return{params:o.reduce((h,{paramName:d,isOptional:a},l)=>{if(d==="*"){let m=f[l]||"";C=b.slice(0,b.length-m.length).replace(/(.)\/+$/,"$1")}const c=f[l];return a&&!c?h[d]=void 0:h[d]=(c||"").replace(/%2F/g,"/"),h},{}),pathname:b,pathnameBase:C,pattern:t}}function z2(t,e=!1,r=!0){Hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],x="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,f,s)=>(o.push({paramName:f,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),x+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?x+="\\/*$":t!==""&&t!=="/"&&(x+="(?:(?=\\/|$))"),[new RegExp(x,e?void 0:"i"),o]}function B2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ji(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,o=t.charAt(r);return o&&o!=="/"?null:t.slice(r)||"/"}function I2(t,e="/"){let{pathname:r,search:o="",hash:x=""}=typeof t=="string"?zs(t):t;return{pathname:r?r.startsWith("/")?r:V2(r,e):e,search:$2(o),hash:X2(x)}}function V2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(x=>{x===".."?r.length>1&&r.pop():x!=="."&&r.push(x)}),r.length>1?r.join("/"):"/"}function od(t,e,r,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function U2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Qv(t){let e=U2(t);return e.map((r,o)=>o===e.length-1?r.pathname:r.pathnameBase)}function Jv(t,e,r,o=!1){let x;typeof t=="string"?x=zs(t):(x={...t},At(!x.pathname||!x.pathname.includes("?"),od("?","pathname","search",x)),At(!x.pathname||!x.pathname.includes("#"),od("#","pathname","hash",x)),At(!x.search||!x.search.includes("#"),od("#","search","hash",x)));let b=t===""||x.pathname==="",C=b?"/":x.pathname,f;if(C==null)f=r;else{let a=e.length-1;if(!o&&C.startsWith("..")){let l=C.split("/");for(;l[0]==="..";)l.shift(),a-=1;x.pathname=l.join("/")}f=a>=0?e[a]:"/"}let s=I2(x,f),h=C&&C!=="/"&&C.endsWith("/"),d=(b||C===".")&&r.endsWith("/");return!s.pathname.endsWith("/")&&(h||d)&&(s.pathname+="/"),s}var ki=t=>t.join("/").replace(/\/\/+/g,"/"),H2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,X2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var eb=["POST","PUT","PATCH","DELETE"];new Set(eb);var G2=["GET",...eb];new Set(G2);var Bs=E.createContext(null);Bs.displayName="DataRouter";var Mc=E.createContext(null);Mc.displayName="DataRouterState";var tb=E.createContext({isTransitioning:!1});tb.displayName="ViewTransition";var q2=E.createContext(new Map);q2.displayName="Fetchers";var W2=E.createContext(null);W2.displayName="Await";var ii=E.createContext(null);ii.displayName="Navigation";var Nc=E.createContext(null);Nc.displayName="Location";var ri=E.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var Cf=E.createContext(null);Cf.displayName="RouteError";function K2(t,{relative:e}={}){At(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=E.useContext(ii),{hash:x,pathname:b,search:C}=_o(t,{relative:e}),f=b;return r!=="/"&&(f=b==="/"?r:ki([r,b])),o.createHref({pathname:f,search:C,hash:x})}function jo(){return E.useContext(Nc)!=null}function ar(){return At(jo(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Nc).location}var nb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ib(t){E.useContext(ii).static||E.useLayoutEffect(t)}function Z2(){let{isDataRoute:t}=E.useContext(ri);return t?dT():Q2()}function Q2(){At(jo(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(Bs),{basename:e,navigator:r}=E.useContext(ii),{matches:o}=E.useContext(ri),{pathname:x}=ar(),b=JSON.stringify(Qv(o)),C=E.useRef(!1);return ib(()=>{C.current=!0}),E.useCallback((s,h={})=>{if(Hn(C.current,nb),!C.current)return;if(typeof s=="number"){r.go(s);return}let d=Jv(s,JSON.parse(b),x,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ki([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,b,x,t])}var J2=E.createContext(null);function eT(t){let e=E.useContext(ri).outlet;return e&&E.createElement(J2.Provider,{value:t},e)}function _o(t,{relative:e}={}){let{matches:r}=E.useContext(ri),{pathname:o}=ar(),x=JSON.stringify(Qv(r));return E.useMemo(()=>Jv(t,JSON.parse(x),o,e==="path"),[t,x,o,e])}function tT(t,e){return rb(t)}function rb(t,e,r,o){At(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x,static:b}=E.useContext(ii),{matches:C}=E.useContext(ri),f=C[C.length-1],s=f?f.params:{},h=f?f.pathname:"/",d=f?f.pathnameBase:"/",a=f&&f.route;{let S=a&&a.path||"";sb(h,!a||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let l=ar(),c;c=l;let m=c.pathname||"/",y=m;if(d!=="/"){let S=d.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let g=!b&&r&&r.matches&&r.matches.length>0?r.matches:Wv(t,{pathname:y});return Hn(a||g!=null,`No routes matched location "${c.pathname}${c.search}${c.hash}" `),Hn(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${c.pathname}${c.search}${c.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),aT(g&&g.map(S=>Object.assign({},S,{params:Object.assign({},s,S.params),pathname:ki([d,x.encodeLocation?x.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:ki([d,x.encodeLocation?x.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),C,r,o)}function nT(){let t=hT(),e=Y2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",x={padding:"0.5rem",backgroundColor:o},b={padding:"2px 4px",backgroundColor:o},C=null;return console.error("Error handled by React Router default ErrorBoundary:",t),C=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:b},"ErrorBoundary")," or"," ",E.createElement("code",{style:b},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),r?E.createElement("pre",{style:x},r):null,C)}var iT=E.createElement(nT,null),rT=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?E.createElement(ri.Provider,{value:this.props.routeContext},E.createElement(Cf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sT({routeContext:t,match:e,children:r}){let o=E.useContext(Bs);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ri.Provider,{value:t},r)}function aT(t,e=[],r=null,o=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let x=t,b=r==null?void 0:r.errors;if(b!=null){let s=x.findIndex(h=>h.route.id&&(b==null?void 0:b[h.route.id])!==void 0);At(s>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(b).join(",")}`),x=x.slice(0,Math.min(x.length,s+1))}let C=!1,f=-1;if(r)for(let s=0;s<x.length;s++){let h=x[s];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=s),h.route.id){let{loaderData:d,errors:a}=r,l=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!a||a[h.route.id]===void 0);if(h.route.lazy||l){C=!0,f>=0?x=x.slice(0,f+1):x=[x[0]];break}}}return x.reduceRight((s,h,d)=>{let a,l=!1,c=null,m=null;r&&(a=b&&h.route.id?b[h.route.id]:void 0,c=h.route.errorElement||iT,C&&(f<0&&d===0?(sb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),l=!0,m=null):f===d&&(l=!0,m=h.route.hydrateFallbackElement||null)));let y=e.concat(x.slice(0,d+1)),g=()=>{let w;return a?w=c:l?w=m:h.route.Component?w=E.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=s,E.createElement(sT,{match:h,routeContext:{outlet:s,matches:y,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?E.createElement(rT,{location:r.location,revalidation:r.revalidation,component:c,error:a,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}function Tf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oT(t){let e=E.useContext(Bs);return At(e,Tf(t)),e}function lT(t){let e=E.useContext(Mc);return At(e,Tf(t)),e}function cT(t){let e=E.useContext(ri);return At(e,Tf(t)),e}function kf(t){let e=cT(t),r=e.matches[e.matches.length-1];return At(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function uT(){return kf("useRouteId")}function hT(){var o;let t=E.useContext(Cf),e=lT("useRouteError"),r=kf("useRouteError");return t!==void 0?t:(o=e.errors)==null?void 0:o[r]}function dT(){let{router:t}=oT("useNavigate"),e=kf("useNavigate"),r=E.useRef(!1);return ib(()=>{r.current=!0}),E.useCallback(async(x,b={})=>{Hn(r.current,nb),r.current&&(typeof x=="number"?t.navigate(x):await t.navigate(x,{fromRouteId:e,...b}))},[t,e])}var _0={};function sb(t,e,r){!e&&!_0[t]&&(_0[t]=!0,Hn(!1,r))}E.memo(fT);function fT({routes:t,future:e,state:r}){return rb(t,void 0,r,e)}function mT(t){return eT(t.context)}function gT({basename:t="/",children:e=null,location:r,navigationType:o="POP",navigator:x,static:b=!1}){At(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=t.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:C,navigator:x,static:b,future:{}}),[C,x,b]);typeof r=="string"&&(r=zs(r));let{pathname:s="/",search:h="",hash:d="",state:a=null,key:l="default"}=r,c=E.useMemo(()=>{let m=ji(s,C);return m==null?null:{location:{pathname:m,search:h,hash:d,state:a,key:l},navigationType:o}},[C,s,h,d,a,l,o]);return Hn(c!=null,`<Router basename="${C}"> is not able to match the URL "${s}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),c==null?null:E.createElement(ii.Provider,{value:f},E.createElement(Nc.Provider,{children:e,value:c}))}var sc="get",ac="application/x-www-form-urlencoded";function Oc(t){return t!=null&&typeof t.tagName=="string"}function pT(t){return Oc(t)&&t.tagName.toLowerCase()==="button"}function xT(t){return Oc(t)&&t.tagName.toLowerCase()==="form"}function yT(t){return Oc(t)&&t.tagName.toLowerCase()==="input"}function vT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bT(t,e){return t.button===0&&(!e||e==="_self")&&!vT(t)}var Wl=null;function wT(){if(Wl===null)try{new FormData(document.createElement("form"),0),Wl=!1}catch{Wl=!0}return Wl}var ST=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ld(t){return t!=null&&!ST.has(t)?(Hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ac}"`),null):t}function CT(t,e){let r,o,x,b,C;if(xT(t)){let f=t.getAttribute("action");o=f?ji(f,e):null,r=t.getAttribute("method")||sc,x=ld(t.getAttribute("enctype"))||ac,b=new FormData(t)}else if(pT(t)||yT(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=t.getAttribute("formaction")||f.getAttribute("action");if(o=s?ji(s,e):null,r=t.getAttribute("formmethod")||f.getAttribute("method")||sc,x=ld(t.getAttribute("formenctype"))||ld(f.getAttribute("enctype"))||ac,b=new FormData(f,t),!wT()){let{name:h,type:d,value:a}=t;if(d==="image"){let l=h?`${h}.`:"";b.append(`${l}x`,"0"),b.append(`${l}y`,"0")}else h&&b.append(h,a)}}else{if(Oc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=sc,o=null,x=ac,C=t}return b&&x==="text/plain"&&(C=b,b=void 0),{action:o,method:r.toLowerCase(),encType:x,formData:b,body:C}}function jf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function TT(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kT(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jT(t,e,r){let o=await Promise.all(t.map(async x=>{let b=e.routes[x.route.id];if(b){let C=await TT(b,r);return C.links?C.links():[]}return[]}));return NT(o.flat(1).filter(kT).filter(x=>x.rel==="stylesheet"||x.rel==="preload").map(x=>x.rel==="stylesheet"?{...x,rel:"prefetch",as:"style"}:{...x,rel:"prefetch"}))}function E0(t,e,r,o,x,b){let C=(s,h)=>r[h]?s.route.id!==r[h].route.id:!0,f=(s,h)=>{var d;return r[h].pathname!==s.pathname||((d=r[h].route.path)==null?void 0:d.endsWith("*"))&&r[h].params["*"]!==s.params["*"]};return b==="assets"?e.filter((s,h)=>C(s,h)||f(s,h)):b==="data"?e.filter((s,h)=>{var a;let d=o.routes[s.route.id];if(!d||!d.hasLoader)return!1;if(C(s,h)||f(s,h))return!0;if(s.route.shouldRevalidate){let l=s.route.shouldRevalidate({currentUrl:new URL(x.pathname+x.search+x.hash,window.origin),currentParams:((a=r[0])==null?void 0:a.params)||{},nextUrl:new URL(t,window.origin),nextParams:s.params,defaultShouldRevalidate:!0});if(typeof l=="boolean")return l}return!0}):[]}function _T(t,e,{includeHydrateFallback:r}={}){return ET(t.map(o=>{let x=e.routes[o.route.id];if(!x)return[];let b=[x.module];return x.clientActionModule&&(b=b.concat(x.clientActionModule)),x.clientLoaderModule&&(b=b.concat(x.clientLoaderModule)),r&&x.hydrateFallbackModule&&(b=b.concat(x.hydrateFallbackModule)),x.imports&&(b=b.concat(x.imports)),b}).flat(1))}function ET(t){return[...new Set(t)]}function MT(t){let e={},r=Object.keys(t).sort();for(let o of r)e[o]=t[o];return e}function NT(t,e){let r=new Set;return new Set(e),t.reduce((o,x)=>{let b=JSON.stringify(MT(x));return r.has(b)||(r.add(b),o.push({key:b,link:x})),o},[])}var OT=new Set([100,101,204,205]);function DT(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&ji(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function ab(){let t=E.useContext(Bs);return jf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function AT(){let t=E.useContext(Mc);return jf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _f=E.createContext(void 0);_f.displayName="FrameworkContext";function ob(){let t=E.useContext(_f);return jf(t,"You must render this element inside a <HydratedRouter> element"),t}function RT(t,e){let r=E.useContext(_f),[o,x]=E.useState(!1),[b,C]=E.useState(!1),{onFocus:f,onBlur:s,onMouseEnter:h,onMouseLeave:d,onTouchStart:a}=e,l=E.useRef(null);E.useEffect(()=>{if(t==="render"&&C(!0),t==="viewport"){let y=w=>{w.forEach(S=>{C(S.isIntersecting)})},g=new IntersectionObserver(y,{threshold:.5});return l.current&&g.observe(l.current),()=>{g.disconnect()}}},[t]),E.useEffect(()=>{if(o){let y=setTimeout(()=>{C(!0)},100);return()=>{clearTimeout(y)}}},[o]);let c=()=>{x(!0)},m=()=>{x(!1),C(!1)};return r?t!=="intent"?[b,l,{}]:[b,l,{onFocus:$a(f,c),onBlur:$a(s,m),onMouseEnter:$a(h,c),onMouseLeave:$a(d,m),onTouchStart:$a(a,c)}]:[!1,l,{}]}function $a(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function PT({page:t,...e}){let{router:r}=ab(),o=E.useMemo(()=>Wv(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?E.createElement(FT,{page:t,matches:o,...e}):null}function LT(t){let{manifest:e,routeModules:r}=ob(),[o,x]=E.useState([]);return E.useEffect(()=>{let b=!1;return jT(t,e,r).then(C=>{b||x(C)}),()=>{b=!0}},[t,e,r]),o}function FT({page:t,matches:e,...r}){let o=ar(),{manifest:x,routeModules:b}=ob(),{basename:C}=ab(),{loaderData:f,matches:s}=AT(),h=E.useMemo(()=>E0(t,e,s,x,o,"data"),[t,e,s,x,o]),d=E.useMemo(()=>E0(t,e,s,x,o,"assets"),[t,e,s,x,o]),a=E.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let m=new Set,y=!1;if(e.forEach(w=>{var k;let S=x.routes[w.route.id];!S||!S.hasLoader||(!h.some(j=>j.route.id===w.route.id)&&w.route.id in f&&((k=b[w.route.id])!=null&&k.shouldRevalidate)||S.hasClientLoader?y=!0:m.add(w.route.id))}),m.size===0)return[];let g=DT(t,C);return y&&m.size>0&&g.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[g.pathname+g.search]},[C,f,o,x,h,e,t,b]),l=E.useMemo(()=>_T(d,x),[d,x]),c=LT(d);return E.createElement(E.Fragment,null,a.map(m=>E.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),l.map(m=>E.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),c.map(({key:m,link:y})=>E.createElement("link",{key:m,...y})))}function zT(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var lb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lb&&(window.__reactRouterVersion="7.5.3")}catch{}function BT({basename:t,children:e,window:r}){let o=E.useRef();o.current==null&&(o.current=T2({window:r,v5Compat:!0}));let x=o.current,[b,C]=E.useState({action:x.action,location:x.location}),f=E.useCallback(s=>{E.startTransition(()=>C(s))},[C]);return E.useLayoutEffect(()=>x.listen(f),[x,f]),E.createElement(gT,{basename:t,children:e,location:b.location,navigationType:b.action,navigator:x})}var cb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ef=E.forwardRef(function({onClick:e,discover:r="render",prefetch:o="none",relative:x,reloadDocument:b,replace:C,state:f,target:s,to:h,preventScrollReset:d,viewTransition:a,...l},c){let{basename:m}=E.useContext(ii),y=typeof h=="string"&&cb.test(h),g,w=!1;if(typeof h=="string"&&y&&(g=h,lb))try{let B=new URL(window.location.href),Y=h.startsWith("//")?new URL(B.protocol+h):new URL(h),oe=ji(Y.pathname,m);Y.origin===B.origin&&oe!=null?h=oe+Y.search+Y.hash:w=!0}catch{Hn(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=K2(h,{relative:x}),[k,j,M]=RT(o,l),N=UT(h,{replace:C,state:f,target:s,preventScrollReset:d,relative:x,viewTransition:a});function D(B){e&&e(B),B.defaultPrevented||N(B)}let A=E.createElement("a",{...l,...M,href:g||S,onClick:w||b?e:D,ref:zT(c,j),target:s,"data-discover":!y&&r==="render"?"true":void 0});return k&&!y?E.createElement(E.Fragment,null,A,E.createElement(PT,{page:S})):A});Ef.displayName="Link";var ub=E.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:o="",end:x=!1,style:b,to:C,viewTransition:f,children:s,...h},d){let a=_o(C,{relative:h.relative}),l=ar(),c=E.useContext(Mc),{navigator:m,basename:y}=E.useContext(ii),g=c!=null&&GT(a)&&f===!0,w=m.encodeLocation?m.encodeLocation(a).pathname:a.pathname,S=l.pathname,k=c&&c.navigation&&c.navigation.location?c.navigation.location.pathname:null;r||(S=S.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&y&&(k=ji(k,y)||k);const j=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=S===w||!x&&S.startsWith(w)&&S.charAt(j)==="/",N=k!=null&&(k===w||!x&&k.startsWith(w)&&k.charAt(w.length)==="/"),D={isActive:M,isPending:N,isTransitioning:g},A=M?e:void 0,B;typeof o=="function"?B=o(D):B=[o,M?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let Y=typeof b=="function"?b(D):b;return E.createElement(Ef,{...h,"aria-current":A,className:B,ref:d,style:Y,to:C,viewTransition:f},typeof s=="function"?s(D):s)});ub.displayName="NavLink";var IT=E.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:o,replace:x,state:b,method:C=sc,action:f,onSubmit:s,relative:h,preventScrollReset:d,viewTransition:a,...l},c)=>{let m=XT(),y=YT(f,{relative:h}),g=C.toLowerCase()==="get"?"get":"post",w=typeof f=="string"&&cb.test(f),S=k=>{if(s&&s(k),k.defaultPrevented)return;k.preventDefault();let j=k.nativeEvent.submitter,M=(j==null?void 0:j.getAttribute("formmethod"))||C;m(j||k.currentTarget,{fetcherKey:e,method:M,navigate:r,replace:x,state:b,relative:h,preventScrollReset:d,viewTransition:a})};return E.createElement("form",{ref:c,method:g,action:y,onSubmit:o?s:S,...l,"data-discover":!w&&t==="render"?"true":void 0})});IT.displayName="Form";function VT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hb(t){let e=E.useContext(Bs);return At(e,VT(t)),e}function UT(t,{target:e,replace:r,state:o,preventScrollReset:x,relative:b,viewTransition:C}={}){let f=Z2(),s=ar(),h=_o(t,{relative:b});return E.useCallback(d=>{if(bT(d,e)){d.preventDefault();let a=r!==void 0?r:fo(s)===fo(h);f(t,{replace:a,state:o,preventScrollReset:x,relative:b,viewTransition:C})}},[s,f,h,r,o,e,t,x,b,C])}var HT=0,$T=()=>`__${String(++HT)}__`;function XT(){let{router:t}=hb("useSubmit"),{basename:e}=E.useContext(ii),r=uT();return E.useCallback(async(o,x={})=>{let{action:b,method:C,encType:f,formData:s,body:h}=CT(o,e);if(x.navigate===!1){let d=x.fetcherKey||$T();await t.fetch(d,r,x.action||b,{preventScrollReset:x.preventScrollReset,formData:s,body:h,formMethod:x.method||C,formEncType:x.encType||f,flushSync:x.flushSync})}else await t.navigate(x.action||b,{preventScrollReset:x.preventScrollReset,formData:s,body:h,formMethod:x.method||C,formEncType:x.encType||f,replace:x.replace,state:x.state,fromRouteId:r,flushSync:x.flushSync,viewTransition:x.viewTransition})},[t,e,r])}function YT(t,{relative:e}={}){let{basename:r}=E.useContext(ii),o=E.useContext(ri);At(o,"useFormAction must be used inside a RouteContext");let[x]=o.matches.slice(-1),b={..._o(t||".",{relative:e})},C=ar();if(t==null){b.search=C.search;let f=new URLSearchParams(b.search),s=f.getAll("index");if(s.some(d=>d==="")){f.delete("index"),s.filter(a=>a).forEach(a=>f.append("index",a));let d=f.toString();b.search=d?`?${d}`:""}}return(!t||t===".")&&x.route.index&&(b.search=b.search?b.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(b.pathname=b.pathname==="/"?r:ki([r,b.pathname])),fo(b)}function GT(t,e={}){let r=E.useContext(tb);At(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=hb("useViewTransitionState"),x=_o(t,{relative:e.relative});if(!r.isTransitioning)return!1;let b=ji(r.currentLocation.pathname,o)||r.currentLocation.pathname,C=ji(r.nextLocation.pathname,o)||r.nextLocation.pathname;return fc(x.pathname,C)!=null||fc(x.pathname,b)!=null}new TextEncoder;[...OT];const qT=(t,e,r,o)=>{var b,C,f,s;const x=[r,{code:e,...o||{}}];if((C=(b=t==null?void 0:t.services)==null?void 0:b.logger)!=null&&C.forward)return t.services.logger.forward(x,"warn","react-i18next::",!0);Dr(x[0])&&(x[0]=`react-i18next:: ${x[0]}`),(s=(f=t==null?void 0:t.services)==null?void 0:f.logger)!=null&&s.warn?t.services.logger.warn(...x):console!=null&&console.warn&&console.warn(...x)},M0={},zd=(t,e,r,o)=>{Dr(r)&&M0[r]||(Dr(r)&&(M0[r]=new Date),qT(t,e,r,o))},db=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},Bd=(t,e,r)=>{t.loadNamespaces(e,db(t,r))},N0=(t,e,r,o)=>{if(Dr(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Bd(t,r,o);r.forEach(x=>{t.options.ns.indexOf(x)<0&&t.options.ns.push(x)}),t.loadLanguages(e,db(t,o))},WT=(t,e,r={})=>!e.languages||!e.languages.length?(zd(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(o,x)=>{var b;if(((b=r.bindI18n)==null?void 0:b.indexOf("languageChanging"))>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!x(o.isLanguageChangingTo,t))return!1}}),Dr=t=>typeof t=="string",KT=t=>typeof t=="object"&&t!==null,ZT=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,QT={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},JT=t=>QT[t],ek=t=>t.replace(ZT,JT);let Id={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:ek};const tk=(t={})=>{Id={...Id,...t}},nk=()=>Id;let fb;const ik=t=>{fb=t},rk=()=>fb,sk={type:"3rdParty",init(t){tk(t.options.react),ik(t)}},ak=E.createContext();class ok{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const lk=(t,e)=>{const r=E.useRef();return E.useEffect(()=>{r.current=t},[t,e]),r.current},mb=(t,e,r,o)=>t.getFixedT(e,r,o),ck=(t,e,r,o)=>E.useCallback(mb(t,e,r,o),[t,e,r,o]),tt=(t,e={})=>{var j,M,N,D;const{i18n:r}=e,{i18n:o,defaultNS:x}=E.useContext(ak)||{},b=r||o||rk();if(b&&!b.reportNamespaces&&(b.reportNamespaces=new ok),!b){zd(b,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const A=(Y,oe)=>Dr(oe)?oe:KT(oe)&&Dr(oe.defaultValue)?oe.defaultValue:Array.isArray(Y)?Y[Y.length-1]:Y,B=[A,{},!1];return B.t=A,B.i18n={},B.ready=!1,B}(j=b.options.react)!=null&&j.wait&&zd(b,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const C={...nk(),...b.options.react,...e},{useSuspense:f,keyPrefix:s}=C;let h=x||((M=b.options)==null?void 0:M.defaultNS);h=Dr(h)?[h]:h||["translation"],(D=(N=b.reportNamespaces).addUsedNamespaces)==null||D.call(N,h);const d=(b.isInitialized||b.initializedStoreOnce)&&h.every(A=>WT(A,b,C)),a=ck(b,e.lng||null,C.nsMode==="fallback"?h:h[0],s),l=()=>a,c=()=>mb(b,e.lng||null,C.nsMode==="fallback"?h:h[0],s),[m,y]=E.useState(l);let g=h.join();e.lng&&(g=`${e.lng}${g}`);const w=lk(g),S=E.useRef(!0);E.useEffect(()=>{const{bindI18n:A,bindI18nStore:B}=C;S.current=!0,!d&&!f&&(e.lng?N0(b,e.lng,h,()=>{S.current&&y(c)}):Bd(b,h,()=>{S.current&&y(c)})),d&&w&&w!==g&&S.current&&y(c);const Y=()=>{S.current&&y(c)};return A&&(b==null||b.on(A,Y)),B&&(b==null||b.store.on(B,Y)),()=>{S.current=!1,b&&(A==null||A.split(" ").forEach(oe=>b.off(oe,Y))),B&&b&&B.split(" ").forEach(oe=>b.store.off(oe,Y))}},[b,g]),E.useEffect(()=>{S.current&&d&&y(l)},[b,s,d]);const k=[m,b,d];if(k.t=m,k.i18n=b,k.ready=d,d||!d&&!f)return k;throw new Promise(A=>{e.lng?N0(b,e.lng,h,()=>A()):Bd(b,h,()=>A())})};function uk(){const{t}=tt();return p.jsxs("div",{className:"p-4 sm:p-6 text-text",children:[p.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-4 sm:mb-6",children:t("homePage")}),p.jsx("p",{className:"text-sm sm:text-base text-text-muted",children:t("welcome")})]})}const Kn={render:"#9C27B0",context:"#2196F3",effect:"#FF9800",websocket:"#4CAF50",performance:"#F44336",info:"#607D8B"};class hk{constructor(){this.renderCounts={},this.startTime=Date.now()}logRender(e,r={},o=""){this.renderCounts[e]=(this.renderCounts[e]||0)+1;const x=this.renderCounts[e],b=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[RENDER #${x}] %c${e} %c(${b}s)`,`color: ${Kn.render}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),o&&console.log(`  └─ Reason: ${o}`),Object.keys(r).length>0&&console.log("  └─ Props:",r),x>10&&x%5===0&&console.warn(`%c⚠️ ${e} rendered ${x} times!`,`color: ${Kn.performance}; font-weight: bold`)}logContext(e,r={}){const o=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[CONTEXT] %c${e} %c(${o}s)`,`color: ${Kn.context}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("  └─ Updates:",r)}logEffect(e,r,o=[]){const x=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[EFFECT] %c${e}.${r} %c(${x}s)`,`color: ${Kn.effect}; font-weight: bold`,"color: #333","color: #999; font-size: 0.9em"),o.length>0&&console.log("  └─ Dependencies:",o)}logWebSocket(e,r={}){const o=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[WEBSOCKET] %c${e} %c(${o}s)`,`color: ${Kn.websocket}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("  └─ Data:",r)}logPerformance(e,r){const o=r>100?Kn.performance:Kn.info,x=r>100?"🐌":"⚡";console.log(`%c[PERFORMANCE] ${x} %c${e}: ${r.toFixed(2)}ms`,`color: ${o}; font-weight: bold`,`color: ${o}`),r>100&&console.warn(`⚠️ Slow operation detected: ${e} took ${r.toFixed(2)}ms`)}logStats(){console.group("%c📊 Render Statistics","color: #2196F3; font-weight: bold; font-size: 14px"),Object.entries(this.renderCounts).sort((r,o)=>o[1]-r[1]).forEach(([r,o])=>{const x=o>10?Kn.performance:Kn.info;console.log(`%c${r}: %c${o} renders`,"color: #333; font-weight: bold",`color: ${x}`)}),console.groupEnd()}reset(){this.renderCounts={},this.startTime=Date.now(),console.clear(),console.log("%c🔄 Debug Logger Reset","color: #4CAF50; font-weight: bold; font-size: 14px")}group(e,r=Kn.info){console.group(`%c${e}`,`color: ${r}; font-weight: bold`)}groupEnd(){console.groupEnd()}}const Jn=new hk;typeof window<"u"&&(window.debugLogger=Jn,window.showRenderStats=()=>Jn.logStats(),window.resetDebugLogger=()=>Jn.reset(),console.log("%c🔍 Debug Logger Active","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cCommands available:","color: #2196F3; font-weight: bold"),console.log("  • showRenderStats() - نمایش آمار renders"),console.log("  • resetDebugLogger() - ریست کردن counters"),console.log("  • debugLogger - دسترسی مستقیم به logger"));const gb=E.createContext(),dk=({children:t})=>{Jn.logRender("WebSocketProvider");const[e,r]=E.useState(null),[o,x]=E.useState(!1),[b,C]=E.useState("connecting"),f=E.useRef([]),s=E.useRef(0),h=E.useRef(null),d=E.useRef(!1),a=E.useRef(null),l="ws://localhost:12345",c=10,m=E.useCallback(()=>{if(h.current&&(clearTimeout(h.current),h.current=null),a.current){const N=a.current;(N.readyState===WebSocket.OPEN||N.readyState===WebSocket.CONNECTING)&&N.close(1e3,"Cleanup"),a.current=null}},[]),y=E.useCallback(()=>{if(d.current)return;a.current&&m(),C("connecting");const N=new WebSocket(l);a.current=N,r(N),N.onopen=()=>{if(d.current){N.close(1e3,"Component unmounted");return}Jn.logWebSocket("CONNECTED"),console.log("✅ WebSocket connected"),x(!0),C("connected"),s.current=0},N.onmessage=D=>{if(d.current)return;const A=D.data;f.current.forEach(B=>{try{B(A)}catch(Y){console.error("❌ Error in message callback:",Y)}})},N.onerror=D=>{d.current||console.error("❌ WebSocket error:",D),C("disconnected")},N.onclose=D=>{d.current||(D.code!==1e3&&console.warn("⚠️ WebSocket disconnected",D.code),x(!1),C("disconnected"),D.code!==1e3&&s.current<c&&g())}},[m]),g=E.useCallback(()=>{if(d.current||s.current>=c){console.error("❌ Max reconnection attempts reached");return}const N=Math.min(1e4,1e3*Math.pow(2,s.current));console.log(`🔄 Reconnecting in ${N/1e3}s... (attempt ${s.current+1})`),C("reconnecting"),h.current=setTimeout(()=>{d.current||(s.current+=1,y())},N)},[y]);E.useEffect(()=>(d.current=!1,y(),()=>{d.current=!0,m()}),[]);const w=E.useCallback(N=>{if(a.current&&a.current.readyState===WebSocket.OPEN)try{return a.current.send(N),!0}catch(D){return console.error("❌ Error sending message:",D),!1}return console.warn("⚠️ WebSocket not ready to send. Current state:",a.current?a.current.readyState:"null"),!1},[]),S=E.useCallback(N=>{if(typeof N=="function")return f.current.push(N),()=>k(N)},[]),k=E.useCallback(N=>{f.current=f.current.filter(D=>D!==N)},[]),j=E.useCallback(()=>{s.current=0,y()},[y]),M=E.useMemo(()=>({isConnected:o,connectionStatus:b,send:w,addMessageCallback:S,removeMessageCallback:k,reconnect:j}),[o,b,w,S,k,j]);return p.jsx(gb.Provider,{value:M,children:t})},Is=()=>{const t=E.useContext(gb);if(!t)throw new Error("useWebSocket must be used within a WebSocketProvider");return t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mk=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,o)=>o?o.toUpperCase():r.toLowerCase()),O0=t=>{const e=mk(t);return e.charAt(0).toUpperCase()+e.slice(1)},pb=(...t)=>t.filter((e,r,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===r).join(" ").trim(),gk=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:x="",children:b,iconNode:C,...f},s)=>E.createElement("svg",{ref:s,...pk,width:e,height:e,stroke:t,strokeWidth:o?Number(r)*24/Number(e):r,className:pb("lucide",x),...!b&&!gk(f)&&{"aria-hidden":"true"},...f},[...C.map(([h,d])=>E.createElement(h,d)),...Array.isArray(b)?b:[b]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(t,e)=>{const r=E.forwardRef(({className:o,...x},b)=>E.createElement(xk,{ref:b,iconNode:e,className:pb(`lucide-${fk(O0(t))}`,`lucide-${t}`,o),...x}));return r.displayName=O0(t),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nr=Me("activity",yk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],bk=Me("aperture",vk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],D0=Me("arrow-right-left",wk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],Ck=Me("battery",Sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],kk=Me("brush",Tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],mo=Me("camera",jk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],eo=Me("chart-column",_k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Mk=Me("chart-line",Ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ok=Me("check",Nk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mc=Me("chevron-down",Dk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xb=Me("chevron-left",Ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yb=Me("chevron-right",Rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Vd=Me("chevron-up",Pk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gc=Me("circle-alert",Lk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Eo=Me("circle-check-big",Fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vb=Me("circle-x",zk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mf=Me("circle",Bk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Vk=Me("clock",Ik);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Hk=Me("copy",Uk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],Za=Me("crop",$k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],cd=Me("crosshair",Xk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zr=Me("download",Yk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],Ud=Me("eraser",Gk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Wk=Me("factory",qk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],A0=Me("file-text",Kk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],Qk=Me("flip-horizontal",Zk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],bb=Me("focus",Jk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bn=Me("funnel",ej);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],go=Me("gauge",tj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ij=Me("grid-3x3",nj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],sj=Me("hand",rj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],R0=Me("house",aj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],lj=Me("image-plus",oj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],P0=Me("image",cj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nf=Me("info",uj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],wb=Me("layers",hj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],fj=Me("layout-dashboard",dj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gj=Me("lock",mj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],xj=Me("map-pin",pj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],L0=Me("maximize-2",yj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],po=Me("maximize",vj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ar=Me("minus",bj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Sj=Me("monitor",wj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Tj=Me("moon",Cj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],Of=Me("move-3d",kj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],_j=Me("move-horizontal",jj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],oc=Me("move",Ej);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Sb=Me("palette",Mj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Df=Me("pause",Nj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Af=Me("play",Oj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Aj=Me("plus",Dj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],F0=Me("power",Rj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Lj=Me("rectangle-horizontal",Pj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zj=Me("refresh-cw",Fj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_i=Me("rotate-ccw",Bj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],to=Me("rotate-cw",Ij);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],ud=Me("route",Vj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],z0=Me("ruler",Uj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mo=Me("save",Hj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B0=Me("search",$j);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zt=Me("settings",Xj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],I0=Me("shield",Yj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],qj=Me("sliders-vertical",Gj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Rr=Me("sparkles",Wj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Zj=Me("square-pen",Kj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ps=Me("square",Qj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],e_=Me("sun",Jj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],n_=Me("target",t_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],Cb=Me("thermometer",i_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dc=Me("trash-2",r_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],a_=Me("trending-down",s_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ac=Me("trending-up",o_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pc=Me("triangle-alert",l_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],V0=Me("undo-2",c_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],No=Me("upload",u_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],U0=Me("video-off",h_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],H0=Me("video",d_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]],$0=Me("waypoints",f_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],tn=Me("x",m_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],p_=Me("wrench",g_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Un=Me("zap",x_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Qa=Me("zoom-in",y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],X0=Me("zoom-out",v_),Oo=({icon:t})=>{const{t:e,i18n:r}=tt(),{isConnected:o}=Is(),x=r.language==="fa"?"text-right":"text-left";return o?p.jsx("div",{className:"panel bg-background-white dark:bg-background-secondary border border-border rounded-lg p-4 mb-6",children:p.jsxs("div",{className:"flex items-center gap-3 text-primary dark:text-primary",children:[p.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),p.jsx("span",{className:`font-medium font-vazir ${x}`,children:e("websocketConnected")})]})}):p.jsx("div",{className:"panel variant-highlight border border-border rounded-lg p-4 mb-6 animate-pulse",children:p.jsxs("div",{className:"flex items-center gap-3 text-white dark:text-white",children:[p.jsxs("div",{className:"relative",children:[p.jsx(t,{className:"w-5 h-5"}),p.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-highlight rounded-full animate-ping"})]}),p.jsx("span",{className:`font-medium font-vazir ${x}`,children:e("websocketConnecting")})]})})},St=({label:t,icon:e,children:r,value:o,unit:x,className:b="",showValue:C=!0})=>{const{i18n:f}=tt(),s=f.language==="fa",h=s?"flex-row-reverse":"flex-row",d=s?"text-right":"text-left";return p.jsxs("div",{className:`card p-4 transition-all duration-200 hover:shadow-md ${b}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[p.jsxs("div",{className:`flex items-center gap-2 ${h}`,children:[e&&p.jsx(e,{className:"w-5 h-5 text-primary flex-shrink-0"}),p.jsx("label",{className:`font-medium text-sm text-text dark:text-text ${d}`,children:t})]}),C&&o&&p.jsxs("span",{className:`text-sm text-primary dark:text-primary font-semibold ${d} flex-shrink-0`,children:[o," ",x]})]}),r]})},yt=({type:t="text",name:e,value:r,onChange:o,placeholder:x,min:b,max:C,step:f,disabled:s=!1,className:h="",...d})=>{const{i18n:a}=tt(),l=a.language==="fa"?"text-right":"text-left",c=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    ${s?"cursor-not-allowed opacity-50":""}
    ${l}
    ${t==="number"?"number-input":""}
  `;return p.jsx("input",{type:t,name:e,value:r||"",onChange:o,placeholder:x,min:b,max:C,step:f,disabled:s,className:`${c} ${h}`,...d})},tr=({name:t,value:e,onChange:r,options:o=[],disabled:x=!1,className:b="",...C})=>{const{i18n:f}=tt(),s=f.language==="fa"?"text-right":"text-left",h=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    cursor-pointer
    ${x?"cursor-not-allowed opacity-50":""}
    ${s}
  `;return p.jsx("select",{name:t,value:e,onChange:r,disabled:x,className:`${h} ${b}`,...C,children:o.map(d=>p.jsx("option",{value:d.value,children:d.label},d.value))})},Pr=({active:t,onClick:e,icon:r,label:o,disabled:x=!1,className:b="",showStatus:C=!0})=>{const{t:f,i18n:s}=tt(),h=s.language==="fa"?"text-right":"text-left",d=`
    h-10 px-4 rounded-lg font-medium transition-all duration-200
    ${t?"bg-primary hover:bg-primary-dark text-white shadow-md":"bg-background-secondary hover:bg-accent text-text-muted"}
    ${x?"opacity-50 cursor-not-allowed":""}
    ${b}
  `;return p.jsxs("div",{children:[C&&p.jsx("div",{className:"flex items-center mb-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${t?"bg-primary":"bg-gray-400"}`}),p.jsx("span",{className:`text-sm font-medium transition-colors duration-200 ${t?"text-primary dark:text-primary":"text-text-muted dark:text-text-muted"} ${h}`,children:f(t?"active":"inactive")})]})}),p.jsx("button",{type:"button",onClick:e,disabled:x,className:d,children:p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r&&p.jsx(r,{className:"w-4 h-4"}),p.jsx("span",{children:o||f(t?"active":"inactive")})]})})]})},Do=({children:t,maxWidth:e="max-w-5xl"})=>p.jsx("div",{className:"h-full bg-background dark:bg-background font-vazir overflow-auto",children:p.jsx("div",{className:`${e} mx-auto p-2 sm:p-3 lg:p-4`,children:t})}),b_=({onStatusChange:t})=>{const{t:e}=tt(),[r,o]=E.useState({interlock:{status:"ok",value:"Closed",message:""},temperature:{status:"ok",value:25.5,message:""},voltage:{status:"ok",value:220,message:""},pressure:{status:"ok",value:1,message:""},cooling:{status:"ok",value:"Active",message:""}});E.useEffect(()=>{const f=setInterval(()=>{const s=25+Math.random()*10,h=215+Math.random()*10,d={interlock:{status:Math.random()>.1?"ok":"warning",value:Math.random()>.1?"Closed":"Open",message:Math.random()>.1?"":"Door is open"},temperature:{status:s<30?"ok":s<35?"warning":"error",value:s.toFixed(1),message:s>30?"Temperature is high":""},voltage:{status:Math.abs(h-220)<5?"ok":Math.abs(h-220)<10?"warning":"error",value:h.toFixed(1),message:Math.abs(h-220)>5?"Voltage unstable":""},pressure:{status:"ok",value:(.95+Math.random()*.1).toFixed(2),message:""},cooling:{status:Math.random()>.05?"ok":"error",value:Math.random()>.05?"Active":"Inactive",message:Math.random()>.05?"":"Cooling system failed"}};o(d);const a=Object.values(d).some(c=>c.status==="error"),l=Object.values(d).some(c=>c.status==="warning");t&&t({overallStatus:a?"error":l?"warning":"ok",details:d})},2e3);return()=>clearInterval(f)},[t]);const x=f=>{switch(f){case"ok":return p.jsx(Eo,{className:"w-5 h-5 text-green-500"});case"warning":return p.jsx(gc,{className:"w-5 h-5 text-yellow-500"});case"error":return p.jsx(vb,{className:"w-5 h-5 text-red-500"});default:return p.jsx(gc,{className:"w-5 h-5 text-gray-400"})}},b=f=>{switch(f){case"ok":return"border-green-500 bg-green-50 dark:bg-green-900/20";case"warning":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"error":return"border-red-500 bg-red-50 dark:bg-red-900/20";default:return"border-gray-300 bg-gray-50 dark:bg-gray-900/20"}},C=[{key:"interlock",label:e("interlock")||"Interlock",icon:gj,unit:""},{key:"temperature",label:e("temperature")||"Temperature",icon:Cb,unit:"°C"},{key:"voltage",label:e("voltage"),icon:Un,unit:"V"},{key:"pressure",label:e("pressure")||"Pressure",icon:go,unit:"bar"},{key:"cooling",label:e("coolingSystem")||"Cooling System",icon:I0,unit:""}];return p.jsxs("div",{className:"card p-4 lg:p-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx(I0,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("systemStabilityCheck")||"System Stability Check"})]}),p.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:C.map(({key:f,label:s,icon:h,unit:d})=>{const a=r[f];return p.jsxs("div",{className:`panel p-4 rounded-lg border-2 transition-all ${b(a.status)}`,children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(h,{className:"w-4 h-4 text-text-muted dark:text-text-muted"}),p.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s})]}),x(a.status)]}),p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"text-xl font-bold font-mono text-text dark:text-text",children:[a.value," ",d]}),a.message&&p.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted mt-1",children:a.message})]})]},f)})})]})},w_=({tubeParams:t})=>{const{t:e}=tt(),[r,o]=E.useState([]),[x,b]=E.useState(!1),[C,f]=E.useState(50),s=E.useRef(null);E.useEffect(()=>{if(!x&&t){const l={id:Date.now(),timestamp:new Date().toLocaleTimeString("en-GB"),voltage:t.voltage||0,current:t.current||0,power:t.power||0,exposureTime:t.exposureTime||0,temperature:t.temperature||0};o(c=>[l,...c].slice(0,C))}},[t,x,C]),E.useEffect(()=>{s.current&&!x&&(s.current.scrollTop=0)},[r,x]);const h=()=>{if(r.length===0)return;const c=[["Timestamp","Voltage (kVp)","Current (mA)","Power (W)","Exposure Time (s)","Temperature (°C)"].join(","),...r.map(w=>`${w.timestamp},${w.voltage},${w.current},${w.power},${w.exposureTime},${w.temperature}`)].join(`
`),m=new Blob([c],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),g=URL.createObjectURL(m);y.setAttribute("href",g),y.setAttribute("download",`xray_exposure_log_${new Date().toISOString()}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},d=()=>{o([])},a=()=>{b(!x)};return p.jsxs("div",{className:"card p-4 lg:p-6",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(nr,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("xrayExposureLog")||"X-ray Tube & Exposure Log"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-1.5 text-sm",children:x?p.jsxs(p.Fragment,{children:[p.jsx(Af,{className:"w-4 h-4"}),p.jsx("span",{children:e("resume")||"Resume"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Df,{className:"w-4 h-4"}),p.jsx("span",{children:e("pause")||"Pause"})]})}),p.jsxs("button",{onClick:h,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(zr,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:e("download")||"Download"})]}),p.jsxs("button",{onClick:d,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(Dc,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:e("clear")||"Clear"})]})]})]}),p.jsxs("div",{className:"mb-3 text-sm text-text-muted dark:text-text-muted",children:[e("totalLogs")||"Total logs",": ",r.length," / ",C,x&&p.jsxs("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400 font-medium",children:["(",e("paused")||"Paused",")"]})]}),p.jsx("div",{ref:s,className:"overflow-auto max-h-[400px] border border-border rounded-lg",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{className:"bg-background-secondary dark:bg-background-primary sticky top-0",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-3 py-2 text-left font-medium text-text dark:text-text border-b border-border",children:e("time")||"Time"}),p.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("voltage")," (kVp)"]}),p.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("current")," (mA)"]}),p.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("power")," (W)"]}),p.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("exposureTime")," (s)"]}),p.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("temperature")," (°C)"]})]})}),p.jsx("tbody",{children:r.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:"6",className:"px-3 py-8 text-center text-text-muted dark:text-text-muted",children:e("noLogsYet")||"No logs recorded yet"})}):r.map(l=>p.jsxs("tr",{className:"hover:bg-background-secondary/50 dark:hover:bg-background-primary/50 transition-colors",children:[p.jsx("td",{className:"px-3 py-2 text-text dark:text-text border-b border-border/50 font-mono text-xs",children:l.timestamp}),p.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.voltage}),p.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.current}),p.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.power}),p.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.exposureTime}),p.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.temperature})]},l.id))})]})})]})},Tb=E.createContext(),S_=({children:t})=>{const{isConnected:e,connectionStatus:r,addMessageCallback:o}=Is();Jn.logRender("CameraProvider",{connectionStatus:r});const x=E.useRef({basler:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0},monitoring:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0}}),[b,C]=E.useState({basler:{isConnected:!1},monitoring:{isConnected:!1}}),f=E.useRef({basler:!1,monitoring:!1}),s=E.useRef(new Set),[h,d]=E.useState(null),[a,l]=E.useState([]),[c,m]=E.useState(!1),[y,g]=E.useState([]),[w,S]=E.useState([]),[k,j]=E.useState({brightness:100,contrast:100,saturation:100,zoom:1,grayscale:!1,crop:null,panOffset:{x:0,y:0}}),[M,N]=E.useState({x:0,y:0}),[D,A]=E.useState([]);E.useEffect(()=>{const Q=o(me=>{try{if(typeof me=="string"&&me.startsWith("response:")){console.log("Backend Response:",me.slice(9));return}if(typeof me!="string")return;const le=me.indexOf(":");if(le===-1)return;const H=me.substring(0,le),re=me.substring(le+1);if(!re)return;if(!["basler","monitoring"].includes(H)){console.warn("Unknown channel:",H);return}const ge=`data:image/jpeg;base64,${re}`,he=Date.now(),fe=x.current[H],Se=fe.frameCount+1;let $=fe.avgFps,ne=fe.lastFpsCalculation;if(he-ne>=5e3){if(ne>0){const ee=(he-ne)/1e3,we=Se-(fe.frameCount-Se+1);$=Math.round(we/ee*10)/10}ne=he}x.current[H]={currentFrame:ge,lastUpdate:he,frameCount:Se,avgFps:$,lastFpsCalculation:ne},f.current[H]||(f.current[H]=!0,C(ee=>({...ee,[H]:{isConnected:!0}}))),s.current.forEach(ee=>{try{ee(H)}catch(we){console.error("Frame callback error:",we)}})}catch(le){console.error("❌ Error processing camera message:",le)}});return()=>{Q&&Q()}},[o]),E.useEffect(()=>{e||(x.current.basler.currentFrame=null,x.current.monitoring.currentFrame=null,f.current.basler=!1,f.current.monitoring=!1,C({basler:{isConnected:!1},monitoring:{isConnected:!1}}))},[e]);const B=E.useCallback(ie=>{d(ie),console.log(`ابزار: ${ie}`)},[]),Y=E.useCallback(ie=>{ie&&(ie.tool==="eraser"?oe(ie):(S(Q=>[...Q,ie]),A(Q=>[...Q,{type:"tool-drawing",action:"add",drawing:ie}])))},[]),oe=E.useCallback(ie=>{const Q=ie.eraserRadius||15,me=ie.path||[];me.length!==0&&(S(le=>{const H=[];return le.forEach(re=>{if(re.tool==="eraser")return;let ge=!1;if(re.path&&re.path.length>0)for(const he of re.path){for(const fe of me)if(Math.sqrt(Math.pow(he.x-fe.x,2)+Math.pow(he.y-fe.y,2))<=Q){ge=!0;break}if(ge)break}ge||H.push(re)}),H}),l(le=>{const H=[];return le.forEach(re=>{let ge=!1;if(re.path&&re.path.length>0)for(const he of re.path){for(const fe of me)if(Math.sqrt(Math.pow(he.x-fe.x,2)+Math.pow(he.y-fe.y,2))<=Q){ge=!0;break}if(ge)break}ge||H.push(re)}),H}),A(le=>[...le,{type:"eraser",action:"erase",eraserDrawing:ie,eraserRadius:Q}]))},[]),Z=E.useCallback((ie,Q)=>{if(!(!h||h==="pan")){if(h==="crop"&&k.crop){j(me=>({...me,crop:null})),d(null),A(me=>[...me,{type:"crop",action:"remove"}]);return}m(!0),g([{x:ie,y:Q}])}},[h,k.crop]),ae=E.useCallback((ie,Q)=>{N({x:ie,y:Q}),!(!c||!h)&&g(me=>[...me,{x:ie,y:Q}])},[c,h]),te=E.useCallback(()=>{if(!c||y.length<2){m(!1),g([]);return}if(h==="crop"){const ie=y[0],Q=y[y.length-1],me={x:Math.min(ie.x,Q.x),y:Math.min(ie.y,Q.y),width:Math.abs(Q.x-ie.x),height:Math.abs(Q.y-ie.y)};j(le=>({...le,crop:me})),A(le=>[...le,{type:"crop",action:"apply",settings:me}])}else{const ie={id:Date.now(),tool:h,path:y};l(Q=>[...Q,ie]),A(Q=>[...Q,{type:"drawing",action:"add",drawing:ie}])}m(!1),g([])},[c,y,h]),G=E.useCallback(()=>{l([]),S([]),g([]),m(!1),j(ie=>({...ie,crop:null})),A(ie=>[...ie,{type:"clear",action:"all"}]),window.clearFabricCanvas&&window.clearFabricCanvas()},[]),z=E.useCallback(ie=>{j(Q=>({...Q,...ie})),A(Q=>[...Q,{type:"settings",action:"update",settings:ie}])},[]),q=E.useCallback(()=>{j(ie=>{const Q=!ie.grayscale;return A(me=>[...me,{type:"grayscale",action:"toggle",value:Q}]),{...ie,grayscale:Q}})},[]),X=E.useCallback(ie=>{j(Q=>{const me=ie==="in"?Q.zoom*1.2:Q.zoom/1.2,le=Math.max(.2,Math.min(5,me));return A(H=>[...H,{type:"zoom",action:"change",value:le,prevValue:Q.zoom}]),{...Q,zoom:le}})},[]),R=E.useCallback(()=>{j(ie=>{const Q=ie.zoom*1.2,me=Math.max(.2,Math.min(5,Q));if(A(le=>[...le,{type:"zoom",action:"in",value:me,prevValue:ie.zoom}]),window.fabricCanvas){const le=window.fabricCanvas,H=le.getCenter();le.zoomToPoint({x:H.left,y:H.top},me),le.requestRenderAll()}return{...ie,zoom:me}})},[]),O=E.useCallback(()=>{j(ie=>{const Q=ie.zoom/1.2,me=Math.max(.2,Math.min(5,Q));if(A(le=>[...le,{type:"zoom",action:"out",value:me,prevValue:ie.zoom}]),window.fabricCanvas){const le=window.fabricCanvas,H=le.getCenter();le.zoomToPoint({x:H.left,y:H.top},me),le.requestRenderAll()}return{...ie,zoom:me}})},[]),L=E.useCallback(()=>{j(ie=>{if(A(Q=>[...Q,{type:"zoom",action:"reset",value:1,prevValue:ie.zoom}]),window.fabricCanvas){const Q=window.fabricCanvas;Q.setViewportTransform([1,0,0,1,0,0]),Q.requestRenderAll()}return{...ie,zoom:1}})},[]),I=E.useCallback((ie,Q)=>{j(me=>{const le={x:me.panOffset.x+ie,y:me.panOffset.y+Q};return A(H=>[...H,{type:"pan",action:"move",offset:le,prevOffset:me.panOffset}]),{...me,panOffset:le}})},[]),K=E.useCallback(()=>{if(window.undoLastFabricAction){window.undoLastFabricAction();return}A(ie=>{if(ie.length===0)return ie;const Q=ie[ie.length-1],me=ie.slice(0,-1);switch(Q.type){case"drawing":Q.action==="add"&&l(le=>le.slice(0,-1));break;case"tool-drawing":Q.action==="add"&&S(le=>le.slice(0,-1));break;case"eraser":Q.action==="erase"&&console.log("Undo eraser operation - complex operation");break;case"crop":Q.action==="apply"?j(le=>({...le,crop:null})):Q.action==="remove"&&j(le=>({...le,crop:Q.settings}));break;case"grayscale":j(le=>({...le,grayscale:!Q.value}));break;case"zoom":j(le=>({...le,zoom:Q.prevValue}));break;case"settings":j(le=>({...le,...Q.prevSettings}));break;case"pan":j(le=>({...le,panOffset:Q.prevOffset}));break}return me})},[]),V=E.useCallback(ie=>{var Q;return((Q=x.current[ie])==null?void 0:Q.currentFrame)||null},[]),F=E.useCallback(ie=>{const Q=x.current[ie];return{frameCount:(Q==null?void 0:Q.frameCount)||0,avgFps:(Q==null?void 0:Q.avgFps)||0,lastUpdate:(Q==null?void 0:Q.lastUpdate)||0}},[]),J=E.useCallback(ie=>(s.current.add(ie),()=>s.current.delete(ie)),[]),W=E.useCallback(ie=>{s.current.delete(ie)},[]),ue=E.useMemo(()=>({basler:{get currentFrame(){return x.current.basler.currentFrame},get frameCount(){return x.current.basler.frameCount},get avgFps(){return x.current.basler.avgFps},get lastUpdate(){return x.current.basler.lastUpdate},isConnected:b.basler.isConnected},monitoring:{get currentFrame(){return x.current.monitoring.currentFrame},get frameCount(){return x.current.monitoring.frameCount},get avgFps(){return x.current.monitoring.avgFps},get lastUpdate(){return x.current.monitoring.lastUpdate},isConnected:b.monitoring.isConnected}}),[b]),ce=E.useMemo(()=>({cameras:ue,cameraStatus:b,getCameraFrame:V,getCameraStats:F,addFrameCallback:J,removeFrameCallback:W,activeTool:h,drawings:a,toolDrawings:w,isDrawing:c,currentPath:y,imageSettings:k,cursorPosition:M,wsStatus:r,applyTool:B,startDrawing:Z,continueDrawing:ae,finishDrawing:te,clearDrawings:G,addToolDrawing:Y,updateImageSettings:z,toggleGrayscale:q,zoomImage:X,zoomIn:R,zoomOut:O,resetZoom:L,panImage:I,undoLastChange:K}),[ue,b,h,a,w,c,y,k,M,r,V,F,J,W]);return p.jsx(Tb.Provider,{value:ce,children:t})},Rf=()=>{const t=E.useContext(Tb);if(!t)throw new Error("useCamera must be used within CameraProvider");return t},C_=()=>{Jn.logRender("MonitoringDisplay");const t=E.useRef(null),{cameras:e,wsStatus:r,addFrameCallback:o}=Rf();return E.useEffect(()=>{const b=o(C=>{if(C==="monitoring"&&t.current){const f=e.monitoring.currentFrame;f&&(t.current.src=f)}});return()=>b()},[e,o]),p.jsxs("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden relative",children:[p.jsx("img",{ref:t,className:"w-full h-full object-contain",alt:"Monitoring Camera",style:{display:e.monitoring.currentFrame?"block":"none"}}),!e.monitoring.currentFrame&&p.jsx("div",{className:"w-full h-full flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-white text-sm mb-2",children:[r==="connecting"&&"🔄 اتصال به دوربین RTSP...",r==="connected"&&"⏳ در انتظار تصویر RTSP...",r==="reconnecting"&&"🔄 تلاش برای اتصال مجدد...",r==="error"&&"❌ خطا در اتصال RTSP",r==="failed"&&"❌ اتصال RTSP ناموفق",r==="disconnected"&&"⚠️ قطع ارتباط با دوربین"]}),(r==="error"||r==="failed")&&p.jsx("div",{className:"text-gray-400 text-xs",children:"بررسی تنظیمات RTSP یا بک‌اند"})]})}),p.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm",children:"Monitoring Camera"}),p.jsx("div",{className:`absolute bottom-2 left-2 w-3 h-3 rounded-full ${e.monitoring.isConnected&&e.monitoring.currentFrame?"bg-green-500":"bg-red-500"}`}),e.monitoring.currentFrame&&p.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs space-y-1",children:[p.jsx("div",{children:"RTSP Live"}),e.monitoring.avgFps>0&&p.jsxs("div",{className:"text-green-400",children:["FPS: ",e.monitoring.avgFps," | Frames: ",e.monitoring.frameCount]})]})]})},kb=Ae.memo(C_),T_=({onTrajectoryChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=E.useState("circular"),[b,C]=E.useState({numberOfSteps:360,anglePerStep:1,startAngle:0,endAngle:360,rotationSpeed:10,helixPitch:10,heightSteps:10,customPoints:[]}),[f,s]=E.useState([]),h=[{value:"stepwise",label:"Stepwise",icon:ud,description:r("stepwiseDesc")||"Discrete angular steps",color:"bg-blue-500"},{value:"circular",label:"Circular",icon:Mf,description:r("circularDesc")||"Continuous circular motion",color:"bg-green-500"},{value:"helical",label:"Helical",icon:Ac,description:r("helicalDesc")||"Spiral path for tall objects",color:"bg-purple-500"},{value:"arbitrary",label:"Arbitrary",icon:$0,description:r("arbitraryDesc")||"Custom trajectory path",color:"bg-orange-500"}],d=(w,S)=>{const k={...b,[w]:parseFloat(S)||0};C(k),t&&t({type:o,params:k})},a=w=>{x(w),t&&t({type:w,params:b})},l=()=>{const w=prompt(r("enterTrajectoryName")||"Enter trajectory name:");w&&s([...f,{name:w,type:o,params:{...b}}])},c=w=>{x(w.type),C(w.params),t&&t({type:w.type,params:w.params})},m=w=>{s(f.filter((S,k)=>k!==w))},y=()=>{const w=JSON.stringify({type:o,params:b},null,2),S=new Blob([w],{type:"application/json"}),k=URL.createObjectURL(S),j=document.createElement("a");j.href=k,j.download=`trajectory_${o}_${Date.now()}.json`,j.click(),URL.revokeObjectURL(k)},g=w=>{const S=w.target.files[0];if(S){const k=new FileReader;k.onload=j=>{try{const M=JSON.parse(j.target.result);x(M.type),C(M.params),t&&t(M)}catch{alert("Invalid trajectory file")}},k.readAsText(S)}};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ud,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("trajectoryDefinition")||"Trajectory Definition"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:l,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(Mo,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("save")})]}),p.jsxs("button",{onClick:y,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(zr,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),p.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(No,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("import")||"Import"}),p.jsx("input",{type:"file",accept:".json",onChange:g,className:"hidden",disabled:e})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("selectTrajectoryType")||"Select Trajectory Type"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:h.map(w=>{const S=w.icon,k=o===w.value;return p.jsx("button",{onClick:()=>a(w.value),disabled:e,className:`
                  p-3 sm:p-4 rounded-lg border-2 transition-all text-left
                  ${k?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50"}
                  ${e?"opacity-50 cursor-not-allowed":""}
                `,children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-2 sm:gap-3",children:[p.jsx("div",{className:`p-2 rounded-lg ${w.color} bg-opacity-20 flex-shrink-0`,children:p.jsx(S,{className:`w-4 h-4 sm:w-5 sm:h-5 ${w.color.replace("bg-","text-")}`})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-semibold text-text dark:text-text mb-1 text-sm sm:text-base",children:w.label}),p.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted line-clamp-2",children:w.description})]})]})},w.value)})})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-4 flex items-center gap-2",children:[p.jsx(zt,{className:"w-4 h-4"}),r("trajectoryParameters")||"Trajectory Parameters"]}),o==="stepwise"&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSteps")||"Number of Steps"}),p.jsx("input",{type:"number",value:b.numberOfSteps,onChange:w=>d("numberOfSteps",w.target.value),disabled:e,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("anglePerStep")||"Angle per Step"," (°)"]}),p.jsx("input",{type:"number",value:b.anglePerStep,onChange:w=>d("anglePerStep",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="circular"&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("startAngle")||"Start Angle"," (°)"]}),p.jsx("input",{type:"number",value:b.startAngle,onChange:w=>d("startAngle",w.target.value),disabled:e,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("endAngle")||"End Angle"," (°)"]}),p.jsx("input",{type:"number",value:b.endAngle,onChange:w=>d("endAngle",w.target.value),disabled:e,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("rotationSpeed")," (°/s)"]}),p.jsx("input",{type:"number",value:b.rotationSpeed,onChange:w=>d("rotationSpeed",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="helical"&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("helixPitch")||"Helix Pitch"," (mm)"]}),p.jsx("input",{type:"number",value:b.helixPitch,onChange:w=>d("helixPitch",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("heightSteps")||"Height Steps"}),p.jsx("input",{type:"number",value:b.heightSteps,onChange:w=>d("heightSteps",w.target.value),disabled:e,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="arbitrary"&&p.jsxs("div",{className:"text-center py-8",children:[p.jsx($0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-50"}),p.jsx("p",{className:"text-sm text-text-muted mb-4",children:r("arbitraryTrajectoryInfo")||"Use trajectory designer or import custom points"}),p.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:r("openDesigner")||"Open Trajectory Designer"})]})]}),f.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("savedTrajectories")||"Saved Trajectories"}),p.jsx("div",{className:"space-y-2",children:f.map((w,S)=>{var k,j;return p.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[p.jsxs("button",{onClick:()=>c(w),disabled:e,className:"flex-1 text-left flex items-center gap-3",children:[p.jsx("div",{className:`p-2 rounded ${((k=h.find(M=>M.value===w.type))==null?void 0:k.color)||"bg-gray-500"} bg-opacity-20`,children:Ae.createElement(((j=h.find(M=>M.value===w.type))==null?void 0:j.icon)||ud,{className:"w-4 h-4"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium text-text dark:text-text",children:w.name}),p.jsx("div",{className:"text-xs text-text-muted",children:w.type.charAt(0).toUpperCase()+w.type.slice(1)})]})]}),p.jsx("button",{onClick:()=>m(S),className:"ml-2 p-2 rounded hover:bg-red-100 text-red-600 transition-colors",children:p.jsx(Dc,{className:"w-4 h-4"})})]},S)})})]})]})},k_=({onGeometryChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=E.useState({sod:1e3,sdd:1500,detectorWidth:400,detectorHeight:300,pixelPitch:.2,effectivePixelSize:.2,coneBeamAngle:15,magnification:1.5,focalSpotSize:.4,detectorType:"Flat Panel"}),[b,C]=E.useState({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),f=(y,g)=>y>0?(g/y).toFixed(3):0,s=(y,g)=>g>0?(y/g).toFixed(4):y,h=(y,g)=>{const w=parseFloat(g)||0;let S={...o,[y]:w};if(y==="sod"||y==="sdd"){const k=f(y==="sod"?w:o.sod,y==="sdd"?w:o.sdd);S.magnification=parseFloat(k),S.effectivePixelSize=parseFloat(s(o.pixelPitch,k))}y==="pixelPitch"&&(S.effectivePixelSize=parseFloat(s(w,o.magnification))),x(S),t&&t(S)},d=()=>{C({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),setTimeout(()=>{const y=.95+Math.random()*.05;C({isCalibrated:!0,lastCalibration:new Date().toISOString(),geometricAccuracy:y.toFixed(4)})},3e3)},a=()=>{const y=JSON.stringify({geometry:o,calibrationStatus:b,timestamp:new Date().toISOString()},null,2),g=new Blob([y],{type:"application/json"}),w=URL.createObjectURL(g),S=document.createElement("a");S.href=w,S.download=`geometry_config_${Date.now()}.json`,S.click(),URL.revokeObjectURL(w)},l=y=>{const g=y.target.files[0];if(g){const w=new FileReader;w.onload=S=>{try{const k=JSON.parse(S.target.result);x(k.geometry),C(k.calibrationStatus||b),t&&t(k.geometry)}catch{alert("Invalid geometry configuration file")}},w.readAsText(g)}},m=(()=>{const y=(o.detectorWidth/o.magnification).toFixed(2),g=(o.detectorHeight/o.magnification).toFixed(2);return{width:y,height:g}})();return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(z0,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("geometryConfiguration")||"Geometry Configuration"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:d,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(zj,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("calibrate")||"Calibrate"})]}),p.jsxs("button",{onClick:a,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(zr,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),p.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(No,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("import")}),p.jsx("input",{type:"file",accept:".json",onChange:l,className:"hidden",disabled:e})]})]})]}),b.isCalibrated&&p.jsx("div",{className:"panel p-4 rounded-lg border-2 border-green-500 bg-green-50 dark:bg-green-900/20",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Eo,{className:"w-5 h-5 text-green-600 mt-0.5"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"font-medium text-green-800 dark:text-green-300 mb-1",children:r("systemCalibrated")||"System Calibrated"}),p.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("lastCalibration")||"Last calibration",": ",new Date(b.lastCalibration).toLocaleString()]}),p.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("geometricAccuracy")||"Geometric accuracy",": ",(parseFloat(b.geometricAccuracy)*100).toFixed(2),"%"]})]})]})}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[p.jsx(z0,{className:"w-4 h-4"}),r("distanceParameters")||"Distance Parameters"]}),p.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SOD - Source to Object (mm)"}),p.jsx(yt,{type:"number",value:o.sod,onChange:y=>h("sod",y.target.value),disabled:e,min:"1",step:"1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SDD - Source to Detector (mm)"}),p.jsx(yt,{type:"number",value:o.sdd,onChange:y=>h("sdd",y.target.value),disabled:e,min:"1",step:"1"})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[p.jsx(po,{className:"w-4 h-4"}),r("detectorParameters")||"Detector Parameters"]}),p.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorWidth")||"Detector Width"," (mm)"]}),p.jsx(yt,{type:"number",value:o.detectorWidth,onChange:y=>h("detectorWidth",y.target.value),disabled:e,min:"1",step:"1"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorHeight")||"Detector Height"," (mm)"]}),p.jsx(yt,{type:"number",value:o.detectorHeight,onChange:y=>h("detectorHeight",y.target.value),disabled:e,min:"1",step:"1"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("pixelPitch")||"Pixel Pitch"," (mm)"]}),p.jsx(yt,{type:"number",value:o.pixelPitch,onChange:y=>h("pixelPitch",y.target.value),disabled:e,min:"0.001",step:"0.001"})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[p.jsx(bb,{className:"w-4 h-4"}),r("calculatedValues")||"Calculated Values"]}),p.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[p.jsxs("div",{className:"panel p-3 rounded-lg border-2 border-primary/20 bg-primary/5",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("magnification")||"Magnification"}),p.jsxs("div",{className:"text-xl font-bold text-primary font-mono",children:[o.magnification.toFixed(3),"x"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsxs("div",{className:"text-xs text-text-muted mb-1",children:[r("effectivePixelSize")||"Effective Pixel Size"," (mm)"]}),p.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:o.effectivePixelSize.toFixed(4)})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("width")||"Width"," (mm)"]}),p.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:m.width})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("height")||"Height"," (mm)"]}),p.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:m.height})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[p.jsx(bk,{className:"w-4 h-4"}),r("additionalParameters")||"Additional Parameters"]}),p.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("coneBeamAngle")||"Cone Beam Angle"," (°)"]}),p.jsx(yt,{type:"number",value:o.coneBeamAngle,onChange:y=>h("coneBeamAngle",y.target.value),disabled:e,min:"0",step:"0.1"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("focalSpotSize")||"Focal Spot Size"," (mm)"]}),p.jsx(yt,{type:"number",value:o.focalSpotSize,onChange:y=>h("focalSpotSize",y.target.value),disabled:e,min:"0.001",step:"0.001"})]})]})]})]})},jb=E.createContext(),j_=({children:t})=>{const[e,r]=E.useState({initialParameters:{power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1},positionAndOptimization:{manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null},postProcessing:{rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"},projectionAcquisition:{imagingMode:"180°",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"},reconstruction:{algorithm:"FBP",iterationCount:"10",filterType:"Ram-Lak",pixelSize:"0.1",reconstructionMode:"2D",outputFormat:"DICOM"}}),o=E.useCallback((b,C)=>{r(f=>({...f,[b]:C}))},[]),x=E.useCallback(()=>{const b={};return Object.entries(e).forEach(([C,f])=>{if(f&&Object.keys(f).length>0){const s={};Object.entries(f).forEach(([h,d])=>{(d!=null&&d!==""||typeof d=="boolean"||typeof d=="string"&&["mA","Al","8-bit","Medium","None","Low Pass","3x3","Sobel","TIFF","180°","FBP","Ram-Lak","2D","DICOM"].includes(d))&&(s[h]=d)}),Object.keys(s).length>0&&(b[C]=s)}}),b},[e]);return p.jsx(jb.Provider,{value:{formData:e,updateFormData:o,getAllFormData:x},children:t})},_b=()=>E.useContext(jb),Rc=(t,e)=>{const{formData:r,updateFormData:o}=_b(),{i18n:x}=tt(),b=E.useMemo(()=>{const d=r[t]||{};return{...e,...d}},[e,r,t]),C=E.useCallback(d=>{const{name:a,value:l,type:c,checked:m}=d.target;o(t,{...b,[a]:c==="checkbox"?m:l})},[b,o,t]),f=x.language==="fa";return{pageData:b,handleChange:C,updateFormData:d=>o(t,d),isRtl:f,flexDir:f?"flex-row-reverse":"flex-row",textAlign:f?"text-right":"text-left"}},__=({disabled:t=!1})=>{const{t:e}=tt(),r=[{id:1,name:"Standard CT",description:"Standard CT scanning protocol",settings:{voltage:120,current:200,rotationMode:"360°",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:"2025-10-01",lastUsed:"2025-10-13"},{id:2,name:"High Resolution",description:"High resolution imaging for small details",settings:{voltage:140,current:250,rotationMode:"360°",exposureTime:150,numberOfProjections:720,imageCount:1},createdDate:"2025-10-05",lastUsed:"2025-10-12"},{id:3,name:"Low Dose",description:"Reduced radiation dose protocol",settings:{voltage:100,current:150,rotationMode:"180°",exposureTime:50,numberOfProjections:180,imageCount:1},createdDate:"2025-10-08",lastUsed:null}],[o,x]=E.useState(r),[b,C]=E.useState(null),[f,s]=E.useState(!1),[h,d]=E.useState(null),a=N=>{s(!0),d({...N})},l=()=>{s(!0),d({id:Date.now(),name:"",description:"",settings:{voltage:120,current:200,rotationMode:"360°",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:new Date().toISOString().split("T")[0],lastUsed:null})},c=()=>{if(!h.name.trim()){alert(e("enterProtocolName")||"Please enter a protocol name");return}const N=o.findIndex(D=>D.id===h.id);if(N>=0){const D=[...o];D[N]=h,x(D)}else x([...o,h]);s(!1),d(null)},m=()=>{s(!1),d(null)},y=N=>{confirm(e("confirmDeleteProtocol")||"Are you sure you want to delete this protocol?")&&(x(o.filter(D=>D.id!==N)),(b==null?void 0:b.id)===N&&C(null))},g=N=>{const D={...N,id:Date.now(),name:`${N.name} (Copy)`,createdDate:new Date().toISOString().split("T")[0],lastUsed:null};x([...o,D])},w=N=>{C(N);const D=o.map(A=>A.id===N.id?{...A,lastUsed:new Date().toISOString().split("T")[0]}:A);x(D),alert(e("protocolApplied")||`Protocol "${N.name}" has been applied`)},S=()=>{const N=JSON.stringify(o,null,2),D=new Blob([N],{type:"application/json"}),A=URL.createObjectURL(D),B=document.createElement("a");B.href=A,B.download=`scan_protocols_${new Date().getTime()}.json`,B.click(),URL.revokeObjectURL(A)},k=N=>{const D=N.target.files[0];if(D){const A=new FileReader;A.onload=B=>{try{const Y=JSON.parse(B.target.result);x([...o,...Y]),alert(e("protocolsImported")||"Protocols imported successfully!")}catch{alert(e("importError")||"Error importing protocols")}},A.readAsText(D)}},j=(N,D)=>{d({...h,[N]:D})},M=(N,D)=>{d({...h,settings:{...h.settings,[N]:D}})};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(A0,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("scanProtocolManagement")||"Scan Protocol Management"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:l,disabled:t||f,className:"px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[p.jsx(Aj,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:e("new")||"New"})]}),p.jsx("button",{onClick:S,disabled:t||o.length===0,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:p.jsx(zr,{className:"w-4 h-4"})}),p.jsxs("label",{className:`px-3 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm cursor-pointer ${t?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx(No,{className:"w-4 h-4"}),p.jsx("input",{type:"file",accept:".json",onChange:k,disabled:t,className:"hidden"})]})]})]}),f&&h&&p.jsxs("div",{className:"panel p-4 rounded-lg border-2 border-primary/50 space-y-4",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:h.name?e("editProtocol")||"Edit Protocol":e("newProtocol")||"New Protocol"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("name")||"Protocol Name"," *"]}),p.jsx("input",{type:"text",value:h.name,onChange:N=>j("name",N.target.value),placeholder:e("enterProtocolName")||"Enter protocol name",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("description")||"Description"}),p.jsx("input",{type:"text",value:h.description,onChange:N=>j("description",N.target.value),placeholder:e("enterDescription")||"Enter description",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("voltage")||"Voltage"," (kVp)"]}),p.jsx("input",{type:"number",value:h.settings.voltage,onChange:N=>M("voltage",parseInt(N.target.value)),min:"40",max:"160",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("current")||"Current"," (mA)"]}),p.jsx("input",{type:"number",value:h.settings.current,onChange:N=>M("current",parseInt(N.target.value)),min:"50",max:"500",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("rotationMode")||"Rotation Mode"}),p.jsxs("select",{value:h.settings.rotationMode,onChange:N=>M("rotationMode",N.target.value),className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"180°",children:"180°"}),p.jsx("option",{value:"360°",children:"360°"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("exposureTime")||"Exposure Time"," (ms)"]}),p.jsx("input",{type:"number",value:h.settings.exposureTime,onChange:N=>M("exposureTime",parseInt(N.target.value)),min:"10",max:"1000",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("numberOfProjections")||"Projections"}),p.jsx("input",{type:"number",value:h.settings.numberOfProjections,onChange:N=>M("numberOfProjections",parseInt(N.target.value)),min:"36",max:"1440",step:"36",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]}),p.jsxs("div",{className:"flex gap-2 justify-end",children:[p.jsx("button",{onClick:m,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors text-sm",children:e("cancel")||"Cancel"}),p.jsxs("button",{onClick:c,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm",children:[p.jsx(Mo,{className:"w-4 h-4"}),p.jsx("span",{children:e("save")||"Save"})]})]})]}),p.jsx("div",{className:"space-y-3",children:o.length===0?p.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[p.jsx(A0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),p.jsx("p",{className:"text-text-muted",children:e("noProtocols")||"No protocols available. Create a new protocol to get started."})]}):o.map(N=>p.jsx("div",{className:`panel p-4 rounded-lg border-2 transition-all ${(b==null?void 0:b.id)===N.id?"border-primary bg-primary/5":"border-border hover:border-primary/30"}`,children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"font-semibold text-text dark:text-text mb-1",children:N.name}),p.jsx("p",{className:"text-sm text-text-muted mb-2",children:N.description}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("voltage"),":"]}),p.jsxs("span",{className:"font-semibold text-text ml-1",children:[N.settings.voltage," kVp"]})]}),p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("current"),":"]}),p.jsxs("span",{className:"font-semibold text-text ml-1",children:[N.settings.current," mA"]})]}),p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("mode"),":"]}),p.jsx("span",{className:"font-semibold text-text ml-1",children:N.settings.rotationMode})]}),p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("lastUsed"),":"]}),p.jsx("span",{className:"font-semibold text-text ml-1",children:N.lastUsed||e("never")||"Never"})]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>w(N),disabled:t,className:"px-3 py-1.5 rounded bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-xs font-semibold",children:e("apply")||"Apply"}),p.jsx("button",{onClick:()=>a(N),disabled:t||f,className:"p-1.5 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors",title:e("edit")||"Edit",children:p.jsx(Zj,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>g(N),disabled:t,className:"p-1.5 rounded bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors",title:e("duplicate")||"Duplicate",children:p.jsx(Hk,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>y(N.id),disabled:t,className:"p-1.5 rounded bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 transition-colors",title:e("delete")||"Delete",children:p.jsx(Dc,{className:"w-4 h-4"})})]})]})},N.id))})]})},E_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=E.useState({xrayVoltage:0,xrayCurrent:0,xrayPower:0,tubeTemperature:0,detectorTemperature:0,detectorFrameRate:0,detectorExposure:0,cabinetTemperature:0,coolingFlowRate:0,vacuumPressure:0,acquisitionProgress:0,imagesAcquired:0,dataTransferRate:0,systemLoad:0}),[x,b]=E.useState({voltage:[],current:[],temperature:[],power:[]}),[C,f]=E.useState([]);E.useEffect(()=>{const d=setInterval(()=>{const a={xrayVoltage:100+Math.random()*40,xrayCurrent:150+Math.random()*100,xrayPower:15+Math.random()*10,tubeTemperature:45+Math.random()*15,detectorTemperature:-20+Math.random()*2,detectorFrameRate:8+Math.random()*4,detectorExposure:80+Math.random()*40,cabinetTemperature:22+Math.random()*3,coolingFlowRate:18+Math.random()*4,vacuumPressure:1e-6+Math.random()*1e-6,acquisitionProgress:Math.min(100,r.acquisitionProgress+Math.random()*5),imagesAcquired:Math.floor(r.imagesAcquired+Math.random()*3),dataTransferRate:50+Math.random()*50,systemLoad:40+Math.random()*30};o(a),b(c=>({voltage:[...c.voltage.slice(-19),a.xrayVoltage],current:[...c.current.slice(-19),a.xrayCurrent],temperature:[...c.temperature.slice(-19),a.tubeTemperature],power:[...c.power.slice(-19),a.xrayPower]}));const l=[];a.tubeTemperature>55&&l.push({id:Date.now(),severity:"warning",message:e("tubeTempHigh")||"Tube temperature is high",value:`${a.tubeTemperature.toFixed(1)}°C`}),a.xrayPower>23&&l.push({id:Date.now()+1,severity:"warning",message:e("powerHigh")||"X-ray power is high",value:`${a.xrayPower.toFixed(1)} kW`}),a.coolingFlowRate<19&&l.push({id:Date.now()+2,severity:"warning",message:e("coolingFlowLow")||"Cooling flow rate is low",value:`${a.coolingFlowRate.toFixed(1)} L/min`}),f(l)},1e3);return()=>clearInterval(d)},[r.acquisitionProgress,r.imagesAcquired,e]);const s=({icon:d,label:a,value:l,unit:c,color:m,trend:y})=>p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("div",{className:"flex items-start justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(d,{className:`w-5 h-5 text-${m}-600`}),p.jsx("span",{className:"text-xs font-medium text-text-muted",children:a})]}),y&&p.jsxs("div",{className:`flex items-center gap-1 text-xs ${y>0?"text-green-600":"text-red-600"}`,children:[y>0?p.jsx(Ac,{className:"w-3 h-3"}):p.jsx(a_,{className:"w-3 h-3"}),p.jsxs("span",{children:[Math.abs(y).toFixed(1),"%"]})]})]}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:`text-2xl font-bold text-${m}-600`,children:typeof l=="number"?l.toFixed(1):l}),p.jsx("span",{className:"text-sm text-text-muted",children:c})]})]}),h=({data:d,color:a})=>{const l=Math.max(...d,1),c=Math.min(...d,0),m=l-c||1;return p.jsx("div",{className:"flex items-end gap-0.5 h-12",children:d.map((y,g)=>p.jsx("div",{className:`flex-1 bg-${a}-500 rounded-t transition-all`,style:{height:`${(y-c)/m*100}%`,opacity:.3+g/d.length*.7}},g))})};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(nr,{className:"w-5 h-5 text-primary animate-pulse"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("realtimeMonitoring")||"Real-time Monitoring Dashboard"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[p.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),p.jsx("span",{className:"font-semibold",children:e("active")||"Active"})]})]}),C.length>0&&p.jsx("div",{className:"space-y-2",children:C.map(d=>p.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${d.severity==="warning"?"bg-yellow-500/10 border-2 border-yellow-500/30":"bg-red-500/10 border-2 border-red-500/30"}`,children:[p.jsx(pc,{className:`w-5 h-5 ${d.severity==="warning"?"text-yellow-600":"text-red-600"}`}),p.jsx("div",{className:"flex-1",children:p.jsx("span",{className:"text-sm font-medium text-text",children:d.message})}),p.jsx("span",{className:"text-sm font-bold text-text",children:d.value})]},d.id))}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(s,{icon:Un,label:e("voltage")||"Voltage",value:r.xrayVoltage,unit:"kVp",color:"blue",trend:x.voltage.length>1?(x.voltage[x.voltage.length-1]-x.voltage[x.voltage.length-2])/x.voltage[x.voltage.length-2]*100:0}),p.jsx(s,{icon:Un,label:e("current")||"Current",value:r.xrayCurrent,unit:"mA",color:"purple",trend:x.current.length>1?(x.current[x.current.length-1]-x.current[x.current.length-2])/x.current[x.current.length-2]*100:0}),p.jsx(s,{icon:go,label:e("power")||"Power",value:r.xrayPower,unit:"kW",color:"green",trend:x.power.length>1?(x.power[x.power.length-1]-x.power[x.power.length-2])/x.power[x.power.length-2]*100:0}),p.jsx(s,{icon:Cb,label:e("tubeTemp")||"Tube Temp",value:r.tubeTemperature,unit:"°C",color:"red",trend:x.temperature.length>1?(x.temperature[x.temperature.length-1]-x.temperature[x.temperature.length-2])/x.temperature[x.temperature.length-2]*100:0})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("voltage")||"Voltage"," (",e("last20s")||"Last 20s",")"]}),p.jsx(h,{data:x.voltage,color:"blue"})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("current")||"Current"," (",e("last20s")||"Last 20s",")"]}),p.jsx(h,{data:x.current,color:"purple"})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("power")||"Power"," (",e("last20s")||"Last 20s",")"]}),p.jsx(h,{data:x.power,color:"green"})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("temperature")||"Temperature"," (",e("last20s")||"Last 20s",")"]}),p.jsx(h,{data:x.temperature,color:"red"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("detectorTemp")||"Detector Temp"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorTemperature.toFixed(1),"°C"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("frameRate")||"Frame Rate"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorFrameRate.toFixed(1)," fps"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("exposure")||"Exposure"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorExposure.toFixed(0)," ms"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("coolingFlow")||"Cooling Flow"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.coolingFlowRate.toFixed(1)," L/min"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("dataRate")||"Data Rate"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.dataTransferRate.toFixed(0)," MB/s"]})]}),p.jsxs("div",{className:"panel p-3 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("systemLoad")||"System Load"}),p.jsxs("div",{className:"text-lg font-bold text-text",children:[r.systemLoad.toFixed(0),"%"]})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:e("acquisitionProgress")||"Acquisition Progress"}),p.jsxs("span",{className:"text-sm font-mono font-bold text-primary",children:[r.acquisitionProgress.toFixed(1),"%"]})]}),p.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${r.acquisitionProgress}%`}})}),p.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[p.jsxs("span",{children:[e("imagesAcquired")||"Images Acquired",": ",r.imagesAcquired]}),p.jsxs("span",{children:[e("estimatedTimeRemaining")||"Est. Time",": ",Math.max(0,Math.floor((100-r.acquisitionProgress)*2)),"s"]})]})]})]})},M_=()=>{const{t}=tt(),{isConnected:e}=Is(),r=E.useMemo(()=>({power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1}),[]),{pageData:o,handleChange:x,updateFormData:b}=Rc("initialParameters",r),[C,f]=E.useState(null),s=[{value:"mA",label:"mA"},{value:"μA",label:"μA"}],h=[{value:"Al",label:t("aluminum")},{value:"Cu",label:t("copper")},{value:"Ag",label:t("silver")}],d=[{value:"8-bit",label:t("8bit")},{value:"16-bit",label:t("16bit")}],a=E.useCallback(()=>{const g=!o.tubeStatus;b({...o,tubeStatus:g,tubeVoltageDisplay:g?"100":"0",tubeCurrentDisplay:g?"10":"0"})},[o,b]),l=E.useCallback(()=>{b({...o,cabinCameraStatus:!o.cabinCameraStatus})},[o,b]),c=E.useCallback(()=>{b({...o,fastImaging:!o.fastImaging})},[o,b]),m=E.useCallback(()=>{b({...o,dualEnergy:!o.dualEnergy})},[o,b]),y={standard:()=>{f("standard"),b({...o,power:"50",tubeVoltage:"120",anodeCurrent:"10"})},highPower:()=>{f("highPower"),b({...o,power:"100",tubeVoltage:"150",anodeCurrent:"20"})},clear:()=>{f("clear"),b({...r})}};return p.jsxs(Do,{children:[p.jsx(Oo,{icon:Un}),p.jsx(b_,{onStatusChange:g=>{console.log("System Status:",g)}}),p.jsx("div",{className:"card p-4 mb-4",children:p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries({standard:t("presetStandard"),highPower:t("presetHighPower"),clear:t("clearAll")}).map(([g,w])=>p.jsx("button",{onClick:y[g],className:`h-10 px-4 variant-primary rounded-lg border border-border transition-all duration-200 text-sm font-medium flex-shrink-0 ${C===g?"button-active":""}`,children:w},g))})}),p.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[p.jsx(St,{label:t("power"),icon:go,value:o.power,unit:"W",children:p.jsx(yt,{type:"number",name:"power",value:o.power,onChange:x,placeholder:t("enterPower"),min:"0",step:"1"})}),p.jsx(St,{label:t("tubeVoltage"),icon:Un,value:o.tubeVoltage,unit:"kVp",children:p.jsx(yt,{type:"number",name:"tubeVoltage",value:o.tubeVoltage,onChange:x,placeholder:t("enterTubeVoltage"),min:"0",step:"0.1"})}),p.jsx(St,{label:t("anodeCurrent"),icon:Ck,value:o.anodeCurrent,unit:o.anodeCurrentUnit,children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx(yt,{type:"number",name:"anodeCurrent",value:o.anodeCurrent,onChange:x,placeholder:t("enterAnodeCurrent"),min:"0",step:"0.1",className:"flex-1"}),p.jsx(tr,{name:"anodeCurrentUnit",value:o.anodeCurrentUnit,onChange:x,options:s,className:"w-20"})]})}),p.jsx(St,{label:t("filtration"),icon:bn,children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx(tr,{name:"filtrationMaterial",value:o.filtrationMaterial,onChange:x,options:h,className:"flex-1"}),p.jsx(yt,{type:"number",name:"filtrationThickness",value:o.filtrationThickness,onChange:x,placeholder:t("enterThickness"),min:"0",step:"0.01",className:"w-28"})]})}),p.jsx(St,{label:t("exposureTime"),icon:Vk,children:p.jsx(yt,{type:"text",value:o.exposureTime,disabled:!0,className:"bg-background-secondary dark:bg-accent cursor-not-allowed"})}),p.jsx(St,{label:t("bitDepth"),icon:wb,children:p.jsx(tr,{name:"bitDepth",value:o.bitDepth,onChange:x,options:d})}),p.jsx(St,{label:t("singleCalibration"),icon:zt,value:o.singleCalibration,children:p.jsx(yt,{type:"number",name:"singleCalibration",value:o.singleCalibration,onChange:x,placeholder:t("enterSingleCalibration"),min:"0",step:"0.1"})}),p.jsx(St,{label:t("rotateCalibration"),icon:zt,value:o.rotateCalibration,children:p.jsx(yt,{type:"number",name:"rotateCalibration",value:o.rotateCalibration,onChange:x,placeholder:t("enterRotateCalibration"),min:"0",step:"0.1"})}),p.jsx("div",{className:"card p-6 lg:col-span-2",children:p.jsxs(St,{label:t("tubeStatus"),icon:F0,showValue:!1,children:[p.jsx(Pr,{active:o.tubeStatus,onClick:a,icon:F0,disabled:!e}),p.jsx("div",{className:"flex gap-2 sm:gap-4 mt-3 sm:mt-4",children:[{label:t("voltage"),value:o.tubeVoltageDisplay,unit:"kVp"},{label:t("current"),value:o.tubeCurrentDisplay,unit:"mA"}].map(({label:g,value:w,unit:S})=>p.jsxs("div",{className:"text-center flex-1",children:[p.jsx("div",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted mb-1 font-vazir",children:g}),p.jsxs("div",{className:"panel px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-border",children:[p.jsx("span",{className:"text-base sm:text-lg font-mono font-bold text-text dark:text-text",children:w}),p.jsx("span",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted ml-1 font-vazir",children:S})]})]},g))})]})}),p.jsxs(St,{label:t("fastImaging"),icon:mo,showValue:!1,children:[p.jsx(Pr,{active:o.fastImaging,onClick:c,icon:mo,disabled:!e}),p.jsxs("div",{className:"mt-4",children:[p.jsx("label",{className:"font-medium text-text dark:text-text font-vazir mb-2 block",children:t("rotationSpeed")}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(yt,{type:"number",name:"rotationSpeed",value:o.rotationSpeed,onChange:x,placeholder:t("enterRotationSpeed"),min:"0",step:"0.1"}),p.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted font-vazir",children:"rpm"})]})]})]}),p.jsx(St,{label:t("dualEnergy"),icon:Un,showValue:!1,children:p.jsx(Pr,{active:o.dualEnergy,onClick:m,icon:Un,disabled:!e})})]}),p.jsxs("div",{className:"card p-4 lg:p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(H0,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("cabinCameraStatus")}),p.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.cabinCameraStatus?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:o.cabinCameraStatus?t("active"):t("inactive")})]}),p.jsx("button",{onClick:l,disabled:!e,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${o.cabinCameraStatus?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,children:o.cabinCameraStatus?p.jsxs(p.Fragment,{children:[p.jsx(U0,{className:"w-4 h-4"}),p.jsx("span",{children:t("turnOff")||"Turn Off"})]}):p.jsxs(p.Fragment,{children:[p.jsx(H0,{className:"w-4 h-4"}),p.jsx("span",{children:t("turnOn")||"Turn On"})]})})]}),o.cabinCameraStatus?p.jsx("div",{className:"rounded-lg overflow-hidden border-2 border-border",children:p.jsx(kb,{})}):p.jsxs("div",{className:"aspect-video bg-black rounded-lg flex flex-col items-center justify-center text-text-muted border-2 border-border",children:[p.jsx(U0,{className:"w-16 h-16 mb-3 opacity-30"}),p.jsx("p",{className:"text-sm",children:t("cameraOff")||"Camera is turned off"})]})]}),p.jsx(E_,{disabled:!e}),p.jsx(__,{disabled:!e}),p.jsx(T_,{onTrajectoryChange:g=>{console.log("Trajectory:",g)}}),p.jsx(k_,{onGeometryChange:g=>{console.log("Geometry:",g)}}),p.jsx(w_,{tubeParams:{voltage:o.tubeVoltageDisplay,current:o.tubeCurrentDisplay,power:o.power,exposureTime:o.exposureTime,temperature:25.5+Math.random()*5}})]})},N_=({onPositionChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=E.useState({x:0,y:0,z:0,theta:0,gamma:0}),[b,C]=E.useState([]),[f,s]=E.useState(1),h=E.useCallback((g,w)=>{const S={...o,[g]:parseFloat(w)||0};x(S),t&&t(S)},[o,t]),d=E.useCallback((g,w)=>{const S=w*f,k=o[g]+S;h(g,k)},[o,f,h]),a=E.useCallback(()=>{const g={x:0,y:0,z:0,theta:0,gamma:0};x(g),t&&t(g)},[t]),l=E.useCallback(()=>{const g=`Position ${b.length+1}`;C([...b,{name:g,...o}])},[o,b]),c=E.useCallback(g=>{const{name:w,...S}=g;x(S),t&&t(S)},[t]),m=E.useCallback(g=>{C(b.filter((w,S)=>S!==g))},[b]),y=({icon:g,onClick:w,label:S})=>p.jsx("button",{onClick:w,disabled:e,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 disabled:bg-gray-200 disabled:cursor-not-allowed transition-colors flex items-center justify-center",title:S,children:p.jsx(g,{className:"w-5 h-5 text-primary"})});return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Of,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("manipulator")})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:a,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(R0,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("home")||"Home"})]}),p.jsxs("button",{onClick:l,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[p.jsx(Mo,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("save")})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text whitespace-nowrap",children:[r("stepSize")||"Step Size",":"]}),p.jsx("div",{className:"flex gap-2",children:[.1,1,5,10].map(g=>p.jsx("button",{onClick:()=>s(g),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f===g?"bg-primary text-white":"bg-background-secondary hover:bg-accent text-text"}`,children:g},g))})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(_j,{className:"w-4 h-4"}),r("linearMovement")||"Linear Movement"]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("div",{className:"text-xs text-text-muted mb-2 ",children:["X-Y ",r("control")||"Control"]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-[200px] mx-auto",children:[p.jsx("div",{}),p.jsxs("div",{className:"flex flex-col items-center gap-1",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted",children:"Y"}),p.jsx(y,{icon:Vd,onClick:()=>d("y",1),label:"Y+"})]}),p.jsx("div",{}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-xs font-medium text-text-muted",children:"X"}),p.jsx(y,{icon:xb,onClick:()=>d("x",-1),label:"X-"})]}),p.jsxs("div",{className:"flex flex-col items-center justify-center",children:[p.jsx("button",{onClick:a,disabled:e,className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:p.jsx(R0,{className:"w-5 h-5 text-gray-600"})}),p.jsxs("div",{className:"text-xs font-mono font-bold text-text-muted mt-1",children:[o.x.toFixed(1),", ",o.y.toFixed(1)]})]}),p.jsx(y,{icon:yb,onClick:()=>d("x",1),label:"X+"}),p.jsx("div",{}),p.jsx(y,{icon:mc,onClick:()=>d("y",-1),label:"Y-"}),p.jsx("div",{})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsxs("div",{className:"text-xs text-text-muted mb-2",children:["Z ",r("control")||"Control"]}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(y,{icon:mc,onClick:()=>d("z",-1),label:"Z-"}),p.jsx("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:o.z.toFixed(1)}),p.jsx(y,{icon:Vd,onClick:()=>d("z",1),label:"Z+"})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(to,{className:"w-4 h-4"}),r("rotationalMovement")||"Rotational Movement"]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-2",children:"θ (Theta)"}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(y,{icon:_i,onClick:()=>d("theta",-1),label:"θ-"}),p.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[o.theta.toFixed(1),"°"]}),p.jsx(y,{icon:to,onClick:()=>d("theta",1),label:"θ+"})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg",children:[p.jsx("div",{className:"text-xs text-text-muted mb-2",children:"γ (Gamma)"}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx(y,{icon:_i,onClick:()=>d("gamma",-1),label:"γ-"}),p.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[o.gamma.toFixed(1),"°"]}),p.jsx(y,{icon:to,onClick:()=>d("gamma",1),label:"γ+"})]})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("manualInput")||"Manual Input"}),p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(o).map(([g,w])=>p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-text-muted mb-1 block uppercase",children:g==="theta"?"θ":g==="gamma"?"γ":g.toUpperCase()}),p.jsx(yt,{type:"number",value:w,onChange:S=>h(g,S.target.value),step:"0.1",disabled:e})]},g))})]}),b.length>0&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("savedPositions")||"Saved Positions"}),p.jsx("div",{className:"grid gap-2",children:b.map((g,w)=>p.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[p.jsxs("button",{onClick:()=>c(g),disabled:e,className:"flex-1 text-left text-sm text-text hover:text-primary transition-colors disabled:cursor-not-allowed",children:[p.jsxs("span",{className:"font-medium",children:[g.name,":"]}),p.jsxs("span",{className:"text-text-muted ml-2 font-mono text-xs",children:["X:",g.x.toFixed(1)," Y:",g.y.toFixed(1)," Z:",g.z.toFixed(1)," θ:",g.theta.toFixed(1),"° γ:",g.gamma.toFixed(1),"°"]})]}),p.jsx("button",{onClick:()=>m(w),className:"ml-2 p-1 rounded hover:bg-red-100 text-red-600 transition-colors",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))})]})]})},O_=({speed:t,onSpeedChange:e,disabled:r=!1})=>{var b;const{t:o}=tt(),x=[{value:"low",label:o("joystickSpeedLow")||"Low",icon:go,color:"bg-green-500",description:o("lowSpeedDesc")||"Precise movements, best for fine-tuning",multiplier:"1x"},{value:"medium",label:o("joystickSpeedMedium")||"Medium",icon:Un,color:"bg-yellow-500",description:o("mediumSpeedDesc")||"Balanced speed for general positioning",multiplier:"5x"},{value:"high",label:o("joystickSpeedHigh")||"High",icon:Ac,color:"bg-red-500",description:o("highSpeedDesc")||"Fast movements for large adjustments",multiplier:"10x"}];return p.jsxs("div",{className:"card p-4 lg:p-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx(go,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:o("joystickSpeed")})]}),p.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:x.map(C=>{const f=C.icon,s=(t==null?void 0:t.toLowerCase())===C.value;return p.jsx("button",{onClick:()=>e(C.value),disabled:r,className:`
                p-4 rounded-lg border-2 transition-all text-left
                ${s?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-background-secondary/50"}
                ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              `,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:`p-2 rounded-lg ${C.color} bg-opacity-20`,children:p.jsx(f,{className:`w-5 h-5 ${C.color.replace("bg-","text-")}`})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"font-semibold text-text dark:text-text",children:C.label}),p.jsx("span",{className:"text-xs font-mono font-bold text-primary",children:C.multiplier})]}),p.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted",children:C.description}),s&&p.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[p.jsx("div",{className:`w-2 h-2 rounded-full ${C.color} animate-pulse`}),p.jsx("span",{className:"text-xs font-medium text-primary",children:o("active")||"Active"})]})]})]})},C.value)})}),p.jsx("div",{className:"mt-4 p-3 panel rounded-lg",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"text-sm text-text-muted dark:text-text-muted",children:[o("currentSpeed")||"Current Speed",":"]}),p.jsx("span",{className:"text-sm font-semibold text-text dark:text-text",children:((b=x.find(C=>C.value===(t==null?void 0:t.toLowerCase())))==null?void 0:b.label)||"N/A"})]})})]})},D_=()=>{const{t}=tt(),e=E.useMemo(()=>({manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null}),[]),{pageData:r,updateFormData:o}=Rc("positionAndOptimization",e);t("joystickSpeedLow"),t("joystickSpeedMedium"),t("joystickSpeedHigh"),E.useMemo(()=>[{name:"manipulatorX",label:t("manipulatorX"),placeholder:t("enterManipulatorX")},{name:"manipulatorY",label:t("manipulatorY"),placeholder:t("enterManipulatorY")},{name:"manipulatorZ",label:t("manipulatorZ"),placeholder:t("enterManipulatorZ")},{name:"manipulatorTheta",label:t("manipulatorTheta"),placeholder:t("enterManipulatorTheta")},{name:"manipulatorGamma",label:t("manipulatorGamma"),placeholder:t("enterManipulatorGamma")}],[t]);const x=E.useCallback(b=>{const C=b.target.files[0];o({...r,uploadedFile:C?C.name:null})},[r,o]);return p.jsxs(Do,{children:[p.jsx(Oo,{icon:Of}),p.jsx(N_,{onPositionChange:b=>{console.log("Manipulator Position:",b),o({...r,manipulatorX:b.x,manipulatorY:b.y,manipulatorZ:b.z,manipulatorTheta:b.theta,manipulatorGamma:b.gamma})}}),p.jsx(O_,{speed:r.joystickSpeed,onSpeedChange:b=>{o({...r,joystickSpeed:b})}}),p.jsx("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:p.jsxs(St,{label:t("uploadFile"),icon:No,children:[p.jsx("input",{type:"file",name:"uploadedFile",onChange:x,className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:shadow-sm focus:shadow-primary/50 transition-colors font-vazir text-xs sm:text-sm"}),r.uploadedFile&&p.jsx("div",{className:"mt-2",children:p.jsxs("span",{className:"text-xs sm:text-sm text-primary dark:text-primary font-medium font-vazir",children:[t("selectedFile"),": ",r.uploadedFile]})})]})})]})},no=({children:t,onClick:e,variant:r="primary",size:o="md",disabled:x=!1,loading:b=!1,icon:C,className:f="",...s})=>{const{i18n:h}=tt(),d=h.language==="fa",a="font-vazir rounded-xl font-medium shadow-sm hover:shadow-md",l="transition-all duration-300 ease-out",c={sm:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm",md:"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base",lg:"px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg"},m={primary:"bg-primary hover:bg-primary-dark text-white",secondary:"bg-background-secondary hover:bg-accent text-text-muted",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white"},y=`
    ${a}
    ${l}
    ${c[o]}
    ${m[r]}
    ${x?"opacity-50 cursor-not-allowed":""}
    ${f}
  `;return p.jsx("button",{onClick:e,disabled:x||b,className:y,...s,children:p.jsxs("div",{className:`flex items-center gap-1 sm:gap-2 ${d?"flex-row-reverse":""}`,children:[b?p.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):C&&p.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t]})})},A_=({onAcquisitionStart:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=E.useState({rotationMode:"360",multiSegmentEnabled:!1,numberOfSegments:3,segmentOverlap:10,totalHeight:300,numberOfProjections:360,exposurePerProjection:100}),[b,C]=E.useState({isRunning:!1,currentSegment:0,currentProjection:0,progress:0}),f=(l,c)=>{x({...o,[l]:l==="multiSegmentEnabled"?c:parseFloat(c)||c})},s=()=>{C({isRunning:!0,currentSegment:0,currentProjection:0,progress:0}),t&&t(o);const l=o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections;let c=0;const m=setInterval(()=>{c++;const y=c/l*100,g=c%o.numberOfProjections,w=Math.floor(c/o.numberOfProjections);C({isRunning:c<l,currentSegment:w,currentProjection:g,progress:Math.min(y,100)}),c>=l&&clearInterval(m)},50)},h=()=>{C({...b,isRunning:!1})},d=()=>{C({isRunning:!1,currentSegment:0,currentProjection:0,progress:0})},a=()=>{const m=(o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections)*o.exposurePerProjection/1e3;return m<60?`${m.toFixed(1)}s`:`${(m/60).toFixed(1)}min`};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ij,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("acquisitionSettings")||"Acquisition Settings"})]}),p.jsxs("div",{className:"flex gap-2",children:[b.isRunning?p.jsxs("button",{onClick:h,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2 text-sm",children:[p.jsx(Df,{className:"w-4 h-4"}),p.jsx("span",{children:r("stop")||"Stop"})]}):p.jsxs("button",{onClick:s,disabled:e,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[p.jsx(Af,{className:"w-4 h-4"}),p.jsx("span",{children:r("start")||"Start"})]}),p.jsxs("button",{onClick:d,disabled:e||b.isRunning,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[p.jsx(_i,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:r("reset")||"Reset"})]})]})]}),b.progress>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-text-muted",children:b.isRunning?r("acquiring")||"Acquiring...":r("completed")||"Completed"}),p.jsxs("span",{className:"font-mono font-bold text-primary",children:[b.progress.toFixed(1),"%"]})]}),p.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${b.progress}%`}})}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-text-muted",children:[p.jsxs("div",{children:["Segment: ",b.currentSegment+1," / ",o.multiSegmentEnabled?o.numberOfSegments:1]}),p.jsxs("div",{children:["Projection: ",b.currentProjection," / ",o.numberOfProjections]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("rotationMode")||"Rotation Mode"}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:["180","360"].map(l=>p.jsxs("button",{onClick:()=>f("rotationMode",l),disabled:e||b.isRunning,className:`p-4 rounded-lg border-2 transition-all ${o.rotationMode===l?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${e||b.isRunning?"opacity-50 cursor-not-allowed":""}`,children:[p.jsxs("div",{className:"text-2xl font-bold text-primary mb-1",children:[l,"°"]}),p.jsx("div",{className:"text-xs text-text-muted",children:l==="180"?r("halfRotation")||"Half rotation":r("fullRotation")||"Full rotation"})]},l))})]}),p.jsxs("div",{className:"panel p-4 rounded-lg space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(wb,{className:"w-4 h-4"}),r("multiSegmentImaging")||"Multi-Segment Imaging"]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:o.multiSegmentEnabled,onChange:l=>f("multiSegmentEnabled",l.target.checked),disabled:e||b.isRunning,className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),o.multiSegmentEnabled&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4 border-t border-border",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSegments")||"Number of Segments"}),p.jsx("input",{type:"number",value:o.numberOfSegments,onChange:l=>f("numberOfSegments",l.target.value),disabled:e||b.isRunning,min:"2",max:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("segmentOverlap")||"Overlap"," (%)"]}),p.jsx("input",{type:"number",value:o.segmentOverlap,onChange:l=>f("segmentOverlap",l.target.value),disabled:e||b.isRunning,min:"0",max:"50",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("totalHeight")||"Total Height"," (mm)"]}),p.jsx("input",{type:"number",value:o.totalHeight,onChange:l=>f("totalHeight",l.target.value),disabled:e||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfProjections")||"Number of Projections"}),p.jsx("input",{type:"number",value:o.numberOfProjections,onChange:l=>f("numberOfProjections",l.target.value),disabled:e||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("exposurePerProjection")||"Exposure per Projection"," (ms)"]}),p.jsx("input",{type:"number",value:o.exposurePerProjection,onChange:l=>f("exposurePerProjection",l.target.value),disabled:e||b.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("acquisitionSummary")||"Acquisition Summary"}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:r("mode")||"Mode"}),p.jsxs("div",{className:"font-semibold text-text",children:[o.rotationMode,"°"]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:r("segments")||"Segments"}),p.jsx("div",{className:"font-semibold text-text",children:o.multiSegmentEnabled?o.numberOfSegments:1})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:r("totalProjections")||"Total Proj."}),p.jsx("div",{className:"font-semibold text-text",children:o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:r("estimatedTime")||"Est. Time"}),p.jsx("div",{className:"font-semibold text-primary",children:a()})]})]})]})]})},R_=({targetPosition:t=null,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=E.useState({x:0,y:0,z:0,theta:0,gamma:0}),[b,C]=E.useState({x:0,y:0,z:0,theta:0,gamma:0});E.useEffect(()=>{if(!t)return;const d=setInterval(()=>{x(a=>{const l={...a};return Object.keys(t).forEach(c=>{const m=t[c],y=a[c],g=m-y;Math.abs(g)<.01?l[c]=m:l[c]=y+g*.1}),l})},50);return()=>clearInterval(d)},[t]),E.useEffect(()=>{if(!t){C({x:0,y:0,z:0,theta:0,gamma:0});return}const d={};Object.keys(t).forEach(a=>{d[a]=t[a]-o[a]}),C(d)},[o,t]);const f=()=>t?Object.keys(t).every(d=>Math.abs(b[d])<.1):!1,s=d=>{const a=Math.abs(d);return a<.1?"text-green-600 dark:text-green-400":a<1?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"},h=[{key:"x",label:"X",unit:"mm"},{key:"y",label:"Y",unit:"mm"},{key:"z",label:"Z",unit:"mm"},{key:"theta",label:"θ",unit:"°"},{key:"gamma",label:"γ",unit:"°"}];return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xj,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("positionFeedback")||"Position Feedback"})]}),p.jsx("div",{className:"flex items-center gap-2",children:f()?p.jsxs(p.Fragment,{children:[p.jsx(Eo,{className:"w-5 h-5 text-green-600"}),p.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"At Target"})]}):p.jsxs(p.Fragment,{children:[p.jsx(gc,{className:"w-5 h-5 text-yellow-600"}),p.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Moving"})]})})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(({key:d,label:a,unit:l})=>p.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-semibold text-text-muted",children:a}),p.jsx("span",{className:"text-xs text-text-muted",children:l})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("currentPosition")||"Current"}),p.jsx("div",{className:"text-2xl font-bold font-mono text-primary",children:o[d].toFixed(2)})]}),t&&p.jsxs("div",{children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("targetPosition")||"Target"}),p.jsx("div",{className:"text-lg font-semibold font-mono text-text",children:t[d].toFixed(2)})]}),t&&p.jsxs("div",{children:[p.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("positionError")||"Error"}),p.jsxs("div",{className:`text-lg font-bold font-mono ${s(b[d])}`,children:[b[d]>=0?"+":"",b[d].toFixed(2)]})]}),t&&Math.abs(b[d])>.1&&p.jsx("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,(1-Math.abs(b[d])/Math.abs(t[d]))*100))}%`}})})]},d))}),p.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("realTimePosition")||"Real-time Position Display"}),p.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:h.map(({key:d,label:a,unit:l})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-text-muted",children:[a,":"]}),p.jsxs("span",{className:"font-mono font-bold text-text",children:[o[d].toFixed(2)," ",l]})]},d))})]})]})},P_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=E.useState({enabled:!1,scanHeight:500,verticalStepSize:10,stitchingOverlap:5,detectorHeight:50}),[x,b]=E.useState({isScanning:!1,currentStep:0,totalSteps:0,progress:0}),C=(l,c)=>{o({...r,[l]:l==="enabled"?c:parseFloat(c)})},f=E.useMemo(()=>{const l=r.detectorHeight*(1-r.stitchingOverlap/100);return Math.ceil(r.scanHeight/l)},[r.scanHeight,r.detectorHeight,r.stitchingOverlap]),s=E.useMemo(()=>{const m=f*2;return m<60?`${m}s`:`${(m/60).toFixed(1)}min`},[f]),h=()=>{const l=f;b({isScanning:!0,currentStep:0,totalSteps:l,progress:0});let c=0;const m=setInterval(()=>{c++;const y=c/l*100;b({isScanning:c<l,currentStep:c,totalSteps:l,progress:Math.min(y,100)}),c>=l&&clearInterval(m)},100)},d=()=>{b({...x,isScanning:!1})},a=()=>{b({isScanning:!1,currentStep:0,totalSteps:0,progress:0})};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(L0,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("linearDetectorImaging")||"Linear Detector Imaging"})]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:r.enabled,onChange:l=>C("enabled",l.target.checked),disabled:t||x.isScanning,className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),r.enabled&&p.jsxs(p.Fragment,{children:[x.progress>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-text-muted",children:x.isScanning?e("acquiring")||"Scanning...":e("completed")||"Completed"}),p.jsxs("span",{className:"font-mono font-bold text-primary",children:[x.progress.toFixed(1),"%"]})]}),p.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${x.progress}%`}})}),p.jsxs("div",{className:"text-xs text-text-muted text-center",children:["Step: ",x.currentStep," / ",x.totalSteps]})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("scanHeight")||"Scan Height"," (mm)"]}),p.jsx("input",{type:"number",value:r.scanHeight,onChange:l=>C("scanHeight",l.target.value),disabled:t||x.isScanning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("verticalStepSize")||"Vertical Step Size"," (mm)"]}),p.jsx("input",{type:"number",value:r.verticalStepSize,onChange:l=>C("verticalStepSize",l.target.value),disabled:t||x.isScanning,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("stitchingOverlap")||"Stitching Overlap"," (%)"]}),p.jsx("input",{type:"number",value:r.stitchingOverlap,onChange:l=>C("stitchingOverlap",l.target.value),disabled:t||x.isScanning,min:"0",max:"50",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("detectorHeight")||"Detector Height"," (mm)"]}),p.jsx("input",{type:"number",value:r.detectorHeight,onChange:l=>C("detectorHeight",l.target.value),disabled:t||x.isScanning,min:"10",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("acquisitionSummary")||"Scan Summary"}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("numberOfSteps")||"Steps"}),p.jsx("div",{className:"font-semibold text-text",children:f})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("stitchingOverlap")||"Overlap"}),p.jsxs("div",{className:"font-semibold text-text",children:[r.stitchingOverlap,"%"]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("estimatedScanTime")||"Est. Time"}),p.jsx("div",{className:"font-semibold text-primary",children:s})]})]})]}),p.jsxs("div",{className:"flex gap-2 justify-center",children:[x.isScanning?p.jsxs("button",{onClick:d,className:"px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2",children:[p.jsx(Df,{className:"w-4 h-4"}),p.jsx("span",{children:e("stop")||"Stop"})]}):p.jsxs("button",{onClick:h,disabled:t,className:"px-6 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[p.jsx(Af,{className:"w-4 h-4"}),p.jsx("span",{children:e("start")||"Start Scan"})]}),p.jsxs("button",{onClick:a,disabled:t||x.isScanning,className:"px-6 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[p.jsx(_i,{className:"w-4 h-4"}),p.jsx("span",{children:e("reset")||"Reset"})]})]})]}),!r.enabled&&p.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[p.jsx(L0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),p.jsx("p",{className:"text-text-muted",children:e("linearDetectorMode")||"Enable Linear Detector Mode to configure settings"})]})]})},L_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=E.useState("single"),[x,b]=E.useState({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0}),[C,f]=E.useState({numberOfAngles:36,angleStep:10}),s=()=>{b({...x,status:"calibrating"}),setTimeout(()=>{const m=85+Math.random()*15;b({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(m),singleImageCaptured:!0,rotationalProgress:0,rotationalAngles:0})},2e3)},h=()=>{b({...x,status:"calibrating",rotationalProgress:0});let m=0;const y=C.numberOfAngles,g=setInterval(()=>{m++;const w=m/y*100;if(m>=y){clearInterval(g);const S=90+Math.random()*10;b({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(S),singleImageCaptured:!1,rotationalProgress:100,rotationalAngles:y})}else b(S=>({...S,status:"calibrating",rotationalProgress:w,rotationalAngles:m}))},100)},d=()=>{b({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0})},l=(()=>{switch(x.status){case"notCalibrated":return{icon:p.jsx(vb,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:e("notCalibrated")||"Not Calibrated"};case"calibrating":return{icon:p.jsx(gc,{className:"w-6 h-6 animate-pulse"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:e("calibrating")||"Calibrating..."};case"calibrated":return{icon:p.jsx(Eo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:e("calibrated")||"Calibrated"};default:return{}}})(),c=m=>m>=95?"text-green-600 dark:text-green-400":m>=85?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(n_,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("calibrationSystem")||"Calibration System"})]})}),p.jsxs("div",{className:`panel p-4 rounded-lg border-2 ${l.border} ${l.bg}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:e("calibrationStatus")||"Calibration Status"}),p.jsxs("div",{className:`flex items-center gap-2 ${l.color}`,children:[l.icon,p.jsx("span",{className:"font-semibold",children:l.text})]})]}),x.status==="calibrated"&&p.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-3 pt-3 border-t border-border",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("calibrationDate")||"Date"}),p.jsx("div",{className:"font-semibold text-text",children:x.date})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("calibrationQuality")||"Quality"}),p.jsxs("div",{className:`font-semibold text-lg ${c(x.quality)}`,children:[x.quality,"%"]})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("calibrationType")||"Calibration Type"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>o("single"),disabled:t||x.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="single"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${t||x.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(mo,{className:"w-5 h-5 text-primary"}),p.jsx("span",{className:"font-semibold text-text",children:e("singleImageCalibration")||"Single Image"})]}),p.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using a single phantom image"})]}),p.jsxs("button",{onClick:()=>o("rotational"),disabled:t||x.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="rotational"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${t||x.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(to,{className:"w-5 h-5 text-primary"}),p.jsx("span",{className:"font-semibold text-text",children:e("rotationalCalibration")||"Rotational"})]}),p.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using multiple angles for higher accuracy"})]})]})]}),r==="single"&&p.jsx("div",{className:"space-y-4",children:p.jsxs("button",{onClick:s,disabled:t||x.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[p.jsx(mo,{className:"w-5 h-5"}),p.jsx("span",{children:e("captureCalibrationImage")||"Capture Calibration Image"})]})}),r==="rotational"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("numberOfSteps")||"Number of Angles"}),p.jsx("input",{type:"number",value:C.numberOfAngles,onChange:m=>f({...C,numberOfAngles:parseInt(m.target.value),angleStep:360/parseInt(m.target.value)}),disabled:t||x.status==="calibrating",min:"12",max:"72",step:"6",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("anglePerStep")||"Angle Step"," (°)"]}),p.jsx("input",{type:"number",value:C.angleStep.toFixed(1),disabled:!0,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-gray-100 dark:bg-gray-700 text-text dark:text-text outline-none cursor-not-allowed"})]})]}),x.status==="calibrating"&&x.rotationalProgress>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsxs("span",{className:"text-text-muted",children:["Angle: ",x.rotationalAngles," / ",C.numberOfAngles]}),p.jsxs("span",{className:"font-mono font-bold text-primary",children:[x.rotationalProgress.toFixed(1),"%"]})]}),p.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${x.rotationalProgress}%`}})})]}),p.jsxs("button",{onClick:h,disabled:t||x.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[p.jsx(to,{className:"w-5 h-5"}),p.jsx("span",{children:e("startCalibrationScan")||"Start Calibration Scan"})]})]}),x.status==="calibrated"&&p.jsx("button",{onClick:d,disabled:t,className:"w-full px-6 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 disabled:bg-gray-400 transition-colors font-semibold",children:e("recalibrate")||"Recalibrate System"})]})},F_=()=>{const{t}=tt(),{isConnected:e,send:r}=Is(),o=E.useMemo(()=>({imagingMode:"180°",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"}),[]),{pageData:x,handleChange:b,updateFormData:C}=Rc("projectionAcquisition",o),[f,s]=E.useState({x:0,y:0,z:0,theta:0,gamma:0}),h=E.useCallback(c=>{console.log("Acquisition started with settings:",c),e&&r(JSON.stringify({type:"acquisition_start",settings:c}))},[e,r]);t("180degree"),t("360degree");const d=E.useCallback(()=>{C({...x,hdrStatus:!x.hdrStatus})},[x,C]),a=E.useCallback(c=>{if(e){const m=`Action:${c}`;r(m)?console.log(`✅ Action ${c} sent via WebSocket`):console.error(`❌ Failed to send Action ${c}`)}},[e,r]),l=E.useMemo(()=>[{key:"Gain",label:t("gain"),icon:zt},{key:"Offset",label:t("offset"),icon:zt},{key:"Preprocess",label:t("preprocess"),icon:Rr}],[t]);return p.jsxs(Do,{children:[p.jsx(Oo,{icon:mo}),p.jsx(A_,{onAcquisitionStart:h,disabled:!e}),p.jsx(R_,{targetPosition:f,disabled:!e}),p.jsx(P_,{disabled:!e}),p.jsx(L_,{disabled:!e}),p.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[p.jsx("div",{className:"card p-6 lg:col-span-2",children:p.jsx(St,{label:t("imageAdjustments"),icon:zt,showValue:!1,children:p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:l.map(({key:c,label:m,icon:y})=>p.jsx(no,{variant:"secondary",icon:y,onClick:()=>a(c),disabled:!e,children:m},c))})})}),p.jsx("div",{className:"card p-6 lg:col-span-2",children:p.jsx(St,{label:t("hdr"),icon:P0,showValue:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(Pr,{active:x.hdrStatus,onClick:d,icon:P0,disabled:!e,showStatus:!0}),x.hdrStatus&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("energyLevel1")}),p.jsx(yt,{type:"number",name:"energyLevel1",value:x.energyLevel1,onChange:b,placeholder:t("enterEnergyLevel1"),min:"0",step:"1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("energyLevel2")}),p.jsx(yt,{type:"number",name:"energyLevel2",value:x.energyLevel2,onChange:b,placeholder:t("enterEnergyLevel2"),min:"0",step:"1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("imageCount")}),p.jsx(yt,{type:"number",name:"imageCount",value:x.imageCount,onChange:b,placeholder:t("enterImageCount"),min:"1",step:"1"})]})]})]})})})]})]})},z_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=E.useState({snr:0,cnr:0,spatialResolution:0,uniformity:0,artifacts:0,overallQuality:0}),[x,b]=E.useState({isAssessing:!1,lastAssessment:null,assessmentCount:0});E.useEffect(()=>{if(x.isAssessing){const l=setInterval(()=>{o({snr:25+Math.random()*15,cnr:15+Math.random()*10,spatialResolution:8+Math.random()*4,uniformity:90+Math.random()*8,artifacts:Math.floor(Math.random()*5),overallQuality:75+Math.random()*20})},1e3);return()=>clearInterval(l)}},[x.isAssessing]);const C=()=>{b({isAssessing:!0,lastAssessment:new Date().toLocaleString(),assessmentCount:x.assessmentCount+1})},f=()=>{b({...x,isAssessing:!1})},s=(l,c)=>l>=c.excellent?"text-green-600 dark:text-green-400":l>=c.good?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",d=(()=>{const l=r.overallQuality;return l>=90?{icon:p.jsx(Eo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:e("excellent")||"Excellent"}:l>=75?{icon:p.jsx(Ac,{className:"w-6 h-6"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:e("good")||"Good"}:{icon:p.jsx(pc,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:e("needsImprovement")||"Needs Improvement"}})(),a=[{key:"snr",label:"SNR",value:r.snr,unit:"dB",thresholds:{excellent:35,good:30},description:"Signal-to-Noise Ratio"},{key:"cnr",label:"CNR",value:r.cnr,unit:"dB",thresholds:{excellent:20,good:17},description:"Contrast-to-Noise Ratio"},{key:"spatialResolution",label:e("spatialResolution")||"Spatial Resolution",value:r.spatialResolution,unit:"lp/mm",thresholds:{excellent:10,good:9},description:"Line pairs per millimeter"},{key:"uniformity",label:e("uniformity")||"Uniformity",value:r.uniformity,unit:"%",thresholds:{excellent:95,good:92},description:"Image uniformity"},{key:"artifacts",label:e("artifacts")||"Artifacts",value:r.artifacts,unit:"",thresholds:{excellent:1,good:2},description:"Number of visible artifacts",inverted:!0}];return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(nr,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("imageQualityAssessment")||"Image Quality Assessment"})]}),x.isAssessing?p.jsx("button",{onClick:f,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors text-sm font-semibold",children:e("stop")||"Stop"}):p.jsx("button",{onClick:C,disabled:t,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-sm font-semibold",children:e("start")||"Start Assessment"})]}),x.isAssessing&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`panel p-4 rounded-lg border-2 ${d.border} ${d.bg}`,children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-text-muted mb-1",children:e("overallQuality")||"Overall Quality"}),p.jsxs("div",{className:`text-3xl font-bold ${d.color}`,children:[r.overallQuality.toFixed(1),"%"]})]}),p.jsxs("div",{className:`flex items-center gap-2 ${d.color}`,children:[d.icon,p.jsx("span",{className:"font-semibold",children:d.text})]})]})}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(l=>{const c=l.inverted?s(l.thresholds.excellent-l.value+l.thresholds.excellent,l.thresholds):s(l.value,l.thresholds);return p.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-semibold text-text-muted",children:l.label}),l.unit&&p.jsx("span",{className:"text-xs text-text-muted",children:l.unit})]}),p.jsx("div",{className:`text-2xl font-bold font-mono ${c}`,children:l.value.toFixed(1)}),p.jsx("div",{className:"text-xs text-text-muted",children:l.description}),p.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full transition-all duration-300 ${c.includes("green")?"bg-green-500":c.includes("yellow")?"bg-yellow-500":"bg-red-500"}`,style:{width:l.inverted?`${Math.max(0,Math.min(100,100-l.value/5*100))}%`:`${Math.min(100,l.value/(l.thresholds.excellent*1.2)*100)}%`}})})]},l.key)})}),p.jsx("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:p.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm",children:[p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("lastAssessment")||"Last Assessment",":"]}),p.jsx("span",{className:"font-semibold text-text ml-2",children:x.lastAssessment})]}),p.jsxs("div",{children:[p.jsxs("span",{className:"text-text-muted",children:[e("assessments")||"Total Assessments",":"]}),p.jsx("span",{className:"font-semibold text-primary ml-2",children:x.assessmentCount})]})]})})]}),!x.isAssessing&&x.assessmentCount===0&&p.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[p.jsx(nr,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),p.jsx("p",{className:"text-text-muted",children:e("startAssessmentMessage")||'Click "Start Assessment" to begin quality evaluation'})]})]})},B_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=E.useState({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"}),[x,b]=E.useState({temperature:-20.5,temperatureStable:!0,readoutNoise:3.2,darkCurrent:.05,lastCalibration:"2025-10-13 14:30"}),C=(a,l)=>{o({...r,[a]:l})},f=()=>{console.log("Saving detector settings:",r),alert(e("settingsSaved")||"Settings saved successfully!")},s=()=>{o({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"})},h=()=>{const a=JSON.stringify(r,null,2),l=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(l),m=document.createElement("a");m.href=c,m.download=`detector_config_${new Date().getTime()}.json`,m.click(),URL.revokeObjectURL(c)},d=a=>{const l=a.target.files[0];if(l){const c=new FileReader;c.onload=m=>{try{const y=JSON.parse(m.target.result);o(y),alert(e("settingsImported")||"Settings imported successfully!")}catch{alert(e("importError")||"Error importing settings")}},c.readAsText(l)}};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Sj,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("detectorConfiguration")||"Detector Configuration"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:h,disabled:t,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:e("export")||"Export",children:p.jsx(zr,{className:"w-4 h-4"})}),p.jsxs("label",{className:`px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2 text-sm cursor-pointer ${t?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx(No,{className:"w-4 h-4"}),p.jsx("input",{type:"file",accept:".json",onChange:d,disabled:t,className:"hidden"})]}),p.jsx("button",{onClick:s,disabled:t,className:"px-3 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:e("reset")||"Reset",children:p.jsx(_i,{className:"w-4 h-4"})})]})]}),p.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[p.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("detectorStatus")||"Detector Status"}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("temperature")||"Temperature"}),p.jsxs("div",{className:"font-semibold text-text",children:[x.temperature,"°C"]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("readoutNoise")||"Readout Noise"}),p.jsxs("div",{className:"font-semibold text-text",children:[x.readoutNoise," e⁻"]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("darkCurrent")||"Dark Current"}),p.jsxs("div",{className:"font-semibold text-text",children:[x.darkCurrent," e⁻/px/s"]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-text-muted mb-1",children:e("lastCalibration")||"Last Calibration"}),p.jsx("div",{className:"font-semibold text-text text-xs",children:x.lastCalibration})]})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(zt,{className:"w-4 h-4 text-primary"}),e("hardwareSettings")||"Hardware Settings"]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("binning")||"Pixel Binning"}),p.jsxs("select",{value:r.binning,onChange:a=>C("binning",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[p.jsx("option",{value:"1x1",children:"1×1"}),p.jsx("option",{value:"2x2",children:"2×2"}),p.jsx("option",{value:"4x4",children:"4×4"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("readoutMode")||"Readout Mode"}),p.jsxs("select",{value:r.readoutMode,onChange:a=>C("readoutMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[p.jsx("option",{value:"standard",children:"Standard"}),p.jsx("option",{value:"fast",children:"Fast"}),p.jsx("option",{value:"low-noise",children:"Low Noise"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("coolingTemperature")||"Cooling Temp"," (°C)"]}),p.jsx("input",{type:"number",value:r.coolingTemperature,onChange:a=>C("coolingTemperature",parseFloat(a.target.value)),disabled:t,min:"-40",max:"25",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("gainMode")||"Gain Mode"}),p.jsxs("select",{value:r.gainMode,onChange:a=>C("gainMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[p.jsx("option",{value:"auto",children:"Auto"}),p.jsx("option",{value:"low",children:"Low"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"high",children:"High"})]})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(zt,{className:"w-4 h-4 text-primary"}),e("imagingSettings")||"Imaging Settings"]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("exposureTime")||"Exposure Time"," (ms)"]}),p.jsx("input",{type:"number",value:r.exposureTime,onChange:a=>C("exposureTime",parseFloat(a.target.value)),disabled:t,min:"1",max:"10000",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("frameRate")||"Frame Rate"," (fps)"]}),p.jsx("input",{type:"number",value:r.frameRate,onChange:a=>C("frameRate",parseFloat(a.target.value)),disabled:t,min:"1",max:"60",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("triggerMode")||"Trigger Mode"}),p.jsxs("select",{value:r.triggerMode,onChange:a=>C("triggerMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[p.jsx("option",{value:"internal",children:"Internal"}),p.jsx("option",{value:"external",children:"External"}),p.jsx("option",{value:"software",children:"Software"})]})]})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[p.jsx(zt,{className:"w-4 h-4 text-primary"}),e("processingSettings")||"Processing Settings"]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{key:"darkFrameCorrection",label:e("darkFrameCorrection")||"Dark Frame Correction"},{key:"flatFieldCorrection",label:e("flatFieldCorrection")||"Flat Field Correction"},{key:"badPixelCorrection",label:e("badPixelCorrection")||"Bad Pixel Correction"},{key:"lagCorrection",label:e("lagCorrection")||"Lag Correction"}].map(({key:a,label:l})=>p.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-border hover:border-primary/50 transition-all cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:r[a],onChange:c=>C(a,c.target.checked),disabled:t,className:"w-5 h-5 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),p.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:l})]},a))})]})]}),p.jsx("div",{className:"flex justify-center pt-4",children:p.jsxs("button",{onClick:f,disabled:t,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[p.jsx(Mo,{className:"w-5 h-5"}),p.jsx("span",{children:e("save")||"Save Configuration"})]})})]})};class I_{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.originalImageData=null,this.currentImageData=null}async loadImage(e){return new Promise((r,o)=>{const x=new Image;x.crossOrigin="anonymous",x.onload=()=>{try{this.canvas.width=x.width,this.canvas.height=x.height,this.ctx.drawImage(x,0,0),this.originalImageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.currentImageData=this.cloneImageData(this.originalImageData),r(this.originalImageData)}catch(b){o(b)}},x.onerror=b=>{o(new Error("Failed to load image: "+b))},x.src=e})}cloneImageData(e){return new ImageData(new Uint8ClampedArray(e.data),e.width,e.height)}reset(){this.originalImageData&&(this.currentImageData=this.cloneImageData(this.originalImageData))}getImageDataURL(e=!0){const r=e?this.currentImageData:this.originalImageData;return r?(this.ctx.putImageData(r,0,0),this.canvas.toDataURL("image/png")):null}applyGaussianFilter(e=1){if(!this.currentImageData)return;const r=document.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height;const o=r.getContext("2d");return o.putImageData(this.currentImageData,0,0),o.filter=`blur(${e*2}px)`,o.drawImage(r,0,0),this.currentImageData=o.getImageData(0,0,r.width,r.height),this.getImageDataURL()}applyMedianFilter(e=3){return this.applyGaussianFilter(e/3)}applySobelFilter(){if(!this.currentImageData)return;const e=this.currentImageData.data,r=this.currentImageData.width,o=this.currentImageData.height,x=new ImageData(r,o),b=[[-1,0,1],[-2,0,2],[-1,0,1]],C=[[-1,-2,-1],[0,0,0],[1,2,1]];for(let f=1;f<o-1;f++)for(let s=1;s<r-1;s++){let h=0,d=0;for(let c=-1;c<=1;c++)for(let m=-1;m<=1;m++){const y=((f+c)*r+(s+m))*4,g=(e[y]+e[y+1]+e[y+2])/3;h+=g*b[c+1][m+1],d+=g*C[c+1][m+1]}const a=Math.sqrt(h*h+d*d),l=(f*r+s)*4;x.data[l]=x.data[l+1]=x.data[l+2]=Math.min(255,a),x.data[l+3]=255}return this.currentImageData=x,this.getImageDataURL()}applyGradientFilter(){return this.applySobelFilter()}applySharpen(e=1){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),C=[[0,-1,0],[-1,5,-1],[0,-1,0]];for(let f=1;f<x-1;f++)for(let s=1;s<o-1;s++){for(let h=0;h<3;h++){let d=0;for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){const m=((f+l)*o+(s+c))*4+h;d+=r[m]*C[l+1][c+1]*e}const a=(f*o+s)*4+h;b.data[a]=Math.max(0,Math.min(255,d))}b.data[(f*o+s)*4+3]=255}return this.currentImageData=b,this.getImageDataURL()}applyHistogramEqualization(){if(!this.currentImageData)return;const e=this.currentImageData.data,r=this.currentImageData.width*this.currentImageData.height,o=new Array(256).fill(0);for(let f=0;f<e.length;f+=4){const s=Math.floor((e[f]+e[f+1]+e[f+2])/3);o[s]++}const x=new Array(256);x[0]=o[0];for(let f=1;f<256;f++)x[f]=x[f-1]+o[f];const b=x.find(f=>f>0),C=x.map(f=>Math.round((f-b)/(r-b)*255));for(let f=0;f<e.length;f+=4){const s=Math.floor((e[f]+e[f+1]+e[f+2])/3),h=C[s];e[f]=e[f+1]=e[f+2]=h}return this.getImageDataURL()}applyInvert(){if(!this.currentImageData)return;const e=this.currentImageData.data;for(let r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2];return this.getImageDataURL()}applyRotation(e){if(!this.currentImageData)return;const r=document.createElement("canvas"),o=r.getContext("2d"),x=e*Math.PI/180,b=Math.abs(Math.cos(x)),C=Math.abs(Math.sin(x)),f=this.canvas.height*C+this.canvas.width*b,s=this.canvas.height*b+this.canvas.width*C;return r.width=f,r.height=s,o.translate(f/2,s/2),o.rotate(x),o.putImageData(this.currentImageData,-this.canvas.width/2,-this.canvas.height/2),this.canvas.width=f,this.canvas.height=s,this.currentImageData=o.getImageData(0,0,f,s),this.getImageDataURL()}adjustBrightness(e){if(!this.currentImageData)return;const r=this.currentImageData.data,o=e/100*128;for(let x=0;x<r.length;x+=4)r[x]=Math.max(0,Math.min(255,r[x]+o)),r[x+1]=Math.max(0,Math.min(255,r[x+1]+o)),r[x+2]=Math.max(0,Math.min(255,r[x+2]+o));return this.getImageDataURL()}adjustContrast(e){if(!this.currentImageData)return;const r=this.currentImageData.data,o=259*(e+255)/(255*(259-e));for(let x=0;x<r.length;x+=4)r[x]=Math.max(0,Math.min(255,o*(r[x]-128)+128)),r[x+1]=Math.max(0,Math.min(255,o*(r[x+1]-128)+128)),r[x+2]=Math.max(0,Math.min(255,o*(r[x+2]-128)+128));return this.getImageDataURL()}convertToGrayscale(){if(!this.currentImageData)return;const e=this.currentImageData.data;for(let r=0;r<e.length;r+=4){const o=.299*e[r]+.587*e[r+1]+.114*e[r+2];e[r]=e[r+1]=e[r+2]=o}return this.getImageDataURL()}applyErosion(e=3){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),C=Math.floor(e/2);for(let f=C;f<x-C;f++)for(let s=C;s<o-C;s++){let h=255;for(let a=-C;a<=C;a++)for(let l=-C;l<=C;l++){const c=((f+a)*o+(s+l))*4,m=r[c];m<h&&(h=m)}const d=(f*o+s)*4;b.data[d]=b.data[d+1]=b.data[d+2]=h}return this.currentImageData=b,this.getImageDataURL()}applyDilation(e=3){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,b=this.cloneImageData(this.currentImageData),C=Math.floor(e/2);for(let f=C;f<x-C;f++)for(let s=C;s<o-C;s++){let h=0;for(let a=-C;a<=C;a++)for(let l=-C;l<=C;l++){const c=((f+a)*o+(s+l))*4,m=r[c];m>h&&(h=m)}const d=(f*o+s)*4;b.data[d]=b.data[d+1]=b.data[d+2]=h}return this.currentImageData=b,this.getImageDataURL()}applyThreshold(e=128){if(!this.currentImageData)return;const r=this.currentImageData.data;for(let o=0;o<r.length;o+=4){const b=(r[o]+r[o+1]+r[o+2])/3>e?255:0;r[o]=r[o+1]=r[o+2]=b}return this.getImageDataURL()}calculateHistogram(){if(!this.currentImageData)return null;const e=this.currentImageData.data,r=new Array(256).fill(0);for(let o=0;o<e.length;o+=4){const x=Math.floor((e[o]+e[o+1]+e[o+2])/3);r[x]++}return r}}const Be=new I_,Eb=E.createContext(),Mb=()=>{const t=E.useContext(Eb);if(!t)throw new Error("useImageProcessing must be used within ImageProcessingProvider");return t},V_=({children:t})=>{const{lastMessage:e}=Is(),[r,o]=E.useState(null),[x,b]=E.useState(null),[C,f]=E.useState(!1),[s,h]=E.useState(null),[d,a]=E.useState(null),[l,c]=E.useState([]);E.useEffect(()=>{if(e)try{const A=JSON.parse(e.data);A.type==="image"&&A.imageData?m(A.imageData):A.type==="binary"&&A.buffer&&y(A.buffer)}catch{e.data instanceof ArrayBuffer?y(e.data):typeof e.data=="string"&&e.data.startsWith("data:image")&&m(e.data)}},[e]);const m=E.useCallback(async A=>{f(!0);try{await Be.loadImage(A);const B=Be.getImageDataURL(!1);o(B),b(B);const Y=Be.calculateStatistics();h(Y);const oe=Be.calculateHistogram();a(oe),c([])}catch(B){console.error("Error loading image from base64:",B)}finally{f(!1)}},[]),y=E.useCallback(async A=>{f(!0);try{await Be.loadImage(A);const B=Be.getImageDataURL(!1);o(B),b(B);const Y=Be.calculateStatistics();h(Y);const oe=Be.calculateHistogram();a(oe),c([])}catch(B){console.error("Error loading image from buffer:",B)}finally{f(!1)}},[]),g=E.useCallback(async A=>{f(!0);try{await Be.loadImage(A);const B=Be.getImageDataURL(!1);o(B),b(B);const Y=Be.calculateStatistics();h(Y);const oe=Be.calculateHistogram();a(oe),c([])}catch(B){console.error("Error loading image from URL:",B)}finally{f(!1)}},[]),w=E.useCallback(async A=>{f(!0);try{const B=new FileReader;B.onload=async Y=>{await Be.loadImage(Y.target.result);const oe=Be.getImageDataURL(!1);o(oe),b(oe);const Z=Be.calculateStatistics();h(Z);const ae=Be.calculateHistogram();a(ae),c([]),f(!1)},B.readAsDataURL(A)}catch(B){console.error("Error loading image from file:",B),f(!1)}},[]),S=E.useCallback(async(A,B={})=>{if(!r){console.warn("No image loaded");return}f(!0);try{let Y;switch(A){case"gaussian":Y=Be.applyGaussianFilter(B.sigma||1);break;case"median":Y=Be.applyMedianFilter(B.kernelSize||3);break;case"mean":Y=Be.applyMeanFilter(B.kernelSize||3);break;case"sobel":Y=Be.applySobelFilter();break;case"gradient":Y=Be.applyGradientFilter();break;case"sharpen":Y=Be.applySharpen(B.factor||1);break;case"histogramEqualization":Y=Be.applyHistogramEqualization();break;case"invert":Y=Be.applyInvert();break;case"rotation":Y=Be.applyRotation(B.angle||0);break;case"flipHorizontal":Y=Be.applyFlipHorizontal();break;case"flipVertical":Y=Be.applyFlipVertical();break;case"brightness":Y=Be.adjustBrightness(B.value||0);break;case"contrast":Y=Be.adjustContrast(B.value||0);break;case"threshold":Y=Be.applyThreshold(B.threshold||128);break;case"grayscale":Y=Be.convertToGrayscale();break;case"erosion":Y=Be.applyErosion(B.kernelSize||3);break;case"dilation":Y=Be.applyDilation(B.kernelSize||3);break;default:console.warn("Unknown filter type:",A),f(!1);return}b(Y),c(ae=>[...ae,{filter:A,params:B,timestamp:new Date().toISOString()}]);const oe=Be.calculateStatistics();h(oe);const Z=Be.calculateHistogram();a(Z)}catch(Y){console.error("Error applying filter:",Y)}finally{f(!1)}},[r]),k=E.useCallback(()=>{if(r){Be.reset(),b(r),c([]);const A=Be.calculateStatistics();h(A);const B=Be.calculateHistogram();a(B)}},[r]),j=E.useCallback(async A=>{if(!x){console.warn("No processed image to save");return}try{await Be.saveImage(A)}catch(B){console.error("Error saving image:",B)}},[x]),M=E.useCallback(async(A,B,Y,oe)=>{if(r){f(!0);try{const Z=Be.cropImage(A,B,Y,oe);b(Z),c(ae=>[...ae,{filter:"crop",params:{x:A,y:B,width:Y,height:oe},timestamp:new Date().toISOString()}])}catch(Z){console.error("Error cropping image:",Z)}finally{f(!1)}}},[r]),N=E.useCallback(async(A,B)=>{if(r){f(!0);try{const Y=Be.resizeImage(A,B);b(Y),c(oe=>[...oe,{filter:"resize",params:{width:A,height:B},timestamp:new Date().toISOString()}])}catch(Y){console.error("Error resizing image:",Y)}finally{f(!1)}}},[r]),D={originalImage:r,processedImage:x,isProcessing:C,imageStats:s,histogram:d,processingHistory:l,loadImageFromBase64:m,loadImageFromBuffer:y,loadImageFromUrl:g,loadImageFromFile:w,applyFilter:S,resetToOriginal:k,saveImage:j,cropImage:M,resizeImage:N};return p.jsx(Eb.Provider,{value:D,children:t})},U_=({disabled:t=!1,onApplyFilter:e})=>{const{t:r}=tt(),{applyFilter:o}=Mb(),[x,b]=E.useState("none"),[C,f]=E.useState({denoising:{method:"bilateral",strength:50,kernelSize:5,spatialSigma:75,colorSigma:75},sharpening:{method:"unsharp",amount:50,radius:1,threshold:0},edgeEnhancement:{method:"sobel",lowThreshold:50,highThreshold:150,apertureSize:3},histogramEqualization:{method:"clahe",clipLimit:2,tileSize:8},morphology:{operation:"opening",kernelShape:"ellipse",kernelSize:5,iterations:1},wavelet:{waveletType:"db4",level:3,threshold:50}}),s=c=>{b(c)},h=(c,m,y)=>{f({...C,[c]:{...C[c],[m]:y}})},d=async()=>{if(x==="none"){alert(r("selectFilterFirst")||"Please select a filter first");return}const c={type:x,settings:C[x]};console.log("🎨 [POST-PROCESSING] Applying filter:",c),e&&e(c);try{let m=null,y={};switch(x){case"denoising":C.denoising.method==="gaussian"?(m="gaussian",y={sigma:C.denoising.strength/50}):C.denoising.method==="median"?(m="median",y={kernelSize:C.denoising.kernelSize}):(m="gaussian",y={sigma:C.denoising.strength/50});break;case"sharpening":m="sharpen",y={factor:C.sharpening.amount/50};break;case"edgeEnhancement":C.edgeEnhancement.method==="sobel"?m="sobel":m="gradient";break;case"histogramEqualization":m="histogramEqualization";break;case"morphology":(C.morphology.operation==="opening"||C.morphology.operation==="closing")&&(m=C.morphology.operation==="opening"?"erosion":"dilation",y={kernelSize:C.morphology.kernelSize});break;case"wavelet":console.log("⚠️ [POST-PROCESSING] Wavelet filter not yet implemented in frontend"),alert(r("waveletNotSupported")||"Wavelet filter is not supported yet in frontend processing");return;default:console.warn("⚠️ [POST-PROCESSING] Unknown filter type:",x);return}m&&(console.log(`✅ [POST-PROCESSING] Applying ${m} to BaslerDisplay with params:`,y),await o(m,y),console.log(`✅ [POST-PROCESSING] Filter ${m} applied successfully`),alert(r("filterApplied")||`${x} filter applied successfully!`))}catch(m){console.error("❌ [POST-PROCESSING] Error applying filter:",m),alert(r("filterError")||"Error applying filter")}},a=[{key:"none",label:r("none")||"None",icon:bn,color:"gray"},{key:"denoising",label:r("denoising")||"Denoising",icon:Rr,color:"blue"},{key:"sharpening",label:r("sharpening")||"Sharpening",icon:Un,color:"yellow"},{key:"edgeEnhancement",label:r("edgeEnhancement")||"Edge Enhancement",icon:qj,color:"purple"},{key:"histogramEqualization",label:r("histogramEqualization")||"Histogram Eq.",icon:bn,color:"green"},{key:"morphology",label:r("morphology")||"Morphology",icon:bn,color:"red"},{key:"wavelet",label:r("wavelet")||"Wavelet",icon:bn,color:"indigo"}],l=()=>{switch(x){case"denoising":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),p.jsxs("select",{value:C.denoising.method,onChange:c=>h("denoising","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"bilateral",children:"Bilateral"}),p.jsx("option",{value:"nlm",children:"Non-Local Means"}),p.jsx("option",{value:"gaussian",children:"Gaussian"}),p.jsx("option",{value:"median",children:"Median"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("strength")||"Strength"}),p.jsx("span",{className:"font-mono text-primary",children:C.denoising.strength})]}),p.jsx("input",{type:"range",value:C.denoising.strength,onChange:c=>h("denoising","strength",parseInt(c.target.value)),disabled:t,min:"0",max:"100",className:"w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),p.jsx("input",{type:"number",value:C.denoising.kernelSize,onChange:c=>h("denoising","kernelSize",parseInt(c.target.value)),disabled:t,min:"3",max:"15",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"sharpening":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),p.jsxs("select",{value:C.sharpening.method,onChange:c=>h("sharpening","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"unsharp",children:"Unsharp Mask"}),p.jsx("option",{value:"laplacian",children:"Laplacian"}),p.jsx("option",{value:"highboost",children:"High-Boost"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("amount")||"Amount"}),p.jsx("span",{className:"font-mono text-primary",children:C.sharpening.amount})]}),p.jsx("input",{type:"range",value:C.sharpening.amount,onChange:c=>h("sharpening","amount",parseInt(c.target.value)),disabled:t,min:"0",max:"200",className:"w-full"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("radius")||"Radius"}),p.jsx("span",{className:"font-mono text-primary",children:C.sharpening.radius})]}),p.jsx("input",{type:"range",value:C.sharpening.radius*10,onChange:c=>h("sharpening","radius",parseInt(c.target.value)/10),disabled:t,min:"5",max:"50",className:"w-full"})]})]});case"edgeEnhancement":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("edgeMethod")||"Method"}),p.jsxs("select",{value:C.edgeEnhancement.method,onChange:c=>h("edgeEnhancement","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"sobel",children:"Sobel"}),p.jsx("option",{value:"canny",children:"Canny"}),p.jsx("option",{value:"laplacian",children:"Laplacian"}),p.jsx("option",{value:"prewitt",children:"Prewitt"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("lowThreshold")||"Low Threshold"}),p.jsx("span",{className:"font-mono text-primary",children:C.edgeEnhancement.lowThreshold})]}),p.jsx("input",{type:"range",value:C.edgeEnhancement.lowThreshold,onChange:c=>h("edgeEnhancement","lowThreshold",parseInt(c.target.value)),disabled:t,min:"0",max:"255",className:"w-full"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("highThreshold")||"High Threshold"}),p.jsx("span",{className:"font-mono text-primary",children:C.edgeEnhancement.highThreshold})]}),p.jsx("input",{type:"range",value:C.edgeEnhancement.highThreshold,onChange:c=>h("edgeEnhancement","highThreshold",parseInt(c.target.value)),disabled:t,min:"0",max:"255",className:"w-full"})]})]});case"histogramEqualization":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),p.jsxs("select",{value:C.histogramEqualization.method,onChange:c=>h("histogramEqualization","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"standard",children:"Standard"}),p.jsx("option",{value:"clahe",children:"CLAHE"}),p.jsx("option",{value:"adaptive",children:"Adaptive"})]})]}),C.histogramEqualization.method==="clahe"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("clipLimit")||"Clip Limit"}),p.jsx("span",{className:"font-mono text-primary",children:C.histogramEqualization.clipLimit})]}),p.jsx("input",{type:"range",value:C.histogramEqualization.clipLimit*10,onChange:c=>h("histogramEqualization","clipLimit",parseInt(c.target.value)/10),disabled:t,min:"10",max:"100",className:"w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("tileSize")||"Tile Size"}),p.jsx("input",{type:"number",value:C.histogramEqualization.tileSize,onChange:c=>h("histogramEqualization","tileSize",parseInt(c.target.value)),disabled:t,min:"4",max:"32",step:"4",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]})]});case"morphology":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("operation")||"Operation"}),p.jsxs("select",{value:C.morphology.operation,onChange:c=>h("morphology","operation",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"opening",children:"Opening"}),p.jsx("option",{value:"closing",children:"Closing"}),p.jsx("option",{value:"gradient",children:"Gradient"}),p.jsx("option",{value:"tophat",children:"Top Hat"}),p.jsx("option",{value:"blackhat",children:"Black Hat"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelShape")||"Kernel Shape"}),p.jsxs("select",{value:C.morphology.kernelShape,onChange:c=>h("morphology","kernelShape",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"rect",children:"Rectangle"}),p.jsx("option",{value:"ellipse",children:"Ellipse"}),p.jsx("option",{value:"cross",children:"Cross"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),p.jsx("input",{type:"number",value:C.morphology.kernelSize,onChange:c=>h("morphology","kernelSize",parseInt(c.target.value)),disabled:t,min:"3",max:"21",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"wavelet":return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("waveletType")||"Wavelet Type"}),p.jsxs("select",{value:C.wavelet.waveletType,onChange:c=>h("wavelet","waveletType",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[p.jsx("option",{value:"haar",children:"Haar"}),p.jsx("option",{value:"db4",children:"Daubechies 4"}),p.jsx("option",{value:"db8",children:"Daubechies 8"}),p.jsx("option",{value:"sym4",children:"Symlet 4"}),p.jsx("option",{value:"coif2",children:"Coiflet 2"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("decompositionLevel")||"Decomposition Level"}),p.jsx("input",{type:"number",value:C.wavelet.level,onChange:c=>h("wavelet","level",parseInt(c.target.value)),disabled:t,min:"1",max:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[p.jsx("span",{children:r("threshold")||"Threshold"}),p.jsx("span",{className:"font-mono text-primary",children:C.wavelet.threshold})]}),p.jsx("input",{type:"range",value:C.wavelet.threshold,onChange:c=>h("wavelet","threshold",parseInt(c.target.value)),disabled:t,min:"0",max:"100",className:"w-full"})]})]});default:return p.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[p.jsx(bn,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),p.jsx("p",{className:"text-text-muted",children:r("selectFilterType")||"Select a filter type to configure settings"})]})}};return p.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(bn,{className:"w-5 h-5 text-primary"}),p.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("advancedFiltering")||"Advanced Filtering"})]}),p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:a.map(({key:c,label:m,icon:y,color:g})=>p.jsxs("button",{onClick:()=>s(c),disabled:t,className:`p-3 rounded-lg border-2 transition-all ${x===c?`border-${g}-500 bg-${g}-500/10`:"border-border hover:border-primary/50"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[p.jsx(y,{className:`w-5 h-5 mx-auto mb-2 ${x===c?`text-${g}-600`:"text-text-muted"}`}),p.jsx("div",{className:"text-xs font-medium text-text dark:text-text text-center",children:m})]},c))}),p.jsx("div",{className:"panel p-4 rounded-lg min-h-[250px]",children:l()}),x!=="none"&&p.jsx("div",{className:"flex justify-center",children:p.jsxs("button",{onClick:d,disabled:t,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[p.jsx(Rr,{className:"w-5 h-5"}),p.jsx("span",{children:r("applyFilter")||"Apply Filter"})]})})]})},H_=()=>{const{t,i18n:e}=tt(),{isConnected:r,send:o}=Is(),x=E.useMemo(()=>({rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"}),[]),{pageData:b,handleChange:C,updateFormData:f}=Rc("postProcessing",x),s=E.useMemo(()=>({rotation:[{value:"None",label:t("none")},{value:"90°",label:t("90degree")},{value:"180°",label:t("180degree")},{value:"270°",label:t("270degree")}],fourierFilter:[{value:"Low Pass",label:t("lowPass")},{value:"Band Pass",label:t("bandPass")},{value:"High Pass",label:t("highPass")}],kernelSize:[{value:"3x3",label:"3x3"},{value:"5x5",label:"5x5"},{value:"7x7",label:"7x7"}],edgeMethod:[{value:"Sobel",label:t("sobel")},{value:"Canny",label:t("canny")},{value:"Prewitt",label:t("prewitt")}],exportFormat:[{value:"TIFF",label:t("tiff")},{value:"JPG",label:t("jpg")},{value:"DICOM",label:t("dicom")}]}),[t]),h=E.useMemo(()=>[{name:"medianFilter",label:t("medianFilter")},{name:"meanFilter",label:t("meanFilter")},{name:"varianceFilter",label:t("varianceFilter")},{name:"pseudoColorFilter",label:t("pseudoColorFilter")}],[t]),d=E.useMemo(()=>[{key:"Normalize",label:t("normalize"),icon:Rr},{key:"FFT",label:t("fft"),icon:bn},{key:"FFTInverse",label:t("fftInverse"),icon:bn}],[t]),a={mirroring:E.useCallback(()=>{f({...b,mirroring:!b.mirroring})},[b,f]),sharpening:E.useCallback(()=>{f({...b,sharpening:!b.sharpening})},[b,f]),edgeDetection:E.useCallback(()=>{f({...b,edgeDetection:!b.edgeDetection})},[b,f])},l=E.useCallback((y,g=null)=>{if(r){const w=g?`Action:${y}:${g}`:`Action:${y}`;o(w)?console.log(`✅ Action ${y} sent via WebSocket`):console.error(`❌ Failed to send Action ${y}`)}},[r,o]),m=e.language==="fa"?"text-right":"text-left";return p.jsxs(Do,{children:[p.jsx(Oo,{icon:Rr}),p.jsx(z_,{disabled:!r}),p.jsx(B_,{disabled:!r}),p.jsx(U_,{disabled:!r,onApplyFilter:y=>{console.log("Filter applied:",y),l("ApplyFilter",JSON.stringify(y))}}),p.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[p.jsx(St,{label:t("imageTransform"),icon:_i,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(tr,{name:"rotationAngle",value:b.rotationAngle,onChange:C,options:s.rotation}),p.jsx(Pr,{active:b.mirroring,onClick:a.mirroring,icon:Qk,disabled:!r})]})}),p.jsx(St,{label:t("basicOperations"),icon:Rr,showValue:!1,children:p.jsx("div",{className:"grid grid-cols-1 gap-3",children:d.map(({key:y,label:g,icon:w})=>p.jsx(no,{variant:"secondary",icon:w,onClick:()=>l(y),disabled:!r,children:g},y))})}),p.jsx(St,{label:t("fourierFilter"),icon:bn,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(tr,{name:"fourierFilter",value:b.fourierFilter,onChange:C,options:s.fourierFilter}),p.jsx(no,{variant:"secondary",icon:bn,onClick:()=>l("FourierFilter",b.fourierFilter),disabled:!r,children:t("applyFourierFilter")})]})}),p.jsx(St,{label:t("exportImage"),icon:zr,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(tr,{name:"exportFormat",value:b.exportFormat,onChange:C,options:s.exportFormat}),p.jsx(no,{variant:"primary",icon:zr,onClick:()=>l("Export",b.exportFormat),disabled:!r,children:t("export")})]})}),p.jsx("div",{className:"card p-6 lg:col-span-2",children:p.jsx(St,{label:t("imageFilters"),icon:bn,showValue:!1,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.map(y=>p.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer hover:text-primary transition-colors`,children:[p.jsx("input",{type:"checkbox",name:y.name,checked:b[y.name]||!1,onChange:C,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),y.label]},y.name)),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer`,children:[p.jsx("input",{type:"checkbox",name:"gaussianFilter",checked:b.gaussianFilter||!1,onChange:C,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),t("gaussianFilter")]}),b.gaussianFilter&&p.jsx("div",{className:"mt-2 ml-6",children:p.jsx(yt,{type:"number",name:"gaussianSigma",value:b.gaussianSigma,onChange:C,placeholder:t("enterGaussianSigma"),min:"0",step:"0.1"})})]})]})})}),p.jsx(St,{label:t("sharpening"),icon:po,showValue:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(Pr,{active:b.sharpening,onClick:a.sharpening,icon:po,disabled:!r,showStatus:!0}),b.sharpening&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("kernelSize")}),p.jsx(tr,{name:"kernelSize",value:b.kernelSize,onChange:C,options:s.kernelSize})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("sharpeningStrength")}),p.jsx(yt,{type:"number",name:"sharpeningStrength",value:b.sharpeningStrength,onChange:C,placeholder:t("enterSharpeningStrength"),min:"0",step:"0.1"})]})]})]})}),p.jsx(St,{label:t("edgeDetection"),icon:B0,showValue:!1,children:p.jsxs("div",{className:"space-y-4",children:[p.jsx(Pr,{active:b.edgeDetection,onClick:a.edgeDetection,icon:B0,disabled:!r,showStatus:!0}),b.edgeDetection&&p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("threshold")}),p.jsx(yt,{type:"number",name:"threshold",value:b.threshold,onChange:C,placeholder:t("enterThreshold"),min:"0",step:"1"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("edgeMethod")}),p.jsx(tr,{name:"edgeMethod",value:b.edgeMethod,onChange:C,options:s.edgeMethod})]})]})]})})]})]})};function $_(){return p.jsxs(p.Fragment,{children:[p.jsx(Oo,{icon:Un}),p.jsx(no,{variant:"secondary"})]})}const Pf="-",X_=t=>{const e=G_(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:C=>{const f=C.split(Pf);return f[0]===""&&f.length!==1&&f.shift(),Nb(f,e)||Y_(C)},getConflictingClassGroupIds:(C,f)=>{const s=r[C]||[];return f&&o[C]?[...s,...o[C]]:s}}},Nb=(t,e)=>{var C;if(t.length===0)return e.classGroupId;const r=t[0],o=e.nextPart.get(r),x=o?Nb(t.slice(1),o):void 0;if(x)return x;if(e.validators.length===0)return;const b=t.join(Pf);return(C=e.validators.find(({validator:f})=>f(b)))==null?void 0:C.classGroupId},Y0=/^\[(.+)\]$/,Y_=t=>{if(Y0.test(t)){const e=Y0.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},G_=t=>{const{theme:e,classGroups:r}=t,o={nextPart:new Map,validators:[]};for(const x in r)Hd(r[x],o,x,e);return o},Hd=(t,e,r,o)=>{t.forEach(x=>{if(typeof x=="string"){const b=x===""?e:G0(e,x);b.classGroupId=r;return}if(typeof x=="function"){if(q_(x)){Hd(x(o),e,r,o);return}e.validators.push({validator:x,classGroupId:r});return}Object.entries(x).forEach(([b,C])=>{Hd(C,G0(e,b),r,o)})})},G0=(t,e)=>{let r=t;return e.split(Pf).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},q_=t=>t.isThemeGetter,W_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,o=new Map;const x=(b,C)=>{r.set(b,C),e++,e>t&&(e=0,o=r,r=new Map)};return{get(b){let C=r.get(b);if(C!==void 0)return C;if((C=o.get(b))!==void 0)return x(b,C),C},set(b,C){r.has(b)?r.set(b,C):x(b,C)}}},$d="!",Xd=":",K_=Xd.length,Z_=t=>{const{prefix:e,experimentalParseClassName:r}=t;let o=x=>{const b=[];let C=0,f=0,s=0,h;for(let m=0;m<x.length;m++){let y=x[m];if(C===0&&f===0){if(y===Xd){b.push(x.slice(s,m)),s=m+K_;continue}if(y==="/"){h=m;continue}}y==="["?C++:y==="]"?C--:y==="("?f++:y===")"&&f--}const d=b.length===0?x:x.substring(s),a=Q_(d),l=a!==d,c=h&&h>s?h-s:void 0;return{modifiers:b,hasImportantModifier:l,baseClassName:a,maybePostfixModifierPosition:c}};if(e){const x=e+Xd,b=o;o=C=>C.startsWith(x)?b(C.substring(x.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:C,maybePostfixModifierPosition:void 0}}if(r){const x=o;o=b=>r({className:b,parseClassName:x})}return o},Q_=t=>t.endsWith($d)?t.substring(0,t.length-1):t.startsWith($d)?t.substring(1):t,J_=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const x=[];let b=[];return o.forEach(C=>{C[0]==="["||e[C]?(x.push(...b.sort(),C),b=[]):b.push(C)}),x.push(...b.sort()),x}},eE=t=>({cache:W_(t.cacheSize),parseClassName:Z_(t),sortModifiers:J_(t),...X_(t)}),tE=/\s+/,nE=(t,e)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:x,sortModifiers:b}=e,C=[],f=t.trim().split(tE);let s="";for(let h=f.length-1;h>=0;h-=1){const d=f[h],{isExternal:a,modifiers:l,hasImportantModifier:c,baseClassName:m,maybePostfixModifierPosition:y}=r(d);if(a){s=d+(s.length>0?" "+s:s);continue}let g=!!y,w=o(g?m.substring(0,y):m);if(!w){if(!g){s=d+(s.length>0?" "+s:s);continue}if(w=o(m),!w){s=d+(s.length>0?" "+s:s);continue}g=!1}const S=b(l).join(":"),k=c?S+$d:S,j=k+w;if(C.includes(j))continue;C.push(j);const M=x(w,g);for(let N=0;N<M.length;++N){const D=M[N];C.push(k+D)}s=d+(s.length>0?" "+s:s)}return s};function iE(){let t=0,e,r,o="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Ob(e))&&(o&&(o+=" "),o+=r);return o}const Ob=t=>{if(typeof t=="string")return t;let e,r="";for(let o=0;o<t.length;o++)t[o]&&(e=Ob(t[o]))&&(r&&(r+=" "),r+=e);return r};function rE(t,...e){let r,o,x,b=C;function C(s){const h=e.reduce((d,a)=>a(d),t());return r=eE(h),o=r.cache.get,x=r.cache.set,b=f,f(s)}function f(s){const h=o(s);if(h)return h;const d=nE(s,r);return x(s,d),d}return function(){return b(iE.apply(null,arguments))}}const Ot=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},Db=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ab=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sE=/^\d+\/\d+$/,aE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ks=t=>sE.test(t),We=t=>!!t&&!Number.isNaN(Number(t)),Ji=t=>!!t&&Number.isInteger(Number(t)),hd=t=>t.endsWith("%")&&We(t.slice(0,-1)),wi=t=>aE.test(t),hE=()=>!0,dE=t=>oE.test(t)&&!lE.test(t),Rb=()=>!1,fE=t=>cE.test(t),mE=t=>uE.test(t),gE=t=>!Pe(t)&&!Le(t),pE=t=>Vs(t,Fb,Rb),Pe=t=>Db.test(t),jr=t=>Vs(t,zb,dE),dd=t=>Vs(t,wE,We),q0=t=>Vs(t,Pb,Rb),xE=t=>Vs(t,Lb,mE),Kl=t=>Vs(t,Bb,fE),Le=t=>Ab.test(t),Xa=t=>Us(t,zb),yE=t=>Us(t,SE),W0=t=>Us(t,Pb),vE=t=>Us(t,Fb),bE=t=>Us(t,Lb),Zl=t=>Us(t,Bb,!0),Vs=(t,e,r)=>{const o=Db.exec(t);return o?o[1]?e(o[1]):r(o[2]):!1},Us=(t,e,r=!1)=>{const o=Ab.exec(t);return o?o[1]?e(o[1]):r:!1},Pb=t=>t==="position"||t==="percentage",Lb=t=>t==="image"||t==="url",Fb=t=>t==="length"||t==="size"||t==="bg-size",zb=t=>t==="length",wE=t=>t==="number",SE=t=>t==="family-name",Bb=t=>t==="shadow",CE=()=>{const t=Ot("color"),e=Ot("font"),r=Ot("text"),o=Ot("font-weight"),x=Ot("tracking"),b=Ot("leading"),C=Ot("breakpoint"),f=Ot("container"),s=Ot("spacing"),h=Ot("radius"),d=Ot("shadow"),a=Ot("inset-shadow"),l=Ot("text-shadow"),c=Ot("drop-shadow"),m=Ot("blur"),y=Ot("perspective"),g=Ot("aspect"),w=Ot("ease"),S=Ot("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...j(),Le,Pe],N=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],A=()=>[Le,Pe,s],B=()=>[ks,"full","auto",...A()],Y=()=>[Ji,"none","subgrid",Le,Pe],oe=()=>["auto",{span:["full",Ji,Le,Pe]},Ji,Le,Pe],Z=()=>[Ji,"auto",Le,Pe],ae=()=>["auto","min","max","fr",Le,Pe],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...A()],q=()=>[ks,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],X=()=>[t,Le,Pe],R=()=>[...j(),W0,q0,{position:[Le,Pe]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",vE,pE,{size:[Le,Pe]}],I=()=>[hd,Xa,jr],K=()=>["","none","full",h,Le,Pe],V=()=>["",We,Xa,jr],F=()=>["solid","dashed","dotted","double"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[We,hd,W0,q0],ue=()=>["","none",m,Le,Pe],ce=()=>["none",We,Le,Pe],ie=()=>["none",We,Le,Pe],Q=()=>[We,Le,Pe],me=()=>[ks,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wi],breakpoint:[wi],color:[hE],container:[wi],"drop-shadow":[wi],ease:["in","out","in-out"],font:[gE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wi],shadow:[wi],spacing:["px",We],text:[wi],"text-shadow":[wi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ks,Pe,Le,g]}],container:["container"],columns:[{columns:[We,Pe,Le,f]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Ji,"auto",Le,Pe]}],basis:[{basis:[ks,"full","auto",f,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,ks,"auto","initial","none",Pe]}],grow:[{grow:["",We,Le,Pe]}],shrink:[{shrink:["",We,Le,Pe]}],order:[{order:[Ji,"first","last","none",Le,Pe]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:oe()}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:oe()}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ae()}],"auto-rows":[{"auto-rows":ae()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[f,"screen",...q()]}],"min-w":[{"min-w":[f,"screen","none",...q()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[C]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",r,Xa,jr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Le,dd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",hd,Pe]}],"font-family":[{font:[yE,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[x,Le,Pe]}],"line-clamp":[{"line-clamp":[We,"none",Le,dd]}],leading:[{leading:[b,...A()]}],"list-image":[{"list-image":["none",Le,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",Le,jr]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[We,"auto",Le,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ji,Le,Pe],radial:["",Le,Pe],conic:[Ji,Le,Pe]},bE,xE]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...F(),"hidden","none"]}],"divide-style":[{divide:[...F(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...F(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,Le,Pe]}],"outline-w":[{outline:["",We,Xa,jr]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,Zl,Kl]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",a,Zl,Kl]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[We,jr]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",l,Zl,Kl]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[We,Le,Pe]}],"mix-blend":[{"mix-blend":[...J(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":J()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[Le,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Pe]}],filter:[{filter:["","none",Le,Pe]}],blur:[{blur:ue()}],brightness:[{brightness:[We,Le,Pe]}],contrast:[{contrast:[We,Le,Pe]}],"drop-shadow":[{"drop-shadow":["","none",c,Zl,Kl]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",We,Le,Pe]}],"hue-rotate":[{"hue-rotate":[We,Le,Pe]}],invert:[{invert:["",We,Le,Pe]}],saturate:[{saturate:[We,Le,Pe]}],sepia:[{sepia:["",We,Le,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Pe]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[We,Le,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[We,Le,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,Le,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,Le,Pe]}],"backdrop-invert":[{"backdrop-invert":["",We,Le,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[We,Le,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[We,Le,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",We,Le,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",Le,Pe]}],ease:[{ease:["linear","initial",w,Le,Pe]}],delay:[{delay:[We,Le,Pe]}],animate:[{animate:["none",S,Le,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Le,Pe]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Q()}],"skew-x":[{"skew-x":Q()}],"skew-y":[{"skew-y":Q()}],transform:[{transform:[Le,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Pe]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[We,Xa,jr,dd]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Dn=rE(CE),Lf=E.createContext({});function Pc(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ff=typeof window<"u",Ib=Ff?E.useLayoutEffect:E.useEffect,Lc=E.createContext(null);function zf(t,e){t.indexOf(e)===-1&&t.push(e)}function Bf(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Ei=(t,e,r)=>r>e?e:r<t?t:r;let If=()=>{};const Mi={},Vb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ub(t){return typeof t=="object"&&t!==null}const Hb=t=>/^0[^.\s]+$/u.test(t);function Vf(t){let e;return()=>(e===void 0&&(e=t()),e)}const An=t=>t,TE=(t,e)=>r=>e(t(r)),Ao=(...t)=>t.reduce(TE),xo=(t,e,r)=>{const o=e-t;return o===0?1:(r-t)/o};class Uf{constructor(){this.subscriptions=[]}add(e){return zf(this.subscriptions,e),()=>Bf(this.subscriptions,e)}notify(e,r,o){const x=this.subscriptions.length;if(x)if(x===1)this.subscriptions[0](e,r,o);else for(let b=0;b<x;b++){const C=this.subscriptions[b];C&&C(e,r,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ei=t=>t*1e3,ti=t=>t/1e3;function $b(t,e){return e?t*(1e3/e):0}const Xb=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,kE=1e-7,jE=12;function _E(t,e,r,o,x){let b,C,f=0;do C=e+(r-e)/2,b=Xb(C,o,x)-t,b>0?r=C:e=C;while(Math.abs(b)>kE&&++f<jE);return C}function Ro(t,e,r,o){if(t===e&&r===o)return An;const x=b=>_E(b,0,1,t,r);return b=>b===0||b===1?b:Xb(x(b),e,o)}const Yb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Gb=t=>e=>1-t(1-e),qb=Ro(.33,1.53,.69,.99),Hf=Gb(qb),Wb=Yb(Hf),Kb=t=>(t*=2)<1?.5*Hf(t):.5*(2-Math.pow(2,-10*(t-1))),$f=t=>1-Math.sin(Math.acos(t)),Zb=Gb($f),Qb=Yb($f),EE=Ro(.42,0,1,1),ME=Ro(0,0,.58,1),Jb=Ro(.42,0,.58,1),NE=t=>Array.isArray(t)&&typeof t[0]!="number",e1=t=>Array.isArray(t)&&typeof t[0]=="number",OE={linear:An,easeIn:EE,easeInOut:Jb,easeOut:ME,circIn:$f,circInOut:Qb,circOut:Zb,backIn:Hf,backInOut:Wb,backOut:qb,anticipate:Kb},DE=t=>typeof t=="string",K0=t=>{if(e1(t)){If(t.length===4);const[e,r,o,x]=t;return Ro(e,r,o,x)}else if(DE(t))return OE[t];return t},Ql=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function AE(t,e){let r=new Set,o=new Set,x=!1,b=!1;const C=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function s(d){C.has(d)&&(h.schedule(d),t()),d(f)}const h={schedule:(d,a=!1,l=!1)=>{const m=l&&x?r:o;return a&&C.add(d),m.has(d)||m.add(d),d},cancel:d=>{o.delete(d),C.delete(d)},process:d=>{if(f=d,x){b=!0;return}x=!0,[r,o]=[o,r],r.forEach(s),r.clear(),x=!1,b&&(b=!1,h.process(d))}};return h}const RE=40;function t1(t,e){let r=!1,o=!0;const x={delta:0,timestamp:0,isProcessing:!1},b=()=>r=!0,C=Ql.reduce((k,j)=>(k[j]=AE(b),k),{}),{setup:f,read:s,resolveKeyframes:h,preUpdate:d,update:a,preRender:l,render:c,postRender:m}=C,y=()=>{const k=Mi.useManualTiming?x.timestamp:performance.now();r=!1,Mi.useManualTiming||(x.delta=o?1e3/60:Math.max(Math.min(k-x.timestamp,RE),1)),x.timestamp=k,x.isProcessing=!0,f.process(x),s.process(x),h.process(x),d.process(x),a.process(x),l.process(x),c.process(x),m.process(x),x.isProcessing=!1,r&&e&&(o=!1,t(y))},g=()=>{r=!0,o=!0,x.isProcessing||t(y)};return{schedule:Ql.reduce((k,j)=>{const M=C[j];return k[j]=(N,D=!1,A=!1)=>(r||g(),M.schedule(N,D,A)),k},{}),cancel:k=>{for(let j=0;j<Ql.length;j++)C[Ql[j]].cancel(k)},state:x,steps:C}}const{schedule:dt,cancel:rr,state:Ht,steps:fd}=t1(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0);let lc;function PE(){lc=void 0}const hn={now:()=>(lc===void 0&&hn.set(Ht.isProcessing||Mi.useManualTiming?Ht.timestamp:performance.now()),lc),set:t=>{lc=t,queueMicrotask(PE)}},n1=t=>e=>typeof e=="string"&&e.startsWith(t),Xf=n1("--"),LE=n1("var(--"),Yf=t=>LE(t)?FE.test(t.split("/*")[0].trim()):!1,FE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yo={...Hs,transform:t=>Ei(0,1,t)},Jl={...Hs,default:1},io=t=>Math.round(t*1e5)/1e5,Gf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zE(t){return t==null}const BE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qf=(t,e)=>r=>!!(typeof r=="string"&&BE.test(r)&&r.startsWith(t)||e&&!zE(r)&&Object.prototype.hasOwnProperty.call(r,e)),i1=(t,e,r)=>o=>{if(typeof o!="string")return o;const[x,b,C,f]=o.match(Gf);return{[t]:parseFloat(x),[e]:parseFloat(b),[r]:parseFloat(C),alpha:f!==void 0?parseFloat(f):1}},IE=t=>Ei(0,255,t),md={...Hs,transform:t=>Math.round(IE(t))},Mr={test:qf("rgb","red"),parse:i1("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:o=1})=>"rgba("+md.transform(t)+", "+md.transform(e)+", "+md.transform(r)+", "+io(yo.transform(o))+")"};function VE(t){let e="",r="",o="",x="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),o=t.substring(5,7),x=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),o=t.substring(3,4),x=t.substring(4,5),e+=e,r+=r,o+=o,x+=x),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:x?parseInt(x,16)/255:1}}const Yd={test:qf("#"),parse:VE,transform:Mr.transform},Po=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),er=Po("deg"),ni=Po("%"),$e=Po("px"),UE=Po("vh"),HE=Po("vw"),Z0={...ni,parse:t=>ni.parse(t)/100,transform:t=>ni.transform(t*100)},Ns={test:qf("hsl","hue"),parse:i1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:o=1})=>"hsla("+Math.round(t)+", "+ni.transform(io(e))+", "+ni.transform(io(r))+", "+io(yo.transform(o))+")"},Et={test:t=>Mr.test(t)||Yd.test(t)||Ns.test(t),parse:t=>Mr.test(t)?Mr.parse(t):Ns.test(t)?Ns.parse(t):Yd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mr.transform(t):Ns.transform(t),getAnimatableNone:t=>{const e=Et.parse(t);return e.alpha=0,Et.transform(e)}},$E=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XE(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Gf))==null?void 0:e.length)||0)+(((r=t.match($E))==null?void 0:r.length)||0)>0}const r1="number",s1="color",YE="var",GE="var(",Q0="${}",qE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vo(t){const e=t.toString(),r=[],o={color:[],number:[],var:[]},x=[];let b=0;const f=e.replace(qE,s=>(Et.test(s)?(o.color.push(b),x.push(s1),r.push(Et.parse(s))):s.startsWith(GE)?(o.var.push(b),x.push(YE),r.push(s)):(o.number.push(b),x.push(r1),r.push(parseFloat(s))),++b,Q0)).split(Q0);return{values:r,split:f,indexes:o,types:x}}function a1(t){return vo(t).values}function o1(t){const{split:e,types:r}=vo(t),o=e.length;return x=>{let b="";for(let C=0;C<o;C++)if(b+=e[C],x[C]!==void 0){const f=r[C];f===r1?b+=io(x[C]):f===s1?b+=Et.transform(x[C]):b+=x[C]}return b}}const WE=t=>typeof t=="number"?0:Et.test(t)?Et.getAnimatableNone(t):t;function KE(t){const e=a1(t);return o1(t)(e.map(WE))}const sr={test:XE,parse:a1,createTransformer:o1,getAnimatableNone:KE};function gd(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function ZE({hue:t,saturation:e,lightness:r,alpha:o}){t/=360,e/=100,r/=100;let x=0,b=0,C=0;if(!e)x=b=C=r;else{const f=r<.5?r*(1+e):r+e-r*e,s=2*r-f;x=gd(s,f,t+1/3),b=gd(s,f,t),C=gd(s,f,t-1/3)}return{red:Math.round(x*255),green:Math.round(b*255),blue:Math.round(C*255),alpha:o}}function xc(t,e){return r=>r>0?e:t}const mt=(t,e,r)=>t+(e-t)*r,pd=(t,e,r)=>{const o=t*t,x=r*(e*e-o)+o;return x<0?0:Math.sqrt(x)},QE=[Yd,Mr,Ns],JE=t=>QE.find(e=>e.test(t));function J0(t){const e=JE(t);if(!e)return!1;let r=e.parse(t);return e===Ns&&(r=ZE(r)),r}const ey=(t,e)=>{const r=J0(t),o=J0(e);if(!r||!o)return xc(t,e);const x={...r};return b=>(x.red=pd(r.red,o.red,b),x.green=pd(r.green,o.green,b),x.blue=pd(r.blue,o.blue,b),x.alpha=mt(r.alpha,o.alpha,b),Mr.transform(x))},Gd=new Set(["none","hidden"]);function eM(t,e){return Gd.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function tM(t,e){return r=>mt(t,e,r)}function Wf(t){return typeof t=="number"?tM:typeof t=="string"?Yf(t)?xc:Et.test(t)?ey:rM:Array.isArray(t)?l1:typeof t=="object"?Et.test(t)?ey:nM:xc}function l1(t,e){const r=[...t],o=r.length,x=t.map((b,C)=>Wf(b)(b,e[C]));return b=>{for(let C=0;C<o;C++)r[C]=x[C](b);return r}}function nM(t,e){const r={...t,...e},o={};for(const x in r)t[x]!==void 0&&e[x]!==void 0&&(o[x]=Wf(t[x])(t[x],e[x]));return x=>{for(const b in o)r[b]=o[b](x);return r}}function iM(t,e){const r=[],o={color:0,var:0,number:0};for(let x=0;x<e.values.length;x++){const b=e.types[x],C=t.indexes[b][o[b]],f=t.values[C]??0;r[x]=f,o[b]++}return r}const rM=(t,e)=>{const r=sr.createTransformer(e),o=vo(t),x=vo(e);return o.indexes.var.length===x.indexes.var.length&&o.indexes.color.length===x.indexes.color.length&&o.indexes.number.length>=x.indexes.number.length?Gd.has(t)&&!x.values.length||Gd.has(e)&&!o.values.length?eM(t,e):Ao(l1(iM(o,x),x.values),r):xc(t,e)};function c1(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?mt(t,e,r):Wf(t)(t,e)}const sM=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>dt.update(e,r),stop:()=>rr(e),now:()=>Ht.isProcessing?Ht.timestamp:hn.now()}},u1=(t,e,r=10)=>{let o="";const x=Math.max(Math.round(e/r),2);for(let b=0;b<x;b++)o+=Math.round(t(b/(x-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},yc=2e4;function Kf(t){let e=0;const r=50;let o=t.next(e);for(;!o.done&&e<yc;)e+=r,o=t.next(e);return e>=yc?1/0:e}function aM(t,e=100,r){const o=r({...t,keyframes:[0,e]}),x=Math.min(Kf(o),yc);return{type:"keyframes",ease:b=>o.next(x*b).value/e,duration:ti(x)}}const oM=5;function h1(t,e,r){const o=Math.max(e-oM,0);return $b(r-t(o),e-o)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ty=.001;function lM({duration:t=xt.duration,bounce:e=xt.bounce,velocity:r=xt.velocity,mass:o=xt.mass}){let x,b,C=1-e;C=Ei(xt.minDamping,xt.maxDamping,C),t=Ei(xt.minDuration,xt.maxDuration,ti(t)),C<1?(x=h=>{const d=h*C,a=d*t,l=d-r,c=qd(h,C),m=Math.exp(-a);return ty-l/c*m},b=h=>{const a=h*C*t,l=a*r+r,c=Math.pow(C,2)*Math.pow(h,2)*t,m=Math.exp(-a),y=qd(Math.pow(h,2),C);return(-x(h)+ty>0?-1:1)*((l-c)*m)/y}):(x=h=>{const d=Math.exp(-h*t),a=(h-r)*t+1;return-.001+d*a},b=h=>{const d=Math.exp(-h*t),a=(r-h)*(t*t);return d*a});const f=5/t,s=uM(x,b,f);if(t=ei(t),isNaN(s))return{stiffness:xt.stiffness,damping:xt.damping,duration:t};{const h=Math.pow(s,2)*o;return{stiffness:h,damping:C*2*Math.sqrt(o*h),duration:t}}}const cM=12;function uM(t,e,r){let o=r;for(let x=1;x<cM;x++)o=o-t(o)/e(o);return o}function qd(t,e){return t*Math.sqrt(1-e*e)}const hM=["duration","bounce"],dM=["stiffness","damping","mass"];function ny(t,e){return e.some(r=>t[r]!==void 0)}function fM(t){let e={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...t};if(!ny(t,dM)&&ny(t,hM))if(t.visualDuration){const r=t.visualDuration,o=2*Math.PI/(r*1.2),x=o*o,b=2*Ei(.05,1,1-(t.bounce||0))*Math.sqrt(x);e={...e,mass:xt.mass,stiffness:x,damping:b}}else{const r=lM(t);e={...e,...r,mass:xt.mass},e.isResolvedFromDuration=!0}return e}function vc(t=xt.visualDuration,e=xt.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:o,restDelta:x}=r;const b=r.keyframes[0],C=r.keyframes[r.keyframes.length-1],f={done:!1,value:b},{stiffness:s,damping:h,mass:d,duration:a,velocity:l,isResolvedFromDuration:c}=fM({...r,velocity:-ti(r.velocity||0)}),m=l||0,y=h/(2*Math.sqrt(s*d)),g=C-b,w=ti(Math.sqrt(s/d)),S=Math.abs(g)<5;o||(o=S?xt.restSpeed.granular:xt.restSpeed.default),x||(x=S?xt.restDelta.granular:xt.restDelta.default);let k;if(y<1){const M=qd(w,y);k=N=>{const D=Math.exp(-y*w*N);return C-D*((m+y*w*g)/M*Math.sin(M*N)+g*Math.cos(M*N))}}else if(y===1)k=M=>C-Math.exp(-w*M)*(g+(m+w*g)*M);else{const M=w*Math.sqrt(y*y-1);k=N=>{const D=Math.exp(-y*w*N),A=Math.min(M*N,300);return C-D*((m+y*w*g)*Math.sinh(A)+M*g*Math.cosh(A))/M}}const j={calculatedDuration:c&&a||null,next:M=>{const N=k(M);if(c)f.done=M>=a;else{let D=M===0?m:0;y<1&&(D=M===0?ei(m):h1(k,M,N));const A=Math.abs(D)<=o,B=Math.abs(C-N)<=x;f.done=A&&B}return f.value=f.done?C:N,f},toString:()=>{const M=Math.min(Kf(j),yc),N=u1(D=>j.next(M*D).value,M,30);return M+"ms "+N},toTransition:()=>{}};return j}vc.applyToOptions=t=>{const e=aM(t,100,vc);return t.ease=e.ease,t.duration=ei(e.duration),t.type="keyframes",t};function Wd({keyframes:t,velocity:e=0,power:r=.8,timeConstant:o=325,bounceDamping:x=10,bounceStiffness:b=500,modifyTarget:C,min:f,max:s,restDelta:h=.5,restSpeed:d}){const a=t[0],l={done:!1,value:a},c=A=>f!==void 0&&A<f||s!==void 0&&A>s,m=A=>f===void 0?s:s===void 0||Math.abs(f-A)<Math.abs(s-A)?f:s;let y=r*e;const g=a+y,w=C===void 0?g:C(g);w!==g&&(y=w-a);const S=A=>-y*Math.exp(-A/o),k=A=>w+S(A),j=A=>{const B=S(A),Y=k(A);l.done=Math.abs(B)<=h,l.value=l.done?w:Y};let M,N;const D=A=>{c(l.value)&&(M=A,N=vc({keyframes:[l.value,m(l.value)],velocity:h1(k,A,l.value),damping:x,stiffness:b,restDelta:h,restSpeed:d}))};return D(0),{calculatedDuration:null,next:A=>{let B=!1;return!N&&M===void 0&&(B=!0,j(A),D(A)),M!==void 0&&A>=M?N.next(A-M):(!B&&j(A),l)}}}function mM(t,e,r){const o=[],x=r||Mi.mix||c1,b=t.length-1;for(let C=0;C<b;C++){let f=x(t[C],t[C+1]);if(e){const s=Array.isArray(e)?e[C]||An:e;f=Ao(s,f)}o.push(f)}return o}function gM(t,e,{clamp:r=!0,ease:o,mixer:x}={}){const b=t.length;if(If(b===e.length),b===1)return()=>e[0];if(b===2&&e[0]===e[1])return()=>e[1];const C=t[0]===t[1];t[0]>t[b-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=mM(e,o,x),s=f.length,h=d=>{if(C&&d<t[0])return e[0];let a=0;if(s>1)for(;a<t.length-2&&!(d<t[a+1]);a++);const l=xo(t[a],t[a+1],d);return f[a](l)};return r?d=>h(Ei(t[0],t[b-1],d)):h}function pM(t,e){const r=t[t.length-1];for(let o=1;o<=e;o++){const x=xo(0,e,o);t.push(mt(r,1,x))}}function xM(t){const e=[0];return pM(e,t.length-1),e}function yM(t,e){return t.map(r=>r*e)}function vM(t,e){return t.map(()=>e||Jb).splice(0,t.length-1)}function ro({duration:t=300,keyframes:e,times:r,ease:o="easeInOut"}){const x=NE(o)?o.map(K0):K0(o),b={done:!1,value:e[0]},C=yM(r&&r.length===e.length?r:xM(e),t),f=gM(C,e,{ease:Array.isArray(x)?x:vM(e,x)});return{calculatedDuration:t,next:s=>(b.value=f(s),b.done=s>=t,b)}}const bM=t=>t!==null;function Zf(t,{repeat:e,repeatType:r="loop"},o,x=1){const b=t.filter(bM),f=x<0||e&&r!=="loop"&&e%2===1?0:b.length-1;return!f||o===void 0?b[f]:o}const wM={decay:Wd,inertia:Wd,tween:ro,keyframes:ro,spring:vc};function d1(t){typeof t.type=="string"&&(t.type=wM[t.type])}class Qf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const SM=t=>t/100;class Jf extends Qf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,x;const{motionValue:r}=this.options;r&&r.updatedAt!==hn.now()&&this.tick(hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(x=(o=this.options).onStop)==null||x.call(o))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;d1(e);const{type:r=ro,repeat:o=0,repeatDelay:x=0,repeatType:b,velocity:C=0}=e;let{keyframes:f}=e;const s=r||ro;s!==ro&&typeof f[0]!="number"&&(this.mixKeyframes=Ao(SM,c1(f[0],f[1])),f=[0,100]);const h=s({...e,keyframes:f});b==="mirror"&&(this.mirroredGenerator=s({...e,keyframes:[...f].reverse(),velocity:-C})),h.calculatedDuration===null&&(h.calculatedDuration=Kf(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+x,this.totalDuration=this.resolvedDuration*(o+1)-x,this.generator=h}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:o,totalDuration:x,mixKeyframes:b,mirroredGenerator:C,resolvedDuration:f,calculatedDuration:s}=this;if(this.startTime===null)return o.next(0);const{delay:h=0,keyframes:d,repeat:a,repeatType:l,repeatDelay:c,type:m,onUpdate:y,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-x/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const w=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?w<0:w>x;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let k=this.currentTime,j=o;if(a){const A=Math.min(this.currentTime,x)/f;let B=Math.floor(A),Y=A%1;!Y&&A>=1&&(Y=1),Y===1&&B--,B=Math.min(B,a+1),!!(B%2)&&(l==="reverse"?(Y=1-Y,c&&(Y-=c/f)):l==="mirror"&&(j=C)),k=Ei(0,1,Y)*f}const M=S?{done:!1,value:d[0]}:j.next(k);b&&(M.value=b(M.value));let{done:N}=M;!S&&s!==null&&(N=this.playbackSpeed>=0?this.currentTime>=x:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return D&&m!==Wd&&(M.value=Zf(d,this.options,g,this.speed)),y&&y(M.value),D&&this.finish(),M}then(e,r){return this.finished.then(e,r)}get duration(){return ti(this.calculatedDuration)}get time(){return ti(this.currentTime)}set time(e){var r;e=ei(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hn.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=ti(this.currentTime))}play(){var x,b;if(this.isStopped)return;const{driver:e=sM,startTime:r}=this.options;this.driver||(this.driver=e(C=>this.tick(C))),(b=(x=this.options).onPlay)==null||b.call(x);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=r??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function CM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Nr=t=>t*180/Math.PI,Kd=t=>{const e=Nr(Math.atan2(t[1],t[0]));return Zd(e)},TM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Kd,rotateZ:Kd,skewX:t=>Nr(Math.atan(t[1])),skewY:t=>Nr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Zd=t=>(t=t%360,t<0&&(t+=360),t),iy=Kd,ry=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),sy=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ry,scaleY:sy,scale:t=>(ry(t)+sy(t))/2,rotateX:t=>Zd(Nr(Math.atan2(t[6],t[5]))),rotateY:t=>Zd(Nr(Math.atan2(-t[2],t[0]))),rotateZ:iy,rotate:iy,skewX:t=>Nr(Math.atan(t[4])),skewY:t=>Nr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Qd(t){return t.includes("scale")?1:0}function Jd(t,e){if(!t||t==="none")return Qd(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,x;if(r)o=kM,x=r;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=TM,x=f}if(!x)return Qd(e);const b=o[e],C=x[1].split(",").map(_M);return typeof b=="function"?b(C):C[b]}const jM=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return Jd(r,e)};function _M(t){return parseFloat(t.trim())}const $s=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xs=new Set($s),ay=t=>t===Hs||t===$e,EM=new Set(["x","y","z"]),MM=$s.filter(t=>!EM.has(t));function NM(t){const e=[];return MM.forEach(r=>{const o=t.getValue(r);o!==void 0&&(e.push([r,o.get()]),o.set(r.startsWith("scale")?1:0))}),e}const Lr={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Jd(e,"x"),y:(t,{transform:e})=>Jd(e,"y")};Lr.translateX=Lr.x;Lr.translateY=Lr.y;const Fr=new Set;let ef=!1,tf=!1,nf=!1;function f1(){if(tf){const t=Array.from(Fr).filter(o=>o.needsMeasurement),e=new Set(t.map(o=>o.element)),r=new Map;e.forEach(o=>{const x=NM(o);x.length&&(r.set(o,x),o.render())}),t.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const x=r.get(o);x&&x.forEach(([b,C])=>{var f;(f=o.getValue(b))==null||f.set(C)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}tf=!1,ef=!1,Fr.forEach(t=>t.complete(nf)),Fr.clear()}function m1(){Fr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tf=!0)})}function OM(){nf=!0,m1(),f1(),nf=!1}class em{constructor(e,r,o,x,b,C=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=o,this.motionValue=x,this.element=b,this.isAsync=C}scheduleResolve(){this.state="scheduled",this.isAsync?(Fr.add(this),ef||(ef=!0,dt.read(m1),dt.resolveKeyframes(f1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:o,motionValue:x}=this;if(e[0]===null){const b=x==null?void 0:x.get(),C=e[e.length-1];if(b!==void 0)e[0]=b;else if(o&&r){const f=o.readValue(r,C);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=C),x&&b===void 0&&x.set(e[0])}CM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fr.delete(this)}cancel(){this.state==="scheduled"&&(Fr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DM=t=>t.startsWith("--");function AM(t,e,r){DM(e)?t.style.setProperty(e,r):t.style[e]=r}const RM=Vf(()=>window.ScrollTimeline!==void 0),PM={};function LM(t,e){const r=Vf(t);return()=>PM[e]??r()}const g1=LM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ja=([t,e,r,o])=>`cubic-bezier(${t}, ${e}, ${r}, ${o})`,oy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ja([0,.65,.55,1]),circOut:Ja([.55,0,1,.45]),backIn:Ja([.31,.01,.66,-.59]),backOut:Ja([.33,1.53,.69,.99])};function p1(t,e){if(t)return typeof t=="function"?g1()?u1(t,e):"ease-out":e1(t)?Ja(t):Array.isArray(t)?t.map(r=>p1(r,e)||oy.easeOut):oy[t]}function FM(t,e,r,{delay:o=0,duration:x=300,repeat:b=0,repeatType:C="loop",ease:f="easeOut",times:s}={},h=void 0){const d={[e]:r};s&&(d.offset=s);const a=p1(f,x);Array.isArray(a)&&(d.easing=a);const l={delay:o,duration:x,easing:Array.isArray(a)?"linear":a,fill:"both",iterations:b+1,direction:C==="reverse"?"alternate":"normal"};return h&&(l.pseudoElement=h),t.animate(d,l)}function x1(t){return typeof t=="function"&&"applyToOptions"in t}function zM({type:t,...e}){return x1(t)&&g1()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class BM extends Qf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:o,keyframes:x,pseudoElement:b,allowFlatten:C=!1,finalKeyframe:f,onComplete:s}=e;this.isPseudoElement=!!b,this.allowFlatten=C,this.options=e,If(typeof e.type!="string");const h=zM(e);this.animation=FM(r,o,x,h,b),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!b){const d=Zf(x,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(d):AM(r,o,d),this.animation.cancel()}s==null||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,o;const e=((o=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:o.call(r).duration)||0;return ti(Number(e))}get time(){return ti(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ei(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&RM()?(this.animation.timeline=e,An):r(this)}}const y1={anticipate:Kb,backInOut:Wb,circInOut:Qb};function IM(t){return t in y1}function VM(t){typeof t.ease=="string"&&IM(t.ease)&&(t.ease=y1[t.ease])}const ly=10;class UM extends BM{constructor(e){VM(e),d1(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:o,onComplete:x,element:b,...C}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const f=new Jf({...C,autoplay:!1}),s=ei(this.finishedTime??this.time);r.setWithVelocity(f.sample(s-ly).value,f.sample(s).value,ly),f.stop()}}const cy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sr.test(t)||t==="0")&&!t.startsWith("url("));function HM(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function $M(t,e,r,o){const x=t[0];if(x===null)return!1;if(e==="display"||e==="visibility")return!0;const b=t[t.length-1],C=cy(x,e),f=cy(b,e);return!C||!f?!1:HM(t)||(r==="spring"||x1(r))&&o}function rf(t){t.duration=0,t.type}const XM=new Set(["opacity","clipPath","filter","transform"]),YM=Vf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GM(t){var d;const{motionValue:e,name:r,repeatDelay:o,repeatType:x,damping:b,type:C}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:s,transformTemplate:h}=e.owner.getProps();return YM()&&r&&XM.has(r)&&(r!=="transform"||!h)&&!s&&!o&&x!=="mirror"&&b!==0&&C!=="inertia"}const qM=40;class WM extends Qf{constructor({autoplay:e=!0,delay:r=0,type:o="keyframes",repeat:x=0,repeatDelay:b=0,repeatType:C="loop",keyframes:f,name:s,motionValue:h,element:d,...a}){var m;super(),this.stop=()=>{var y,g;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=hn.now();const l={autoplay:e,delay:r,type:o,repeat:x,repeatDelay:b,repeatType:C,name:s,motionValue:h,element:d,...a},c=(d==null?void 0:d.KeyframeResolver)||em;this.keyframeResolver=new c(f,(y,g,w)=>this.onKeyframesResolved(y,g,l,!w),s,h,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,r,o,x){this.keyframeResolver=void 0;const{name:b,type:C,velocity:f,delay:s,isHandoff:h,onUpdate:d}=o;this.resolvedAt=hn.now(),$M(e,b,C,f)||((Mi.instantAnimations||!s)&&(d==null||d(Zf(e,o,r))),e[0]=e[e.length-1],rf(o),o.repeat=0);const l={startTime:x?this.resolvedAt?this.resolvedAt-this.createdAt>qM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...o,keyframes:e},c=!h&&GM(l)?new UM({...l,element:l.motionValue.owner.current}):new Jf(l);c.finished.then(()=>this.notifyFinished()).catch(An),this.pendingTimeline&&(this.stopTimeline=c.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=c}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),OM()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const KM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZM(t){const e=KM.exec(t);if(!e)return[,];const[,r,o,x]=e;return[`--${r??o}`,x]}function v1(t,e,r=1){const[o,x]=ZM(t);if(!o)return;const b=window.getComputedStyle(e).getPropertyValue(o);if(b){const C=b.trim();return Vb(C)?parseFloat(C):C}return Yf(x)?v1(x,e,r+1):x}function tm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const b1=new Set(["width","height","top","left","right","bottom",...$s]),QM={test:t=>t==="auto",parse:t=>t},w1=t=>e=>e.test(t),S1=[Hs,$e,ni,er,HE,UE,QM],uy=t=>S1.find(w1(t));function JM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Hb(t):!0}const eN=new Set(["brightness","contrast","saturate","opacity"]);function tN(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[o]=r.match(Gf)||[];if(!o)return t;const x=r.replace(o,"");let b=eN.has(e)?1:0;return o!==r&&(b*=100),e+"("+b+x+")"}const nN=/\b([a-z-]*)\(.*?\)/gu,sf={...sr,getAnimatableNone:t=>{const e=t.match(nN);return e?e.map(tN).join(" "):t}},hy={...Hs,transform:Math.round},iN={rotate:er,rotateX:er,rotateY:er,rotateZ:er,scale:Jl,scaleX:Jl,scaleY:Jl,scaleZ:Jl,skew:er,skewX:er,skewY:er,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:yo,originX:Z0,originY:Z0,originZ:$e},nm={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,backgroundPositionX:$e,backgroundPositionY:$e,...iN,zIndex:hy,fillOpacity:yo,strokeOpacity:yo,numOctaves:hy},rN={...nm,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:sf,WebkitFilter:sf},C1=t=>rN[t];function T1(t,e){let r=C1(t);return r!==sf&&(r=sr),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const sN=new Set(["auto","none","0"]);function aN(t,e,r){let o=0,x;for(;o<t.length&&!x;){const b=t[o];typeof b=="string"&&!sN.has(b)&&vo(b).values.length&&(x=t[o]),o++}if(x&&r)for(const b of e)t[b]=T1(r,x)}class oN extends em{constructor(e,r,o,x,b){super(e,r,o,x,b,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:o}=this;if(!r||!r.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let h=e[s];if(typeof h=="string"&&(h=h.trim(),Yf(h))){const d=v1(h,r.current);d!==void 0&&(e[s]=d),s===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!b1.has(o)||e.length!==2)return;const[x,b]=e,C=uy(x),f=uy(b);if(C!==f)if(ay(C)&&ay(f))for(let s=0;s<e.length;s++){const h=e[s];typeof h=="string"&&(e[s]=parseFloat(h))}else Lr[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,o=[];for(let x=0;x<e.length;x++)(e[x]===null||JM(e[x]))&&o.push(x);o.length&&aN(e,o,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lr[o](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const x=r[r.length-1];x!==void 0&&e.getValue(o,x).jump(x,!1)}measureEndState(){var f;const{element:e,name:r,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const x=e.getValue(r);x&&x.jump(this.measuredOrigin,!1);const b=o.length-1,C=o[b];o[b]=Lr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),C!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=C),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([s,h])=>{e.getValue(s).set(h)}),this.resolveNoneKeyframes()}}function lN(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const x=(r==null?void 0:r[t])??o.querySelectorAll(t);return x?Array.from(x):[]}return Array.from(t)}const k1=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function j1(t){return Ub(t)&&"offsetHeight"in t}const dy=30,cN=t=>!isNaN(parseFloat(t));class uN{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var b;const x=hn.now();if(this.updatedAt!==x&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((b=this.events.change)==null||b.notify(this.current),this.dependents))for(const C of this.dependents)C.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Uf);const o=this.events[e].add(r);return e==="change"?()=>{o(),dt.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,o){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>dy)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,dy);return $b(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Br(t,e){return new uN(t,e)}const{schedule:im}=t1(queueMicrotask,!1),Bn={x:!1,y:!1};function _1(){return Bn.x||Bn.y}function hN(t){return t==="x"||t==="y"?Bn[t]?null:(Bn[t]=!0,()=>{Bn[t]=!1}):Bn.x||Bn.y?null:(Bn.x=Bn.y=!0,()=>{Bn.x=Bn.y=!1})}function E1(t,e){const r=lN(t),o=new AbortController,x={passive:!0,...e,signal:o.signal};return[r,x,()=>o.abort()]}function fy(t){return!(t.pointerType==="touch"||_1())}function dN(t,e,r={}){const[o,x,b]=E1(t,r),C=f=>{if(!fy(f))return;const{target:s}=f,h=e(s,f);if(typeof h!="function"||!s)return;const d=a=>{fy(a)&&(h(a),s.removeEventListener("pointerleave",d))};s.addEventListener("pointerleave",d,x)};return o.forEach(f=>{f.addEventListener("pointerenter",C,x)}),b}const M1=(t,e)=>e?t===e?!0:M1(t,e.parentElement):!1,rm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mN(t){return fN.has(t.tagName)||t.tabIndex!==-1}const cc=new WeakSet;function my(t){return e=>{e.key==="Enter"&&t(e)}}function xd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const gN=(t,e)=>{const r=t.currentTarget;if(!r)return;const o=my(()=>{if(cc.has(r))return;xd(r,"down");const x=my(()=>{xd(r,"up")}),b=()=>xd(r,"cancel");r.addEventListener("keyup",x,e),r.addEventListener("blur",b,e)});r.addEventListener("keydown",o,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",o),e)};function gy(t){return rm(t)&&!_1()}function pN(t,e,r={}){const[o,x,b]=E1(t,r),C=f=>{const s=f.currentTarget;if(!gy(f))return;cc.add(s);const h=e(s,f),d=(c,m)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),cc.has(s)&&cc.delete(s),gy(c)&&typeof h=="function"&&h(c,{success:m})},a=c=>{d(c,s===window||s===document||r.useGlobalTarget||M1(s,c.target))},l=c=>{d(c,!1)};window.addEventListener("pointerup",a,x),window.addEventListener("pointercancel",l,x)};return o.forEach(f=>{(r.useGlobalTarget?window:f).addEventListener("pointerdown",C,x),j1(f)&&(f.addEventListener("focus",h=>gN(h,x)),!mN(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),b}function N1(t){return Ub(t)&&"ownerSVGElement"in t}function xN(t){return N1(t)&&t.tagName==="svg"}const Wt=t=>!!(t&&t.getVelocity),yN=[...S1,Et,sr],vN=t=>yN.find(w1(t)),Fc=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class bN extends E.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const o=r.offsetParent,x=j1(o)&&o.offsetWidth||0,b=this.props.sizeRef.current;b.height=r.offsetHeight||0,b.width=r.offsetWidth||0,b.top=r.offsetTop,b.left=r.offsetLeft,b.right=x-b.width-b.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wN({children:t,isPresent:e,anchorX:r,root:o}){const x=E.useId(),b=E.useRef(null),C=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=E.useContext(Fc);return E.useInsertionEffect(()=>{const{width:s,height:h,top:d,left:a,right:l}=C.current;if(e||!b.current||!s||!h)return;const c=r==="left"?`left: ${a}`:`right: ${l}`;b.current.dataset.motionPopId=x;const m=document.createElement("style");f&&(m.nonce=f);const y=o??document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${h}px !important;
            ${c}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(m)&&y.removeChild(m)}},[e]),p.jsx(bN,{isPresent:e,childRef:b,sizeRef:C,children:E.cloneElement(t,{ref:b})})}const SN=({children:t,initial:e,isPresent:r,onExitComplete:o,custom:x,presenceAffectsLayout:b,mode:C,anchorX:f,root:s})=>{const h=Pc(CN),d=E.useId();let a=!0,l=E.useMemo(()=>(a=!1,{id:d,initial:e,isPresent:r,custom:x,onExitComplete:c=>{h.set(c,!0);for(const m of h.values())if(!m)return;o&&o()},register:c=>(h.set(c,!1),()=>h.delete(c))}),[r,h,o]);return b&&a&&(l={...l}),E.useMemo(()=>{h.forEach((c,m)=>h.set(m,!1))},[r]),E.useEffect(()=>{!r&&!h.size&&o&&o()},[r]),C==="popLayout"&&(t=p.jsx(wN,{isPresent:r,anchorX:f,root:s,children:t})),p.jsx(Lc.Provider,{value:l,children:t})};function CN(){return new Map}function O1(t=!0){const e=E.useContext(Lc);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:o,register:x}=e,b=E.useId();E.useEffect(()=>{if(t)return x(b)},[t]);const C=E.useCallback(()=>t&&o&&o(b),[b,o,t]);return!r&&o?[!1,C]:[!0]}const ec=t=>t.key||"";function py(t){const e=[];return E.Children.forEach(t,r=>{E.isValidElement(r)&&e.push(r)}),e}const Ya=({children:t,custom:e,initial:r=!0,onExitComplete:o,presenceAffectsLayout:x=!0,mode:b="sync",propagate:C=!1,anchorX:f="left",root:s})=>{const[h,d]=O1(C),a=E.useMemo(()=>py(t),[t]),l=C&&!h?[]:a.map(ec),c=E.useRef(!0),m=E.useRef(a),y=Pc(()=>new Map),[g,w]=E.useState(a),[S,k]=E.useState(a);Ib(()=>{c.current=!1,m.current=a;for(let N=0;N<S.length;N++){const D=ec(S[N]);l.includes(D)?y.delete(D):y.get(D)!==!0&&y.set(D,!1)}},[S,l.length,l.join("-")]);const j=[];if(a!==g){let N=[...a];for(let D=0;D<S.length;D++){const A=S[D],B=ec(A);l.includes(B)||(N.splice(D,0,A),j.push(A))}return b==="wait"&&j.length&&(N=j),k(py(N)),w(a),null}const{forceRender:M}=E.useContext(Lf);return p.jsx(p.Fragment,{children:S.map(N=>{const D=ec(N),A=C&&!h?!1:a===S||l.includes(D),B=()=>{if(y.has(D))y.set(D,!0);else return;let Y=!0;y.forEach(oe=>{oe||(Y=!1)}),Y&&(M==null||M(),k(m.current),C&&(d==null||d()),o&&o())};return p.jsx(SN,{isPresent:A,initial:!c.current||r?void 0:!1,custom:e,presenceAffectsLayout:x,mode:b,root:s,onExitComplete:A?void 0:B,anchorX:f,children:N},D)})})},D1=E.createContext({strict:!1}),xy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fs={};for(const t in xy)Fs[t]={isEnabled:e=>xy[t].some(r=>!!e[r])};function TN(t){for(const e in t)Fs[e]={...Fs[e],...t[e]}}const kN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||kN.has(t)}let A1=t=>!bc(t);function jN(t){typeof t=="function"&&(A1=e=>e.startsWith("on")?!bc(e):t(e))}try{jN(require("@emotion/is-prop-valid").default)}catch{}function _N(t,e,r){const o={};for(const x in t)x==="values"&&typeof t.values=="object"||(A1(x)||r===!0&&bc(x)||!e&&!bc(x)||t.draggable&&x.startsWith("onDrag"))&&(o[x]=t[x]);return o}const zc=E.createContext({});function Bc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bo(t){return typeof t=="string"||Array.isArray(t)}const sm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],am=["initial",...sm];function Ic(t){return Bc(t.animate)||am.some(e=>bo(t[e]))}function R1(t){return!!(Ic(t)||t.variants)}function EN(t,e){if(Ic(t)){const{initial:r,animate:o}=t;return{initial:r===!1||bo(r)?r:void 0,animate:bo(o)?o:void 0}}return t.inherit!==!1?e:{}}function MN(t){const{initial:e,animate:r}=EN(t,E.useContext(zc));return E.useMemo(()=>({initial:e,animate:r}),[yy(e),yy(r)])}function yy(t){return Array.isArray(t)?t.join(" "):t}const wo={};function NN(t){for(const e in t)wo[e]=t[e],Xf(e)&&(wo[e].isCSSVariable=!0)}function P1(t,{layout:e,layoutId:r}){return Xs.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!wo[t]||t==="opacity")}const ON={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DN=$s.length;function AN(t,e,r){let o="",x=!0;for(let b=0;b<DN;b++){const C=$s[b],f=t[C];if(f===void 0)continue;let s=!0;if(typeof f=="number"?s=f===(C.startsWith("scale")?1:0):s=parseFloat(f)===0,!s||r){const h=k1(f,nm[C]);if(!s){x=!1;const d=ON[C]||C;o+=`${d}(${h}) `}r&&(e[C]=h)}}return o=o.trim(),r?o=r(e,x?"":o):x&&(o="none"),o}function om(t,e,r){const{style:o,vars:x,transformOrigin:b}=t;let C=!1,f=!1;for(const s in e){const h=e[s];if(Xs.has(s)){C=!0;continue}else if(Xf(s)){x[s]=h;continue}else{const d=k1(h,nm[s]);s.startsWith("origin")?(f=!0,b[s]=d):o[s]=d}}if(e.transform||(C||r?o.transform=AN(e,t.transform,r):o.transform&&(o.transform="none")),f){const{originX:s="50%",originY:h="50%",originZ:d=0}=b;o.transformOrigin=`${s} ${h} ${d}`}}const lm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function L1(t,e,r){for(const o in e)!Wt(e[o])&&!P1(o,r)&&(t[o]=e[o])}function RN({transformTemplate:t},e){return E.useMemo(()=>{const r=lm();return om(r,e,t),Object.assign({},r.vars,r.style)},[e])}function PN(t,e){const r=t.style||{},o={};return L1(o,r,t),Object.assign(o,RN(t,e)),o}function LN(t,e){const r={},o=PN(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const FN={offset:"stroke-dashoffset",array:"stroke-dasharray"},zN={offset:"strokeDashoffset",array:"strokeDasharray"};function BN(t,e,r=1,o=0,x=!0){t.pathLength=1;const b=x?FN:zN;t[b.offset]=$e.transform(-o);const C=$e.transform(e),f=$e.transform(r);t[b.array]=`${C} ${f}`}function F1(t,{attrX:e,attrY:r,attrScale:o,pathLength:x,pathSpacing:b=1,pathOffset:C=0,...f},s,h,d){if(om(t,f,h),s){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:a,style:l}=t;a.transform&&(l.transform=a.transform,delete a.transform),(l.transform||a.transformOrigin)&&(l.transformOrigin=a.transformOrigin??"50% 50%",delete a.transformOrigin),l.transform&&(l.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete a.transformBox),e!==void 0&&(a.x=e),r!==void 0&&(a.y=r),o!==void 0&&(a.scale=o),x!==void 0&&BN(a,x,b,C,!1)}const z1=()=>({...lm(),attrs:{}}),B1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function IN(t,e,r,o){const x=E.useMemo(()=>{const b=z1();return F1(b,e,B1(o),t.transformTemplate,t.style),{...b.attrs,style:{...b.style}}},[e]);if(t.style){const b={};L1(b,t.style,t),x.style={...b,...x.style}}return x}const VN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cm(t){return typeof t!="string"||t.includes("-")?!1:!!(VN.indexOf(t)>-1||/[A-Z]/u.test(t))}function UN(t,e,r,{latestValues:o},x,b=!1){const f=(cm(t)?IN:LN)(e,o,x,t),s=_N(e,typeof t=="string",b),h=t!==E.Fragment?{...s,...f,ref:r}:{},{children:d}=e,a=E.useMemo(()=>Wt(d)?d.get():d,[d]);return E.createElement(t,{...h,children:a})}function vy(t){const e=[{},{}];return t==null||t.values.forEach((r,o)=>{e[0][o]=r.get(),e[1][o]=r.getVelocity()}),e}function um(t,e,r,o){if(typeof e=="function"){const[x,b]=vy(o);e=e(r!==void 0?r:t.custom,x,b)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[x,b]=vy(o);e=e(r!==void 0?r:t.custom,x,b)}return e}function uc(t){return Wt(t)?t.get():t}function HN({scrapeMotionValuesFromProps:t,createRenderState:e},r,o,x){return{latestValues:$N(r,o,x,t),renderState:e()}}function $N(t,e,r,o){const x={},b=o(t,{});for(const l in b)x[l]=uc(b[l]);let{initial:C,animate:f}=t;const s=Ic(t),h=R1(t);e&&h&&!s&&t.inherit!==!1&&(C===void 0&&(C=e.initial),f===void 0&&(f=e.animate));let d=r?r.initial===!1:!1;d=d||C===!1;const a=d?f:C;if(a&&typeof a!="boolean"&&!Bc(a)){const l=Array.isArray(a)?a:[a];for(let c=0;c<l.length;c++){const m=um(t,l[c]);if(m){const{transitionEnd:y,transition:g,...w}=m;for(const S in w){let k=w[S];if(Array.isArray(k)){const j=d?k.length-1:0;k=k[j]}k!==null&&(x[S]=k)}for(const S in y)x[S]=y[S]}}}return x}const I1=t=>(e,r)=>{const o=E.useContext(zc),x=E.useContext(Lc),b=()=>HN(t,e,o,x);return r?b():Pc(b)};function hm(t,e,r){var b;const{style:o}=t,x={};for(const C in o)(Wt(o[C])||e.style&&Wt(e.style[C])||P1(C,t)||((b=r==null?void 0:r.getValue(C))==null?void 0:b.liveStyle)!==void 0)&&(x[C]=o[C]);return x}const XN=I1({scrapeMotionValuesFromProps:hm,createRenderState:lm});function V1(t,e,r){const o=hm(t,e,r);for(const x in t)if(Wt(t[x])||Wt(e[x])){const b=$s.indexOf(x)!==-1?"attr"+x.charAt(0).toUpperCase()+x.substring(1):x;o[b]=t[x]}return o}const YN=I1({scrapeMotionValuesFromProps:V1,createRenderState:z1}),GN=Symbol.for("motionComponentSymbol");function Os(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qN(t,e,r){return E.useCallback(o=>{o&&t.onMount&&t.onMount(o),e&&(o?e.mount(o):e.unmount()),r&&(typeof r=="function"?r(o):Os(r)&&(r.current=o))},[e])}const dm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WN="framerAppearId",U1="data-"+dm(WN),H1=E.createContext({});function KN(t,e,r,o,x){var y,g;const{visualElement:b}=E.useContext(zc),C=E.useContext(D1),f=E.useContext(Lc),s=E.useContext(Fc).reducedMotion,h=E.useRef(null);o=o||C.renderer,!h.current&&o&&(h.current=o(t,{visualState:e,parent:b,props:r,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:s}));const d=h.current,a=E.useContext(H1);d&&!d.projection&&x&&(d.type==="html"||d.type==="svg")&&ZN(h.current,r,x,a);const l=E.useRef(!1);E.useInsertionEffect(()=>{d&&l.current&&d.update(r,f)});const c=r[U1],m=E.useRef(!!c&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,c))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,c)));return Ib(()=>{d&&(l.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),E.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,c)}),m.current=!1),d.enteringChildren=void 0)}),d}function ZN(t,e,r,o){const{layoutId:x,layout:b,drag:C,dragConstraints:f,layoutScroll:s,layoutRoot:h,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:$1(t.parent)),t.projection.setOptions({layoutId:x,layout:b,alwaysMeasureLayout:!!C||f&&Os(f),visualElement:t,animationType:typeof b=="string"?b:"both",initialPromotionConfig:o,crossfade:d,layoutScroll:s,layoutRoot:h})}function $1(t){if(t)return t.options.allowProjection!==!1?t.projection:$1(t.parent)}function yd(t,{forwardMotionProps:e=!1}={},r,o){r&&TN(r);const x=cm(t)?YN:XN;function b(f,s){let h;const d={...E.useContext(Fc),...f,layoutId:QN(f)},{isStatic:a}=d,l=MN(f),c=x(f,a);if(!a&&Ff){JN();const m=eO(d);h=m.MeasureLayout,l.visualElement=KN(t,c,d,o,m.ProjectionNode)}return p.jsxs(zc.Provider,{value:l,children:[h&&l.visualElement?p.jsx(h,{visualElement:l.visualElement,...d}):null,UN(t,f,qN(c,l.visualElement,s),c,a,e)]})}b.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const C=E.forwardRef(b);return C[GN]=t,C}function QN({layoutId:t}){const e=E.useContext(Lf).id;return e&&t!==void 0?e+"-"+t:t}function JN(t,e){E.useContext(D1).strict}function eO(t){const{drag:e,layout:r}=Fs;if(!e&&!r)return{};const o={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function tO(t,e){if(typeof Proxy>"u")return yd;const r=new Map,o=(b,C)=>yd(b,C,t,e),x=(b,C)=>o(b,C);return new Proxy(x,{get:(b,C)=>C==="create"?o:(r.has(C)||r.set(C,yd(C,void 0,t,e)),r.get(C))})}function X1({top:t,left:e,right:r,bottom:o}){return{x:{min:e,max:r},y:{min:t,max:o}}}function nO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iO(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),o=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:o.y,right:o.x}}function vd(t){return t===void 0||t===1}function af({scale:t,scaleX:e,scaleY:r}){return!vd(t)||!vd(e)||!vd(r)}function Er(t){return af(t)||Y1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Y1(t){return by(t.x)||by(t.y)}function by(t){return t&&t!=="0%"}function wc(t,e,r){const o=t-r,x=e*o;return r+x}function wy(t,e,r,o,x){return x!==void 0&&(t=wc(t,x,o)),wc(t,r,o)+e}function of(t,e=0,r=1,o,x){t.min=wy(t.min,e,r,o,x),t.max=wy(t.max,e,r,o,x)}function G1(t,{x:e,y:r}){of(t.x,e.translate,e.scale,e.originPoint),of(t.y,r.translate,r.scale,r.originPoint)}const Sy=.999999999999,Cy=1.0000000000001;function rO(t,e,r,o=!1){const x=r.length;if(!x)return;e.x=e.y=1;let b,C;for(let f=0;f<x;f++){b=r[f],C=b.projectionDelta;const{visualElement:s}=b.options;s&&s.props.style&&s.props.style.display==="contents"||(o&&b.options.layoutScroll&&b.scroll&&b!==b.root&&As(t,{x:-b.scroll.offset.x,y:-b.scroll.offset.y}),C&&(e.x*=C.x.scale,e.y*=C.y.scale,G1(t,C)),o&&Er(b.latestValues)&&As(t,b.latestValues))}e.x<Cy&&e.x>Sy&&(e.x=1),e.y<Cy&&e.y>Sy&&(e.y=1)}function Ds(t,e){t.min=t.min+e,t.max=t.max+e}function Ty(t,e,r,o,x=.5){const b=mt(t.min,t.max,x);of(t,e,r,b,o)}function As(t,e){Ty(t.x,e.x,e.scaleX,e.scale,e.originX),Ty(t.y,e.y,e.scaleY,e.scale,e.originY)}function q1(t,e){return X1(iO(t.getBoundingClientRect(),e))}function sO(t,e,r){const o=q1(t,r),{scroll:x}=e;return x&&(Ds(o.x,x.offset.x),Ds(o.y,x.offset.y)),o}const ky=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rs=()=>({x:ky(),y:ky()}),jy=()=>({min:0,max:0}),wt=()=>({x:jy(),y:jy()}),lf={current:null},W1={current:!1};function aO(){if(W1.current=!0,!!Ff)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lf.current=t.matches;t.addEventListener("change",e),e()}else lf.current=!1}const oO=new WeakMap;function lO(t,e,r){for(const o in e){const x=e[o],b=r[o];if(Wt(x))t.addValue(o,x);else if(Wt(b))t.addValue(o,Br(x,{owner:t}));else if(b!==x)if(t.hasValue(o)){const C=t.getValue(o);C.liveStyle===!0?C.jump(x):C.hasAnimated||C.set(x)}else{const C=t.getStaticValue(o);t.addValue(o,Br(C!==void 0?C:x,{owner:t}))}}for(const o in r)e[o]===void 0&&t.removeValue(o);return e}const _y=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cO{scrapeMotionValuesFromProps(e,r,o){return{}}constructor({parent:e,props:r,presenceContext:o,reducedMotionConfig:x,blockInitialAnimation:b,visualState:C},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=em,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const l=hn.now();this.renderScheduledAt<l&&(this.renderScheduledAt=l,dt.render(this.render,!1,!0))};const{latestValues:s,renderState:h}=C;this.latestValues=s,this.baseTarget={...s},this.initialValues=r.initial?{...s}:{},this.renderState=h,this.parent=e,this.props=r,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=x,this.options=f,this.blockInitialAnimation=!!b,this.isControllingVariants=Ic(r),this.isVariantNode=R1(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...a}=this.scrapeMotionValuesFromProps(r,{},this);for(const l in a){const c=a[l];s[l]!==void 0&&Wt(c)&&c.set(s[l])}}mount(e){var r;this.current=e,oO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,x)=>this.bindToMotionValue(x,o)),W1.current||aO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lf.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),rr(this.notifyUpdate),rr(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const o=this.features[r];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=Xs.has(e);o&&this.onBindTransform&&this.onBindTransform();const x=r.on("change",C=>{this.latestValues[e]=C,this.props.onUpdate&&dt.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let b;window.MotionCheckAppearSync&&(b=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{x(),b&&b(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fs){const r=Fs[e];if(!r)continue;const{isEnabled:o,Feature:x}=r;if(!this.features[e]&&x&&o(this.props)&&(this.features[e]=new x(this)),this.features[e]){const b=this.features[e];b.isMounted?b.update():(b.mount(),b.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let o=0;o<_y.length;o++){const x=_y[o];this.propEventSubscriptions[x]&&(this.propEventSubscriptions[x](),delete this.propEventSubscriptions[x]);const b="on"+x,C=e[b];C&&(this.propEventSubscriptions[x]=this.on(x,C))}this.prevMotionValues=lO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const o=this.values.get(e);r!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&r!==void 0&&(o=Br(r===null?void 0:r,{owner:this}),this.addValue(e,o)),o}readValue(e,r){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Vb(o)||Hb(o))?o=parseFloat(o):!vN(o)&&sr.test(r)&&(o=T1(e,r)),this.setBaseTarget(e,Wt(o)?o.get():o)),Wt(o)?o.get():o}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var b;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const C=um(this.props,r,(b=this.presenceContext)==null?void 0:b.custom);C&&(o=C[e])}if(r&&o!==void 0)return o;const x=this.getBaseTargetFromProps(this.props,e);return x!==void 0&&!Wt(x)?x:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Uf),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){im.render(this.render)}}class K1 extends cO{constructor(){super(...arguments),this.KeyframeResolver=oN}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:o}){delete r[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Z1(t,{style:e,vars:r},o,x){const b=t.style;let C;for(C in e)b[C]=e[C];x==null||x.applyProjectionStyles(b,o);for(C in r)b.setProperty(C,r[C])}function uO(t){return window.getComputedStyle(t)}class hO extends K1{constructor(){super(...arguments),this.type="html",this.renderInstance=Z1}readValueFromInstance(e,r){var o;if(Xs.has(r))return(o=this.projection)!=null&&o.isProjecting?Qd(r):jM(e,r);{const x=uO(e),b=(Xf(r)?x.getPropertyValue(r):x[r])||0;return typeof b=="string"?b.trim():b}}measureInstanceViewportBox(e,{transformPagePoint:r}){return q1(e,r)}build(e,r,o){om(e,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,r,o){return hm(e,r,o)}}const Q1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dO(t,e,r,o){Z1(t,e,void 0,o);for(const x in e.attrs)t.setAttribute(Q1.has(x)?x:dm(x),e.attrs[x])}class fO extends K1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wt}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Xs.has(r)){const o=C1(r);return o&&o.default||0}return r=Q1.has(r)?r:dm(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,o){return V1(e,r,o)}build(e,r,o){F1(e,r,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(e,r,o,x){dO(e,r,o,x)}mount(e){this.isSVGTag=B1(e.tagName),super.mount(e)}}const mO=(t,e)=>cm(t)?new fO(e):new hO(e,{allowProjection:t!==E.Fragment});function Ls(t,e,r){const o=t.getProps();return um(o,e,r!==void 0?r:o.custom,t)}const cf=t=>Array.isArray(t);function gO(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Br(r))}function pO(t){return cf(t)?t[t.length-1]||0:t}function xO(t,e){const r=Ls(t,e);let{transitionEnd:o={},transition:x={},...b}=r||{};b={...b,...o};for(const C in b){const f=pO(b[C]);gO(t,C,f)}}function yO(t){return!!(Wt(t)&&t.add)}function uf(t,e){const r=t.getValue("willChange");if(yO(r))return r.add(e);if(!r&&Mi.WillChange){const o=new Mi.WillChange("auto");t.addValue("willChange",o),o.add(e)}}function J1(t){return t.props[U1]}const vO=t=>t!==null;function bO(t,{repeat:e,repeatType:r="loop"},o){const x=t.filter(vO),b=e&&r!=="loop"&&e%2===1?0:x.length-1;return x[b]}const wO={type:"spring",stiffness:500,damping:25,restSpeed:10},SO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CO={type:"keyframes",duration:.8},TO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kO=(t,{keyframes:e})=>e.length>2?CO:Xs.has(t)?t.startsWith("scale")?SO(e[1]):wO:TO;function jO({when:t,delay:e,delayChildren:r,staggerChildren:o,staggerDirection:x,repeat:b,repeatType:C,repeatDelay:f,from:s,elapsed:h,...d}){return!!Object.keys(d).length}const fm=(t,e,r,o={},x,b)=>C=>{const f=tm(o,t)||{},s=f.delay||o.delay||0;let{elapsed:h=0}=o;h=h-ei(s);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-h,onUpdate:l=>{e.set(l),f.onUpdate&&f.onUpdate(l)},onComplete:()=>{C(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:b?void 0:x};jO(f)||Object.assign(d,kO(t,d)),d.duration&&(d.duration=ei(d.duration)),d.repeatDelay&&(d.repeatDelay=ei(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let a=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(rf(d),d.delay===0&&(a=!0)),(Mi.instantAnimations||Mi.skipAnimations)&&(a=!0,rf(d),d.delay=0),d.allowFlatten=!f.type&&!f.ease,a&&!b&&e.get()!==void 0){const l=bO(d.keyframes,f);if(l!==void 0){dt.update(()=>{d.onUpdate(l),d.onComplete()});return}}return f.isSync?new Jf(d):new WM(d)};function _O({protectedKeys:t,needsAnimating:e},r){const o=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,o}function ew(t,e,{delay:r=0,transitionOverride:o,type:x}={}){let{transition:b=t.getDefaultTransition(),transitionEnd:C,...f}=e;o&&(b=o);const s=[],h=x&&t.animationState&&t.animationState.getState()[x];for(const d in f){const a=t.getValue(d,t.latestValues[d]??null),l=f[d];if(l===void 0||h&&_O(h,d))continue;const c={delay:r,...tm(b||{},d)},m=a.get();if(m!==void 0&&!a.isAnimating&&!Array.isArray(l)&&l===m&&!c.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const w=J1(t);if(w){const S=window.MotionHandoffAnimation(w,d,dt);S!==null&&(c.startTime=S,y=!0)}}uf(t,d),a.start(fm(d,a,l,t.shouldReduceMotion&&b1.has(d)?{type:!1}:c,t,y));const g=a.animation;g&&s.push(g)}return C&&Promise.all(s).then(()=>{dt.update(()=>{C&&xO(t,C)})}),s}function tw(t,e,r,o=0,x=1){const b=Array.from(t).sort((h,d)=>h.sortNodePosition(d)).indexOf(e),C=t.size,f=(C-1)*o;return typeof r=="function"?r(b,C):x===1?b*o:f-b*o}function hf(t,e,r={}){var s;const o=Ls(t,e,r.type==="exit"?(s=t.presenceContext)==null?void 0:s.custom:void 0);let{transition:x=t.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(x=r.transitionOverride);const b=o?()=>Promise.all(ew(t,o,r)):()=>Promise.resolve(),C=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:d=0,staggerChildren:a,staggerDirection:l}=x;return EO(t,e,h,d,a,l,r)}:()=>Promise.resolve(),{when:f}=x;if(f){const[h,d]=f==="beforeChildren"?[b,C]:[C,b];return h().then(()=>d())}else return Promise.all([b(),C(r.delay)])}function EO(t,e,r=0,o=0,x=0,b=1,C){const f=[];for(const s of t.variantChildren)s.notify("AnimationStart",e),f.push(hf(s,e,{...C,delay:r+(typeof o=="function"?0:o)+tw(t.variantChildren,s,o,x,b)}).then(()=>s.notify("AnimationComplete",e)));return Promise.all(f)}function MO(t,e,r={}){t.notify("AnimationStart",e);let o;if(Array.isArray(e)){const x=e.map(b=>hf(t,b,r));o=Promise.all(x)}else if(typeof e=="string")o=hf(t,e,r);else{const x=typeof e=="function"?Ls(t,e,r.custom):e;o=Promise.all(ew(t,x,r))}return o.then(()=>{t.notify("AnimationComplete",e)})}function nw(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}const NO=am.length;function iw(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?iw(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<NO;r++){const o=am[r],x=t.props[o];(bo(x)||x===!1)&&(e[o]=x)}return e}const OO=[...sm].reverse(),DO=sm.length;function AO(t){return e=>Promise.all(e.map(({animation:r,options:o})=>MO(t,r,o)))}function RO(t){let e=AO(t),r=Ey(),o=!0;const x=s=>(h,d)=>{var l;const a=Ls(t,d,s==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);if(a){const{transition:c,transitionEnd:m,...y}=a;h={...h,...y,...m}}return h};function b(s){e=s(t)}function C(s){const{props:h}=t,d=iw(t.parent)||{},a=[],l=new Set;let c={},m=1/0;for(let g=0;g<DO;g++){const w=OO[g],S=r[w],k=h[w]!==void 0?h[w]:d[w],j=bo(k),M=w===s?S.isActive:null;M===!1&&(m=g);let N=k===d[w]&&k!==h[w]&&j;if(N&&o&&t.manuallyAnimateOnMount&&(N=!1),S.protectedKeys={...c},!S.isActive&&M===null||!k&&!S.prevProp||Bc(k)||typeof k=="boolean")continue;const D=PO(S.prevProp,k);let A=D||w===s&&S.isActive&&!N&&j||g>m&&j,B=!1;const Y=Array.isArray(k)?k:[k];let oe=Y.reduce(x(w),{});M===!1&&(oe={});const{prevResolvedValues:Z={}}=S,ae={...Z,...oe},te=q=>{A=!0,l.has(q)&&(B=!0,l.delete(q)),S.needsAnimating[q]=!0;const X=t.getValue(q);X&&(X.liveStyle=!1)};for(const q in ae){const X=oe[q],R=Z[q];if(c.hasOwnProperty(q))continue;let O=!1;cf(X)&&cf(R)?O=!nw(X,R):O=X!==R,O?X!=null?te(q):l.add(q):X!==void 0&&l.has(q)?te(q):S.protectedKeys[q]=!0}S.prevProp=k,S.prevResolvedValues=oe,S.isActive&&(c={...c,...oe}),o&&t.blockInitialAnimation&&(A=!1);const G=N&&D;A&&(!G||B)&&a.push(...Y.map(q=>{const X={type:w};if(typeof q=="string"&&o&&!G&&t.manuallyAnimateOnMount&&t.parent){const{parent:R}=t,O=Ls(R,q);if(R.enteringChildren&&O){const{delayChildren:L}=O.transition||{};X.delay=tw(R.enteringChildren,t,L)}}return{animation:q,options:X}}))}if(l.size){const g={};if(typeof h.initial!="boolean"){const w=Ls(t,Array.isArray(h.initial)?h.initial[0]:h.initial);w&&w.transition&&(g.transition=w.transition)}l.forEach(w=>{const S=t.getBaseTarget(w),k=t.getValue(w);k&&(k.liveStyle=!0),g[w]=S??null}),a.push({animation:g})}let y=!!a.length;return o&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(y=!1),o=!1,y?e(a):Promise.resolve()}function f(s,h){var a;if(r[s].isActive===h)return Promise.resolve();(a=t.variantChildren)==null||a.forEach(l=>{var c;return(c=l.animationState)==null?void 0:c.setActive(s,h)}),r[s].isActive=h;const d=C(s);for(const l in r)r[l].protectedKeys={};return d}return{animateChanges:C,setActive:f,setAnimateFunction:b,getState:()=>r,reset:()=>{r=Ey(),o=!0}}}function PO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nw(e,t):!1}function _r(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ey(){return{animate:_r(!0),whileInView:_r(),whileHover:_r(),whileTap:_r(),whileDrag:_r(),whileFocus:_r(),exit:_r()}}class or{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LO extends or{constructor(e){super(e),e.animationState||(e.animationState=RO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let FO=0;class zO extends or{constructor(){super(...arguments),this.id=FO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const x=this.node.animationState.setActive("exit",!e);r&&!e&&x.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const BO={animation:{Feature:LO},exit:{Feature:zO}};function So(t,e,r,o={passive:!0}){return t.addEventListener(e,r,o),()=>t.removeEventListener(e,r)}function Lo(t){return{point:{x:t.pageX,y:t.pageY}}}const IO=t=>e=>rm(e)&&t(e,Lo(e));function so(t,e,r,o){return So(t,e,IO(r),o)}const rw=1e-4,VO=1-rw,UO=1+rw,sw=.01,HO=0-sw,$O=0+sw;function en(t){return t.max-t.min}function XO(t,e,r){return Math.abs(t-e)<=r}function My(t,e,r,o=.5){t.origin=o,t.originPoint=mt(e.min,e.max,t.origin),t.scale=en(r)/en(e),t.translate=mt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=VO&&t.scale<=UO||isNaN(t.scale))&&(t.scale=1),(t.translate>=HO&&t.translate<=$O||isNaN(t.translate))&&(t.translate=0)}function ao(t,e,r,o){My(t.x,e.x,r.x,o?o.originX:void 0),My(t.y,e.y,r.y,o?o.originY:void 0)}function Ny(t,e,r){t.min=r.min+e.min,t.max=t.min+en(e)}function YO(t,e,r){Ny(t.x,e.x,r.x),Ny(t.y,e.y,r.y)}function Oy(t,e,r){t.min=e.min-r.min,t.max=t.min+en(e)}function oo(t,e,r){Oy(t.x,e.x,r.x),Oy(t.y,e.y,r.y)}function On(t){return[t("x"),t("y")]}const aw=({current:t})=>t?t.ownerDocument.defaultView:null,Dy=(t,e)=>Math.abs(t-e);function GO(t,e){const r=Dy(t.x,e.x),o=Dy(t.y,e.y);return Math.sqrt(r**2+o**2)}class ow{constructor(e,r,{transformPagePoint:o,contextWindow:x=window,dragSnapToOrigin:b=!1,distanceThreshold:C=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=wd(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,m=GO(l.offset,{x:0,y:0})>=this.distanceThreshold;if(!c&&!m)return;const{point:y}=l,{timestamp:g}=Ht;this.history.push({...y,timestamp:g});const{onStart:w,onMove:S}=this.handlers;c||(w&&w(this.lastMoveEvent,l),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,l)},this.handlePointerMove=(l,c)=>{this.lastMoveEvent=l,this.lastMoveEventInfo=bd(c,this.transformPagePoint),dt.update(this.updatePoint,!0)},this.handlePointerUp=(l,c)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=wd(l.type==="pointercancel"?this.lastMoveEventInfo:bd(c,this.transformPagePoint),this.history);this.startEvent&&m&&m(l,w),y&&y(l,w)},!rm(e))return;this.dragSnapToOrigin=b,this.handlers=r,this.transformPagePoint=o,this.distanceThreshold=C,this.contextWindow=x||window;const f=Lo(e),s=bd(f,this.transformPagePoint),{point:h}=s,{timestamp:d}=Ht;this.history=[{...h,timestamp:d}];const{onSessionStart:a}=r;a&&a(e,wd(s,this.history)),this.removeListeners=Ao(so(this.contextWindow,"pointermove",this.handlePointerMove),so(this.contextWindow,"pointerup",this.handlePointerUp),so(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rr(this.updatePoint)}}function bd(t,e){return e?{point:e(t.point)}:t}function Ay(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wd({point:t},e){return{point:t,delta:Ay(t,lw(e)),offset:Ay(t,qO(e)),velocity:WO(e,.1)}}function qO(t){return t[0]}function lw(t){return t[t.length-1]}function WO(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,o=null;const x=lw(t);for(;r>=0&&(o=t[r],!(x.timestamp-o.timestamp>ei(e)));)r--;if(!o)return{x:0,y:0};const b=ti(x.timestamp-o.timestamp);if(b===0)return{x:0,y:0};const C={x:(x.x-o.x)/b,y:(x.y-o.y)/b};return C.x===1/0&&(C.x=0),C.y===1/0&&(C.y=0),C}function KO(t,{min:e,max:r},o){return e!==void 0&&t<e?t=o?mt(e,t,o.min):Math.max(t,e):r!==void 0&&t>r&&(t=o?mt(r,t,o.max):Math.min(t,r)),t}function Ry(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function ZO(t,{top:e,left:r,bottom:o,right:x}){return{x:Ry(t.x,r,x),y:Ry(t.y,e,o)}}function Py(t,e){let r=e.min-t.min,o=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,o]=[o,r]),{min:r,max:o}}function QO(t,e){return{x:Py(t.x,e.x),y:Py(t.y,e.y)}}function JO(t,e){let r=.5;const o=en(t),x=en(e);return x>o?r=xo(e.min,e.max-o,t.min):o>x&&(r=xo(t.min,t.max-x,e.min)),Ei(0,1,r)}function eD(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const df=.35;function tD(t=df){return t===!1?t=0:t===!0&&(t=df),{x:Ly(t,"left","right"),y:Ly(t,"top","bottom")}}function Ly(t,e,r){return{min:Fy(t,e),max:Fy(t,r)}}function Fy(t,e){return typeof t=="number"?t:t[e]||0}const nD=new WeakMap;class iD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:o}={}){const{presenceContext:x}=this.visualElement;if(x&&x.isPresent===!1)return;const b=a=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Lo(a).point)},C=(a,l)=>{const{drag:c,dragPropagation:m,onDragStart:y}=this.getProps();if(c&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hN(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(w=>{let S=this.getAxisMotionValue(w).get()||0;if(ni.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const j=k.layout.layoutBox[w];j&&(S=en(j)*(parseFloat(S)/100))}}this.originPoint[w]=S}),y&&dt.postRender(()=>y(a,l)),uf(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},f=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l;const{dragPropagation:c,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!c&&!this.openDragLock)return;const{offset:w}=l;if(m&&this.currentDirection===null){this.currentDirection=rD(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",l.point,w),this.updateAxis("y",l.point,w),this.visualElement.render(),g&&g(a,l)},s=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l,this.stop(a,l),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>On(a=>{var l;return this.getAnimationState(a)==="paused"&&((l=this.getAxisMotionValue(a).animation)==null?void 0:l.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new ow(e,{onSessionStart:b,onStart:C,onMove:f,onSessionEnd:s,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:o,contextWindow:aw(this.visualElement)})}stop(e,r){const o=e||this.latestPointerEvent,x=r||this.latestPanInfo,b=this.isDragging;if(this.cancel(),!b||!x||!o)return;const{velocity:C}=x;this.startAnimation(C);const{onDragEnd:f}=this.getProps();f&&dt.postRender(()=>f(o,x))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,o){const{drag:x}=this.getProps();if(!o||!tc(e,x,this.currentDirection))return;const b=this.getAxisMotionValue(e);let C=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(C=KO(C,this.constraints[e],this.elastic[e])),b.set(C)}resolveConstraints(){var b;const{dragConstraints:e,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(b=this.visualElement.projection)==null?void 0:b.layout,x=this.constraints;e&&Os(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=ZO(o.layoutBox,e):this.constraints=!1,this.elastic=tD(r),x!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&On(C=>{this.constraints!==!1&&this.getAxisMotionValue(C)&&(this.constraints[C]=eD(o.layoutBox[C],this.constraints[C]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Os(e))return!1;const o=e.current,{projection:x}=this.visualElement;if(!x||!x.layout)return!1;const b=sO(o,x.root,this.visualElement.getTransformPagePoint());let C=QO(x.layout.layoutBox,b);if(r){const f=r(nO(C));this.hasMutatedConstraints=!!f,f&&(C=X1(f))}return C}startAnimation(e){const{drag:r,dragMomentum:o,dragElastic:x,dragTransition:b,dragSnapToOrigin:C,onDragTransitionEnd:f}=this.getProps(),s=this.constraints||{},h=On(d=>{if(!tc(d,r,this.currentDirection))return;let a=s&&s[d]||{};C&&(a={min:0,max:0});const l=x?200:1e6,c=x?40:1e7,m={type:"inertia",velocity:o?e[d]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...b,...a};return this.startAxisValueAnimation(d,m)});return Promise.all(h).then(f)}startAxisValueAnimation(e,r){const o=this.getAxisMotionValue(e);return uf(this.visualElement,e),o.start(fm(e,o,0,r,this.visualElement,!1))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),x=o[r];return x||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){On(r=>{const{drag:o}=this.getProps();if(!tc(r,o,this.currentDirection))return;const{projection:x}=this.visualElement,b=this.getAxisMotionValue(r);if(x&&x.layout){const{min:C,max:f}=x.layout.layoutBox[r];b.set(e[r]-mt(C,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:o}=this.visualElement;if(!Os(r)||!o||!this.constraints)return;this.stopAnimation();const x={x:0,y:0};On(C=>{const f=this.getAxisMotionValue(C);if(f&&this.constraints!==!1){const s=f.get();x[C]=JO({min:s,max:s},this.constraints[C])}});const{transformTemplate:b}=this.visualElement.getProps();this.visualElement.current.style.transform=b?b({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),On(C=>{if(!tc(C,e,null))return;const f=this.getAxisMotionValue(C),{min:s,max:h}=this.constraints[C];f.set(mt(s,h,x[C]))})}addListeners(){if(!this.visualElement.current)return;nD.set(this.visualElement,this);const e=this.visualElement.current,r=so(e,"pointerdown",s=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(s)}),o=()=>{const{dragConstraints:s}=this.getProps();Os(s)&&s.current&&(this.constraints=this.resolveRefConstraints())},{projection:x}=this.visualElement,b=x.addEventListener("measure",o);x&&!x.layout&&(x.root&&x.root.updateScroll(),x.updateLayout()),dt.read(o);const C=So(window,"resize",()=>this.scalePositionWithinConstraints()),f=x.addEventListener("didUpdate",({delta:s,hasLayoutChanged:h})=>{this.isDragging&&h&&(On(d=>{const a=this.getAxisMotionValue(d);a&&(this.originPoint[d]+=s[d].translate,a.set(a.get()+s[d].translate))}),this.visualElement.render())});return()=>{C(),r(),b(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:o=!1,dragPropagation:x=!1,dragConstraints:b=!1,dragElastic:C=df,dragMomentum:f=!0}=e;return{...e,drag:r,dragDirectionLock:o,dragPropagation:x,dragConstraints:b,dragElastic:C,dragMomentum:f}}}function tc(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function rD(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class sD extends or{constructor(e){super(e),this.removeGroupControls=An,this.removeListeners=An,this.controls=new iD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}unmount(){this.removeGroupControls(),this.removeListeners()}}const zy=t=>(e,r)=>{t&&dt.postRender(()=>t(e,r))};class aD extends or{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(e){this.session=new ow(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:o,onPanEnd:x}=this.node.getProps();return{onSessionStart:zy(e),onStart:zy(r),onMove:o,onEnd:(b,C)=>{delete this.session,x&&dt.postRender(()=>x(b,C))}}}mount(){this.removePointerDownListener=so(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function By(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ga={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if($e.test(t))t=parseFloat(t);else return t;const r=By(t,e.target.x),o=By(t,e.target.y);return`${r}% ${o}%`}},oD={correct:(t,{treeScale:e,projectionDelta:r})=>{const o=t,x=sr.parse(t);if(x.length>5)return o;const b=sr.createTransformer(t),C=typeof x[0]!="number"?1:0,f=r.x.scale*e.x,s=r.y.scale*e.y;x[0+C]/=f,x[1+C]/=s;const h=mt(f,s,.5);return typeof x[2+C]=="number"&&(x[2+C]/=h),typeof x[3+C]=="number"&&(x[3+C]/=h),b(x)}};let Sd=!1;class lD extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o,layoutId:x}=this.props,{projection:b}=e;NN(cD),b&&(r.group&&r.group.add(b),o&&o.register&&x&&o.register(b),Sd&&b.root.didUpdate(),b.addEventListener("animationComplete",()=>{this.safeToRemove()}),b.setOptions({...b.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:o,drag:x,isPresent:b}=this.props,{projection:C}=o;return C&&(C.isPresent=b,Sd=!0,x||e.layoutDependency!==r||r===void 0||e.isPresent!==b?C.willUpdate():this.safeToRemove(),e.isPresent!==b&&(b?C.promote():C.relegate()||dt.postRender(()=>{const f=C.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),im.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o}=this.props,{projection:x}=e;Sd=!0,x&&(x.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(x),o&&o.deregister&&o.deregister(x))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cw(t){const[e,r]=O1(),o=E.useContext(Lf);return p.jsx(lD,{...t,layoutGroup:o,switchLayoutGroup:E.useContext(H1),isPresent:e,safeToRemove:r})}const cD={borderRadius:{...Ga,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ga,borderTopRightRadius:Ga,borderBottomLeftRadius:Ga,borderBottomRightRadius:Ga,boxShadow:oD};function uD(t,e,r){const o=Wt(t)?t:Br(t);return o.start(fm("",o,e,r)),o.animation}const hD=(t,e)=>t.depth-e.depth;class dD{constructor(){this.children=[],this.isDirty=!1}add(e){zf(this.children,e),this.isDirty=!0}remove(e){Bf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hD),this.isDirty=!1,this.children.forEach(e)}}function fD(t,e){const r=hn.now(),o=({timestamp:x})=>{const b=x-r;b>=e&&(rr(o),t(b-e))};return dt.setup(o,!0),()=>rr(o)}const uw=["TopLeft","TopRight","BottomLeft","BottomRight"],mD=uw.length,Iy=t=>typeof t=="string"?parseFloat(t):t,Vy=t=>typeof t=="number"||$e.test(t);function gD(t,e,r,o,x,b){x?(t.opacity=mt(0,r.opacity??1,pD(o)),t.opacityExit=mt(e.opacity??1,0,xD(o))):b&&(t.opacity=mt(e.opacity??1,r.opacity??1,o));for(let C=0;C<mD;C++){const f=`border${uw[C]}Radius`;let s=Uy(e,f),h=Uy(r,f);if(s===void 0&&h===void 0)continue;s||(s=0),h||(h=0),s===0||h===0||Vy(s)===Vy(h)?(t[f]=Math.max(mt(Iy(s),Iy(h),o),0),(ni.test(h)||ni.test(s))&&(t[f]+="%")):t[f]=h}(e.rotate||r.rotate)&&(t.rotate=mt(e.rotate||0,r.rotate||0,o))}function Uy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pD=hw(0,.5,Zb),xD=hw(.5,.95,An);function hw(t,e,r){return o=>o<t?0:o>e?1:r(xo(t,e,o))}function Hy(t,e){t.min=e.min,t.max=e.max}function Nn(t,e){Hy(t.x,e.x),Hy(t.y,e.y)}function $y(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Xy(t,e,r,o,x){return t-=e,t=wc(t,1/r,o),x!==void 0&&(t=wc(t,1/x,o)),t}function yD(t,e=0,r=1,o=.5,x,b=t,C=t){if(ni.test(e)&&(e=parseFloat(e),e=mt(C.min,C.max,e/100)-C.min),typeof e!="number")return;let f=mt(b.min,b.max,o);t===b&&(f-=e),t.min=Xy(t.min,e,r,f,x),t.max=Xy(t.max,e,r,f,x)}function Yy(t,e,[r,o,x],b,C){yD(t,e[r],e[o],e[x],e.scale,b,C)}const vD=["x","scaleX","originX"],bD=["y","scaleY","originY"];function Gy(t,e,r,o){Yy(t.x,e,vD,r?r.x:void 0,o?o.x:void 0),Yy(t.y,e,bD,r?r.y:void 0,o?o.y:void 0)}function qy(t){return t.translate===0&&t.scale===1}function dw(t){return qy(t.x)&&qy(t.y)}function Wy(t,e){return t.min===e.min&&t.max===e.max}function wD(t,e){return Wy(t.x,e.x)&&Wy(t.y,e.y)}function Ky(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function fw(t,e){return Ky(t.x,e.x)&&Ky(t.y,e.y)}function Zy(t){return en(t.x)/en(t.y)}function Qy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class SD{constructor(){this.members=[]}add(e){zf(this.members,e),e.scheduleRender()}remove(e){if(Bf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(x=>e===x);if(r===0)return!1;let o;for(let x=r;x>=0;x--){const b=this.members[x];if(b.isPresent!==!1){o=b;break}}return o?(this.promote(o),!0):!1}promote(e,r){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,r&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:x}=e.options;x===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:o}=e;r.onExitComplete&&r.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CD(t,e,r){let o="";const x=t.x.translate/e.x,b=t.y.translate/e.y,C=(r==null?void 0:r.z)||0;if((x||b||C)&&(o=`translate3d(${x}px, ${b}px, ${C}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:h,rotate:d,rotateX:a,rotateY:l,skewX:c,skewY:m}=r;h&&(o=`perspective(${h}px) ${o}`),d&&(o+=`rotate(${d}deg) `),a&&(o+=`rotateX(${a}deg) `),l&&(o+=`rotateY(${l}deg) `),c&&(o+=`skewX(${c}deg) `),m&&(o+=`skewY(${m}deg) `)}const f=t.x.scale*e.x,s=t.y.scale*e.y;return(f!==1||s!==1)&&(o+=`scale(${f}, ${s})`),o||"none"}const Cd=["","X","Y","Z"],TD=1e3;let kD=0;function Td(t,e,r,o){const{latestValues:x}=e;x[t]&&(r[t]=x[t],e.setStaticValue(t,0),o&&(o[t]=0))}function mw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=J1(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:x,layoutId:b}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",dt,!(x||b))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&mw(o)}function gw({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:o,resetTransform:x}){return class{constructor(C={},f=e==null?void 0:e()){this.id=kD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ED),this.nodes.forEach(DD),this.nodes.forEach(AD),this.nodes.forEach(MD)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=C,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new dD)}addEventListener(C,f){return this.eventHandlers.has(C)||this.eventHandlers.set(C,new Uf),this.eventHandlers.get(C).add(f)}notifyListeners(C,...f){const s=this.eventHandlers.get(C);s&&s.notify(...f)}hasListeners(C){return this.eventHandlers.has(C)}mount(C){if(this.instance)return;this.isSVG=N1(C)&&!xN(C),this.instance=C;const{layoutId:f,layout:s,visualElement:h}=this.options;if(h&&!h.current&&h.mount(C),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||f)&&(this.isLayoutDirty=!0),t){let d,a=0;const l=()=>this.root.updateBlockedByResize=!1;dt.read(()=>{a=window.innerWidth}),t(C,()=>{const c=window.innerWidth;c!==a&&(a=c,this.root.updateBlockedByResize=!0,d&&d(),d=fD(l,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(tv)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&h&&(f||s)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:a,hasRelativeLayoutChanged:l,layout:c})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||h.getDefaultTransition()||zD,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=h.getProps(),w=!this.targetLayout||!fw(this.targetLayout,c),S=!a&&l;if(this.options.layoutRoot||this.resumeFrom||S||a&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...tm(m,"layout"),onPlay:y,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(d,S)}else a||tv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=c})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const C=this.getStack();C&&C.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RD),this.animationId++)}getTransformTemplate(){const{visualElement:C}=this.options;return C&&C.getProps().transformTemplate}willUpdate(C=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const a=this.path[d];a.shouldResetTransform=!0,a.updateScroll("snapshot"),a.options.layoutRoot&&a.willUpdate(!1)}const{layoutId:f,layout:s}=this.options;if(f===void 0&&!s)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),C&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ev);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OD),this.nodes.forEach(jD),this.nodes.forEach(_D)):this.nodes.forEach(ev),this.clearAllSnapshots();const f=hn.now();Ht.delta=Ei(0,1e3/60,f-Ht.timestamp),Ht.timestamp=f,Ht.isProcessing=!0,fd.update.process(Ht),fd.preRender.process(Ht),fd.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,im.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ND),this.sharedNodes.forEach(PD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!en(this.snapshot.measuredBox.x)&&!en(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++)this.path[s].updateScroll();const C=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,C?C.layoutBox:void 0)}updateScroll(C="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===C&&(f=!1),f&&this.instance){const s=o(this.instance);this.scroll={animationId:this.root.animationId,phase:C,isRoot:s,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:s}}}resetTransform(){if(!x)return;const C=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!dw(this.projectionDelta),s=this.getTransformTemplate(),h=s?s(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;C&&this.instance&&(f||Er(this.latestValues)||d)&&(x(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(C=!0){const f=this.measurePageBox();let s=this.removeElementScroll(f);return C&&(s=this.removeTransform(s)),BD(s),{animationId:this.root.animationId,measuredBox:f,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:C}=this.options;if(!C)return wt();const f=C.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(ID))){const{scroll:d}=this.root;d&&(Ds(f.x,d.offset.x),Ds(f.y,d.offset.y))}return f}removeElementScroll(C){var s;const f=wt();if(Nn(f,C),(s=this.scroll)!=null&&s.wasRoot)return f;for(let h=0;h<this.path.length;h++){const d=this.path[h],{scroll:a,options:l}=d;d!==this.root&&a&&l.layoutScroll&&(a.wasRoot&&Nn(f,C),Ds(f.x,a.offset.x),Ds(f.y,a.offset.y))}return f}applyTransform(C,f=!1){const s=wt();Nn(s,C);for(let h=0;h<this.path.length;h++){const d=this.path[h];!f&&d.options.layoutScroll&&d.scroll&&d!==d.root&&As(s,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Er(d.latestValues)&&As(s,d.latestValues)}return Er(this.latestValues)&&As(s,this.latestValues),s}removeTransform(C){const f=wt();Nn(f,C);for(let s=0;s<this.path.length;s++){const h=this.path[s];if(!h.instance||!Er(h.latestValues))continue;af(h.latestValues)&&h.updateSnapshot();const d=wt(),a=h.measurePageBox();Nn(d,a),Gy(f,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return Er(this.latestValues)&&Gy(f,this.latestValues),f}setTargetDelta(C){this.targetDelta=C,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(C){this.options={...this.options,...C,crossfade:C.crossfade!==void 0?C.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(C=!1){var l;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const s=!!this.resumingFrom||this!==f;if(!(C||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(l=this.parent)!=null&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:a}=this.options;if(!(!this.layout||!(d||a))){if(this.resolvedRelativeTargetAt=Ht.timestamp,!this.targetDelta&&!this.relativeTarget){const c=this.getClosestProjectingParent();c&&c.layout&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),oo(this.relativeTargetOrigin,this.layout.layoutBox,c.layout.layoutBox),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nn(this.target,this.layout.layoutBox),G1(this.target,this.targetDelta)):Nn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const c=this.getClosestProjectingParent();c&&!!c.resumingFrom==!!this.resumingFrom&&!c.options.layoutScroll&&c.target&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),oo(this.relativeTargetOrigin,this.target,c.target),Nn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||af(this.parent.latestValues)||Y1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const C=this.getLead(),f=!!this.resumingFrom||this!==C;let s=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(s=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(s=!1),s)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Nn(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,l=this.treeScale.y;rO(this.layoutCorrected,this.treeScale,this.path,f),C.layout&&!C.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(C.target=C.layout.layoutBox,C.targetWithTransforms=wt());const{target:c}=C;if(!c){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($y(this.prevProjectionDelta.x,this.projectionDelta.x),$y(this.prevProjectionDelta.y,this.projectionDelta.y)),ao(this.projectionDelta,this.layoutCorrected,c,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==l||!Qy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Qy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(C=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),C){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rs(),this.projectionDelta=Rs(),this.projectionDeltaWithTransform=Rs()}setAnimationOrigin(C,f=!1){const s=this.snapshot,h=s?s.latestValues:{},d={...this.latestValues},a=Rs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const l=wt(),c=s?s.source:void 0,m=this.layout?this.layout.source:void 0,y=c!==m,g=this.getStack(),w=!g||g.members.length<=1,S=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(FD));this.animationProgress=0;let k;this.mixTargetDelta=j=>{const M=j/1e3;nv(a.x,C.x,M),nv(a.y,C.y,M),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oo(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LD(this.relativeTarget,this.relativeTargetOrigin,l,M),k&&wD(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=wt()),Nn(k,this.relativeTarget)),y&&(this.animationValues=d,gD(d,h,this.latestValues,M,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(C){var f,s,h;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(h=(s=this.resumingFrom)==null?void 0:s.currentAnimation)==null||h.stop(),this.pendingAnimation&&(rr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=dt.update(()=>{hc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Br(0)),this.currentAnimation=uD(this.motionValue,[0,1e3],{...C,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),C.onUpdate&&C.onUpdate(d)},onStop:()=>{},onComplete:()=>{C.onComplete&&C.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const C=this.getStack();C&&C.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const C=this.getLead();let{targetWithTransforms:f,target:s,layout:h,latestValues:d}=C;if(!(!f||!s||!h)){if(this!==C&&this.layout&&h&&pw(this.options.animationType,this.layout.layoutBox,h.layoutBox)){s=this.target||wt();const a=en(this.layout.layoutBox.x);s.x.min=C.target.x.min,s.x.max=s.x.min+a;const l=en(this.layout.layoutBox.y);s.y.min=C.target.y.min,s.y.max=s.y.min+l}Nn(f,s),As(f,d),ao(this.projectionDeltaWithTransform,this.layoutCorrected,f,d)}}registerSharedNode(C,f){this.sharedNodes.has(C)||this.sharedNodes.set(C,new SD),this.sharedNodes.get(C).add(f);const h=f.options.initialPromotionConfig;f.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(f):void 0})}isLead(){const C=this.getStack();return C?C.lead===this:!0}getLead(){var f;const{layoutId:C}=this.options;return C?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:C}=this.options;return C?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:C}=this.options;if(C)return this.root.sharedNodes.get(C)}promote({needsReset:C,transition:f,preserveFollowOpacity:s}={}){const h=this.getStack();h&&h.promote(this,s),C&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const C=this.getStack();return C?C.relegate(this):!1}resetSkewAndRotation(){const{visualElement:C}=this.options;if(!C)return;let f=!1;const{latestValues:s}=C;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(f=!0),!f)return;const h={};s.z&&Td("z",C,h,this.animationValues);for(let d=0;d<Cd.length;d++)Td(`rotate${Cd[d]}`,C,h,this.animationValues),Td(`skew${Cd[d]}`,C,h,this.animationValues);C.render();for(const d in h)C.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);C.scheduleRender()}applyProjectionStyles(C,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){C.visibility="hidden";return}const s=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,C.visibility="",C.opacity="",C.pointerEvents=uc(f==null?void 0:f.pointerEvents)||"",C.transform=s?s(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=uc(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Er(this.latestValues)&&(C.transform=s?s({},""):"none",this.hasProjected=!1);return}C.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let a=CD(this.projectionDeltaWithTransform,this.treeScale,d);s&&(a=s(d,a)),C.transform=a;const{x:l,y:c}=this.projectionDelta;C.transformOrigin=`${l.origin*100}% ${c.origin*100}% 0`,h.animationValues?C.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:C.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in wo){if(d[m]===void 0)continue;const{correct:y,applyTo:g,isCSSVariable:w}=wo[m],S=a==="none"?d[m]:y(d[m],h);if(g){const k=g.length;for(let j=0;j<k;j++)C[g[j]]=S}else w?this.options.visualElement.renderState.vars[m]=S:C[m]=S}this.options.layoutId&&(C.pointerEvents=h===this?uc(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(C=>{var f;return(f=C.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(Jy),this.root.sharedNodes.clear()}}}function jD(t){t.updateLayout()}function _D(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:x}=t.layout,{animationType:b}=t.options,C=e.source!==t.layout.source;b==="size"?On(a=>{const l=C?e.measuredBox[a]:e.layoutBox[a],c=en(l);l.min=o[a].min,l.max=l.min+c}):pw(b,e.layoutBox,o)&&On(a=>{const l=C?e.measuredBox[a]:e.layoutBox[a],c=en(o[a]);l.max=l.min+c,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[a].max=t.relativeTarget[a].min+c)});const f=Rs();ao(f,o,e.layoutBox);const s=Rs();C?ao(s,t.applyTransform(x,!0),e.measuredBox):ao(s,o,e.layoutBox);const h=!dw(f);let d=!1;if(!t.resumeFrom){const a=t.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:l,layout:c}=a;if(l&&c){const m=wt();oo(m,e.layoutBox,l.layoutBox);const y=wt();oo(y,o,c.layoutBox),fw(m,y)||(d=!0),a.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=a)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:e,delta:s,layoutDelta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function ED(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MD(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ND(t){t.clearSnapshot()}function Jy(t){t.clearMeasurements()}function ev(t){t.isLayoutDirty=!1}function OD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DD(t){t.resolveTargetDelta()}function AD(t){t.calcProjection()}function RD(t){t.resetSkewAndRotation()}function PD(t){t.removeLeadSnapshot()}function nv(t,e,r){t.translate=mt(e.translate,0,r),t.scale=mt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function iv(t,e,r,o){t.min=mt(e.min,r.min,o),t.max=mt(e.max,r.max,o)}function LD(t,e,r,o){iv(t.x,e.x,r.x,o),iv(t.y,e.y,r.y,o)}function FD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zD={duration:.45,ease:[.4,0,.1,1]},rv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sv=rv("applewebkit/")&&!rv("chrome/")?Math.round:An;function av(t){t.min=sv(t.min),t.max=sv(t.max)}function BD(t){av(t.x),av(t.y)}function pw(t,e,r){return t==="position"||t==="preserve-aspect"&&!XO(Zy(e),Zy(r),.2)}function ID(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VD=gw({attachResizeListener:(t,e)=>So(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kd={current:void 0},xw=gw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kd.current){const t=new VD({});t.mount(window),t.setOptions({layoutScroll:!0}),kd.current=t}return kd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UD={pan:{Feature:aD},drag:{Feature:sD,ProjectionNode:xw,MeasureLayout:cw}};function ov(t,e,r){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",r==="Start");const x="onHover"+r,b=o[x];b&&dt.postRender(()=>b(e,Lo(e)))}class HD extends or{mount(){const{current:e}=this.node;e&&(this.unmount=dN(e,(r,o)=>(ov(this.node,o,"Start"),x=>ov(this.node,x,"End"))))}unmount(){}}class $D extends or{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ao(So(this.node.current,"focus",()=>this.onFocus()),So(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lv(t,e,r){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",r==="Start");const x="onTap"+(r==="End"?"":r),b=o[x];b&&dt.postRender(()=>b(e,Lo(e)))}class XD extends or{mount(){const{current:e}=this.node;e&&(this.unmount=pN(e,(r,o)=>(lv(this.node,o,"Start"),(x,{success:b})=>lv(this.node,x,b?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ff=new WeakMap,jd=new WeakMap,YD=t=>{const e=ff.get(t.target);e&&e(t)},GD=t=>{t.forEach(YD)};function qD({root:t,...e}){const r=t||document;jd.has(r)||jd.set(r,{});const o=jd.get(r),x=JSON.stringify(e);return o[x]||(o[x]=new IntersectionObserver(GD,{root:t,...e})),o[x]}function WD(t,e,r){const o=qD(e);return ff.set(t,r),o.observe(t),()=>{ff.delete(t),o.unobserve(t)}}const KD={some:0,all:1};class ZD extends or{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:o,amount:x="some",once:b}=e,C={root:r?r.current:void 0,rootMargin:o,threshold:typeof x=="number"?x:KD[x]},f=s=>{const{isIntersecting:h}=s;if(this.isInView===h||(this.isInView=h,b&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:a}=this.node.getProps(),l=h?d:a;l&&l(s)};return WD(this.node.current,C,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(QD(e,r))&&this.startObserver()}unmount(){}}function QD({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const JD={inView:{Feature:ZD},tap:{Feature:XD},focus:{Feature:$D},hover:{Feature:HD}},eA={layout:{ProjectionNode:xw,MeasureLayout:cw}},tA={...BO,...JD,...UD,...eA},De=tO(tA,mO);function cv(t){const e=Pc(()=>Br(t)),{isStatic:r}=E.useContext(Fc);if(r){const[,o]=E.useState(t);E.useEffect(()=>e.on("change",o),[])}return e}function Vc(){return(Vc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function yw(t,e){if(t==null)return{};var r,o,x={},b=Object.keys(t);for(o=0;o<b.length;o++)e.indexOf(r=b[o])>=0||(x[r]=t[r]);return x}function mf(t){var e=E.useRef(t),r=E.useRef(function(o){e.current&&e.current(o)});return e.current=t,r.current}var Co=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t<e?e:t},lo=function(t){return"touches"in t},gf=function(t){return t&&t.ownerDocument.defaultView||self},uv=function(t,e,r){var o=t.getBoundingClientRect(),x=lo(e)?function(b,C){for(var f=0;f<b.length;f++)if(b[f].identifier===C)return b[f];return b[0]}(e.touches,r):e;return{left:Co((x.pageX-(o.left+gf(t).pageXOffset))/o.width),top:Co((x.pageY-(o.top+gf(t).pageYOffset))/o.height)}},hv=function(t){!lo(t)&&t.preventDefault()},vw=Ae.memo(function(t){var e=t.onMove,r=t.onKey,o=yw(t,["onMove","onKey"]),x=E.useRef(null),b=mf(e),C=mf(r),f=E.useRef(null),s=E.useRef(!1),h=E.useMemo(function(){var c=function(g){hv(g),(lo(g)?g.touches.length>0:g.buttons>0)&&x.current?b(uv(x.current,g,f.current)):y(!1)},m=function(){return y(!1)};function y(g){var w=s.current,S=gf(x.current),k=g?S.addEventListener:S.removeEventListener;k(w?"touchmove":"mousemove",c),k(w?"touchend":"mouseup",m)}return[function(g){var w=g.nativeEvent,S=x.current;if(S&&(hv(w),!function(j,M){return M&&!lo(j)}(w,s.current)&&S)){if(lo(w)){s.current=!0;var k=w.changedTouches||[];k.length&&(f.current=k[0].identifier)}S.focus(),b(uv(S,w,f.current)),y(!0)}},function(g){var w=g.which||g.keyCode;w<37||w>40||(g.preventDefault(),C({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},y]},[C,b]),d=h[0],a=h[1],l=h[2];return E.useEffect(function(){return l},[l]),Ae.createElement("div",Vc({},o,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:x,onKeyDown:a,tabIndex:0,role:"slider"}))}),mm=function(t){return t.filter(Boolean).join(" ")},bw=function(t){var e=t.color,r=t.left,o=t.top,x=o===void 0?.5:o,b=mm(["react-colorful__pointer",t.className]);return Ae.createElement("div",{className:b,style:{top:100*x+"%",left:100*r+"%"}},Ae.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},$t=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r},nA=function(t){return oA(pf(t))},pf=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?$t(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?$t(parseInt(t.substring(6,8),16)/255,2):1}},iA=function(t){return aA(sA(t))},rA=function(t){var e=t.s,r=t.v,o=t.a,x=(200-e)*r/100;return{h:$t(t.h),s:$t(x>0&&x<200?e*r/100/(x<=100?x:200-x)*100:0),l:$t(x/2),a:$t(o,2)}},xf=function(t){var e=rA(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},sA=function(t){var e=t.h,r=t.s,o=t.v,x=t.a;e=e/360*6,r/=100,o/=100;var b=Math.floor(e),C=o*(1-r),f=o*(1-(e-b)*r),s=o*(1-(1-e+b)*r),h=b%6;return{r:$t(255*[o,f,C,C,s,o][h]),g:$t(255*[s,o,o,f,C,C][h]),b:$t(255*[C,C,s,o,o,f][h]),a:$t(x,2)}},nc=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},aA=function(t){var e=t.r,r=t.g,o=t.b,x=t.a,b=x<1?nc($t(255*x)):"";return"#"+nc(e)+nc(r)+nc(o)+b},oA=function(t){var e=t.r,r=t.g,o=t.b,x=t.a,b=Math.max(e,r,o),C=b-Math.min(e,r,o),f=C?b===e?(r-o)/C:b===r?2+(o-e)/C:4+(e-r)/C:0;return{h:$t(60*(f<0?f+6:f)),s:$t(b?C/b*100:0),v:$t(b/255*100),a:x}},lA=Ae.memo(function(t){var e=t.hue,r=t.onChange,o=mm(["react-colorful__hue",t.className]);return Ae.createElement("div",{className:o},Ae.createElement(vw,{onMove:function(x){r({h:360*x.left})},onKey:function(x){r({h:Co(e+360*x.left,0,360)})},"aria-label":"Hue","aria-valuenow":$t(e),"aria-valuemax":"360","aria-valuemin":"0"},Ae.createElement(bw,{className:"react-colorful__hue-pointer",left:e/360,color:xf({h:e,s:100,v:100,a:1})})))}),cA=Ae.memo(function(t){var e=t.hsva,r=t.onChange,o={backgroundColor:xf({h:e.h,s:100,v:100,a:1})};return Ae.createElement("div",{className:"react-colorful__saturation",style:o},Ae.createElement(vw,{onMove:function(x){r({s:100*x.left,v:100-100*x.top})},onKey:function(x){r({s:Co(e.s+100*x.left,0,100),v:Co(e.v-100*x.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+$t(e.s)+"%, Brightness "+$t(e.v)+"%"},Ae.createElement(bw,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:xf(e)})))}),ww=function(t,e){if(t===e)return!0;for(var r in t)if(t[r]!==e[r])return!1;return!0},uA=function(t,e){return t.toLowerCase()===e.toLowerCase()||ww(pf(t),pf(e))};function hA(t,e,r){var o=mf(r),x=E.useState(function(){return t.toHsva(e)}),b=x[0],C=x[1],f=E.useRef({color:e,hsva:b});E.useEffect(function(){if(!t.equal(e,f.current.color)){var h=t.toHsva(e);f.current={hsva:h,color:e},C(h)}},[e,t]),E.useEffect(function(){var h;ww(b,f.current.hsva)||t.equal(h=t.fromHsva(b),f.current.color)||(f.current={hsva:b,color:h},o(h))},[b,t,o]);var s=E.useCallback(function(h){C(function(d){return Object.assign({},d,h)})},[]);return[b,s]}var dA=typeof window<"u"?E.useLayoutEffect:E.useEffect,fA=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},dv=new Map,mA=function(t){dA(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!dv.has(e)){var r=e.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,dv.set(e,r);var o=fA();o&&r.setAttribute("nonce",o),e.head.appendChild(r)}},[])},gA=function(t){var e=t.className,r=t.colorModel,o=t.color,x=o===void 0?r.defaultColor:o,b=t.onChange,C=yw(t,["className","colorModel","color","onChange"]),f=E.useRef(null);mA(f);var s=hA(r,x,b),h=s[0],d=s[1],a=mm(["react-colorful",e]);return Ae.createElement("div",Vc({},C,{ref:f,className:a}),Ae.createElement(cA,{hsva:h,onChange:d}),Ae.createElement(lA,{hue:h.h,onChange:d,className:"react-colorful__last-control"}))},pA={defaultColor:"000",toHsva:nA,fromHsva:function(t){return iA({h:t.h,s:t.s,v:t.v,a:1})},equal:uA},xA=function(t){return Ae.createElement(gA,Vc({},t,{colorModel:pA}))};const Sw=["shift","alt","meta","mod","ctrl","control"],yA={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function ir(t){return(yA[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function Cw(t){return Sw.includes(t)}function _d(t,e=","){return t.toLowerCase().split(e)}function Ed(t,e="+",r=">",o=!1,x){let b=[],C=!1;t.includes(r)?(C=!0,b=t.toLocaleLowerCase().split(r).map(h=>ir(h))):b=t.toLocaleLowerCase().split(e).map(h=>ir(h));const f={alt:b.includes("alt"),ctrl:b.includes("ctrl")||b.includes("control"),shift:b.includes("shift"),meta:b.includes("meta"),mod:b.includes("mod"),useKey:o},s=b.filter(h=>!Sw.includes(h));return{...f,keys:s,description:x,isSequence:C}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&Tw([ir(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&kw([ir(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{Ti.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{Ti.clear()},0)}));const Ti=new Set;function gm(t){return Array.isArray(t)}function vA(t,e=","){return(gm(t)?t:t.split(e)).every(r=>Ti.has(r.trim().toLowerCase()))}function Tw(t){const e=Array.isArray(t)?t:[t];Ti.has("meta")&&Ti.forEach(r=>!Cw(r)&&Ti.delete(r.toLowerCase())),e.forEach(r=>Ti.add(r.toLowerCase()))}function kw(t){const e=Array.isArray(t)?t:[t];t==="meta"?Ti.clear():e.forEach(r=>Ti.delete(r.toLowerCase()))}function bA(t,e,r){(typeof r=="function"&&r(t,e)||r===!0)&&t.preventDefault()}function wA(t,e,r){return typeof r=="function"?r(t,e):r===!0||r===void 0}function SA(t){return jw(t,["input","textarea","select"])}function jw(t,e=!1){const{target:r,composed:o}=t;let x;return CA(r)&&o?x=t.composedPath()[0]&&t.composedPath()[0].tagName:x=r&&r.tagName,gm(e)?!!(x&&e&&e.some(b=>b.toLowerCase()===x.toLowerCase())):!!(x&&e&&e)}function CA(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function TA(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(r=>e.includes(r))||t.includes("*"):!0}const kA=(t,e,r=!1)=>{const{alt:o,meta:x,mod:b,shift:C,ctrl:f,keys:s,useKey:h}=e,{code:d,key:a,ctrlKey:l,metaKey:c,shiftKey:m,altKey:y}=t,g=ir(d);if(h&&(s==null?void 0:s.length)===1&&s.includes(a))return!0;if(!(s!=null&&s.includes(g))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!r){if(o!==y&&g!=="alt"||C!==m&&g!=="shift")return!1;if(b){if(!c&&!l)return!1}else if(x!==c&&g!=="meta"&&g!=="os"||f!==l&&g!=="ctrl"&&g!=="control")return!1}return s&&s.length===1&&s.includes(g)?!0:s?vA(s):!s},jA=E.createContext(void 0),_A=()=>E.useContext(jA);function _w(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce((r,o)=>r&&_w(t[o],e[o]),!0):t===e}const EA=E.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),MA=()=>E.useContext(EA);function NA(t){const e=E.useRef(void 0);return _w(e.current,t)||(e.current=t),e.current}const fv=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},OA=typeof window<"u"?E.useLayoutEffect:E.useEffect;function Ut(t,e,r,o){const x=E.useRef(null),b=E.useRef(!1),C=r instanceof Array?o instanceof Array?void 0:o:r,f=gm(t)?t.join(C==null?void 0:C.delimiter):t,s=r instanceof Array?r:o instanceof Array?o:void 0,h=E.useCallback(e,s??[]),d=E.useRef(h);s?d.current=h:d.current=e;const a=NA(C),{activeScopes:l}=MA(),c=_A();return OA(()=>{if((a==null?void 0:a.enabled)===!1||!TA(l,a==null?void 0:a.scopes))return;let m=[],y;const g=(j,M=!1)=>{var N;if(!(SA(j)&&!jw(j,a==null?void 0:a.enableOnFormTags))){if(x.current!==null){const D=x.current.getRootNode();if((D instanceof Document||D instanceof ShadowRoot)&&D.activeElement!==x.current&&!x.current.contains(D.activeElement)){fv(j);return}}(N=j.target)!=null&&N.isContentEditable&&!(a!=null&&a.enableOnContentEditable)||_d(f,a==null?void 0:a.delimiter).forEach(D=>{var A,B,Y,oe;if(D.includes((a==null?void 0:a.splitKey)??"+")&&D.includes((a==null?void 0:a.sequenceSplitKey)??">")){console.warn(`Hotkey ${D} contains both ${(a==null?void 0:a.splitKey)??"+"} and ${(a==null?void 0:a.sequenceSplitKey)??">"} which is not supported.`);return}const Z=Ed(D,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description);if(Z.isSequence){y=setTimeout(()=>{m=[]},(a==null?void 0:a.sequenceTimeoutMs)??1e3);const ae=Z.useKey?j.key:ir(j.code);if(Cw(ae.toLowerCase()))return;m.push(ae);const te=(A=Z.keys)==null?void 0:A[m.length-1];if(ae!==te){m=[],y&&clearTimeout(y);return}m.length===((B=Z.keys)==null?void 0:B.length)&&(d.current(j,Z),y&&clearTimeout(y),m=[])}else if(kA(j,Z,a==null?void 0:a.ignoreModifiers)||(Y=Z.keys)!=null&&Y.includes("*")){if((oe=a==null?void 0:a.ignoreEventWhen)!=null&&oe.call(a,j)||M&&b.current)return;if(bA(j,Z,a==null?void 0:a.preventDefault),!wA(j,Z,a==null?void 0:a.enabled)){fv(j);return}d.current(j,Z),M||(b.current=!0)}})}},w=j=>{j.code!==void 0&&(Tw(ir(j.code)),((a==null?void 0:a.keydown)===void 0&&(a==null?void 0:a.keyup)!==!0||a!=null&&a.keydown)&&g(j))},S=j=>{j.code!==void 0&&(kw(ir(j.code)),b.current=!1,a!=null&&a.keyup&&g(j,!0))},k=x.current||(C==null?void 0:C.document)||document;return k.addEventListener("keyup",S,C==null?void 0:C.eventListenerOptions),k.addEventListener("keydown",w,C==null?void 0:C.eventListenerOptions),c&&_d(f,a==null?void 0:a.delimiter).forEach(j=>c.addHotkey(Ed(j,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),()=>{k.removeEventListener("keyup",S,C==null?void 0:C.eventListenerOptions),k.removeEventListener("keydown",w,C==null?void 0:C.eventListenerOptions),c&&_d(f,a==null?void 0:a.delimiter).forEach(j=>c.removeHotkey(Ed(j,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),m=[],y&&clearTimeout(y)}},[f,a,l]),x}var Fo=t=>t.type==="checkbox",Or=t=>t instanceof Date,Jt=t=>t==null;const Ew=t=>typeof t=="object";var Tt=t=>!Jt(t)&&!Array.isArray(t)&&Ew(t)&&!Or(t),Mw=t=>Tt(t)&&t.target?Fo(t.target)?t.target.checked:t.target.value:t,DA=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Nw=(t,e)=>t.has(DA(e)),AA=t=>{const e=t.constructor&&t.constructor.prototype;return Tt(e)&&e.hasOwnProperty("isPrototypeOf")},pm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dt(t){let e;const r=Array.isArray(t),o=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(pm&&(t instanceof Blob||o))&&(r||Tt(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!AA(t))e=t;else for(const x in t)t.hasOwnProperty(x)&&(e[x]=Dt(t[x]));else return t;return e}var Uc=t=>/^\w*$/.test(t),Ct=t=>t===void 0,xm=t=>Array.isArray(t)?t.filter(Boolean):[],ym=t=>xm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Oe=(t,e,r)=>{if(!e||!Tt(t))return r;const o=(Uc(e)?[e]:ym(e)).reduce((x,b)=>Jt(x)?x:x[b],t);return Ct(o)||o===t?Ct(t[e])?r:t[e]:o},vn=t=>typeof t=="boolean",ut=(t,e,r)=>{let o=-1;const x=Uc(e)?[e]:ym(e),b=x.length,C=b-1;for(;++o<b;){const f=x[o];let s=r;if(o!==C){const h=t[f];s=Tt(h)||Array.isArray(h)?h:isNaN(+x[o+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;t[f]=s,t=t[f]}};const Sc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},In={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Si={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ow=Ae.createContext(null);Ow.displayName="HookFormContext";const vm=()=>Ae.useContext(Ow);var Dw=(t,e,r,o=!0)=>{const x={defaultValues:e._defaultValues};for(const b in t)Object.defineProperty(x,b,{get:()=>{const C=b;return e._proxyFormState[C]!==In.all&&(e._proxyFormState[C]=!o||In.all),r&&(r[C]=!0),t[C]}});return x};const bm=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function RA(t){const e=vm(),{control:r=e.control,disabled:o,name:x,exact:b}=t||{},[C,f]=Ae.useState(r._formState),s=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return bm(()=>r._subscribe({name:x,formState:s.current,exact:b,callback:h=>{!o&&f({...r._formState,...h})}}),[x,o,b]),Ae.useEffect(()=>{s.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>Dw(C,r,s.current,!1),[C,r])}var Zn=t=>typeof t=="string",Aw=(t,e,r,o,x)=>Zn(t)?(o&&e.watch.add(t),Oe(r,t,x)):Array.isArray(t)?t.map(b=>(o&&e.watch.add(b),Oe(r,b))):(o&&(e.watchAll=!0),r),yf=t=>Jt(t)||!Ew(t);function Ci(t,e,r=new WeakSet){if(yf(t)||yf(e))return t===e;if(Or(t)&&Or(e))return t.getTime()===e.getTime();const o=Object.keys(t),x=Object.keys(e);if(o.length!==x.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const b of o){const C=t[b];if(!x.includes(b))return!1;if(b!=="ref"){const f=e[b];if(Or(C)&&Or(f)||Tt(C)&&Tt(f)||Array.isArray(C)&&Array.isArray(f)?!Ci(C,f,r):C!==f)return!1}}return!0}function PA(t){const e=vm(),{control:r=e.control,name:o,defaultValue:x,disabled:b,exact:C,compute:f}=t||{},s=Ae.useRef(x),h=Ae.useRef(f),d=Ae.useRef(void 0);h.current=f;const a=Ae.useMemo(()=>r._getWatch(o,s.current),[r,o]),[l,c]=Ae.useState(h.current?h.current(a):a);return bm(()=>r._subscribe({name:o,formState:{values:!0},exact:C,callback:m=>{if(!b){const y=Aw(o,r._names,m.values||r._formValues,!1,s.current);if(h.current){const g=h.current(y);Ci(g,d.current)||(c(g),d.current=g)}else c(y)}}}),[r,b,o,C]),Ae.useEffect(()=>r._removeUnmounted()),l}function LA(t){const e=vm(),{name:r,disabled:o,control:x=e.control,shouldUnregister:b,defaultValue:C}=t,f=Nw(x._names.array,r),s=Ae.useMemo(()=>Oe(x._formValues,r,Oe(x._defaultValues,r,C)),[x,r,C]),h=PA({control:x,name:r,defaultValue:s,exact:!0}),d=RA({control:x,name:r,exact:!0}),a=Ae.useRef(t),l=Ae.useRef(x.register(r,{...t.rules,value:h,...vn(t.disabled)?{disabled:t.disabled}:{}}));a.current=t;const c=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Oe(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Oe(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Oe(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Oe(d.validatingFields,r)},error:{enumerable:!0,get:()=>Oe(d.errors,r)}}),[d,r]),m=Ae.useCallback(S=>l.current.onChange({target:{value:Mw(S),name:r},type:Sc.CHANGE}),[r]),y=Ae.useCallback(()=>l.current.onBlur({target:{value:Oe(x._formValues,r),name:r},type:Sc.BLUR}),[r,x._formValues]),g=Ae.useCallback(S=>{const k=Oe(x._fields,r);k&&S&&(k._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:j=>S.setCustomValidity(j),reportValidity:()=>S.reportValidity()})},[x._fields,r]),w=Ae.useMemo(()=>({name:r,value:h,...vn(o)||d.disabled?{disabled:d.disabled||o}:{},onChange:m,onBlur:y,ref:g}),[r,o,d.disabled,m,y,g,h]);return Ae.useEffect(()=>{const S=x._options.shouldUnregister||b;x.register(r,{...a.current.rules,...vn(a.current.disabled)?{disabled:a.current.disabled}:{}});const k=(j,M)=>{const N=Oe(x._fields,j);N&&N._f&&(N._f.mount=M)};if(k(r,!0),S){const j=Dt(Oe(x._options.defaultValues,r));ut(x._defaultValues,r,j),Ct(Oe(x._formValues,r))&&ut(x._formValues,r,j)}return!f&&x.register(r),()=>{(f?S&&!x._state.action:S)?x.unregister(r):k(r,!1)}},[r,x,f,b]),Ae.useEffect(()=>{x._setDisabledField({disabled:o,name:r})},[o,r,x]),Ae.useMemo(()=>({field:w,formState:d,fieldState:c}),[w,d,c])}const Md=t=>t.render(LA(t));var FA=(t,e,r,o,x)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[o]:x||!0}}:{},co=t=>Array.isArray(t)?t:[t],mv=()=>{let t=[];return{get observers(){return t},next:x=>{for(const b of t)b.next&&b.next(x)},subscribe:x=>(t.push(x),{unsubscribe:()=>{t=t.filter(b=>b!==x)}}),unsubscribe:()=>{t=[]}}},un=t=>Tt(t)&&!Object.keys(t).length,wm=t=>t.type==="file",Vn=t=>typeof t=="function",Cc=t=>{if(!pm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Rw=t=>t.type==="select-multiple",Sm=t=>t.type==="radio",zA=t=>Sm(t)||Fo(t),Nd=t=>Cc(t)&&t.isConnected;function BA(t,e){const r=e.slice(0,-1).length;let o=0;for(;o<r;)t=Ct(t)?o++:t[e[o++]];return t}function IA(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ct(t[e]))return!1;return!0}function _t(t,e){const r=Array.isArray(e)?e:Uc(e)?[e]:ym(e),o=r.length===1?t:BA(t,r),x=r.length-1,b=r[x];return o&&delete o[b],x!==0&&(Tt(o)&&un(o)||Array.isArray(o)&&IA(o))&&_t(t,r.slice(0,-1)),t}var Pw=t=>{for(const e in t)if(Vn(t[e]))return!0;return!1};function Tc(t,e={}){const r=Array.isArray(t);if(Tt(t)||r)for(const o in t)Array.isArray(t[o])||Tt(t[o])&&!Pw(t[o])?(e[o]=Array.isArray(t[o])?[]:{},Tc(t[o],e[o])):Jt(t[o])||(e[o]=!0);return e}function Lw(t,e,r){const o=Array.isArray(t);if(Tt(t)||o)for(const x in t)Array.isArray(t[x])||Tt(t[x])&&!Pw(t[x])?Ct(e)||yf(r[x])?r[x]=Array.isArray(t[x])?Tc(t[x],[]):{...Tc(t[x])}:Lw(t[x],Jt(e)?{}:e[x],r[x]):r[x]=!Ci(t[x],e[x]);return r}var qa=(t,e)=>Lw(t,e,Tc(e));const gv={value:!1,isValid:!1},pv={value:!0,isValid:!0};var Fw=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ct(t[0].attributes.value)?Ct(t[0].value)||t[0].value===""?pv:{value:t[0].value,isValid:!0}:pv:gv}return gv},zw=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:o})=>Ct(t)?t:e?t===""?NaN:t&&+t:r&&Zn(t)?new Date(t):o?o(t):t;const xv={isValid:!1,value:null};var Bw=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,xv):xv;function yv(t){const e=t.ref;return wm(e)?e.files:Sm(e)?Bw(t.refs).value:Rw(e)?[...e.selectedOptions].map(({value:r})=>r):Fo(e)?Fw(t.refs).value:zw(Ct(e.value)?t.ref.value:e.value,t)}var VA=(t,e,r,o)=>{const x={};for(const b of t){const C=Oe(e,b);C&&ut(x,b,C._f)}return{criteriaMode:r,names:[...t],fields:x,shouldUseNativeValidation:o}},kc=t=>t instanceof RegExp,Wa=t=>Ct(t)?t:kc(t)?t.source:Tt(t)?kc(t.value)?t.value.source:t.value:t,vv=t=>({isOnSubmit:!t||t===In.onSubmit,isOnBlur:t===In.onBlur,isOnChange:t===In.onChange,isOnAll:t===In.all,isOnTouch:t===In.onTouched});const bv="AsyncFunction";var UA=t=>!!t&&!!t.validate&&!!(Vn(t.validate)&&t.validate.constructor.name===bv||Tt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===bv)),HA=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),wv=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(o=>t.startsWith(o)&&/^\.\w+/.test(t.slice(o.length))));const uo=(t,e,r,o)=>{for(const x of r||Object.keys(t)){const b=Oe(t,x);if(b){const{_f:C,...f}=b;if(C){if(C.refs&&C.refs[0]&&e(C.refs[0],x)&&!o)return!0;if(C.ref&&e(C.ref,C.name)&&!o)return!0;if(uo(f,e))break}else if(Tt(f)&&uo(f,e))break}}};function Sv(t,e,r){const o=Oe(t,r);if(o||Uc(r))return{error:o,name:r};const x=r.split(".");for(;x.length;){const b=x.join("."),C=Oe(e,b),f=Oe(t,b);if(C&&!Array.isArray(C)&&r!==b)return{name:r};if(f&&f.type)return{name:b,error:f};if(f&&f.root&&f.root.type)return{name:`${b}.root`,error:f.root};x.pop()}return{name:r}}var $A=(t,e,r,o)=>{r(t);const{name:x,...b}=t;return un(b)||Object.keys(b).length>=Object.keys(e).length||Object.keys(b).find(C=>e[C]===(!o||In.all))},XA=(t,e,r)=>!t||!e||t===e||co(t).some(o=>o&&(r?o===e:o.startsWith(e)||e.startsWith(o))),YA=(t,e,r,o,x)=>x.isOnAll?!1:!r&&x.isOnTouch?!(e||t):(r?o.isOnBlur:x.isOnBlur)?!t:(r?o.isOnChange:x.isOnChange)?t:!0,GA=(t,e)=>!xm(Oe(t,e)).length&&_t(t,e),qA=(t,e,r)=>{const o=co(Oe(t,r));return ut(o,"root",e[r]),ut(t,r,o),t},dc=t=>Zn(t);function Cv(t,e,r="validate"){if(dc(t)||Array.isArray(t)&&t.every(dc)||vn(t)&&!t)return{type:r,message:dc(t)?t:"",ref:e}}var js=t=>Tt(t)&&!kc(t)?t:{value:t,message:""},Tv=async(t,e,r,o,x,b)=>{const{ref:C,refs:f,required:s,maxLength:h,minLength:d,min:a,max:l,pattern:c,validate:m,name:y,valueAsNumber:g,mount:w}=t._f,S=Oe(r,y);if(!w||e.has(y))return{};const k=f?f[0]:C,j=Z=>{x&&k.reportValidity&&(k.setCustomValidity(vn(Z)?"":Z||""),k.reportValidity())},M={},N=Sm(C),D=Fo(C),A=N||D,B=(g||wm(C))&&Ct(C.value)&&Ct(S)||Cc(C)&&C.value===""||S===""||Array.isArray(S)&&!S.length,Y=FA.bind(null,y,o,M),oe=(Z,ae,te,G=Si.maxLength,z=Si.minLength)=>{const q=Z?ae:te;M[y]={type:Z?G:z,message:q,ref:C,...Y(Z?G:z,q)}};if(b?!Array.isArray(S)||!S.length:s&&(!A&&(B||Jt(S))||vn(S)&&!S||D&&!Fw(f).isValid||N&&!Bw(f).isValid)){const{value:Z,message:ae}=dc(s)?{value:!!s,message:s}:js(s);if(Z&&(M[y]={type:Si.required,message:ae,ref:k,...Y(Si.required,ae)},!o))return j(ae),M}if(!B&&(!Jt(a)||!Jt(l))){let Z,ae;const te=js(l),G=js(a);if(!Jt(S)&&!isNaN(S)){const z=C.valueAsNumber||S&&+S;Jt(te.value)||(Z=z>te.value),Jt(G.value)||(ae=z<G.value)}else{const z=C.valueAsDate||new Date(S),q=O=>new Date(new Date().toDateString()+" "+O),X=C.type=="time",R=C.type=="week";Zn(te.value)&&S&&(Z=X?q(S)>q(te.value):R?S>te.value:z>new Date(te.value)),Zn(G.value)&&S&&(ae=X?q(S)<q(G.value):R?S<G.value:z<new Date(G.value))}if((Z||ae)&&(oe(!!Z,te.message,G.message,Si.max,Si.min),!o))return j(M[y].message),M}if((h||d)&&!B&&(Zn(S)||b&&Array.isArray(S))){const Z=js(h),ae=js(d),te=!Jt(Z.value)&&S.length>+Z.value,G=!Jt(ae.value)&&S.length<+ae.value;if((te||G)&&(oe(te,Z.message,ae.message),!o))return j(M[y].message),M}if(c&&!B&&Zn(S)){const{value:Z,message:ae}=js(c);if(kc(Z)&&!S.match(Z)&&(M[y]={type:Si.pattern,message:ae,ref:C,...Y(Si.pattern,ae)},!o))return j(ae),M}if(m){if(Vn(m)){const Z=await m(S,r),ae=Cv(Z,k);if(ae&&(M[y]={...ae,...Y(Si.validate,ae.message)},!o))return j(ae.message),M}else if(Tt(m)){let Z={};for(const ae in m){if(!un(Z)&&!o)break;const te=Cv(await m[ae](S,r),k,ae);te&&(Z={...te,...Y(ae,te.message)},j(te.message),o&&(M[y]=Z))}if(!un(Z)&&(M[y]={ref:k,...Z},!o))return M}}return j(!0),M};const WA={mode:In.onSubmit,reValidateMode:In.onChange,shouldFocusError:!0};function KA(t={}){let e={...WA,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},o={},x=Tt(e.defaultValues)||Tt(e.values)?Dt(e.defaultValues||e.values)||{}:{},b=e.shouldUnregister?{}:Dt(x),C={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},s,h=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let a={...d};const l={array:mv(),state:mv()},c=e.criteriaMode===In.all,m=$=>ne=>{clearTimeout(h),h=setTimeout($,ne)},y=async $=>{if(!e.disabled&&(d.isValid||a.isValid||$)){const ne=e.resolver?un((await D()).errors):await B(o,!0);ne!==r.isValid&&l.state.next({isValid:ne})}},g=($,ne)=>{!e.disabled&&(d.isValidating||d.validatingFields||a.isValidating||a.validatingFields)&&(($||Array.from(f.mount)).forEach(ee=>{ee&&(ne?ut(r.validatingFields,ee,ne):_t(r.validatingFields,ee))}),l.state.next({validatingFields:r.validatingFields,isValidating:!un(r.validatingFields)}))},w=($,ne=[],ee,we,Ce=!0,Te=!0)=>{if(we&&ee&&!e.disabled){if(C.action=!0,Te&&Array.isArray(Oe(o,$))){const Ee=ee(Oe(o,$),we.argA,we.argB);Ce&&ut(o,$,Ee)}if(Te&&Array.isArray(Oe(r.errors,$))){const Ee=ee(Oe(r.errors,$),we.argA,we.argB);Ce&&ut(r.errors,$,Ee),GA(r.errors,$)}if((d.touchedFields||a.touchedFields)&&Te&&Array.isArray(Oe(r.touchedFields,$))){const Ee=ee(Oe(r.touchedFields,$),we.argA,we.argB);Ce&&ut(r.touchedFields,$,Ee)}(d.dirtyFields||a.dirtyFields)&&(r.dirtyFields=qa(x,b)),l.state.next({name:$,isDirty:oe($,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ut(b,$,ne)},S=($,ne)=>{ut(r.errors,$,ne),l.state.next({errors:r.errors})},k=$=>{r.errors=$,l.state.next({errors:r.errors,isValid:!1})},j=($,ne,ee,we)=>{const Ce=Oe(o,$);if(Ce){const Te=Oe(b,$,Ct(ee)?Oe(x,$):ee);Ct(Te)||we&&we.defaultChecked||ne?ut(b,$,ne?Te:yv(Ce._f)):te($,Te),C.mount&&y()}},M=($,ne,ee,we,Ce)=>{let Te=!1,Ee=!1;const Ne={name:$};if(!e.disabled){if(!ee||we){(d.isDirty||a.isDirty)&&(Ee=r.isDirty,r.isDirty=Ne.isDirty=oe(),Te=Ee!==Ne.isDirty);const ze=Ci(Oe(x,$),ne);Ee=!!Oe(r.dirtyFields,$),ze?_t(r.dirtyFields,$):ut(r.dirtyFields,$,!0),Ne.dirtyFields=r.dirtyFields,Te=Te||(d.dirtyFields||a.dirtyFields)&&Ee!==!ze}if(ee){const ze=Oe(r.touchedFields,$);ze||(ut(r.touchedFields,$,ee),Ne.touchedFields=r.touchedFields,Te=Te||(d.touchedFields||a.touchedFields)&&ze!==ee)}Te&&Ce&&l.state.next(Ne)}return Te?Ne:{}},N=($,ne,ee,we)=>{const Ce=Oe(r.errors,$),Te=(d.isValid||a.isValid)&&vn(ne)&&r.isValid!==ne;if(e.delayError&&ee?(s=m(()=>S($,ee)),s(e.delayError)):(clearTimeout(h),s=null,ee?ut(r.errors,$,ee):_t(r.errors,$)),(ee?!Ci(Ce,ee):Ce)||!un(we)||Te){const Ee={...we,...Te&&vn(ne)?{isValid:ne}:{},errors:r.errors,name:$};r={...r,...Ee},l.state.next(Ee)}},D=async $=>{g($,!0);const ne=await e.resolver(b,e.context,VA($||f.mount,o,e.criteriaMode,e.shouldUseNativeValidation));return g($),ne},A=async $=>{const{errors:ne}=await D($);if($)for(const ee of $){const we=Oe(ne,ee);we?ut(r.errors,ee,we):_t(r.errors,ee)}else r.errors=ne;return ne},B=async($,ne,ee={valid:!0})=>{for(const we in $){const Ce=$[we];if(Ce){const{_f:Te,...Ee}=Ce;if(Te){const Ne=f.array.has(Te.name),ze=Ce._f&&UA(Ce._f);ze&&d.validatingFields&&g([we],!0);const Ue=await Tv(Ce,f.disabled,b,c,e.shouldUseNativeValidation&&!ne,Ne);if(ze&&d.validatingFields&&g([we]),Ue[Te.name]&&(ee.valid=!1,ne))break;!ne&&(Oe(Ue,Te.name)?Ne?qA(r.errors,Ue,Te.name):ut(r.errors,Te.name,Ue[Te.name]):_t(r.errors,Te.name))}!un(Ee)&&await B(Ee,ne,ee)}}return ee.valid},Y=()=>{for(const $ of f.unMount){const ne=Oe(o,$);ne&&(ne._f.refs?ne._f.refs.every(ee=>!Nd(ee)):!Nd(ne._f.ref))&&W($)}f.unMount=new Set},oe=($,ne)=>!e.disabled&&($&&ne&&ut(b,$,ne),!Ci(O(),x)),Z=($,ne,ee)=>Aw($,f,{...C.mount?b:Ct(ne)?x:Zn($)?{[$]:ne}:ne},ee,ne),ae=$=>xm(Oe(C.mount?b:x,$,e.shouldUnregister?Oe(x,$,[]):[])),te=($,ne,ee={})=>{const we=Oe(o,$);let Ce=ne;if(we){const Te=we._f;Te&&(!Te.disabled&&ut(b,$,zw(ne,Te)),Ce=Cc(Te.ref)&&Jt(ne)?"":ne,Rw(Te.ref)?[...Te.ref.options].forEach(Ee=>Ee.selected=Ce.includes(Ee.value)):Te.refs?Fo(Te.ref)?Te.refs.forEach(Ee=>{(!Ee.defaultChecked||!Ee.disabled)&&(Array.isArray(Ce)?Ee.checked=!!Ce.find(Ne=>Ne===Ee.value):Ee.checked=Ce===Ee.value||!!Ce)}):Te.refs.forEach(Ee=>Ee.checked=Ee.value===Ce):wm(Te.ref)?Te.ref.value="":(Te.ref.value=Ce,Te.ref.type||l.state.next({name:$,values:Dt(b)})))}(ee.shouldDirty||ee.shouldTouch)&&M($,Ce,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&R($)},G=($,ne,ee)=>{for(const we in ne){if(!ne.hasOwnProperty(we))return;const Ce=ne[we],Te=$+"."+we,Ee=Oe(o,Te);(f.array.has($)||Tt(Ce)||Ee&&!Ee._f)&&!Or(Ce)?G(Te,Ce,ee):te(Te,Ce,ee)}},z=($,ne,ee={})=>{const we=Oe(o,$),Ce=f.array.has($),Te=Dt(ne);ut(b,$,Te),Ce?(l.array.next({name:$,values:Dt(b)}),(d.isDirty||d.dirtyFields||a.isDirty||a.dirtyFields)&&ee.shouldDirty&&l.state.next({name:$,dirtyFields:qa(x,b),isDirty:oe($,Te)})):we&&!we._f&&!Jt(Te)?G($,Te,ee):te($,Te,ee),wv($,f)&&l.state.next({...r,name:$}),l.state.next({name:C.mount?$:void 0,values:Dt(b)})},q=async $=>{C.mount=!0;const ne=$.target;let ee=ne.name,we=!0;const Ce=Oe(o,ee),Te=ze=>{we=Number.isNaN(ze)||Or(ze)&&isNaN(ze.getTime())||Ci(ze,Oe(b,ee,ze))},Ee=vv(e.mode),Ne=vv(e.reValidateMode);if(Ce){let ze,Ue;const nn=ne.type?yv(Ce._f):Mw($),Xt=$.type===Sc.BLUR||$.type===Sc.FOCUS_OUT,rn=!HA(Ce._f)&&!e.resolver&&!Oe(r.errors,ee)&&!Ce._f.deps||YA(Xt,Oe(r.touchedFields,ee),r.isSubmitted,Ne,Ee),$n=wv(ee,f,Xt);ut(b,ee,nn),Xt?(!ne||!ne.readOnly)&&(Ce._f.onBlur&&Ce._f.onBlur($),s&&s(0)):Ce._f.onChange&&Ce._f.onChange($);const Rn=M(ee,nn,Xt),Pn=!un(Rn)||$n;if(!Xt&&l.state.next({name:ee,type:$.type,values:Dt(b)}),rn)return(d.isValid||a.isValid)&&(e.mode==="onBlur"?Xt&&y():Xt||y()),Pn&&l.state.next({name:ee,...$n?{}:Rn});if(!Xt&&$n&&l.state.next({...r}),e.resolver){const{errors:si}=await D([ee]);if(Te(nn),we){const lr=Sv(r.errors,o,ee),zo=Sv(si,o,lr.name||ee);ze=zo.error,ee=zo.name,Ue=un(si)}}else g([ee],!0),ze=(await Tv(Ce,f.disabled,b,c,e.shouldUseNativeValidation))[ee],g([ee]),Te(nn),we&&(ze?Ue=!1:(d.isValid||a.isValid)&&(Ue=await B(o,!0)));we&&(Ce._f.deps&&R(Ce._f.deps),N(ee,Ue,ze,Rn))}},X=($,ne)=>{if(Oe(r.errors,ne)&&$.focus)return $.focus(),1},R=async($,ne={})=>{let ee,we;const Ce=co($);if(e.resolver){const Te=await A(Ct($)?$:Ce);ee=un(Te),we=$?!Ce.some(Ee=>Oe(Te,Ee)):ee}else $?(we=(await Promise.all(Ce.map(async Te=>{const Ee=Oe(o,Te);return await B(Ee&&Ee._f?{[Te]:Ee}:Ee)}))).every(Boolean),!(!we&&!r.isValid)&&y()):we=ee=await B(o);return l.state.next({...!Zn($)||(d.isValid||a.isValid)&&ee!==r.isValid?{}:{name:$},...e.resolver||!$?{isValid:ee}:{},errors:r.errors}),ne.shouldFocus&&!we&&uo(o,X,$?Ce:f.mount),we},O=$=>{const ne={...C.mount?b:x};return Ct($)?ne:Zn($)?Oe(ne,$):$.map(ee=>Oe(ne,ee))},L=($,ne)=>({invalid:!!Oe((ne||r).errors,$),isDirty:!!Oe((ne||r).dirtyFields,$),error:Oe((ne||r).errors,$),isValidating:!!Oe(r.validatingFields,$),isTouched:!!Oe((ne||r).touchedFields,$)}),I=$=>{$&&co($).forEach(ne=>_t(r.errors,ne)),l.state.next({errors:$?r.errors:{}})},K=($,ne,ee)=>{const we=(Oe(o,$,{_f:{}})._f||{}).ref,Ce=Oe(r.errors,$)||{},{ref:Te,message:Ee,type:Ne,...ze}=Ce;ut(r.errors,$,{...ze,...ne,ref:we}),l.state.next({name:$,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&we&&we.focus&&we.focus()},V=($,ne)=>Vn($)?l.state.subscribe({next:ee=>"values"in ee&&$(Z(void 0,ne),ee)}):Z($,ne,!0),F=$=>l.state.subscribe({next:ne=>{XA($.name,ne.name,$.exact)&&$A(ne,$.formState||d,he,$.reRenderRoot)&&$.callback({values:{...b},...r,...ne,defaultValues:x})}}).unsubscribe,J=$=>(C.mount=!0,a={...a,...$.formState},F({...$,formState:a})),W=($,ne={})=>{for(const ee of $?co($):f.mount)f.mount.delete(ee),f.array.delete(ee),ne.keepValue||(_t(o,ee),_t(b,ee)),!ne.keepError&&_t(r.errors,ee),!ne.keepDirty&&_t(r.dirtyFields,ee),!ne.keepTouched&&_t(r.touchedFields,ee),!ne.keepIsValidating&&_t(r.validatingFields,ee),!e.shouldUnregister&&!ne.keepDefaultValue&&_t(x,ee);l.state.next({values:Dt(b)}),l.state.next({...r,...ne.keepDirty?{isDirty:oe()}:{}}),!ne.keepIsValid&&y()},ue=({disabled:$,name:ne})=>{(vn($)&&C.mount||$||f.disabled.has(ne))&&($?f.disabled.add(ne):f.disabled.delete(ne))},ce=($,ne={})=>{let ee=Oe(o,$);const we=vn(ne.disabled)||vn(e.disabled);return ut(o,$,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:$}},name:$,mount:!0,...ne}}),f.mount.add($),ee?ue({disabled:vn(ne.disabled)?ne.disabled:e.disabled,name:$}):j($,!0,ne.value),{...we?{disabled:ne.disabled||e.disabled}:{},...e.progressive?{required:!!ne.required,min:Wa(ne.min),max:Wa(ne.max),minLength:Wa(ne.minLength),maxLength:Wa(ne.maxLength),pattern:Wa(ne.pattern)}:{},name:$,onChange:q,onBlur:q,ref:Ce=>{if(Ce){ce($,ne),ee=Oe(o,$);const Te=Ct(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,Ee=zA(Te),Ne=ee._f.refs||[];if(Ee?Ne.find(ze=>ze===Te):Te===ee._f.ref)return;ut(o,$,{_f:{...ee._f,...Ee?{refs:[...Ne.filter(Nd),Te,...Array.isArray(Oe(x,$))?[{}]:[]],ref:{type:Te.type,name:$}}:{ref:Te}}}),j($,!1,void 0,Te)}else ee=Oe(o,$,{}),ee._f&&(ee._f.mount=!1),(e.shouldUnregister||ne.shouldUnregister)&&!(Nw(f.array,$)&&C.action)&&f.unMount.add($)}}},ie=()=>e.shouldFocusError&&uo(o,X,f.mount),Q=$=>{vn($)&&(l.state.next({disabled:$}),uo(o,(ne,ee)=>{const we=Oe(o,ee);we&&(ne.disabled=we._f.disabled||$,Array.isArray(we._f.refs)&&we._f.refs.forEach(Ce=>{Ce.disabled=we._f.disabled||$}))},0,!1))},me=($,ne)=>async ee=>{let we;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let Ce=Dt(b);if(l.state.next({isSubmitting:!0}),e.resolver){const{errors:Te,values:Ee}=await D();r.errors=Te,Ce=Dt(Ee)}else await B(o);if(f.disabled.size)for(const Te of f.disabled)_t(Ce,Te);if(_t(r.errors,"root"),un(r.errors)){l.state.next({errors:{}});try{await $(Ce,ee)}catch(Te){we=Te}}else ne&&await ne({...r.errors},ee),ie(),setTimeout(ie);if(l.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:un(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},le=($,ne={})=>{Oe(o,$)&&(Ct(ne.defaultValue)?z($,Dt(Oe(x,$))):(z($,ne.defaultValue),ut(x,$,Dt(ne.defaultValue))),ne.keepTouched||_t(r.touchedFields,$),ne.keepDirty||(_t(r.dirtyFields,$),r.isDirty=ne.defaultValue?oe($,Dt(Oe(x,$))):oe()),ne.keepError||(_t(r.errors,$),d.isValid&&y()),l.state.next({...r}))},H=($,ne={})=>{const ee=$?Dt($):x,we=Dt(ee),Ce=un($),Te=Ce?x:we;if(ne.keepDefaultValues||(x=ee),!ne.keepValues){if(ne.keepDirtyValues){const Ee=new Set([...f.mount,...Object.keys(qa(x,b))]);for(const Ne of Array.from(Ee))Oe(r.dirtyFields,Ne)?ut(Te,Ne,Oe(b,Ne)):z(Ne,Oe(Te,Ne))}else{if(pm&&Ct($))for(const Ee of f.mount){const Ne=Oe(o,Ee);if(Ne&&Ne._f){const ze=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(Cc(ze)){const Ue=ze.closest("form");if(Ue){Ue.reset();break}}}}if(ne.keepFieldsRef)for(const Ee of f.mount)z(Ee,Oe(Te,Ee));else o={}}b=e.shouldUnregister?ne.keepDefaultValues?Dt(x):{}:Dt(Te),l.array.next({values:{...Te}}),l.state.next({values:{...Te}})}f={mount:ne.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},C.mount=!d.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,C.watch=!!e.shouldUnregister,l.state.next({submitCount:ne.keepSubmitCount?r.submitCount:0,isDirty:Ce?!1:ne.keepDirty?r.isDirty:!!(ne.keepDefaultValues&&!Ci($,x)),isSubmitted:ne.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ce?{}:ne.keepDirtyValues?ne.keepDefaultValues&&b?qa(x,b):r.dirtyFields:ne.keepDefaultValues&&$?qa(x,$):ne.keepDirty?r.dirtyFields:{},touchedFields:ne.keepTouched?r.touchedFields:{},errors:ne.keepErrors?r.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:x})},re=($,ne)=>H(Vn($)?$(b):$,ne),ge=($,ne={})=>{const ee=Oe(o,$),we=ee&&ee._f;if(we){const Ce=we.refs?we.refs[0]:we.ref;Ce.focus&&(Ce.focus(),ne.shouldSelect&&Vn(Ce.select)&&Ce.select())}},he=$=>{r={...r,...$}},Se={control:{register:ce,unregister:W,getFieldState:L,handleSubmit:me,setError:K,_subscribe:F,_runSchema:D,_focusError:ie,_getWatch:Z,_getDirty:oe,_setValid:y,_setFieldArray:w,_setDisabledField:ue,_setErrors:k,_getFieldArray:ae,_reset:H,_resetDefaultValues:()=>Vn(e.defaultValues)&&e.defaultValues().then($=>{re($,e.resetOptions),l.state.next({isLoading:!1})}),_removeUnmounted:Y,_disableForm:Q,_subjects:l,_proxyFormState:d,get _fields(){return o},get _formValues(){return b},get _state(){return C},set _state($){C=$},get _defaultValues(){return x},get _names(){return f},set _names($){f=$},get _formState(){return r},get _options(){return e},set _options($){e={...e,...$}}},subscribe:J,trigger:R,register:ce,handleSubmit:me,watch:V,setValue:z,getValues:O,reset:re,resetField:le,clearErrors:I,unregister:W,setError:K,setFocus:ge,getFieldState:L};return{...Se,formControl:Se}}function ZA(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[o,x]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Vn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Vn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:o},t.defaultValues&&!Vn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:C,...f}=KA(t);e.current={...f,formState:o}}const b=e.current.control;return b._options=t,bm(()=>{const C=b._subscribe({formState:b._proxyFormState,callback:()=>x({...b._formState}),reRenderRoot:!0});return x(f=>({...f,isReady:!0})),b._formState.isReady=!0,C},[b]),Ae.useEffect(()=>b._disableForm(t.disabled),[b,t.disabled]),Ae.useEffect(()=>{t.mode&&(b._options.mode=t.mode),t.reValidateMode&&(b._options.reValidateMode=t.reValidateMode)},[b,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(b._setErrors(t.errors),b._focusError())},[b,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&b._subjects.state.next({values:b._getWatch()})},[b,t.shouldUnregister]),Ae.useEffect(()=>{if(b._proxyFormState.isDirty){const C=b._getDirty();C!==o.isDirty&&b._subjects.state.next({isDirty:C})}},[b,o.isDirty]),Ae.useEffect(()=>{t.values&&!Ci(t.values,r.current)?(b._reset(t.values,{keepFieldsRef:!0,...b._options.resetOptions}),r.current=t.values,x(C=>({...C}))):b._resetDefaultValues()},[b,t.values]),Ae.useEffect(()=>{b._state.mount||(b._setValid(),b._state.mount=!0),b._state.watch&&(b._state.watch=!1,b._subjects.state.next({...b._formState})),b._removeUnmounted()}),e.current.formState=Dw(o,b),e.current}var Od={exports:{}},Dd,kv;function QA(){if(kv)return Dd;kv=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dd=t,Dd}var Ad,jv;function JA(){if(jv)return Ad;jv=1;var t=QA();function e(){}function r(){}return r.resetWarningCache=e,Ad=function(){function o(C,f,s,h,d,a){if(a!==t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}o.isRequired=o;function x(){return o}var b={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:x,element:o,elementType:o,instanceOf:x,node:o,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:r,resetWarningCache:e};return b.PropTypes=b,b},Ad}var _v;function eR(){return _v||(_v=1,Od.exports=JA()()),Od.exports}var tR=eR();const Qt=wf(tR);Qt.elementType.isRequired,Qt.string,Qt.func,Qt.string,Qt.oneOf(["sm","md","lg"]),Qt.oneOf(["default","primary","highlight"]),Qt.string,Qt.bool,Qt.string;var Rd={};const nR={},iR=Object.freeze(Object.defineProperty({__proto__:null,default:nR},Symbol.toStringTag,{value:"Module"})),Pd=h2(iR);var Ev;function rR(){return Ev||(Ev=1,function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var r=Pd,o=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=o.document,e.jsdomImplForWrapper=Pd.implForWrapper,e.nodeCanvas=Pd.Canvas,e.window=o,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function f(c,m){if(this.__eventListeners[c]){var y=this.__eventListeners[c];m?y[y.indexOf(m)]=!1:e.util.array.fill(y,!1)}}function s(c,m){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var y in c)this.on(y,c[y]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(m);return this}function h(c,m){var y=(function(){m.apply(this,arguments),this.off(c,y)}).bind(this);this.on(c,y)}function d(c,m){if(arguments.length===1)for(var y in c)h.call(this,y,c[y]);else h.call(this,c,m);return this}function a(c,m){if(!this.__eventListeners)return this;if(arguments.length===0)for(c in this.__eventListeners)f.call(this,c);else if(arguments.length===1&&typeof arguments[0]=="object")for(var y in c)f.call(this,y,c[y]);else f.call(this,c,m);return this}function l(c,m){if(!this.__eventListeners)return this;var y=this.__eventListeners[c];if(!y)return this;for(var g=0,w=y.length;g<w;g++)y[g]&&y[g].call(this,m||{});return this.__eventListeners[c]=y.filter(function(S){return S!==!1}),this}e.Observable={fire:l,on:s,once:d,off:a}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,s=arguments.length;f<s;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,s,h){var d=this._objects;return h?d[s]=f:d.splice(s,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,s,h=!1,d=0,a=arguments.length;d<a;d++)s=f.indexOf(arguments[d]),s!==-1&&(h=!0,f.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(f,s){for(var h=this.getObjects(),d=0,a=h.length;d<a;d++)f.call(s,h[d],d,h);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,s){return this._objects.indexOf(f)>-1?!0:s?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,s){return f+=s.complexity?s.complexity():0,f},0)}},e.CommonMethods={_setOptions:function(f){for(var s in f)this.set(s,f[s])},_initGradient:function(f,s){f&&f.colorStops&&!(f instanceof e.Gradient)&&this.set(s,new e.Gradient(f))},_initPattern:function(f,s,h){f&&f.source&&!(f instanceof e.Pattern)?this.set(s,new e.Pattern(f,h)):h&&h()},_setObject:function(f){for(var s in f)this._set(s,f[s])},set:function(f,s){return typeof f=="object"?this._setObject(f):this._set(f,s),this},_set:function(f,s){this[f]=s},toggle:function(f){var s=this.get(f);return typeof s=="boolean"&&this.set(f,!s),this},get:function(f){return this[f]}},function(f){var s=Math.sqrt,h=Math.atan2,d=Math.pow,a=Math.PI/180,l=Math.PI/2;e.util={cos:function(c){if(c===0)return 1;c<0&&(c=-c);var m=c/l;switch(m){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(c===0)return 0;var m=c/l,y=1;switch(c<0&&(y=-1),m){case 1:return y;case 2:return 0;case 3:return-y}return Math.sin(c)},removeFromArray:function(c,m){var y=c.indexOf(m);return y!==-1&&c.splice(y,1),c},getRandomInt:function(c,m){return Math.floor(Math.random()*(m-c+1))+c},degreesToRadians:function(c){return c*a},radiansToDegrees:function(c){return c/a},rotatePoint:function(c,m,y){var g=new e.Point(c.x-m.x,c.y-m.y),w=e.util.rotateVector(g,y);return new e.Point(w.x,w.y).addEquals(m)},rotateVector:function(c,m){var y=e.util.sin(m),g=e.util.cos(m),w=c.x*g-c.y*y,S=c.x*y+c.y*g;return{x:w,y:S}},createVector:function(c,m){return new e.Point(m.x-c.x,m.y-c.y)},calcAngleBetweenVectors:function(c,m){return Math.acos((c.x*m.x+c.y*m.y)/(Math.hypot(c.x,c.y)*Math.hypot(m.x,m.y)))},getHatVector:function(c){return new e.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,m,y){var g=e.util.createVector(c,m),w=e.util.createVector(c,y),S=e.util.calcAngleBetweenVectors(g,w),k=e.util.calcAngleBetweenVectors(e.util.rotateVector(g,S),w),j=S*(k===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(g,j)),angle:S}},projectStrokeOnPoints:function(c,m,y){var g=[],w=m.strokeWidth/2,S=m.strokeUniform?new e.Point(1/m.scaleX,1/m.scaleY):new e.Point(1,1),k=function(j){var M=w/Math.hypot(j.x,j.y);return new e.Point(j.x*M*S.x,j.y*M*S.y)};return c.length<=1||c.forEach(function(j,M){var N=new e.Point(j.x,j.y),D,A;M===0?(A=c[M+1],D=y?k(e.util.createVector(A,N)).addEquals(N):c[c.length-1]):M===c.length-1?(D=c[M-1],A=y?k(e.util.createVector(D,N)).addEquals(N):c[0]):(D=c[M-1],A=c[M+1]);var B=e.util.getBisector(N,D,A),Y=B.vector,oe=B.angle,Z,ae;if(m.strokeLineJoin==="miter"&&(Z=-w/Math.sin(oe/2),ae=new e.Point(Y.x*Z*S.x,Y.y*Z*S.y),Math.hypot(ae.x,ae.y)/w<=m.strokeMiterLimit)){g.push(N.add(ae)),g.push(N.subtract(ae));return}Z=-w*Math.SQRT2,ae=new e.Point(Y.x*Z*S.x,Y.y*Z*S.y),g.push(N.add(ae)),g.push(N.subtract(ae))}),g},transformPoint:function(c,m,y){return y?new e.Point(m[0]*c.x+m[2]*c.y,m[1]*c.x+m[3]*c.y):new e.Point(m[0]*c.x+m[2]*c.y+m[4],m[1]*c.x+m[3]*c.y+m[5])},makeBoundingBoxFromPoints:function(c,m){if(m)for(var y=0;y<c.length;y++)c[y]=e.util.transformPoint(c[y],m);var g=[c[0].x,c[1].x,c[2].x,c[3].x],w=e.util.array.min(g),S=e.util.array.max(g),k=S-w,j=[c[0].y,c[1].y,c[2].y,c[3].y],M=e.util.array.min(j),N=e.util.array.max(j),D=N-M;return{left:w,top:M,width:k,height:D}},invertTransform:function(c){var m=1/(c[0]*c[3]-c[1]*c[2]),y=[m*c[3],-m*c[1],-m*c[2],m*c[0]],g=e.util.transformPoint({x:c[4],y:c[5]},y,!0);return y[4]=-g.x,y[5]=-g.y,y},toFixed:function(c,m){return parseFloat(Number(c).toFixed(m))},parseUnit:function(c,m){var y=/\D{0,2}$/.exec(c),g=parseFloat(c);switch(m||(m=e.Text.DEFAULT_SVG_FONT_SIZE),y[0]){case"mm":return g*e.DPI/25.4;case"cm":return g*e.DPI/2.54;case"in":return g*e.DPI;case"pt":return g*e.DPI/72;case"pc":return g*e.DPI/72*12;case"em":return g*m;default:return g}},falseFunction:function(){return!1},getKlass:function(c,m){return c=e.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),e.util.resolveNamespace(m)[c]},getSvgAttributes:function(c){var m=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":m=m.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":m=m.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":m=m.concat(["offset","stop-color","stop-opacity"]);break}return m},resolveNamespace:function(c){if(!c)return e;var m=c.split("."),y=m.length,g,w=f||e.window;for(g=0;g<y;++g)w=w[m[g]];return w},loadImage:function(c,m,y,g){if(!c){m&&m.call(y,c);return}var w=e.util.createImage(),S=function(){m&&m.call(y,w,!1),w=w.onload=w.onerror=null};w.onload=S,w.onerror=function(){e.log("Error loading "+w.src),m&&m.call(y,null,!0),w=w.onload=w.onerror=null},c.indexOf("data")!==0&&g!==void 0&&g!==null&&(w.crossOrigin=g),c.substring(0,14)==="data:image/svg"&&(w.onload=null,e.util.loadImageInDom(w,S)),w.src=c},loadImageInDom:function(c,m){var y=e.document.createElement("div");y.style.width=y.style.height="1px",y.style.left=y.style.top="-100%",y.style.position="absolute",y.appendChild(c),e.document.querySelector("body").appendChild(y),c.onload=function(){m(),y.parentNode.removeChild(y),y=null}},enlivenObjects:function(c,m,y,g){c=c||[];var w=[],S=0,k=c.length;function j(){++S===k&&m&&m(w.filter(function(M){return M}))}if(!k){m&&m(w);return}c.forEach(function(M,N){if(!M||!M.type){j();return}var D=e.util.getKlass(M.type,y);D.fromObject(M,function(A,B){B||(w[N]=A),g&&g(M,A,B),j()})})},enlivenObjectEnlivables:function(c,m,y){var g=e.Object.ENLIVEN_PROPS.filter(function(w){return!!c[w]});e.util.enlivenObjects(g.map(function(w){return c[w]}),function(w){var S={};g.forEach(function(k,j){S[k]=w[j],m&&(m[k]=w[j])}),y&&y(S)})},enlivenPatterns:function(c,m){c=c||[];function y(){++w===S&&m&&m(g)}var g=[],w=0,S=c.length;if(!S){m&&m(g);return}c.forEach(function(k,j){k&&k.source?new e.Pattern(k,function(M){g[j]=M,y()}):(g[j]=k,y())})},groupSVGElements:function(c,m,y){var g;return c&&c.length===1?(typeof y<"u"&&(c[0].sourcePath=y),c[0]):(m&&(m.width&&m.height?m.centerPoint={x:m.width/2,y:m.height/2}:(delete m.width,delete m.height)),g=new e.Group(c,m),typeof y<"u"&&(g.sourcePath=y),g)},populateWithProperties:function(c,m,y){if(y&&Array.isArray(y))for(var g=0,w=y.length;g<w;g++)y[g]in c&&(m[y[g]]=c[y[g]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(c){var m=e.util.createCanvasElement();return m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0),m},toDataURL:function(c,m,y){return c.toDataURL("image/"+m,y)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(c,m,y){return[c[0]*m[0]+c[2]*m[1],c[1]*m[0]+c[3]*m[1],c[0]*m[2]+c[2]*m[3],c[1]*m[2]+c[3]*m[3],y?0:c[0]*m[4]+c[2]*m[5]+c[4],y?0:c[1]*m[4]+c[3]*m[5]+c[5]]},qrDecompose:function(c){var m=h(c[1],c[0]),y=d(c[0],2)+d(c[1],2),g=s(y),w=(c[0]*c[3]-c[2]*c[1])/g,S=h(c[0]*c[2]+c[1]*c[3],y);return{angle:m/a,scaleX:g,scaleY:w,skewX:S/a,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return e.iMatrix.concat();var m=e.util.degreesToRadians(c.angle),y=e.util.cos(m),g=e.util.sin(m);return[y,g,-g,y,0,0]},calcDimensionsMatrix:function(c){var m=typeof c.scaleX>"u"?1:c.scaleX,y=typeof c.scaleY>"u"?1:c.scaleY,g=[c.flipX?-m:m,0,0,c.flipY?-y:y,0,0],w=e.util.multiplyTransformMatrices,S=e.util.degreesToRadians;return c.skewX&&(g=w(g,[1,0,Math.tan(S(c.skewX)),1],!0)),c.skewY&&(g=w(g,[1,Math.tan(S(c.skewY)),0,1],!0)),g},composeMatrix:function(c){var m=[1,0,0,1,c.translateX||0,c.translateY||0],y=e.util.multiplyTransformMatrices;return c.angle&&(m=y(m,e.util.calcRotateMatrix(c))),(c.scaleX!==1||c.scaleY!==1||c.skewX||c.skewY||c.flipX||c.flipY)&&(m=y(m,e.util.calcDimensionsMatrix(c))),m},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,m,y,g){g>0&&(m>g?m-=g:m=0,y>g?y-=g:y=0);var w=!0,S,k,j=c.getImageData(m,y,g*2||1,g*2||1),M=j.data.length;for(S=3;S<M&&(k=j.data[S],w=k<=0,w!==!1);S+=4);return j=null,w},parsePreserveAspectRatioAttribute:function(c){var m="meet",y="Mid",g="Mid",w=c.split(" "),S;return w&&w.length&&(m=w.pop(),m!=="meet"&&m!=="slice"?(S=m,m="meet"):w.length&&(S=w.pop())),y=S!=="none"?S.slice(1,4):"none",g=S!=="none"?S.slice(5,8):"none",{meetOrSlice:m,alignX:y,alignY:g}},clearFabricFontCache:function(c){c=(c||"").toLowerCase(),c?e.charWidthsCache[c]&&delete e.charWidthsCache[c]:e.charWidthsCache={}},limitDimsByArea:function(c,m){var y=Math.sqrt(m*c),g=Math.floor(m/y);return{x:Math.floor(y),y:g}},capValue:function(c,m,y){return Math.max(c,Math.min(m,y))},findScaleToFit:function(c,m){return Math.min(m.width/c.width,m.height/c.height)},findScaleToCover:function(c,m){return Math.max(m.width/c.width,m.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(m){return e.util.toFixed(m,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,m){var y=e.util.invertTransform(m),g=e.util.multiplyTransformMatrices(y,c.calcOwnMatrix());e.util.applyTransformToObject(c,g)},addTransformToObject:function(c,m){e.util.applyTransformToObject(c,e.util.multiplyTransformMatrices(m,c.calcOwnMatrix()))},applyTransformToObject:function(c,m){var y=e.util.qrDecompose(m),g=new e.Point(y.translateX,y.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",y.scaleX),c.set("scaleY",y.scaleY),c.skewX=y.skewX,c.skewY=y.skewY,c.angle=y.angle,c.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(c,m,y){var g=c/2,w=m/2,S=[{x:-g,y:-w},{x:g,y:-w},{x:-g,y:w},{x:g,y:w}],k=e.util.calcDimensionsMatrix(y),j=e.util.makeBoundingBoxFromPoints(S,k);return{x:j.width,y:j.height}},mergeClipPaths:function(c,m){var y=c,g=m;y.inverted&&!g.inverted&&(y=m,g=c),e.util.applyTransformToObject(g,e.util.multiplyTransformMatrices(e.util.invertTransform(y.calcTransformMatrix()),g.calcTransformMatrix()));var w=y.inverted&&g.inverted;return w&&(y.inverted=g.inverted=!1),new e.Group([y],{clipPath:g,inverted:w})},hasStyleChanged:function(c,m,y){return y=y||!1,c.fill!==m.fill||c.stroke!==m.stroke||c.strokeWidth!==m.strokeWidth||c.fontSize!==m.fontSize||c.fontFamily!==m.fontFamily||c.fontWeight!==m.fontWeight||c.fontStyle!==m.fontStyle||c.textBackgroundColor!==m.textBackgroundColor||c.deltaY!==m.deltaY||y&&(c.overline!==m.overline||c.underline!==m.underline||c.linethrough!==m.linethrough)},stylesToArray:function(y,m){for(var y=e.util.object.clone(y,!0),g=m.split(`
`),w=-1,S={},k=[],j=0;j<g.length;j++){if(!y[j]){w+=g[j].length;continue}for(var M=0;M<g[j].length;M++){w++;var N=y[j][M];if(N&&Object.keys(N).length>0){var D=e.util.hasStyleChanged(S,N,!0);D?k.push({start:w,end:w+1,style:N}):k[k.length-1].end++}S=N||{}}}return k},stylesFromArray:function(c,m){if(!Array.isArray(c))return c;for(var y=m.split(`
`),g=-1,w=0,S={},k=0;k<y.length;k++)for(var j=0;j<y[k].length;j++)g++,c[w]&&c[w].start<=g&&g<c[w].end&&(S[k]=S[k]||{},S[k][j]=Object.assign({},c[w].style),g===c[w].end-1&&w++);return S}}}(t),function(){var f=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function d(R,O,L,I,K,V,F,J,W,ue,ce){var ie=e.util.cos(R),Q=e.util.sin(R),me=e.util.cos(O),le=e.util.sin(O),H=L*K*me-I*V*le+F,re=I*K*me+L*V*le+J,ge=ue+W*(-L*K*Q-I*V*ie),he=ce+W*(-I*K*Q+L*V*ie),fe=H+W*(L*K*le+I*V*me),Se=re+W*(I*K*le-L*V*me);return["C",ge,he,fe,Se,H,re]}function a(R,O,L,I,K,V,F){var J=Math.PI,W=F*J/180,ue=e.util.sin(W),ce=e.util.cos(W),ie=0,Q=0;L=Math.abs(L),I=Math.abs(I);var me=-ce*R*.5-ue*O*.5,le=-ce*O*.5+ue*R*.5,H=L*L,re=I*I,ge=le*le,he=me*me,fe=H*re-H*ge-re*he,Se=0;if(fe<0){var $=Math.sqrt(1-fe/(H*re));L*=$,I*=$}else Se=(K===V?-1:1)*Math.sqrt(fe/(H*ge+re*he));var ne=Se*L*le/I,ee=-Se*I*me/L,we=ce*ne-ue*ee+R*.5,Ce=ue*ne+ce*ee+O*.5,Te=l(1,0,(me-ne)/L,(le-ee)/I),Ee=l((me-ne)/L,(le-ee)/I,(-me-ne)/L,(-le-ee)/I);V===0&&Ee>0?Ee-=2*J:V===1&&Ee<0&&(Ee+=2*J);for(var Ne=Math.ceil(Math.abs(Ee/J*2)),ze=[],Ue=Ee/Ne,nn=8/3*Math.sin(Ue/4)*Math.sin(Ue/4)/Math.sin(Ue/2),Xt=Te+Ue,rn=0;rn<Ne;rn++)ze[rn]=d(Te,Xt,ce,ue,L,I,we,Ce,nn,ie,Q),ie=ze[rn][5],Q=ze[rn][6],Te=Xt,Xt+=Ue;return ze}function l(R,O,L,I){var K=Math.atan2(O,R),V=Math.atan2(I,L);return V>=K?V-K:2*Math.PI-(K-V)}function c(R,O,L,I,K,V,F,J){var W;if(e.cachesBoundsOfCurve&&(W=f.call(arguments),e.boundsOfCurveCache[W]))return e.boundsOfCurveCache[W];var ue=Math.sqrt,ce=Math.min,ie=Math.max,Q=Math.abs,me=[],le=[[],[]],H,re,ge,he,fe,Se,$,ne;re=6*R-12*L+6*K,H=-3*R+9*L-9*K+3*F,ge=3*L-3*R;for(var ee=0;ee<2;++ee){if(ee>0&&(re=6*O-12*I+6*V,H=-3*O+9*I-9*V+3*J,ge=3*I-3*O),Q(H)<1e-12){if(Q(re)<1e-12)continue;he=-ge/re,0<he&&he<1&&me.push(he);continue}$=re*re-4*ge*H,!($<0)&&(ne=ue($),fe=(-re+ne)/(2*H),0<fe&&fe<1&&me.push(fe),Se=(-re-ne)/(2*H),0<Se&&Se<1&&me.push(Se))}for(var we,Ce,Te=me.length,Ee=Te,Ne;Te--;)he=me[Te],Ne=1-he,we=Ne*Ne*Ne*R+3*Ne*Ne*he*L+3*Ne*he*he*K+he*he*he*F,le[0][Te]=we,Ce=Ne*Ne*Ne*O+3*Ne*Ne*he*I+3*Ne*he*he*V+he*he*he*J,le[1][Te]=Ce;le[0][Ee]=R,le[1][Ee]=O,le[0][Ee+1]=F,le[1][Ee+1]=J;var ze=[{x:ce.apply(null,le[0]),y:ce.apply(null,le[1])},{x:ie.apply(null,le[0]),y:ie.apply(null,le[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[W]=ze),ze}function m(R,O,L){for(var I=L[1],K=L[2],V=L[3],F=L[4],J=L[5],W=L[6],ue=L[7],ce=a(W-R,ue-O,I,K,F,J,V),ie=0,Q=ce.length;ie<Q;ie++)ce[ie][1]+=R,ce[ie][2]+=O,ce[ie][3]+=R,ce[ie][4]+=O,ce[ie][5]+=R,ce[ie][6]+=O;return ce}function y(R){var O=0,L=0,I=R.length,K=0,V=0,F,J,W,ue=[],ce,ie,Q;for(J=0;J<I;++J){switch(W=!1,F=R[J].slice(0),F[0]){case"l":F[0]="L",F[1]+=O,F[2]+=L;case"L":O=F[1],L=F[2];break;case"h":F[1]+=O;case"H":F[0]="L",F[2]=L,O=F[1];break;case"v":F[1]+=L;case"V":F[0]="L",L=F[1],F[1]=O,F[2]=L;break;case"m":F[0]="M",F[1]+=O,F[2]+=L;case"M":O=F[1],L=F[2],K=F[1],V=F[2];break;case"c":F[0]="C",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L,F[5]+=O,F[6]+=L;case"C":ie=F[3],Q=F[4],O=F[5],L=F[6];break;case"s":F[0]="S",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L;case"S":ce==="C"?(ie=2*O-ie,Q=2*L-Q):(ie=O,Q=L),O=F[3],L=F[4],F[0]="C",F[5]=F[3],F[6]=F[4],F[3]=F[1],F[4]=F[2],F[1]=ie,F[2]=Q,ie=F[3],Q=F[4];break;case"q":F[0]="Q",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L;case"Q":ie=F[1],Q=F[2],O=F[3],L=F[4];break;case"t":F[0]="T",F[1]+=O,F[2]+=L;case"T":ce==="Q"?(ie=2*O-ie,Q=2*L-Q):(ie=O,Q=L),F[0]="Q",O=F[1],L=F[2],F[1]=ie,F[2]=Q,F[3]=O,F[4]=L;break;case"a":F[0]="A",F[6]+=O,F[7]+=L;case"A":W=!0,ue=ue.concat(m(O,L,F)),O=F[6],L=F[7];break;case"z":case"Z":O=K,L=V;break}W||ue.push(F),ce=F[0]}return ue}function g(R,O,L,I){return Math.sqrt((L-R)*(L-R)+(I-O)*(I-O))}function w(R){return R*R*R}function S(R){return 3*R*R*(1-R)}function k(R){return 3*R*(1-R)*(1-R)}function j(R){return(1-R)*(1-R)*(1-R)}function M(R,O,L,I,K,V,F,J){return function(W){var ue=w(W),ce=S(W),ie=k(W),Q=j(W);return{x:F*ue+K*ce+L*ie+R*Q,y:J*ue+V*ce+I*ie+O*Q}}}function N(R,O,L,I,K,V,F,J){return function(W){var ue=1-W,ce=3*ue*ue*(L-R)+6*ue*W*(K-L)+3*W*W*(F-K),ie=3*ue*ue*(I-O)+6*ue*W*(V-I)+3*W*W*(J-V);return Math.atan2(ie,ce)}}function D(R){return R*R}function A(R){return 2*R*(1-R)}function B(R){return(1-R)*(1-R)}function Y(R,O,L,I,K,V){return function(F){var J=D(F),W=A(F),ue=B(F);return{x:K*J+L*W+R*ue,y:V*J+I*W+O*ue}}}function oe(R,O,L,I,K,V){return function(F){var J=1-F,W=2*J*(L-R)+2*F*(K-L),ue=2*J*(I-O)+2*F*(V-I);return Math.atan2(ue,W)}}function Z(R,O,L){var I={x:O,y:L},K,V=0,F;for(F=1;F<=100;F+=1)K=R(F/100),V+=g(I.x,I.y,K.x,K.y),I=K;return V}function ae(R,O){for(var L=0,I=0,K=R.iterator,V={x:R.x,y:R.y},F,J,W=.01,ue=R.angleFinder,ce;I<O&&W>1e-4;)F=K(L),ce=L,J=g(V.x,V.y,F.x,F.y),J+I>O?(L-=W,W/=2):(V=F,L+=W,I+=J);return F.angle=ue(ce),F}function te(R){for(var O=0,L=R.length,I,K=0,V=0,F=0,J=0,W=[],ue,ce,ie,Q=0;Q<L;Q++){switch(I=R[Q],ce={x:K,y:V,command:I[0]},I[0]){case"M":ce.length=0,F=K=I[1],J=V=I[2];break;case"L":ce.length=g(K,V,I[1],I[2]),K=I[1],V=I[2];break;case"C":ue=M(K,V,I[1],I[2],I[3],I[4],I[5],I[6]),ie=N(K,V,I[1],I[2],I[3],I[4],I[5],I[6]),ce.iterator=ue,ce.angleFinder=ie,ce.length=Z(ue,K,V),K=I[5],V=I[6];break;case"Q":ue=Y(K,V,I[1],I[2],I[3],I[4]),ie=oe(K,V,I[1],I[2],I[3],I[4]),ce.iterator=ue,ce.angleFinder=ie,ce.length=Z(ue,K,V),K=I[3],V=I[4];break;case"Z":case"z":ce.destX=F,ce.destY=J,ce.length=g(K,V,F,J),K=F,V=J;break}O+=ce.length,W.push(ce)}return W.push({length:O,x:K,y:V}),W}function G(R,O,L){L||(L=te(R));for(var I=0;O-L[I].length>0&&I<L.length-2;)O-=L[I].length,I++;var K=L[I],V=O/K.length,F=K.command,J=R[I],W;switch(F){case"M":return{x:K.x,y:K.y,angle:0};case"Z":case"z":return W=new e.Point(K.x,K.y).lerp(new e.Point(K.destX,K.destY),V),W.angle=Math.atan2(K.destY-K.y,K.destX-K.x),W;case"L":return W=new e.Point(K.x,K.y).lerp(new e.Point(J[1],J[2]),V),W.angle=Math.atan2(J[2]-K.y,J[1]-K.x),W;case"C":return ae(K,O);case"Q":return ae(K,O)}}function z(R){var O=[],L=[],I,K,V=e.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",J="("+F+")"+e.commaWsp,W="([01])"+e.commaWsp+"?",ue=J+"?"+J+"?"+J+W+W+J+"?("+F+")",ce=new RegExp(ue,"g"),ie,Q,me;if(!R||!R.match)return O;me=R.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var le=0,H,re=me.length;le<re;le++){I=me[le],Q=I.slice(1).trim(),L.length=0;var ge=I.charAt(0);if(H=[ge],ge.toLowerCase()==="a")for(var he;he=ce.exec(Q);)for(var fe=1;fe<he.length;fe++)L.push(he[fe]);else for(;ie=V.exec(Q);)L.push(ie[0]);for(var fe=0,Se=L.length;fe<Se;fe++)K=parseFloat(L[fe]),isNaN(K)||H.push(K);var $=s[ge.toLowerCase()],ne=h[ge]||ge;if(H.length-1>$)for(var ee=1,we=H.length;ee<we;ee+=$)O.push([ge].concat(H.slice(ee,ee+$))),ge=ne;else O.push(H)}return O}function q(R,O){var L=[],I,K=new e.Point(R[0].x,R[0].y),V=new e.Point(R[1].x,R[1].y),F=R.length,J=1,W=0,ue=F>2;for(O=O||0,ue&&(J=R[2].x<V.x?-1:R[2].x===V.x?0:1,W=R[2].y<V.y?-1:R[2].y===V.y?0:1),L.push(["M",K.x-J*O,K.y-W*O]),I=1;I<F;I++){if(!K.eq(V)){var ce=K.midPointFrom(V);L.push(["Q",K.x,K.y,ce.x,ce.y])}K=R[I],I+1<R.length&&(V=R[I+1])}return ue&&(J=K.x>R[I-2].x?1:K.x===R[I-2].x?0:-1,W=K.y>R[I-2].y?1:K.y===R[I-2].y?0:-1),L.push(["L",K.x+J*O,K.y+W*O]),L}function X(R,O,L){return L&&(O=e.util.multiplyTransformMatrices(O,[1,0,0,1,-L.x,-L.y])),R.map(function(I){for(var K=I.slice(0),V={},F=1;F<I.length-1;F+=2)V.x=I[F],V.y=I[F+1],V=e.util.transformPoint(V,O),K[F]=V.x,K[F+1]=V.y;return K})}e.util.joinPath=function(R){return R.map(function(O){return O.join(" ")}).join(" ")},e.util.parsePath=z,e.util.makePathSimpler=y,e.util.getSmoothPathFromPoints=q,e.util.getPathSegmentsInfo=te,e.util.getBoundsOfCurve=c,e.util.getPointOnPath=G,e.util.transformPath=X}(),function(){var f=Array.prototype.slice;function s(c,m){for(var y=f.call(arguments,2),g=[],w=0,S=c.length;w<S;w++)g[w]=y.length?c[w][m].apply(c[w],y):c[w][m].call(c[w]);return g}function h(c,m){return l(c,m,function(y,g){return y>=g})}function d(c,m){return l(c,m,function(y,g){return y<g})}function a(c,m){for(var y=c.length;y--;)c[y]=m;return c}function l(c,m,y){if(!(!c||c.length===0)){var g=c.length-1,w=m?c[g][m]:c[g];if(m)for(;g--;)y(c[g][m],w)&&(w=c[g][m]);else for(;g--;)y(c[g],w)&&(w=c[g]);return w}}e.util.array={fill:a,invoke:s,min:d,max:h}}(),function(){function f(h,d,a){if(a)if(!e.isLikelyNode&&d instanceof Element)h=d;else if(d instanceof Array){h=[];for(var l=0,c=d.length;l<c;l++)h[l]=f({},d[l],a)}else if(d&&typeof d=="object")for(var m in d)m==="canvas"||m==="group"?h[m]=null:d.hasOwnProperty(m)&&(h[m]=f({},d[m],a));else h=d;else for(var m in d)h[m]=d[m];return h}function s(h,d){return f({},h,d)}e.util.object={extend:f,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function f(l){return l.replace(/-+(.)?/g,function(c,m){return m?m.toUpperCase():""})}function s(l,c){return l.charAt(0).toUpperCase()+(c?l.slice(1):l.slice(1).toLowerCase())}function h(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(l){var c=0,m,y=[];for(c=0,m;c<l.length;c++)(m=a(l,c))!==!1&&y.push(m);return y}function a(l,c){var m=l.charCodeAt(c);if(isNaN(m))return"";if(m<55296||m>57343)return l.charAt(c);if(55296<=m&&m<=56319){if(l.length<=c+1)throw"High surrogate without following low surrogate";var y=l.charCodeAt(c+1);if(56320>y||y>57343)throw"High surrogate without following low surrogate";return l.charAt(c)+l.charAt(c+1)}if(c===0)throw"Low surrogate without preceding high surrogate";var g=l.charCodeAt(c-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:f,capitalize:s,escapeXml:h,graphemeSplit:d}}(),function(){var f=Array.prototype.slice,s=function(){},h=function(){for(var m in{toString:1})if(m==="toString")return!1;return!0}(),d=function(m,y,g){for(var w in y)w in m.prototype&&typeof m.prototype[w]=="function"&&(y[w]+"").indexOf("callSuper")>-1?m.prototype[w]=function(S){return function(){var k=this.constructor.superclass;this.constructor.superclass=g;var j=y[S].apply(this,arguments);if(this.constructor.superclass=k,S!=="initialize")return j}}(w):m.prototype[w]=y[w],h&&(y.toString!==Object.prototype.toString&&(m.prototype.toString=y.toString),y.valueOf!==Object.prototype.valueOf&&(m.prototype.valueOf=y.valueOf))};function a(){}function l(m){for(var y=null,g=this;g.constructor.superclass;){var w=g.constructor.superclass.prototype[m];if(g[m]!==w){y=w;break}g=g.constructor.superclass.prototype}return y?arguments.length>1?y.apply(this,f.call(arguments,1)):y.call(this):console.log("tried to callSuper "+m+", method not found in prototype chain",this)}function c(){var m=null,y=f.call(arguments,0);typeof y[0]=="function"&&(m=y.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=m,g.subclasses=[],m&&(a.prototype=m.prototype,g.prototype=new a,m.subclasses.push(g));for(var w=0,S=y.length;w<S;w++)d(g,y[w],m);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=l,g}e.util.createClass=c}(),function(){var f=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(d,a,l,c){d&&d.addEventListener(a,l,f?!1:c)},e.util.removeListener=function(d,a,l,c){d&&d.removeEventListener(a,l,f?!1:c)};function h(d){var a=d.changedTouches;return a&&a[0]?a[0]:d}e.util.getPointer=function(d){var a=d.target,l=e.util.getScrollLeftTop(a),c=h(d);return{x:c.clientX+l.left,y:c.clientY+l.top}},e.util.isTouchEvent=function(d){return s.indexOf(d.type)>-1||d.pointerType==="touch"}}(),function(){function f(c,m){var y=c.style;if(!y)return c;if(typeof m=="string")return c.style.cssText+=";"+m,m.indexOf("opacity")>-1?l(c,m.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var g in m)if(g==="opacity")l(c,m[g]);else{var w=g==="float"||g==="cssFloat"?typeof y.styleFloat>"u"?"cssFloat":"styleFloat":g;y.setProperty(w,m[g])}return c}var s=e.document.createElement("div"),h=typeof s.style.opacity=="string",d=typeof s.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(c){return c};h?l=function(c,m){return c.style.opacity=m,c}:d&&(l=function(c,m){var y=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(y.zoom=1),a.test(y.filter)?(m=m>=.9999?"":"alpha(opacity="+m*100+")",y.filter=y.filter.replace(a,m)):y.filter+=" alpha(opacity="+m*100+")",c}),e.util.setStyle=f}(),function(){var f=Array.prototype.slice;function s(j){return typeof j=="string"?e.document.getElementById(j):j}var h,d=function(j){return f.call(j,0)};try{h=d(e.document.childNodes)instanceof Array}catch{}h||(d=function(j){for(var M=new Array(j.length),N=j.length;N--;)M[N]=j[N];return M});function a(j,M){var N=e.document.createElement(j);for(var D in M)D==="class"?N.className=M[D]:D==="for"?N.htmlFor=M[D]:N.setAttribute(D,M[D]);return N}function l(j,M){j&&(" "+j.className+" ").indexOf(" "+M+" ")===-1&&(j.className+=(j.className?" ":"")+M)}function c(j,M,N){return typeof M=="string"&&(M=a(M,N)),j.parentNode&&j.parentNode.replaceChild(M,j),M.appendChild(j),M}function m(j){for(var M=0,N=0,D=e.document.documentElement,A=e.document.body||{scrollLeft:0,scrollTop:0};j&&(j.parentNode||j.host)&&(j=j.parentNode||j.host,j===e.document?(M=A.scrollLeft||D.scrollLeft||0,N=A.scrollTop||D.scrollTop||0):(M+=j.scrollLeft||0,N+=j.scrollTop||0),!(j.nodeType===1&&j.style.position==="fixed")););return{left:M,top:N}}function y(j){var M,N=j&&j.ownerDocument,D={left:0,top:0},A={left:0,top:0},B,Y={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!N)return A;for(var oe in Y)A[Y[oe]]+=parseInt(g(j,oe),10)||0;return M=N.documentElement,typeof j.getBoundingClientRect<"u"&&(D=j.getBoundingClientRect()),B=m(j),{left:D.left+B.left-(M.clientLeft||0)+A.left,top:D.top+B.top-(M.clientTop||0)+A.top}}var g;e.document.defaultView&&e.document.defaultView.getComputedStyle?g=function(j,M){var N=e.document.defaultView.getComputedStyle(j,null);return N?N[M]:void 0}:g=function(j,M){var N=j.style[M];return!N&&j.currentStyle&&(N=j.currentStyle[M]),N},function(){var j=e.document.documentElement.style,M="userSelect"in j?"userSelect":"MozUserSelect"in j?"MozUserSelect":"WebkitUserSelect"in j?"WebkitUserSelect":"KhtmlUserSelect"in j?"KhtmlUserSelect":"";function N(A){return typeof A.onselectstart<"u"&&(A.onselectstart=e.util.falseFunction),M?A.style[M]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function D(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),M?A.style[M]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}e.util.makeElementUnselectable=N,e.util.makeElementSelectable=D}();function w(j){var M=e.jsdomImplForWrapper(j);return M._canvas||M._image}function S(j){if(e.isLikelyNode){var M=e.jsdomImplForWrapper(j);M&&(M._image=null,M._canvas=null,M._currentSrc=null,M._attributes=null,M._classList=null)}}function k(j,M){j.imageSmoothingEnabled=j.imageSmoothingEnabled||j.webkitImageSmoothingEnabled||j.mozImageSmoothingEnabled||j.msImageSmoothingEnabled||j.oImageSmoothingEnabled,j.imageSmoothingEnabled=M}e.util.setImageSmoothing=k,e.util.getById=s,e.util.toArray=d,e.util.addClass=l,e.util.makeElement=a,e.util.wrapElement=c,e.util.getScrollLeftTop=m,e.util.getElementOffset=y,e.util.getNodeCanvas=w,e.util.cleanUpJsdomNode=S}(),function(){function f(d,a){return d+(/\?/.test(d)?"&":"?")+a}function s(){}function h(d,a){a||(a={});var l=a.method?a.method.toUpperCase():"GET",c=a.onComplete||function(){},m=new e.window.XMLHttpRequest,y=a.body||a.parameters;return m.onreadystatechange=function(){m.readyState===4&&(c(m),m.onreadystatechange=s)},l==="GET"&&(y=null,typeof a.parameters=="string"&&(d=f(d,a.parameters))),m.open(l,d,!0),(l==="POST"||l==="PUT")&&m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(y),m}e.util.request=h}(),e.log=console.log,e.warn=console.warn,function(){var f=e.util.object.extend,s=e.util.object.clone,h=[];e.util.object.extend(h,{cancelAll:function(){var w=this.splice(0);return w.forEach(function(S){S.cancel()}),w},cancelByCanvas:function(w){if(!w)return[];var S=this.filter(function(k){return typeof k.target=="object"&&k.target.canvas===w});return S.forEach(function(k){k.cancel()}),S},cancelByTarget:function(w){var S=this.findAnimationsByTarget(w);return S.forEach(function(k){k.cancel()}),S},findAnimationIndex:function(w){return this.indexOf(this.findAnimation(w))},findAnimation:function(w){return this.find(function(S){return S.cancel===w})},findAnimationsByTarget:function(w){return w?this.filter(function(S){return S.target===w}):[]}});function d(){return!1}function a(w,S,k,j){return-k*Math.cos(w/j*(Math.PI/2))+k+S}function l(w){w||(w={});var S=!1,k,j=function(){var M=e.runningAnimations.indexOf(k);return M>-1&&e.runningAnimations.splice(M,1)[0]};return k=f(s(w),{cancel:function(){return S=!0,j()},currentValue:"startValue"in w?w.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(k),y(function(M){var N=M||+new Date,D=w.duration||500,A=N+D,B,Y=w.onChange||d,oe=w.abort||d,Z=w.onComplete||d,ae=w.easing||a,te="startValue"in w?w.startValue.length>0:!1,G="startValue"in w?w.startValue:0,z="endValue"in w?w.endValue:100,q=w.byValue||(te?G.map(function(X,R){return z[R]-G[R]}):z-G);w.onStart&&w.onStart(),function X(R){B=R||+new Date;var O=B>A?D:B-N,L=O/D,I=te?G.map(function(V,F){return ae(O,G[F],q[F],D)}):ae(O,G,q,D),K=Math.abs(te?(I[0]-G[0])/q[0]:(I-G)/q);if(k.currentValue=te?I.slice():I,k.completionRate=K,k.durationRate=L,!S){if(oe(I,K,L)){j();return}if(B>A){k.currentValue=te?z.slice():z,k.completionRate=1,k.durationRate=1,Y(te?z.slice():z,1,1),Z(z,1,1),j();return}else Y(I,K,L),y(X)}}(N)}),k.cancel}var c=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(w){return e.window.setTimeout(w,1e3/60)},m=e.window.cancelAnimationFrame||e.window.clearTimeout;function y(){return c.apply(e.window,arguments)}function g(){return m.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=y,e.util.cancelAnimFrame=g,e.runningAnimations=h}(),function(){function f(h,d,a){var l="rgba("+parseInt(h[0]+a*(d[0]-h[0]),10)+","+parseInt(h[1]+a*(d[1]-h[1]),10)+","+parseInt(h[2]+a*(d[2]-h[2]),10);return l+=","+(h&&d?parseFloat(h[3]+a*(d[3]-h[3])):1),l+=")",l}function s(h,d,a,l){var c=new e.Color(h).getSource(),m=new e.Color(d).getSource(),y=l.onComplete,g=l.onChange;return l=l||{},e.util.animate(e.util.object.extend(l,{duration:a||500,startValue:c,endValue:m,byValue:m,easing:function(w,S,k,j){var M=l.colorEasing?l.colorEasing(w,j):1-Math.cos(w/j*(Math.PI/2));return f(S,k,M)},onComplete:function(w,S,k){if(y)return y(f(m,m,0),S,k)},onChange:function(w,S,k){if(g){if(Array.isArray(w))return g(f(w,w,0),S,k);g(w,S,k)}}}))}e.util.animateColor=s}(),function(){function f(R,O,L,I){return R<Math.abs(O)?(R=O,I=L/4):O===0&&R===0?I=L/(2*Math.PI)*Math.asin(1):I=L/(2*Math.PI)*Math.asin(O/R),{a:R,c:O,p:L,s:I}}function s(R,O,L){return R.a*Math.pow(2,10*(O-=1))*Math.sin((O*L-R.s)*(2*Math.PI)/R.p)}function h(R,O,L,I){return L*((R=R/I-1)*R*R+1)+O}function d(R,O,L,I){return R/=I/2,R<1?L/2*R*R*R+O:L/2*((R-=2)*R*R+2)+O}function a(R,O,L,I){return L*(R/=I)*R*R*R+O}function l(R,O,L,I){return-L*((R=R/I-1)*R*R*R-1)+O}function c(R,O,L,I){return R/=I/2,R<1?L/2*R*R*R*R+O:-L/2*((R-=2)*R*R*R-2)+O}function m(R,O,L,I){return L*(R/=I)*R*R*R*R+O}function y(R,O,L,I){return L*((R=R/I-1)*R*R*R*R+1)+O}function g(R,O,L,I){return R/=I/2,R<1?L/2*R*R*R*R*R+O:L/2*((R-=2)*R*R*R*R+2)+O}function w(R,O,L,I){return-L*Math.cos(R/I*(Math.PI/2))+L+O}function S(R,O,L,I){return L*Math.sin(R/I*(Math.PI/2))+O}function k(R,O,L,I){return-L/2*(Math.cos(Math.PI*R/I)-1)+O}function j(R,O,L,I){return R===0?O:L*Math.pow(2,10*(R/I-1))+O}function M(R,O,L,I){return R===I?O+L:L*(-Math.pow(2,-10*R/I)+1)+O}function N(R,O,L,I){return R===0?O:R===I?O+L:(R/=I/2,R<1?L/2*Math.pow(2,10*(R-1))+O:L/2*(-Math.pow(2,-10*--R)+2)+O)}function D(R,O,L,I){return-L*(Math.sqrt(1-(R/=I)*R)-1)+O}function A(R,O,L,I){return L*Math.sqrt(1-(R=R/I-1)*R)+O}function B(R,O,L,I){return R/=I/2,R<1?-L/2*(Math.sqrt(1-R*R)-1)+O:L/2*(Math.sqrt(1-(R-=2)*R)+1)+O}function Y(R,O,L,I){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=I,R===1)return O+L;V||(V=I*.3);var J=f(F,L,V,K);return-s(J,R,I)+O}function oe(R,O,L,I){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=I,R===1)return O+L;V||(V=I*.3);var J=f(F,L,V,K);return J.a*Math.pow(2,-10*R)*Math.sin((R*I-J.s)*(2*Math.PI)/J.p)+J.c+O}function Z(R,O,L,I){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=I/2,R===2)return O+L;V||(V=I*(.3*1.5));var J=f(F,L,V,K);return R<1?-.5*s(J,R,I)+O:J.a*Math.pow(2,-10*(R-=1))*Math.sin((R*I-J.s)*(2*Math.PI)/J.p)*.5+J.c+O}function ae(R,O,L,I,K){return K===void 0&&(K=1.70158),L*(R/=I)*R*((K+1)*R-K)+O}function te(R,O,L,I,K){return K===void 0&&(K=1.70158),L*((R=R/I-1)*R*((K+1)*R+K)+1)+O}function G(R,O,L,I,K){return K===void 0&&(K=1.70158),R/=I/2,R<1?L/2*(R*R*(((K*=1.525)+1)*R-K))+O:L/2*((R-=2)*R*(((K*=1.525)+1)*R+K)+2)+O}function z(R,O,L,I){return L-q(I-R,0,L,I)+O}function q(R,O,L,I){return(R/=I)<1/2.75?L*(7.5625*R*R)+O:R<2/2.75?L*(7.5625*(R-=1.5/2.75)*R+.75)+O:R<2.5/2.75?L*(7.5625*(R-=2.25/2.75)*R+.9375)+O:L*(7.5625*(R-=2.625/2.75)*R+.984375)+O}function X(R,O,L,I){return R<I/2?z(R*2,0,L,I)*.5+O:q(R*2-I,0,L,I)*.5+L*.5+O}e.util.ease={easeInQuad:function(R,O,L,I){return L*(R/=I)*R+O},easeOutQuad:function(R,O,L,I){return-L*(R/=I)*(R-2)+O},easeInOutQuad:function(R,O,L,I){return R/=I/2,R<1?L/2*R*R+O:-L/2*(--R*(R-2)-1)+O},easeInCubic:function(R,O,L,I){return L*(R/=I)*R*R+O},easeOutCubic:h,easeInOutCubic:d,easeInQuart:a,easeOutQuart:l,easeInOutQuart:c,easeInQuint:m,easeOutQuint:y,easeInOutQuint:g,easeInSine:w,easeOutSine:S,easeInOutSine:k,easeInExpo:j,easeOutExpo:M,easeInOutExpo:N,easeInCirc:D,easeOutCirc:A,easeInOutCirc:B,easeInElastic:Y,easeOutElastic:oe,easeInOutElastic:Z,easeInBack:ae,easeOutBack:te,easeInOutBack:G,easeInBounce:z,easeOutBounce:q,easeInOutBounce:X}}(),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.util.object.clone,a=s.util.toFixed,l=s.util.parseUnit,c=s.util.multiplyTransformMatrices,m=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],y=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],w=["symbol","g","a","svg","clipPath","defs"],S={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},k={stroke:"strokeOpacity",fill:"fillOpacity"},j="font-size",M="clip-path";s.svgValidTagNamesRegEx=A(m),s.svgViewBoxElementsRegEx=A(y),s.svgInvalidAncestorsRegEx=A(g),s.svgValidParentsRegEx=A(w),s.cssRules={},s.gradientDefs={},s.clipPaths={};function N(V){return V in S?S[V]:V}function D(V,F,J,W){var ue=Array.isArray(F),ce;if((V==="fill"||V==="stroke")&&F==="none")F="";else{if(V==="strokeUniform")return F==="non-scaling-stroke";if(V==="strokeDashArray")F==="none"?F=null:F=F.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(V==="transformMatrix")J&&J.transformMatrix?F=c(J.transformMatrix,s.parseTransformAttribute(F)):F=s.parseTransformAttribute(F);else if(V==="visible")F=F!=="none"&&F!=="hidden",J&&J.visible===!1&&(F=!1);else if(V==="opacity")F=parseFloat(F),J&&typeof J.opacity<"u"&&(F*=J.opacity);else if(V==="textAnchor")F=F==="start"?"left":F==="end"?"right":"center";else if(V==="charSpacing")ce=l(F,W)/W*1e3;else if(V==="paintFirst"){var ie=F.indexOf("fill"),Q=F.indexOf("stroke"),F="fill";(ie>-1&&Q>-1&&Q<ie||ie===-1&&Q>-1)&&(F="stroke")}else{if(V==="href"||V==="xlink:href"||V==="font")return F;if(V==="imageSmoothing")return F==="optimizeQuality";ce=ue?F.map(l):l(F,W)}}return!ue&&isNaN(ce)?F:ce}function A(V){return new RegExp("^("+V.join("|")+")\\b","i")}function B(V){for(var F in k)if(!(typeof V[k[F]]>"u"||V[F]==="")){if(typeof V[F]>"u"){if(!s.Object.prototype[F])continue;V[F]=s.Object.prototype[F]}if(V[F].indexOf("url(")!==0){var J=new s.Color(V[F]);V[F]=J.setAlpha(a(J.getAlpha()*V[k[F]],2)).toRgba()}}return V}function Y(V,F){var J,W=[],ue,ce,ie;for(ce=0,ie=F.length;ce<ie;ce++)J=F[ce],ue=V.getElementsByTagName(J),W=W.concat(Array.prototype.slice.call(ue));return W}s.parseTransformAttribute=function(){function V(ee,we){var Ce=s.util.cos(we[0]),Te=s.util.sin(we[0]),Ee=0,Ne=0;we.length===3&&(Ee=we[1],Ne=we[2]),ee[0]=Ce,ee[1]=Te,ee[2]=-Te,ee[3]=Ce,ee[4]=Ee-(Ce*Ee-Te*Ne),ee[5]=Ne-(Te*Ee+Ce*Ne)}function F(ee,we){var Ce=we[0],Te=we.length===2?we[1]:we[0];ee[0]=Ce,ee[3]=Te}function J(ee,we,Ce){ee[Ce]=Math.tan(s.util.degreesToRadians(we[0]))}function W(ee,we){ee[4]=we[0],we.length===2&&(ee[5]=we[1])}var ue=s.iMatrix,ce=s.reNum,ie=s.commaWsp,Q="(?:(skewX)\\s*\\(\\s*("+ce+")\\s*\\))",me="(?:(skewY)\\s*\\(\\s*("+ce+")\\s*\\))",le="(?:(rotate)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+")"+ie+"("+ce+"))?\\s*\\))",H="(?:(scale)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+"))?\\s*\\))",re="(?:(translate)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+"))?\\s*\\))",ge="(?:(matrix)\\s*\\(\\s*("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")\\s*\\))",he="(?:"+ge+"|"+re+"|"+H+"|"+le+"|"+Q+"|"+me+")",fe="(?:"+he+"(?:"+ie+"*"+he+")*)",Se="^\\s*(?:"+fe+"?)\\s*$",$=new RegExp(Se),ne=new RegExp(he,"g");return function(ee){var we=ue.concat(),Ce=[];if(!ee||ee&&!$.test(ee))return we;ee.replace(ne,function(Ee){var Ne=new RegExp(he).exec(Ee).filter(function(nn){return!!nn}),ze=Ne[1],Ue=Ne.slice(2).map(parseFloat);switch(ze){case"translate":W(we,Ue);break;case"rotate":Ue[0]=s.util.degreesToRadians(Ue[0]),V(we,Ue);break;case"scale":F(we,Ue);break;case"skewX":J(we,Ue,2);break;case"skewY":J(we,Ue,1);break;case"matrix":we=Ue;break}Ce.push(we.concat()),we=ue.concat()});for(var Te=Ce[0];Ce.length>1;)Ce.shift(),Te=s.util.multiplyTransformMatrices(Te,Ce[0]);return Te}}();function oe(V,F){var J,W;V.replace(/;\s*$/,"").split(";").forEach(function(ue){var ce=ue.split(":");J=ce[0].trim().toLowerCase(),W=ce[1].trim(),F[J]=W})}function Z(V,F){var J,W;for(var ue in V)typeof V[ue]>"u"||(J=ue.toLowerCase(),W=V[ue],F[J]=W)}function ae(V,F){var J={};for(var W in s.cssRules[F])if(te(V,W.split(" ")))for(var ue in s.cssRules[F][W])J[ue]=s.cssRules[F][W][ue];return J}function te(V,F){var J,W=!0;return J=z(V,F.pop()),J&&F.length&&(W=G(V,F)),J&&W&&F.length===0}function G(V,F){for(var J,W=!0;V.parentNode&&V.parentNode.nodeType===1&&F.length;)W&&(J=F.pop()),V=V.parentNode,W=z(V,J);return F.length===0}function z(V,F){var J=V.nodeName,W=V.getAttribute("class"),ue=V.getAttribute("id"),ce,ie;if(ce=new RegExp("^"+J,"i"),F=F.replace(ce,""),ue&&F.length&&(ce=new RegExp("#"+ue+"(?![a-zA-Z\\-]+)","i"),F=F.replace(ce,"")),W&&F.length)for(W=W.split(" "),ie=W.length;ie--;)ce=new RegExp("\\."+W[ie]+"(?![a-zA-Z\\-]+)","i"),F=F.replace(ce,"");return F.length===0}function q(V,F){var J;if(V.getElementById&&(J=V.getElementById(F)),J)return J;var W,ue,ce,ie=V.getElementsByTagName("*");for(ue=0,ce=ie.length;ue<ce;ue++)if(W=ie[ue],F===W.getAttribute("id"))return W}function X(V){for(var F=Y(V,["use","svg:use"]),J=0;F.length&&J<F.length;){var W=F[J],ue=W.getAttribute("xlink:href")||W.getAttribute("href");if(ue===null)return;var ce=ue.slice(1),ie=W.getAttribute("x")||0,Q=W.getAttribute("y")||0,me=q(V,ce).cloneNode(!0),le=(me.getAttribute("transform")||"")+" translate("+ie+", "+Q+")",H,re=F.length,ge,he,fe,Se,$=s.svgNS;if(O(me),/^svg$/i.test(me.nodeName)){var ne=me.ownerDocument.createElementNS($,"g");for(he=0,fe=me.attributes,Se=fe.length;he<Se;he++)ge=fe.item(he),ne.setAttributeNS($,ge.nodeName,ge.nodeValue);for(;me.firstChild;)ne.appendChild(me.firstChild);me=ne}for(he=0,fe=W.attributes,Se=fe.length;he<Se;he++)ge=fe.item(he),!(ge.nodeName==="x"||ge.nodeName==="y"||ge.nodeName==="xlink:href"||ge.nodeName==="href")&&(ge.nodeName==="transform"?le=ge.nodeValue+" "+le:me.setAttribute(ge.nodeName,ge.nodeValue));me.setAttribute("transform",le),me.setAttribute("instantiated_by_use","1"),me.removeAttribute("id"),H=W.parentNode,H.replaceChild(me,W),F.length===re&&J++}}var R=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function O(V){if(!s.svgViewBoxElementsRegEx.test(V.nodeName))return{};var F=V.getAttribute("viewBox"),J=1,W=1,ue=0,ce=0,ie,Q,me,le,H=V.getAttribute("width"),re=V.getAttribute("height"),ge=V.getAttribute("x")||0,he=V.getAttribute("y")||0,fe=V.getAttribute("preserveAspectRatio")||"",Se=!F||!(F=F.match(R)),$=!H||!re||H==="100%"||re==="100%",ne=Se&&$,ee={},we="",Ce=0,Te=0;if(ee.width=0,ee.height=0,ee.toBeParsed=ne,Se&&(ge||he)&&V.parentNode&&V.parentNode.nodeName!=="#document"&&(we=" translate("+l(ge)+" "+l(he)+") ",me=(V.getAttribute("transform")||"")+we,V.setAttribute("transform",me),V.removeAttribute("x"),V.removeAttribute("y")),ne)return ee;if(Se)return ee.width=l(H),ee.height=l(re),ee;if(ue=-parseFloat(F[1]),ce=-parseFloat(F[2]),ie=parseFloat(F[3]),Q=parseFloat(F[4]),ee.minX=ue,ee.minY=ce,ee.viewBoxWidth=ie,ee.viewBoxHeight=Q,$?(ee.width=ie,ee.height=Q):(ee.width=l(H),ee.height=l(re),J=ee.width/ie,W=ee.height/Q),fe=s.util.parsePreserveAspectRatioAttribute(fe),fe.alignX!=="none"&&(fe.meetOrSlice==="meet"&&(W=J=J>W?W:J),fe.meetOrSlice==="slice"&&(W=J=J>W?J:W),Ce=ee.width-ie*J,Te=ee.height-Q*J,fe.alignX==="Mid"&&(Ce/=2),fe.alignY==="Mid"&&(Te/=2),fe.alignX==="Min"&&(Ce=0),fe.alignY==="Min"&&(Te=0)),J===1&&W===1&&ue===0&&ce===0&&ge===0&&he===0)return ee;if((ge||he)&&V.parentNode.nodeName!=="#document"&&(we=" translate("+l(ge)+" "+l(he)+") "),me=we+" matrix("+J+" 0 0 "+W+" "+(ue*J+Ce)+" "+(ce*W+Te)+") ",V.nodeName==="svg"){for(le=V.ownerDocument.createElementNS(s.svgNS,"g");V.firstChild;)le.appendChild(V.firstChild);V.appendChild(le)}else le=V,le.removeAttribute("x"),le.removeAttribute("y"),me=le.getAttribute("transform")+me;return le.setAttribute("transform",me),ee}function L(V,F){for(;V&&(V=V.parentNode);)if(V.nodeName&&F.test(V.nodeName.replace("svg:",""))&&!V.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(V,F,J,W){if(V){X(V);var ue=s.Object.__uid++,ce,ie,Q=O(V),me=s.util.toArray(V.getElementsByTagName("*"));if(Q.crossOrigin=W&&W.crossOrigin,Q.svgUid=ue,me.length===0&&s.isLikelyNode){me=V.selectNodes('//*[name(.)!="svg"]');var le=[];for(ce=0,ie=me.length;ce<ie;ce++)le[ce]=me[ce];me=le}var H=me.filter(function(ge){return O(ge),s.svgValidTagNamesRegEx.test(ge.nodeName.replace("svg:",""))&&!L(ge,s.svgInvalidAncestorsRegEx)});if(!H||H&&!H.length){F&&F([],{});return}var re={};me.filter(function(ge){return ge.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ge){var he=ge.getAttribute("id");re[he]=s.util.toArray(ge.getElementsByTagName("*")).filter(function(fe){return s.svgValidTagNamesRegEx.test(fe.nodeName.replace("svg:",""))})}),s.gradientDefs[ue]=s.getGradientDefs(V),s.cssRules[ue]=s.getCSSRules(V),s.clipPaths[ue]=re,s.parseElements(H,function(ge,he){F&&(F(ge,Q,he,me),delete s.gradientDefs[ue],delete s.cssRules[ue],delete s.clipPaths[ue])},d(Q),J,W)}};function I(V,F){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],W="xlink:href",ue=F.getAttribute(W).slice(1),ce=q(V,ue);if(ce&&ce.getAttribute(W)&&I(V,ce),J.forEach(function(Q){ce&&!F.hasAttribute(Q)&&ce.hasAttribute(Q)&&F.setAttribute(Q,ce.getAttribute(Q))}),!F.children.length)for(var ie=ce.cloneNode(!0);ie.firstChild;)F.appendChild(ie.firstChild);F.removeAttribute(W)}var K=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");h(s,{parseFontDeclaration:function(V,F){var J=V.match(K);if(J){var W=J[1],ue=J[3],ce=J[4],ie=J[5],Q=J[6];W&&(F.fontStyle=W),ue&&(F.fontWeight=isNaN(parseFloat(ue))?ue:parseFloat(ue)),ce&&(F.fontSize=l(ce)),Q&&(F.fontFamily=Q),ie&&(F.lineHeight=ie==="normal"?1:ie)}},getGradientDefs:function(V){var F=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=Y(V,F),W,ue=0,ce={};for(ue=J.length;ue--;)W=J[ue],W.getAttribute("xlink:href")&&I(V,W),ce[W.getAttribute("id")]=W;return ce},parseAttributes:function(V,F,J){if(V){var W,ue={},ce,ie;typeof J>"u"&&(J=V.getAttribute("svgUid")),V.parentNode&&s.svgValidParentsRegEx.test(V.parentNode.nodeName)&&(ue=s.parseAttributes(V.parentNode,F,J));var Q=F.reduce(function(fe,Se){return W=V.getAttribute(Se),W&&(fe[Se]=W),fe},{}),me=h(ae(V,J),s.parseStyleAttribute(V));Q=h(Q,me),me[M]&&V.setAttribute(M,me[M]),ce=ie=ue.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,Q[j]&&(Q[j]=ce=l(Q[j],ie));var le,H,re={};for(var ge in Q)le=N(ge),H=D(le,Q[ge],ue,ce),re[le]=H;re&&re.font&&s.parseFontDeclaration(re.font,re);var he=h(ue,re);return s.svgValidParentsRegEx.test(V.nodeName)?he:B(he)}},parseElements:function(V,F,J,W,ue){new s.ElementsParser(V,F,J,W,ue).parse()},parseStyleAttribute:function(V){var F={},J=V.getAttribute("style");return J&&(typeof J=="string"?oe(J,F):Z(J,F)),F},parsePointsAttribute:function(V){if(!V)return null;V=V.replace(/,/g," ").trim(),V=V.split(/\s+/);var F=[],J,W;for(J=0,W=V.length;J<W;J+=2)F.push({x:parseFloat(V[J]),y:parseFloat(V[J+1])});return F},getCSSRules:function(V){var F=V.getElementsByTagName("style"),J,W,ue={},ce;for(J=0,W=F.length;J<W;J++){var ie=F[J].textContent;ie=ie.replace(/\/\*[\s\S]*?\*\//g,""),ie.trim()!==""&&(ce=ie.split("}"),ce=ce.filter(function(Q){return Q.trim()}),ce.forEach(function(Q){var me=Q.split("{"),le={},H=me[1].trim(),re=H.split(";").filter(function(Se){return Se.trim()});for(J=0,W=re.length;J<W;J++){var ge=re[J].split(":"),he=ge[0].trim(),fe=ge[1].trim();le[he]=fe}Q=me[0].trim(),Q.split(",").forEach(function(Se){Se=Se.replace(/^svg/i,"").trim(),Se!==""&&(ue[Se]?s.util.object.extend(ue[Se],le):ue[Se]=s.util.object.clone(le))})}))}return ue},loadSVGFromURL:function(V,F,J,W){V=V.replace(/^\n\s*/,"").trim(),new s.util.request(V,{method:"get",onComplete:ue});function ue(ce){var ie=ce.responseXML;if(!ie||!ie.documentElement)return F&&F(null),!1;s.parseSVGDocument(ie.documentElement,function(Q,me,le,H){F&&F(Q,me,le,H)},J,W)}},loadSVGFromString:function(V,F,J,W){var ue=new s.window.DOMParser,ce=ue.parseFromString(V.trim(),"text/xml");s.parseSVGDocument(ce.documentElement,function(ie,Q,me,le){F(ie,Q,me,le)},J,W)}})}(t),e.ElementsParser=function(f,s,h,d,a,l){this.elements=f,this.callback=s,this.options=h,this.reviver=d,this.svgUid=h&&h.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var s=this;this.elements.forEach(function(h,d){h.setAttribute("svgUid",s.svgUid),s.createObject(h,d)})},f.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},f.createObject=function(s,h){var d=this.findTag(s);if(d&&d.fromElement)try{d.fromElement(s,this.createCallback(h,s),this.options)}catch(a){e.log(a)}else this.checkIfDone()},f.createCallback=function(s,h){var d=this;return function(a){var l;d.resolveGradient(a,h,"fill"),d.resolveGradient(a,h,"stroke"),a instanceof e.Image&&a._originalElement&&(l=a.parsePreserveAspectRatioAttribute(h)),a._removeTransformMatrix(l),d.resolveClipPath(a,h),d.reviver&&d.reviver(h,a),d.instances[s]=a,d.checkIfDone()}},f.extractPropertyDefinition=function(s,h,d){var a=s[h],l=this.regexUrl;if(l.test(a)){l.lastIndex=0;var c=l.exec(a)[1];return l.lastIndex=0,e[d][this.svgUid][c]}},f.resolveGradient=function(s,h,d){var a=this.extractPropertyDefinition(s,d,"gradientDefs");if(a){var l=h.getAttribute(d+"-opacity"),c=e.Gradient.fromElement(a,s,l,this.options);s.set(d,c)}},f.createClipPathCallback=function(s,h){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,h.push(d)}},f.resolveClipPath=function(s,h){var d=this.extractPropertyDefinition(s,"clipPath","clipPaths"),a,l,c,m,y,g;if(d){m=[],c=e.util.invertTransform(s.calcTransformMatrix());for(var w=d[0].parentNode,S=h;S.parentNode&&S.getAttribute("clip-path")!==s.clipPath;)S=S.parentNode;S.parentNode.appendChild(w);for(var k=0;k<d.length;k++)a=d[k],l=this.findTag(a),l.fromElement(a,this.createClipPathCallback(s,m),this.options);m.length===1?d=m[0]:d=new e.Group(m),y=e.util.multiplyTransformMatrices(c,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,S);var g=e.util.qrDecompose(y);d.flipX=!1,d.flipY=!1,d.set("scaleX",g.scaleX),d.set("scaleY",g.scaleY),d.angle=g.angle,d.skewX=g.skewX,d.skewY=0,d.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=d}else delete s.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(f){var s=f.fabric||(f.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=h;function h(d,a){this.x=d,this.y=a}h.prototype={type:"point",constructor:h,add:function(d){return new h(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new h(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new h(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new h(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new h(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new h(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new h(this.x+(d.x-this.x)*a,this.y+(d.y-this.y)*a)},distanceFrom:function(d){var a=this.x-d.x,l=this.y-d.y;return Math.sqrt(a*a+l*l)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new h(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new h(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,a){return this.x=d,this.y=a,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var a=this.x,l=this.y;this.x=d.x,this.y=d.y,d.x=a,d.y=l},clone:function(){return new h(this.x,this.y)}}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function h(d){this.status=d,this.points=[]}s.Intersection=h,s.Intersection.prototype={constructor:h,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},s.Intersection.intersectLineLine=function(d,a,l,c){var m,y=(c.x-l.x)*(d.y-l.y)-(c.y-l.y)*(d.x-l.x),g=(a.x-d.x)*(d.y-l.y)-(a.y-d.y)*(d.x-l.x),w=(c.y-l.y)*(a.x-d.x)-(c.x-l.x)*(a.y-d.y);if(w!==0){var S=y/w,k=g/w;0<=S&&S<=1&&0<=k&&k<=1?(m=new h("Intersection"),m.appendPoint(new s.Point(d.x+S*(a.x-d.x),d.y+S*(a.y-d.y)))):m=new h}else y===0||g===0?m=new h("Coincident"):m=new h("Parallel");return m},s.Intersection.intersectLinePolygon=function(d,a,l){var c=new h,m=l.length,y,g,w,S;for(S=0;S<m;S++)y=l[S],g=l[(S+1)%m],w=h.intersectLineLine(d,a,y,g),c.appendPoints(w.points);return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonPolygon=function(d,a){var l=new h,c=d.length,m;for(m=0;m<c;m++){var y=d[m],g=d[(m+1)%c],w=h.intersectLinePolygon(y,g,a);l.appendPoints(w.points)}return l.points.length>0&&(l.status="Intersection"),l},s.Intersection.intersectPolygonRectangle=function(d,a,l){var c=a.min(l),m=a.max(l),y=new s.Point(m.x,c.y),g=new s.Point(c.x,m.y),w=h.intersectLinePolygon(c,y,d),S=h.intersectLinePolygon(y,m,d),k=h.intersectLinePolygon(m,g,d),j=h.intersectLinePolygon(g,c,d),M=new h;return M.appendPoints(w.points),M.appendPoints(S.points),M.appendPoints(k.points),M.appendPoints(j.points),M.points.length>0&&(M.status="Intersection"),M}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function h(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}s.Color=h,s.Color.prototype={_tryParsingColor:function(a){var l;a in h.colorNameMap&&(a=h.colorNameMap[a]),a==="transparent"&&(l=[255,255,255,0]),l||(l=h.sourceFromHex(a)),l||(l=h.sourceFromRgb(a)),l||(l=h.sourceFromHsl(a)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(a,l,c){a/=255,l/=255,c/=255;var m,y,g,w=s.util.array.max([a,l,c]),S=s.util.array.min([a,l,c]);if(g=(w+S)/2,w===S)m=y=0;else{var k=w-S;switch(y=g>.5?k/(2-w-S):k/(w+S),w){case a:m=(l-c)/k+(l<c?6:0);break;case l:m=(c-a)/k+2;break;case c:m=(a-l)/k+4;break}m/=6}return[Math.round(m*360),Math.round(y*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),l,c,m;return l=a[0].toString(16),l=l.length===1?"0"+l:l,c=a[1].toString(16),c=c.length===1?"0"+c:c,m=a[2].toString(16),m=m.length===1?"0"+m:m,l.toUpperCase()+c.toUpperCase()+m.toUpperCase()},toHexa:function(){var a=this.getSource(),l;return l=Math.round(a[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var l=this.getSource();return l[3]=a,this.setSource(l),this},toGrayscale:function(){var a=this.getSource(),l=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),c=a[3];return this.setSource([l,l,l,c]),this},toBlackWhite:function(a){var l=this.getSource(),c=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),m=l[3];return a=a||127,c=Number(c)<Number(a)?0:255,this.setSource([c,c,c,m]),this},overlayWith:function(a){a instanceof h||(a=new h(a));var l=[],c=this.getAlpha(),m=.5,y=this.getSource(),g=a.getSource(),w;for(w=0;w<3;w++)l.push(Math.round(y[w]*(1-m)+g[w]*m));return l[3]=c,this.setSource(l),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(a,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(l-a)*6*c:c<1/2?l:c<2/3?a+(l-a)*(2/3-c)*6:a}s.Color.fromRgb=function(a){return h.fromSource(h.sourceFromRgb(a))},s.Color.sourceFromRgb=function(a){var l=a.match(h.reRGBa);if(l){var c=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),m=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),y=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(c,10),parseInt(m,10),parseInt(y,10),l[4]?parseFloat(l[4]):1]}},s.Color.fromRgba=h.fromRgb,s.Color.fromHsl=function(a){return h.fromSource(h.sourceFromHsl(a))},s.Color.sourceFromHsl=function(a){var l=a.match(h.reHSLa);if(l){var c=(parseFloat(l[1])%360+360)%360/360,m=parseFloat(l[2])/(/%$/.test(l[2])?100:1),y=parseFloat(l[3])/(/%$/.test(l[3])?100:1),g,w,S;if(m===0)g=w=S=y;else{var k=y<=.5?y*(m+1):y+m-y*m,j=y*2-k;g=d(j,k,c+1/3),w=d(j,k,c),S=d(j,k,c-1/3)}return[Math.round(g*255),Math.round(w*255),Math.round(S*255),l[4]?parseFloat(l[4]):1]}},s.Color.fromHsla=h.fromHsl,s.Color.fromHex=function(a){return h.fromSource(h.sourceFromHex(a))},s.Color.sourceFromHex=function(a){if(a.match(h.reHex)){var l=a.slice(a.indexOf("#")+1),c=l.length===3||l.length===4,m=l.length===8||l.length===4,y=c?l.charAt(0)+l.charAt(0):l.substring(0,2),g=c?l.charAt(1)+l.charAt(1):l.substring(2,4),w=c?l.charAt(2)+l.charAt(2):l.substring(4,6),S=m?c?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(y,16),parseInt(g,16),parseInt(w,16),parseFloat((parseInt(S,16)/255).toFixed(2))]}},s.Color.fromSource=function(a){var l=new h;return l.setSource(a),l}}(t),function(f){var s=f.fabric||(f.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],a={},l="left",c="top",m="right",y="bottom",g="center",w={top:y,bottom:c,left:m,right:l,center:g},S=s.util.radiansToDegrees,k=Math.sign||function(le){return(le>0)-(le<0)||+le};function j(le,H){var re=le.angle+S(Math.atan2(H.y,H.x))+360;return Math.round(re%360/45)}function M(le,H){var re=H.transform.target,ge=re.canvas,he=s.util.object.clone(H);he.target=re,ge&&ge.fire("object:"+le,he),re.fire(le,H)}function N(le,H){var re=H.canvas,ge=re.uniScaleKey,he=le[ge];return re.uniformScaling&&!he||!re.uniformScaling&&he}function D(le){return le.originX===g&&le.originY===g}function A(le,H,re){var ge=le.lockScalingX,he=le.lockScalingY;return!!(ge&&he||!H&&(ge||he)&&re||ge&&H==="x"||he&&H==="y")}function B(le,H,re){var ge="not-allowed",he=N(le,re),fe="";if(H.x!==0&&H.y===0?fe="x":H.x===0&&H.y!==0&&(fe="y"),A(re,fe,he))return ge;var Se=j(re,H);return h[Se]+"-resize"}function Y(le,H,re){var ge="not-allowed";if(H.x!==0&&re.lockSkewingY||H.y!==0&&re.lockSkewingX)return ge;var he=j(re,H)%4;return d[he]+"-resize"}function oe(le,H,re){return le[re.canvas.altActionKey]?a.skewCursorStyleHandler(le,H,re):a.scaleCursorStyleHandler(le,H,re)}function Z(le,H,re){var ge=le[re.canvas.altActionKey];if(H.x===0)return ge?"skewX":"scaleY";if(H.y===0)return ge?"skewY":"scaleX"}function ae(le,H,re){return re.lockRotation?"not-allowed":H.cursorStyle}function te(le,H,re,ge){return{e:le,transform:H,pointer:{x:re,y:ge}}}function G(le){return function(H,re,ge,he){var fe=re.target,Se=fe.getCenterPoint(),$=fe.translateToOriginPoint(Se,re.originX,re.originY),ne=le(H,re,ge,he);return fe.setPositionByOrigin($,re.originX,re.originY),ne}}function z(le,H){return function(re,ge,he,fe){var Se=H(re,ge,he,fe);return Se&&M(le,te(re,ge,he,fe)),Se}}function q(le,H,re,ge,he){var fe=le.target,Se=fe.controls[le.corner],$=fe.canvas.getZoom(),ne=fe.padding/$,ee=fe.toLocalPoint(new s.Point(ge,he),H,re);return ee.x>=ne&&(ee.x-=ne),ee.x<=-ne&&(ee.x+=ne),ee.y>=ne&&(ee.y-=ne),ee.y<=ne&&(ee.y+=ne),ee.x-=Se.offsetX,ee.y-=Se.offsetY,ee}function X(le){return le.flipX!==le.flipY}function R(le,H,re,ge,he){if(le[H]!==0){var fe=le._getTransformedDimensions()[ge],Se=he/fe*le[re];le.set(re,Se)}}function O(le,H,re,ge){var he=H.target,fe=he._getTransformedDimensions(0,he.skewY),Se=q(H,H.originX,H.originY,re,ge),$=Math.abs(Se.x*2)-fe.x,ne=he.skewX,ee;$<2?ee=0:(ee=S(Math.atan2($/he.scaleX,fe.y/he.scaleY)),H.originX===l&&H.originY===y&&(ee=-ee),H.originX===m&&H.originY===c&&(ee=-ee),X(he)&&(ee=-ee));var we=ne!==ee;if(we){var Ce=he._getTransformedDimensions().y;he.set("skewX",ee),R(he,"skewY","scaleY","y",Ce)}return we}function L(le,H,re,ge){var he=H.target,fe=he._getTransformedDimensions(he.skewX,0),Se=q(H,H.originX,H.originY,re,ge),$=Math.abs(Se.y*2)-fe.y,ne=he.skewY,ee;$<2?ee=0:(ee=S(Math.atan2($/he.scaleY,fe.x/he.scaleX)),H.originX===l&&H.originY===y&&(ee=-ee),H.originX===m&&H.originY===c&&(ee=-ee),X(he)&&(ee=-ee));var we=ne!==ee;if(we){var Ce=he._getTransformedDimensions().x;he.set("skewY",ee),R(he,"skewX","scaleX","x",Ce)}return we}function I(le,H,re,ge){var he=H.target,fe=he.skewX,Se,$=H.originY;if(he.lockSkewingX)return!1;if(fe===0){var ne=q(H,g,g,re,ge);ne.x>0?Se=l:Se=m}else fe>0&&(Se=$===c?l:m),fe<0&&(Se=$===c?m:l),X(he)&&(Se=Se===l?m:l);H.originX=Se;var ee=z("skewing",G(O));return ee(le,H,re,ge)}function K(le,H,re,ge){var he=H.target,fe=he.skewY,Se,$=H.originX;if(he.lockSkewingY)return!1;if(fe===0){var ne=q(H,g,g,re,ge);ne.y>0?Se=c:Se=y}else fe>0&&(Se=$===l?c:y),fe<0&&(Se=$===l?y:c),X(he)&&(Se=Se===c?y:c);H.originY=Se;var ee=z("skewing",G(L));return ee(le,H,re,ge)}function V(le,H,re,ge){var he=H,fe=he.target,Se=fe.translateToOriginPoint(fe.getCenterPoint(),he.originX,he.originY);if(fe.lockRotation)return!1;var $=Math.atan2(he.ey-Se.y,he.ex-Se.x),ne=Math.atan2(ge-Se.y,re-Se.x),ee=S(ne-$+he.theta),we=!0;if(fe.snapAngle>0){var Ce=fe.snapAngle,Te=fe.snapThreshold||Ce,Ee=Math.ceil(ee/Ce)*Ce,Ne=Math.floor(ee/Ce)*Ce;Math.abs(ee-Ne)<Te?ee=Ne:Math.abs(ee-Ee)<Te&&(ee=Ee)}return ee<0&&(ee=360+ee),ee%=360,we=fe.angle!==ee,fe.angle=ee,we}function F(le,H,re,ge,he){he=he||{};var fe=H.target,Se=fe.lockScalingX,$=fe.lockScalingY,ne=he.by,ee,we,Ce,Te,Ee=N(le,fe),Ne=A(fe,ne,Ee),ze,Ue,nn=H.gestureScale;if(Ne)return!1;if(nn)we=H.scaleX*nn,Ce=H.scaleY*nn;else{if(ee=q(H,H.originX,H.originY,re,ge),ze=ne!=="y"?k(ee.x):1,Ue=ne!=="x"?k(ee.y):1,H.signX||(H.signX=ze),H.signY||(H.signY=Ue),fe.lockScalingFlip&&(H.signX!==ze||H.signY!==Ue))return!1;if(Te=fe._getTransformedDimensions(),Ee&&!ne){var Xt=Math.abs(ee.x)+Math.abs(ee.y),rn=H.original,$n=Math.abs(Te.x*rn.scaleX/fe.scaleX)+Math.abs(Te.y*rn.scaleY/fe.scaleY),Rn=Xt/$n;we=rn.scaleX*Rn,Ce=rn.scaleY*Rn}else we=Math.abs(ee.x*fe.scaleX/Te.x),Ce=Math.abs(ee.y*fe.scaleY/Te.y);D(H)&&(we*=2,Ce*=2),H.signX!==ze&&ne!=="y"&&(H.originX=w[H.originX],we*=-1,H.signX=ze),H.signY!==Ue&&ne!=="x"&&(H.originY=w[H.originY],Ce*=-1,H.signY=Ue)}var Pn=fe.scaleX,si=fe.scaleY;return ne?(ne==="x"&&fe.set("scaleX",we),ne==="y"&&fe.set("scaleY",Ce)):(!Se&&fe.set("scaleX",we),!$&&fe.set("scaleY",Ce)),Pn!==fe.scaleX||si!==fe.scaleY}function J(le,H,re,ge){return F(le,H,re,ge)}function W(le,H,re,ge){return F(le,H,re,ge,{by:"x"})}function ue(le,H,re,ge){return F(le,H,re,ge,{by:"y"})}function ce(le,H,re,ge){return le[H.target.canvas.altActionKey]?a.skewHandlerX(le,H,re,ge):a.scalingY(le,H,re,ge)}function ie(le,H,re,ge){return le[H.target.canvas.altActionKey]?a.skewHandlerY(le,H,re,ge):a.scalingX(le,H,re,ge)}function Q(le,H,re,ge){var he=H.target,fe=q(H,H.originX,H.originY,re,ge),Se=he.strokeWidth/(he.strokeUniform?he.scaleX:1),$=D(H)?2:1,ne=he.width,ee=Math.abs(fe.x*$/he.scaleX)-Se;return he.set("width",Math.max(ee,0)),ne!==ee}function me(le,H,re,ge){var he=H.target,fe=re-H.offsetX,Se=ge-H.offsetY,$=!he.get("lockMovementX")&&he.left!==fe,ne=!he.get("lockMovementY")&&he.top!==Se;return $&&he.set("left",fe),ne&&he.set("top",Se),($||ne)&&M("moving",te(le,H,re,ge)),$||ne}a.scaleCursorStyleHandler=B,a.skewCursorStyleHandler=Y,a.scaleSkewCursorStyleHandler=oe,a.rotationWithSnapping=z("rotating",G(V)),a.scalingEqually=z("scaling",G(J)),a.scalingX=z("scaling",G(W)),a.scalingY=z("scaling",G(ue)),a.scalingYOrSkewingX=ce,a.scalingXOrSkewingY=ie,a.changeWidth=z("resizing",G(Q)),a.skewHandlerX=I,a.skewHandlerY=K,a.dragHandler=me,a.scaleOrSkewActionName=Z,a.rotationStyleHandler=ae,a.fireEvent=M,a.wrapWithFixedAnchor=G,a.wrapWithFireEvent=z,a.getLocalPoint=q,s.controlsUtils=a}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.degreesToRadians,d=s.controlsUtils;function a(c,m,y,g,w){g=g||{};var S=this.sizeX||g.cornerSize||w.cornerSize,k=this.sizeY||g.cornerSize||w.cornerSize,j=typeof g.transparentCorners<"u"?g.transparentCorners:w.transparentCorners,M=j?"stroke":"fill",N=!j&&(g.cornerStrokeColor||w.cornerStrokeColor),D=m,A=y,B;c.save(),c.fillStyle=g.cornerColor||w.cornerColor,c.strokeStyle=g.cornerStrokeColor||w.cornerStrokeColor,S>k?(B=S,c.scale(1,k/S),A=y*S/k):k>S?(B=k,c.scale(S/k,1),D=m*k/S):B=S,c.lineWidth=1,c.beginPath(),c.arc(D,A,B/2,0,2*Math.PI,!1),c[M](),N&&c.stroke(),c.restore()}function l(c,m,y,g,w){g=g||{};var S=this.sizeX||g.cornerSize||w.cornerSize,k=this.sizeY||g.cornerSize||w.cornerSize,j=typeof g.transparentCorners<"u"?g.transparentCorners:w.transparentCorners,M=j?"stroke":"fill",N=!j&&(g.cornerStrokeColor||w.cornerStrokeColor),D=S/2,A=k/2;c.save(),c.fillStyle=g.cornerColor||w.cornerColor,c.strokeStyle=g.cornerStrokeColor||w.cornerStrokeColor,c.lineWidth=1,c.translate(m,y),c.rotate(h(w.angle)),c[M+"Rect"](-D,-A,S,k),N&&c.strokeRect(-D,-A,S,k),c.restore()}d.renderCircleControl=a,d.renderSquareControl=l}(t),function(f){var s=f.fabric||(f.fabric={});function h(d){for(var a in d)this[a]=d[a]}s.Control=h,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,a){return a.cursorStyle},getActionName:function(d,a){return a.actionName},getVisibility:function(d,a){var l=d._controlsVisibility;return l&&typeof l[a]<"u"?l[a]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,a){var l=s.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},a);return l},calcCornerCoords:function(d,a,l,c,m){var y,g,w,S,k=m?this.touchSizeX:this.sizeX,j=m?this.touchSizeY:this.sizeY;if(k&&j&&k!==j){var M=Math.atan2(j,k),N=Math.sqrt(k*k+j*j)/2,D=M-s.util.degreesToRadians(d),A=Math.PI/2-M-s.util.degreesToRadians(d);y=N*s.util.cos(D),g=N*s.util.sin(D),w=N*s.util.cos(A),S=N*s.util.sin(A)}else{var B=k&&j?k:a;N=B*.7071067812;var D=s.util.degreesToRadians(45-d);y=w=N*s.util.cos(D),g=S=N*s.util.sin(D)}return{tl:{x:l-S,y:c-w},tr:{x:l+y,y:c-g},bl:{x:l-y,y:c+g},br:{x:l+S,y:c+w}}},render:function(d,a,l,c,m){switch(c=c||{},c.cornerStyle||m.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,d,a,l,c,m);break;default:s.controlsUtils.renderSquareControl.call(this,d,a,l,c,m)}}}}(t),function(){function f(l,c){var m=l.getAttribute("style"),y=l.getAttribute("offset")||0,g,w,S,k;if(y=parseFloat(y)/(/%$/.test(y)?100:1),y=y<0?0:y>1?1:y,m){var j=m.split(/\s*;\s*/);for(j[j.length-1]===""&&j.pop(),k=j.length;k--;){var M=j[k].split(/\s*:\s*/),N=M[0].trim(),D=M[1].trim();N==="stop-color"?g=D:N==="stop-opacity"&&(S=D)}}return g||(g=l.getAttribute("stop-color")||"rgb(0,0,0)"),S||(S=l.getAttribute("stop-opacity")),g=new e.Color(g),w=g.getAlpha(),S=isNaN(parseFloat(S))?1:parseFloat(S),S*=w*c,{offset:y,color:g.toRgb(),opacity:S}}function s(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function h(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var d=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var c,m=this;Object.keys(l).forEach(function(y){m[y]=l[y]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,c={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(c.r1=l.coords.r1||0,c.r2=l.coords.r2||0),this.coords=c,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var c in l){var m=new e.Color(l[c]);this.colorStops.push({offset:parseFloat(c),color:m.toRgb(),opacity:m.getAlpha()})}return this},toObject:function(l){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,c,l),c},toSVG:function(l,w){var m=d(this.coords,!0),y,g,w=w||{},S,k,j=d(this.colorStops,!0),M=m.r1>m.r2,N=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),D=-this.offsetX,A=-this.offsetY,B=!!w.additionalTransform,Y=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(j.sort(function(G,z){return G.offset-z.offset}),Y==="objectBoundingBox"?(D/=l.width,A/=l.height):(D+=l.width/2,A+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(D-=l.pathOffset.x,A-=l.pathOffset.y),N[4]-=D,N[5]-=A,k='id="SVGID_'+this.id+'" gradientUnits="'+Y+'"',k+=' gradientTransform="'+(B?w.additionalTransform+" ":"")+e.util.matrixToSVG(N)+'" ',this.type==="linear"?S=["<linearGradient ",k,' x1="',m.x1,'" y1="',m.y1,'" x2="',m.x2,'" y2="',m.y2,`">
`]:this.type==="radial"&&(S=["<radialGradient ",k,' cx="',M?m.x1:m.x2,'" cy="',M?m.y1:m.y2,'" r="',M?m.r1:m.r2,'" fx="',M?m.x2:m.x1,'" fy="',M?m.y2:m.y1,`">
`]),this.type==="radial"){if(M)for(j=j.concat(),j.reverse(),y=0,g=j.length;y<g;y++)j[y].offset=1-j[y].offset;var oe=Math.min(m.r1,m.r2);if(oe>0){var Z=Math.max(m.r1,m.r2),ae=oe/Z;for(y=0,g=j.length;y<g;y++)j[y].offset+=ae*(1-j[y].offset)}}for(y=0,g=j.length;y<g;y++){var te=j[y];S.push("<stop ",'offset="',te.offset*100+"%",'" style="stop-color:',te.color,typeof te.opacity<"u"?";stop-opacity: "+te.opacity:";",`"/>
`)}return S.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),S.join("")},toLive:function(l){var c,m=e.util.object.clone(this.coords),y,g;if(this.type){for(this.type==="linear"?c=l.createLinearGradient(m.x1,m.y1,m.x2,m.y2):this.type==="radial"&&(c=l.createRadialGradient(m.x1,m.y1,m.r1,m.x2,m.y2,m.r2)),y=0,g=this.colorStops.length;y<g;y++){var w=this.colorStops[y].color,S=this.colorStops[y].opacity,k=this.colorStops[y].offset;typeof S<"u"&&(w=new e.Color(w).setAlpha(S).toRgba()),c.addColorStop(k,w)}return c}}}),e.util.object.extend(e.Gradient,{fromElement:function(l,c,m,y){var g=parseFloat(m)/(/%$/.test(m)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var w=l.getElementsByTagName("stop"),S,k=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",j=l.getAttribute("gradientTransform")||"",M=[],N,D,A=0,B=0,Y;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(S="linear",N=s(l)):(S="radial",N=h(l)),D=w.length;D--;)M.push(f(w[D],g));Y=e.parseTransformAttribute(j),a(c,N,y,k),k==="pixels"&&(A=-c.left,B=-c.top);var oe=new e.Gradient({id:l.getAttribute("id"),type:S,coords:N,colorStops:M,gradientUnits:k,gradientTransform:Y,offsetX:A,offsetY:B});return oe}});function a(l,c,m,y){var g,w;Object.keys(c).forEach(function(S){g=c[S],g==="Infinity"?w=1:g==="-Infinity"?w=0:(w=parseFloat(c[S],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(w*=.01,y==="pixels"&&((S==="x1"||S==="x2"||S==="r2")&&(w*=m.viewBoxWidth||m.width),(S==="y1"||S==="y2")&&(w*=m.viewBoxHeight||m.height)))),c[S]=w})}}(),function(){var f=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,h){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){h&&h(this);return}else{var d=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(a,l){d.source=a,h&&h(d,l)},null,this.crossOrigin)}},toObject:function(s){var h=e.Object.NUM_FRACTION_DIGITS,d,a;return typeof this.source.src=="string"?d=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(d=this.source.toDataURL()),a={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,h),offsetY:f(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,a,s),a},toSVG:function(s){var h=typeof this.source=="function"?this.source():this.source,d=h.width/s.width,a=h.height/s.height,l=this.offsetX/s.width,c=this.offsetY/s.height,m="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,c&&(a+=Math.abs(c))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(d=1,l&&(d+=Math.abs(l))),h.src?m=h.src:h.toDataURL&&(m=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+c+'" width="'+d+'" height="'+a+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+m+`"></image>
</pattern>
`},setOptions:function(s){for(var h in s)this[h]=s[h]},toLive:function(s){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":s.createPattern(h,this.repeat)}})}(),function(f){var s=f.fabric||(f.fabric={}),h=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){typeof d=="string"&&(d=this._parseShadow(d));for(var a in d)this[a]=d[a];this.id=s.Object.__uid++},_parseShadow:function(d){var a=d.trim(),l=s.Shadow.reOffsetsAndBlur.exec(a)||[],c=a.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:c.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var a=40,l=40,c=s.Object.NUM_FRACTION_DIGITS,m=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-d.angle)),y=20,g=new s.Color(this.color);return d.width&&d.height&&(a=h((Math.abs(m.x)+this.blur)/d.width,c)*100+y,l=h((Math.abs(m.y)+this.blur)/d.height,c)*100+y),d.flipX&&(m.x*=-1),d.flipY&&(m.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,c)+`"></feGaussianBlur>
	<feOffset dx="`+h(m.x,c)+'" dy="'+h(m.y,c)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},a=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==a[l]&&(d[l]=this[l])},this),d}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var f=e.util.object.extend,s=e.util.getElementOffset,h=e.util.removeFromArray,d=e.util.toFixed,a=e.util.transformPoint,l=e.util.invertTransform,c=e.util.getNodeCanvas,m=e.util.createCanvasElement,y=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(g,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,w)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,w){var S=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(w),this.interactive||this._initRetinaScaling(),w.overlayImage&&this.setOverlayImage(w.overlayImage,S),w.backgroundImage&&this.setBackgroundImage(w.backgroundImage,S),w.backgroundColor&&this.setBackgroundColor(w.backgroundColor,S),w.overlayColor&&this.setOverlayColor(w.overlayColor,S),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=e.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,w,S){w.setAttribute("width",this.width*g),w.setAttribute("height",this.height*g),S.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,w,S){return this.__setBgOverlayImage("overlayImage",g,w,S)},setBackgroundImage:function(g,w,S){return this.__setBgOverlayImage("backgroundImage",g,w,S)},setOverlayColor:function(g,w){return this.__setBgOverlayColor("overlayColor",g,w)},setBackgroundColor:function(g,w){return this.__setBgOverlayColor("backgroundColor",g,w)},__setBgOverlayImage:function(g,w,S,k){return typeof w=="string"?e.util.loadImage(w,function(j,M){if(j){var N=new e.Image(j,k);this[g]=N,N.canvas=this}S&&S(j,M)},this,k&&k.crossOrigin):(k&&w.setOptions(k),this[g]=w,w&&(w.canvas=this),S&&S(w,!1)),this},__setBgOverlayColor:function(g,w,S){return this[g]=w,this._initGradient(w,g),this._initPattern(w,g,S),this},_createCanvasElement:function(){var g=m();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw y;return g},_initOptions:function(g){var w=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(w.width,10)||0,this.height=this.height||parseInt(w.height,10)||0,this.lowerCanvasEl.style&&(w.width=this.width,w.height=this.height,w.style.width=this.width+"px",w.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=e.util.getById(g)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,w){return this.setDimensions({width:g},w)},setHeight:function(g,w){return this.setDimensions({height:g},w)},setDimensions:function(g,w){var S;w=w||{};for(var k in g)S=g[k],w.cssOnly||(this._setBackstoreDimension(k,g[k]),S+="px",this.hasLostContext=!0),w.backstoreOnly||this._setCssDimension(k,S);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),w.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,w){return this.lowerCanvasEl[g]=w,this.upperCanvasEl&&(this.upperCanvasEl[g]=w),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=w),this[g]=w,this},_setCssDimension:function(g,w){return this.lowerCanvasEl.style[g]=w,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=w),this.wrapperEl&&(this.wrapperEl.style[g]=w),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var w=this._activeObject,S=this.backgroundImage,k=this.overlayImage,j,M,N;for(this.viewportTransform=g,M=0,N=this._objects.length;M<N;M++)j=this._objects[M],j.group||j.setCoords(!0);return w&&w.setCoords(),S&&S.setCoords(!0),k&&k.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,w){var S=g,k=this.viewportTransform.slice(0);g=a(g,l(this.viewportTransform)),k[0]=w,k[3]=w;var j=a(g,k);return k[4]+=S.x-j.x,k[5]+=S.y-j.y,this.setViewportTransform(k)},setZoom:function(g){return this.zoomToPoint(new e.Point(0,0),g),this},absolutePan:function(g){var w=this.viewportTransform.slice(0);return w[4]=-g.x,w[5]=-g.y,this.setViewportTransform(w)},relativePan:function(g){return this.absolutePan(new e.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},w=this.width,S=this.height,k=l(this.viewportTransform);return g.tl=a({x:0,y:0},k),g.br=a({x:w,y:S},k),g.tr=new e.Point(g.br.x,g.tl.y),g.bl=new e.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,w){var S=this.viewportTransform,k=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),e.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._renderObjects(g,w),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),k&&(k.canvas=this,k.shouldCache(),k._transformDone=!0,k.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var w=this.viewportTransform,S=this.clipPath;g.save(),g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.globalCompositeOperation="destination-in",S.transform(g),g.scale(1/S.zoomX,1/S.zoomY),g.drawImage(S._cacheCanvas,-S.cacheTranslationX,-S.cacheTranslationY),g.restore()},_renderObjects:function(g,w){var S,k;for(S=0,k=w.length;S<k;++S)w[S]&&w[S].render(g)},_renderBackgroundOrOverlay:function(g,w){var S=this[w+"Color"],k=this[w+"Image"],j=this.viewportTransform,M=this[w+"Vpt"];if(!(!S&&!k)){if(S){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=S.toLive?S.toLive(g,this):S,M&&g.transform(j[0],j[1],j[2],j[3],j[4],j[5]),g.transform(1,0,0,1,S.offsetX||0,S.offsetY||0);var N=S.gradientTransform||S.patternTransform;N&&g.transform(N[0],N[1],N[2],N[3],N[4],N[5]),g.fill(),g.restore()}k&&(g.save(),M&&g.transform(j[0],j[1],j[2],j[3],j[4],j[5]),k.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new e.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new e.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var w=this.getCenterPoint();return this._centerObject(g,w)},viewportCenterObject:function(g){var w=this.getVpCenter();return this._centerObject(g,w)},viewportCenterObjectH:function(g){var w=this.getVpCenter();return this._centerObject(g,new e.Point(w.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var w=this.getVpCenter();return this._centerObject(g,new e.Point(g.getCenterPoint().x,w.y))},getVpCenter:function(){var g=this.getCenterPoint(),w=l(this.viewportTransform);return a(g,w)},_centerObject:function(g,w){return g.setPositionByOrigin(w,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,w){var S=this.clipPath,k={version:e.version,objects:this._toObjects(g,w)};return S&&!S.excludeFromExport&&(k.clipPath=this._toObject(this.clipPath,g,w)),f(k,this.__serializeBgOverlay(g,w)),e.util.populateWithProperties(this,k,w),k},_toObjects:function(g,w){return this._objects.filter(function(S){return!S.excludeFromExport}).map(function(S){return this._toObject(S,g,w)},this)},_toObject:function(g,w,S){var k;this.includeDefaultValues||(k=g.includeDefaultValues,g.includeDefaultValues=!1);var j=g[w](S);return this.includeDefaultValues||(g.includeDefaultValues=k),j},__serializeBgOverlay:function(g,w){var S={},k=this.backgroundImage,j=this.overlayImage,M=this.backgroundColor,N=this.overlayColor;return M&&M.toObject?M.excludeFromExport||(S.background=M.toObject(w)):M&&(S.background=M),N&&N.toObject?N.excludeFromExport||(S.overlay=N.toObject(w)):N&&(S.overlay=N),k&&!k.excludeFromExport&&(S.backgroundImage=this._toObject(k,g,w)),j&&!j.excludeFromExport&&(S.overlayImage=this._toObject(j,g,w)),S},svgViewportTransformation:!0,toSVG:function(g,w){g||(g={}),g.reviver=w;var S=[];return this._setSVGPreamble(S,g),this._setSVGHeader(S,g),this.clipPath&&S.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(S,"background"),this._setSVGBgOverlayImage(S,"backgroundImage",w),this._setSVGObjects(S,w),this.clipPath&&S.push(`</g>
`),this._setSVGBgOverlayColor(S,"overlay"),this._setSVGBgOverlayImage(S,"overlayImage",w),S.push("</svg>"),S.join("")},_setSVGPreamble:function(g,w){w.suppressPreamble||g.push('<?xml version="1.0" encoding="',w.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,w){var S=w.width||this.width,k=w.height||this.height,j,M='viewBox="0 0 '+this.width+" "+this.height+'" ',N=e.Object.NUM_FRACTION_DIGITS;w.viewBox?M='viewBox="'+w.viewBox.x+" "+w.viewBox.y+" "+w.viewBox.width+" "+w.viewBox.height+'" ':this.svgViewportTransformation&&(j=this.viewportTransform,M='viewBox="'+d(-j[4]/j[0],N)+" "+d(-j[5]/j[3],N)+" "+d(this.width/j[0],N)+" "+d(this.height/j[3],N)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',S,'" ','height="',k,'" ',M,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(w),`</defs>
`)},createSVGClipPathMarkup:function(g){var w=this.clipPath;return w?(w.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+w.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,w=["background","overlay"].map(function(S){var k=g[S+"Color"];if(k&&k.toLive){var j=g[S+"Vpt"],M=g.viewportTransform,N={width:g.width/(j?M[0]:1),height:g.height/(j?M[3]:1)};return k.toSVG(N,{additionalTransform:j?e.util.matrixToSVG(M):""})}});return w.join("")},createSVGFontFacesMarkup:function(){var g="",w={},S,k,j,M,N,D,A,B,Y,oe=e.fontPaths,Z=[];for(this._objects.forEach(function te(G){Z.push(G),G._objects&&G._objects.forEach(te)}),B=0,Y=Z.length;B<Y;B++)if(S=Z[B],k=S.fontFamily,!(S.type.indexOf("text")===-1||w[k]||!oe[k])&&(w[k]=!0,!!S.styles)){j=S.styles;for(N in j){M=j[N];for(A in M)D=M[A],k=D.fontFamily,!w[k]&&oe[k]&&(w[k]=!0)}}for(var ae in w)g+=[`		@font-face {
`,"			font-family: '",ae,`';
`,"			src: url('",oe[ae],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,w){var S,k,j,M=this._objects;for(k=0,j=M.length;k<j;k++)S=M[k],!S.excludeFromExport&&this._setSVGObject(g,S,w)},_setSVGObject:function(g,w,S){g.push(w.toSVG(S))},_setSVGBgOverlayImage:function(g,w,S){this[w]&&!this[w].excludeFromExport&&this[w].toSVG&&g.push(this[w].toSVG(S))},_setSVGBgOverlayColor:function(g,w){var S=this[w+"Color"],k=this.viewportTransform,j=this.width,M=this.height;if(S)if(S.toLive){var N=S.repeat,D=e.util.invertTransform(k),A=this[w+"Vpt"],B=A?e.util.matrixToSVG(D):"";g.push('<rect transform="'+B+" translate(",j/2,",",M/2,')"',' x="',S.offsetX-j/2,'" y="',S.offsetY-M/2,'" ','width="',N==="repeat-y"||N==="no-repeat"?S.source.width:j,'" height="',N==="repeat-x"||N==="no-repeat"?S.source.height:M,'" fill="url(#SVGID_'+S.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',S,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var w=this._activeObject,S,k,j;if(g===w&&g.type==="activeSelection")for(j=w._objects,S=j.length;S--;)k=j[S],h(this._objects,k),this._objects.unshift(k);else h(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var w=this._activeObject,S,k,j;if(g===w&&g.type==="activeSelection")for(j=w._objects,S=0;S<j.length;S++)k=j[S],h(this._objects,k),this._objects.push(k);else h(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,w){if(!g)return this;var S=this._activeObject,k,j,M,N,D,A=0;if(g===S&&g.type==="activeSelection")for(D=S._objects,k=0;k<D.length;k++)j=D[k],M=this._objects.indexOf(j),M>0+A&&(N=M-1,h(this._objects,j),this._objects.splice(N,0,j)),A++;else M=this._objects.indexOf(g),M!==0&&(N=this._findNewLowerIndex(g,M,w),h(this._objects,g),this._objects.splice(N,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,w,S){var k,j;if(S)for(k=w,j=w-1;j>=0;--j){var M=g.intersectsWithObject(this._objects[j])||g.isContainedWithinObject(this._objects[j])||this._objects[j].isContainedWithinObject(g);if(M){k=j;break}}else k=w-1;return k},bringForward:function(g,w){if(!g)return this;var S=this._activeObject,k,j,M,N,D,A=0;if(g===S&&g.type==="activeSelection")for(D=S._objects,k=D.length;k--;)j=D[k],M=this._objects.indexOf(j),M<this._objects.length-1-A&&(N=M+1,h(this._objects,j),this._objects.splice(N,0,j)),A++;else M=this._objects.indexOf(g),M!==this._objects.length-1&&(N=this._findNewUpperIndex(g,M,w),h(this._objects,g),this._objects.splice(N,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,w,S){var k,j,M;if(S)for(k=w,j=w+1,M=this._objects.length;j<M;++j){var N=g.intersectsWithObject(this._objects[j])||g.isContainedWithinObject(this._objects[j])||this._objects[j].isContainedWithinObject(g);if(N){k=j;break}}else k=w+1;return k},moveTo:function(g,w){return h(this._objects,g),this._objects.splice(w,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(e.StaticCanvas.prototype,e.Observable),f(e.StaticCanvas.prototype,e.Collection),f(e.StaticCanvas.prototype,e.DataURLExporter),f(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var w=m();if(!w||!w.getContext)return null;var S=w.getContext("2d");if(!S)return null;switch(g){case"setLineDash":return typeof S.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var g=c(this.lowerCanvasEl);return g&&g.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(g){var w=c(this.lowerCanvasEl);return w&&w.createJPEGStream(g)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var s=this.canvas.viewportTransform;f.save(),f.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,s=this.shadow,h=f.contextTop,d=f.getZoom();f&&f._isRetinaScaling()&&(d*=e.devicePixelRatio),h.shadowColor=s.color,h.shadowBlur=s.blur*d,h.shadowOffsetX=s.offsetX*d,h.shadowOffsetY=s.offsetY*d}},needsFullRender:function(){var f=new e.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,s,h){var d=s.midPointFrom(h);return f.quadraticCurveTo(s.x,s.y,d.x,d.y),d},onMouseDown:function(f,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,d=h.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,h[d-2],h[d-1],!0),a.stroke(),a.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var s=new e.Point(f.x,f.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var s=new e.Point(f.x,f.y);return this._addPoint(s)},_render:function(f){var s,h,d=this._points[0],a=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&d.x===a.x&&d.y===a.y){var l=this.width/1e3;d=new e.Point(d.x,d.y),a=new e.Point(a.x,a.y),d.x-=l,a.x+=l}for(f.moveTo(d.x,d.y),s=1,h=this._points.length;s<h;s++)this._drawSegment(f,d,a),d=this._points[s],a=this._points[s+1];f.lineTo(d.x,d.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(f,s)},_isEmptySVGPath:function(f){var s=e.util.joinPath(f);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var s=new e.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(f,s){if(f.length<=2)return f;var h=this.canvas.getZoom(),d=Math.pow(s/h,2),a,l=f.length-1,c=f[0],m=[c],y;for(a=1;a<l-1;a++)y=Math.pow(c.x-f[a].x,2)+Math.pow(c.y-f[a].y,2),y>=d&&(c=f[a],m.push(c));return m.push(f[l]),m},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var h=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var s=this.addPoint(f),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,s),h.restore()},dot:function(f,s){f.fillStyle=s.fill,f.beginPath(),f.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,s,h,d=this.points;for(this._saveAndTransform(f),s=0,h=d.length;s<h;s++)this.dot(f,d[s]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,s,h;this.canvas.renderOnAddRemove=!1;var d=[];for(s=0,h=this.points.length;s<h;s++){var a=this.points[s],l=new e.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(l.shadow=new e.Shadow(this.shadow)),d.push(l)}var c=new e.Group(d);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var s=new e.Point(f.x,f.y),h=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=h,s.fill=d,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],h=0,d=this.sprayChunks.length;h<d;h++)for(var a=this.sprayChunks[h],l=0,c=a.length;l<c;l++){var m=new e.Rect({width:a[l].width,height:a[l].width,left:a[l].x+1,top:a[l].y+1,originX:"center",originY:"center",fill:this.color});s.push(m)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var y=new e.Group(s);this.shadow&&y.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.fire("path:created",{path:y}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var s={},h,d,a;for(d=0,a=f.length;d<a;d++)h=f[d].left+""+f[d].top,s[h]||(s[h]=f[d]);var l=[];for(h in s)l.push(s[h]);return l},render:function(f){var s=this.canvas.contextTop,h,d;for(s.fillStyle=this.color,this._saveAndTransform(s),h=0,d=f.length;h<d;h++){var a=f[h];typeof a.opacity<"u"&&(s.globalAlpha=a.opacity),s.fillRect(a.x,a.y,a.width,a.width)}s.restore()},_render:function(){var f=this.canvas.contextTop,s,h;for(f.fillStyle=this.color,this._saveAndTransform(f),s=0,h=this.sprayChunks.length;s<h;s++)this.render(this.sprayChunks[s]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var s,h,d,a=this.width/2,l;for(l=0;l<this.density;l++){s=e.util.getRandomInt(f.x-a,f.x+a),h=e.util.getRandomInt(f.y-a,f.y+a),this.dotWidthVariance?d=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):d=this.dotWidth;var c=new e.Point(s,h);c.width=d,this.randomOpacity&&(c.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var f=20,s=5,h=e.util.createCanvasElement(),d=h.getContext("2d");return h.width=h.height=f+s,d.fillStyle=this.color,d.beginPath(),d.arc(f/2,f/2,f/2,0,Math.PI*2,!1),d.closePath(),d.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var s=this.callSuper("createPath",f),h=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),s}}),function(){var f=e.util.getPointer,s=e.util.degreesToRadians,h=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(a,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),l,c,m;if(a.length>0&&!this.preserveObjectStacking){c=[],m=[];for(var y=0,g=this._objects.length;y<g;y++)l=this._objects[y],a.indexOf(l)===-1?c.push(l):m.push(l);a.length>1&&(this._activeObject._objects=m),c.push.apply(c,m)}else c=this._objects;return c},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,l){var c=a.calcTransformMatrix(),m=e.util.invertTransform(c),y=this.restorePointerVpt(l);return e.util.transformPoint(y,m)},isTargetTransparent:function(a,l,c){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var m=this._normalizePointer(a,{x:l,y:c}),y=Math.max(a.cacheTranslationX+m.x*a.zoomX,0),g=Math.max(a.cacheTranslationY+m.y*a.zoomY,0),j=e.util.isTransparent(a._cacheContext,Math.round(y),Math.round(g),this.targetFindTolerance);return j}var w=this.contextCache,S=a.selectionBackgroundColor,k=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(w),w.save(),w.transform(k[0],k[1],k[2],k[3],k[4],k[5]),a.render(w),w.restore(),a.selectionBackgroundColor=S;var j=e.util.isTransparent(w,l,c,this.targetFindTolerance);return j},_isSelectionKeyPressed:function(a){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(c){return a[c]===!0}):l=a[this.selectionKey],l},_shouldClearSelection:function(a,l){var c=this.getActiveObjects(),m=this._activeObject;return!l||l&&m&&c.length>1&&c.indexOf(l)===-1&&m!==l&&!this._isSelectionKeyPressed(a)||l&&!l.evented||l&&!l.selectable&&m&&m!==l},_shouldCenterTransform:function(a,l,c){if(a){var m;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?m=this.centeredScaling||a.centeredScaling:l==="rotate"&&(m=this.centeredRotation||a.centeredRotation),m?!c:c}},_getOriginFromCorner:function(a,l){var c={x:a.originX,y:a.originY};return l==="ml"||l==="tl"||l==="bl"?c.x="right":(l==="mr"||l==="tr"||l==="br")&&(c.x="left"),l==="tl"||l==="mt"||l==="tr"?c.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(c.y="top"),c},_getActionFromCorner:function(a,l,c,m){if(!l||!a)return"drag";var y=m.controls[l];return y.getActionName(c,y,m)},_setupCurrentTransform:function(a,l,c){if(l){var m=this.getPointer(a),y=l.__corner,g=l.controls[y],w=c&&y?g.getActionHandler(a,l,g):e.controlsUtils.dragHandler,S=this._getActionFromCorner(c,y,a,l),k=this._getOriginFromCorner(l,y),j=a[this.centeredKey],M={target:l,action:S,actionHandler:w,corner:y,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:m.x-l.left,offsetY:m.y-l.top,originX:k.x,originY:k.y,ex:m.x,ey:m.y,lastX:m.x,lastY:m.y,theta:s(l.angle),width:l.width*l.scaleX,shiftKey:a.shiftKey,altKey:j,original:e.util.saveObjectTransform(l)};this._shouldCenterTransform(l,S,j)&&(M.originX="center",M.originY="center"),M.original.originX=k.x,M.original.originY=k.y,this._currentTransform=M,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var l=this._groupSelector,c=new e.Point(l.ex,l.ey),m=e.util.transformPoint(c,this.viewportTransform),y=new e.Point(l.ex+l.left,l.ey+l.top),g=e.util.transformPoint(y,this.viewportTransform),w=Math.min(m.x,g.x),S=Math.min(m.y,g.y),k=Math.max(m.x,g.x),j=Math.max(m.y,g.y),M=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(w,S,k-w,j-S)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,w+=M,S+=M,k-=M,j-=M,e.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(w,S,k-w,j-S))},findTarget:function(a,l){if(!this.skipTargetFind){var c=!0,m=this.getPointer(a,c),y=this._activeObject,g=this.getActiveObjects(),w,S,k=h(a),j=g.length>1&&!l||g.length===1;if(this.targets=[],j&&y._findTargetCorner(m,k)||g.length>1&&!l&&y===this._searchPossibleTargets([y],m))return y;if(g.length===1&&y===this._searchPossibleTargets([y],m))if(this.preserveObjectStacking)w=y,S=this.targets,this.targets=[];else return y;var M=this._searchPossibleTargets(this._objects,m);return a[this.altSelectionKey]&&M&&w&&M!==w&&(M=w,this.targets=S),M}},_checkTarget:function(a,l,c){if(l&&l.visible&&l.evented&&l.containsPoint(a))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var m=this.isTargetTransparent(l,c.x,c.y);if(!m)return!0}else return!0},_searchPossibleTargets:function(a,l){for(var c,m=a.length,y;m--;){var g=a[m],w=g.group?this._normalizePointer(g.group,l):l;if(this._checkTarget(w,g,l)){c=a[m],c.subTargetCheck&&c instanceof e.Group&&(y=this._searchPossibleTargets(c._objects,l),y&&this.targets.push(y));break}}return c},restorePointerVpt:function(a){return e.util.transformPoint(a,e.util.invertTransform(this.viewportTransform))},getPointer:function(a,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var c=f(a),m=this.upperCanvasEl,y=m.getBoundingClientRect(),g=y.width||0,w=y.height||0,S;(!g||!w)&&("top"in y&&"bottom"in y&&(w=Math.abs(y.top-y.bottom)),"right"in y&&"left"in y&&(g=Math.abs(y.right-y.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,l||(c=this.restorePointerVpt(c));var k=this.getRetinaScaling();return k!==1&&(c.x/=k,c.y/=k),g===0||w===0?S={width:1,height:1}:S={width:m.width/g,height:m.height/w},{x:c.x*S.width,y:c.y*S.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),e.util.addClass(c,"upper-canvas "+a),this.wrapperEl.appendChild(c),this._copyCanvasStyle(l,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var l=this.width||a.width,c=this.height||a.height;e.util.setStyle(a,{position:"absolute",width:l+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=l,a.height=c,e.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,l){l.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,l){var c=!1,m=this.getActiveObjects(),y=[],g=[];a.forEach(function(w){m.indexOf(w)===-1&&(c=!0,w.fire("deselected",{e:l,target:w}),g.push(w))}),m.forEach(function(w){a.indexOf(w)===-1&&(c=!0,w.fire("selected",{e:l,target:w}),y.push(w))}),a.length>0&&m.length>0?c&&this.fire("selection:updated",{e:l,selected:y,deselected:g}):m.length>0?this.fire("selection:created",{e:l,selected:y}):a.length>0&&this.fire("selection:cleared",{e:l,deselected:g})},setActiveObject:function(a,l){var c=this.getActiveObjects();return this._setActiveObject(a,l),this._fireSelectionEvents(c,l),this},_setActiveObject:function(a,l){return this._activeObject===a||!this._discardActiveObject(l,a)||a.onSelect({e:l})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,l){var c=this._activeObject;if(c){if(c.onDeselect({e:a,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var l=this.getActiveObjects(),c=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:c,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(l,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var l=this._activeObject;l&&l._renderControls(a)},_toObject:function(a,l,c){var m=this._realizeGroupTransformOnObject(a),y=this.callSuper("_toObject",a,l,c);return this._unwindGroupTransformOnObject(a,m),y},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],c={};return l.forEach(function(m){c[m]=a[m]}),e.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),c}else return null},_unwindGroupTransformOnObject:function(a,l){l&&a.set(l)},_setSVGObject:function(a,l,c){var m=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",a,l,c),this._unwindGroupTransformOnObject(l,m)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var d in e.StaticCanvas)d!=="prototype"&&(e.Canvas[d]=e.StaticCanvas[d])}(),function(){var f=e.util.addListener,s=e.util.removeListener,h=3,d=2,a=1,l={passive:!1};function c(m,y){return m.button&&m.button===y-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(m,y){var g=this.upperCanvasEl,w=this._getEventPrefix();m(e.window,"resize",this._onResize),m(g,w+"down",this._onMouseDown),m(g,w+"move",this._onMouseMove,l),m(g,w+"out",this._onMouseOut),m(g,w+"enter",this._onMouseEnter),m(g,"wheel",this._onMouseWheel),m(g,"contextmenu",this._onContextMenu),m(g,"dblclick",this._onDoubleClick),m(g,"dragover",this._onDragOver),m(g,"dragenter",this._onDragEnter),m(g,"dragleave",this._onDragLeave),m(g,"drop",this._onDrop),this.enablePointerEvents||m(g,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&y in eventjs&&(eventjs[y](g,"gesture",this._onGesture),eventjs[y](g,"drag",this._onDrag),eventjs[y](g,"orientation",this._onOrientationChange),eventjs[y](g,"shake",this._onShake),eventjs[y](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var m=this._getEventPrefix();s(e.document,m+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,l),s(e.document,m+"move",this._onMouseMove,l),s(e.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(m,y){this.__onTransformGesture&&this.__onTransformGesture(m,y)},_onDrag:function(m,y){this.__onDrag&&this.__onDrag(m,y)},_onMouseWheel:function(m){this.__onMouseWheel(m)},_onMouseOut:function(m){var y=this._hoveredTarget;this.fire("mouse:out",{target:y,e:m}),this._hoveredTarget=null,y&&y.fire("mouseout",{e:m});var g=this;this._hoveredTargets.forEach(function(w){g.fire("mouse:out",{target:y,e:m}),w&&y.fire("mouseout",{e:m})}),this._hoveredTargets=[]},_onMouseEnter:function(m){!this._currentTransform&&!this.findTarget(m)&&(this.fire("mouse:over",{target:null,e:m}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(m,y){this.__onOrientationChange&&this.__onOrientationChange(m,y)},_onShake:function(m,y){this.__onShake&&this.__onShake(m,y)},_onLongPress:function(m,y){this.__onLongPress&&this.__onLongPress(m,y)},_onDragOver:function(m){m.preventDefault();var y=this._simpleEventHandler("dragover",m);this._fireEnterLeaveEvents(y,m)},_onDrop:function(m){return this._simpleEventHandler("drop:before",m),this._simpleEventHandler("drop",m)},_onContextMenu:function(m){return this.stopContextMenu&&(m.stopPropagation(),m.preventDefault()),!1},_onDoubleClick:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"dblclick"),this._resetTransformEventData(m)},getPointerId:function(m){var y=m.changedTouches;return y?y[0]&&y[0].identifier:this.enablePointerEvents?m.pointerId:-1},_isMainEvent:function(m){return m.isPrimary===!0?!0:m.isPrimary===!1?!1:m.type==="touchend"&&m.touches.length===0?!0:m.changedTouches?m.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(m){m.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(m)),this.__onMouseDown(m),this._resetTransformEventData();var y=this.upperCanvasEl,g=this._getEventPrefix();f(e.document,"touchend",this._onTouchEnd,l),f(e.document,"touchmove",this._onMouseMove,l),s(y,g+"down",this._onMouseDown)},_onMouseDown:function(m){this.__onMouseDown(m),this._resetTransformEventData();var y=this.upperCanvasEl,g=this._getEventPrefix();s(y,g+"move",this._onMouseMove,l),f(e.document,g+"up",this._onMouseUp),f(e.document,g+"move",this._onMouseMove,l)},_onTouchEnd:function(m){if(!(m.touches.length>0)){this.__onMouseUp(m),this._resetTransformEventData(),this.mainTouchId=null;var y=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,l),s(e.document,"touchmove",this._onMouseMove,l);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(g.upperCanvasEl,y+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(m){this.__onMouseUp(m),this._resetTransformEventData();var y=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(m)&&(s(e.document,g+"up",this._onMouseUp),s(e.document,g+"move",this._onMouseMove,l),f(y,g+"move",this._onMouseMove,l))},_onMouseMove:function(m){!this.allowTouchScrolling&&m.preventDefault&&m.preventDefault(),this.__onMouseMove(m)},_onResize:function(){this.calcOffset()},_shouldRender:function(m){var y=this._activeObject;return!!y!=!!m||y&&m&&y!==m?!0:(y&&y.isEditing,!1)},__onMouseUp:function(m){var y,g=this._currentTransform,w=this._groupSelector,S=!1,k=!w||w.left===0&&w.top===0;if(this._cacheTransformEventData(m),y=this._target,this._handleEvent(m,"up:before"),c(m,h)){this.fireRightClick&&this._handleEvent(m,"up",h,k);return}if(c(m,d)){this.fireMiddleClick&&this._handleEvent(m,"up",d,k),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(m);return}if(this._isMainEvent(m)){if(g&&(this._finalizeCurrentTransform(m),S=g.actionPerformed),!k){var j=y===this._activeObject;this._maybeGroupObjects(m),S||(S=this._shouldRender(y)||!j&&y===this._activeObject)}var M,N;if(y){if(M=y._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m)),y.selectable&&y!==this._activeObject&&y.activeOn==="up")this.setActiveObject(y,m),S=!0;else{var D=y.controls[M],A=D&&D.getMouseUpHandler(m,y,D);A&&(N=this.getPointer(m),A(m,g,N.x,N.y))}y.isMoving=!1}if(g&&(g.target!==y||g.corner!==M)){var B=g.target&&g.target.controls[g.corner],Y=B&&B.getMouseUpHandler(m,y,D);N=N||this.getPointer(m),Y&&Y(m,g,N.x,N.y)}this._setCursorFromEvent(m,y),this._handleEvent(m,"up",a,k),this._groupSelector=null,this._currentTransform=null,y&&(y.__corner=0),S?this.requestRenderAll():k||this.renderTop()}},_simpleEventHandler:function(m,y){var g=this.findTarget(y),w=this.targets,S={e:y,target:g,subTargets:w};if(this.fire(m,S),g&&g.fire(m,S),!w)return g;for(var k=0;k<w.length;k++)w[k].fire(m,S);return g},_handleEvent:function(m,y,g,w){var S=this._target,k=this.targets||[],j={e:m,target:S,subTargets:k,button:g||a,isClick:w||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};y==="up"&&(j.currentTarget=this.findTarget(m),j.currentSubTargets=this.targets),this.fire("mouse:"+y,j),S&&S.fire("mouse"+y,j);for(var M=0;M<k.length;M++)k[M].fire("mouse"+y,j)},_finalizeCurrentTransform:function(m){var y=this._currentTransform,g=y.target,w={e:m,target:g,transform:y,action:y.action};g._scaling&&(g._scaling=!1),g.setCoords(),(y.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",w)},_onMouseDownInDrawingMode:function(m){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(m).requestRenderAll();var y=this.getPointer(m);this.freeDrawingBrush.onMouseDown(y,{e:m,pointer:y}),this._handleEvent(m,"down")},_onMouseMoveInDrawingMode:function(m){if(this._isCurrentlyDrawing){var y=this.getPointer(m);this.freeDrawingBrush.onMouseMove(y,{e:m,pointer:y})}this.setCursor(this.freeDrawingCursor),this._handleEvent(m,"move")},_onMouseUpInDrawingMode:function(m){var y=this.getPointer(m);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:m,pointer:y}),this._handleEvent(m,"up")},__onMouseDown:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"down:before");var y=this._target;if(c(m,h)){this.fireRightClick&&this._handleEvent(m,"down",h);return}if(c(m,d)){this.fireMiddleClick&&this._handleEvent(m,"down",d);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(m);return}if(this._isMainEvent(m)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var w=this._shouldRender(y),S=this._shouldGroup(m,y);if(this._shouldClearSelection(m,y)?this.discardActiveObject(m):S&&(this._handleGrouping(m,y),y=this._activeObject),this.selection&&(!y||!y.selectable&&!y.isEditing&&y!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),y){var k=y===this._activeObject;y.selectable&&y.activeOn==="down"&&this.setActiveObject(y,m);var j=y._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m));if(y.__corner=j,y===this._activeObject&&(j||!S)){this._setupCurrentTransform(m,y,k);var M=y.controls[j],g=this.getPointer(m),N=M&&M.getMouseDownHandler(m,y,M);N&&N(m,this._currentTransform,g.x,g.y)}}this._handleEvent(m,"down"),(w||S)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(m){this._resetTransformEventData(),this._pointer=this.getPointer(m,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(m)||null},_beforeTransform:function(m){var y=this._currentTransform;this.stateful&&y.target.saveState(),this.fire("before:transform",{e:m,transform:y})},__onMouseMove:function(m){this._handleEvent(m,"move:before"),this._cacheTransformEventData(m);var y,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(m);return}if(this._isMainEvent(m)){var w=this._groupSelector;w?(g=this._absolutePointer,w.left=g.x-w.ex,w.top=g.y-w.ey,this.renderTop()):this._currentTransform?this._transformObject(m):(y=this.findTarget(m)||null,this._setCursorFromEvent(m,y),this._fireOverOutEvents(y,m)),this._handleEvent(m,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(m,y){var g=this._hoveredTarget,w=this._hoveredTargets,S=this.targets,k=Math.max(w.length,S.length);this.fireSyntheticInOutEvents(m,y,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var j=0;j<k;j++)this.fireSyntheticInOutEvents(S[j],y,{oldTarget:w[j],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=m,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(m,y){var g=this._draggedoverTarget,w=this._hoveredTargets,S=this.targets,k=Math.max(w.length,S.length);this.fireSyntheticInOutEvents(m,y,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var j=0;j<k;j++)this.fireSyntheticInOutEvents(S[j],y,{oldTarget:w[j],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=m},fireSyntheticInOutEvents:function(m,y,g){var w,S,k=g.oldTarget,j,M,N=k!==m,D=g.canvasEvtIn,A=g.canvasEvtOut;N&&(w={e:y,target:m,previousTarget:k},S={e:y,target:k,nextTarget:m}),M=m&&N,j=k&&N,j&&(A&&this.fire(A,S),k.fire(g.evtOut,S)),M&&(D&&this.fire(D,w),m.fire(g.evtIn,w))},__onMouseWheel:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"wheel"),this._resetTransformEventData()},_transformObject:function(m){var y=this.getPointer(m),g=this._currentTransform;g.reset=!1,g.shiftKey=m.shiftKey,g.altKey=m[this.centeredKey],this._performTransformAction(m,g,y),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(m,y,g){var w=g.x,S=g.y,k=y.action,j=!1,M=y.actionHandler;M&&(j=M(m,y,w,S)),k==="drag"&&j&&(y.target.isMoving=!0,this.setCursor(y.target.moveCursor||this.moveCursor)),y.actionPerformed=y.actionPerformed||j},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(m,y){if(!y)return this.setCursor(this.defaultCursor),!1;var g=y.hoverCursor||this.hoverCursor,w=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,S=(!w||!w.contains(y))&&y._findTargetCorner(this.getPointer(m,!0));S?this.setCursor(this.getCornerCursor(S,y,m)):(y.subTargetCheck&&this.targets.concat().reverse().map(function(k){g=k.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(m,y,g){var w=y.controls[m];return w.cursorStyleHandler(g,w,y)}})}(),function(){var f=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(h,d){var a=this._activeObject;return a&&this._isSelectionKeyPressed(h)&&d&&d.selectable&&this.selection&&(a!==d||a.type==="activeSelection")&&!d.onSelect({e:h})},_handleGrouping:function(h,d){var a=this._activeObject;a.__corner||d===a&&(d=this.findTarget(h,!0),!d||!d.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(d,h):this._createActiveSelection(d,h))},_updateActiveSelection:function(h,d){var a=this._activeObject,l=a._objects.slice(0);a.contains(h)?(a.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),d)):(a.addWithUpdate(h),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,d)},_createActiveSelection:function(h,d){var a=this.getActiveObjects(),l=this._createGroup(h);this._hoveredTarget=l,this._setActiveObject(l,d),this._fireSelectionEvents(a,d)},_createGroup:function(h){var d=this._objects,a=d.indexOf(this._activeObject)<d.indexOf(h),l=a?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(h){var d=this._collectObjects(h),a;d.length===1?this.setActiveObject(d[0],h):d.length>1&&(a=new e.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(a,h))},_collectObjects:function(h){for(var d=[],a,l=this._groupSelector.ex,c=this._groupSelector.ey,m=l+this._groupSelector.left,y=c+this._groupSelector.top,g=new e.Point(f(l,m),f(c,y)),w=new e.Point(s(l,m),s(c,y)),S=!this.selectionFullyContained,k=l===m&&c===y,j=this._objects.length;j--&&(a=this._objects[j],!(!(!a||!a.selectable||!a.visible)&&(S&&a.intersectsWithRect(g,w,!0)||a.isContainedWithinRect(g,w,!0)||S&&a.containsPoint(g,null,!0)||S&&a.containsPoint(w,null,!0))&&(d.push(a),k))););return d.length>1&&(d=d.filter(function(M){return!M.onSelect({e:h})})),d},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var s=f.format||"png",h=f.quality||1,d=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(d,f);return e.util.toDataURL(a,s,h)},toCanvasElement:function(f,s){f=f||1,s=s||{};var h=(s.width||this.width)*f,d=(s.height||this.height)*f,a=this.getZoom(),l=this.width,c=this.height,m=a*f,y=this.viewportTransform,g=(y[4]-(s.left||0))*f,w=(y[5]-(s.top||0))*f,S=this.interactive,k=[m,0,0,m,g,w],j=this.enableRetinaScaling,M=e.util.createCanvasElement(),N=this.contextTop;return M.width=h,M.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=k,this.width=h,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(M.getContext("2d"),this._objects),this.viewportTransform=y,this.width=l,this.height=c,this.calcViewportBoundaries(),this.interactive=S,this.enableRetinaScaling=j,this.contextTop=N,M}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(f,s,h){if(f){var d=typeof f=="string"?JSON.parse(f):e.util.object.clone(f),a=this,l=d.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(m){a.clear(),a._setBgOverlay(d,function(){l?a._enlivenObjects([l],function(y){a.clipPath=y[0],a.__setupCanvas.call(a,d,m,c,s)}):a.__setupCanvas.call(a,d,m,c,s)})},h),this}},__setupCanvas:function(f,s,h,d){var a=this;s.forEach(function(l,c){a.insertAt(l,c)}),this.renderOnAddRemove=h,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),d&&d()},_setBgOverlay:function(f,s){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){s&&s();return}var d=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",f.backgroundImage,h,d),this.__setBgOverlay("overlayImage",f.overlayImage,h,d),this.__setBgOverlay("backgroundColor",f.background,h,d),this.__setBgOverlay("overlayColor",f.overlay,h,d)},__setBgOverlay:function(f,s,h,d){var a=this;if(!s){h[f]=!0,d&&d();return}f==="backgroundImage"||f==="overlayImage"?e.util.enlivenObjects([s],function(l){a[f]=l[0],h[f]=!0,d&&d()}):this["set"+e.util.string.capitalize(f,!0)](s,function(){h[f]=!0,d&&d()})},_enlivenObjects:function(f,s,h){if(!f||f.length===0){s&&s([]);return}e.util.enlivenObjects(f,function(d){s&&s(d)},null,h)},_toDataURL:function(f,s){this.clone(function(h){s(h.toDataURL(f))})},_toDataURLWithMultiplier:function(f,s,h){this.clone(function(d){h(d.toDataURLWithMultiplier(f,s))})},clone:function(f,s){var h=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(d){d.loadFromJSON(h,function(){f&&f(d)})})},cloneWithoutData:function(f){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var h=new e.Canvas(s);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),f&&f(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):f&&f(h)}}),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.util.object.clone,a=s.util.toFixed,l=s.util.string.capitalize,c=s.util.degreesToRadians,m=!s.isLikelyNode,y=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:m,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var w=s.perfLimitSizeTotal,S=g.width,k=g.height,j=s.maxCacheSideLimit,M=s.minCacheSideLimit;if(S<=j&&k<=j&&S*k<=w)return S<M&&(g.width=M),k<M&&(g.height=M),g;var N=S/k,D=s.util.limitDimsByArea(N,w),A=s.util.capValue,B=A(M,D.x,j),Y=A(M,D.y,j);return S>B&&(g.zoomX/=S/B,g.width=B,g.capped=!0),k>Y&&(g.zoomY/=k/Y,g.height=Y,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),w=this._getTransformedDimensions(0,0),S=w.x*g.scaleX/this.scaleX,k=w.y*g.scaleY/this.scaleY;return{width:S+y,height:k+y,zoomX:g.scaleX,zoomY:g.scaleY,x:S,y:k}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var w=g._currentTransform.target,S=g._currentTransform.action;if(this===w&&S.slice&&S.slice(0,5)==="scale")return!1}var k=this._cacheCanvas,j=this._limitCacheSize(this._getCacheCanvasDimensions()),M=s.minCacheSideLimit,N=j.width,D=j.height,A,B,Y=j.zoomX,oe=j.zoomY,Z=N!==this.cacheWidth||D!==this.cacheHeight,ae=this.zoomX!==Y||this.zoomY!==oe,te=Z||ae,G=0,z=0,q=!1;if(Z){var X=this._cacheCanvas.width,R=this._cacheCanvas.height,O=N>X||D>R,L=(N<X*.9||D<R*.9)&&X>M&&R>M;q=O||L,O&&!j.capped&&(N>M||D>M)&&(G=N*.1,z=D*.1)}return this instanceof s.Text&&this.path&&(te=!0,q=!0,G+=this.getHeightOfLine(0)*this.zoomX,z+=this.getHeightOfLine(0)*this.zoomY),te?(q?(k.width=Math.ceil(N+G),k.height=Math.ceil(D+z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,k.width,k.height)),A=j.x/2,B=j.y/2,this.cacheTranslationX=Math.round(k.width/2-A)+A,this.cacheTranslationY=Math.round(k.height/2-B)+B,this.cacheWidth=N,this.cacheHeight=D,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(Y,oe),this.zoomX=Y,this.zoomY=oe,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var w=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,S=this.calcTransformMatrix(!w);g.transform(S[0],S[1],S[2],S[3],S[4],S[5])},toObject:function(g){var w=s.Object.NUM_FRACTION_DIGITS,S={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:a(this.left,w),top:a(this.top,w),width:a(this.width,w),height:a(this.height,w),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,w),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,w),scaleX:a(this.scaleX,w),scaleY:a(this.scaleY,w),angle:a(this.angle,w),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,w),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,w),skewY:a(this.skewY,w)};return this.clipPath&&!this.clipPath.excludeFromExport&&(S.clipPath=this.clipPath.toObject(g),S.clipPath.inverted=this.clipPath.inverted,S.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,S,g),this.includeDefaultValues||(S=this._removeDefaultValues(S)),S},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var w=s.util.getKlass(g.type).prototype,S=w.stateProperties;return S.forEach(function(k){k==="left"||k==="top"||(g[k]===w[k]&&delete g[k],Array.isArray(g[k])&&Array.isArray(w[k])&&g[k].length===0&&w[k].length===0&&delete g[k])}),g},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),w=g.scaleX,S=g.scaleY;if(this.canvas){var k=this.canvas.getZoom(),j=this.canvas.getRetinaScaling();w*=k*j,S*=k*j}return{scaleX:w,scaleY:S}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,w){var S=g==="scaleX"||g==="scaleY",k=this[g]!==w,j=!1;return S&&(w=this._constrainScale(w)),g==="scaleX"&&w<0?(this.flipX=!this.flipX,w*=-1):g==="scaleY"&&w<0?(this.flipY=!this.flipY,w*=-1):g==="shadow"&&w&&!(w instanceof s.Shadow)?w=new s.Shadow(w):g==="dirty"&&this.group&&this.group.set("dirty",w),this[g]=w,k&&(j=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,j&&this.group.set("dirty",!0)):j&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,w){if(g.save(),w.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",w.absolutePositioned){var S=s.util.invertTransform(this.calcTransformMatrix());g.transform(S[0],S[1],S[2],S[3],S[4],S[5])}w.transform(g),g.scale(1/w.zoomX,1/w.zoomY),g.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),g.restore()},drawObject:function(g,w){var S=this.fill,k=this.stroke;w?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=S,this.stroke=k},_drawClipPath:function(g,w){w&&(w.canvas=this.canvas,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,w))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var w=this.cacheWidth/this.zoomX,S=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-w/2,-S/2,w,S)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var w=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-w.x/2,-w.y/2,w.x,w.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,w){var S=w.stroke;S&&(g.lineWidth=w.strokeWidth,g.lineCap=w.strokeLineCap,g.lineDashOffset=w.strokeDashOffset,g.lineJoin=w.strokeLineJoin,g.miterLimit=w.strokeMiterLimit,S.toLive?S.gradientUnits==="percentage"||S.gradientTransform||S.patternTransform?this._applyPatternForTransformedGradient(g,S):(g.strokeStyle=S.toLive(g,this),this._applyPatternGradientTransform(g,S)):g.strokeStyle=w.stroke)},_setFillStyles:function(g,w){var S=w.fill;S&&(S.toLive?(g.fillStyle=S.toLive(g,this),this._applyPatternGradientTransform(g,w.fill)):g.fillStyle=S)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,w){!w||w.length===0||(1&w.length&&w.push.apply(w,w),g.setLineDash(w))},_renderControls:function(g,w){var S=this.getViewportTransform(),k=this.calcTransformMatrix(),j,M,N;w=w||{},M=typeof w.hasBorders<"u"?w.hasBorders:this.hasBorders,N=typeof w.hasControls<"u"?w.hasControls:this.hasControls,k=s.util.multiplyTransformMatrices(S,k),j=s.util.qrDecompose(k),g.save(),g.translate(j.translateX,j.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(j.angle-=180),g.rotate(c(this.group?j.angle:this.angle)),w.forActiveSelection||this.group?M&&this.drawBordersInGroup(g,j,w):M&&this.drawBorders(g,w),N&&this.drawControls(g,w),g.restore()},_setShadow:function(g){if(this.shadow){var w=this.shadow,S=this.canvas,k,j=S&&S.viewportTransform[0]||1,M=S&&S.viewportTransform[3]||1;w.nonScaling?k={scaleX:1,scaleY:1}:k=this.getObjectScaling(),S&&S._isRetinaScaling()&&(j*=s.devicePixelRatio,M*=s.devicePixelRatio),g.shadowColor=w.color,g.shadowBlur=w.blur*s.browserShadowBlurConstant*(j+M)*(k.scaleX+k.scaleY)/4,g.shadowOffsetX=w.offsetX*j*k.scaleX,g.shadowOffsetY=w.offsetY*M*k.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,w){if(!w||!w.toLive)return{offsetX:0,offsetY:0};var S=w.gradientTransform||w.patternTransform,k=-this.width/2+w.offsetX||0,j=-this.height/2+w.offsetY||0;return w.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,k,j):g.transform(1,0,0,1,k,j),S&&g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),{offsetX:k,offsetY:j}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var w=this.getObjectScaling();g.scale(1/w.scaleX,1/w.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,w){var S=this._limitCacheSize(this._getCacheCanvasDimensions()),k=s.util.createCanvasElement(),j,M=this.canvas.getRetinaScaling(),N=S.x/this.scaleX/M,D=S.y/this.scaleY/M;k.width=N,k.height=D,j=k.getContext("2d"),j.beginPath(),j.moveTo(0,0),j.lineTo(N,0),j.lineTo(N,D),j.lineTo(0,D),j.closePath(),j.translate(N/2,D/2),j.scale(S.zoomX/this.scaleX/M,S.zoomY/this.scaleY/M),this._applyPatternGradientTransform(j,w),j.fillStyle=w.toLive(g),j.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(M*this.scaleX/S.zoomX,M*this.scaleY/S.zoomY),g.strokeStyle=j.createPattern(k,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var w=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),w=s.util.transformPoint(w,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,w.x+=g.offsetLeft,w.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(w,"center","center")},clone:function(g,w){var S=this.toObject(w);this.constructor.fromObject?this.constructor.fromObject(S,g):s.Object._fromObject("Object",S,g)},cloneAsImage:function(g,w){var S=this.toCanvasElement(w);return g&&g(new s.Image(S)),this},toCanvasElement:function(g){g||(g={});var w=s.util,S=w.saveObjectTransform(this),k=this.group,j=this.shadow,M=Math.abs,N=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&w.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var D=s.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),B=this.shadow,Y,oe={x:0,y:0},Z,ae,te;B&&(Z=B.blur,B.nonScaling?Y={scaleX:1,scaleY:1}:Y=this.getObjectScaling(),oe.x=2*Math.round(M(B.offsetX)+Z)*M(Y.scaleX),oe.y=2*Math.round(M(B.offsetY)+Z)*M(Y.scaleY)),ae=A.width+oe.x,te=A.height+oe.y,D.width=Math.ceil(ae),D.height=Math.ceil(te);var G=new s.StaticCanvas(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(G.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(G.width/2,G.height/2),"center","center");var z=this.canvas;G.add(this);var q=G.toCanvasElement(N||1,g);return this.shadow=j,this.set("canvas",z),k&&(this.group=k),this.set(S).setCoords(),G._objects=[],G.dispose(),G=null,q},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var w=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return w&&this._setOriginToCenter(),this.set("angle",g),w&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,w){w=w||this.canvas.getPointer(g);var S=new s.Point(w.x,w.y),k=this._getLeftTopCoords();return this.angle&&(S=s.util.rotatePoint(S,k,c(-this.angle))),{x:S.x-k.x,y:S.y-k.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),h(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,w,S,k){var j=s[g];w=d(w,!0),s.util.enlivenPatterns([w.fill,w.stroke],function(M){typeof M[0]<"u"&&(w.fill=M[0]),typeof M[1]<"u"&&(w.stroke=M[1]),s.util.enlivenObjectEnlivables(w,w,function(){var N=k?new j(w[k],w):new j(w);S&&S(N)})})},s.Object.__uid=0)}(t),function(){var f=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(d,a,l,c,m){var y=d.x,g=d.y,w,S,k;return typeof a=="string"?a=s[a]:a-=.5,typeof c=="string"?c=s[c]:c-=.5,w=c-a,typeof l=="string"?l=h[l]:l-=.5,typeof m=="string"?m=h[m]:m-=.5,S=m-l,(w||S)&&(k=this._getTransformedDimensions(),y=d.x+w*k.x,g=d.y+S*k.y),new e.Point(y,g)},translateToCenterPoint:function(d,a,l){var c=this.translateToGivenOrigin(d,a,l,"center","center");return this.angle?e.util.rotatePoint(c,d,f(this.angle)):c},translateToOriginPoint:function(d,a,l){var c=this.translateToGivenOrigin(d,"center","center",a,l);return this.angle?e.util.rotatePoint(c,d,f(this.angle)):c},getCenterPoint:function(){var d=new e.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,a){var l=this.getCenterPoint();return this.translateToOriginPoint(l,d,a)},toLocalPoint:function(d,a,l){var c=this.getCenterPoint(),m,y;return typeof a<"u"&&typeof l<"u"?m=this.translateToGivenOrigin(c,"center","center",a,l):m=new e.Point(this.left,this.top),y=new e.Point(d.x,d.y),this.angle&&(y=e.util.rotatePoint(y,c,-f(this.angle))),y.subtractEquals(m)},setPositionByOrigin:function(d,a,l){var c=this.translateToCenterPoint(d,a,l),m=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",m.x),this.set("top",m.y)},adjustPosition:function(d){var a=f(this.angle),l=this.getScaledWidth(),c=e.util.cos(a)*l,m=e.util.sin(a)*l,y,g;typeof this.originX=="string"?y=s[this.originX]:y=this.originX-.5,typeof d=="string"?g=s[d]:g=d-.5,this.left+=c*(g-y),this.top+=m*(g-y),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(l){return[new e.Point(l.tl.x,l.tl.y),new e.Point(l.tr.x,l.tr.y),new e.Point(l.br.x,l.br.y),new e.Point(l.bl.x,l.bl.y)]}var s=e.util,h=s.degreesToRadians,d=s.multiplyTransformMatrices,a=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,c){return c?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,c){return f(this._getCoords(l,c))},intersectsWithRect:function(l,c,m,y){var g=this.getCoords(m,y),w=e.Intersection.intersectPolygonRectangle(g,l,c);return w.status==="Intersection"},intersectsWithObject:function(l,c,m){var y=e.Intersection.intersectPolygonPolygon(this.getCoords(c,m),l.getCoords(c,m));return y.status==="Intersection"||l.isContainedWithinObject(this,c,m)||this.isContainedWithinObject(l,c,m)},isContainedWithinObject:function(l,c,m){for(var y=this.getCoords(c,m),g=c?l.aCoords:l.lineCoords,w=0,S=l._getImageLines(g);w<4;w++)if(!l.containsPoint(y[w],S))return!1;return!0},isContainedWithinRect:function(l,c,m,y){var g=this.getBoundingRect(m,y);return g.left>=l.x&&g.left+g.width<=c.x&&g.top>=l.y&&g.top+g.height<=c.y},containsPoint:function(l,w,m,y){var g=this._getCoords(m,y),w=w||this._getImageLines(g),S=this._findCrossPoints(l,w);return S!==0&&S%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br,y=this.getCoords(!0,l);return y.some(function(g){return g.x<=m.x&&g.x>=c.x&&g.y<=m.y&&g.y>=c.y})||this.intersectsWithRect(c,m,!0,l)?!0:this._containsCenterOfCanvas(c,m,l)},_containsCenterOfCanvas:function(l,c,m){var y={x:(l.x+c.x)/2,y:(l.y+c.y)/2};return!!this.containsPoint(y,null,!0,m)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br;if(this.intersectsWithRect(c,m,!0,l))return!0;var y=this.getCoords(!0,l).every(function(g){return(g.x>=m.x||g.x<=c.x)&&(g.y>=m.y||g.y<=c.y)});return y&&this._containsCenterOfCanvas(c,m,l)},_getImageLines:function(l){var c={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return c},_findCrossPoints:function(l,c){var m,y,g,w,S,k=0,j;for(var M in c)if(j=c[M],!(j.o.y<l.y&&j.d.y<l.y)&&!(j.o.y>=l.y&&j.d.y>=l.y)&&(j.o.x===j.d.x&&j.o.x>=l.x?S=j.o.x:(m=0,y=(j.d.y-j.o.y)/(j.d.x-j.o.x),g=l.y-m*l.x,w=j.o.y-y*j.o.x,S=-(g-w)/(m-y)),S>=l.x&&(k+=1),k===2))break;return k},getBoundingRect:function(l,c){var m=this.getCoords(l,c);return s.makeBoundingBoxFromPoints(m)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,c){var m=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(l/this.width/m)},scaleToHeight:function(l,c){var m=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(l/this.height/m)},calcLineCoords:function(){var l=this.getViewportTransform(),c=this.padding,m=h(this.angle),y=s.cos(m),g=s.sin(m),w=y*c,S=g*c,k=w+S,j=w-S,M=this.calcACoords(),N={tl:a(M.tl,l),tr:a(M.tr,l),bl:a(M.bl,l),br:a(M.br,l)};return c&&(N.tl.x-=j,N.tl.y-=k,N.tr.x+=k,N.tr.y-=j,N.bl.x-=k,N.bl.y+=j,N.br.x+=j,N.br.y+=k),N},calcOCoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),m=this.getViewportTransform(),y=d(m,c),g=d(y,l),g=d(g,[1/m[0],0,0,1/m[3],0,0]),w=this._calculateCurrentDimensions(),S={};return this.forEachControl(function(k,j,M){S[j]=k.positionHandler(w,g,M)}),S},calcACoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),m=d(c,l),y=this._getTransformedDimensions(),g=y.x/2,w=y.y/2;return{tl:a({x:-g,y:-w},m),tr:a({x:g,y:-w},m),bl:a({x:-g,y:w},m),br:a({x:g,y:w},m)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var c="_",m="";return!l&&this.group&&(m=this.group.transformMatrixKey(l)+c),m+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var c=this.calcOwnMatrix();if(l||!this.group)return c;var m=this.transformMatrixKey(l),y=this.matrixCache||(this.matrixCache={});return y.key===m?y.value:(this.group&&(c=d(this.group.calcTransformMatrix(!1),c)),y.key=m,y.value=c,c)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===l)return c.value;var m=this._calcTranslateMatrix(),y={angle:this.angle,translateX:m[4],translateY:m[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=l,c.value=s.composeMatrix(y),c.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,c=this.width+l,m=this.height+l;return{x:c,y:m}},_getTransformedDimensions:function(l,c){typeof l>"u"&&(l=this.skewX),typeof c>"u"&&(c=this.skewY);var m,y,g,w=l===0&&c===0;if(this.strokeUniform?(y=this.width,g=this.height):(m=this._getNonTransformedDimensions(),y=m.x,g=m.y),w)return this._finalizeDimensions(y*this.scaleX,g*this.scaleY);var S=s.sizeAfterTransform(y,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:c});return this._finalizeDimensions(S.x,S.y)},_finalizeDimensions:function(l,c){return this.strokeUniform?{x:l+this.strokeWidth,y:c+this.strokeWidth}:{x:l,y:c}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),c=this._getTransformedDimensions(),m=a(c,l,!0);return m.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(h,d){if(d){if(d.toLive)return h+": url(#SVGID_"+d.id+"); ";var a=new e.Color(d),l=h+": "+a.toRgb()+"; ",c=a.getAlpha();return c!==1&&(l+=h+"-opacity: "+c.toString()+"; "),l}else return h+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(h){var d=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",m=this.strokeLineCap?this.strokeLineCap:"butt",y=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",w=typeof this.opacity<"u"?this.opacity:"1",S=this.visible?"":" visibility: hidden;",k=h?"":this.getSvgFilter(),j=f("fill",this.fill),M=f("stroke",this.stroke);return[M,"stroke-width: ",a,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",m,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",y,"; ","stroke-miterlimit: ",g,"; ",j,"fill-rule: ",d,"; ","opacity: ",w,";",k,S].join("")},getSvgSpanStyles:function(h,d){var a="; ",c=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+a:"",l=h.strokeWidth?"stroke-width: "+h.strokeWidth+a:"",c=c,m=h.fontSize?"font-size: "+h.fontSize+"px"+a:"",y=h.fontStyle?"font-style: "+h.fontStyle+a:"",g=h.fontWeight?"font-weight: "+h.fontWeight+a:"",w=h.fill?f("fill",h.fill):"",S=h.stroke?f("stroke",h.stroke):"",k=this.getSvgTextDecoration(h),j=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return k&&(k="text-decoration: "+k+a),[S,l,c,m,y,g,k,w,j,d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(d){return h[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,d){var a=h?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+e.util.matrixToSVG(a);return l+(d||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var d=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,d),'" y="',s(-this.height/2,d),'" width="',s(this.width,d),'" height="',s(this.height,d),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,d){d=d||{};var a=d.reviver,l=d.additionalTransform||"",c=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),m=h.indexOf("COMMON_PARTS");return h[m]=c,a?a(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,d){d=d||{};var a=d.noStyle,l=d.reviver,c=a?"":'style="'+this.getSvgStyles()+'" ',m=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",y=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",w=y&&y.absolutePositioned,S=this.stroke,k=this.fill,j=this.shadow,M,N=[],D,A=h.indexOf("COMMON_PARTS"),B=d.additionalTransform;return y&&(y.clipPathId="CLIPPATH_"+e.Object.__uid++,D='<clipPath id="'+y.clipPathId+`" >
`+y.toClipPathSVG(l)+`</clipPath>
`),w&&N.push("<g ",m,this.getSvgCommons(),` >
`),N.push("<g ",this.getSvgTransform(!1),w?"":m+this.getSvgCommons(),` >
`),M=[c,g,a?"":this.addPaintOrder()," ",B?'transform="'+B+'" ':""].join(""),h[A]=M,k&&k.toLive&&N.push(k.toSVG(this)),S&&S.toLive&&N.push(S.toSVG(this)),j&&N.push(j.toSVG(this)),y&&N.push(D),N.push(h.join("")),N.push(`</g>
`),w&&N.push(`</g>
`),l?l(N.join("")):N.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=e.util.object.extend,s="stateProperties";function h(a,l,c){var m={},y=!0;c.forEach(function(g){m[g]=a[g]}),f(a[l],m,y)}function d(a,l,c){if(a===l)return!0;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(var m=0,y=a.length;m<y;m++)if(!d(a[m],l[m]))return!1;return!0}else if(a&&typeof a=="object"){var g=Object.keys(a),w;if(!l||typeof l!="object"||!c&&g.length!==Object.keys(l).length)return!1;for(var m=0,y=g.length;m<y;m++)if(w=g[m],!(w==="canvas"||w==="group")&&!d(a[w],l[w]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(a){a=a||s;var l="_"+a;return Object.keys(this[l]).length<this[a].length?!0:!d(this[l],this,!0)},saveState:function(a){var l=a&&a.propertySet||s,c="_"+l;return this[c]?(h(this,c,this[l]),a&&a.stateProperties&&h(this,c,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var l=a.propertySet||s;return a.propertySet=l,this["_"+l]={},this.saveState(a),this}})}(),function(){var f=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d=s.x,a=s.y,l,c,m=Object.keys(this.oCoords),y=m.length-1,g;for(this.__corner=0;y>=0;y--)if(g=m[y],!!this.isControlVisible(g)&&(c=this._getImageLines(h?this.oCoords[g].touchCorner:this.oCoords[g].corner),l=this._findCrossPoints({x:d,y:a},c),l!==0&&l%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var h in this.controls)s(this.controls[h],h,this)},_setCornerCoords:function(){var s=this.oCoords;for(var h in s){var d=this.controls[h];s[h].corner=d.calcCornerCoords(this.angle,this.cornerSize,s[h].x,s[h].y,!1),s[h].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,s[h].x,s[h].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var h=this.getCenterPoint(),d=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return s.translate(h.x,h.y),s.scale(1/a[0],1/a[3]),s.rotate(f(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-d.x/2,-d.y/2,d.x,d.y),s.restore(),this},drawBorders:function(s,h){h=h||{};var d=this._calculateCurrentDimensions(),a=this.borderScaleFactor,l=d.x+a,c=d.y+a,m=typeof h.hasControls<"u"?h.hasControls:this.hasControls,y=!1;return s.save(),s.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(s,h.borderDashArray||this.borderDashArray),s.strokeRect(-l/2,-c/2,l,c),m&&(s.beginPath(),this.forEachControl(function(g,w,S){g.withConnection&&g.getVisibility(S,w)&&(y=!0,s.moveTo(g.x*l,g.y*c),s.lineTo(g.x*l+g.offsetX,g.y*c+g.offsetY))}),y&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,h,d){d=d||{};var a=e.util.sizeAfterTransform(this.width,this.height,h),l=this.strokeWidth,c=this.strokeUniform,m=this.borderScaleFactor,y=a.x+l*(c?this.canvas.getZoom():h.scaleX)+m,g=a.y+l*(c?this.canvas.getZoom():h.scaleY)+m;return s.save(),this._setLineDash(s,d.borderDashArray||this.borderDashArray),s.strokeStyle=d.borderColor||this.borderColor,s.strokeRect(-y/2,-g/2,y,g),s.restore(),this},drawControls:function(s,h){h=h||{},s.save();var d=this.canvas.getRetinaScaling(),a,l;return s.setTransform(d,0,0,d,0,0),s.strokeStyle=s.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(c,m,y){l=y.oCoords[m],c.getVisibility(y,m)&&(a&&(l=e.util.transformPoint(l,a)),c.render(s,l.x,l.y,h,y))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=h,this},setControlsVisibility:function(s){s||(s={});for(var h in s)this.setControlVisible(h,s[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,s){s=s||{};var h=function(){},d=s.onComplete||h,a=s.onChange||h,l=this;return e.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){f.set("left",c),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),d()}})},fxCenterObjectV:function(f,s){s=s||{};var h=function(){},d=s.onComplete||h,a=s.onChange||h,l=this;return e.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){f.set("top",c),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),d()}})},fxRemove:function(f,s){s=s||{};var h=function(){},d=s.onComplete||h,a=s.onChange||h,l=this;return e.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){f.set("opacity",c),l.requestRenderAll(),a()},onComplete:function(){l.remove(f),d()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],s,h,d=[];for(s in arguments[0])f.push(s);for(var a=0,l=f.length;a<l;a++)s=f[a],h=a!==l-1,d.push(this._animate(s,arguments[0][s],arguments[1],h));return d}else return this._animate.apply(this,arguments)},_animate:function(f,s,h,d){var a=this,l;s=s.toString(),h?h=e.util.object.clone(h):h={},~f.indexOf(".")&&(l=f.split("."));var c=a.colorProperties.indexOf(f)>-1||l&&a.colorProperties.indexOf(l[1])>-1,m=l?this.get(l[0])[l[1]]:this.get(f);"from"in h||(h.from=m),c||(~s.indexOf("=")?s=m+parseFloat(s.replace("=","")):s=parseFloat(s));var y={target:this,startValue:h.from,endValue:s,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(g,w,S){return h.abort.call(a,g,w,S)},onChange:function(g,w,S){l?a[l[0]][l[1]]=g:a.set(f,g),!d&&h.onChange&&h.onChange(g,w,S)},onComplete:function(g,w,S){d||(a.setCoords(),h.onComplete&&h.onComplete(g,w,S))}};return c?e.util.animateColor(y.startValue,y.endValue,y.duration,y):e.util.animate(y)}}),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,m){c||(c=[0,0,0,0]),this.callSuper("initialize",m),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(m)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,m){return this.callSuper("_set",c,m),typeof a[c]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var m=this.calcLinePoints();c.moveTo(m.x1,m.y1),c.lineTo(m.x2,m.y2),c.lineWidth=this.strokeWidth;var y=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=y},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return h(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,m=this.y1<=this.y2?-1:1,y=c*this.width*.5,g=m*this.height*.5,w=c*this.width*-.5,S=m*this.height*-.5;return{x1:y,x2:w,y1:g,y2:S}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(c,m,y){y=y||{};var g=s.parseAttributes(c,s.Line.ATTRIBUTE_NAMES),w=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];m(new s.Line(w,h(g,y)))},s.Line.fromObject=function(c,m){function y(w){delete w.points,m&&m(w)}var g=d(c,!0);g.points=[c.x1,c.y1,c.x2,c.y2],s.Object._fromObject("Line",g,y,"points")};function l(c,m){var y=c.origin,g=c.axis1,w=c.axis2,S=c.dimension,k=m.nearest,j=m.center,M=m.farthest;return function(){switch(this.get(y)){case k:return Math.min(this.get(g),this.get(w));case j:return Math.min(this.get(g),this.get(w))+.5*this.get(S);case M:return Math.max(this.get(g),this.get(w))}}}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,l){return this.callSuper("_set",a,l),a==="radius"&&this.setRadius(l),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,l=0,c=0,m=(this.endAngle-this.startAngle)%360;if(m===0)a=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+c+'" ','r="',this.radius,`" />
`];else{var y=h(this.startAngle),g=h(this.endAngle),w=this.radius,S=s.util.cos(y)*w,k=s.util.sin(y)*w,j=s.util.cos(g)*w,M=s.util.sin(g)*w,N=m>180?"1":"0";a=['<path d="M '+S+" "+k," A "+w+" "+w," 0 ",+N+" 1"," "+j+" "+M,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,h(this.startAngle),h(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(a,l){var c=s.parseAttributes(a,s.Circle.ATTRIBUTE_NAMES);if(!d(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,l(new s.Circle(c))};function d(a){return"radius"in a&&a.radius>=0}s.Circle.fromObject=function(a,l){s.Object._fromObject("Circle",a,l)}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(h){var d=this.width/2,a=this.height/2;h.beginPath(),h.moveTo(-d,a),h.lineTo(0,-a),h.lineTo(d,a),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,d=this.height/2,a=[-h+" "+d,"0 "+-d,h+" "+d].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),s.Triangle.fromObject=function(h,d){return s.Object._fromObject("Triangle",h,d)}}(t),function(f){var s=f.fabric||(f.fabric={}),h=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,a){switch(this.callSuper("_set",d,a),d){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,h,!1),d.restore(),this._renderPaintInOrder(d)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(d,a){var l=s.parseAttributes(d,s.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,a(new s.Ellipse(l))},s.Ellipse.fromObject=function(d,a){s.Object._fromObject("Ellipse",d,a)}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var a=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,m=this.height,y=-this.width/2,g=-this.height/2,w=a!==0||l!==0,S=1-.5522847498;d.beginPath(),d.moveTo(y+a,g),d.lineTo(y+c-a,g),w&&d.bezierCurveTo(y+c-S*a,g,y+c,g+S*l,y+c,g+l),d.lineTo(y+c,g+m-l),w&&d.bezierCurveTo(y+c,g+m-S*l,y+c-S*a,g+m,y+c-a,g+m),d.lineTo(y+a,g+m),w&&d.bezierCurveTo(y+S*a,g+m,y,g+m-S*l,y,g+m-l),d.lineTo(y,g+l),w&&d.bezierCurveTo(y,g+S*l,y+S*a,g,y+a,g),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){var d=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',d,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(d,a,l){if(!d)return a(null);l=l||{};var c=s.parseAttributes(d,s.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var m=new s.Rect(h(l?s.util.object.clone(l):{},c));m.visible=m.visible&&m.width>0&&m.height>0,a(m)},s.Rect.fromObject=function(d,a){return s.Object._fromObject("Rect",d,a)}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.util.array.min,a=s.util.array.max,l=s.util.toFixed,c=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(m,y){y=y||{},this.points=m||[],this.callSuper("initialize",y),this._setPositionDimensions(y)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(m){var y=this._calcDimensions(m),g,w=this.exactBoundingBox?this.strokeWidth:0;this.width=y.width-w,this.height=y.height-w,m.fromSVG||(g=this.translateToGivenOrigin({x:y.left-this.strokeWidth/2+w/2,y:y.top-this.strokeWidth/2+w/2},"left","top",this.originX,this.originY)),typeof m.left>"u"&&(this.left=m.fromSVG?y.left:g.x),typeof m.top>"u"&&(this.top=m.fromSVG?y.top:g.y),this.pathOffset={x:y.left+this.width/2+w/2,y:y.top+this.height/2+w/2}},_calcDimensions:function(){var m=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,y=d(m,"x")||0,g=d(m,"y")||0,w=a(m,"x")||0,S=a(m,"y")||0,k=w-y,j=S-g;return{left:y,top:g,width:k,height:j}},toObject:function(m){return h(this.callSuper("toObject",m),{points:this.points.concat()})},_toSVG:function(){for(var m=[],y=this.pathOffset.x,g=this.pathOffset.y,w=s.Object.NUM_FRACTION_DIGITS,S=0,k=this.points.length;S<k;S++)m.push(l(this.points[S].x-y,w),",",l(this.points[S].y-g,w)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',m.join(""),`" />
`]},commonRender:function(m){var y,g=this.points.length,w=this.pathOffset.x,S=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;m.beginPath(),m.moveTo(this.points[0].x-w,this.points[0].y-S);for(var k=0;k<g;k++)y=this.points[k],m.lineTo(y.x-w,y.y-S);return!0},_render:function(m){this.commonRender(m)&&this._renderPaintInOrder(m)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(m){return function(y,g,w){if(!y)return g(null);w||(w={});var S=s.parsePointsAttribute(y.getAttribute("points")),k=s.parseAttributes(y,s[m].ATTRIBUTE_NAMES);k.fromSVG=!0,g(new s[m](S,h(k,w)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(m,y){return s.Object._fromObject("Polyline",m,y,"points")}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return h(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(d,a){s.Object._fromObject("Polygon",d,a,"points")}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.array.min,d=s.util.array.max,a=s.util.object.extend,l=s.util.object.clone,c=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(m,y){y=l(y||{}),delete y.path,this.callSuper("initialize",y),this._setPath(m||[],y)},_setPath:function(m,y){this.path=s.util.makePathSimpler(Array.isArray(m)?m:s.util.parsePath(m)),s.Polyline.prototype._setPositionDimensions.call(this,y||{})},_renderPathCommands:function(m){var y,g=0,w=0,S=0,k=0,j=0,M=0,N=-this.pathOffset.x,D=-this.pathOffset.y;m.beginPath();for(var A=0,B=this.path.length;A<B;++A)switch(y=this.path[A],y[0]){case"L":S=y[1],k=y[2],m.lineTo(S+N,k+D);break;case"M":S=y[1],k=y[2],g=S,w=k,m.moveTo(S+N,k+D);break;case"C":S=y[5],k=y[6],j=y[3],M=y[4],m.bezierCurveTo(y[1]+N,y[2]+D,j+N,M+D,S+N,k+D);break;case"Q":m.quadraticCurveTo(y[1]+N,y[2]+D,y[3]+N,y[4]+D),S=y[3],k=y[4],j=y[1],M=y[2];break;case"z":case"Z":S=g,k=w,m.closePath();break}},_render:function(m){this._renderPathCommands(m),this._renderPaintInOrder(m)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(m){return a(this.callSuper("toObject",m),{path:this.path.map(function(y){return y.slice()})})},toDatalessObject:function(m){var y=this.toObject(["sourcePath"].concat(m));return y.sourcePath&&delete y.path,y},_toSVG:function(){var m=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',m,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var m=s.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,m)+", "+c(-this.pathOffset.y,m)+")"},toClipPathSVG:function(m){var y=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:y})},toSVG:function(m){var y=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:y})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var m=[],y=[],g,w=0,S=0,k=0,j=0,M,N=0,D=this.path.length;N<D;++N){switch(g=this.path[N],g[0]){case"L":k=g[1],j=g[2],M=[];break;case"M":k=g[1],j=g[2],w=k,S=j,M=[];break;case"C":M=s.util.getBoundsOfCurve(k,j,g[1],g[2],g[3],g[4],g[5],g[6]),k=g[5],j=g[6];break;case"Q":M=s.util.getBoundsOfCurve(k,j,g[1],g[2],g[1],g[2],g[3],g[4]),k=g[3],j=g[4];break;case"z":case"Z":k=w,j=S;break}M.forEach(function(te){m.push(te.x),y.push(te.y)}),m.push(k),y.push(j)}var A=h(m)||0,B=h(y)||0,Y=d(m)||0,oe=d(y)||0,Z=Y-A,ae=oe-B;return{left:A,top:B,width:Z,height:ae}}}),s.Path.fromObject=function(m,y){if(typeof m.sourcePath=="string"){var g=m.sourcePath;s.loadSVGFromURL(g,function(w){var S=w[0];S.setOptions(m),m.clipPath?s.util.enlivenObjects([m.clipPath],function(k){S.clipPath=k[0],y&&y(S)}):y&&y(S)})}else s.Object._fromObject("Path",m,y,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(m,y,g){var w=s.parseAttributes(m,s.Path.ATTRIBUTE_NAMES);w.fromSVG=!0,y(new s.Path(w.d,a(w,g)))}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.array.min,d=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,l,c){l=l||{},this._objects=[],c&&this.callSuper("initialize",l),this._objects=a||[];for(var m=this._objects.length;m--;)this._objects[m].group=this;if(c)this._updateObjectsACoords();else{var y=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),y||this._calcBounds(),this._updateObjectsCoords(y),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,l=this._objects.length;l--;)this._objects[l].setCoords(a)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],l)},_updateObjectCoords:function(a,l){var c=a.left,m=a.top,y=!0;a.set({left:c-l.x,top:m-l.y}),a.group=this,a.setCoords(y)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var l=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),a&&(l&&s.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,l){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(a,l);if(a==="canvas")for(;c--;)this._objects[c]._set(a,l);s.Object.prototype._set.call(this,a,l)},toObject:function(a){var l=this.includeDefaultValues,c=this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){var g=y.includeDefaultValues;y.includeDefaultValues=l;var w=y.toObject(a);return y.includeDefaultValues=g,w}),m=s.Object.prototype.toObject.call(this,a);return m.objects=c,m},toDatalessObject:function(a){var l,c=this.sourcePath;if(c)l=c;else{var m=this.includeDefaultValues;l=this._objects.map(function(g){var w=g.includeDefaultValues;g.includeDefaultValues=m;var S=g.toDatalessObject(a);return g.includeDefaultValues=w,S})}var y=s.Object.prototype.toDatalessObject.call(this,a);return y.objects=l,y},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=s.Object.prototype.shouldCache.call(this);if(a){for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,l=this._objects.length;a<l;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var l=0,c=this._objects.length;l<c;l++)this._objects[l].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(l){s.util.addTransformToObject(l,a),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,l=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var m=new s.ActiveSelection([]);return m.set(c),m.type="activeSelection",l.remove(this),a.forEach(function(y){y.group=m,y.dirty=!0,l.add(y)}),m.canvas=l,m._objects=a,l._activeObject=m,m.setCoords(),m}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(l){l.setCoords(a)}),this},_calcBounds:function(a){for(var l=[],c=[],m,y,g,w=["tr","br","bl","tl"],S=0,k=this._objects.length,j,M=w.length;S<k;++S){for(m=this._objects[S],g=m.calcACoords(),j=0;j<M;j++)y=w[j],l.push(g[y].x),c.push(g[y].y);m.aCoords=g}this._getBounds(l,c,a)},_getBounds:function(a,l,c){var m=new s.Point(h(a),h(l)),y=new s.Point(d(a),d(l)),g=m.y||0,w=m.x||0,S=y.x-m.x||0,k=y.y-m.y||0;this.width=S,this.height=k,c||this.setPositionByOrigin({x:w,y:g},"left","top")},_toSVG:function(a){for(var l=["<g ","COMMON_PARTS",` >
`],c=0,m=this._objects.length;c<m;c++)l.push("		",this._objects[c].toSVG(a));return l.push(`</g>
`),l},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),l].join("")},toClipPathSVG:function(a){for(var l=[],c=0,m=this._objects.length;c<m;c++)l.push("	",this._objects[c].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(l,{reviver:a})}}),s.Group.fromObject=function(a,l){var c=a.objects,m=s.util.object.clone(a,!0);if(delete m.objects,typeof c=="string"){s.loadSVGFromURL(c,function(y){var g=s.util.groupSVGElements(y,a,c),w=m.clipPath;delete m.clipPath,g.set(m),w?s.util.enlivenObjects([w],function(S){g.clipPath=S[0],l&&l(g)}):l&&l(g)});return}s.util.enlivenObjects(c,function(y){s.util.enlivenObjectEnlivables(a,m,function(){l&&l(new s.Group(y,m,!0))})})})}(t),function(f){var s=f.fabric||(f.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(h,d){d=d||{},this._objects=h||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var d=s.Object.prototype.toObject.call(this),a=new s.Group([]);if(delete d.type,a.set(d),h.forEach(function(c){c.canvas.remove(c),c.group=a}),a._objects=h,!this.canvas)return a;var l=this.canvas;return l.add(a),l._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,d,a){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",h,d),a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var l=0,c=this._objects.length;l<c;l++)this._objects[l]._renderControls(h,a);h.restore()}}),s.ActiveSelection.fromObject=function(h,d){s.util.enlivenObjects(h.objects,function(a){delete h.objects,d&&d(new s.ActiveSelection(a,h,!0))})})}(t),function(f){var s=e.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,d){d||(d={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",d),this._initElement(h,d)},getElement:function(){return this._element||{}},setElement:function(h,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var d=e.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(h)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(h){e.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var d=this.width/2,a=this.height/2;h.beginPath(),h.moveTo(-d,-a),h.lineTo(d,-a),h.lineTo(d,a),h.lineTo(-d,a),h.lineTo(-d,-a),h.closePath()}},toObject:function(h){var d=[];this.filters.forEach(function(l){l&&d.push(l.toObject())});var a=s(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],d=[],a,l=this._element,c=-this.width/2,m=-this.height/2,y="",g="";if(!l)return[];if(this.hasCrop()){var w=e.Object.__uid++;h.push('<clipPath id="imageCrop_'+w+`">
`,'	<rect x="'+c+'" y="'+m+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),y=' clip-path="url(#imageCrop_'+w+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),d.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',m-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,g,'"',y,`></image>
`),this.stroke||this.strokeDashArray){var S=this.fill;this.fill=null,a=["	<rect ",'x="',c,'" y="',m,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=S}return this.paintFirst!=="fill"?h=h.concat(a,d):h=h.concat(d,a),h},getSrc:function(h){var d=h?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(h,d,a){return e.util.loadImage(h,function(l,c){this.setElement(l,a),this._setWidthHeight(),d&&d(this,c)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,d=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),l=a.scaleX,c=a.scaleY,m=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||l>d&&c>d){this._element=m,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=c;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var y=e.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,w=m.width,S=m.height;y.width=w,y.height=S,this._element=y,this._lastScaleX=h.scaleX=l,this._lastScaleY=h.scaleY=c,e.filterBackend.applyFilters([h],m,w,S,this._element,g),this._filterScalingX=y.width/this._originalElement.width,this._filterScalingY=y.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(m){return m&&!m.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,a=d.naturalWidth||d.width,l=d.naturalHeight||d.height;if(this._element===this._originalElement){var c=e.util.createCanvasElement();c.width=a,c.height=l,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,l),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(h,this._originalElement,a,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var d=this._element;if(d){var a=this._filterScalingX,l=this._filterScalingY,c=this.width,m=this.height,y=Math.min,g=Math.max,w=g(this.cropX,0),S=g(this.cropY,0),k=d.naturalWidth||d.width,j=d.naturalHeight||d.height,M=w*a,N=S*l,D=y(c*a,k-M),A=y(m*l,j-N),B=-c/2,Y=-m/2,oe=y(c,k/a-w),Z=y(m,j/l-S);d&&h.drawImage(d,M,N,D,A,B,Y,oe,Z)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,d){this.setElement(e.util.getById(h),d),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,d){h&&h.length?e.util.enlivenObjects(h,function(a){d&&d(a)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(h){h||(h={});var d=this.getElement();this.width=h.width||d.naturalWidth||d.width||0,this.height=h.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var h=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,a=this._element.height,l=1,c=1,m=0,y=0,g=0,w=0,S,k=this.width,j=this.height,M={width:k,height:j};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(l=c=e.util.findScaleToFit(this._element,M),S=(k-d*l)/2,h.alignX==="Min"&&(m=-S),h.alignX==="Max"&&(m=S),S=(j-a*c)/2,h.alignY==="Min"&&(y=-S),h.alignY==="Max"&&(y=S)),h.meetOrSlice==="slice"&&(l=c=e.util.findScaleToCover(this._element,M),S=d-k/l,h.alignX==="Mid"&&(g=S/2),h.alignX==="Max"&&(g=S),S=a-j/c,h.alignY==="Mid"&&(w=S/2),h.alignY==="Max"&&(w=S),d=k/l,a=j/c)):(l=k/d,c=j/a),{width:d,height:a,scaleX:l,scaleY:c,offsetLeft:m,offsetTop:y,cropX:g,cropY:w}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(h,d){var a=e.util.object.clone(h);e.util.loadImage(a.src,function(l,c){if(c){d&&d(null,!0);return}e.Image.prototype._initFilters.call(a,a.filters,function(m){a.filters=m||[],e.Image.prototype._initFilters.call(a,[a.resizeFilter],function(y){a.resizeFilter=y[0],e.util.enlivenObjectEnlivables(a,a,function(){var g=new e.Image(l,a);d(g,!1)})})})},null,a.crossOrigin)},e.Image.fromURL=function(h,d,a){e.util.loadImage(h,function(l,c){d&&d(new e.Image(l,a),c)},null,a&&a.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(h,d,a){var l=e.parseAttributes(h,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(l["xlink:href"],d,s(a?e.util.object.clone(a):{},l))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var s=function(){},h=f.onComplete||s,d=f.onChange||s,a=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){a.rotate(l),d()},onComplete:function(){a.setCoords(),h()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(h,d){var a="precision "+d+` float;
void main(){}`,l=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(l,a),h.compileShader(l),!!h.getShaderParameter(l,h.COMPILE_STATUS)}e.isWebglSupported=function(h){if(e.isLikelyNode)return!1;h=h||e.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),a=d.getContext("webgl")||d.getContext("experimental-webgl"),l=!1;if(a){e.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),l=e.maxTextureSize>=h;for(var c=["highp","mediump","lowp"],m=0;m<3;m++)if(f(a,c[m])){e.webGlPrecision=c[m];break}}return this.isSupported=l,l},e.WebglFilterBackend=s;function s(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(h,d){this.dispose(),this.createWebGLCanvas(h,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,d)},chooseFastestCopyGLTo2DMethod:function(h,d){var a=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var c=typeof ArrayBuffer<"u",m=typeof Uint8ClampedArray<"u";if(a&&l&&c&&m){var y=e.util.createCanvasElement(),g=new ArrayBuffer(h*d*4);if(e.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=C;return}var w={imageBuffer:g,destinationWidth:h,destinationHeight:d,targetCanvas:y},S,k,j;y.width=h,y.height=d,S=window.performance.now(),b.call(w,this.gl,w),k=window.performance.now()-S,S=window.performance.now(),C.call(w,this.gl,w),j=window.performance.now()-S,k>j?(this.imageBuffer=g,this.copyGLTo2D=C):this.copyGLTo2D=b}},createWebGLCanvas:function(h,d){var a=e.util.createCanvasElement();a.width=h,a.height=d;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=a.getContext("webgl",l);c||(c=a.getContext("experimental-webgl",l)),c&&(c.clearColor(0,0,0,0),this.canvas=a,this.gl=c)},applyFilters:function(h,d,a,l,c,m){var y=this.gl,g;m&&(g=this.getCachedTexture(m,d));var w={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:a,sourceHeight:l,destinationWidth:a,destinationHeight:l,context:y,sourceTexture:this.createTexture(y,a,l,!g&&d),targetTexture:this.createTexture(y,a,l),originalTexture:g||this.createTexture(y,a,l,!g&&d),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},S=y.createFramebuffer();return y.bindFramebuffer(y.FRAMEBUFFER,S),h.forEach(function(k){k&&k.applyTo(w)}),x(w),this.copyGLTo2D(y,w),y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(w.sourceTexture),y.deleteTexture(w.targetTexture),y.deleteFramebuffer(S),c.getContext("2d").setTransform(1,0,0,1,0,0),w},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,d,a,l,c){var m=h.createTexture();return h.bindTexture(h.TEXTURE_2D,m),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,c||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,c||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),l?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,l):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,d,a,0,h.RGBA,h.UNSIGNED_BYTE,null),m},getCachedTexture:function(h,d){if(this.textureCache[h])return this.textureCache[h];var a=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[h]=a,a},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:b,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,d={renderer:"",vendor:""};if(!h)return d;var a=h.getExtension("WEBGL_debug_renderer_info");if(a){var l=h.getParameter(a.UNMASKED_RENDERER_WEBGL),c=h.getParameter(a.UNMASKED_VENDOR_WEBGL);l&&(d.renderer=l.toLowerCase()),c&&(d.vendor=c.toLowerCase())}return this.gpuInfo=d,d}}}();function x(f){var s=f.targetCanvas,h=s.width,d=s.height,a=f.destinationWidth,l=f.destinationHeight;(h!==a||d!==l)&&(s.width=a,s.height=l)}function b(f,s){var h=f.canvas,d=s.targetCanvas,a=d.getContext("2d");a.translate(0,d.height),a.scale(1,-1);var l=h.height-d.height;a.drawImage(h,0,l,d.width,d.height,0,0,d.width,d.height)}function C(f,s){var h=s.targetCanvas,d=h.getContext("2d"),a=s.destinationWidth,l=s.destinationHeight,c=a*l*4,m=new Uint8Array(this.imageBuffer,0,c),y=new Uint8ClampedArray(this.imageBuffer,0,c);f.readPixels(0,0,a,l,f.RGBA,f.UNSIGNED_BYTE,m);var g=new ImageData(y,a,l);d.putImageData(g,0,0)}(function(){var f=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(h,d,a,l,c){var m=c.getContext("2d");m.drawImage(d,0,0,a,l);var y=m.getImageData(0,0,a,l),g=m.getImageData(0,0,a,l),w={sourceWidth:a,sourceHeight:l,imageData:y,originalEl:d,originalImageData:g,canvasEl:c,ctx:m,filterBackend:this};return h.forEach(function(S){S.applyTo(w)}),(w.imageData.width!==a||w.imageData.height!==l)&&(c.width=w.imageData.width,c.height=w.imageData.height),m.putImageData(w.imageData,0,0),w}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var s in f)this[s]=f[s]},createProgram:function(f,s,h){s=s||this.fragmentSource,h=h||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var d=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(d,h),f.compileShader(d),!f.getShaderParameter(d,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(d));var a=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(a,s),f.compileShader(a),!f.getShaderParameter(a,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(a));var l=f.createProgram();if(f.attachShader(l,d),f.attachShader(l,a),f.linkProgram(l),!f.getProgramParameter(l,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(l));var c=this.getAttributeLocations(f,l),m=this.getUniformLocations(f,l)||{};return m.uStepW=f.getUniformLocation(l,"uStepW"),m.uStepH=f.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:c,uniformLocations:m}},getAttributeLocations:function(f,s){return{aPosition:f.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,s,h){var d=s.aPosition,a=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,a),f.enableVertexAttribArray(d),f.vertexAttribPointer(d,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,h,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var s=f.context,h,d;f.passes>1?(h=f.destinationWidth,d=f.destinationHeight,(f.sourceWidth!==h||f.sourceHeight!==d)&&(s.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(s,h,d)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,f.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(f){f.passes--,f.pass++;var s=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=s},isNeutralState:function(){var f=this.mainParameter,s=e.Image.filters[this.type].prototype;if(f)if(Array.isArray(s[f])){for(var h=s[f].length;h--;)if(this[f][h]!==s[f][h])return!1;return!0}else return s[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var s=f.context,h=this.retrieveShader(f);f.pass===0&&f.originalTexture?s.bindTexture(s.TEXTURE_2D,f.originalTexture):s.bindTexture(s.TEXTURE_2D,f.sourceTexture),s.useProgram(h.program),this.sendAttributeData(s,h.attributeLocations,f.aPosition),s.uniform1f(h.uniformLocations.uStepW,1/f.sourceWidth),s.uniform1f(h.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(s,h.uniformLocations),s.viewport(0,0,f.destinationWidth,f.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,s,h){f.activeTexture(h),f.bindTexture(f.TEXTURE_2D,s),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,s){f.activeTexture(s),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var s=document.createElement("canvas");s.width=f.sourceWidth,s.height=f.sourceHeight,f.helpLayer=s}},toObject:function(){var f={type:this.type},s=this.mainParameter;return s&&(f[s]=this[s]),f},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(f,s){var h=new e.Image.filters[f.type](f);return s&&s(h),h},function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.ColorMatrix=d(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l=a.imageData,c=l.data,m=c.length,y=this.matrix,g,w,S,k,j,M=this.colorsOnly;for(j=0;j<m;j+=4)g=c[j],w=c[j+1],S=c[j+2],M?(c[j]=g*y[0]+w*y[1]+S*y[2]+y[4]*255,c[j+1]=g*y[5]+w*y[6]+S*y[7]+y[9]*255,c[j+2]=g*y[10]+w*y[11]+S*y[12]+y[14]*255):(k=c[j+3],c[j]=g*y[0]+w*y[1]+S*y[2]+k*y[3]+y[4]*255,c[j+1]=g*y[5]+w*y[6]+S*y[7]+k*y[8]+y[9]*255,c[j+2]=g*y[10]+w*y[11]+S*y[12]+k*y[13]+y[14]*255,c[j+3]=g*y[15]+w*y[16]+S*y[17]+k*y[18]+y[19]*255)},getUniformLocations:function(a,l){return{uColorMatrix:a.getUniformLocation(l,"uColorMatrix"),uConstants:a.getUniformLocation(l,"uConstants")}},sendUniformData:function(a,l){var c=this.matrix,m=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],y=[c[4],c[9],c[14],c[19]];a.uniformMatrix4fv(l.uColorMatrix,!1,m),a.uniform4fv(l.uConstants,y)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Brightness=d(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var l=a.imageData,c=l.data,m,y=c.length,g=Math.round(this.brightness*255);for(m=0;m<y;m+=4)c[m]=c[m]+g,c[m+1]=c[m+1]+g,c[m+2]=c[m+2]+g}},getUniformLocations:function(a,l){return{uBrightness:a.getUniformLocation(l,"uBrightness")}},sendUniformData:function(a,l){a.uniform1f(l.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.Image.filters,a=s.util.createClass;d.Convolute=a(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var c=Math.sqrt(this.matrix.length),m=this.type+"_"+c+"_"+(this.opaque?1:0),y=this.fragmentSource[m];return l.programCache.hasOwnProperty(m)||(l.programCache[m]=this.createProgram(l.context,y)),l.programCache[m]},applyTo2d:function(l){var c=l.imageData,m=c.data,y=this.matrix,g=Math.round(Math.sqrt(y.length)),w=Math.floor(g/2),S=c.width,k=c.height,j=l.ctx.createImageData(S,k),M=j.data,N=this.opaque?1:0,D,A,B,Y,oe,Z,ae,te,G,z,q,X,R;for(q=0;q<k;q++)for(z=0;z<S;z++){for(oe=(q*S+z)*4,D=0,A=0,B=0,Y=0,R=0;R<g;R++)for(X=0;X<g;X++)ae=q+R-w,Z=z+X-w,!(ae<0||ae>=k||Z<0||Z>=S)&&(te=(ae*S+Z)*4,G=y[R*g+X],D+=m[te]*G,A+=m[te+1]*G,B+=m[te+2]*G,N||(Y+=m[te+3]*G));M[oe]=D,M[oe+1]=A,M[oe+2]=B,N?M[oe+3]=m[oe+3]:M[oe+3]=Y}l.imageData=j},getUniformLocations:function(l,c){return{uMatrix:l.getUniformLocation(c,"uMatrix"),uOpaque:l.getUniformLocation(c,"uOpaque"),uHalfSize:l.getUniformLocation(c,"uHalfSize"),uSize:l.getUniformLocation(c,"uSize")}},sendUniformData:function(l,c){l.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Grayscale=d(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var l=a.imageData,c=l.data,m,y=c.length,g,w=this.mode;for(m=0;m<y;m+=4)w==="average"?g=(c[m]+c[m+1]+c[m+2])/3:w==="lightness"?g=(Math.min(c[m],c[m+1],c[m+2])+Math.max(c[m],c[m+1],c[m+2]))/2:w==="luminosity"&&(g=.21*c[m]+.72*c[m+1]+.07*c[m+2]),c[m]=g,c[m+1]=g,c[m+2]=g},retrieveShader:function(a){var l=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(l)){var c=this.fragmentSource[this.mode];a.programCache[l]=this.createProgram(a.context,c)}return a.programCache[l]},getUniformLocations:function(a,l){return{uMode:a.getUniformLocation(l,"uMode")}},sendUniformData:function(a,l){var c=1;a.uniform1i(l.uMode,c)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Invert=d(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var l=a.imageData,c=l.data,m,y=c.length;for(m=0;m<y;m+=4)c[m]=255-c[m],c[m+1]=255-c[m+1],c[m+2]=255-c[m+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,l){return{uInvert:a.getUniformLocation(l,"uInvert")}},sendUniformData:function(a,l){a.uniform1i(l.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.Image.filters,a=s.util.createClass;d.Noise=a(d.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var c=l.imageData,m=c.data,y,g=m.length,w=this.noise,S;for(y=0,g=m.length;y<g;y+=4)S=(.5-Math.random())*w,m[y]+=S,m[y+1]+=S,m[y+2]+=S}},getUniformLocations:function(l,c){return{uNoise:l.getUniformLocation(c,"uNoise"),uSeed:l.getUniformLocation(c,"uSeed")}},sendUniformData:function(l,c){l.uniform1f(c.uNoise,this.noise/255),l.uniform1f(c.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Pixelate=d(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var l=a.imageData,c=l.data,m=l.height,y=l.width,g,w,S,k,j,M,N,D,A,B,Y;for(w=0;w<m;w+=this.blocksize)for(S=0;S<y;S+=this.blocksize)for(g=w*4*y+S*4,k=c[g],j=c[g+1],M=c[g+2],N=c[g+3],B=Math.min(w+this.blocksize,m),Y=Math.min(S+this.blocksize,y),D=w;D<B;D++)for(A=S;A<Y;A++)g=D*4*y+A*4,c[g]=k,c[g+1]=j,c[g+2]=M,c[g+3]=N},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,l){return{uBlocksize:a.getUniformLocation(l,"uBlocksize"),uStepW:a.getUniformLocation(l,"uStepW"),uStepH:a.getUniformLocation(l,"uStepH")}},sendUniformData:function(a,l){a.uniform1f(l.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.extend,d=s.Image.filters,a=s.util.createClass;d.RemoveColor=a(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var c=l.imageData,m=c.data,y,g=this.distance*255,w,S,k,j=new s.Color(this.color).getSource(),M=[j[0]-g,j[1]-g,j[2]-g],N=[j[0]+g,j[1]+g,j[2]+g];for(y=0;y<m.length;y+=4)w=m[y],S=m[y+1],k=m[y+2],w>M[0]&&S>M[1]&&k>M[2]&&w<N[0]&&S<N[1]&&k<N[2]&&(m[y+3]=0)},getUniformLocations:function(l,c){return{uLow:l.getUniformLocation(c,"uLow"),uHigh:l.getUniformLocation(c,"uHigh")}},sendUniformData:function(l,c){var m=new s.Color(this.color).getSource(),y=parseFloat(this.distance),g=[0+m[0]/255-y,0+m[1]/255-y,0+m[2]/255-y,1],w=[m[0]/255+y,m[1]/255+y,m[2]/255+y,1];l.uniform4fv(c.uLow,g),l.uniform4fv(c.uHigh,w)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in a)h[l]=d(h.ColorMatrix,{type:l,matrix:a[l],mainParameter:!1,colorsOnly:!0}),s.Image.filters[l].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric,h=s.Image.filters,d=s.util.createClass;h.BlendColor=d(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,c;return a.programCache.hasOwnProperty(l)||(c=this.buildSource(this.mode),a.programCache[l]=this.createProgram(a.context,c)),a.programCache[l]},applyTo2d:function(a){var l=a.imageData,c=l.data,m=c.length,y,g,w,S,k,j,M,N=1-this.alpha;M=new s.Color(this.color).getSource(),y=M[0]*this.alpha,g=M[1]*this.alpha,w=M[2]*this.alpha;for(var D=0;D<m;D+=4)switch(S=c[D],k=c[D+1],j=c[D+2],this.mode){case"multiply":c[D]=S*y/255,c[D+1]=k*g/255,c[D+2]=j*w/255;break;case"screen":c[D]=255-(255-S)*(255-y)/255,c[D+1]=255-(255-k)*(255-g)/255,c[D+2]=255-(255-j)*(255-w)/255;break;case"add":c[D]=S+y,c[D+1]=k+g,c[D+2]=j+w;break;case"diff":case"difference":c[D]=Math.abs(S-y),c[D+1]=Math.abs(k-g),c[D+2]=Math.abs(j-w);break;case"subtract":c[D]=S-y,c[D+1]=k-g,c[D+2]=j-w;break;case"darken":c[D]=Math.min(S,y),c[D+1]=Math.min(k,g),c[D+2]=Math.min(j,w);break;case"lighten":c[D]=Math.max(S,y),c[D+1]=Math.max(k,g),c[D+2]=Math.max(j,w);break;case"overlay":c[D]=y<128?2*S*y/255:255-2*(255-S)*(255-y)/255,c[D+1]=g<128?2*k*g/255:255-2*(255-k)*(255-g)/255,c[D+2]=w<128?2*j*w/255:255-2*(255-j)*(255-w)/255;break;case"exclusion":c[D]=y+S-2*y*S/255,c[D+1]=g+k-2*g*k/255,c[D+2]=w+j-2*w*j/255;break;case"tint":c[D]=y+S*N,c[D+1]=g+k*N,c[D+2]=w+j*N}},getUniformLocations:function(a,l){return{uColor:a.getUniformLocation(l,"uColor")}},sendUniformData:function(a,l){var c=new s.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,a.uniform4fv(l.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric,h=s.Image.filters,d=s.util.createClass;h.BlendImage=d(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,c)),a.programCache[l]},applyToWebGL:function(a){var l=a.context,c=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(l,c,l.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(a,l){return a.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var a=this.image,l=a._element.width,c=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/l,-a.top/c,1]},applyTo2d:function(a){var l=a.imageData,c=a.filterBackend.resources,m=l.data,y=m.length,g=l.width,w=l.height,S,k,j,M,N,D,A,B,Y,oe,Z=this.image,ae;c.blendImage||(c.blendImage=s.util.createCanvasElement()),Y=c.blendImage,oe=Y.getContext("2d"),Y.width!==g||Y.height!==w?(Y.width=g,Y.height=w):oe.clearRect(0,0,g,w),oe.setTransform(Z.scaleX,0,0,Z.scaleY,Z.left,Z.top),oe.drawImage(Z._element,0,0,g,w),ae=oe.getImageData(0,0,g,w).data;for(var te=0;te<y;te+=4)switch(N=m[te],D=m[te+1],A=m[te+2],B=m[te+3],S=ae[te],k=ae[te+1],j=ae[te+2],M=ae[te+3],this.mode){case"multiply":m[te]=N*S/255,m[te+1]=D*k/255,m[te+2]=A*j/255,m[te+3]=B*M/255;break;case"mask":m[te+3]=M;break}},getUniformLocations:function(a,l){return{uTransformMatrix:a.getUniformLocation(l,"uTransformMatrix"),uImage:a.getUniformLocation(l,"uImage")}},sendUniformData:function(a,l){var c=this.calculateMatrix();a.uniform1i(l.uImage,1),a.uniformMatrix3fv(l.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(a,l){s.Image.fromObject(a.image,function(c){var m=s.util.object.clone(a);m.image=c,l(new s.Image.filters.BlendImage(m))})}}(t),function(f){var s=f.fabric||(f.fabric={}),h=Math.pow,d=Math.floor,a=Math.sqrt,l=Math.abs,c=Math.round,m=Math.sin,y=Math.ceil,g=s.Image.filters,w=s.util.createClass;g.Resize=w(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(S,k){return{uDelta:S.getUniformLocation(k,"uDelta"),uTaps:S.getUniformLocation(k,"uTaps")}},sendUniformData:function(S,k){S.uniform2fv(k.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),S.uniform1fv(k.uTaps,this.taps)},retrieveShader:function(S){var k=this.getFilterWindow(),j=this.type+"_"+k;if(!S.programCache.hasOwnProperty(j)){var M=this.generateShader(k);S.programCache[j]=this.createProgram(S.context,M)}return S.programCache[j]},getFilterWindow:function(){var S=this.tempScale;return Math.ceil(this.lanczosLobes/S)},getTaps:function(){for(var S=this.lanczosCreate(this.lanczosLobes),k=this.tempScale,j=this.getFilterWindow(),M=new Array(j),N=1;N<=j;N++)M[N-1]=S(N*k);return M},generateShader:function(M){for(var k=new Array(M),j=this.fragmentSourceTOP,M,N=1;N<=M;N++)k[N-1]=N+".0 * uDelta";return j+="uniform float uTaps["+M+`];
`,j+=`void main() {
`,j+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,j+=`  float sum = 1.0;
`,k.forEach(function(D,A){j+="  color += texture2D(uTexture, vTexCoord + "+D+") * uTaps["+A+`];
`,j+="  color += texture2D(uTexture, vTexCoord - "+D+") * uTaps["+A+`];
`,j+="  sum += 2.0 * uTaps["+A+`];
`}),j+=`  gl_FragColor = color / sum;
`,j+="}",j},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(S){S.webgl?(S.passes++,this.width=S.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=S.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),S.destinationWidth=this.dW,this._setupFrameBuffer(S),this.applyToWebGL(S),this._swapTextures(S),S.sourceWidth=S.destinationWidth,this.height=S.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),S.destinationHeight=this.dH,this._setupFrameBuffer(S),this.applyToWebGL(S),this._swapTextures(S),S.sourceHeight=S.destinationHeight):this.applyTo2d(S)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(S){return function(k){if(k>=S||k<=-S)return 0;if(k<11920929e-14&&k>-11920929e-14)return 1;k*=Math.PI;var j=k/S;return m(k)/k*m(j)/j}},applyTo2d:function(S){var k=S.imageData,j=this.scaleX,M=this.scaleY;this.rcpScaleX=1/j,this.rcpScaleY=1/M;var N=k.width,D=k.height,A=c(N*j),B=c(D*M),Y;this.resizeType==="sliceHack"?Y=this.sliceByTwo(S,N,D,A,B):this.resizeType==="hermite"?Y=this.hermiteFastResize(S,N,D,A,B):this.resizeType==="bilinear"?Y=this.bilinearFiltering(S,N,D,A,B):this.resizeType==="lanczos"&&(Y=this.lanczosResize(S,N,D,A,B)),S.imageData=Y},sliceByTwo:function(S,k,j,M,N){var D=S.imageData,A=.5,B=!1,Y=!1,oe=k*A,Z=j*A,ae=s.filterBackend.resources,te,G,z=0,q=0,X=k,R=0;for(ae.sliceByTwo||(ae.sliceByTwo=document.createElement("canvas")),te=ae.sliceByTwo,(te.width<k*1.5||te.height<j)&&(te.width=k*1.5,te.height=j),G=te.getContext("2d"),G.clearRect(0,0,k*1.5,j),G.putImageData(D,0,0),M=d(M),N=d(N);!B||!Y;)k=oe,j=Z,M<d(oe*A)?oe=d(oe*A):(oe=M,B=!0),N<d(Z*A)?Z=d(Z*A):(Z=N,Y=!0),G.drawImage(te,z,q,k,j,X,R,oe,Z),z=X,q=R,R+=Z;return G.getImageData(z,q,M,N)},lanczosResize:function(S,k,j,M,N){function D(L){var I,K,V,F,J,W,ue,ce,ie,Q,me;for(R.x=(L+.5)*Z,O.x=d(R.x),I=0;I<N;I++){for(R.y=(I+.5)*ae,O.y=d(R.y),J=0,W=0,ue=0,ce=0,ie=0,K=O.x-z;K<=O.x+z;K++)if(!(K<0||K>=k)){Q=d(1e3*l(K-R.x)),X[Q]||(X[Q]={});for(var le=O.y-q;le<=O.y+q;le++)le<0||le>=j||(me=d(1e3*l(le-R.y)),X[Q][me]||(X[Q][me]=oe(a(h(Q*te,2)+h(me*G,2))/1e3)),V=X[Q][me],V>0&&(F=(le*k+K)*4,J+=V,W+=V*A[F],ue+=V*A[F+1],ce+=V*A[F+2],ie+=V*A[F+3]))}F=(I*M+L)*4,Y[F]=W/J,Y[F+1]=ue/J,Y[F+2]=ce/J,Y[F+3]=ie/J}return++L<M?D(L):B}var A=S.imageData.data,B=S.ctx.createImageData(M,N),Y=B.data,oe=this.lanczosCreate(this.lanczosLobes),Z=this.rcpScaleX,ae=this.rcpScaleY,te=2/this.rcpScaleX,G=2/this.rcpScaleY,z=y(Z*this.lanczosLobes/2),q=y(ae*this.lanczosLobes/2),X={},R={},O={};return D(0)},bilinearFiltering:function(S,k,j,M,N){var D,A,B,Y,oe,Z,ae,te,G,z,q,X,R=0,O,L=this.rcpScaleX,I=this.rcpScaleY,K=4*(k-1),V=S.imageData,F=V.data,J=S.ctx.createImageData(M,N),W=J.data;for(ae=0;ae<N;ae++)for(te=0;te<M;te++)for(oe=d(L*te),Z=d(I*ae),G=L*te-oe,z=I*ae-Z,O=4*(Z*k+oe),q=0;q<4;q++)D=F[O+q],A=F[O+4+q],B=F[O+K+q],Y=F[O+K+4+q],X=D*(1-G)*(1-z)+A*G*(1-z)+B*z*(1-G)+Y*G*z,W[R++]=X;return J},hermiteFastResize:function(S,k,j,M,N){for(var D=this.rcpScaleX,A=this.rcpScaleY,B=y(D/2),Y=y(A/2),oe=S.imageData,Z=oe.data,ae=S.ctx.createImageData(M,N),te=ae.data,G=0;G<N;G++)for(var z=0;z<M;z++){for(var q=(z+G*M)*4,X=0,R=0,O=0,L=0,I=0,K=0,V=0,F=(G+.5)*A,J=d(G*A);J<(G+1)*A;J++)for(var W=l(F-(J+.5))/Y,ue=(z+.5)*D,ce=W*W,ie=d(z*D);ie<(z+1)*D;ie++){var Q=l(ue-(ie+.5))/B,me=a(ce+Q*Q);me>1&&me<-1||(X=2*me*me*me-3*me*me+1,X>0&&(Q=4*(ie+J*k),V+=X*Z[Q+3],O+=X,Z[Q+3]<255&&(X=X*Z[Q+3]/250),L+=X*Z[Q],I+=X*Z[Q+1],K+=X*Z[Q+2],R+=X))}te[q]=L/R,te[q+1]=I/R,te[q+2]=K/R,te[q+3]=V/O}return ae},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Contrast=d(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var l=a.imageData,c,y,m=l.data,y=m.length,g=Math.floor(this.contrast*255),w=259*(g+255)/(255*(259-g));for(c=0;c<y;c+=4)m[c]=w*(m[c]-128)+128,m[c+1]=w*(m[c+1]-128)+128,m[c+2]=w*(m[c+2]-128)+128}},getUniformLocations:function(a,l){return{uContrast:a.getUniformLocation(l,"uContrast")}},sendUniformData:function(a,l){a.uniform1f(l.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Saturation=d(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var l=a.imageData,c=l.data,m=c.length,y=-this.saturation,g,w;for(g=0;g<m;g+=4)w=Math.max(c[g],c[g+1],c[g+2]),c[g]+=w!==c[g]?(w-c[g])*y:0,c[g+1]+=w!==c[g+1]?(w-c[g+1])*y:0,c[g+2]+=w!==c[g+2]?(w-c[g+2])*y:0}},getUniformLocations:function(a,l){return{uSaturation:a.getUniformLocation(l,"uSaturation")}},sendUniformData:function(a,l){a.uniform1f(l.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Vibrance=d(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var l=a.imageData,c=l.data,m=c.length,y=-this.vibrance,g,w,S,k;for(g=0;g<m;g+=4)w=Math.max(c[g],c[g+1],c[g+2]),S=(c[g]+c[g+1]+c[g+2])/3,k=Math.abs(w-S)*2/255*y,c[g]+=w!==c[g]?(w-c[g])*k:0,c[g+1]+=w!==c[g+1]?(w-c[g+1])*k:0,c[g+2]+=w!==c[g+2]?(w-c[g+2])*k:0}},getUniformLocations:function(a,l){return{uVibrance:a.getUniformLocation(l,"uVibrance")}},sendUniformData:function(a,l){a.uniform1f(l.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Blur=d(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var l=a.filterBackend.resources,c,m,y=a.imageData.width,g=a.imageData.height;l.blurLayer1||(l.blurLayer1=s.util.createCanvasElement(),l.blurLayer2=s.util.createCanvasElement()),c=l.blurLayer1,m=l.blurLayer2,(c.width!==y||c.height!==g)&&(m.width=c.width=y,m.height=c.height=g);var w=c.getContext("2d"),S=m.getContext("2d"),k=15,j,M,N,D,A=this.blur*.06*.5;for(w.putImageData(a.imageData,0,0),S.clearRect(0,0,y,g),D=-15;D<=k;D++)j=(Math.random()-.5)/4,M=D/k,N=A*M*y+j,S.globalAlpha=1-Math.abs(M),S.drawImage(c,N,j),w.drawImage(m,0,0),S.globalAlpha=1,S.clearRect(0,0,m.width,m.height);for(D=-15;D<=k;D++)j=(Math.random()-.5)/4,M=D/k,N=A*M*g+j,S.globalAlpha=1-Math.abs(M),S.drawImage(c,j,N),w.drawImage(m,0,0),S.globalAlpha=1,S.clearRect(0,0,m.width,m.height);a.ctx.drawImage(c,0,0);var B=a.ctx.getImageData(0,0,c.width,c.height);return w.globalAlpha=1,w.clearRect(0,0,c.width,c.height),B},getUniformLocations:function(a,l){return{delta:a.getUniformLocation(l,"uDelta")}},sendUniformData:function(a,l){var c=this.chooseRightDelta();a.uniform2fv(l.delta,c)},chooseRightDelta:function(){var a=1,l=[0,0],c;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),c=a*this.blur*.12,this.horizontal?l[0]=c:l[1]=c,l}}),h.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Gamma=d(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var l=a.imageData,c=l.data,m=this.gamma,y=c.length,g=1/m[0],w=1/m[1],S=1/m[2],k;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),k=0,y=256;k<y;k++)this.rVals[k]=Math.pow(k/255,g)*255,this.gVals[k]=Math.pow(k/255,w)*255,this.bVals[k]=Math.pow(k/255,S)*255;for(k=0,y=c.length;k<y;k+=4)c[k]=this.rVals[c[k]],c[k+1]=this.gVals[c[k+1]],c[k+2]=this.bVals[c[k+2]]},getUniformLocations:function(a,l){return{uGamma:a.getUniformLocation(l,"uGamma")}},sendUniformData:function(a,l){a.uniform3fv(l.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.Composed=d(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(a)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(a,l){var c=a.subFilters||[],m=c.map(function(g){return new s.Image.filters[g.type](g)}),y=new s.Image.filters.Composed({subFilters:m});return l&&l(y),y}}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.Image.filters,d=s.util.createClass;h.HueRotation=d(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,l=s.util.cos(a),c=s.util.sin(a),m=1/3,y=Math.sqrt(m)*c,g=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+g/3,this.matrix[1]=m*g-y,this.matrix[2]=m*g+y,this.matrix[5]=m*g+y,this.matrix[6]=l+m*g,this.matrix[7]=m*g-y,this.matrix[10]=m*g-y,this.matrix[11]=m*g+y,this.matrix[12]=l+m*g},isNeutralState:function(a){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,a)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),h=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(d),cacheProperties:s.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,l){this.styles=l?l.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=s.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,l,c,m,y,g,w,S=0,k=this._textLines.length;S<k;S++)if(!(this.textAlign!=="justify"&&(S===k-1||this.isEndOfWrapping(S)))&&(m=0,y=this._textLines[S],l=this.getLineWidth(S),l<this.width&&(w=this.textLines[S].match(this._reSpacesAndTabs)))){c=w.length,a=(this.width-l)/c;for(var j=0,M=y.length;j<=M;j++)g=this.__charBounds[S][j],this._reSpaceAndTab.test(y[j])?(g.width+=a,g.kernedWidth+=a,g.left+=m,m+=a):g.left+=m}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return a.width+=l*a.zoomX,a.height+=l*a.zoomY,a},_render:function(a){var l=this.path;l&&!l.isNotVisible()&&l._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,l,c){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(l,c)},calcTextWidth:function(){for(var a=this.getLineWidth(0),l=1,c=this._textLines.length;l<c;l++){var m=this.getLineWidth(l);m>a&&(a=m)}return a},_renderTextLine:function(a,l,c,m,y,g){this._renderChars(a,l,c,m,y,g)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,c,m=a.fillStyle,y,g,w=this._getLeftOffset(),S=this._getTopOffset(),k=0,j=0,M,N,D=this.path,A,B=0,Y=this._textLines.length;B<Y;B++){if(l=this.getHeightOfLine(B),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",B)){S+=l;continue}y=this._textLines[B],c=this._getLineLeftOffset(B),j=0,k=0,g=this.getValueOfPropertyAt(B,0,"textBackgroundColor");for(var oe=0,Z=y.length;oe<Z;oe++)M=this.__charBounds[B][oe],N=this.getValueOfPropertyAt(B,oe,"textBackgroundColor"),D?(a.save(),a.translate(M.renderLeft,M.renderTop),a.rotate(M.angle),a.fillStyle=N,N&&a.fillRect(-M.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),M.width,l/this.lineHeight),a.restore()):N!==g?(A=w+c+k,this.direction==="rtl"&&(A=this.width-A-j),a.fillStyle=g,g&&a.fillRect(A,S,j,l/this.lineHeight),k=M.left,j=M.width,g=N):j+=M.kernedWidth;N&&!D&&(A=w+c+k,this.direction==="rtl"&&(A=this.width-A-j),a.fillStyle=N,a.fillRect(A,S,j,l/this.lineHeight)),S+=l}a.fillStyle=m,this._removeShadow(a)}},getFontCache:function(a){var l=a.fontFamily.toLowerCase();s.charWidthsCache[l]||(s.charWidthsCache[l]={});var c=s.charWidthsCache[l],m=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return c[m]||(c[m]={}),c[m]},_measureChar:function(a,l,c,m){var y=this.getFontCache(l),g=this._getFontDeclaration(l),w=this._getFontDeclaration(m),S=c+a,k=g===w,j,M,N,D=l.fontSize/this.CACHE_FONT_SIZE,A;if(c&&y[c]!==void 0&&(N=y[c]),y[a]!==void 0&&(A=j=y[a]),k&&y[S]!==void 0&&(M=y[S],A=M-N),j===void 0||N===void 0||M===void 0){var B=this.getMeasuringContext();this._setTextStyles(B,l,!0)}return j===void 0&&(A=j=B.measureText(a).width,y[a]=j),N===void 0&&k&&c&&(N=B.measureText(c).width,y[c]=N),k&&M===void 0&&(M=B.measureText(S).width,y[S]=M,A=M-N),{width:j*D,kernedWidth:A*D}},getHeightOfChar:function(a,l){return this.getValueOfPropertyAt(a,l,"fontSize")},measureLine:function(a){var l=this._measureLine(a);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(a){var l=0,c,m,y=this._textLines[a],g,w,S=0,k=new Array(y.length),j=0,M,N,D=this.path,A=this.pathSide==="right";for(this.__charBounds[a]=k,c=0;c<y.length;c++)m=y[c],w=this._getGraphemeBox(m,a,c,g),k[c]=w,l+=w.kernedWidth,g=m;if(k[c]={left:w?w.left+w.width:0,width:0,kernedWidth:0,height:this.fontSize},D){switch(N=D.segmentsInfo[D.segmentsInfo.length-1].length,M=s.util.getPointOnPath(D.path,0,D.segmentsInfo),M.x+=D.pathOffset.x,M.y+=D.pathOffset.y,this.textAlign){case"left":j=A?N-l:0;break;case"center":j=(N-l)/2;break;case"right":j=A?0:N-l;break}for(j+=this.pathStartOffset*(A?-1:1),c=A?y.length-1:0;A?c>=0:c<y.length;A?c--:c++)w=k[c],j>N?j%=N:j<0&&(j+=N),this._setGraphemeOnPath(j,w,M),j+=w.kernedWidth}return{width:l,numOfSpaces:S}},_setGraphemeOnPath:function(a,l,c){var m=a+l.kernedWidth/2,y=this.path,g=s.util.getPointOnPath(y.path,m,y.segmentsInfo);l.renderLeft=g.x-c.x,l.renderTop=g.y-c.y,l.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,l,c,m,y){var g=this.getCompleteStyleDeclaration(l,c),w=m?this.getCompleteStyleDeclaration(l,c-1):{},S=this._measureChar(a,g,m,w),k=S.kernedWidth,j=S.width,M;this.charSpacing!==0&&(M=this._getWidthOfCharSpacing(),j+=M,k+=M);var N={width:j,left:0,height:g.fontSize,kernedWidth:k,deltaY:g.deltaY};if(c>0&&!y){var D=this.__charBounds[l][c-1];N.left=D.left+D.width+S.kernedWidth-S.width}return N},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var l=this._textLines[a],c=this.getHeightOfChar(a,0),m=1,y=l.length;m<y;m++)c=Math.max(this.getHeightOfChar(a,m),c);return this.__lineHeights[a]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,l=0,c=0,m=this._textLines.length;c<m;c++)a=this.getHeightOfLine(c),l+=c===m-1?a/this.lineHeight:a;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,l){a.save();for(var c=0,m=this._getLeftOffset(),y=this._getTopOffset(),g=0,w=this._textLines.length;g<w;g++){var S=this.getHeightOfLine(g),k=S/this.lineHeight,j=this._getLineLeftOffset(g);this._renderTextLine(l,a,this._textLines[g],m+j,y+c+k,g),c+=S}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,l,c,m,y,g){var w=this.getHeightOfLine(g),S=this.textAlign.indexOf("justify")!==-1,k,j,M="",N,D=0,A,B=this.path,Y=!S&&this.charSpacing===0&&this.isEmptyStyles(g)&&!B,oe=this.direction==="ltr",Z=this.direction==="ltr"?1:-1,ae,te=l.canvas.getAttribute("dir");if(l.save(),te!==this.direction&&(l.canvas.setAttribute("dir",oe?"ltr":"rtl"),l.direction=oe?"ltr":"rtl",l.textAlign=oe?"left":"right"),y-=w*this._fontSizeFraction/this.lineHeight,Y){this._renderChar(a,l,g,0,c.join(""),m,y,w),l.restore();return}for(var G=0,z=c.length-1;G<=z;G++)A=G===z||this.charSpacing||B,M+=c[G],N=this.__charBounds[g][G],D===0?(m+=Z*(N.kernedWidth-N.width),D+=N.width):D+=N.kernedWidth,S&&!A&&this._reSpaceAndTab.test(c[G])&&(A=!0),A||(k=k||this.getCompleteStyleDeclaration(g,G),j=this.getCompleteStyleDeclaration(g,G+1),A=s.util.hasStyleChanged(k,j,!1)),A&&(B?(l.save(),l.translate(N.renderLeft,N.renderTop),l.rotate(N.angle),this._renderChar(a,l,g,G,M,-D/2,0,w),l.restore()):(ae=m,this._renderChar(a,l,g,G,M,ae,y,w)),M="",k=j,m+=Z*D,D=0);l.restore()},_applyPatternGradientTransformText:function(a){var l=s.util.createCanvasElement(),c,m=this.width+this.strokeWidth,y=this.height+this.strokeWidth;return l.width=m,l.height=y,c=l.getContext("2d"),c.beginPath(),c.moveTo(0,0),c.lineTo(m,0),c.lineTo(m,y),c.lineTo(0,y),c.closePath(),c.translate(m/2,y/2),c.fillStyle=a.toLive(c),this._applyPatternGradientTransform(c,a),c.fill(),c.createPattern(l,"no-repeat")},handleFiller:function(a,l,c){var m,y;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(m=-this.width/2,y=-this.height/2,a.translate(m,y),a[l]=this._applyPatternGradientTransformText(c),{offsetX:m,offsetY:y}):(a[l]=c.toLive(a,this),this._applyPatternGradientTransform(a,c)):(a[l]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,l){return a.lineWidth=l.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",l.stroke)},_setFillStyles:function(a,l){return this.handleFiller(a,"fillStyle",l.fill)},_renderChar:function(a,l,c,m,y,g,w){var S=this._getStyleDeclaration(c,m),k=this.getCompleteStyleDeclaration(c,m),j=a==="fillText"&&k.fill,M=a==="strokeText"&&k.stroke&&k.strokeWidth,N,D;!M&&!j||(l.save(),j&&(N=this._setFillStyles(l,k)),M&&(D=this._setStrokeStyles(l,k)),l.font=this._getFontDeclaration(k),S&&S.textBackgroundColor&&this._removeShadow(l),S&&S.deltaY&&(w+=S.deltaY),j&&l.fillText(y,g-N.offsetX,w-N.offsetY),M&&l.strokeText(y,g-D.offsetX,w-D.offsetY),l.restore())},setSuperscript:function(a,l){return this._setScript(a,l,this.superscript)},setSubscript:function(a,l){return this._setScript(a,l,this.subscript)},_setScript:function(a,l,c){var m=this.get2DCursorLocation(a,!0),y=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"fontSize"),g=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"deltaY"),w={fontSize:y*c.size,deltaY:g+y*c.baseline};return this.setSelectionStyles(w,a,l),this},_getLineLeftOffset:function(a){var l=this.getLineWidth(a),c=this.width-l,m=this.textAlign,y=this.direction,w,g=0,w=this.isEndOfWrapping(a);return m==="justify"||m==="justify-center"&&!w||m==="justify-right"&&!w||m==="justify-left"&&!w?0:(m==="center"&&(g=c/2),m==="right"&&(g=c),m==="justify-center"&&(g=c/2),m==="justify-right"&&(g=c),y==="rtl"&&(g-=c),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var l=this.measureLine(a),c=l.width;return this.__lineWidths[a]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,l,c){var m=this._getStyleDeclaration(a,l);return m&&typeof m[c]<"u"?m[c]:this[c]},_renderTextDecoration:function(a,l){if(!(!this[l]&&!this.styleHas(l))){for(var c,m,y,g,w,S,k,j,M=this._getLeftOffset(),N=this._getTopOffset(),D,A,B,Y,oe,Z,ae,te,G=this.path,z=this._getWidthOfCharSpacing(),q=this.offsets[l],X=0,R=this._textLines.length;X<R;X++){if(c=this.getHeightOfLine(X),!this[l]&&!this.styleHas(l,X)){N+=c;continue}k=this._textLines[X],Z=c/this.lineHeight,g=this._getLineLeftOffset(X),A=0,B=0,j=this.getValueOfPropertyAt(X,0,l),te=this.getValueOfPropertyAt(X,0,"fill"),D=N+Z*(1-this._fontSizeFraction),m=this.getHeightOfChar(X,0),w=this.getValueOfPropertyAt(X,0,"deltaY");for(var O=0,L=k.length;O<L;O++)if(Y=this.__charBounds[X][O],oe=this.getValueOfPropertyAt(X,O,l),ae=this.getValueOfPropertyAt(X,O,"fill"),y=this.getHeightOfChar(X,O),S=this.getValueOfPropertyAt(X,O,"deltaY"),G&&oe&&ae)a.save(),a.fillStyle=te,a.translate(Y.renderLeft,Y.renderTop),a.rotate(Y.angle),a.fillRect(-Y.kernedWidth/2,q*y+S,Y.kernedWidth,this.fontSize/15),a.restore();else if((oe!==j||ae!==te||y!==m||S!==w)&&B>0){var I=M+g+A;this.direction==="rtl"&&(I=this.width-I-B),j&&te&&(a.fillStyle=te,a.fillRect(I,D+q*m+w,B,this.fontSize/15)),A=Y.left,B=Y.width,j=oe,te=ae,m=y,w=S}else B+=Y.kernedWidth;var I=M+g+A;this.direction==="rtl"&&(I=this.width-I-B),a.fillStyle=ae,oe&&ae&&a.fillRect(I,D+q*m+w,B-z,this.fontSize/15),N+=c}this._removeShadow(a)}},_getFontDeclaration:function(a,l){var c=a||this,m=this.fontFamily,y=s.Text.genericFonts.indexOf(m.toLowerCase())>-1,g=m===void 0||m.indexOf("'")>-1||m.indexOf(",")>-1||m.indexOf('"')>-1||y?c.fontFamily:'"'+c.fontFamily+'"';return[s.isLikelyNode?c.fontWeight:c.fontStyle,s.isLikelyNode?c.fontStyle:c.fontWeight,l?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",g].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var l=a.split(this._reNewline),c=new Array(l.length),m=[`
`],y=[],g=0;g<l.length;g++)c[g]=s.util.string.graphemeSplit(l[g]),y=y.concat(c[g],m);return y.pop(),{_unwrappedLines:c,lines:l,graphemeText:y,graphemeLines:c}},toObject:function(a){var l=d.concat(a),c=this.callSuper("toObject",l);return c.styles=s.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(a,l){this.callSuper("set",a,l);var c=!1,m=!1;if(typeof a=="object")for(var y in a)y==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(y)!==-1,m=m||y==="path";else c=this._dimensionAffectingProps.indexOf(a)!==-1,m=a==="path";return m&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(a,l,c){if(!a)return l(null);var m=s.parseAttributes(a,s.Text.ATTRIBUTE_NAMES),y=m.textAnchor||"left";if(c=s.util.object.extend(c?h(c):{},m),c.top=c.top||0,c.left=c.left||0,m.textDecoration){var g=m.textDecoration;g.indexOf("underline")!==-1&&(c.underline=!0),g.indexOf("overline")!==-1&&(c.overline=!0),g.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in m&&(c.left+=m.dx),"dy"in m&&(c.top+=m.dy),"fontSize"in c||(c.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var w="";"textContent"in a?w=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(w=a.firstChild.data),w=w.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var S=c.strokeWidth;c.strokeWidth=0;var k=new s.Text(w,c),j=k.getScaledHeight()/k.height,M=(k.height+k.strokeWidth)*k.lineHeight-k.height,N=M*j,D=k.getScaledHeight()+N,A=0;y==="center"&&(A=k.getScaledWidth()/2),y==="right"&&(A=k.getScaledWidth()),k.set({left:k.left-A,top:k.top-(D-k.fontSize*(.07+k._fontSizeFraction))/k.lineHeight,strokeWidth:typeof S<"u"?S:1}),l(k)},s.Text.fromObject=function(a,l){var c=h(a),m=a.path;return delete c.path,s.Object._fromObject("Text",c,function(y){y.styles=s.util.stylesFromArray(a.styles,a.text),m?s.Object._fromObject("Path",m,function(g){y.set("path",g),l(y)},"path"):l(y)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var s=typeof f>"u"?this.styles:{line:this.styles[f]};for(var h in s)for(var d in s[h])for(var a in s[h][d])return!1;return!0},styleHas:function(f,s){if(!this.styles||!f||f===""||typeof s<"u"&&!this.styles[s])return!1;var h=typeof s>"u"?this.styles:{0:this.styles[s]};for(var d in h)for(var a in h[d])if(typeof h[d][a][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var s=this.styles,h=0,d,a,l=!0,c=0,m;for(var y in s){d=0;for(var g in s[y]){var m=s[y][g],w=m.hasOwnProperty(f);h++,w?(a?m[f]!==a&&(l=!1):a=m[f],m[f]===this[f]&&delete m[f]):l=!1,Object.keys(m).length!==0?d++:delete s[y][g]}d===0&&delete s[y]}for(var S=0;S<this._textLines.length;S++)c+=this._textLines[S].length;l&&h===c&&(this[f]=a,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var s=this.styles,h,d,a;for(d in s){h=s[d];for(a in h)delete h[a][f],Object.keys(h[a]).length===0&&delete h[a];Object.keys(h).length===0&&delete s[d]}}},_extendStyles:function(f,s){var h=this.get2DCursorLocation(f);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),s)},get2DCursorLocation:function(f,s){typeof f>"u"&&(f=this.selectionStart);for(var h=s?this._unwrappedTextLines:this._textLines,d=h.length,a=0;a<d;a++){if(f<=h[a].length)return{lineIndex:a,charIndex:f};f-=h[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:h[a-1].length<f?h[a-1].length:f}},getSelectionStyles:function(f,s,h){typeof f>"u"&&(f=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||f);for(var d=[],a=f;a<s;a++)d.push(this.getStyleAtPosition(a,h));return d},getStyleAtPosition:function(f,s){var h=this.get2DCursorLocation(f),d=s?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return d||{}},setSelectionStyles:function(f,s,h){typeof s>"u"&&(s=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||s);for(var d=s;d<h;d++)this._extendStyles(d,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,s){var h=this.styles&&this.styles[f];return h?h[s]:null},getCompleteStyleDeclaration:function(f,s){for(var h=this._getStyleDeclaration(f,s)||{},d={},a,l=0;l<this._styleProperties.length;l++)a=this._styleProperties[l],d[a]=typeof h[a]>"u"?this[a]:h[a];return d},_setStyleDeclaration:function(f,s,h){this.styles[f][s]=h},_deleteStyleDeclaration:function(f,s){delete this.styles[f][s]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,h){this.callSuper("initialize",s,h),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,h){this[s]!==h&&(this._fireSelectionChanged(),this[s]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,d=this.canvas.viewportTransform;h.save(),h.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(h),this._clearTextArea(h),s||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,h):this.renderSelection(s,h),h.restore()}},_clearTextArea:function(s){var h=this.width+4,d=this.height+4;s.clearRect(-h/2,-d/2,h,d)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var h=this._getLeftOffset(),d=this._getTopOffset(),a=this._getCursorBoundariesOffsets(s);return{left:h,top:d,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,d,a,l=0,c=0,m,y=this.get2DCursorLocation(s);a=y.charIndex,d=y.lineIndex;for(var g=0;g<d;g++)l+=this.getHeightOfLine(g);h=this._getLineLeftOffset(d);var w=this.__charBounds[d][a];return w&&(c=w.left),this.charSpacing!==0&&a===this._textLines[d].length&&(c-=this._getWidthOfCharSpacing()),m={top:l,left:h+(c>0?c:0)},this.direction==="rtl"&&(m.left*=-1),this.cursorOffsetCache=m,this.cursorOffsetCache},renderCursor:function(s,h){var d=this.get2DCursorLocation(),a=d.lineIndex,l=d.charIndex>0?d.charIndex-1:0,c=this.getValueOfPropertyAt(a,l,"fontSize"),m=this.scaleX*this.canvas.getZoom(),y=this.cursorWidth/m,g=s.topOffset,w=this.getValueOfPropertyAt(a,l,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,l,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(s.left+s.leftOffset-y/2,g+s.top+w,y,c)},renderSelection:function(s,h){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(d),m=this.get2DCursorLocation(a),y=c.lineIndex,g=m.lineIndex,w=c.charIndex<0?0:c.charIndex,S=m.charIndex<0?0:m.charIndex,k=y;k<=g;k++){var j=this._getLineLeftOffset(k)||0,M=this.getHeightOfLine(k),N=0,D=0,A=0;if(k===y&&(D=this.__charBounds[y][w].left),k>=y&&k<g)A=l&&!this.isEndOfWrapping(k)?this.width:this.getLineWidth(k)||5;else if(k===g)if(S===0)A=this.__charBounds[g][S].left;else{var B=this._getWidthOfCharSpacing();A=this.__charBounds[g][S-1].left+this.__charBounds[g][S-1].width-B}N=M,(this.lineHeight<1||k===g&&this.lineHeight>1)&&(M/=this.lineHeight);var Y=s.left+j+D,oe=A-D,Z=M,ae=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",Z=1,ae=M):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(Y=this.width-Y-oe),h.fillRect(Y,s.top+s.topOffset+ae,oe,Z),s.topOffset+=N}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),h=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:h}}}),e.IText.fromObject=function(s,h){var d=e.util.stylesFromArray(s.styles,s.text),a=Object.assign({},s,{styles:d});if(f(a),a.styles)for(var l in a.styles)for(var c in a.styles[l])f(a.styles[l][c]);e.Object._fromObject("IText",a,h,"text")}}(),function(){var f=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var h=s.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,s._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var h=s.canvas;h&&(h._iTextInstances=h._iTextInstances||[],e.util.removeFromArray(h._iTextInstances,s),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,s._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(h){h.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,h,d,a){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",h,{duration:d,onComplete:function(){l.isAborted||s[a]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var h=this,d=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},d)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var h=0,d=s-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)h++,d--;for(;/\S/.test(this._text[d])&&d>-1;)h++,d--;return s-h},findWordBoundaryRight:function(s){var h=0,d=s;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)h++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)h++,d++;return s+h},findLineBoundaryLeft:function(s){for(var h=0,d=s-1;!/\n/.test(this._text[d])&&d>-1;)h++,d--;return s-h},findLineBoundaryRight:function(s){for(var h=0,d=s;!/\n/.test(this._text[d])&&d<this._text.length;)h++,d++;return s+h},searchWordBoundary:function(s,h){for(var d=this._text,a=this._reSpace.test(d[s])?s-1:s,l=d[a],c=e.reNonWord;!c.test(l)&&a>0&&a<d.length;)a+=h,l=d[a];return c.test(l)&&(a+=h===1?0:1),a},selectWord:function(s){s=s||this.selectionStart;var h=this.searchWordBoundary(s,-1),d=this.searchWordBoundary(s,1);this.selectionStart=h,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var h=this.findLineBoundaryLeft(s),d=this.findLineBoundaryRight(s);return this.selectionStart=h,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var h=this.getSelectionStartFromPointer(s.e),d=this.selectionStart,a=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||d===a)&&(d===h||a===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,h,d){var a=d.slice(0,s),l=e.util.string.graphemeSplit(a).length;if(s===h)return{selectionStart:l,selectionEnd:l};var c=d.slice(s,h),m=e.util.string.graphemeSplit(c).length;return{selectionStart:l,selectionEnd:l+m}},fromGraphemeToStringSelection:function(s,h,d){var a=d.slice(0,s),l=a.join("").length;if(s===h)return{selectionStart:l,selectionEnd:l};var c=d.slice(s,h),m=c.join("").length;return{selectionStart:l,selectionEnd:l+m}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(s),d=this.get2DCursorLocation(s),a=d.lineIndex,l=d.charIndex,c=this.getValueOfPropertyAt(a,l,"fontSize")*this.lineHeight,m=h.leftOffset,y=this.calcTransformMatrix(),g={x:h.left+m,y:h.top+h.topOffset+c},w=this.canvas.getRetinaScaling(),S=this.canvas.upperCanvasEl,k=S.width/w,j=S.height/w,M=k-c,N=j-c,D=S.clientWidth/k,A=S.clientHeight/j;return g=e.util.transformPoint(g,y),g=e.util.transformPoint(g,this.canvas.viewportTransform),g.x*=D,g.y*=A,g.x<0&&(g.x=0),g.x>M&&(g.x=M),g.y<0&&(g.y=0),g.y>N&&(g.y=N),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,h){var d=this.get2DCursorLocation(s,!0),a=this.get2DCursorLocation(h,!0),l=d.lineIndex,c=d.charIndex,m=a.lineIndex,y=a.charIndex,g,w;if(l!==m){if(this.styles[l])for(g=c;g<this._unwrappedTextLines[l].length;g++)delete this.styles[l][g];if(this.styles[m])for(g=y;g<this._unwrappedTextLines[m].length;g++)w=this.styles[m][g],w&&(this.styles[l]||(this.styles[l]={}),this.styles[l][c+g-y]=w);for(g=l+1;g<=m;g++)delete this.styles[g];this.shiftLineStyles(m,l-m)}else if(this.styles[l]){w=this.styles[l];var S=y-c,k,j;for(g=c;g<y;g++)delete w[g];for(j in this.styles[l])k=parseInt(j,10),k>=y&&(w[k-S]=w[j],delete w[j])}},shiftLineStyles:function(s,h){var d=f(this.styles);for(var a in this.styles){var l=parseInt(a,10);l>s&&(this.styles[l+h]=d[l],d[l-h]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,h,d,a){var l,c={},m=!1,y=this._unwrappedTextLines[s].length===h;d||(d=1),this.shiftLineStyles(s,d),this.styles[s]&&(l=this.styles[s][h===0?h:h-1]);for(var g in this.styles[s]){var w=parseInt(g,10);w>=h&&(m=!0,c[w-h]=this.styles[s][g],y&&h===0||delete this.styles[s][g])}var S=!1;for(m&&!y&&(this.styles[s+d]=c,S=!0),S&&d--;d>0;)a&&a[d-1]?this.styles[s+d]={0:f(a[d-1])}:l?this.styles[s+d]={0:f(l)}:delete this.styles[s+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(s,h,d,a){this.styles||(this.styles={});var l=this.styles[s],c=l?f(l):{};d||(d=1);for(var m in c){var y=parseInt(m,10);y>=h&&(l[y+d]=c[y],c[y-d]||delete l[y])}if(this._forceClearCache=!0,a){for(;d--;)Object.keys(a[d]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][h+d]=f(a[d]));return}if(l)for(var g=l[h?h-1:1];g&&d--;)this.styles[s][h+d]=f(g)},insertNewStyleBlock:function(s,h,d){for(var a=this.get2DCursorLocation(h,!0),l=[0],c=0,m=0;m<s.length;m++)s[m]===`
`?(c++,l[c]=0):l[c]++;l[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,l[0],d),d=d&&d.slice(l[0]+1)),c&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+l[0],c);for(var m=1;m<c;m++)l[m]>0?this.insertCharStyleObject(a.lineIndex+m,0,l[m],d):d&&this.styles[a.lineIndex+m]&&d[0]&&(this.styles[a.lineIndex+m][0]=d[0]),d=d&&d.slice(l[m]+1);l[m]>0&&this.insertCharStyleObject(a.lineIndex+m,0,l[m],d)},setSelectionStartEndWithShift:function(s,h,d){d<=s?(h===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=d):d>s&&d<h?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(h===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=d)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var s=f.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var s=this.getSelectionStartFromPointer(f),h=this.selectionStart,d=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(h,d,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var s=this.getLocalPointer(f),h=0,d=0,a=0,l=0,c=0,m,y,g=0,w=this._textLines.length;g<w&&a<=s.y;g++)a+=this.getHeightOfLine(g)*this.scaleY,c=g,g>0&&(l+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));m=this._getLineLeftOffset(c),d=m*this.scaleX,y=this._textLines[c],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+d);for(var S=0,k=y.length;S<k&&(h=d,d+=this.__charBounds[c][S].kernedWidth*this.scaleX,d<=s.x);S++)l++;return this._getNewSelectionStartFromOffset(s,h,d,l,k)},_getNewSelectionStartFromOffset:function(f,s,h,d,a){var l=f.x-s,c=h-f.x,m=c>l||c<0?0:1,y=d+m;return this.flipX&&(y=a-y),y>this._text.length&&(y=this._text.length),y}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in s)this[s[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var s=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,a=h.length,l,c,m=a-d,y=this.selectionStart,g=this.selectionEnd,w=y!==g,S,k,j;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var M=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),N=y>M.selectionStart;w?(l=this._text.slice(y,g),m+=g-y):a<d&&(N?l=this._text.slice(g+m,g):l=this._text.slice(y,y-m)),c=h.slice(M.selectionEnd-m,M.selectionEnd),l&&l.length&&(c.length&&(S=this.getSelectionStyles(y,y+1,!1),S=c.map(function(){return S[0]})),w?(k=y,j=g):N?(k=g-l.length,j=g):(k=g,j=g+l.length),this.removeStyleFromTo(k,j)),c.length&&(s&&c.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(S=e.copiedTextStyle),this.insertNewStyleBlock(c,y,S)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(f,s){var h=this._getLineLeftOffset(f),d;return s>0&&(d=this.__charBounds[f][s-1],h+=d.left+d.width),h},getDownCursorOffset:function(f,s){var h=this._getSelectionForOffset(f,s),d=this.get2DCursorLocation(h),a=d.lineIndex;if(a===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-h;var l=d.charIndex,c=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a+1,c),y=this._textLines[a].slice(l);return y.length+m+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(f,s){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,s){var h=this._getSelectionForOffset(f,s),d=this.get2DCursorLocation(h),a=d.lineIndex;if(a===0||f.metaKey||f.keyCode===33)return-h;var l=d.charIndex,c=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a-1,c),y=this._textLines[a].slice(0,l),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+m-y.length+(1-g)},_getIndexOnLine:function(f,s){for(var h=this._textLines[f],d=this._getLineLeftOffset(f),a=d,l=0,c,m,y=0,g=h.length;y<g;y++)if(c=this.__charBounds[f][y].width,a+=c,a>s){m=!0;var w=a-c,S=a,k=Math.abs(w-s),j=Math.abs(S-s);l=j<k?y:y-1;break}return m||(l=h.length-1),l},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,s){var h="get"+f+"CursorOffset",d=this[h](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),d!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var s=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,s,h){var d;if(f.altKey)d=this["findWordBoundary"+h](this[s]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)d=this["findLineBoundary"+h](this[s]);else return this[s]+=h==="Left"?-1:1,!0;if(typeof d<"u"&&this[s]!==d)return this[s]=d,!0},_moveLeft:function(f,s){return this._move(f,s,"Left")},_moveRight:function(f,s){return this._move(f,s,"Right")},moveCursorLeftWithoutShift:function(f){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,s){var h="moveCursor"+f+"With";this._currentCursorOpacity=1,s.shiftKey?h+="Shift":h+="outShift",this[h](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(f,s){typeof s>"u"&&(s=f+1),this.removeStyleFromTo(f,s),this._text.splice(f,s-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,s,h,d){typeof d>"u"&&(d=h),d>h&&this.removeStyleFromTo(h,d);var a=e.util.string.graphemeSplit(f);this.insertNewStyleBlock(a,h,s),this._text=[].concat(this._text.slice(0,h),a,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var h=this._getSVGLeftTopOffsets(),d=this._getSVGTextAndBg(h.textTop,h.textLeft);return this._wrapSVGTextAndBg(d)},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(h){var d=!0,a=this.getSvgTextDecoration(this);return[h.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",a?'text-decoration="'+a+'" ':"",'style="',this.getSvgStyles(d),'"',this.addPaintOrder()," >",h.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(h,d){var a=[],l=[],c=h,m;this._setSVGBg(l);for(var y=0,g=this._textLines.length;y<g;y++)m=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(l,y,d+m,c),this._setSVGTextLineText(a,y,d+m,c),c+=this.getHeightOfLine(y);return{textSpans:a,textBgRects:l}},_createTextCharSpan:function(h,d,a,l){var c=h!==h.trim()||h.match(s),m=this.getSvgSpanStyles(d,c),y=m?'style="'+m+'"':"",g=d.deltaY,w="",S=e.Object.NUM_FRACTION_DIGITS;return g&&(w=' dy="'+f(g,S)+'" '),['<tspan x="',f(a,S),'" y="',f(l,S),'" ',w,y,">",e.util.string.escapeXml(h),"</tspan>"].join("")},_setSVGTextLineText:function(h,d,a,l){var c=this.getHeightOfLine(d),m=this.textAlign.indexOf("justify")!==-1,y,g,w="",S,k,j=0,M=this._textLines[d],N;l+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var D=0,A=M.length-1;D<=A;D++)N=D===A||this.charSpacing,w+=M[D],S=this.__charBounds[d][D],j===0?(a+=S.kernedWidth-S.width,j+=S.width):j+=S.kernedWidth,m&&!N&&this._reSpaceAndTab.test(M[D])&&(N=!0),N||(y=y||this.getCompleteStyleDeclaration(d,D),g=this.getCompleteStyleDeclaration(d,D+1),N=e.util.hasStyleChanged(y,g,!0)),N&&(k=this._getStyleDeclaration(d,D)||{},h.push(this._createTextCharSpan(w,k,a,l)),w="",y=g,a+=j,j=0)},_pushTextBgRect:function(h,d,a,l,c,m){var y=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(d),' x="',f(a,y),'" y="',f(l,y),'" width="',f(c,y),'" height="',f(m,y),`"></rect>
`)},_setSVGTextLineBg:function(h,d,a,l){for(var c=this._textLines[d],m=this.getHeightOfLine(d)/this.lineHeight,y=0,g=0,w,S,k=this.getValueOfPropertyAt(d,0,"textBackgroundColor"),j=0,M=c.length;j<M;j++)w=this.__charBounds[d][j],S=this.getValueOfPropertyAt(d,j,"textBackgroundColor"),S!==k?(k&&this._pushTextBgRect(h,k,a+g,l,y,m),g=w.left,y=w.width,k=S):y+=w.kernedWidth;S&&this._pushTextBgRect(h,S,a+g,l,y,m)},_getFillAttributes:function(h){var d=h&&typeof h=="string"?new e.Color(h):"";return!d||!d.getSource()||d.getAlpha()===1?'fill="'+h+'"':'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(h){for(var d=0,a=0,l=0;l<h;l++)d+=this.getHeightOfLine(l);return a=this.getHeightOfLine(l),{lineTop:d,offset:(this._fontSizeMult-this._fontSizeFraction)*a/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(h){var d=e.Object.prototype.getSvgStyles.call(this,h);return d+" white-space: pre;"}})}(),function(f){var s=f.fabric||(f.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var d=0,a=0,l=0,c={},m=0;m<h.graphemeLines.length;m++)h.graphemeText[l]===`
`&&m>0?(a=0,l++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[l])&&m>0&&(a++,l++),c[m]={line:d,offset:a},l+=h.graphemeLines[m].length,a+=h.graphemeLines[m].length;return c},styleHas:function(h,d){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[d];a&&(d=a.line)}return s.Text.prototype.styleHas.call(this,h,d)},isEmptyStyles:function(h){if(!this.styles)return!0;var d=0,a=h+1,l,c,m=!1,y=this._styleMap[h],g=this._styleMap[h+1];y&&(h=y.line,d=y.offset),g&&(a=g.line,m=a===h,l=g.offset),c=typeof h>"u"?this.styles:{line:this.styles[h]};for(var w in c)for(var S in c[w])if(S>=d&&(!m||S<l))for(var k in c[w][S])return!1;return!0},_getStyleDeclaration:function(h,d){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];if(!a)return null;h=a.line,d=a.offset+d}return this.callSuper("_getStyleDeclaration",h,d)},_setStyleDeclaration:function(h,d,a){var l=this._styleMap[h];h=l.line,d=l.offset+d,this.styles[h][d]=a},_deleteStyleDeclaration:function(h,d){var a=this._styleMap[h];h=a.line,d=a.offset+d,delete this.styles[h][d]},_getLineStyle:function(h){var d=this._styleMap[h];return!!this.styles[d.line]},_setLineStyle:function(h){var d=this._styleMap[h];this.styles[d.line]={}},_wrapText:function(h,d){var a=[],l;for(this.isWrapping=!0,l=0;l<h.length;l++)a=a.concat(this._wrapLine(h[l],l,d));return this.isWrapping=!1,a},_measureWord:function(h,d,a){var l=0,c,m=!0;a=a||0;for(var y=0,g=h.length;y<g;y++){var w=this._getGraphemeBox(h[y],d,y+a,c,m);l+=w.kernedWidth,c=h[y]}return l},_wrapLine:function(h,d,a,Y){var c=0,m=this.splitByGrapheme,y=[],g=[],w=m?s.util.string.graphemeSplit(h):h.split(this._wordJoiners),S="",k=0,j=m?"":" ",M=0,N=0,D=0,A=!0,B=this._getWidthOfCharSpacing(),Y=Y||0;w.length===0&&w.push([]),a-=Y;for(var oe=0;oe<w.length;oe++)S=m?w[oe]:s.util.string.graphemeSplit(w[oe]),M=this._measureWord(S,d,k),k+=S.length,c+=N+M-B,c>a&&!A?(y.push(g),g=[],c=M,A=!0):c+=B,!A&&!m&&g.push(j),g=g.concat(S),N=m?0:this._measureWord([j],d,k),k++,A=!1,M>D&&(D=M);return oe&&y.push(g),D+Y>this.dynamicMinWidth&&(this.dynamicMinWidth=D-B+Y),y},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h){return this.splitByGrapheme?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var d=s.Text.prototype._splitTextIntoLines.call(this,h),a=this._wrapText(d.lines,this.width),l=new Array(a.length),c=0;c<a.length;c++)l[c]=a[c].join("");return d.lines=l,d.graphemeLines=a,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var d in this._styleMap)this._textLines[d]&&(h[this._styleMap[d].line]=1);for(var d in this.styles)h[d]||delete this.styles[d]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),s.Textbox.fromObject=function(h,d){var a=s.util.stylesFromArray(h.styles,h.text),l=Object.assign({},h,{styles:a});return s.Object._fromObject("Textbox",l,d,"text")}}(t),function(){var f=e.controlsUtils,s=f.scaleSkewCursorStyleHandler,h=f.scaleCursorStyleHandler,d=f.scalingEqually,a=f.scalingYOrSkewingX,l=f.scalingXOrSkewingY,c=f.scaleOrSkewActionName,m=e.Object.prototype.controls;if(m.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:c}),m.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:c}),m.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),m.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),m.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:d}),m.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:d}),m.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:d}),m.br=new e.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:d}),m.mtr=new e.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var y=e.Textbox.prototype.controls={};y.mtr=m.mtr,y.tr=m.tr,y.br=m.br,y.tl=m.tl,y.bl=m.bl,y.mt=m.mt,y.mb=m.mb,y.mr=new e.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),y.ml=new e.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()}(Rd)),Rd}var Ye=rR();const Iw=E.createContext(),sR=()=>{const t=E.useContext(Iw);if(!t)throw new Error("useLayer must be used within LayerProvider");return t},aR=({children:t})=>{const[e,r]=E.useState([]),[o,x]=E.useState(null),b=E.useRef(0),C=E.useCallback((D,A="default",B={})=>{const Y={id:`layer-${b.current++}`,name:D,type:A,visible:!0,opacity:B.opacity!==void 0?B.opacity:100,locked:!1,objects:[],metadata:B.metadata||{},createdAt:new Date().toISOString(),zIndex:e.length};return r(oe=>[...oe,Y]),x(Y.id),Y},[e.length]),f=E.useCallback(D=>{r(A=>A.filter(B=>B.id!==D)),o===D&&x(A=>{const B=e.filter(Y=>Y.id!==D);return B.length>0?B[B.length-1].id:null})},[o,e]),s=E.useCallback((D,A)=>{r(B=>B.map(Y=>Y.id===D?{...Y,...A}:Y))},[]),h=E.useCallback(D=>{r(A=>A.map(B=>B.id===D?{...B,visible:!B.visible}:B))},[]),d=E.useCallback((D,A)=>{r(B=>B.map(Y=>Y.id===D?{...Y,opacity:Math.max(0,Math.min(100,A))}:Y))},[]),a=E.useCallback(D=>{r(A=>A.map(B=>B.id===D?{...B,locked:!B.locked}:B))},[]),l=E.useCallback((D,A)=>{r(B=>{const Y=Array.from(B),[oe]=Y.splice(D,1);return Y.splice(A,0,oe),Y.map((Z,ae)=>({...Z,zIndex:ae}))})},[]),c=E.useCallback(D=>{r(A=>{const B=A.findIndex(Y=>Y.id===D);if(B<A.length-1){const Y=Array.from(A);return[Y[B],Y[B+1]]=[Y[B+1],Y[B]],Y.map((oe,Z)=>({...oe,zIndex:Z}))}return A})},[]),m=E.useCallback(D=>{r(A=>{const B=A.findIndex(Y=>Y.id===D);if(B>0){const Y=Array.from(A);return[Y[B],Y[B-1]]=[Y[B-1],Y[B]],Y.map((oe,Z)=>({...oe,zIndex:Z}))}return A})},[]),y=E.useCallback((D,A)=>{r(B=>B.map(Y=>Y.id===D?{...Y,objects:[...Y.objects,A]}:Y)),A&&(A.layerId=D)},[]),g=E.useCallback((D,A)=>{r(B=>B.map(Y=>Y.id===D?{...Y,objects:Y.objects.filter(oe=>oe!==A)}:Y))},[]),w=E.useCallback(D=>e.find(A=>A.id===D),[e]),S=E.useCallback(()=>e.find(D=>D.id===o),[e,o]),k=E.useCallback(D=>{const A=w(D);if(A)return C(`${A.name} Copy`,A.type,{opacity:A.opacity,metadata:{...A.metadata}})},[w,C]),j=E.useCallback(()=>{r([]),x(null)},[]),M=E.useCallback(D=>{const A=e.filter(oe=>D.includes(oe.id));if(A.length<2)return;const B=A.flatMap(oe=>oe.objects),Y=C("Merged Layer","merged",{opacity:100,metadata:{mergedFrom:D}});return B.forEach(oe=>{y(Y.id,oe)}),D.forEach(oe=>f(oe)),Y},[e,C,y,f]),N={layers:e,activeLayerId:o,setActiveLayerId:x,createLayer:C,deleteLayer:f,updateLayer:s,toggleLayerVisibility:h,setLayerOpacity:d,toggleLayerLock:a,reorderLayers:l,moveLayerUp:c,moveLayerDown:m,addObjectToLayer:y,removeObjectFromLayer:g,getLayerById:w,getActiveLayer:S,duplicateLayer:k,clearLayers:j,mergeLayers:M};return p.jsx(Iw.Provider,{value:N,children:t})},Cm=(t,e,r,o)=>{const{createLayer:x,getActiveLayer:b,addObjectToLayer:C,removeObjectFromLayer:f,layers:s,setActiveLayerId:h}=sR(),d=E.useRef(null);E.useEffect(()=>{if(o&&!d.current){const y=s.find(g=>g.type===e&&g.objects.length===0);if(y)d.current=y,h(y.id);else{const g=x(t,e,{metadata:{createdBy:t}});d.current=g}}},[o,t,e,x,s,h]);const a=E.useCallback(y=>{const g=d.current||b();if(g&&y&&(C(g.id,y),y.set({opacity:g.opacity/100,visible:g.visible,layerId:g.id}),r)){const w=()=>{const S=s.find(k=>k.id===g.id);S&&y&&(y.set({opacity:S.opacity/100,visible:S.visible}),r.renderAll())};y._layerUpdateFn=w}},[C,b,s,r]),l=E.useCallback(y=>{const g=d.current||b();g&&y&&(f(g.id,y),y._layerUpdateFn&&delete y._layerUpdateFn)},[f,b]),c=E.useCallback(()=>d.current||b(),[b]),m=E.useCallback(()=>{const y=c();if(!(!y||!r))try{y.objects.forEach(g=>{g&&g.set({opacity:y.opacity/100,visible:y.visible,selectable:!y.locked,evented:!y.locked})}),r.getContext&&r.getContext("2d")&&r.renderAll()}catch(g){console.warn("Error syncing layer to objects:",g)}},[c,r]);return E.useEffect(()=>{m()},[s,m]),E.useEffect(()=>{o||(d.current=null)},[o]),{currentLayer:d.current,addToLayer:a,removeFromLayer:l,getCurrentLayer:c,syncLayerToObjects:m}},oR=({canvas:t,isActive:e,brushColor:r="#ff0000",brushWidth:o=5})=>{const x=E.useRef(null),{addToLayer:b,getCurrentLayer:C}=Cm("Brush","brush",t,e);return Ae.useEffect(()=>{var f;if(t&&e){x.current=new Ye.fabric.PencilBrush(t),x.current.width=o,x.current.color=r,t.isDrawingMode=!0,t.freeDrawingBrush=x.current,t.contextTop&&(t.contextTop.globalCompositeOperation="source-over");const s=h=>{var d;h.path&&(b(h.path),console.log("🖌️ Brush stroke added to layer:",(d=C())==null?void 0:d.name))};return t.on("path:created",s),console.log("🖌️ Brush tool activated with layer:",(f=C())==null?void 0:f.name),()=>{t.off("path:created",s)}}},[t,e,r,o,b,C]),Ae.useEffect(()=>{t&&!e&&(t.isDrawingMode=!1,console.log("🖌️ Brush tool deactivated"))},[t,e]),p.jsxs("div",{className:"brush-tool",children:[p.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Brush Tool - Draw freely"}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("label",{className:"text-xs",children:"Color:"}),p.jsx("input",{type:"color",value:r,onChange:f=>{x.current&&(x.current.color=f.target.value)},className:"w-8 h-6 rounded border"}),p.jsx("label",{className:"text-xs",children:"Width:"}),p.jsx("input",{type:"range",min:"1",max:"20",value:o,onChange:f=>{x.current&&(x.current.width=parseInt(f.target.value))},className:"w-20"}),p.jsxs("span",{className:"text-xs",children:[o,"px"]})]})]})};E.forwardRef(({canvas:t,isActive:e},r)=>{const[o,x]=Ae.useState(20),[b,C]=Ae.useState(!1),f=E.useRef(!1),s=E.useRef(null);return E.useImperativeHandle(r,()=>({togglePanel:()=>C(h=>!h),showPanel:()=>C(!0),hidePanel:()=>C(!1)})),Ae.useEffect(()=>{if(t&&e){t.isDrawingMode=!1,t.selection=!1,t.defaultCursor="none",t.hoverCursor="none";const h=S=>{f.current=!0;const k=t.getPointer(S.e);g(k),m(k)},d=S=>{const k=t.getPointer(S.e);g(k),f.current&&m(k)},a=()=>{f.current=!1},l=S=>{const k=t.getPointer(S.e);g(k)},c=()=>{f.current=!1,w()},m=S=>{const k=t.getObjects(),j=[];k.forEach(M=>{M===t.backgroundImage||M===s.current||y(M,S,o/2)&&j.push(M)}),j.forEach(M=>{t.remove(M)}),j.length>0&&t.renderAll()},y=(S,k,j)=>{const M=S.getBoundingRect(),N=M.left+M.width/2,D=M.top+M.height/2,A=Math.sqrt(Math.pow(k.x-N,2)+Math.pow(k.y-D,2)),B=Math.max(M.width,M.height)/2;return A<j+B},g=S=>{s.current?(s.current.set({left:S.x,top:S.y,radius:o/2}),s.current.setCoords()):(s.current=new Ye.fabric.Circle({left:S.x,top:S.y,radius:o/2,fill:"transparent",stroke:"#ff0000",strokeWidth:2,strokeDashArray:[5,5],selectable:!1,evented:!1,excludeFromExport:!0,originX:"center",originY:"center"}),t.add(s.current)),t.bringToFront(s.current),t.requestRenderAll()},w=()=>{s.current&&(t.remove(s.current),s.current=null,t.renderAll())};return t.on("mouse:down",h),t.on("mouse:move",d),t.on("mouse:up",a),t.on("mouse:over",l),t.on("mouse:leave",c),console.log("🧹 Eraser tool activated"),()=>{t.off("mouse:down",h),t.off("mouse:move",d),t.off("mouse:up",a),t.off("mouse:over",l),t.off("mouse:leave",c),w()}}else t&&!e&&(t.isDrawingMode=!1,t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",s.current&&(t.remove(s.current),s.current=null,t.renderAll()),console.log("🧹 Eraser tool deactivated"))},[t,e,o]),p.jsx("div",{className:"eraser-tool p-3 border-t border-gray-200",children:b?p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"🧹 Eraser Tool"}),p.jsx("button",{onClick:()=>C(!1),className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}),p.jsxs("div",{className:"mb-3",children:[p.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Size: ",o,"px"]}),p.jsx("input",{type:"range",min:"10",max:"100",value:o,onChange:h=>{x(parseInt(h.target.value))},className:"w-full"})]}),p.jsx("div",{className:"mb-3 flex justify-center",children:p.jsx("div",{className:"border-2 border-dashed border-red-400 rounded-full bg-red-50",style:{width:`${Math.min(o,60)}px`,height:`${Math.min(o,60)}px`}})}),p.jsx("button",{onClick:()=>{t&&(t.getObjects().slice().forEach(d=>{d!==t.backgroundImage&&t.remove(d)}),t.renderAll(),console.log("🧹 All objects cleared"))},className:"w-full px-3 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"Clear All"})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-gray-700",children:"🧹 Eraser Active"}),p.jsx("button",{onClick:()=>C(!0),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Settings"})]})})});const lR=({canvas:t,isActive:e,lineColor:r="#ff0000",lineWidth:o=2})=>{const x=E.useRef(!1),b=E.useRef(null),C=E.useCallback(h=>{if(!t||!e)return;const d=t.getPointer(h.e),a=new Ye.fabric.Line([d.x,d.y,d.x,d.y],{stroke:r,strokeWidth:o,selectable:!0,evented:!0});t.add(a),t.setActiveObject(a),b.current=a,x.current=!0,console.log("📏 Line started at:",d)},[t,e,r,o]),f=E.useCallback(h=>{if(!t||!e||!x.current||!b.current)return;const d=t.getPointer(h.e);b.current.set({x2:d.x,y2:d.y}),t.renderAll()},[t,e]),s=E.useCallback(()=>{!t||!e||(x.current=!1,b.current=null,console.log("📏 Line finished"))},[t,e]);return Ae.useEffect(()=>{if(t&&e)return t.isDrawingMode=!1,t.selection=!1,t.on("mouse:down",C),t.on("mouse:move",f),t.on("mouse:up",s),()=>{t.off("mouse:down",C),t.off("mouse:move",f),t.off("mouse:up",s)}},[t,e,C,f,s]),Ae.useEffect(()=>{t&&!e&&(t.selection=!0,console.log("📏 Line tool deactivated"))},[t,e]),p.jsxs("div",{className:"line-tool",children:[p.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Line Tool - Click and drag to draw lines"}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx("label",{className:"text-xs",children:"Color:"}),p.jsx("input",{type:"color",value:r,onChange:h=>{},className:"w-8 h-6 rounded border"}),p.jsx("label",{className:"text-xs",children:"Width:"}),p.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:h=>{},className:"w-20"}),p.jsxs("span",{className:"text-xs",children:[o,"px"]})]})]})},cR=({canvas:t,isActive:e})=>{const r=E.useRef(!1),o=E.useRef(null),x=E.useCallback(f=>{if(!t||!e)return;const s=t.getPointer(f.e),h=t.findTarget(f.e);h&&h!==t.backgroundImage&&(t.setActiveObject(h),r.current=!0,o.current=s,console.log("🖱️ Moving object:",h.type))},[t,e]),b=E.useCallback(f=>{if(!t||!e||!r.current)return;const s=t.getPointer(f.e),h=t.getActiveObject();if(h){const d=s.x-o.current.x,a=s.y-o.current.y;h.set({left:h.left+d,top:h.top+a}),t.renderAll(),o.current=s}},[t,e]),C=E.useCallback(()=>{!t||!e||(r.current=!1,o.current=null,console.log("🖱️ Move finished"))},[t,e]);return Ae.useEffect(()=>{if(t&&e)return t.isDrawingMode=!1,t.selection=!0,t.on("mouse:down",x),t.on("mouse:move",b),t.on("mouse:up",C),()=>{t.off("mouse:down",x),t.off("mouse:move",b),t.off("mouse:up",C)}},[t,e,x,b,C]),Ae.useEffect(()=>{t&&!e&&console.log("🖱️ Move tool deactivated")},[t,e]),p.jsxs("div",{className:"move-tool",children:[p.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Move Tool - Click and drag to move objects"}),p.jsx("div",{className:"text-xs text-gray-500",children:"Click on any object to select and move it"})]})},uR=E.forwardRef(({canvas:t,isActive:e,onClose:r},o)=>{const[x,b]=E.useState(!1),[C,f]=E.useState(!1),[s,h]=E.useState("free"),[d,a]=E.useState(!1),[l,c]=E.useState(null),[m,y]=E.useState(null),[g,w]=E.useState(!1),S=E.useRef(null),k=E.useRef([]),j=E.useCallback(()=>{if(!(t!=null&&t.backgroundImage))return;const G=t.backgroundImage,z=G._element||G._originalElement;if(!z)return;const q=t.getObjects().filter(X=>!X.excludeFromExport).map(X=>({object:X,left:X.left,top:X.top,path:X.path?JSON.parse(JSON.stringify(X.path)):null}));y({src:z.src,canvasWidth:t.width,canvasHeight:t.height,imageScaleX:G.scaleX,imageScaleY:G.scaleY,imageLeft:G.left,imageTop:G.top,objectsState:q}),w(!0)},[t]),M=E.useCallback(()=>{if(!t||!m)return;t.setWidth(m.canvasWidth),t.setHeight(m.canvasHeight);const G=t.getElement();G&&(G.width=m.canvasWidth,G.height=m.canvasHeight,G.style.width=`${m.canvasWidth}px`,G.style.height=`${m.canvasHeight}px`),m.objectsState&&m.objectsState.forEach(z=>{const q=z.object;q.set({left:z.left,top:z.top}),z.path&&q.path&&(q.path=JSON.parse(JSON.stringify(z.path)),q.setCoords())}),Ye.fabric.Image.fromURL(m.src,z=>{z.set({left:m.imageLeft,top:m.imageTop,scaleX:m.imageScaleX,scaleY:m.imageScaleY,selectable:!1,evented:!1}),t.setBackgroundImage(z,()=>{t.renderAll(),w(!1),y(null),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:m.canvasWidth,height:m.canvasHeight,canvas:t}}))})})},[t,m]),N=E.useCallback(()=>{S.current&&t&&(k.current.forEach(G=>t.remove(G)),k.current=[],t.remove(S.current),S.current=null,t.renderAll())},[t]),D=E.useCallback(G=>{if(!t)return;const z={left:0,top:0,width:t.width,height:t.height},q=G.width*G.scaleX,X=G.height*G.scaleY,R=[new Ye.fabric.Rect({left:z.left,top:z.top,width:z.width,height:Math.max(0,G.top-z.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:z.left,top:G.top+X,width:z.width,height:Math.max(0,z.height-(G.top+X)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:z.left,top:G.top,width:Math.max(0,G.left-z.left),height:X,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:G.left+q,top:G.top,width:Math.max(0,z.width-(G.left+q)),height:X,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})];R.forEach(O=>t.add(O)),k.current=R},[t]),A=E.useCallback((G,z,q,X)=>{if(!t)return;N(),S.current=new Ye.fabric.Rect({left:G,top:z,width:q,height:X,fill:"transparent",stroke:"#007bff",strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockRotation:!0,borderColor:"#007bff",cornerColor:"#007bff",cornerSize:12,transparentCorners:!1}),t.add(S.current),D(S.current);const R=()=>D(S.current);S.current.on("moving",R),S.current.on("scaling",R),t.setActiveObject(S.current),t.renderAll()},[t,N,D]),B=E.useCallback(()=>{if(!t||!e)return;f(!0),t.isDrawingMode=!1,t.selection=!1,t.defaultCursor="crosshair",t.hoverCursor="crosshair";const G=t.width*.25,z=t.height*.25,q=t.width*.5,X=t.height*.5;A(G,z,q,X)},[t,e,A]),Y=E.useCallback(()=>{t&&(f(!1),N(),t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[N,t]),oe=E.useCallback(()=>{if(!S.current||!(t!=null&&t.backgroundImage))return;const G=S.current,z=t.backgroundImage,q=z._element||z._originalElement;if(!q)return;j();const X=G.width*G.scaleX,R=G.height*G.scaleY,O=G.left,L=G.top,I=t.getObjects().filter(Q=>!Q.excludeFromExport&&Q!==S.current&&!k.current.includes(Q)),K=q.naturalWidth||q.width,V=q.naturalHeight||q.height,F=K/t.width,J=V/t.height,W={left:O*F,top:L*J,width:X*F,height:R*J},ue={left:Math.max(0,Math.min(W.left,K)),top:Math.max(0,Math.min(W.top,V)),width:Math.min(W.width,K-Math.max(0,W.left)),height:Math.min(W.height,V-Math.max(0,W.top))},ce=document.createElement("canvas");ce.width=Math.max(1,Math.round(ue.width)),ce.height=Math.max(1,Math.round(ue.height));const ie=ce.getContext("2d");ie.imageSmoothingEnabled=!0,ie.imageSmoothingQuality="high",ie.drawImage(q,Math.round(ue.left),Math.round(ue.top),Math.round(ue.width),Math.round(ue.height),0,0,Math.round(ue.width),Math.round(ue.height)),Ye.fabric.Image.fromURL(ce.toDataURL(),Q=>{const me=X/2,le=R/2;Q.set({left:me,top:le,originX:"center",originY:"center",scaleX:1,scaleY:1,selectable:!1,evented:!1}),I.forEach(re=>{const ge=re.left-O,he=re.top-L;re.set({left:ge,top:he}),re.path&&(re.path.forEach(fe=>{fe.length>1&&(fe[1]-=O),fe.length>2&&(fe[2]-=L),fe.length>3&&(fe[3]-=O),fe.length>4&&(fe[4]-=L),fe.length>5&&(fe[5]-=O),fe.length>6&&(fe[6]-=L)}),re.setCoords())}),t.setWidth(X),t.setHeight(R);const H=t.getElement();H&&(H.width=X,H.height=R,H.style.width=`${X}px`,H.style.height=`${R}px`),t.setBackgroundImage(Q,()=>{t.renderAll(),Y(),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:X,height:R,canvas:t}}))})})},[t,j,Y]),Z=E.useCallback(G=>{if(!C||s!=="free"||!t)return;const z=t.getPointer(G.e);a(!0),c(z),N()},[C,s,t,N]),ae=E.useCallback(G=>{if(!C||s!=="free"||!d||!l||!t)return;const z=t.getPointer(G.e),q=Math.min(l.x,z.x),X=Math.min(l.y,z.y),R=Math.abs(z.x-l.x),O=Math.abs(z.y-l.y);R>10&&O>10&&(N(),A(q,X,R,O))},[C,s,d,l,t,N,A]),te=E.useCallback(G=>{!C||s!=="free"||!d||!t||(a(!1),c(null),S.current&&(S.current.set({selectable:!0,evented:!0}),t.renderAll()))},[C,s,d,t]);return E.useImperativeHandle(o,()=>({togglePanel:()=>b(G=>!G),showPanel:()=>b(!0),hidePanel:()=>b(!1),startCrop:B,cancelCrop:Y,undoCrop:M,canUndo:g}),[B,Y,M,g]),E.useEffect(()=>{t&&e?B():t&&!e&&S.current&&(f(!1),k.current.forEach(G=>t.remove(G)),k.current=[],t.remove(S.current),S.current=null,t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[t,e,B]),E.useEffect(()=>{if(!(!t||!C))return s==="free"&&(t.on("mouse:down",Z),t.on("mouse:move",ae),t.on("mouse:up",te)),()=>{t.off("mouse:down",Z),t.off("mouse:move",ae),t.off("mouse:up",te)}},[t,C,s,Z,ae,te]),p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!x&&!C?p.jsx("div",{className:"space-y-3",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(Za,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Tool"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>b(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:14,className:"sm:w-4 sm:h-4"})}),p.jsx(De.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):C?p.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx(De.div,{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:p.jsx(Za,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-primary",children:"Crop Active"})]}),p.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[g&&p.jsx(De.button,{onClick:M,className:"p-2 sm:p-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Undo Last Crop",children:p.jsx(V0,{size:14,className:"sm:w-4 sm:h-4"})}),p.jsx(De.button,{onClick:oe,className:"p-2 sm:p-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-green-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Apply Crop",children:p.jsx(Ok,{size:14,className:"sm:w-4 sm:h-4"})}),p.jsx(De.button,{onClick:Y,className:"p-2 sm:p-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-red-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Cancel",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),p.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:p.jsx("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:"🎯 Click and drag to draw crop area, then adjust as needed. Click ✓ to apply or ✕ to cancel."})})]}):p.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(Za,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Settings"})]}),p.jsx(De.button,{onClick:()=>b(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 shadow-sm hover:shadow-md",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[p.jsxs(De.button,{onClick:B,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[p.jsx(Za,{size:16,className:"sm:w-4 sm:h-5"}),p.jsx("span",{children:"Start Crop"})]}),g&&p.jsxs(De.button,{onClick:M,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[p.jsx(V0,{size:16,className:"sm:w-4 sm:h-5"}),p.jsx("span",{children:"Undo Last Crop"})]})]})]})})}),hR=E.forwardRef(({canvas:t,isActive:e,onClose:r},o)=>{const[x,b]=E.useState(!1),[C,f]=E.useState(100),[s,h]=E.useState(!1),[d,a]=E.useState(null),[l,c]=E.useState(null),m=[25,50,75,100,125,150,200,300,400,500],y=E.useCallback(()=>{t&&c({zoom:t.getZoom(),viewportTransform:t.viewportTransform.slice()})},[t]),g=E.useCallback(()=>{t&&(y(),t.setViewportTransform([1,0,0,1,0,0]),t.setZoom(1),f(100),t.renderAll())},[t,y]),w=E.useCallback(()=>{if(!t)return;y();const oe=t.getZoom(),Z=Math.min(oe*1.2,5);t.setZoom(Z),f(Math.round(Z*100)),t.renderAll()},[t,y]),S=E.useCallback(()=>{if(!t)return;y();const oe=t.getZoom(),Z=Math.max(oe/1.2,.1);t.setZoom(Z),f(Math.round(Z*100)),t.renderAll()},[t,y]),k=E.useCallback(oe=>{if(!t)return;y();const Z=oe/100;t.setZoom(Z),f(oe),t.renderAll()},[t,y]),j=E.useCallback(()=>{t&&(h(!0),t.defaultCursor="grab",t.hoverCursor="grab",t.selection=!1,t.isDrawingMode=!1,y())},[t,y]),M=E.useCallback(()=>{t&&(h(!1),t.defaultCursor="default",t.hoverCursor="move",t.selection=!0)},[t]),N=E.useCallback(oe=>{if(!s||!t)return;const Z=t.getPointer(oe.e);a(Z),t.defaultCursor="grabbing"},[s,t]),D=E.useCallback(oe=>{if(!s||!d||!t)return;const Z=t.getPointer(oe.e),ae=Z.x-d.x,te=Z.y-d.y,G=t.viewportTransform.slice();G[4]+=ae,G[5]+=te,t.setViewportTransform(G),t.renderAll(),a(Z)},[s,d,t]),A=E.useCallback(()=>{s&&(a(null),t.defaultCursor="grab")},[s,t]),B=E.useCallback(oe=>{if(!t)return;oe.preventDefault();const Z=oe.deltaY,ae=t.getZoom(),te=Math.max(.1,Math.min(5,ae-Z*.001));y(),t.setZoom(te),f(Math.round(te*100)),t.renderAll()},[t,y]),Y=E.useCallback(()=>{!t||!l||(t.setZoom(l.zoom),t.setViewportTransform(l.viewportTransform),f(Math.round(l.zoom*100)),t.renderAll())},[t,l]);return E.useImperativeHandle(o,()=>({togglePanel:()=>b(oe=>!oe),showPanel:()=>b(!0),hidePanel:()=>b(!1),zoomIn:w,zoomOut:S,resetZoom:g,setZoom:k,startPan:j,stopPan:M,undoZoom:Y,canUndo:!!l}),[w,S,g,k,j,M,Y,l]),E.useEffect(()=>{if(!(!t||!s))return t.on("mouse:down",N),t.on("mouse:move",D),t.on("mouse:up",A),()=>{t.off("mouse:down",N),t.off("mouse:move",D),t.off("mouse:up",A)}},[t,s,N,D,A]),E.useEffect(()=>{if(t)return t.on("mouse:wheel",B),()=>{t.off("mouse:wheel",B)}},[t,B]),E.useEffect(()=>{if(!t)return;const oe=()=>{g()};return t.on("mouse:dblclick",oe),()=>{t.off("mouse:dblclick",oe)}},[t,g]),E.useEffect(()=>{if(!t)return;const oe=()=>{const Z=t.getZoom();f(Math.round(Z*100))};return t.on("mouse:wheel",oe),()=>{t.off("mouse:wheel",oe)}},[t]),p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!x&&!s?p.jsx("div",{className:"space-y-3",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(Qa,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Zoom Tool"}),p.jsxs("span",{className:"text-xs bg-accent dark:bg-background-primary px-2 py-0.5 rounded-lg text-accent-dark font-semibold",children:[C,"%"]})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>b(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:14,className:"sm:w-4 sm:h-4"})}),p.jsx(De.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):s?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-md",children:p.jsx(oc,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Pan Mode"})]}),p.jsx(De.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsx(De.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl border border-orange-500",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(oc,{size:18,className:"animate-pulse"}),p.jsx("p",{className:"text-sm font-semibold",children:"Click and drag to pan..."})]})}),p.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:p.jsxs("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:[p.jsx("strong",{children:"Click and drag"})," to pan around the canvas.",p.jsx("br",{}),p.jsx("strong",{children:"Mouse wheel"})," to zoom in/out.",p.jsx("br",{}),p.jsx("strong",{children:"Double-click"})," to fit to screen."]})}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(De.button,{onClick:S,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[p.jsx(X0,{size:12}),p.jsx("span",{children:"Out"})]}),p.jsxs(De.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[p.jsx(Qa,{size:12}),p.jsx("span",{children:"In"})]}),p.jsxs(De.button,{onClick:g,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[p.jsx(po,{size:12}),p.jsx("span",{children:"Fit"})]})]})]}):p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(Qa,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Zoom & Pan Controls"})]}),p.jsx(De.button,{onClick:()=>b(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsx("div",{className:"bg-accent dark:bg-background-primary border border-border rounded-xl p-3 sm:p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-text",children:"Current Zoom"}),p.jsxs("span",{className:"text-lg sm:text-xl font-bold text-primary",children:[C,"%"]})]})}),p.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(De.button,{onClick:S,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-md hover:shadow-lg shadow-gray-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[p.jsx(X0,{size:16}),p.jsx("span",{children:"Zoom Out"})]}),p.jsxs(De.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[p.jsx(Qa,{size:16}),p.jsx("span",{children:"Zoom In"})]})]}),p.jsxs(De.button,{onClick:g,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(po,{size:16}),p.jsx("span",{children:"Fit to Screen"})]}),p.jsxs(De.button,{onClick:j,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(oc,{size:16}),p.jsx("span",{children:"Pan Mode"})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"block text-sm font-semibold text-text",children:"Quick Zoom"}),p.jsx("div",{className:"grid grid-cols-5 gap-1",children:m.map(oe=>p.jsxs(De.button,{onClick:()=>k(oe),className:`px-2 py-1.5 text-xs rounded-lg font-semibold shadow-sm ${C===oe?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[oe,"%"]},oe))})]}),l&&p.jsxs(De.button,{onClick:Y,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(_i,{size:16}),p.jsx("span",{children:"Undo Last Zoom"})]}),p.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Nf,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"text-sm text-text",children:[p.jsx("p",{className:"font-semibold mb-1",children:"Tips:"}),p.jsxs("ul",{className:"space-y-1 leading-relaxed",children:[p.jsx("li",{children:"• Use mouse wheel to zoom in/out"}),p.jsx("li",{children:"• Hold Space + drag to pan"}),p.jsx("li",{children:"• Double-click to fit to screen"})]})]})]})})]})})}),vf=({canvas:t,isActive:e=!1,onToolChange:r,onSettingsChange:o,onClose:x,initialSettings:b={}})=>{const[C,f]=E.useState({size:15,minSize:5,maxSize:100,opacity:.8,shape:"circle",pressure:!0,preview:!0,smoothing:.7,hardness:.8,spacing:.25,flow:1,dynamics:!0,antiAliasing:!0,blendMode:"destination-out",...b}),[s,h]=E.useState(!1),[d,a]=E.useState(!1),[l,c]=E.useState(!1),[m,y]=E.useState(null),[g,w]=E.useState([]),[S,k]=E.useState(1),[j,M]=E.useState(0),[N,D]=E.useState([]),[A,B]=E.useState(!1),[Y,oe]=E.useState({totalErased:0,sessionTime:0,undoCount:0});E.useRef({x:0,y:0});const Z=E.useRef(null);E.useRef([]);const ae=E.useRef([]);E.useRef([]);const te=E.useRef(!1);E.useRef(1),E.useRef({x:0,y:0}),E.useRef(0),E.useRef(null),E.useRef(null),E.useRef(Date.now());const G=E.useRef(null);cv(1),cv(.8);const z=E.useMemo(()=>{let W=C.size;if(C.pressure&&(W*=.3+S*.7),C.dynamics&&j>0){const ue=Math.min(j/1e3,1);W*=1-ue*.3}return Math.max(C.minSize,Math.min(C.maxSize,W))},[C.size,C.pressure,C.dynamics,C.minSize,C.maxSize,S,j]),q=E.useCallback(W=>{var ce,ie,Q,me;if(!t||!e)return;(ie=(ce=W.e)==null?void 0:ce.preventDefault)==null||ie.call(ce),(me=(Q=W.e)==null?void 0:Q.stopPropagation)==null||me.call(Q),t.discardActiveObject();const ue=t.getPointer(W.e);te.current=!0,c(!0),Z.current=ue,console.log(`

🧹🧹🧹 =============== MOUSE DOWN - ERASING STARTED ===============`),console.log("📍 Mouse down at:",ue),console.log("🎨 Canvas objects count:",t.getObjects().length),console.log("⚙️ isMouseDownRef.current:",te.current),I(ue)},[t,e]),X=E.useCallback(W=>{if(!t||!e)return;const ue=t.getPointer(W.e);y(ue);const ce=t.contextTop;ce&&(ce.save(),ce.clearRect(0,0,t.width,t.height),ce.strokeStyle="#ff0000",ce.lineWidth=2,ce.setLineDash([5,5]),ce.beginPath(),ce.arc(ue.x,ue.y,C.size/2,0,Math.PI*2),ce.stroke(),ce.restore()),te.current?(console.log("🖱️ MOUSE MOVE (dragging) at:",ue,"| isMouseDown:",te.current),I(ue)):console.log("👆 MOUSE MOVE (hover) at:",ue,"| isMouseDown:",te.current)},[t,e,C.size]),R=E.useCallback(()=>{!t||!e||(console.log("🛑 =============== MOUSE UP - ERASING FINISHED ==============="),console.log("⚙️ Setting isMouseDownRef.current to false"),te.current=!1,c(!1),Z.current=null,console.log(`✅ Erasing session ended

`))},[t,e]),O=E.useCallback(()=>{y(null),te.current&&R()},[R]),L=E.useCallback((W,ue,ce,ie,Q,me)=>{const le=W-ce,H=ue-ie,re=Q-ce,ge=me-ie,he=le*re+H*ge,fe=re*re+ge*ge;let Se=-1;fe!==0&&(Se=he/fe);let $,ne;Se<0?($=ce,ne=ie):Se>1?($=Q,ne=me):($=ce+Se*re,ne=ie+Se*ge);const ee=W-$,we=ue-ne;return Math.sqrt(ee*ee+we*we)},[]),I=E.useCallback(W=>{if(!t)return;console.log(`
🧹 ==================== PERFORM ERASE ACTION ====================`),console.log("🎯 Eraser position:",W),console.log("📏 Eraser size:",C.size),console.log("🔍 Tolerance:",8);const ue=t.getObjects(),ce=[],ie=8;if(console.log("📦 Total objects on canvas:",ue.length),ue.length===0){console.log("⚠️ No objects on canvas to erase!");return}ue.forEach((Q,me)=>{var H;if(Q===t.backgroundImage||Q._isPreview){console.log(`Object ${me}: SKIPPED (background/preview)`);return}let le=!1;if(console.log(`
--- Object ${me} ---`),console.log("Object type:",Q.type),console.log("Object position - left:",Q.left,"top:",Q.top),console.log("Stroke width:",Q.strokeWidth),Q.type==="line"){const re=Q.x1+Q.left,ge=Q.y1+Q.top,he=Q.x2+Q.left,fe=Q.y2+Q.top;console.log("Line endpoints:",{x1:re,y1:ge,x2:he,y2:fe});const Se=L(W.x,W.y,re,ge,he,fe),ne=(Q.strokeWidth||1)/2+ie;console.log("Distance to line:",Se.toFixed(2),"Threshold:",ne.toFixed(2)),Se<=ne?(le=!0,console.log("✅ WILL ERASE - within threshold")):console.log("❌ NO ERASE - too far from line")}else if(Q.type==="path"){if(console.log("🎨 PATH OBJECT FOUND"),console.log("   Path points count:",((H=Q.path)==null?void 0:H.length)||0),console.log("   Stroke color:",Q.stroke),console.log("   Stroke width:",Q.strokeWidth),Q.path&&Q.path.length>0){const ge=(Q.strokeWidth||1)/2+ie;console.log("   🎯 Threshold for hit detection:",ge.toFixed(2),"px"),console.log("   📍 First 5 path points:",Q.path.slice(0,5).map(($,ne)=>{var ee,we;return`[${ne}]: [${(ee=$[1])==null?void 0:ee.toFixed(1)}, ${(we=$[2])==null?void 0:we.toFixed(1)}]`}).join(", "));let he=1/0,fe=null,Se=[];for(let $=0;$<Q.path.length;$++){const ne=Q.path[$];if(ne.length>=3){const ee=ne[1],we=ne[2],Ce=Math.sqrt(Math.pow(W.x-ee,2)+Math.pow(W.y-we,2));if(Ce<he&&(he=Ce,fe={px:ee,py:we,index:$,distance:Ce.toFixed(2)}),Ce<=ge&&(le=!0,Se.push({index:$,distance:Ce.toFixed(2)})),$>0&&Q.path[$-1].length>=3){const Te=Q.path[$-1][1],Ee=Q.path[$-1][2],Ne=L(W.x,W.y,Te,Ee,ee,we);Ne<he&&(he=Ne,fe={px:ee,py:we,index:$,distance:Ne.toFixed(2),type:"line-segment"}),Ne<=ge&&(le=!0,Se.push({index:`${$-1}-${$}`,distance:Ne.toFixed(2),type:"line"}))}}}le?(console.log(`   ✅ HIT DETECTED! - Hit ${Se.length} points/segments:`,Se),console.log("   🔪 Instead of partial erase, removing entire object for now..."),le=!0,console.log("   ⚠️ Marking object for complete removal")):console.log(`   ❌ NO HIT - Closest distance: ${he.toFixed(2)}px at`,fe)}}else{const re=Q.getBoundingRect();if(W.x>=re.left-ie&&W.x<=re.left+re.width+ie&&W.y>=re.top-ie&&W.y<=re.top+re.height+ie)if(Q.containsPoint){const ge=new Ye.fabric.Point(W.x,W.y);le=Q.containsPoint(ge)}else le=!0}le&&(console.log("⭐ Adding to removal list"),ce.push(Q))}),console.log(`
📊 ========== SUMMARY ==========`),console.log("Objects marked for complete removal:",ce.length),ce.length>0?(ce.forEach((Q,me)=>{console.log(`   🗑️ Removing object ${me}:`,Q.type),t.remove(Q)}),t.requestRenderAll(),console.log("✅ Successfully removed",ce.length,"objects")):console.log("ℹ️ No objects marked for complete removal"),console.log("📦 Final canvas objects count:",t.getObjects().length),console.log(`======================================================
`)},[t,z,L,C.size]),K=E.useCallback(W=>{f(ue=>{const ce={...ue,...W};return o==null||o(ce),ce})},[o]);E.useCallback(()=>{if(ae.current.length>0){const W=ae.current.pop();t.loadFromJSON(W,()=>{t.renderAll(),console.log("⏪ Undo انجام شد")})}},[t]);const V=E.useCallback(()=>{if(!t)return;const W=JSON.stringify(t.toJSON());ae.current.push(W),t.getObjects().forEach(ce=>{ce!==t.backgroundImage&&t.remove(ce)}),t.renderAll(),w([]),console.log("🗑️ همه objects پاک شدند")},[t]),F=E.useCallback(()=>{if(!t||!m)return;const W=t.contextTop;W&&(W.save(),W.clearRect(0,0,t.width,t.height),W.strokeStyle="#ff0000",W.lineWidth=2,W.setLineDash([5,5]),W.beginPath(),W.arc(m.x,m.y,z/2,0,Math.PI*2),W.stroke(),W.restore())},[t,m,z]),J=E.useRef({handleMouseDown:null,handleMouseMove:null,handleMouseUp:null,handleMouseLeave:null});return E.useEffect(()=>{J.current.handleMouseDown=q,J.current.handleMouseMove=X,J.current.handleMouseUp=R,J.current.handleMouseLeave=O}),E.useEffect(()=>{if(!t||!e)return;t.discardActiveObject(),t.renderAll();const W=Q=>{var me,le;return(le=(me=J.current).handleMouseDown)==null?void 0:le.call(me,Q)},ue=Q=>{var me,le;return(le=(me=J.current).handleMouseMove)==null?void 0:le.call(me,Q)},ce=Q=>{var me,le;return(le=(me=J.current).handleMouseUp)==null?void 0:le.call(me,Q)},ie=Q=>{var me,le;return(le=(me=J.current).handleMouseLeave)==null?void 0:le.call(me,Q)};return t.on("mouse:down",W),t.on("mouse:move",ue),t.on("mouse:up",ce),t.on("mouse:leave",ie),()=>{t.off("mouse:down",W),t.off("mouse:move",ue),t.off("mouse:up",ce),t.off("mouse:leave",ie)}},[t,e]),E.useEffect(()=>{F()},[F]),E.useEffect(()=>{t&&e?(t.defaultCursor="crosshair",t.hoverCursor="crosshair",t.isDrawingMode=!1,t.selection=!1,t.renderAll()):t&&!e&&(t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[t,e]),E.useEffect(()=>{if(t&&!e){const W=t.contextTop;W&&W.clearRect(0,0,t.width,t.height)}},[t,e]),E.useEffect(()=>{const W=ue=>{G.current&&!G.current.contains(ue.target)&&h(!1)};return document.addEventListener("mousedown",W),document.addEventListener("touchstart",W),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchstart",W)}},[s]),p.jsx(De.div,{ref:G,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:d?p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:p.jsx(Ud,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Eraser Tool"})]}),p.jsx(De.button,{onClick:()=>a(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("label",{className:"text-sm font-semibold text-text",children:"Size"}),p.jsxs("span",{className:"text-xs text-text-muted",children:[z,"px"]})]}),p.jsx("input",{type:"range",min:C.minSize,max:C.maxSize,value:C.size,onChange:W=>K({size:parseInt(W.target.value)}),className:"w-full h-2 bg-accent rounded-lg appearance-none cursor-pointer slider"}),p.jsxs("div",{className:"flex justify-between text-xs text-text-muted mt-1",children:[p.jsxs("span",{children:[C.minSize,"px"]}),p.jsxs("span",{children:[C.maxSize,"px"]})]})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Shape"}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"circle",label:"Circle",icon:Mf},{value:"square",label:"Square",icon:Ps},{value:"line",label:"Line",icon:Ar}].map(({value:W,label:ue,icon:ce})=>p.jsxs(De.button,{onClick:()=>K({shape:W}),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${C.shape===W?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[p.jsx(ce,{size:18}),p.jsx("span",{className:"text-xs font-semibold",children:ue})]},W))})]}),p.jsx("div",{className:"flex items-center justify-center bg-accent dark:bg-background-primary rounded-xl border border-border p-4",children:p.jsx("div",{className:`border-2 border-dashed border-red-400 bg-red-100 ${C.shape==="square"?"":"rounded-full"}`,style:{width:`${Math.min(z,60)}px`,height:C.shape==="line"?"4px":`${Math.min(z,60)}px`}})}),p.jsxs(De.button,{onClick:V,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(Dc,{size:18}),p.jsx("span",{children:"Clear All"})]}),g.length>0&&p.jsxs(De.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-xl text-sm text-orange-800 dark:text-orange-300",children:[g.length," objects erased"]})]}):p.jsx("div",{className:"space-y-3",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:p.jsx(Ud,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Eraser Tool"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>a(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:14,className:"sm:w-4 sm:h-4"})}),p.jsx(De.button,{onClick:x,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]})})})};vf.propTypes={canvas:Qt.object,isActive:Qt.bool,onToolChange:Qt.func,onSettingsChange:Qt.func,onClose:Qt.func,initialSettings:Qt.object};const Vw=E.createContext(),Uw=()=>{const t=E.useContext(Vw);if(!t)throw new Error("useHistogram must be used within HistogramProvider");return t},dR=({children:t})=>{const[e,r]=E.useState(null),[o,x]=E.useState(null),[b,C]=E.useState("gray"),[f,s]=E.useState(null),h=E.useCallback((l,c,m=null)=>{r(l),x(c),s(m)},[]),d=E.useCallback(()=>{r(null),x(null),s(null)},[]),a=E.useCallback(l=>{C(l)},[]);return p.jsx(Vw.Provider,{value:{histogramData:e,selectedPoint:o,currentChannel:b,selectionRegion:f,updateHistogram:h,clearHistogram:d,changeChannel:a},children:t})},fR=({canvas:t,isActive:e,onClose:r})=>{const[o,x]=E.useState("area"),[b,C]=E.useState(!1),[f,s]=E.useState(null),[h,d]=E.useState(!1),a=E.useRef(null),l=E.useRef([]),{updateHistogram:c}=Uw(),{addToLayer:m,removeFromLayer:y}=Cm("Histogram Selection","histogram",t,e),g=E.useCallback(Z=>{const ae={red:new Array(256).fill(0),green:new Array(256).fill(0),blue:new Array(256).fill(0),gray:new Array(256).fill(0)};for(let te=0;te<Z.length;te+=4){const G=Z[te],z=Z[te+1],q=Z[te+2],X=Math.round(.299*G+.587*z+.114*q);ae.red[G]++,ae.green[z]++,ae.blue[q]++,ae.gray[X]++}return ae},[]),w=E.useCallback((Z,ae)=>{if(!t)return null;try{const z=t.getContext("2d").getImageData(Z,ae,1,1).data;return{r:z[0],g:z[1],b:z[2],a:z[3]}}catch(te){return console.error("Error getting pixel data:",te),null}},[t]),S=E.useCallback(Z=>{let ae=0,te=0,G=0,z=0;const q=Z.data,X=q.length/4;for(let R=0;R<q.length;R+=4)ae+=q[R],te+=q[R+1],G+=q[R+2],z+=q[R+3];return{r:Math.round(ae/X),g:Math.round(te/X),b:Math.round(G/X),a:Math.round(z/X)}},[]),k=E.useCallback(Z=>{if(!t)return;const ae={left:0,top:0,width:t.width,height:t.height};let te=[];if(Z.type==="circle"){const G=new Ye.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:ae.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),z=new Ye.fabric.Circle({left:Z.left,top:Z.top,radius:Z.radius,fill:"transparent",stroke:"transparent",originX:"center",originY:"center",selectable:!1,evented:!1,excludeFromExport:!0,globalCompositeOperation:"destination-out"});te=[G,z]}else if(Z.type==="rect"){const G=Z.width*(Z.scaleX||1),z=Z.height*(Z.scaleY||1);te=[new Ye.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:Math.max(0,Z.top-ae.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:ae.left,top:Z.top+z,width:ae.width,height:Math.max(0,ae.height-(Z.top+z)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:ae.left,top:Z.top,width:Math.max(0,Z.left-ae.left),height:z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Ye.fabric.Rect({left:Z.left+G,top:Z.top,width:Math.max(0,ae.width-(Z.left+G)),height:z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]}else Z.type==="line"&&(te=[new Ye.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:ae.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]);te.forEach(G=>t.add(G)),l.current=te},[t]),j=E.useCallback(()=>{if(t)try{l.current.forEach(Z=>{Z&&(t.remove(Z),y(Z))}),l.current=[],a.current&&(t.remove(a.current),y(a.current),a.current=null),t.getContext&&t.getContext("2d")&&t.renderAll()}catch(Z){console.warn("Error removing selection objects:",Z)}},[t,y]),M=E.useCallback(Z=>{const ae=Math.round(Z.x),te=Math.round(Z.y);console.log("📍 Point Selection:"),console.log("  Position:",{x:ae,y:te});const G=w(ae,te);console.log("  Pixel at point:",G);try{const z=t.getContext("2d"),q=50,X=z.getImageData(Math.max(0,ae-q),Math.max(0,te-q),Math.min(q*2,t.width-(ae-q)),Math.min(q*2,t.height-(te-q)));console.log("  Analyzed pixels:",X.data.length/4),console.log("  Area size:",X.width,"x",X.height);const R=g(X.data);console.log("  Histogram calculated - Red channel sample:",R.red.slice(0,10));const O=new Ye.fabric.Circle({left:ae,top:te,radius:q,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,originX:"center",originY:"center",selectable:!1,evented:!1});c(R,{x:ae,y:te,pixel:G,mode:"point"},{type:"point",x:ae,y:te,radius:q,fabricObject:O}),j(),a.current=O,t.add(O),m(O),k(O),l.current.forEach(I=>m(I)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,w,g,c,j,k,m]),N=E.useCallback((Z,ae,te,G)=>{console.log("🔲 Area Selection:"),console.log("  Start:",{x:Z,y:ae}),console.log("  End:",{x:te,y:G});try{const z=t.getContext("2d"),q=Math.min(Z,te),X=Math.min(ae,G),R=Math.abs(te-Z),O=Math.abs(G-ae);console.log("  Rectangle:",{left:q,top:X,width:R,height:O});const L=z.getImageData(q,X,R,O);console.log("  Analyzed pixels:",L.data.length/4);const I=g(L.data),K=S(L);console.log("  Average pixel:",K),console.log("  Histogram calculated - Red channel sample:",I.red.slice(0,10));const V=new Ye.fabric.Rect({left:q,top:X,width:R,height:O,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),F={type:"area",left:q,top:X,width:R,height:O,fabricObject:V};c(I,{x:Math.round((Z+te)/2),y:Math.round((ae+G)/2),pixel:K,mode:"area",width:R,height:O},F),j(),a.current=V,t.add(V),m(V),k(V),l.current.forEach(J=>m(J)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,g,S,c,j,k,m]),D=E.useCallback((Z,ae,te,G)=>{console.log("➖ Line Selection:"),console.log("  Start:",{x:Z,y:ae}),console.log("  End:",{x:te,y:G});try{const z=t.getContext("2d"),q=[],X=Math.abs(te-Z),R=Math.abs(G-ae),O=Z<te?1:-1,L=ae<G?1:-1;let I=X-R,K=Z,V=ae;for(;q.push({x:K,y:V}),!(K===te&&V===G);){const Q=2*I;Q>-R&&(I-=R,K+=O),Q<X&&(I+=X,V+=L)}console.log("  Points on line:",q.length),console.log("  First 5 points:",q.slice(0,5));const F=[];q.forEach(Q=>{const me=z.getImageData(Q.x,Q.y,1,1);F.push(...Array.from(me.data))}),console.log("  Total pixels analyzed:",F.length/4);const J=g(new Uint8ClampedArray(F)),W=S({data:new Uint8ClampedArray(F)}),ue=Math.round(Math.sqrt(X*X+R*R));console.log("  Line length:",ue,"pixels"),console.log("  Average pixel:",W),console.log("  Histogram calculated - Red channel sample:",J.red.slice(0,10));const ce=new Ye.fabric.Line([Z,ae,te,G],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),ie={type:"line",x1:Z,y1:ae,x2:te,y2:G,length:ue,fabricObject:ce};c(J,{x:Math.round((Z+te)/2),y:Math.round((ae+G)/2),pixel:W,mode:"line",length:ue},ie),j(),a.current=ce,t.add(ce),m(ce),k(ce),l.current.forEach(Q=>m(Q)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,g,S,c,j,k,m]),A=E.useCallback(Z=>{if(!t||!e||!b)return;const ae=t.getPointer(Z.e);s(ae),o==="point"&&(M(ae),C(!1),t.defaultCursor="default",t.hoverCursor="move")},[t,e,b,o,M]),B=E.useCallback(Z=>{if(!t||!e||!b||!f||o==="point")return;const ae=t.getPointer(Z.e);if(j(),o==="area"){const te=new Ye.fabric.Rect({left:Math.min(f.x,ae.x),top:Math.min(f.y,ae.y),width:Math.abs(ae.x-f.x),height:Math.abs(ae.y-f.y),fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=te,t.add(te)}else if(o==="line"){const te=new Ye.fabric.Line([f.x,f.y,ae.x,ae.y],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=te,t.add(te)}t.renderAll()},[t,e,b,f,o,j]),Y=E.useCallback(Z=>{if(!t||!e||!b||!f||o==="point")return;const ae=t.getPointer(Z.e);o==="area"?N(f.x,f.y,ae.x,ae.y):o==="line"&&D(Math.round(f.x),Math.round(f.y),Math.round(ae.x),Math.round(ae.y)),C(!1),s(null),t.defaultCursor="default",t.hoverCursor="move"},[t,e,b,f,o,N,D]),oe=E.useCallback(()=>{t&&(C(!0),t.defaultCursor="crosshair",t.hoverCursor="crosshair")},[t]);return E.useEffect(()=>{if(!(!t||!e))return t.on("mouse:down",A),t.on("mouse:move",B),t.on("mouse:up",Y),()=>{t.off("mouse:down",A),t.off("mouse:move",B),t.off("mouse:up",Y)}},[t,e,A,B,Y]),E.useEffect(()=>{e&&t?oe():!e&&t&&(C(!1),s(null),j(),t.defaultCursor="default",t.hoverCursor="move")},[e,t,j]),p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!h&&!b?p.jsx("div",{className:"space-y-3",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(eo,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Histogram Tool"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>{d(!0),C(!1)},className:"p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:16})}),p.jsx(De.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:16})})]})]})}):b?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(eo,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>{d(!0),C(!1)},className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx(De.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),p.jsx(De.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl border border-primary",children:p.jsxs("div",{className:"flex items-center gap-2",children:[o==="point"&&p.jsx(cd,{size:18,className:"animate-pulse"}),o==="area"&&p.jsx(Ps,{size:18,className:"animate-pulse"}),o==="line"&&p.jsx(Ar,{size:18,className:"animate-pulse"}),p.jsxs("p",{className:"text-sm font-semibold",children:[o==="point"&&"Click anywhere on the image...",o==="area"&&"Click and drag to select area...",o==="line"&&"Click and drag to draw line..."]})]})})]}):p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:p.jsx(eo,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),p.jsx(De.button,{onClick:()=>d(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Selection Mode"}),p.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"point",label:"Point",icon:cd},{mode:"area",label:"Area",icon:Ps},{mode:"line",label:"Line",icon:Ar}].map(({mode:Z,label:ae,icon:te})=>p.jsxs(De.button,{onClick:()=>x(Z),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${o===Z?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[p.jsx(te,{size:18}),p.jsx("span",{className:"text-xs font-semibold",children:ae})]},Z))})]}),p.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Nf,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),p.jsxs("p",{className:"text-sm text-text leading-relaxed",children:[o==="point"&&"Click on a point to analyze 50px radius around it",o==="area"&&"Click and drag to select a rectangular area",o==="line"&&"Click and drag to draw a line across the image"]})]})}),p.jsxs(De.button,{onClick:oe,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[o==="point"&&p.jsx(cd,{size:18}),o==="area"&&p.jsx(Ps,{size:18}),o==="line"&&p.jsx(Ar,{size:18}),p.jsxs("span",{children:["Start ",o==="point"?"Point":o==="area"?"Area":"Line"," Selection"]})]})]})})},Hw=E.createContext(),mR=()=>{const t=E.useContext(Hw);if(!t)throw new Error("useIntensityProfile must be used within IntensityProfileProvider");return t},gR=({children:t})=>{const[e,r]=E.useState([]),[o,x]=E.useState(null),[b,C]=E.useState(null),f=E.useCallback(c=>{const m={id:`profile-${Date.now()}`,timestamp:new Date().toISOString(),...c};return r(y=>[...y,m]),x(m.id),m},[]),s=E.useCallback(c=>{r(m=>m.filter(y=>y.id!==c)),o===c&&x(null)},[o]),h=E.useCallback((c,m)=>{r(y=>y.map(g=>g.id===c?{...g,...m}:g))},[]),d=E.useCallback(()=>{r([]),x(null),C(null)},[]),a=E.useCallback(()=>e.find(c=>c.id===o),[e,o]),l={profiles:e,activeProfileId:o,selectedRegion:b,setActiveProfileId:x,setSelectedRegion:C,addProfile:f,removeProfile:s,updateProfile:h,clearProfiles:d,getActiveProfile:a};return p.jsx(Hw.Provider,{value:l,children:t})},$w=()=>{try{const t=localStorage.getItem("intensityProfileLineSpacing");return t?parseInt(t):50}catch{return 50}},ic={current:$w()},pR=({canvas:t,isActive:e,onClose:r})=>{const[o,x]=E.useState("parallel-lines"),[b,C]=E.useState(!1),[f,s]=E.useState(!1),[h,d]=E.useState($w()),a=E.useRef(null),l=E.useRef([]),c=E.useRef(null),m=E.useRef({mouseDown:null,mouseMove:null,mouseUp:null}),{addProfile:y,selectedRegion:g,setSelectedRegion:w}=mR(),{addToLayer:S,removeFromLayer:k,getCurrentLayer:j}=Cm("Intensity Profile","intensity-profile",t,e);E.useEffect(()=>{ic.current=h},[h]);const M=E.useCallback((te,G,z,q)=>{if(!t)return null;try{const X=t.getContext("2d"),R=[],O=Math.abs(z-te),L=Math.abs(q-G),I=te<z?1:-1,K=G<q?1:-1;let V=O-L,F=Math.round(te),J=Math.round(G);const W=Math.round(z),ue=Math.round(q);for(;;){const ie=X.getImageData(F,J,1,1).data,Q=.299*ie[0]+.587*ie[1]+.114*ie[2];if(R.push({x:F,y:J,r:ie[0],g:ie[1],b:ie[2],intensity:Q,distance:Math.sqrt((F-te)**2+(J-G)**2)}),F===W&&J===ue)break;const me=2*V;me>-L&&(V-=L,F+=I),me<O&&(V+=O,J+=K)}return R}catch(X){return console.error("Error calculating line intensity:",X),null}},[t]),N=E.useCallback((te,G,z,q,X)=>{if(!t)return null;try{const R=t.getContext("2d"),O=z-te,L=q-G,I=Math.sqrt(O*O+L*L),K=O/I,F=-(L/I),J=K,W={x1:te+F*X/2,y1:G+J*X/2,x2:z+F*X/2,y2:q+J*X/2},ue={x1:te-F*X/2,y1:G-J*X/2,x2:z-F*X/2,y2:q-J*X/2},ce=Math.ceil(I),ie=[];for(let Q=0;Q<ce;Q++){const me=Q/(ce-1),le=te+O*me,H=G+L*me,re=[],ge=Math.ceil(X);for(let he=0;he<ge;he++){const fe=(he/(ge-1)-.5)*X,Se=Math.round(le+F*fe),$=Math.round(H+J*fe);if(Se>=0&&Se<t.width&&$>=0&&$<t.height){const ee=R.getImageData(Se,$,1,1).data;re.push({r:ee[0],g:ee[1],b:ee[2],intensity:.299*ee[0]+.587*ee[1]+.114*ee[2]})}}if(re.length>0){const he=re.reduce((ne,ee)=>ne+ee.r,0)/re.length,fe=re.reduce((ne,ee)=>ne+ee.g,0)/re.length,Se=re.reduce((ne,ee)=>ne+ee.b,0)/re.length,$=re.reduce((ne,ee)=>ne+ee.intensity,0)/re.length;ie.push({position:Q,x:le,y:H,r:he,g:fe,b:Se,intensity:$,distance:Q})}}return{profiles:ie,line1:W,line2:ue,spacing:X,length:I}}catch(R){return console.error("Error calculating parallel lines intensity:",R),null}},[t]),D=E.useCallback((te,G,z,q)=>{if(!t)return null;try{const O=t.getContext("2d").getImageData(te,G,z,q).data,L=[];for(let ie=0;ie<z;ie++){let Q=0,me=0,le=0,H=0;for(let re=0;re<q;re++){const ge=(re*z+ie)*4,he=O[ge],fe=O[ge+1],Se=O[ge+2],$=.299*he+.587*fe+.114*Se;Q+=he,me+=fe,le+=Se,H+=$}L.push({position:ie,r:Q/q,g:me/q,b:le/q,intensity:H/q})}const I=[];for(let ie=0;ie<q;ie++){let Q=0,me=0,le=0,H=0;for(let re=0;re<z;re++){const ge=(ie*z+re)*4,he=O[ge],fe=O[ge+1],Se=O[ge+2],$=.299*he+.587*fe+.114*Se;Q+=he,me+=fe,le+=Se,H+=$}I.push({position:ie,r:Q/z,g:me/z,b:le/z,intensity:H/z})}const K=[];for(let ie=0;ie<O.length;ie+=4){const Q=.299*O[ie]+.587*O[ie+1]+.114*O[ie+2];K.push(Q)}const V=K.reduce((ie,Q)=>ie+Q,0)/K.length,F=[...K].sort((ie,Q)=>ie-Q),J=F[0],W=F[F.length-1],ue=F[Math.floor(F.length/2)],ce=Math.sqrt(K.reduce((ie,Q)=>ie+(Q-V)**2,0)/K.length);return{horizontalProfile:L,verticalProfile:I,statistics:{mean:V,min:J,max:W,median:ue,stdDev:ce,pixelCount:K.length}}}catch(X){return console.error("Error calculating rectangle intensity:",X),null}},[t]),A=E.useCallback(()=>{if(t)try{if(l.current.length>0&&(l.current.forEach(te=>{if(te)try{t.remove(te),k(te)}catch{}}),l.current=[]),a.current){if(Array.isArray(a.current))a.current.forEach(te=>{if(te)try{t.remove(te),k(te)}catch{}});else if(typeof a.current=="object")Object.values(a.current).forEach(te=>{if(te)try{t.remove(te),k(te)}catch{}});else try{t.remove(a.current),k(a.current)}catch{}a.current=null}t.renderAll()}catch(te){console.error("Error removing region objects:",te)}},[t,k]);E.useCallback((te,G,z,q)=>{A();const X=new Ye.fabric.Line([te,G,z,q],{stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=X,t.add(X),S(X),t.renderAll();const R=M(te,G,z,q);if(R){const O=y({type:"line",region:{x1:te,y1:G,x2:z,y2:q},data:R,length:Math.sqrt((z-te)**2+(q-G)**2)});w({type:"line",fabricObject:X,profile:O})}},[t,S,M,y,w,A]);const B=E.useCallback((te,G,z,q)=>{A(),l.current.forEach(O=>t.remove(O)),l.current=[];const X=ic.current,R=N(te,G,z,q,X);if(R){const{profiles:O,line1:L,line2:I}=R;new Ye.fabric.Group([],{selectable:!1,evented:!1});const K=new Ye.fabric.Line([L.x1,L.y1,L.x2,L.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1}),V=new Ye.fabric.Line([I.x1,I.y1,I.x2,I.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1});t.add(K),t.add(V),S(K),S(V);const F=new Ye.fabric.Line([L.x1,L.y1,I.x1,I.y1],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1}),J=new Ye.fabric.Line([L.x2,L.y2,I.x2,I.y2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1});t.add(F),t.add(J),S(F),S(J);const W=z-te,ue=q-G,ce=Math.sqrt(W*W+ue*ue),ie=-ue/ce,Q=W/ce,me=Math.min(...O.map(ne=>ne.intensity)),le=Math.max(...O.map(ne=>ne.intensity)),H=le-me||1,ge=O.map((ne,ee)=>{const Ce=((ne.intensity-me)/H-.5)*X;return{x:ne.x+ie*Ce,y:ne.y+Q*Ce}}).map(ne=>({x:ne.x,y:ne.y})),he=new Ye.fabric.Polyline(ge,{stroke:"#00ff00",strokeWidth:2,fill:"",selectable:!1,evented:!1,objectCaching:!1});t.add(he),S(he),l.current.push(he);const fe=new Ye.fabric.Text(`Min: ${me.toFixed(0)}`,{left:te-ie*X/2,top:G-Q*X/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"}),Se=new Ye.fabric.Text(`Max: ${le.toFixed(0)}`,{left:te+ie*X/2,top:G+Q*X/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"});t.add(fe),t.add(Se),S(fe),S(Se),l.current.push(fe),l.current.push(Se),a.current={fabricLine1:K,fabricLine2:V,startConnector:F,endConnector:J},t.renderAll();const $=y({type:"parallel-lines",region:{x1:te,y1:G,x2:z,y2:q,spacing:X},data:O,length:R.length,spacing:R.spacing});w({type:"parallel-lines",fabricObject:{fabricLine1:K,fabricLine2:V},profile:$})}},[t,S,N,y,w,A]);E.useCallback((te,G,z,q)=>{A();const X=Math.min(te,z),R=Math.min(G,q),O=Math.abs(z-te),L=Math.abs(q-G),I=new Ye.fabric.Rect({left:X,top:R,width:O,height:L,fill:"transparent",stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=I,t.add(I),S(I),t.renderAll();const K=D(X,R,O,L);if(K){const V=y({type:"rectangle",region:{left:X,top:R,width:O,height:L},data:K,area:O*L});w({type:"rectangle",fabricObject:I,profile:V})}},[t,S,D,y,w,A]);const Y=E.useCallback(te=>{if(!t||!e)return;A();const G=t.getPointer(te.e);c.current=G,C(!0)},[t,e,A]),oe=E.useCallback(te=>{if(!t||!e||!c.current)return;const G=t.getPointer(te.e),z=c.current;a.current&&(typeof a.current=="object"&&a.current.line1&&(t.remove(a.current.line1),t.remove(a.current.line2),t.remove(a.current.startConnector),t.remove(a.current.endConnector)),a.current=null);const q=G.x-z.x,X=G.y-z.y,R=Math.sqrt(q*q+X*X),O=ic.current;if(R>0){const L=-X/R,I=q/R,K=new Ye.fabric.Line([z.x+L*O/2,z.y+I*O/2,G.x+L*O/2,G.y+I*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),V=new Ye.fabric.Line([z.x-L*O/2,z.y-I*O/2,G.x-L*O/2,G.y-I*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),F=new Ye.fabric.Line([z.x+L*O/2,z.y+I*O/2,z.x-L*O/2,z.y-I*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7}),J=new Ye.fabric.Line([G.x+L*O/2,G.y+I*O/2,G.x-L*O/2,G.y-I*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7});t.add(K),t.add(V),t.add(F),t.add(J),a.current={line1:K,line2:V,startConnector:F,endConnector:J}}t.renderAll()},[t,e]),Z=E.useCallback(te=>{if(!t||!e||!c.current)return;const G=t.getPointer(te.e),z=c.current;B(Math.round(z.x),Math.round(z.y),Math.round(G.x),Math.round(G.y)),C(!1),c.current=null,t.defaultCursor="crosshair",t.hoverCursor="crosshair"},[t,e,B]);E.useEffect(()=>{m.current={mouseDown:Y,mouseMove:oe,mouseUp:Z}},[Y,oe,Z]),E.useEffect(()=>{if(!t||!e)return;const te=q=>{var X,R;return(R=(X=m.current).mouseDown)==null?void 0:R.call(X,q)},G=q=>{var X,R;return(R=(X=m.current).mouseMove)==null?void 0:R.call(X,q)},z=q=>{var X,R;return(R=(X=m.current).mouseUp)==null?void 0:R.call(X,q)};return t.off("mouse:down"),t.off("mouse:move"),t.off("mouse:up"),t.on("mouse:down",te),t.on("mouse:move",G),t.on("mouse:up",z),()=>{t.off("mouse:down",te),t.off("mouse:move",G),t.off("mouse:up",z)}},[t,e]),E.useEffect(()=>{e&&t?(ae(),t.selection=!1):!e&&t&&(C(!1),c.current=null,t.selection=!0,t.defaultCursor&&(t.defaultCursor="default"),t.hoverCursor&&(t.hoverCursor="move"))},[e,t]);const ae=E.useCallback(()=>{t&&(C(!0),t.defaultCursor="crosshair",t.hoverCursor="crosshair")},[t]);return p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!f&&!b?p.jsx("div",{className:"space-y-3",children:p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:p.jsx(nr,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Intensity Profile"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>{s(!0),C(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:16})}),p.jsx(De.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:16})})]})]})}):b?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:p.jsx(nr,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(De.button,{onClick:()=>{s(!0),C(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:p.jsx(zt,{size:16,className:"sm:w-5 sm:h-5"})}),p.jsx(De.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:p.jsx(tn,{size:16,className:"sm:w-4 sm:h-4"})})]})]}),p.jsx(De.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl border border-green-500",children:p.jsxs("div",{className:"flex items-center gap-2",children:[o==="line"&&p.jsx(Ar,{size:18,className:"animate-pulse"}),o==="parallel-lines"&&p.jsx(D0,{size:18,className:"animate-pulse"}),o==="rectangle"&&p.jsx(Ps,{size:18,className:"animate-pulse"}),p.jsxs("p",{className:"text-sm font-semibold",children:[o==="line"&&"Click and drag to draw line...",o==="parallel-lines"&&"Click and drag to draw parallel lines...",o==="rectangle"&&"Click and drag to draw rectangle..."]})]})})]}):p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:p.jsx(nr,{size:20})}),p.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),p.jsx(De.button,{onClick:()=>s(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"})})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"text-sm font-semibold text-text mb-2",children:["Region Width: ",h,"px"]}),p.jsx("input",{type:"range",min:"20",max:"200",value:h,onChange:te=>{const G=parseInt(te.target.value);d(G),ic.current=G,localStorage.setItem("intensityProfileLineSpacing",G.toString())},className:"w-full h-2 bg-background-secondary rounded-lg appearance-none cursor-pointer slider-green",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${(h-20)/180*100}%, #e5e7eb ${(h-20)/180*100}%, #e5e7eb 100%)`}}),p.jsxs("div",{className:"flex justify-between text-xs text-text-secondary mt-1",children:[p.jsx("span",{children:"20px"}),p.jsx("span",{children:"200px"})]})]}),p.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(Nf,{size:18,className:"text-green-500 mt-0.5 flex-shrink-0"}),p.jsx("p",{className:"text-sm text-text leading-relaxed",children:"Click and drag to select a region. The intensity profile will be displayed directly on the image with min/max values."})]})}),p.jsxs(De.button,{onClick:ae,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[o==="line"&&p.jsx(Ar,{size:18}),o==="parallel-lines"&&p.jsx(D0,{size:18}),o==="rectangle"&&p.jsx(Ps,{size:18}),p.jsxs("span",{children:["Draw ",o==="line"?"Line":o==="parallel-lines"?"Parallel Lines":"Rectangle"]})]}),j()&&p.jsxs("div",{className:"p-3 bg-background-secondary dark:bg-background-primary rounded-lg border border-border",children:[p.jsx("div",{className:"text-xs text-text-muted",children:"Layer"}),p.jsx("div",{className:"text-sm font-semibold text-text",children:j().name})]})]})})},xR=`
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, and Opera */
  }
`;if(typeof document<"u"&&!document.getElementById("scrollbar-hide-styles")){const t=document.createElement("style");t.id="scrollbar-hide-styles",t.textContent=xR,document.head.appendChild(t)}const yR=[{Icon:Za,name:"crop",hotkey:"c",category:"edit"},{Icon:kk,name:"brush",hotkey:"b",category:"draw"},{Icon:Ud,name:"eraser",hotkey:"e",category:"draw"},{Icon:Mf,name:"circle",hotkey:"o",category:"shape"},{Icon:Lj,name:"rectangle",hotkey:"r",category:"shape"},{Icon:Ar,name:"line",hotkey:"l",category:"shape"},{Icon:Mk,name:"lineChart",hotkey:"shift+l",category:"shape"},{Icon:oc,name:"move",hotkey:"v",category:"nav"},{Icon:Qa,name:"zoom",hotkey:"z",category:"view"},{Icon:eo,name:"histogram",hotkey:"h",category:"analyze"},{Icon:nr,name:"intensity",hotkey:"i",category:"analyze"},{Icon:Sb,name:"grayscale",hotkey:"g",category:"filter"},{Icon:sj,name:"pan",hotkey:"space",category:"nav"},{Icon:_i,name:"undo",hotkey:"ctrl+z",category:"edit"}],Mv=({className:t=""})=>{const{t:e}=tt(),{activeTool:r,applyTool:o,toggleGrayscale:x,undoLastChange:b,clearDrawings:C,imageSettings:f,updateImageSettings:s}=Rf(),[h,d]=E.useState(!1),[a,l]=E.useState(!1),[c,m]=E.useState(!1),[y,g]=E.useState(!1),[w,S]=E.useState("#ff0000"),[k,j]=E.useState(5),[M,N]=E.useState(15),[D,A]=E.useState(null),{control:B,watch:Y}=ZA({defaultValues:{brightness:f.brightness||100,contrast:f.contrast||100,saturation:f.saturation||100}}),oe=Y(),Z=E.useCallback(()=>{if(window.fabricCanvas){const z=window.fabricCanvas.toDataURL("image/png"),q=document.createElement("a");q.download=`artwork-${Date.now()}.png`,q.href=z,q.click()}},[]),ae=E.useCallback(z=>{S(z),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.color=z)},[]),te=E.useCallback(z=>{j(z),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.width=z)},[]),G=E.useCallback(z=>{if(console.log(`🎨 Tool selected: ${z}`),z==="grayscale"?x():z==="undo"?b():z==="eraser"?r==="eraser"&&y?g(!1):(r==="eraser"&&!y||o(z),g(!0)):(o(z),g(!1)),window.fabricCanvas){const q=window.fabricCanvas;q.freeDrawingBrush&&(q.freeDrawingBrush.color=w,q.freeDrawingBrush.width=k)}},[x,b,o,w,k,r,y]);return Ut("c",()=>G("crop"),{preventDefault:!0}),Ut("b",()=>G("brush"),{preventDefault:!0}),Ut("e",()=>G("eraser"),{preventDefault:!0}),Ut("o",()=>G("circle"),{preventDefault:!0}),Ut("r",()=>G("rectangle"),{preventDefault:!0}),Ut("l",()=>G("line"),{preventDefault:!0}),Ut("shift+l",()=>G("lineChart"),{preventDefault:!0}),Ut("v",()=>G("move"),{preventDefault:!0}),Ut("z",()=>G("zoom"),{preventDefault:!0}),Ut("h",()=>G("histogram"),{preventDefault:!0}),Ut("i",()=>G("intensity"),{preventDefault:!0}),Ut("g",()=>G("grayscale"),{preventDefault:!0}),Ut("space",()=>G("pan"),{preventDefault:!0}),Ut("ctrl+z",()=>G("undo"),{preventDefault:!0}),Ut("ctrl+s",Z,{preventDefault:!0}),Ut("ctrl+shift+c",C,{preventDefault:!0}),Ut("tab",()=>d(!h),{preventDefault:!0}),E.useEffect(()=>{s(oe)},[oe.brightness,oe.contrast,oe.saturation,oe.grayscale,s]),E.useEffect(()=>{const z=()=>{window.fabricCanvas?A(window.fabricCanvas):setTimeout(z,100)};z()},[]),p.jsxs(De.div,{className:Dn("bg-background-secondary h-full flex flex-col border-r border-border shadow-card dark:bg-background-secondary dark:border-border relative",h?"w-48 sm:w-64":"w-12 sm:w-16",t),animate:{width:h?window.innerWidth<640?192:256:window.innerWidth<640?48:64},transition:{duration:.4,ease:[.4,0,.2,1]},children:[p.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 border-b border-border",children:[p.jsx(Ya,{children:h&&p.jsxs(De.h3,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs sm:text-sm font-semibold text-text",children:[p.jsx("span",{className:"hidden sm:inline",children:"ابزارها"}),p.jsx("span",{className:"sm:hidden",children:"Tools"})]})}),p.jsx(De.button,{onClick:()=>d(!h),className:"p-1.5 sm:p-2 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1},whileTap:{scale:.92},children:h?p.jsx(xb,{size:14,className:"text-primary sm:w-4 sm:h-4"}):p.jsx(yb,{size:14,className:"text-primary sm:w-4 sm:h-4"})})]}),p.jsx("div",{className:"flex-1 py-2 sm:py-4 overflow-y-auto scrollbar-hide",children:p.jsx("div",{className:`flex ${h?"flex-col gap-1 sm:gap-2 px-2 sm:px-3":"flex-col items-center gap-2 sm:gap-4 px-1 sm:px-2"}`,children:yR.map(({Icon:z,name:q,hotkey:X,category:R},O)=>{const L=r===q;return p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:O*.05},children:h?p.jsxs(De.button,{onClick:()=>G(q),className:Dn("w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl group font-medium shadow-sm hover:shadow-md",L?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[p.jsx(z,{size:16,className:Dn(L?"drop-shadow-md":"","sm:w-5 sm:h-5")}),p.jsxs("div",{className:"flex-1 text-left min-w-0",children:[p.jsx("div",{className:"text-xs sm:text-sm font-semibold truncate",children:e(q)}),p.jsx("div",{className:Dn("text-xs font-mono",L?"opacity-80":"opacity-50"),children:X})]}),L&&p.jsx(De.div,{layoutId:"activeIndicator",className:"w-2 h-2 sm:w-2.5 sm:h-2.5 bg-white rounded-full shadow-md flex-shrink-0",animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0}})]}):p.jsxs(De.div,{className:"relative group",children:[p.jsx(De.button,{onClick:()=>G(q),className:Dn("p-1.5 sm:p-2.5 rounded-xl shadow-sm hover:shadow-md",L?"bg-gradient-to-br from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text-muted hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.12,y:-2},whileTap:{scale:.93},title:`${e(q)} (${X})`,children:p.jsx(z,{size:16,className:Dn(L?"drop-shadow-md":"","sm:w-5 sm:h-5")})}),L&&p.jsx(De.div,{layoutId:"compactActiveIndicator",className:"absolute -right-0.5 sm:-right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 sm:h-8 bg-gradient-to-b from-primary to-primary-dark rounded-full shadow-md",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5}})]})},O)})})}),p.jsx(Ya,{children:h&&p.jsxs(De.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-border p-2 sm:p-3 space-y-2 sm:space-y-3",children:[p.jsxs(De.button,{onClick:()=>l(!a),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(Sb,{size:16,className:"text-primary sm:w-4 sm:h-5"}),p.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"انتخاب رنگ"}),p.jsx("div",{className:"ml-auto w-4 h-4 sm:w-5 sm:h-5 rounded-lg border-2 border-white shadow-md ring-2 ring-border flex-shrink-0",style:{backgroundColor:w}})]}),p.jsxs(De.button,{onClick:()=>m(!c),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[p.jsx(zt,{size:16,className:"text-primary sm:w-4 sm:h-5"}),p.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"تنظیمات"})]}),p.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[p.jsxs(De.button,{onClick:Z,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[p.jsx(Mo,{size:14,className:"sm:w-4 sm:h-4"}),p.jsx("span",{className:"text-xs font-semibold",children:"ذخیره"})]}),p.jsxs(De.button,{onClick:C,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[p.jsx(tn,{size:14,className:"sm:w-4 sm:h-4"}),p.jsx("span",{className:"text-xs font-semibold",children:"پاک"})]})]})]})}),p.jsx(Ya,{children:a&&h&&p.jsxs(De.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50",children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("h4",{className:"text-sm font-medium mb-2",children:"انتخاب رنگ"}),p.jsx(xA,{color:w,onChange:ae})]}),p.jsxs("div",{className:"mb-3",children:[p.jsxs("label",{className:"text-sm font-medium block mb-1",children:["اندازه قلم: ",k,"px"]}),p.jsx("input",{type:"range",min:"1",max:"50",value:k,onChange:z=>te(parseInt(z.target.value)),className:"w-full"})]}),p.jsxs("div",{className:"mb-3",children:[p.jsxs("label",{className:"text-sm font-medium block mb-1",children:["اندازه پاک‌کن: ",M,"px"]}),p.jsx("input",{type:"range",min:"5",max:"100",value:M,onChange:z=>N(parseInt(z.target.value)),className:"w-full"})]}),p.jsx(De.button,{onClick:()=>l(!1),className:"w-full py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"تأیید"})]})}),p.jsx(Ya,{children:c&&h&&p.jsxs(De.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50 w-64",children:[p.jsx("h4",{className:"text-sm font-medium mb-3",children:"تنظیمات تصویر"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["روشنایی: ",Math.round(oe.brightness),"%"]}),p.jsx(Md,{name:"brightness",control:B,render:({field:z})=>p.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["کنتراست: ",Math.round(oe.contrast),"%"]}),p.jsx(Md,{name:"contrast",control:B,render:({field:z})=>p.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["اشباع: ",Math.round(oe.saturation),"%"]}),p.jsx(Md,{name:"saturation",control:B,render:({field:z})=>p.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]})]}),p.jsx(De.button,{onClick:()=>m(!1),className:"w-full mt-4 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"بستن"})]})}),p.jsx(Ya,{children:r==="eraser"&&D&&y&&p.jsx(De.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"absolute left-full top-0 ml-2 z-50",children:p.jsx(vf,{canvas:D,isActive:!0,initialSettings:{size:M},onSettingsChange:z=>{N(z.size)},onClose:()=>{g(!1)}})})}),r==="eraser"&&D&&!y&&p.jsx("div",{style:{display:"none"},children:p.jsx(vf,{canvas:D,isActive:!0,initialSettings:{size:M},onSettingsChange:z=>{N(z.size)},onClose:()=>{}})}),D&&p.jsxs("div",{style:{display:"none"},children:[r==="brush"&&p.jsx(oR,{canvas:D,isActive:r==="brush",brushColor:w,brushWidth:k}),r==="line"&&p.jsx(lR,{canvas:D,isActive:r==="line",lineColor:w,lineWidth:k}),r==="move"&&p.jsx(cR,{canvas:D,isActive:r==="move"})]}),D&&p.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="crop"?"":"hidden"}`,children:p.jsx(uR,{canvas:D,isActive:r==="crop",onClose:()=>o(null)})}),r==="zoom"&&D&&p.jsx("div",{className:"absolute left-full top-0 ml-2 z-50",children:p.jsx(hR,{canvas:D,isActive:r==="zoom",onClose:()=>o(null)})}),D&&p.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="histogram"?"":"hidden"}`,children:p.jsx(fR,{canvas:D,isActive:r==="histogram",onClose:()=>o(null)})}),D&&p.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="intensity"?"":"hidden"}`,children:p.jsx(pR,{canvas:D,isActive:r==="intensity",onClose:()=>o(null)})})]})},vR=({tabs:t})=>{const{i18n:e,t:r}=tt();return p.jsx("div",{className:Dn("flex gap-1 overflow-x-auto scrollbar-hide pb-1",e.language==="fa"?"font-vazir":""),dir:e.language==="fa"?"rtl":"ltr",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((o,x)=>p.jsxs(ub,{to:o.to,className:({isActive:b})=>Dn("px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium flex items-center whitespace-nowrap flex-shrink-0 min-w-fit",b?"tab-active":"tab-inactive"),children:[o.icon,p.jsx("span",{className:Dn(e.language==="fa"?"mr-1":"ml-1","hidden xs:inline"),children:o.label})]},x))})},bR=()=>{Jn.logRender("BaslerDisplay");const t=E.useRef(null),e=E.useRef(null),r=E.useRef(null),o=E.useRef(null),x=E.useRef(null);E.useRef(null);const b=E.useRef(null);E.useRef(null);const[C,f]=E.useState(!1),[s,h]=E.useState({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),[d,a]=E.useState({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),{cameras:l,addFrameCallback:c,activeTool:m,drawings:y,toolDrawings:g,isDrawing:w,currentPath:S,imageSettings:k,cursorPosition:j,startDrawing:M,continueDrawing:N,finishDrawing:D,addToolDrawing:A,wsStatus:B,panImage:Y}=Rf(),{resetToOriginal:oe}=Mb(),{t:Z}=tt(),ae=E.useRef(null);E.useEffect(()=>{const re=c(ge=>{if(ge!=="basler")return;const he=l.basler.currentFrame;!he||he===ae.current||(ae.current=he,e.current&&I())});return()=>re()},[l,c]);const te=E.useCallback(H=>{h(re=>({...re,[H]:!re[H]}))},[]),G=E.useCallback((H,re)=>{a(ge=>({...ge,[H]:parseFloat(re)}))},[]),z=E.useCallback(()=>{h({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),a({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),oe()},[oe]),q=E.useCallback(H=>{H.path&&H.path.set({selectable:m==="move",evented:m==="move",hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4}),m==="eraser"&&e.current&&e.current.contextTop&&(e.current.contextTop.globalCompositeOperation="source-over")},[m]),X=E.useCallback(()=>{},[]),R=E.useCallback(H=>{},[m]),O=E.useCallback(H=>{if(!e.current)return;const re=e.current.getPointer(H.e);if(m==="eraser"&&e.current.contextTop&&(e.current.contextTop.globalCompositeOperation="destination-out"),m==="pan"&&H.e.buttons===1&&x.current){const ge={x:re.x-x.current.x,y:re.y-x.current.y};Y(ge.x,ge.y),x.current=re}e.current._isCurrentlyDrawing&&e.current.renderAll()},[m]),L=E.useCallback(()=>{e.current&&(e.current._isCurrentlyDrawing=!1)},[]);E.useEffect(()=>{if(t.current&&!e.current){const H=new Ye.fabric.Canvas(t.current,{width:640,height:480,backgroundColor:"transparent",selection:!0,preserveObjectStacking:!0,enableRetinaScaling:!0,perPixelTargetFind:!0});return e.current=H,K(H),H.on("path:created",q),H.on("object:added",X),H.on("mouse:down",R),H.on("mouse:move",O),H.on("mouse:up",L),H.on("object:added",re=>{re.target===H.backgroundImage&&re.target.set({selectable:!1,evented:!1,excludeFromExport:!1})}),()=>{H.dispose(),e.current=null}}},[]);const I=E.useCallback(async()=>{const H=l.basler.currentFrame;if(!e.current||!H)return;const re=JSON.stringify({frame:H.substring(0,100),activeFilters:s,processingParams:d});if(b.current===re)return;b.current=re,console.log("🖼️ Updating Fabric.js background image (frame or filter changed)");const ge=Object.values(s).some(fe=>fe)||d.brightness!==0||d.contrast!==0||d.rotation!==0;let he=H;if(ge)try{console.log("🎨 [FILTER] Starting image processing..."),console.log("🎨 [FILTER] Active filters:",JSON.stringify(s)),console.log("🎨 [FILTER] Processing params:",JSON.stringify(d));const fe=performance.now();if(await Be.loadImage(H),console.log(`✅ [FILTER] Image loaded in ${(performance.now()-fe).toFixed(2)}ms`),s.grayscale){const $=performance.now();Be.convertToGrayscale(),console.log(`✅ [FILTER] Grayscale applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.denoising){const $=performance.now();Be.applyGaussianFilter(d.gaussianSigma),console.log(`✅ [FILTER] Gaussian (σ=${d.gaussianSigma}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.median){const $=performance.now();Be.applyMedianFilter(3),console.log(`✅ [FILTER] Median applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.sharpening){const $=performance.now();Be.applySharpen(d.sharpenFactor),console.log(`✅ [FILTER] Sharpen (factor=${d.sharpenFactor}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.sobel||s.edgeEnhancement){const $=performance.now();Be.applySobelFilter(),console.log(`✅ [FILTER] Sobel edge detection applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.histogramEq){const $=performance.now();Be.applyHistogramEqualization(),console.log(`✅ [FILTER] Histogram Equalization applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.invert){const $=performance.now();Be.applyInvert(),console.log(`✅ [FILTER] Invert applied in ${(performance.now()-$).toFixed(2)}ms`)}if(d.brightness!==0){const $=performance.now();Be.adjustBrightness(d.brightness),console.log(`✅ [FILTER] Brightness (${d.brightness}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(d.contrast!==0){const $=performance.now();Be.adjustContrast(d.contrast),console.log(`✅ [FILTER] Contrast (${d.contrast}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(d.rotation!==0){const $=performance.now();Be.applyRotation(d.rotation),console.log(`✅ [FILTER] Rotation (${d.rotation}°) applied in ${(performance.now()-$).toFixed(2)}ms`)}const Se=Be.getImageDataURL(!0);if(Se){const $=(Se.length/1024).toFixed(2);he=Se,console.log(`✅ [FILTER] Processed image ready (${$} KB)`),console.log(`✅ [FILTER] Image preview: ${he.substring(0,50)}...`)}else console.error("❌ [FILTER] CRITICAL: No processed image returned!")}catch(fe){console.error("❌ [FILTER] Error processing image:",fe),console.error("❌ [FILTER] Error stack:",fe.stack)}Ye.fabric.Image.fromURL(he,fe=>{const Se=e.current.width||640,$=e.current.height||480;fe.set({left:0,top:0,scaleX:Se/fe.width,scaleY:$/fe.height,selectable:!1,evented:!1,excludeFromExport:!1});const ne=[];k.brightness!==100&&ne.push(new Ye.fabric.Image.filters.Brightness({brightness:(k.brightness-100)/100})),k.contrast!==100&&ne.push(new Ye.fabric.Image.filters.Contrast({contrast:(k.contrast-100)/100})),k.grayscale&&ne.push(new Ye.fabric.Image.filters.Grayscale),fe.filters=ne,fe.applyFilters(),e.current.setBackgroundImage(fe,e.current.renderAll.bind(e.current))})},[k,s,d,l]),K=E.useCallback(H=>{H&&(H.isDrawingMode=!1,H.selection=!0,H.defaultCursor="default",H.hoverCursor="move",m==="move"?H.getObjects().forEach(re=>{re!==H.backgroundImage&&re.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4})}):H.getObjects().forEach(re=>{re!==H.backgroundImage&&re.set({selectable:!1,evented:!1})}),m==="crop"||m==="eraser"?(H.selection=!1,H.defaultCursor="crosshair",H.hoverCursor="crosshair"):m==="move"?(H.selection=!0,H.defaultCursor="default",H.hoverCursor="move"):(m==="brush"||m==="line")&&(H.isDrawingMode=!0,H.selection=!1,H.defaultCursor="crosshair",H.hoverCursor="crosshair"),H.renderAll())},[m]);E.useEffect(()=>{e.current&&m&&K(e.current)},[m,K]),E.useEffect(()=>{if(e.current&&m){const H=setTimeout(()=>{e.current&&!e.current.backgroundImage&&l.basler.currentFrame&&I()},100);return()=>clearTimeout(H)}},[m,I,l]),E.useEffect(()=>{e.current&&l.basler.currentFrame&&I()},[s,d,I,l]),E.useEffect(()=>{const H=re=>{t.current&&re.detail&&(t.current.width=re.detail.width,t.current.height=re.detail.height,t.current.style.width=`${re.detail.width}px`,t.current.style.height=`${re.detail.height}px`),e.current&&e.current.renderAll()};return window.addEventListener("canvasResized",H),()=>{window.removeEventListener("canvasResized",H)}},[]),E.useEffect(()=>{if(e.current){const H=setTimeout(()=>{e.current&&e.current.renderAll()},50);return()=>clearTimeout(H)}},[m,l]);const V=E.useCallback(()=>{if(!e.current||!e.current.backgroundImage)return;const H=e.current.backgroundImage,re=[];k.brightness!==100&&re.push(new Ye.fabric.Image.filters.Brightness({brightness:(k.brightness-100)/100})),k.contrast!==100&&re.push(new Ye.fabric.Image.filters.Contrast({contrast:(k.contrast-100)/100})),k.grayscale&&re.push(new Ye.fabric.Image.filters.Grayscale),H.filters=re,H.applyFilters(),e.current.renderAll()},[k.brightness,k.contrast,k.grayscale]);E.useEffect(()=>{V()},[V]);const F=E.useCallback(()=>{if(!e.current)return;const H=e.current.backgroundImage;e.current.getObjects().forEach(ge=>{ge!==e.current.backgroundImage&&e.current.remove(ge)}),H?e.current.setBackgroundImage(H,e.current.renderAll.bind(e.current)):l.basler.currentFrame&&I()},[I]),J=E.useCallback(()=>{if(!e.current)return;e.current.getObjects().forEach(re=>{re!==e.current.backgroundImage&&e.current.remove(re)}),e.current.renderAll()},[]),W=E.useCallback(()=>{if(!e.current)return;const H=e.current.getObjects();for(let re=H.length-1;re>=0;re--)if(H[re]!==e.current.backgroundImage){e.current.remove(H[re]);break}},[]);E.useEffect(()=>{e.current&&window&&(window.fabricCanvas=e.current,window.clearFabricCanvas=F,window.clearAllUserObjects=J,window.undoLastFabricAction=W)},[F,J,W]);const ue=E.useCallback(()=>{},[y,g,w,S,m,k,l]),ce=E.useCallback(H=>{const re=t.current;if(!re)return{x:0,y:0,rawX:0,rawY:0};const ge=re.getBoundingClientRect(),he=H.clientX-ge.left,fe=H.clientY-ge.top,Se=e.current,$=Se?Se.width:re.width,ne=Se?Se.height:re.height;(Math.abs($-re.width)>10||Math.abs(ne-re.height)>10)&&console.log("🔲 Canvas dimensions mismatch - Fabric:",$,"x",ne,"HTML:",re.width,"x",re.height);const ee=$/ge.width,we=ne/ge.height,Ce=he*ee,Te=fe*we,Ee=Math.max(0,Math.min($,Ce)),Ne=Math.max(0,Math.min(ne,Te)),ze=(Ee-k.panOffset.x)/k.zoom,Ue=(Ne-k.panOffset.y)/k.zoom;return{x:ze,y:Ue,rawX:Ee,rawY:Ne,clientX:he,clientY:fe}},[k.zoom,k.panOffset]),ie=E.useCallback(H=>{if(m==="pan"&&k.zoom>1){const re=ce(H);x.current={x:re.rawX,y:re.rawY},e.current&&(e.current.defaultCursor="grabbing")}},[m,k,ce]),Q=E.useCallback(H=>{if(m==="pan"&&x.current&&k.zoom>1){const re=ce(H),ge=re.rawX-x.current.x,he=re.rawY-x.current.y;Y(ge,he),x.current={x:re.rawX,y:re.rawY}}},[m,k.zoom,Y,ce]),me=E.useCallback(()=>{m==="pan"&&(x.current=null,e.current&&(e.current.defaultCursor="crosshair"))},[m]);E.useEffect(()=>{if(l.basler.currentFrame&&r.current){const H=r.current;H.src&&H.src.startsWith("data:")&&URL.revokeObjectURL(H.src),H.src=l.basler.currentFrame,H.onload=()=>{const re=t.current;if(re&&H){const ge=H.naturalWidth||640,he=H.naturalHeight||480,fe=e.current;(!fe||fe.width===640&&fe.height===480)&&(re.width=ge,re.height=he)}ue()},H.onerror=re=>{console.error("❌ Error loading Basler image:",re)}}},[ue,l]),E.useEffect(()=>{ue()},[ue]);const le=E.useCallback(H=>{if(!H)return"No data";try{return new Date(H).toLocaleTimeString()}catch{return"Invalid time"}},[]);return p.jsxs("div",{ref:o,className:"w-full h-full bg-black rounded-lg overflow-hidden relative flex flex-col",children:[p.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10",children:[p.jsxs("button",{onClick:()=>f(!C),className:"w-full bg-gradient-to-b from-black/90 to-black/70 text-white px-4 py-2 flex items-center justify-between hover:from-black/95 hover:to-black/75 transition-all",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(bn,{size:18,className:"text-primary"}),p.jsx("span",{className:"text-sm font-medium",children:Z("imageProcessing")||"پردازش تصویر"}),Object.values(s).some(H=>H)&&p.jsx("span",{className:"text-xs bg-primary text-white px-2 py-0.5 rounded-full",children:Object.values(s).filter(H=>H).length})]}),C?p.jsx(Vd,{size:18}):p.jsx(mc,{size:18})]}),C&&p.jsxs("div",{className:"bg-gradient-to-b from-black/95 to-black/85 text-white p-4 max-h-96 overflow-y-auto backdrop-blur-sm",children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"text-xs font-semibold mb-2 flex items-center gap-2",children:[p.jsx(Rr,{size:14,className:"text-primary"}),Z("quickFilters")||"فیلترهای سریع"]}),p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[p.jsx("button",{onClick:()=>te("grayscale"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.grayscale?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("grayscale")||"خاکستری"}),p.jsx("button",{onClick:()=>te("denoising"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.denoising?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("denoising")||"حذف نویز"}),p.jsx("button",{onClick:()=>te("sharpening"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.sharpening?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("sharpening")||"تیزسازی"}),p.jsx("button",{onClick:()=>te("sobel"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.sobel?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("edgeDetection")||"تشخیص لبه"}),p.jsx("button",{onClick:()=>te("median"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.median?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("medianFilter")||"فیلتر میانه"}),p.jsx("button",{onClick:()=>te("histogramEq"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.histogramEq?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("histogramEq")||"هیستوگرام"}),p.jsx("button",{onClick:()=>te("invert"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.invert?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("invert")||"معکوس"}),p.jsxs("button",{onClick:z,className:"px-3 py-2 rounded text-xs font-medium bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-all flex items-center justify-center gap-1",children:[p.jsx(_i,{size:12}),Z("reset")||"ریست"]})]})]}),p.jsxs("div",{className:"space-y-3",children:[s.denoising&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("gaussianSigma")||"مقدار Gaussian",": ",d.gaussianSigma]}),p.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:d.gaussianSigma,onChange:H=>G("gaussianSigma",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),s.sharpening&&p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("sharpenFactor")||"مقدار تیزسازی",": ",d.sharpenFactor]}),p.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:d.sharpenFactor,onChange:H=>G("sharpenFactor",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("brightness")||"روشنایی",": ",d.brightness]}),p.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:d.brightness,onChange:H=>G("brightness",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("contrast")||"کنتراست",": ",d.contrast]}),p.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:d.contrast,onChange:H=>G("contrast",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("rotation")||"چرخش",": ",d.rotation,"°"]}),p.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:d.rotation,onChange:H=>G("rotation",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]})]})]})]}),p.jsxs("div",{className:"flex-1 flex justify-center items-center relative",children:[p.jsx("img",{ref:r,style:{display:"none"},alt:"Basler frame"}),p.jsx("canvas",{ref:t,width:640,height:480,className:"w-full h-full object-contain cursor-crosshair mx-auto",onMouseDown:ie,onMouseMove:Q,onMouseUp:me,onMouseLeave:me,style:{maxWidth:"100%",maxHeight:"100%",display:"block",imageRendering:"high-quality"}}),!l.basler.currentFrame&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsxs("div",{className:"text-white text-xs sm:text-sm mb-2",children:[B==="connecting"&&"🔄 اتصال به باسلر...",B==="connected"&&"⏳ در انتظار تصویر باسلر...",B==="reconnecting"&&"🔄 تلاش برای اتصال مجدد...",B==="error"&&"❌ خطا در اتصال به باسلر",B==="failed"&&"❌ اتصال ناموفق - بررسی بک‌اند",B==="disconnected"&&"⚠️ قطع ارتباط با باسلر"]}),(B==="error"||B==="failed")&&p.jsx("div",{className:"text-gray-400 text-xs",children:"لطفاً بک‌اند را بررسی کنید"})]})}),p.jsxs("div",{className:"absolute top-1 sm:top-2 left-1 sm:left-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm font-mono",children:[p.jsxs("span",{className:"hidden sm:inline",children:["X: ",Math.round(j.x)," | Y: ",Math.round(j.y)]}),p.jsxs("span",{className:"sm:hidden",children:[Math.round(j.x),",",Math.round(j.y)]})]}),m&&p.jsxs("div",{className:"absolute top-1 sm:top-2 right-1 sm:right-2 bg-primary text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm",children:[p.jsx("span",{className:"hidden sm:inline",children:m}),p.jsx("span",{className:"sm:hidden",children:m.charAt(0)})]}),p.jsx("div",{className:`absolute bottom-1 sm:bottom-2 left-1 sm:left-2 w-2 h-2 sm:w-3 sm:h-3 rounded-full ${l.basler.isConnected&&l.basler.currentFrame?"bg-green-500":"bg-red-500"}`}),l.basler.lastUpdate&&p.jsxs("div",{className:"absolute bottom-1 sm:bottom-2 right-1 sm:right-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:[p.jsx("div",{className:"hidden sm:block",children:le(l.basler.lastUpdate)}),p.jsx("div",{className:"sm:hidden text-xs",children:le(l.basler.lastUpdate).split(" ")[1]}),l.basler.avgFps>0&&p.jsxs("div",{className:"text-green-400 text-xs",children:[p.jsxs("span",{className:"hidden sm:inline",children:["FPS: ",l.basler.avgFps," | Frames: ",l.basler.frameCount]}),p.jsxs("span",{className:"sm:hidden",children:[l.basler.avgFps,"fps"]})]})]})]})]})},Xw=Ae.memo(bR),wR=()=>{var w;Jn.logRender("HistogramDisplay");const{histogramData:t,selectedPoint:e,currentChannel:r,selectionRegion:o}=Uw(),{formData:x}=_b(),b=E.useRef(null),f=(((w=x==null?void 0:x.initialParameters)==null?void 0:w.bitDepth)||"8-bit")==="16-bit"?65535:255,[s,h]=E.useState(0),[d,a]=E.useState(f),[l,c]=E.useState(null);E.useEffect(()=>{a(f)},[f]);const m=S=>{if(!b.current)return;const k=b.current.getBoundingClientRect(),j=S.clientX-k.left,M=S.clientY-k.top,N=b.current.width/k.width,D=b.current.height/k.height,A=j*N,B=M*D,Y=50,oe=30,Z=b.current.width-Y-10,ae=Y+s/f*Z,te=b.current.height-oe+15;if(Math.abs(A-ae)<10&&Math.abs(B-te)<10){c("min");return}const G=Y+d/f*Z;if(Math.abs(A-G)<10&&Math.abs(B-te)<10){c("max");return}},y=S=>{if(!l||!b.current)return;const k=b.current.getBoundingClientRect(),j=S.clientX-k.left,M=b.current.width/k.width,N=j*M,D=50,A=b.current.width-D-10,B=Math.round((N-D)/A*f),Y=Math.max(0,Math.min(f,B));l==="min"?h(Math.min(Y,d-1)):l==="max"&&a(Math.max(Y,s+1))},g=()=>{c(null)};return E.useEffect(()=>{if(l)return window.addEventListener("mousemove",y),window.addEventListener("mouseup",g),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",g)}},[l,s,d,f]),E.useEffect(()=>{if(!t||!b.current)return;const S=b.current.getContext("2d"),k=b.current.width,j=b.current.height;S.clearRect(0,0,k,j);const M=t.gray||t[r];if(!M)return;const N=50,D=30,A=10,B=10,Y=k-N-B,oe=j-D-A,Z=Math.max(...M);S.strokeStyle="#6b7280",S.lineWidth=1,S.beginPath(),S.moveTo(N,A),S.lineTo(N,j-D),S.stroke(),S.beginPath(),S.moveTo(N,j-D),S.lineTo(k-B,j-D),S.stroke(),S.fillStyle="#374151",S.font="bold 12px monospace",S.textAlign="right",S.textBaseline="middle";const ae=5;for(let X=0;X<=ae;X++){const R=Math.round(Z/ae*X),O=j-D-oe/ae*X,L=R.toLocaleString();S.fillText(L,N-5,O),S.strokeStyle="#e5e7eb",S.lineWidth=.5,S.beginPath(),S.moveTo(N,O),S.lineTo(k-B,O),S.stroke()}S.fillStyle="#374151",S.font="bold 11px monospace",S.textAlign="center",S.textBaseline="top";const te=8;for(let X=0;X<=te;X++){const R=Math.round(f/te*X),O=N+Y/te*X,L=R.toLocaleString();S.fillText(L,O,j-D+5)}const G=Y/M.length;S.fillStyle="rgba(107, 114, 128, 0.7)",M.forEach((X,R)=>{const O=X/Z*oe,L=N+R*G,I=j-D-O;S.fillRect(L,I,Math.max(G,1),O)}),S.lineWidth=2;const z=N+s/f*Y;S.strokeStyle="rgba(239, 68, 68, 0.8)",S.beginPath(),S.moveTo(z,A),S.lineTo(z,j-D),S.stroke(),S.fillStyle="rgba(239, 68, 68, 0.9)",S.beginPath(),S.arc(z,j-D+15,6,0,Math.PI*2),S.fill();const q=N+d/f*Y;S.strokeStyle="rgba(34, 197, 94, 0.8)",S.beginPath(),S.moveTo(q,A),S.lineTo(q,j-D),S.stroke(),S.fillStyle="rgba(34, 197, 94, 0.9)",S.beginPath(),S.arc(q,j-D+15,6,0,Math.PI*2),S.fill()},[t,r,f,s,d]),!t||!e?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted",children:[p.jsx(eo,{size:32,className:"mb-2 opacity-50"}),p.jsx("p",{className:"text-sm",children:"Select Histogram tool and click on image to see distribution"})]}):p.jsxs("div",{className:"h-full flex flex-col gap-2 overflow-hidden",children:[p.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"bg-accent dark:bg-background-primary rounded-lg px-2 py-1 border border-border flex-shrink-0",children:[(o==null?void 0:o.type)==="point"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-xs text-text-muted",children:["Point (R=",o.radius,"px)"]}),p.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),(o==null?void 0:o.type)==="area"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-xs text-text-muted",children:["Area ",o.width,"×",o.height,"px"]}),p.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),(o==null?void 0:o.type)==="line"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-xs text-text-muted",children:["Line (",o.length,"px)"]}),p.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),!o&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"text-xs text-text-muted",children:"Point"}),p.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]})]}),p.jsx("div",{className:"flex gap-1 flex-shrink-0",children:p.jsxs("div",{className:"text-center bg-gray-100 dark:bg-gray-900/20 rounded-lg px-2 py-1",children:[p.jsx("div",{className:"text-xs text-text-muted",children:"Gray Value"}),p.jsx("div",{className:"font-mono text-xs font-semibold text-gray-700 dark:text-gray-400",children:e.pixel.gray||Math.round((e.pixel.r+e.pixel.g+e.pixel.b)/3)})]})})]}),p.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",children:p.jsx("canvas",{ref:b,width:1024,height:128,className:"w-full h-full object-contain cursor-pointer",onMouseDown:m})}),p.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"flex-1 bg-red-50 dark:bg-red-900/20 rounded-lg px-2 py-1 border border-red-300 dark:border-red-700",children:[p.jsx("div",{className:"text-xs text-text-muted",children:"Min Level"}),p.jsx("div",{className:"font-mono text-sm font-semibold text-red-700 dark:text-red-400",children:s})]}),p.jsxs("div",{className:"flex-1 bg-green-50 dark:bg-green-900/20 rounded-lg px-2 py-1 border border-green-300 dark:border-green-700",children:[p.jsx("div",{className:"text-xs text-text-muted",children:"Max Level"}),p.jsx("div",{className:"font-mono text-sm font-semibold text-green-700 dark:text-green-400",children:d})]})]})]})},SR=Ae.memo(wR),Yw=E.createContext(),CR=()=>{const t=E.useContext(Yw);if(!t)throw new Error("useXray must be used within XrayProvider");return t},TR=({children:t})=>{const[e,r]=E.useState(!1),o=E.useCallback(()=>{r(!0),console.log("X-ray Generator: ON")},[]),x=E.useCallback(()=>{r(!1),console.log("X-ray Generator: OFF")},[]),b=E.useCallback(()=>{r(f=>!f)},[]),C={isXrayOn:e,turnOnXray:o,turnOffXray:x,toggleXray:b};return p.jsx(Yw.Provider,{value:C,children:t})},kR=[{to:"/initial",label:"initial",icon:p.jsx(fj,{className:"w-4 h-4 mr-1"})},{to:"/position",label:"position",icon:p.jsx(Of,{className:"w-4 h-4 mr-1"})},{to:"/projection",label:"projection",icon:p.jsx(bb,{className:"w-4 h-4 mr-1"})},{to:"/post-processing",label:"postProcessing",icon:p.jsx(p_,{className:"w-4 h-4 mr-1"})},{to:"/reconstruction",label:"reconstruction",icon:p.jsx(lj,{className:"w-4 h-4 mr-1"})}],Nv=({lng:t,current:e,onClick:r})=>p.jsx("button",{onClick:()=>r(t),className:Dn("px-2 py-1 text-sm rounded-md",e===t?"bg-primary text-white":"bg-background-secondary text-text-muted"),children:t.toUpperCase()}),jR=({t,isPowerOn:e,onPowerOn:r,onPowerOff:o})=>p.jsxs("div",{className:"flex-shrink-0 px-4 py-3 border-b border-border bg-background-secondary dark:bg-background-secondary",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:`panel flex-1 flex items-center justify-center gap-2 text-sm text-white font-semibold h-10 transition-all duration-200 ${e?"bg-green-500":"bg-red-500"}`,children:[p.jsx(Un,{className:"w-4 h-4"}),p.jsxs("span",{children:[t("xrayStatus"),": ",t(e?"xrayOn":"xrayOff")]}),e&&p.jsx(pc,{className:"w-4 h-4 ml-2 animate-pulse"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:r,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${e?"bg-green-600 text-white shadow-md":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-green-500 hover:text-white"}`,children:"ON"}),p.jsx("button",{onClick:o,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${e?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-500 hover:text-white":"bg-red-600 text-white shadow-md"}`,children:"OFF"})]})]}),e&&p.jsxs("div",{className:"mt-2 px-3 py-2 bg-yellow-500/20 border border-yellow-500/50 rounded-lg flex items-center gap-2",children:[p.jsx(pc,{className:"w-4 h-4 text-yellow-500"}),p.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-medium",children:t("xraySafetyWarning")})]})]}),_R=()=>{const t=ar();Jn.logRender("Layout",{route:t.pathname});const e=t.pathname.includes("settings")?"Settings":null,[r,o]=E.useState(e),[x,b]=E.useState(!1),C=E.useRef(null),{t:f,i18n:s}=tt(),{isXrayOn:h,turnOnXray:d,turnOffXray:a}=CR(),l=E.useCallback(m=>{o(m)},[]),c=E.useCallback(m=>{s.changeLanguage(m),console.log("Changed language to:",m)},[s]);return E.useEffect(()=>{const m=y=>{C.current&&!C.current.contains(y.target)&&b(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),p.jsxs("div",{className:"responsive-layout gap-2 sm:gap-4 p-2 sm:p-4 bg-background dark:bg-background",children:[p.jsx("div",{className:"mobile-column",children:p.jsxs("div",{className:"card flex-1 flex flex-col min-h-0",children:[p.jsx(jR,{t:f,isPowerOn:h,onPowerOn:d,onPowerOff:a}),p.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-start sm:items-center justify-between px-2 sm:px-4 py-2 sm:py-3 border-b border-border bg-background-secondary dark:bg-background-secondary dark:border-border gap-2 sm:gap-0",children:[p.jsx("div",{className:"w-full sm:w-auto",children:p.jsx(vR,{tabs:kR.map(m=>({...m,label:f(m.label)}))})}),p.jsxs("div",{className:"flex gap-2 items-center relative",ref:C,children:[p.jsxs("button",{onClick:()=>b(!x),className:Dn("flex items-center gap-1 px-3 py-2 rounded-lg transition-all",x||r==="Settings"?"bg-primary text-white":"bg-background-secondary text-text hover:bg-accent border border-border"),children:[p.jsx(zt,{className:"w-4 h-4"}),p.jsx(mc,{className:Dn("w-4 h-4 transition-transform",x&&"rotate-180")})]}),x&&p.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background-secondary dark:bg-background-primary border border-border rounded-lg shadow-lg z-50 overflow-hidden",children:[p.jsx(Ef,{to:"/settings",onClick:()=>{b(!1),l("Settings")},className:"block px-4 py-2 hover:bg-accent text-text transition-colors",children:f("settings")}),p.jsxs("div",{className:"border-t border-border px-4 py-2",children:[p.jsx("div",{className:"text-xs text-text-muted mb-2",children:f("language")||"Language"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Nv,{lng:"en",current:s.language,onClick:c}),p.jsx(Nv,{lng:"fa",current:s.language,onClick:c})]})]})]})]})]}),p.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 overflow-auto",children:p.jsx("div",{className:"h-full",children:p.jsx(mT,{})})})]})}),p.jsxs("div",{className:"desktop-column",children:[p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-0",children:[p.jsxs("div",{className:"card flex-1 border-b-0 relative overflow-hidden flex flex-col sm:flex-row min-h-[300px] sm:min-h-[400px] md:min-h-[450px] lg:min-h-[500px]",children:[p.jsx("div",{className:"hidden sm:block flex-shrink-0",children:p.jsx(Mv,{})}),p.jsxs("div",{className:"flex-1 min-h-0 min-w-0 relative",children:[p.jsx(Xw,{}),p.jsx("div",{className:"sm:hidden absolute top-2 left-2 z-10",children:p.jsx("div",{className:"bg-black/70 rounded-lg p-1",children:p.jsx("div",{className:"transform scale-75 origin-top-left",children:p.jsx(Mv,{})})})})]})]}),p.jsx("div",{className:"card flex-shrink-0 border-t-0 text-text dark:text-text font-medium text-center p-2 sm:p-3 text-xs sm:text-sm min-h-[40px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px] flex items-center justify-center",children:f("imageReel")})]}),p.jsxs("div",{className:"card flex-shrink-0 p-2 sm:p-3 min-h-[180px] sm:min-h-[200px] md:min-h-[220px] lg:min-h-[240px] max-h-[240px] sm:max-h-[280px] md:max-h-[320px] lg:max-h-[360px] flex",children:[p.jsx("div",{className:"flex-1 min-h-0 overflow-hidden rounded-lg bg-background-secondary dark:bg-background-primary border border-border p-2",children:p.jsx(SR,{})}),p.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[220px] md:w-[260px] lg:w-[300px] rounded-lg border border-border overflow-hidden ml-2",children:p.jsx(kb,{})})]})]})]})},ER=Ae.memo(_R),Gw=E.createContext();function MR({children:t}){const[e,r]=E.useState(()=>localStorage.getItem("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),[o,x]=E.useState(()=>localStorage.getItem("industrialUI")==="true");return E.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("theme",e)},[e]),E.useEffect(()=>{document.documentElement.classList.toggle("industrial",o),localStorage.setItem("industrialUI",o)},[o]),p.jsx(Gw.Provider,{value:{theme:e,setTheme:r,industrialUI:o,setIndustrialUI:x},children:t})}function NR(){const t=E.useContext(Gw);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}function OR(){const{theme:t,setTheme:e,industrialUI:r,setIndustrialUI:o}=NR(),{t:x,i18n:b}=tt(),C=()=>{e(t==="light"?"dark":"light")},f=()=>{o(!r)},s=h=>{b.changeLanguage(h)};return p.jsxs("div",{className:"p-4 sm:p-6 text-text dark:text-text space-y-6 sm:space-y-8 max-w-xl mx-auto",children:[p.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center",children:x("settingsPage")}),p.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center",children:x("settingsDescription")}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[p.jsx(Wk,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-500 flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-sm sm:text-base block",children:"Industrial UI"}),p.jsx("span",{className:"text-xs text-text-muted",children:"Windows XP-inspired interface"})]})]}),p.jsx("button",{onClick:f,className:`w-full sm:w-auto px-4 py-2 rounded-lg transition text-sm sm:text-base ${r?"bg-highlight text-white hover:bg-highlight-dark":"bg-primary text-white hover:bg-primary/90"}`,children:r?"Disable Industrial":"Enable Industrial"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[p.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t==="light"?p.jsx(e_,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 flex-shrink-0"}):p.jsx(Tj,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-400 flex-shrink-0"}),p.jsx("span",{className:"font-medium text-sm sm:text-base",children:x("theme")})]}),p.jsx("button",{onClick:C,className:"w-full sm:w-auto px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition text-sm sm:text-base",children:x("switchTo",{mode:x(t==="light"?"dark":"light")})})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[p.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:p.jsx("span",{className:"font-medium text-sm sm:text-base",children:x("language")})}),p.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:["en","fa"].map(h=>p.jsx("button",{onClick:()=>s(h),className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 rounded-lg text-sm transition font-medium
                ${b.language===h?"bg-primary text-white shadow":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:h.toUpperCase()},h))})]})]})}const DR=()=>p.jsx(Do,{title:"تست Canvas پیشرفته",description:"آزمایش ابزارهای رسم و ویرایش با کتابخانه‌های حرفه‌ای",children:p.jsx("div",{className:"h-full",children:p.jsx(Xw,{})})}),AR=[{path:"/",element:p.jsx(ER,{}),children:[{index:!0,element:p.jsx(uk,{})},{path:"initial",element:p.jsx(M_,{})},{path:"position",element:p.jsx(D_,{})},{path:"projection",element:p.jsx(F_,{})},{path:"post-processing",element:p.jsx(H_,{})},{path:"reconstruction",element:p.jsx($_,{})},{path:"settings",element:p.jsx(OR,{})},{path:"canvas-test",element:p.jsx(DR,{})}]}];function RR(){return tT(AR)}const Xe=t=>typeof t=="string",Ka=()=>{let t,e;const r=new Promise((o,x)=>{t=o,e=x});return r.resolve=t,r.reject=e,r},Ov=t=>t==null?"":""+t,PR=(t,e,r)=>{t.forEach(o=>{e[o]&&(r[o]=e[o])})},LR=/###/g,Dv=t=>t&&t.indexOf("###")>-1?t.replace(LR,"."):t,Av=t=>!t||Xe(t),ho=(t,e,r)=>{const o=Xe(e)?e.split("."):e;let x=0;for(;x<o.length-1;){if(Av(t))return{};const b=Dv(o[x]);!t[b]&&r&&(t[b]=new r),Object.prototype.hasOwnProperty.call(t,b)?t=t[b]:t={},++x}return Av(t)?{}:{obj:t,k:Dv(o[x])}},Rv=(t,e,r)=>{const{obj:o,k:x}=ho(t,e,Object);if(o!==void 0||e.length===1){o[x]=r;return}let b=e[e.length-1],C=e.slice(0,e.length-1),f=ho(t,C,Object);for(;f.obj===void 0&&C.length;)b=`${C[C.length-1]}.${b}`,C=C.slice(0,C.length-1),f=ho(t,C,Object),f!=null&&f.obj&&typeof f.obj[`${f.k}.${b}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${b}`]=r},FR=(t,e,r,o)=>{const{obj:x,k:b}=ho(t,e,Object);x[b]=x[b]||[],x[b].push(r)},jc=(t,e)=>{const{obj:r,k:o}=ho(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,o))return r[o]},zR=(t,e,r)=>{const o=jc(t,r);return o!==void 0?o:jc(e,r)},qw=(t,e,r)=>{for(const o in e)o!=="__proto__"&&o!=="constructor"&&(o in t?Xe(t[o])||t[o]instanceof String||Xe(e[o])||e[o]instanceof String?r&&(t[o]=e[o]):qw(t[o],e[o],r):t[o]=e[o]);return t},_s=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var BR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const IR=t=>Xe(t)?t.replace(/[&<>"'\/]/g,e=>BR[e]):t;class VR{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const o=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,o),this.regExpQueue.push(e),o}}const UR=[" ",",","?","!",";"],HR=new VR(20),$R=(t,e,r)=>{e=e||"",r=r||"";const o=UR.filter(C=>e.indexOf(C)<0&&r.indexOf(C)<0);if(o.length===0)return!0;const x=HR.getRegExp(`(${o.map(C=>C==="?"?"\\?":C).join("|")})`);let b=!x.test(t);if(!b){const C=t.indexOf(r);C>0&&!x.test(t.substring(0,C))&&(b=!0)}return b},bf=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const o=e.split(r);let x=t;for(let b=0;b<o.length;){if(!x||typeof x!="object")return;let C,f="";for(let s=b;s<o.length;++s)if(s!==b&&(f+=r),f+=o[s],C=x[f],C!==void 0){if(["string","number","boolean"].indexOf(typeof C)>-1&&s<o.length-1)continue;b+=s-b+1;break}x=C}return x},To=t=>t==null?void 0:t.replace("_","-"),XR={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,o;(o=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||o.call(r,console,e)}};class _c{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||XR,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,o,x){return x&&!this.debug?null:(Xe(e[0])&&(e[0]=`${o}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new _c(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _c(this.logger,e)}}var Qn=new _c;class Hc{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const x=this.observers[o].get(r)||0;this.observers[o].set(r,x+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([x,b])=>{for(let C=0;C<b;C++)x(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([x,b])=>{for(let C=0;C<b;C++)x.apply(x,[e,...r])})}}class Pv extends Hc{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,o,x={}){var h,d;const b=x.keySeparator!==void 0?x.keySeparator:this.options.keySeparator,C=x.ignoreJSONStructure!==void 0?x.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;e.indexOf(".")>-1?f=e.split("."):(f=[e,r],o&&(Array.isArray(o)?f.push(...o):Xe(o)&&b?f.push(...o.split(b)):f.push(o)));const s=jc(this.data,f);return!s&&!r&&!o&&e.indexOf(".")>-1&&(e=f[0],r=f[1],o=f.slice(2).join(".")),s||!C||!Xe(o)?s:bf((d=(h=this.data)==null?void 0:h[e])==null?void 0:d[r],o,b)}addResource(e,r,o,x,b={silent:!1}){const C=b.keySeparator!==void 0?b.keySeparator:this.options.keySeparator;let f=[e,r];o&&(f=f.concat(C?o.split(C):o)),e.indexOf(".")>-1&&(f=e.split("."),x=r,r=f[1]),this.addNamespaces(r),Rv(this.data,f,x),b.silent||this.emit("added",e,r,o,x)}addResources(e,r,o,x={silent:!1}){for(const b in o)(Xe(o[b])||Array.isArray(o[b]))&&this.addResource(e,r,b,o[b],{silent:!0});x.silent||this.emit("added",e,r,o)}addResourceBundle(e,r,o,x,b,C={silent:!1,skipCopy:!1}){let f=[e,r];e.indexOf(".")>-1&&(f=e.split("."),x=o,o=r,r=f[1]),this.addNamespaces(r);let s=jc(this.data,f)||{};C.skipCopy||(o=JSON.parse(JSON.stringify(o))),x?qw(s,o,b):s={...s,...o},Rv(this.data,f,s),C.silent||this.emit("added",e,r,o)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(x=>r[x]&&Object.keys(r[x]).length>0)}toJSON(){return this.data}}var Ww={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,o,x){return t.forEach(b=>{var C;e=((C=this.processors[b])==null?void 0:C.process(e,r,o,x))??e}),e}};const Lv={},Fv=t=>!Xe(t)&&typeof t!="boolean"&&typeof t!="number";class Ec extends Hc{constructor(e,r={}){super(),PR(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const o={...r};if(e==null)return!1;const x=this.resolve(e,o);return(x==null?void 0:x.res)!==void 0}extractFromKey(e,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const x=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let b=r.ns||this.options.defaultNS||[];const C=o&&e.indexOf(o)>-1,f=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!$R(e,o,x);if(C&&!f){const s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:Xe(b)?[b]:b};const h=e.split(o);(o!==x||o===x&&this.options.ns.indexOf(h[0])>-1)&&(b=h.shift()),e=h.join(x)}return{key:e,namespaces:Xe(b)?[b]:b}}translate(e,r,o){let x=typeof r=="object"?{...r}:r;if(typeof x!="object"&&this.options.overloadTranslationOptionHandler&&(x=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(x={...x}),x||(x={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const b=x.returnDetails!==void 0?x.returnDetails:this.options.returnDetails,C=x.keySeparator!==void 0?x.keySeparator:this.options.keySeparator,{key:f,namespaces:s}=this.extractFromKey(e[e.length-1],x),h=s[s.length-1];let d=x.nsSeparator!==void 0?x.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const a=x.lng||this.language,l=x.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((a==null?void 0:a.toLowerCase())==="cimode")return l?b?{res:`${h}${d}${f}`,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:h,usedParams:this.getUsedParamsDetails(x)}:`${h}${d}${f}`:b?{res:f,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:h,usedParams:this.getUsedParamsDetails(x)}:f;const c=this.resolve(e,x);let m=c==null?void 0:c.res;const y=(c==null?void 0:c.usedKey)||f,g=(c==null?void 0:c.exactUsedKey)||f,w=["[object Number]","[object Function]","[object RegExp]"],S=x.joinArrays!==void 0?x.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,j=x.count!==void 0&&!Xe(x.count),M=Ec.hasDefaultValue(x),N=j?this.pluralResolver.getSuffix(a,x.count,x):"",D=x.ordinal&&j?this.pluralResolver.getSuffix(a,x.count,{ordinal:!1}):"",A=j&&!x.ordinal&&x.count===0,B=A&&x[`defaultValue${this.options.pluralSeparator}zero`]||x[`defaultValue${N}`]||x[`defaultValue${D}`]||x.defaultValue;let Y=m;k&&!m&&M&&(Y=B);const oe=Fv(Y),Z=Object.prototype.toString.apply(Y);if(k&&Y&&oe&&w.indexOf(Z)<0&&!(Xe(S)&&Array.isArray(Y))){if(!x.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ae=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,Y,{...x,ns:s}):`key '${f} (${this.language})' returned an object instead of string.`;return b?(c.res=ae,c.usedParams=this.getUsedParamsDetails(x),c):ae}if(C){const ae=Array.isArray(Y),te=ae?[]:{},G=ae?g:y;for(const z in Y)if(Object.prototype.hasOwnProperty.call(Y,z)){const q=`${G}${C}${z}`;M&&!m?te[z]=this.translate(q,{...x,defaultValue:Fv(B)?B[z]:void 0,joinArrays:!1,ns:s}):te[z]=this.translate(q,{...x,joinArrays:!1,ns:s}),te[z]===q&&(te[z]=Y[z])}m=te}}else if(k&&Xe(S)&&Array.isArray(m))m=m.join(S),m&&(m=this.extendTranslation(m,e,x,o));else{let ae=!1,te=!1;!this.isValidLookup(m)&&M&&(ae=!0,m=B),this.isValidLookup(m)||(te=!0,m=f);const z=(x.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:m,q=M&&B!==m&&this.options.updateMissing;if(te||ae||q){if(this.logger.log(q?"updateKey":"missingKey",a,h,f,q?B:m),C){const L=this.resolve(f,{...x,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let X=[];const R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,x.lng||this.language);if(this.options.saveMissingTo==="fallback"&&R&&R[0])for(let L=0;L<R.length;L++)X.push(R[L]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(x.lng||this.language):X.push(x.lng||this.language);const O=(L,I,K)=>{var F;const V=M&&K!==m?K:z;this.options.missingKeyHandler?this.options.missingKeyHandler(L,h,I,V,q,x):(F=this.backendConnector)!=null&&F.saveMissing&&this.backendConnector.saveMissing(L,h,I,V,q,x),this.emit("missingKey",L,h,I,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?X.forEach(L=>{const I=this.pluralResolver.getSuffixes(L,x);A&&x[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(K=>{O([L],f+K,x[`defaultValue${K}`]||B)})}):O(X,f,B))}m=this.extendTranslation(m,e,x,c,o),te&&m===f&&this.options.appendNamespaceToMissingKey&&(m=`${h}${d}${f}`),(te||ae)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${d}${f}`:f,ae?m:void 0,x))}return b?(c.res=m,c.usedParams=this.getUsedParamsDetails(x),c):m}extendTranslation(e,r,o,x,b){var s,h;if((s=this.i18nFormat)!=null&&s.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||x.usedLng,x.usedNS,x.usedKey,{resolved:x});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const d=Xe(e)&&(((h=o==null?void 0:o.interpolation)==null?void 0:h.skipOnVariables)!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(d){const c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}let l=o.replace&&!Xe(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,o.lng||this.language||x.usedLng,o),d){const c=e.match(this.interpolator.nestingRegexp),m=c&&c.length;a<m&&(o.nest=!1)}!o.lng&&x&&x.res&&(o.lng=this.language||x.usedLng),o.nest!==!1&&(e=this.interpolator.nest(e,(...c)=>(b==null?void 0:b[0])===c[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${r[0]}`),null):this.translate(...c,r),o)),o.interpolation&&this.interpolator.reset()}const C=o.postProcess||this.options.postProcess,f=Xe(C)?[C]:C;return e!=null&&(f!=null&&f.length)&&o.applyPostProcessor!==!1&&(e=Ww.handle(f,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...x,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),e}resolve(e,r={}){let o,x,b,C,f;return Xe(e)&&(e=[e]),e.forEach(s=>{if(this.isValidLookup(o))return;const h=this.extractFromKey(s,r),d=h.key;x=d;let a=h.namespaces;this.options.fallbackNS&&(a=a.concat(this.options.fallbackNS));const l=r.count!==void 0&&!Xe(r.count),c=l&&!r.ordinal&&r.count===0,m=r.context!==void 0&&(Xe(r.context)||typeof r.context=="number")&&r.context!=="",y=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);a.forEach(g=>{var w,S;this.isValidLookup(o)||(f=g,!Lv[`${y[0]}-${g}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((S=this.utils)!=null&&S.hasLoadedNamespace(f))&&(Lv[`${y[0]}-${g}`]=!0,this.logger.warn(`key "${x}" for languages "${y.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(k=>{var N;if(this.isValidLookup(o))return;C=k;const j=[d];if((N=this.i18nFormat)!=null&&N.addLookupKeys)this.i18nFormat.addLookupKeys(j,d,k,g,r);else{let D;l&&(D=this.pluralResolver.getSuffix(k,r.count,r));const A=`${this.options.pluralSeparator}zero`,B=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(j.push(d+D),r.ordinal&&D.indexOf(B)===0&&j.push(d+D.replace(B,this.options.pluralSeparator)),c&&j.push(d+A)),m){const Y=`${d}${this.options.contextSeparator}${r.context}`;j.push(Y),l&&(j.push(Y+D),r.ordinal&&D.indexOf(B)===0&&j.push(Y+D.replace(B,this.options.pluralSeparator)),c&&j.push(Y+A))}}let M;for(;M=j.pop();)this.isValidLookup(o)||(b=M,o=this.getResource(k,g,M,r))}))})}),{res:o,usedKey:x,exactUsedKey:b,usedLng:C,usedNS:f}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,o,x={}){var b;return(b=this.i18nFormat)!=null&&b.getResource?this.i18nFormat.getResource(e,r,o,x):this.resourceStore.getResource(e,r,o,x)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=e.replace&&!Xe(e.replace);let x=o?e.replace:e;if(o&&typeof e.count<"u"&&(x.count=e.count),this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),!o){x={...x};for(const b of r)delete x[b]}return x}static hasDefaultValue(e){const r="defaultValue";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&r===o.substring(0,r.length)&&e[o]!==void 0)return!0;return!1}}class zv{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qn.create("languageUtils")}getScriptPartFromCode(e){if(e=To(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=To(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Xe(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(o=>{if(r)return;const x=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(x))&&(r=x)}),!r&&this.options.supportedLngs&&e.forEach(o=>{if(r)return;const x=this.getScriptPartFromCode(o);if(this.isSupportedCode(x))return r=x;const b=this.getLanguagePartFromCode(o);if(this.isSupportedCode(b))return r=b;r=this.options.supportedLngs.find(C=>{if(C===b)return C;if(!(C.indexOf("-")<0&&b.indexOf("-")<0)&&(C.indexOf("-")>0&&b.indexOf("-")<0&&C.substring(0,C.indexOf("-"))===b||C.indexOf(b)===0&&b.length>1))return C})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Xe(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let o=e[r];return o||(o=e[this.getScriptPartFromCode(r)]),o||(o=e[this.formatLanguageCode(r)]),o||(o=e[this.getLanguagePartFromCode(r)]),o||(o=e.default),o||[]}toResolveHierarchy(e,r){const o=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),x=[],b=C=>{C&&(this.isSupportedCode(C)?x.push(C):this.logger.warn(`rejecting language code not found in supportedLngs: ${C}`))};return Xe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&b(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&b(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&b(this.getLanguagePartFromCode(e))):Xe(e)&&b(this.formatLanguageCode(e)),o.forEach(C=>{x.indexOf(C)<0&&b(this.formatLanguageCode(C))}),x}}const Bv={zero:0,one:1,two:2,few:3,many:4,other:5},Iv={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class YR{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Qn.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const o=To(e==="dev"?"en":e),x=r.ordinal?"ordinal":"cardinal",b=JSON.stringify({cleanedCode:o,type:x});if(b in this.pluralRulesCache)return this.pluralRulesCache[b];let C;try{C=new Intl.PluralRules(o,{type:x})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Iv;if(!e.match(/-|_/))return Iv;const s=this.languageUtils.getLanguagePartFromCode(e);C=this.getRule(s,r)}return this.pluralRulesCache[b]=C,C}needsPlural(e,r={}){let o=this.getRule(e,r);return o||(o=this.getRule("dev",r)),(o==null?void 0:o.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,o={}){return this.getSuffixes(e,o).map(x=>`${r}${x}`)}getSuffixes(e,r={}){let o=this.getRule(e,r);return o||(o=this.getRule("dev",r)),o?o.resolvedOptions().pluralCategories.sort((x,b)=>Bv[x]-Bv[b]).map(x=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${x}`):[]}getSuffix(e,r,o={}){const x=this.getRule(e,o);return x?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${x.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,o))}}const Vv=(t,e,r,o=".",x=!0)=>{let b=zR(t,e,r);return!b&&x&&Xe(r)&&(b=bf(t,r,o),b===void 0&&(b=bf(e,r,o))),b},Ld=t=>t.replace(/\$/g,"$$$$");class GR{constructor(e={}){var r;this.logger=Qn.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(o=>o),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:x,prefix:b,prefixEscaped:C,suffix:f,suffixEscaped:s,formatSeparator:h,unescapeSuffix:d,unescapePrefix:a,nestingPrefix:l,nestingPrefixEscaped:c,nestingSuffix:m,nestingSuffixEscaped:y,nestingOptionsSeparator:g,maxReplaces:w,alwaysFormat:S}=e.interpolation;this.escape=r!==void 0?r:IR,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=x!==void 0?x:!1,this.prefix=b?_s(b):C||"{{",this.suffix=f?_s(f):s||"}}",this.formatSeparator=h||",",this.unescapePrefix=d?"":a||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=l?_s(l):c||_s("$t("),this.nestingSuffix=m?_s(m):y||_s(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=w||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,o)=>(r==null?void 0:r.source)===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,o,x){var c;let b,C,f;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=m=>{if(m.indexOf(this.formatSeparator)<0){const S=Vv(r,s,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,o,{...x,...r,interpolationkey:m}):S}const y=m.split(this.formatSeparator),g=y.shift().trim(),w=y.join(this.formatSeparator).trim();return this.format(Vv(r,s,g,this.options.keySeparator,this.options.ignoreJSONStructure),w,o,{...x,...r,interpolationkey:g})};this.resetRegExp();const d=(x==null?void 0:x.missingInterpolationHandler)||this.options.missingInterpolationHandler,a=((c=x==null?void 0:x.interpolation)==null?void 0:c.skipOnVariables)!==void 0?x.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Ld(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Ld(this.escape(m)):Ld(m)}].forEach(m=>{for(f=0;b=m.regex.exec(e);){const y=b[1].trim();if(C=h(y),C===void 0)if(typeof d=="function"){const w=d(e,b,x);C=Xe(w)?w:""}else if(x&&Object.prototype.hasOwnProperty.call(x,y))C="";else if(a){C=b[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),C="";else!Xe(C)&&!this.useRawValueToEscape&&(C=Ov(C));const g=m.safeValue(C);if(e=e.replace(b[0],g),a?(m.regex.lastIndex+=C.length,m.regex.lastIndex-=b[0].length):m.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),e}nest(e,r,o={}){let x,b,C;const f=(s,h)=>{const d=this.nestingOptionsSeparator;if(s.indexOf(d)<0)return s;const a=s.split(new RegExp(`${d}[ ]*{`));let l=`{${a[1]}`;s=a[0],l=this.interpolate(l,C);const c=l.match(/'/g),m=l.match(/"/g);(((c==null?void 0:c.length)??0)%2===0&&!m||m.length%2!==0)&&(l=l.replace(/'/g,'"'));try{C=JSON.parse(l),h&&(C={...h,...C})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${s}`,y),`${s}${d}${l}`}return C.defaultValue&&C.defaultValue.indexOf(this.prefix)>-1&&delete C.defaultValue,s};for(;x=this.nestingRegexp.exec(e);){let s=[];C={...o},C=C.replace&&!Xe(C.replace)?C.replace:C,C.applyPostProcessor=!1,delete C.defaultValue;let h=!1;if(x[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(x[1])){const d=x[1].split(this.formatSeparator).map(a=>a.trim());x[1]=d.shift(),s=d,h=!0}if(b=r(f.call(this,x[1].trim(),C),C),b&&x[0]===e&&!Xe(b))return b;Xe(b)||(b=Ov(b)),b||(this.logger.warn(`missed to resolve ${x[1]} for nesting ${e}`),b=""),h&&(b=s.reduce((d,a)=>this.format(d,a,o.lng,{...o,interpolationkey:x[1].trim()}),b.trim())),e=e.replace(x[0],b),this.regexp.lastIndex=0}return e}}const qR=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const o=t.split("(");e=o[0].toLowerCase().trim();const x=o[1].substring(0,o[1].length-1);e==="currency"&&x.indexOf(":")<0?r.currency||(r.currency=x.trim()):e==="relativetime"&&x.indexOf(":")<0?r.range||(r.range=x.trim()):x.split(";").forEach(C=>{if(C){const[f,...s]=C.split(":"),h=s.join(":").trim().replace(/^'+|'+$/g,""),d=f.trim();r[d]||(r[d]=h),h==="false"&&(r[d]=!1),h==="true"&&(r[d]=!0),isNaN(h)||(r[d]=parseInt(h,10))}})}return{formatName:e,formatOptions:r}},Uv=t=>{const e={};return(r,o,x)=>{let b=x;x&&x.interpolationkey&&x.formatParams&&x.formatParams[x.interpolationkey]&&x[x.interpolationkey]&&(b={...b,[x.interpolationkey]:void 0});const C=o+JSON.stringify(b);let f=e[C];return f||(f=t(To(o),x),e[C]=f),f(r)}},WR=t=>(e,r,o)=>t(To(r),o)(e);class KR{constructor(e={}){this.logger=Qn.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const o=r.cacheInBuiltFormats?Uv:WR;this.formats={number:o((x,b)=>{const C=new Intl.NumberFormat(x,{...b});return f=>C.format(f)}),currency:o((x,b)=>{const C=new Intl.NumberFormat(x,{...b,style:"currency"});return f=>C.format(f)}),datetime:o((x,b)=>{const C=new Intl.DateTimeFormat(x,{...b});return f=>C.format(f)}),relativetime:o((x,b)=>{const C=new Intl.RelativeTimeFormat(x,{...b});return f=>C.format(f,b.range||"day")}),list:o((x,b)=>{const C=new Intl.ListFormat(x,{...b});return f=>C.format(f)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Uv(r)}format(e,r,o,x={}){const b=r.split(this.formatSeparator);if(b.length>1&&b[0].indexOf("(")>1&&b[0].indexOf(")")<0&&b.find(f=>f.indexOf(")")>-1)){const f=b.findIndex(s=>s.indexOf(")")>-1);b[0]=[b[0],...b.splice(1,f)].join(this.formatSeparator)}return b.reduce((f,s)=>{var a;const{formatName:h,formatOptions:d}=qR(s);if(this.formats[h]){let l=f;try{const c=((a=x==null?void 0:x.formatParams)==null?void 0:a[x.interpolationkey])||{},m=c.locale||c.lng||x.locale||x.lng||o;l=this.formats[h](f,m,{...d,...x,...c})}catch(c){this.logger.warn(c)}return l}else this.logger.warn(`there was no format function for ${h}`);return f},e)}}const ZR=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class QR extends Hc{constructor(e,r,o,x={}){var b,C;super(),this.backend=e,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=x,this.logger=Qn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=x.maxParallelReads||10,this.readingCalls=0,this.maxRetries=x.maxRetries>=0?x.maxRetries:5,this.retryTimeout=x.retryTimeout>=1?x.retryTimeout:350,this.state={},this.queue=[],(C=(b=this.backend)==null?void 0:b.init)==null||C.call(b,o,x.backend,x)}queueLoad(e,r,o,x){const b={},C={},f={},s={};return e.forEach(h=>{let d=!0;r.forEach(a=>{const l=`${h}|${a}`;!o.reload&&this.store.hasResourceBundle(h,a)?this.state[l]=2:this.state[l]<0||(this.state[l]===1?C[l]===void 0&&(C[l]=!0):(this.state[l]=1,d=!1,C[l]===void 0&&(C[l]=!0),b[l]===void 0&&(b[l]=!0),s[a]===void 0&&(s[a]=!0)))}),d||(f[h]=!0)}),(Object.keys(b).length||Object.keys(C).length)&&this.queue.push({pending:C,pendingCount:Object.keys(C).length,loaded:{},errors:[],callback:x}),{toLoad:Object.keys(b),pending:Object.keys(C),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(s)}}loaded(e,r,o){const x=e.split("|"),b=x[0],C=x[1];r&&this.emit("failedLoading",b,C,r),!r&&o&&this.store.addResourceBundle(b,C,o,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&o&&(this.state[e]=0);const f={};this.queue.forEach(s=>{FR(s.loaded,[b],C),ZR(s,e),r&&s.errors.push(r),s.pendingCount===0&&!s.done&&(Object.keys(s.loaded).forEach(h=>{f[h]||(f[h]={});const d=s.loaded[h];d.length&&d.forEach(a=>{f[h][a]===void 0&&(f[h][a]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(s=>!s.done)}read(e,r,o,x=0,b=this.retryTimeout,C){if(!e.length)return C(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:o,tried:x,wait:b,callback:C});return}this.readingCalls++;const f=(h,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const a=this.waitingReads.shift();this.read(a.lng,a.ns,a.fcName,a.tried,a.wait,a.callback)}if(h&&d&&x<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,o,x+1,b*2,C)},b);return}C(h,d)},s=this.backend[o].bind(this.backend);if(s.length===2){try{const h=s(e,r);h&&typeof h.then=="function"?h.then(d=>f(null,d)).catch(f):f(null,h)}catch(h){f(h)}return}return s(e,r,f)}prepareLoading(e,r,o={},x){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),x&&x();Xe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Xe(r)&&(r=[r]);const b=this.queueLoad(e,r,o,x);if(!b.toLoad.length)return b.pending.length||x(),null;b.toLoad.forEach(C=>{this.loadOne(C)})}load(e,r,o){this.prepareLoading(e,r,{},o)}reload(e,r,o){this.prepareLoading(e,r,{reload:!0},o)}loadOne(e,r=""){const o=e.split("|"),x=o[0],b=o[1];this.read(x,b,"read",void 0,void 0,(C,f)=>{C&&this.logger.warn(`${r}loading namespace ${b} for language ${x} failed`,C),!C&&f&&this.logger.log(`${r}loaded namespace ${b} for language ${x}`,f),this.loaded(e,C,f)})}saveMissing(e,r,o,x,b,C={},f=()=>{}){var s,h,d,a,l;if((h=(s=this.services)==null?void 0:s.utils)!=null&&h.hasLoadedNamespace&&!((a=(d=this.services)==null?void 0:d.utils)!=null&&a.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if((l=this.backend)!=null&&l.create){const c={...C,isUpdate:b},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(e,r,o,x,c):y=m(e,r,o,x),y&&typeof y.then=="function"?y.then(g=>f(null,g)).catch(f):f(null,y)}catch(y){f(y)}else m(e,r,o,x,f,c)}!e||!e[0]||this.store.addResource(e[0],r,o,x)}}}const Hv=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Xe(t[1])&&(e.defaultValue=t[1]),Xe(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(o=>{e[o]=r[o]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),$v=t=>{var e,r;return Xe(t.ns)&&(t.ns=[t.ns]),Xe(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Xe(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},rc=()=>{},JR=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class ko extends Hc{constructor(e={},r){if(super(),this.options=$v(e),this.services={},this.logger=Qn,this.modules={external:[]},JR(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Xe(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const o=Hv();this.options={...o,...this.options,...$v(e)},this.options.interpolation={...o.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const x=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Qn.init(x(this.modules.logger),this.options):Qn.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=KR;const d=new zv(this.options);this.store=new Pv(this.options.resources,this.options);const a=this.services;a.logger=Qn,a.resourceStore=this.store,a.languageUtils=d,a.pluralResolver=new YR(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(a.formatter=x(h),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new GR(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new QR(x(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(l,...c)=>{this.emit(l,...c)}),this.modules.languageDetector&&(a.languageDetector=x(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=x(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new Ec(this.services,this.options),this.translator.on("*",(l,...c)=>{this.emit(l,...c)}),this.modules.external.forEach(l=>{l.init&&l.init(this)})}if(this.format=this.options.interpolation.format,r||(r=rc),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...d)=>this.store[h](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...d)=>(this.store[h](...d),this)});const f=Ka(),s=()=>{const h=(d,a)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(a),r(d,a)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),f}loadResources(e,r=rc){var b,C;let o=r;const x=Xe(e)?e:this.language;if(typeof e=="function"&&(o=e),!this.options.resources||this.options.partialBundledLanguages){if((x==null?void 0:x.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const f=[],s=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(a=>{a!=="cimode"&&f.indexOf(a)<0&&f.push(a)})};x?s(x):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>s(d)),(C=(b=this.options.preload)==null?void 0:b.forEach)==null||C.call(b,h=>s(h)),this.services.backendConnector.load(f,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(h)})}else o(null)}reloadResources(e,r,o){const x=Ka();return typeof e=="function"&&(o=e,e=void 0),typeof r=="function"&&(o=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),o||(o=rc),this.services.backendConnector.reload(e,r,b=>{x.resolve(),o(b)}),x}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ww.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const o=Ka();this.emit("languageChanging",e);const x=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},b=(f,s)=>{s?this.isLanguageChangingTo===e&&(x(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,o.resolve((...h)=>this.t(...h)),r&&r(f,(...h)=>this.t(...h))},C=f=>{var d,a;!e&&!f&&this.services.languageDetector&&(f=[]);const s=Xe(f)?f:f&&f[0],h=this.store.hasLanguageSomeTranslations(s)?s:this.services.languageUtils.getBestMatchFromCodes(Xe(f)?[f]:f);h&&(this.language||x(h),this.translator.language||this.translator.changeLanguage(h),(a=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||a.call(d,h)),this.loadResources(h,l=>{b(l,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?C(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(C):this.services.languageDetector.detect(C):C(e),o}getFixedT(e,r,o){const x=(b,C,...f)=>{let s;typeof C!="object"?s=this.options.overloadTranslationOptionHandler([b,C].concat(f)):s={...C},s.lng=s.lng||x.lng,s.lngs=s.lngs||x.lngs,s.ns=s.ns||x.ns,s.keyPrefix!==""&&(s.keyPrefix=s.keyPrefix||o||x.keyPrefix);const h=this.options.keySeparator||".";let d;return s.keyPrefix&&Array.isArray(b)?d=b.map(a=>`${s.keyPrefix}${h}${a}`):d=s.keyPrefix?`${s.keyPrefix}${h}${b}`:b,this.t(d,s)};return Xe(e)?x.lng=e:x.lngs=e,x.ns=r,x.keyPrefix=o,x}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],x=this.options?this.options.fallbackLng:!1,b=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const C=(f,s)=>{const h=this.services.backendConnector.state[`${f}|${s}`];return h===-1||h===0||h===2};if(r.precheck){const f=r.precheck(this,C);if(f!==void 0)return f}return!!(this.hasResourceBundle(o,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||C(o,e)&&(!x||C(b,e)))}loadNamespaces(e,r){const o=Ka();return this.options.ns?(Xe(e)&&(e=[e]),e.forEach(x=>{this.options.ns.indexOf(x)<0&&this.options.ns.push(x)}),this.loadResources(x=>{o.resolve(),r&&r(x)}),o):(r&&r(),Promise.resolve())}loadLanguages(e,r){const o=Ka();Xe(e)&&(e=[e]);const x=this.options.preload||[],b=e.filter(C=>x.indexOf(C)<0&&this.services.languageUtils.isSupportedCode(C));return b.length?(this.options.preload=x.concat(b),this.loadResources(C=>{o.resolve(),r&&r(C)}),o):(r&&r(),Promise.resolve())}dir(e){var x,b;if(e||(e=this.resolvedLanguage||(((x=this.languages)==null?void 0:x.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=((b=this.services)==null?void 0:b.languageUtils)||new zv(Hv());return r.indexOf(o.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){return new ko(e,r)}cloneInstance(e={},r=rc){const o=e.forkResourceStore;o&&delete e.forkResourceStore;const x={...this.options,...e,isClone:!0},b=new ko(x);if((e.debug!==void 0||e.prefix!==void 0)&&(b.logger=b.logger.clone(e)),["store","services","language"].forEach(f=>{b[f]=this[f]}),b.services={...this.services},b.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},o){const f=Object.keys(this.store.data).reduce((s,h)=>(s[h]={...this.store.data[h]},s[h]=Object.keys(s[h]).reduce((d,a)=>(d[a]={...s[h][a]},d),s[h]),s),{});b.store=new Pv(f,x),b.services.resourceStore=b.store}return b.translator=new Ec(b.services,x),b.translator.on("*",(f,...s)=>{b.emit(f,...s)}),b.init(x,r),b.translator.options=x,b.translator.backendConnector.services.utils={hasLoadedNamespace:b.hasLoadedNamespace.bind(b)},b}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Kt=ko.createInstance();Kt.createInstance=ko.createInstance;Kt.createInstance;Kt.dir;Kt.init;Kt.loadResources;Kt.reloadResources;Kt.use;Kt.changeLanguage;Kt.getFixedT;Kt.t;Kt.exists;Kt.setDefaultNamespace;Kt.hasLoadedNamespace;Kt.loadNamespaces;Kt.loadLanguages;const{slice:eP,forEach:tP}=[];function nP(t){return tP.call(eP.call(arguments,1),e=>{if(e)for(const r in e)t[r]===void 0&&(t[r]=e[r])}),t}function iP(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(t))}const Xv=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,rP=function(t,e){const o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},x=encodeURIComponent(e);let b=`${t}=${x}`;if(o.maxAge>0){const C=o.maxAge-0;if(Number.isNaN(C))throw new Error("maxAge should be a Number");b+=`; Max-Age=${Math.floor(C)}`}if(o.domain){if(!Xv.test(o.domain))throw new TypeError("option domain is invalid");b+=`; Domain=${o.domain}`}if(o.path){if(!Xv.test(o.path))throw new TypeError("option path is invalid");b+=`; Path=${o.path}`}if(o.expires){if(typeof o.expires.toUTCString!="function")throw new TypeError("option expires is invalid");b+=`; Expires=${o.expires.toUTCString()}`}if(o.httpOnly&&(b+="; HttpOnly"),o.secure&&(b+="; Secure"),o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;case"none":b+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(b+="; Partitioned"),b},Yv={create(t,e,r,o){let x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(x.expires=new Date,x.expires.setTime(x.expires.getTime()+r*60*1e3)),o&&(x.domain=o),document.cookie=rP(t,encodeURIComponent(e),x)},read(t){const e=`${t}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let x=r[o];for(;x.charAt(0)===" ";)x=x.substring(1,x.length);if(x.indexOf(e)===0)return x.substring(e.length,x.length)}return null},remove(t){this.create(t,"",-1)}};var sP={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Yv.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:r,cookieMinutes:o,cookieDomain:x,cookieOptions:b}=e;r&&typeof document<"u"&&Yv.create(r,t,o,x,b)}},aP={name:"querystring",lookup(t){var o;let{lookupQuerystring:e}=t,r;if(typeof window<"u"){let{search:x}=window.location;!window.location.search&&((o=window.location.hash)==null?void 0:o.indexOf("?"))>-1&&(x=window.location.hash.substring(window.location.hash.indexOf("?")));const C=x.substring(1).split("&");for(let f=0;f<C.length;f++){const s=C[f].indexOf("=");s>0&&C[f].substring(0,s)===e&&(r=C[f].substring(s+1))}}return r}};let Es=null;const Gv=()=>{if(Es!==null)return Es;try{if(Es=typeof window<"u"&&window.localStorage!==null,!Es)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Es=!1}return Es};var oP={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&Gv())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:r}=e;r&&Gv()&&window.localStorage.setItem(r,t)}};let Ms=null;const qv=()=>{if(Ms!==null)return Ms;try{if(Ms=typeof window<"u"&&window.sessionStorage!==null,!Ms)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Ms=!1}return Ms};var lP={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&qv())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:r}=e;r&&qv()&&window.sessionStorage.setItem(r,t)}},cP={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:r,userLanguage:o,language:x}=navigator;if(r)for(let b=0;b<r.length;b++)e.push(r[b]);o&&e.push(o),x&&e.push(x)}return e.length>0?e:void 0}},uP={name:"htmlTag",lookup(t){let{htmlTag:e}=t,r;const o=e||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(r=o.getAttribute("lang")),r}},hP={name:"path",lookup(t){var x;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(x=r[typeof e=="number"?e:0])==null?void 0:x.replace("/",""):void 0}},dP={name:"subdomain",lookup(t){var x,b;let{lookupFromSubdomainIndex:e}=t;const r=typeof e=="number"?e+1:1,o=typeof window<"u"&&((b=(x=window.location)==null?void 0:x.hostname)==null?void 0:b.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(o)return o[r]}};let Kw=!1;try{document.cookie,Kw=!0}catch{}const Zw=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Kw||Zw.splice(1,1);const fP=()=>({order:Zw,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Qw{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,r)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=nP(r,this.options||{},fP()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=x=>x.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(sP),this.addDetector(aP),this.addDetector(oP),this.addDetector(lP),this.addDetector(cP),this.addDetector(uP),this.addDetector(hP),this.addDetector(dP)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return e.forEach(o=>{if(this.detectors[o]){let x=this.detectors[o].lookup(this.options);x&&typeof x=="string"&&(x=[x]),x&&(r=r.concat(x))}}),r=r.filter(o=>o!=null&&!iP(o)).map(o=>this.options.convertDetectedLanguage(o)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(o=>{this.detectors[o]&&this.detectors[o].cacheUserLanguage(e,this.options)}))}}Qw.type="languageDetector";const mP="Home",gP="Settings",pP="Initial",xP="Position",yP="Projection",vP="Post Processing",bP="Reconstruction",wP="System Status & Warnings",SP="X-ray Generator Status",CP="X-ray ON",TP="X-ray OFF",kP="Warning: X-ray is active!",jP="Camera",_P="Projection Display",EP="Image Reel",MP="Histogram",NP="Toggle Theme",OP="Crop",DP="Brush",AP="Eraser",RP="Circle",PP="Rectangle",LP="Line Chart",FP="Line",zP="Move",BP="Zoom In",IP="Zoom Out",VP="Home Page",UP="Welcome to the Home page! This page is styled to match the overall theme of the application.",HP="Settings Page",$P="This is the Settings page. Adjust your preferences here.",XP="Switch to {{mode}} Mode",YP="Input Showcase",GP="Checkboxes",qP="Checkbox 1",WP="Checkbox 2 (Default Checked)",KP="Checkbox (Disabled)",ZP="Confirm {{label}}",QP="Disabled Input",JP="Inputs",e5="Text Input",t5="Number Input",n5="Email Input",i5="Save {{label}}",r5="Textarea",s5="Enter your text here...",a5="Save Textarea",o5="Other Inputs",l5="Radio Buttons",c5="Option 1",u5="Option 2",h5="Select Dropdown",d5="Select an option",f5="Upload File",m5="Selected: {{name}}",g5="Password Input",p5="Enter password",x5="Range Slider",y5="Color Picker",v5="Date Picker",b5="IconButton Showcase",w5="{{variant}} Variant",S5="Size: {{size}} (Normal)",C5="Size: {{size}} (Disabled)",T5="{{variant}} {{size}} clicked!",k5="Run",j5="Initial Parameters",_5="Name",E5="Email",M5="Enter your name",N5="Enter your email",O5="X Position",D5="Y Position",A5="Enable Filter",R5="Connecting to WebSocket...",P5="Theme",L5="Language",F5="Dark",z5="Light",B5="Projection Acquisition",I5="Success",V5="Form data submitted successfully",U5="Error",H5="No data available to submit",$5="Are you sure?",X5="Cancel",Y5="Sending...",G5="No data available to send",q5="Invalid initial parameters",W5="Power",K5="Enter power (Watts)",Z5="Tube Voltage",Q5="Enter tube voltage (kVp)",J5="Anode Current",e3="Enter anode current",t3="Filtration",n3="Aluminum",i3="Copper",r3="Silver",s3="Enter filter thickness (mm)",a3="Exposure Time",o3="Bit Depth",l3="Tube Status",c3="Manipulator",u3="X Position",h3="Y Position",d3="Z Position",f3="Theta Angle",m3="Gamma Angle",g3="Joystick Speed",p3="Low",x3="Medium",y3="High",v3="Cabin Camera Status",b3="Standard Preset",w3="High Power Preset",S3="Clear All",C3="Voltage",T3="Current",k3="Active",j3="Inactive",_3="Connected to WebSocket",E3="Fast Imaging",M3="Rotation Speed",N3="Enter rotation speed",O3="Dual Energy",D3="Single Calibration",A3="Enter single calibration",R3="Rotate Calibration",P3="Enter rotate calibration",L3="Selected File",F3="Enter X position",z3="Enter Y position",B3="Enter Z position",I3="Enter Theta angle",V3="Enter Gamma angle",U3="Imaging Mode",H3="Multi-Segment Size",$3="Enter multi-segment size",X3="Image Adjustments",Y3="Gain",G3="Offset",q3="Preprocess",W3="HDR",K3="Energy Level 1",Z3="Energy Level 2",Q3="Enter energy level 1",J3="Enter energy level 2",eL="Image Count",tL="Enter image count",nL="Image Transform",iL="None",rL="Basic Operations",sL="Normalize",aL="FFT",oL="FFT Inverse",lL="Fourier Filter",cL="Low Pass",uL="Band Pass",hL="High Pass",dL="Apply Fourier Filter",fL="Export Image",mL="TIFF",gL="JPG",pL="DICOM",xL="Image Filters",yL="Median Filter",vL="Mean Filter",bL="Variance Filter",wL="Pseudo Color Filter",SL="Gaussian Filter",CL="Enter Gaussian sigma",TL="Sharpening",kL="Kernel Size",jL="Sharpening Strength",_L="Enter sharpening strength",EL="Edge Detection",ML="Threshold",NL="Enter threshold",OL="Edge Method",DL="Sobel",AL="Canny",RL="Prewitt",PL="OK",LL="Failed to send data",FL="Grayscale",zL="Pan",BL="Undo",IL="System Stability Check",VL="Interlock",UL="Temperature",HL="Pressure",$L="Cooling System",XL="Real-time monitoring of critical system parameters",YL="X-ray Tube & Exposure Log",GL="Time",qL="Download",WL="Clear",KL="Pause",ZL="Resume",QL="Paused",JL="Total logs",e4="No logs recorded yet",t4="Step Size",n4="Linear Movement",i4="Rotational Movement",r4="Control",s4="Manual Input",a4="Saved Positions",o4="Precise movements, best for fine-tuning",l4="Balanced speed for general positioning",c4="Fast movements for large adjustments",u4="Current Speed",h4="Turn On",d4="Turn Off",f4="Camera is turned off",m4="Click 'Turn On' to activate the camera",g4="Connecting to camera...",p4="Camera Connection Error",x4="Please check camera connection",y4="Retry",v4="Refresh",b4="Fullscreen",w4="Exit Fullscreen",S4="Resolution",C4="Frame Rate",T4="Exposure",k4="Brightness",j4="Trajectory Definition",_4="Select Trajectory Type",E4="Discrete angular steps",M4="Continuous circular motion",N4="Spiral path for tall objects",O4="Custom trajectory path",D4="Trajectory Parameters",A4="Number of Steps",R4="Angle per Step",P4="Start Angle",L4="End Angle",F4="Helix Pitch",z4="Height Steps",B4="Use trajectory designer or import custom points",I4="Open Trajectory Designer",V4="Saved Trajectories",U4="Enter trajectory name",H4="Geometry Configuration",$4="Calibrate",X4="System Calibrated",Y4="Last calibration",G4="Geometric accuracy",q4="Distance Parameters",W4="Detector Parameters",K4="Detector Width",Z4="Detector Height",Q4="Pixel Pitch",J4="Calculated Values",eF="Magnification",tF="Effective Pixel Size",nF="Width",iF="Height",rF="Additional Parameters",sF="Cone Beam Angle",aF="Focal Spot Size",oF="Acquisition Settings",lF="Start",cF="Stop",uF="Reset",hF="Acquiring",dF="Completed",fF="Rotation Mode",mF="Half rotation",gF="Full rotation",pF="Multi-Segment Imaging",xF="Number of Segments",yF="Overlap",vF="Total Height",bF="Number of Projections",wF="Exposure per Projection",SF="Acquisition Summary",CF="Mode",TF="Segments",kF="Total Proj.",jF="Est. Time",_F="Position Feedback",EF="Real-time Position Display",MF="Target Position",NF="Current Position",OF="Position Error",DF="Linear Detector Imaging",AF="Linear Detector Mode",RF="Scan Height",PF="Vertical Step Size",LF="Stitching Overlap",FF="Estimated Scan Time",zF="Calibration System",BF="Calibration Type",IF="Single Image Calibration",VF="Rotational Calibration",UF="Capture Calibration Image",HF="Start Calibration Scan",$F="Calibration Status",XF="Not Calibrated",YF="Calibrating",GF="Calibrated",qF="Calibration Date",WF="Calibration Quality",KF="Recalibrate",ZF="Image Quality Assessment",QF="Overall Quality",JF="Excellent",ez="Good",tz="Needs Improvement",nz="Spatial Resolution",iz="Uniformity",rz="Artifacts",sz="Last Assessment",az="Assessments",oz="Click 'Start Assessment' to begin quality evaluation",lz="Detector Configuration",cz="Detector Status",uz="Readout Noise",hz="Dark Current",dz="Hardware Settings",fz="Pixel Binning",mz="Readout Mode",gz="Cooling Temperature",pz="Gain Mode",xz="Imaging Settings",yz="Trigger Mode",vz="Processing Settings",bz="Dark Frame Correction",wz="Flat Field Correction",Sz="Bad Pixel Correction",Cz="Lag Correction",Tz="Settings saved successfully",kz="Settings imported successfully",jz="Advanced Filtering",_z="Denoising",Ez="Edge Enhancement",Mz="Histogram Equalization",Nz="Morphology",Oz="Wavelet",Dz="Method",Az="Strength",Rz="Amount",Pz="Radius",Lz="Low Threshold",Fz="High Threshold",zz="Clip Limit",Bz="Tile Size",Iz="Operation",Vz="Kernel Shape",Uz="Wavelet Type",Hz="Decomposition Level",$z="Select a filter type to configure settings",Xz="Please select a filter first",Yz="Filter applied successfully",Gz="Apply Filter",qz="Scan Protocol Management",Wz="Edit Protocol",Kz="New Protocol",Zz="Enter protocol name",Qz="Description",Jz="Enter description",e6="Are you sure you want to delete this protocol?",t6="Protocol applied successfully",n6="Protocols imported successfully",i6="No protocols available",r6="Apply",s6="Edit",a6="Duplicate",o6="Last Used",l6="Never",c6="Real-time Monitoring Dashboard",u6="Tube temperature is high",h6="X-ray power is high",d6="Cooling flow rate is low",f6="Tube Temp",m6="Last 20s",g6="Detector Temp",p6="Cooling Flow",x6="Data Rate",y6="System Load",v6="Acquisition Progress",b6="Images Acquired",w6="Est. Time Remaining",S6="Image Viewer",C6="Original",T6="Processed",k6="Compare Images",j6="No image loaded",_6="Upload Image",E6="Image Statistics",M6="Processing History",N6="Quick Filters",O6="Transformations",D6="Adjustments",A6="Invert",R6="Flip Vertical",P6="Contrast",L6="Processing",F6="Auto Process",z6="Filters",B6="Waiting for image",I6="Apply Filters",V6="Live Processing",U6="Image Processing",H6={home:mP,settings:gP,initial:pP,position:xP,projection:yP,postProcessing:vP,reconstruction:bP,systemStatus:wP,xrayStatus:SP,xrayOn:CP,xrayOff:TP,xraySafetyWarning:kP,camera:jP,projectionDisplay:_P,imageReel:EP,histogram:MP,toggleTheme:NP,crop:OP,brush:DP,eraser:AP,circle:RP,rectangle:PP,lineChart:LP,line:FP,move:zP,zoomIn:BP,zoomOut:IP,homePage:VP,welcome:UP,settingsPage:HP,settingsDescription:$P,switchTo:XP,inputShowcase:YP,checkboxes:GP,checkbox1:qP,checkbox2:WP,disabledCheckbox:KP,confirm:ZP,disabledInput:QP,inputs:JP,textInput:e5,numberInput:t5,emailInput:n5,save:i5,textarea:r5,enterText:s5,saveTextarea:a5,otherInputs:o5,radioButtons:l5,option1:c5,option2:u5,selectDropdown:h5,selectOption:d5,uploadFile:f5,selected:m5,passwordInput:g5,enterPassword:p5,rangeSlider:x5,colorPicker:y5,datePicker:v5,iconButtonShowcase:b5,variant:w5,sizeNormal:S5,sizeDisabled:C5,clicked:T5,run:k5,initialParameters:j5,name:_5,email:E5,enterName:M5,enterEmail:N5,xPosition:O5,yPosition:D5,enableFilter:A5,websocketConnecting:R5,theme:P5,language:L5,dark:F5,light:z5,projectionAcquisition:B5,success:I5,dataSubmittedSuccessfully:V5,error:U5,noDataToSubmit:H5,areYouSure:$5,cancel:X5,sendingData:Y5,noDataAvailable:G5,invalidInitialParameters:q5,power:W5,enterPower:K5,tubeVoltage:Z5,enterTubeVoltage:Q5,anodeCurrent:J5,enterAnodeCurrent:e3,filtration:t3,aluminum:n3,copper:i3,silver:r3,enterThickness:s3,exposureTime:a3,bitDepth:o3,"8bit":"8-bit","16bit":"16-bit",tubeStatus:l3,manipulator:c3,manipulatorX:u3,manipulatorY:h3,manipulatorZ:d3,manipulatorTheta:f3,manipulatorGamma:m3,joystickSpeed:g3,joystickSpeedLow:p3,joystickSpeedMedium:x3,joystickSpeedHigh:y3,cabinCameraStatus:v3,presetStandard:b3,presetHighPower:w3,clearAll:S3,voltage:C3,current:T3,active:k3,inactive:j3,websocketConnected:_3,fastImaging:E3,rotationSpeed:M3,enterRotationSpeed:N3,dualEnergy:O3,singleCalibration:D3,enterSingleCalibration:A3,rotateCalibration:R3,enterRotateCalibration:P3,selectedFile:L3,enterManipulatorX:F3,enterManipulatorY:z3,enterManipulatorZ:B3,enterManipulatorTheta:I3,enterManipulatorGamma:V3,"180degree":"180°","360degree":"360°",imagingMode:U3,multiSegmentSize:H3,enterMultiSegmentSize:$3,imageAdjustments:X3,gain:Y3,offset:G3,preprocess:q3,hdr:W3,energyLevel1:K3,energyLevel2:Z3,enterEnergyLevel1:Q3,enterEnergyLevel2:J3,imageCount:eL,enterImageCount:tL,imageTransform:nL,none:iL,"90degree":"90°","270degree":"270°",basicOperations:rL,normalize:sL,fft:aL,fftInverse:oL,fourierFilter:lL,lowPass:cL,bandPass:uL,highPass:hL,applyFourierFilter:dL,exportImage:fL,export:"Export",tiff:mL,jpg:gL,dicom:pL,imageFilters:xL,medianFilter:yL,meanFilter:vL,varianceFilter:bL,pseudoColorFilter:wL,gaussianFilter:SL,enterGaussianSigma:CL,sharpening:TL,kernelSize:kL,sharpeningStrength:jL,enterSharpeningStrength:_L,edgeDetection:EL,threshold:ML,enterThreshold:NL,edgeMethod:OL,sobel:DL,canny:AL,prewitt:RL,ok:PL,failedToSendData:LL,grayscale:FL,pan:zL,undo:BL,systemStabilityCheck:IL,interlock:VL,temperature:UL,pressure:HL,coolingSystem:$L,stabilityCheckDescription:XL,xrayExposureLog:YL,time:GL,download:qL,clear:WL,pause:KL,resume:ZL,paused:QL,totalLogs:JL,noLogsYet:e4,stepSize:t4,linearMovement:n4,rotationalMovement:i4,control:r4,manualInput:s4,savedPositions:a4,lowSpeedDesc:o4,mediumSpeedDesc:l4,highSpeedDesc:c4,currentSpeed:u4,turnOn:h4,turnOff:d4,cameraOff:f4,clickTurnOn:m4,connectingToCamera:g4,cameraError:p4,checkCameraConnection:x4,retry:y4,refresh:v4,fullscreen:b4,exitFullscreen:w4,resolution:S4,frameRate:C4,exposure:T4,brightness:k4,trajectoryDefinition:j4,import:"Import",selectTrajectoryType:_4,stepwiseDesc:E4,circularDesc:M4,helicalDesc:N4,arbitraryDesc:O4,trajectoryParameters:D4,numberOfSteps:A4,anglePerStep:R4,startAngle:P4,endAngle:L4,helixPitch:F4,heightSteps:z4,arbitraryTrajectoryInfo:B4,openDesigner:I4,savedTrajectories:V4,enterTrajectoryName:U4,geometryConfiguration:H4,calibrate:$4,systemCalibrated:X4,lastCalibration:Y4,geometricAccuracy:G4,distanceParameters:q4,detectorParameters:W4,detectorWidth:K4,detectorHeight:Z4,pixelPitch:Q4,calculatedValues:J4,magnification:eF,effectivePixelSize:tF,width:nF,height:iF,additionalParameters:rF,coneBeamAngle:sF,focalSpotSize:aF,acquisitionSettings:oF,start:lF,stop:cF,reset:uF,acquiring:hF,completed:dF,rotationMode:fF,halfRotation:mF,fullRotation:gF,multiSegmentImaging:pF,numberOfSegments:xF,segmentOverlap:yF,totalHeight:vF,numberOfProjections:bF,exposurePerProjection:wF,acquisitionSummary:SF,mode:CF,segments:TF,totalProjections:kF,estimatedTime:jF,positionFeedback:_F,realTimePosition:EF,targetPosition:MF,currentPosition:NF,positionError:OF,linearDetectorImaging:DF,linearDetectorMode:AF,scanHeight:RF,verticalStepSize:PF,stitchingOverlap:LF,estimatedScanTime:FF,calibrationSystem:zF,calibrationType:BF,singleImageCalibration:IF,rotationalCalibration:VF,captureCalibrationImage:UF,startCalibrationScan:HF,calibrationStatus:$F,notCalibrated:XF,calibrating:YF,calibrated:GF,calibrationDate:qF,calibrationQuality:WF,recalibrate:KF,imageQualityAssessment:ZF,overallQuality:QF,excellent:JF,good:ez,needsImprovement:tz,spatialResolution:nz,uniformity:iz,artifacts:rz,lastAssessment:sz,assessments:az,startAssessmentMessage:oz,detectorConfiguration:lz,detectorStatus:cz,readoutNoise:uz,darkCurrent:hz,hardwareSettings:dz,binning:fz,readoutMode:mz,coolingTemperature:gz,gainMode:pz,imagingSettings:xz,triggerMode:yz,processingSettings:vz,darkFrameCorrection:bz,flatFieldCorrection:wz,badPixelCorrection:Sz,lagCorrection:Cz,settingsSaved:Tz,settingsImported:kz,advancedFiltering:jz,denoising:_z,edgeEnhancement:Ez,histogramEqualization:Mz,morphology:Nz,wavelet:Oz,method:Dz,strength:Az,amount:Rz,radius:Pz,lowThreshold:Lz,highThreshold:Fz,clipLimit:zz,tileSize:Bz,operation:Iz,kernelShape:Vz,waveletType:Uz,decompositionLevel:Hz,selectFilterType:$z,selectFilterFirst:Xz,filterApplied:Yz,applyFilter:Gz,scanProtocolManagement:qz,new:"New",editProtocol:Wz,newProtocol:Kz,enterProtocolName:Zz,description:Qz,enterDescription:Jz,confirmDeleteProtocol:e6,protocolApplied:t6,protocolsImported:n6,noProtocols:i6,apply:r6,edit:s6,duplicate:a6,delete:"Delete",lastUsed:o6,never:l6,realtimeMonitoring:c6,tubeTempHigh:u6,powerHigh:h6,coolingFlowLow:d6,tubeTemp:f6,last20s:m6,detectorTemp:g6,coolingFlow:p6,dataRate:x6,systemLoad:y6,acquisitionProgress:v6,imagesAcquired:b6,estimatedTimeRemaining:w6,imageViewer:S6,original:C6,processed:T6,compareImages:k6,noImageLoaded:j6,uploadImage:_6,imageStatistics:E6,processingHistory:M6,quickFilters:N6,transformations:O6,adjustments:D6,invert:A6,flipVertical:R6,contrast:P6,processing:L6,autoProcess:F6,filters:z6,waitingForImage:B6,applyFilters:I6,liveProcessing:V6,imageProcessing:U6},$6="خانه",X6="تنظیمات",Y6="اولیه",G6="موقعیت",q6="پروجکشن",W6="پس‌پردازش",K6="بازسازی",Z6="وضعیت سیستم و هشدارها",Q6="وضعیت مولد پرتوی ایکس",J6="پرتوی ایکس روشن",eB="پرتوی ایکس خاموش",tB="هشدار: پرتوی ایکس فعال است!",nB="دوربین",iB="نمایش پروجکشن",rB="نوار تصاویر",sB="هیستوگرام",aB="تغییر تم",oB="برش",lB="قلم",cB="پاک‌کن",uB="دایره",hB="مستطیل",dB="نمودار خطی",fB="خط",mB="جابجایی",gB="بزرگنمایی",pB="کوچک‌نمایی",xB="صفحه اصلی",yB="به صفحه اصلی خوش آمدید! این صفحه با تم کلی برنامه طراحی شده است.",vB="صفحه تنظیمات",bB="این صفحه تنظیمات است. اینجا می‌توانید تنظیمات خود را انجام دهید.",wB="تغییر به حالت {{mode}}",SB="نمایش ورودی‌ها",CB="چک‌باکس‌ها",TB="چک‌باکس ۱",kB="چک‌باکس ۲ (پیش‌فرض انتخاب‌شده)",jB="چک‌باکس (غیرفعال)",_B="تأیید",EB="ورودی غیرفعال",MB="ورودی‌ها",NB="ورودی متنی",OB="ورودی عددی",DB="ورودی ایمیل",AB="ذخیره {{label}}",RB="متن طولانی",PB="متن خود را اینجا وارد کنید...",LB="ذخیره متن طولانی",FB="سایر ورودی‌ها",zB="دکمه‌های رادیویی",BB="گزینه ۱",IB="گزینه ۲",VB="منوی کشویی",UB="یک گزینه انتخاب کنید",HB="آپلود فایل",$B="انتخاب‌شده: {{name}}",XB="ورودی رمز عبور",YB="رمز عبور را وارد کنید",GB="اسلایدر محدوده",qB="انتخاب‌گر رنگ",WB="انتخاب‌گر تاریخ",KB="نمایش دکمه آیکون",ZB="نوع {{variant}}",QB="اندازه: {{size}} (عادی)",JB="اندازه: {{size}} (غیرفعال)",eI="{{variant}} {{size}} کلیک شد!",tI="اجرا",nI="پارامترهای اولیه",iI="نام",rI="ایمیل",sI="نام خود را وارد کنید",aI="ایمیل خود را وارد کنید",oI="موقعیت X",lI="موقعیت Y",cI="فعال کردن فیلتر",uI="در حال اتصال به WebSocket...",hI="تم",dI="زبان",fI="تیره",mI="روشن",gI="جمع‌آوری پروجکشن",pI="موفقیت",xI="داده‌های فرم با موفقیت ارسال شد",yI="خطا",vI="هیچ داده‌ای برای ارسال وجود ندارد",bI="آیا مطمئن هستید؟",wI="لغو",SI="در حال ارسال...",CI="هیچ داده‌ای برای ارسال وجود ندارد",TI="پارامترهای اولیه نامعتبر هستند",kI="توان",jI="مقدار توان را وارد کنید (وات)",_I="ولتاژ تیوب",EI="مقدار ولتاژ تیوب را وارد کنید (kVp)",MI="جریان آند",NI="مقدار جریان آند را وارد کنید",OI="فیلتراسیون",DI="آلومینیوم",AI="مس",RI="نقره",PI="ضخامت فیلتر را وارد کنید (mm)",LI="زمان نوردهی",FI="عمق بیت",zI="وضعیت تیوب",BI="منیپولیتور",II=" X",VI=" Y",UI=" Z",HI=" تتا",$I=" گاما",XI="سرعت جوی‌استیک",YI="کم",GI="متوسط",qI="زیاد",WI="وضعیت دوربین کابین",KI="پیش‌تنظیم استاندارد",ZI="پیش‌تنظیم قدرت بالا",QI="پاک کردن همه",JI="ولتاژ",eV="جریان",tV="فعال",nV="غیرفعال",iV="به WebSocket متصل شد",rV="تصویربرداری سریع",sV="سرعت چرخش",aV="سرعت چرخش را وارد کنید",oV="انرژی دوگانه",lV="کالیبراسیون تک",cV="کالیبراسیون تک را وارد کنید",uV="کالیبراسیون چرخشی",hV="کالیبراسیون چرخشی را وارد کنید",dV="فایل انتخاب‌شده",fV="موقعیت X را وارد کنید",mV="موقعیت Y را وارد کنید",gV="موقعیت Z را وارد کنید",pV="زاویه تتا را وارد کنید",xV="زاویه گاما را وارد کنید",yV="حالت تصویربرداری",vV="اندازه چند بخشی",bV="اندازه چند بخشی را وارد کنید",wV="تنظیمات تصویر",SV="بهره",CV="آفست",TV="پیش‌پردازش",kV="HDR",jV="سطح انرژی ۱",_V="سطح انرژی ۲",EV="سطح انرژی ۱ را وارد کنید",MV="سطح انرژی ۲ را وارد کنید",NV="تعداد تصویر",OV="تعداد تصویر را وارد کنید",DV="تبدیل تصویر",AV="هیچ",RV="عملیات پایه",PV="نرمال‌سازی",LV="تبدیل فوریه",FV="تبدیل فوریه معکوس",zV="فیلتر فوریه",BV="پایین‌گذر",IV="باند‌گذر",VV="بالا‌گذر",UV="اعمال فیلتر فوریه",HV="خروجی تصویر",$V="TIFF",XV="JPG",YV="DICOM",GV="فیلترهای تصویر",qV="فیلتر میانه",WV="فیلتر میانگین",KV="فیلتر واریانس",ZV="فیلتر رنگ کاذب",QV="فیلتر گاوسی",JV="سیگما گاوسی را وارد کنید",eU="تیزسازی",tU="اندازه کرنل",nU="قدرت تیزسازی",iU="قدرت تیزسازی را وارد کنید",rU="تشخیص لبه",sU="آستانه",aU="آستانه را وارد کنید",oU="روش تشخیص لبه",lU="سوبل",cU="کنی",uU="پرویت",hU="باشه",dU="ارسال داده ناموفق بود",fU="سیاه و سفید",mU="حرکت",gU="بازگشت",pU="بررسی پایداری سیستم",xU="قفل ایمنی",yU="دما",vU="فشار",bU="سیستم خنک‌کننده",wU="نظارت لحظه‌ای بر پارامترهای حیاتی سیستم",SU="لاگ تیوب پرتوی ایکس و نوردهی",CU="زمان",TU="دانلود",kU="پاک کردن",jU="توقف",_U="ادامه",EU="متوقف شده",MU="تعداد کل لاگ‌ها",NU="هنوز لاگی ثبت نشده است",OU="اندازه گام",DU="حرکت خطی",AU="حرکت چرخشی",RU="کنترل",PU="ورودی دستی",LU="موقعیت‌های ذخیره شده",FU="حرکات دقیق، بهترین برای تنظیم ظریف",zU="سرعت متعادل برای موقعیت‌یابی عمومی",BU="حرکات سریع برای تنظیمات بزرگ",IU="سرعت فعلی",VU="روشن کردن",UU="خاموش کردن",HU="دوربین خاموش است",$U="برای فعال‌سازی دوربین روی 'روشن کردن' کلیک کنید",XU="در حال اتصال به دوربین...",YU="خطا در اتصال دوربین",GU="لطفاً اتصال دوربین را بررسی کنید",qU="تلاش مجدد",WU="بارگذاری مجدد",KU="تمام صفحه",ZU="خروج از تمام صفحه",QU="رزولوشن",JU="نرخ فریم",eH="نوردهی",tH="روشنایی",nH="تعریف مسیر حرکت",iH="انتخاب نوع مسیر",rH="گام‌های زاویه‌ای گسسته",sH="حرکت دایره‌ای پیوسته",aH="مسیر مارپیچ برای اجسام بلند",oH="مسیر سفارشی دلخواه",lH="پارامترهای مسیر",cH="تعداد گام‌ها",uH="زاویه در هر گام",hH="زاویه شروع",dH="زاویه پایان",fH="گام مارپیچ",mH="گام‌های ارتفاع",gH="از طراح مسیر استفاده کنید یا نقاط سفارشی وارد کنید",pH="باز کردن طراح مسیر",xH="مسیرهای ذخیره شده",yH="نام مسیر را وارد کنید",vH="پیکربندی هندسه",bH="کالیبراسیون",wH="سیستم کالیبره شد",SH="آخرین کالیبراسیون",CH="دقت هندسی",TH="پارامترهای فاصله",kH="پارامترهای آشکارساز",jH="عرض آشکارساز",_H="ارتفاع آشکارساز",EH="گام پیکسل",MH="مقادیر محاسبه شده",NH="بزرگنمایی",OH="اندازه مؤثر پیکسل",DH="عرض",AH="ارتفاع",RH="پارامترهای اضافی",PH="زاویه باریکه مخروطی",LH="اندازه نقطه کانونی",FH="تنظیمات جمع‌آوری",zH="شروع",BH="توقف",IH="ریست",VH="در حال جمع‌آوری",UH="تکمیل شد",HH="حالت چرخش",$H="چرخش نیم دور",XH="چرخش کامل",YH="تصویربرداری چند بخشی",GH="تعداد بخش‌ها",qH="همپوشانی",WH="ارتفاع کل",KH="تعداد پروجکشن‌ها",ZH="نوردهی در هر پروجکشن",QH="خلاصه جمع‌آوری",JH="حالت",e8="بخش‌ها",t8="کل پروجکشن‌ها",n8="زمان تخمینی",i8="بازخورد موقعیت",r8="نمایش موقعیت لحظه‌ای",s8="موقعیت هدف",a8="موقعیت فعلی",o8="خطای موقعیت",l8="تصویربرداری آشکارساز خطی",c8="حالت آشکارساز خطی",u8="ارتفاع اسکن",h8="اندازه گام عمودی",d8="همپوشانی بخیه‌دوزی",f8="زمان تخمینی اسکن",m8="سیستم کالیبراسیون",g8="نوع کالیبراسیون",p8="کالیبراسیون تصویر تکی",x8="کالیبراسیون چرخشی",y8="گرفتن تصویر کالیبراسیون",v8="شروع اسکن کالیبراسیون",b8="وضعیت کالیبراسیون",w8="کالیبره نشده",S8="در حال کالیبراسیون",C8="کالیبره شده",T8="تاریخ کالیبراسیون",k8="کیفیت کالیبراسیون",j8="کالیبراسیون مجدد",_8="ارزیابی کیفیت تصویر",E8="کیفیت کلی",M8="عالی",N8="خوب",O8="نیاز به بهبود",D8="رزولوشن فضایی",A8="یکنواختی",R8="آرتیفکت‌ها",P8="آخرین ارزیابی",L8="تعداد ارزیابی‌ها",F8="برای شروع ارزیابی کیفیت روی 'شروع ارزیابی' کلیک کنید",z8="پیکربندی آشکارساز",B8="وضعیت آشکارساز",I8="نویز خواندن",V8="جریان تاریک",U8="تنظیمات سخت‌افزاری",H8="بایننگ پیکسل",$8="حالت خواندن",X8="دمای خنک‌کننده",Y8="حالت بهره",G8="تنظیمات تصویربرداری",q8="حالت تریگر",W8="تنظیمات پردازش",K8="تصحیح فریم تاریک",Z8="تصحیح میدان تخت",Q8="تصحیح پیکسل خراب",J8="تصحیح تاخیر",e$="تنظیمات با موفقیت ذخیره شد",t$="تنظیمات با موفقیت وارد شد",n$="فیلترهای پیشرفته",i$="کاهش نویز",r$="تقویت لبه",s$="یکسان‌سازی هیستوگرام",a$="مورفولوژی",o$="موجک",l$="روش",c$="قدرت",u$="مقدار",h$="شعاع",d$="آستانه پایین",f$="آستانه بالا",m$="محدودیت کلیپ",g$="اندازه تایل",p$="عملیات",x$="شکل کرنل",y$="نوع موجک",v$="سطح تجزیه",b$="یک نوع فیلتر را برای تنظیمات انتخاب کنید",w$="لطفاً ابتدا یک فیلتر را انتخاب کنید",S$="فیلتر با موفقیت اعمال شد",C$="اعمال فیلتر",T$="مدیریت پروتکل اسکن",k$="ویرایش پروتکل",j$="پروتکل جدید",_$="نام پروتکل را وارد کنید",E$="توضیحات",M$="توضیحات را وارد کنید",N$="آیا مطمئن هستید که می‌خواهید این پروتکل را حذف کنید؟",O$="پروتکل با موفقیت اعمال شد",D$="پروتکل‌ها با موفقیت وارد شدند",A$="هیچ پروتکلی موجود نیست",R$="اعمال",P$="ویرایش",L$="کپی",F$="آخرین استفاده",z$="هرگز",B$="داشبورد نظارت لحظه‌ای",I$="دمای تیوب بالا است",V$="توان پرتوی ایکس بالا است",U$="جریان خنک‌کننده پایین است",H$="دمای تیوب",$$="۲۰ ثانیه اخیر",X$="دمای آشکارساز",Y$="جریان خنک‌کننده",G$="نرخ داده",q$="بار سیستم",W$="پیشرفت جمع‌آوری",K$="تصاویر جمع‌آوری شده",Z$="زمان تخمینی باقی‌مانده",Q$="نمایشگر تصویر",J$="اصلی",e9="پردازش شده",t9="مقایسه تصاویر",n9="هیچ تصویری بارگذاری نشده",i9="آپلود تصویر",r9="آمار تصویر",s9="تاریخچه پردازش",a9="فیلترهای سریع",o9="تبدیلات",l9="تنظیمات",c9="معکوس",u9="آینه عمودی",h9="کنتراست",d9="در حال پردازش",f9="پردازش خودکار",m9="فیلترها",g9="در انتظار تصویر",p9="اعمال فیلترها",x9="پردازش زنده",y9="پردازش تصویر",v9={home:$6,settings:X6,initial:Y6,position:G6,projection:q6,postProcessing:W6,reconstruction:K6,systemStatus:Z6,xrayStatus:Q6,xrayOn:J6,xrayOff:eB,xraySafetyWarning:tB,camera:nB,projectionDisplay:iB,imageReel:rB,histogram:sB,toggleTheme:aB,crop:oB,brush:lB,eraser:cB,circle:uB,rectangle:hB,lineChart:dB,line:fB,move:mB,zoomIn:gB,zoomOut:pB,homePage:xB,welcome:yB,settingsPage:vB,settingsDescription:bB,switchTo:wB,inputShowcase:SB,checkboxes:CB,checkbox1:TB,checkbox2:kB,disabledCheckbox:jB,confirm:_B,disabledInput:EB,inputs:MB,textInput:NB,numberInput:OB,emailInput:DB,save:AB,textarea:RB,enterText:PB,saveTextarea:LB,otherInputs:FB,radioButtons:zB,option1:BB,option2:IB,selectDropdown:VB,selectOption:UB,uploadFile:HB,selected:$B,passwordInput:XB,enterPassword:YB,rangeSlider:GB,colorPicker:qB,datePicker:WB,iconButtonShowcase:KB,variant:ZB,sizeNormal:QB,sizeDisabled:JB,clicked:eI,run:tI,initialParameters:nI,name:iI,email:rI,enterName:sI,enterEmail:aI,xPosition:oI,yPosition:lI,enableFilter:cI,websocketConnecting:uI,theme:hI,language:dI,dark:fI,light:mI,projectionAcquisition:gI,success:pI,dataSubmittedSuccessfully:xI,error:yI,noDataToSubmit:vI,areYouSure:bI,cancel:wI,sendingData:SI,noDataAvailable:CI,invalidInitialParameters:TI,power:kI,enterPower:jI,tubeVoltage:_I,enterTubeVoltage:EI,anodeCurrent:MI,enterAnodeCurrent:NI,filtration:OI,aluminum:DI,copper:AI,silver:RI,enterThickness:PI,exposureTime:LI,bitDepth:FI,"8bit":"8 بیت","16bit":"16 بیت",tubeStatus:zI,manipulator:BI,manipulatorX:II,manipulatorY:VI,manipulatorZ:UI,manipulatorTheta:HI,manipulatorGamma:$I,joystickSpeed:XI,joystickSpeedLow:YI,joystickSpeedMedium:GI,joystickSpeedHigh:qI,cabinCameraStatus:WI,presetStandard:KI,presetHighPower:ZI,clearAll:QI,voltage:JI,current:eV,active:tV,inactive:nV,websocketConnected:iV,fastImaging:rV,rotationSpeed:sV,enterRotationSpeed:aV,dualEnergy:oV,singleCalibration:lV,enterSingleCalibration:cV,rotateCalibration:uV,enterRotateCalibration:hV,selectedFile:dV,enterManipulatorX:fV,enterManipulatorY:mV,enterManipulatorZ:gV,enterManipulatorTheta:pV,enterManipulatorGamma:xV,"180degree":"۱۸۰ درجه","360degree":"۳۶۰ درجه",imagingMode:yV,multiSegmentSize:vV,enterMultiSegmentSize:bV,imageAdjustments:wV,gain:SV,offset:CV,preprocess:TV,hdr:kV,energyLevel1:jV,energyLevel2:_V,enterEnergyLevel1:EV,enterEnergyLevel2:MV,imageCount:NV,enterImageCount:OV,imageTransform:DV,none:AV,"90degree":"۹۰ درجه","270degree":"۲۷۰ درجه",basicOperations:RV,normalize:PV,fft:LV,fftInverse:FV,fourierFilter:zV,lowPass:BV,bandPass:IV,highPass:VV,applyFourierFilter:UV,exportImage:HV,export:"خروجی",tiff:$V,jpg:XV,dicom:YV,imageFilters:GV,medianFilter:qV,meanFilter:WV,varianceFilter:KV,pseudoColorFilter:ZV,gaussianFilter:QV,enterGaussianSigma:JV,sharpening:eU,kernelSize:tU,sharpeningStrength:nU,enterSharpeningStrength:iU,edgeDetection:rU,threshold:sU,enterThreshold:aU,edgeMethod:oU,sobel:lU,canny:cU,prewitt:uU,ok:hU,failedToSendData:dU,grayscale:fU,pan:mU,undo:gU,systemStabilityCheck:pU,interlock:xU,temperature:yU,pressure:vU,coolingSystem:bU,stabilityCheckDescription:wU,xrayExposureLog:SU,time:CU,download:TU,clear:kU,pause:jU,resume:_U,paused:EU,totalLogs:MU,noLogsYet:NU,stepSize:OU,linearMovement:DU,rotationalMovement:AU,control:RU,manualInput:PU,savedPositions:LU,lowSpeedDesc:FU,mediumSpeedDesc:zU,highSpeedDesc:BU,currentSpeed:IU,turnOn:VU,turnOff:UU,cameraOff:HU,clickTurnOn:$U,connectingToCamera:XU,cameraError:YU,checkCameraConnection:GU,retry:qU,refresh:WU,fullscreen:KU,exitFullscreen:ZU,resolution:QU,frameRate:JU,exposure:eH,brightness:tH,trajectoryDefinition:nH,import:"وارد کردن",selectTrajectoryType:iH,stepwiseDesc:rH,circularDesc:sH,helicalDesc:aH,arbitraryDesc:oH,trajectoryParameters:lH,numberOfSteps:cH,anglePerStep:uH,startAngle:hH,endAngle:dH,helixPitch:fH,heightSteps:mH,arbitraryTrajectoryInfo:gH,openDesigner:pH,savedTrajectories:xH,enterTrajectoryName:yH,geometryConfiguration:vH,calibrate:bH,systemCalibrated:wH,lastCalibration:SH,geometricAccuracy:CH,distanceParameters:TH,detectorParameters:kH,detectorWidth:jH,detectorHeight:_H,pixelPitch:EH,calculatedValues:MH,magnification:NH,effectivePixelSize:OH,width:DH,height:AH,additionalParameters:RH,coneBeamAngle:PH,focalSpotSize:LH,acquisitionSettings:FH,start:zH,stop:BH,reset:IH,acquiring:VH,completed:UH,rotationMode:HH,halfRotation:$H,fullRotation:XH,multiSegmentImaging:YH,numberOfSegments:GH,segmentOverlap:qH,totalHeight:WH,numberOfProjections:KH,exposurePerProjection:ZH,acquisitionSummary:QH,mode:JH,segments:e8,totalProjections:t8,estimatedTime:n8,positionFeedback:i8,realTimePosition:r8,targetPosition:s8,currentPosition:a8,positionError:o8,linearDetectorImaging:l8,linearDetectorMode:c8,scanHeight:u8,verticalStepSize:h8,stitchingOverlap:d8,estimatedScanTime:f8,calibrationSystem:m8,calibrationType:g8,singleImageCalibration:p8,rotationalCalibration:x8,captureCalibrationImage:y8,startCalibrationScan:v8,calibrationStatus:b8,notCalibrated:w8,calibrating:S8,calibrated:C8,calibrationDate:T8,calibrationQuality:k8,recalibrate:j8,imageQualityAssessment:_8,overallQuality:E8,excellent:M8,good:N8,needsImprovement:O8,spatialResolution:D8,uniformity:A8,artifacts:R8,lastAssessment:P8,assessments:L8,startAssessmentMessage:F8,detectorConfiguration:z8,detectorStatus:B8,readoutNoise:I8,darkCurrent:V8,hardwareSettings:U8,binning:H8,readoutMode:$8,coolingTemperature:X8,gainMode:Y8,imagingSettings:G8,triggerMode:q8,processingSettings:W8,darkFrameCorrection:K8,flatFieldCorrection:Z8,badPixelCorrection:Q8,lagCorrection:J8,settingsSaved:e$,settingsImported:t$,advancedFiltering:n$,denoising:i$,edgeEnhancement:r$,histogramEqualization:s$,morphology:a$,wavelet:o$,method:l$,strength:c$,amount:u$,radius:h$,lowThreshold:d$,highThreshold:f$,clipLimit:m$,tileSize:g$,operation:p$,kernelShape:x$,waveletType:y$,decompositionLevel:v$,selectFilterType:b$,selectFilterFirst:w$,filterApplied:S$,applyFilter:C$,scanProtocolManagement:T$,new:"جدید",editProtocol:k$,newProtocol:j$,enterProtocolName:_$,description:E$,enterDescription:M$,confirmDeleteProtocol:N$,protocolApplied:O$,protocolsImported:D$,noProtocols:A$,apply:R$,edit:P$,duplicate:L$,delete:"حذف",lastUsed:F$,never:z$,realtimeMonitoring:B$,tubeTempHigh:I$,powerHigh:V$,coolingFlowLow:U$,tubeTemp:H$,last20s:$$,detectorTemp:X$,coolingFlow:Y$,dataRate:G$,systemLoad:q$,acquisitionProgress:W$,imagesAcquired:K$,estimatedTimeRemaining:Z$,imageViewer:Q$,original:J$,processed:e9,compareImages:t9,noImageLoaded:n9,uploadImage:i9,imageStatistics:r9,processingHistory:s9,quickFilters:a9,transformations:o9,adjustments:l9,invert:c9,flipVertical:u9,contrast:h9,processing:d9,autoProcess:f9,filters:m9,waitingForImage:g9,applyFilters:p9,liveProcessing:x9,imageProcessing:y9},b9={en:{translation:H6},fa:{translation:v9}};Kt.use(Qw).use(sk).init({resources:b9,fallbackLng:"en",supportedLngs:["en","fa"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},debug:!1,saveMissing:!1,missingKeyHandler:!1}).catch(t=>{console.error("i18next initialization error:",t)});const w9=E.createContext(),S9=({children:t})=>{const[e,r]=E.useState(null);return E.useEffect(()=>{const o=()=>{window.qt&&window.qt.webChannelTransport&&window.QWebChannel?new window.QWebChannel(window.qt.webChannelTransport,x=>{var b;(b=x==null?void 0:x.objects)!=null&&b.backend?r(x.objects.backend):console.error("WebChannel backend object not found.")}):setTimeout(o,100)};o()},[]),p.jsx(w9.Provider,{value:{backend:e},children:t})};S2.createRoot(document.getElementById("root")).render(p.jsx(BT,{children:p.jsx(MR,{children:p.jsx(TR,{children:p.jsx(S9,{children:p.jsx(dk,{children:p.jsx(j_,{children:p.jsx(S_,{children:p.jsx(dR,{children:p.jsx(gR,{children:p.jsx(V_,{children:p.jsx(aR,{children:p.jsx(RR,{})})})})})})})})})})})}));
