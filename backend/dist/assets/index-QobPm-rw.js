(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))h(y);new MutationObserver(y=>{for(const x of y)if(x.type==="childList")for(const S of x.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&h(S)}).observe(document,{childList:!0,subtree:!0});function s(y){const x={};return y.integrity&&(x.integrity=y.integrity),y.referrerPolicy&&(x.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?x.credentials="include":y.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function h(y){if(y.ep)return;y.ep=!0;const x=s(y);fetch(y.href,x)}})();function hd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function RC(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function h(){return this instanceof h?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(h){var y=Object.getOwnPropertyDescriptor(e,h);Object.defineProperty(s,h,y.get?y:{enumerable:!0,get:function(){return e[h]}})}),s}var Xh={exports:{}},Pa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function NC(){if(ey)return Pa;ey=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(h,y,x){var S=null;if(x!==void 0&&(S=""+x),y.key!==void 0&&(S=""+y.key),"key"in y){x={};for(var f in y)f!=="key"&&(x[f]=y[f])}else x=y;return y=x.ref,{$$typeof:e,type:h,key:S,ref:y!==void 0?y:null,props:x}}return Pa.Fragment=t,Pa.jsx=s,Pa.jsxs=s,Pa}var ty;function PC(){return ty||(ty=1,Xh.exports=NC()),Xh.exports}var _=PC(),Gh={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function LC(){if(ny)return Ge;ny=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),S=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),r=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),a=Symbol.iterator;function l(A){return A===null||typeof A!="object"?null:(A=a&&A[a]||A["@@iterator"],typeof A=="function"?A:null)}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(A,j,R){this.props=A,this.context=j,this.refs=v,this.updater=R||u}g.prototype.isReactComponent={},g.prototype.setState=function(A,j){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,j,"setState")},g.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function b(){}b.prototype=g.prototype;function w(A,j,R){this.props=A,this.context=j,this.refs=v,this.updater=R||u}var T=w.prototype=new b;T.constructor=w,m(T,g.prototype),T.isPureReactComponent=!0;var k=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function P(A,j,R,I,B,z){return R=z.ref,{$$typeof:e,type:A,key:j,ref:R!==void 0?R:null,props:z}}function F(A,j){return P(A.type,j,void 0,void 0,void 0,A.props)}function V(A){return typeof A=="object"&&A!==null&&A.$$typeof===e}function $(A){var j={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(R){return j[R]})}var te=/\/+/g;function X(A,j){return typeof A=="object"&&A!==null&&A.key!=null?$(""+A.key):j.toString(36)}function Q(){}function se(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(Q,Q):(A.status="pending",A.then(function(j){A.status==="pending"&&(A.status="fulfilled",A.value=j)},function(j){A.status==="pending"&&(A.status="rejected",A.reason=j)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,j,R,I,B){var z=typeof A;(z==="undefined"||z==="boolean")&&(A=null);var W=!1;if(A===null)W=!0;else switch(z){case"bigint":case"string":case"number":W=!0;break;case"object":switch(A.$$typeof){case e:case t:W=!0;break;case d:return W=A._init,K(W(A._payload),j,R,I,B)}}if(W)return B=B(A),W=I===""?"."+X(A,0):I,k(B)?(R="",W!=null&&(R=W.replace(te,"$&/")+"/"),K(B,j,R,"",function(ee){return ee})):B!=null&&(V(B)&&(B=F(B,R+(B.key==null||A&&A.key===B.key?"":(""+B.key).replace(te,"$&/")+"/")+W)),j.push(B)),1;W=0;var Y=I===""?".":I+":";if(k(A))for(var ne=0;ne<A.length;ne++)I=A[ne],z=Y+X(I,ne),W+=K(I,j,R,z,B);else if(ne=l(A),typeof ne=="function")for(A=ne.call(A),ne=0;!(I=A.next()).done;)I=I.value,z=Y+X(I,ne++),W+=K(I,j,R,z,B);else if(z==="object"){if(typeof A.then=="function")return K(se(A),j,R,I,B);throw j=String(A),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return W}function U(A,j,R){if(A==null)return A;var I=[],B=0;return K(A,I,"","",function(z){return j.call(R,z,B++)}),I}function q(A){if(A._status===-1){var j=A._result;j=j(),j.then(function(R){(A._status===0||A._status===-1)&&(A._status=1,A._result=R)},function(R){(A._status===0||A._status===-1)&&(A._status=2,A._result=R)}),A._status===-1&&(A._status=0,A._result=j)}if(A._status===1)return A._result.default;throw A._result}var Z=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function L(){}return Ge.Children={map:U,forEach:function(A,j,R){U(A,function(){j.apply(this,arguments)},R)},count:function(A){var j=0;return U(A,function(){j++}),j},toArray:function(A){return U(A,function(j){return j})||[]},only:function(A){if(!V(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Ge.Component=g,Ge.Fragment=s,Ge.Profiler=y,Ge.PureComponent=w,Ge.StrictMode=h,Ge.Suspense=r,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(A){return O.H.useMemoCache(A)}},Ge.cache=function(A){return function(){return A.apply(null,arguments)}},Ge.cloneElement=function(A,j,R){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var I=m({},A.props),B=A.key,z=void 0;if(j!=null)for(W in j.ref!==void 0&&(z=void 0),j.key!==void 0&&(B=""+j.key),j)!D.call(j,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&j.ref===void 0||(I[W]=j[W]);var W=arguments.length-2;if(W===1)I.children=R;else if(1<W){for(var Y=Array(W),ne=0;ne<W;ne++)Y[ne]=arguments[ne+2];I.children=Y}return P(A.type,B,void 0,void 0,z,I)},Ge.createContext=function(A){return A={$$typeof:S,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:x,_context:A},A},Ge.createElement=function(A,j,R){var I,B={},z=null;if(j!=null)for(I in j.key!==void 0&&(z=""+j.key),j)D.call(j,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(B[I]=j[I]);var W=arguments.length-2;if(W===1)B.children=R;else if(1<W){for(var Y=Array(W),ne=0;ne<W;ne++)Y[ne]=arguments[ne+2];B.children=Y}if(A&&A.defaultProps)for(I in W=A.defaultProps,W)B[I]===void 0&&(B[I]=W[I]);return P(A,z,void 0,void 0,null,B)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(A){return{$$typeof:f,render:A}},Ge.isValidElement=V,Ge.lazy=function(A){return{$$typeof:d,_payload:{_status:-1,_result:A},_init:q}},Ge.memo=function(A,j){return{$$typeof:c,type:A,compare:j===void 0?null:j}},Ge.startTransition=function(A){var j=O.T,R={};O.T=R;try{var I=A(),B=O.S;B!==null&&B(R,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(L,Z)}catch(z){Z(z)}finally{O.T=j}},Ge.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ge.use=function(A){return O.H.use(A)},Ge.useActionState=function(A,j,R){return O.H.useActionState(A,j,R)},Ge.useCallback=function(A,j){return O.H.useCallback(A,j)},Ge.useContext=function(A){return O.H.useContext(A)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(A,j){return O.H.useDeferredValue(A,j)},Ge.useEffect=function(A,j,R){var I=O.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(A,j)},Ge.useId=function(){return O.H.useId()},Ge.useImperativeHandle=function(A,j,R){return O.H.useImperativeHandle(A,j,R)},Ge.useInsertionEffect=function(A,j){return O.H.useInsertionEffect(A,j)},Ge.useLayoutEffect=function(A,j){return O.H.useLayoutEffect(A,j)},Ge.useMemo=function(A,j){return O.H.useMemo(A,j)},Ge.useOptimistic=function(A,j){return O.H.useOptimistic(A,j)},Ge.useReducer=function(A,j,R){return O.H.useReducer(A,j,R)},Ge.useRef=function(A){return O.H.useRef(A)},Ge.useState=function(A){return O.H.useState(A)},Ge.useSyncExternalStore=function(A,j,R){return O.H.useSyncExternalStore(A,j,R)},Ge.useTransition=function(){return O.H.useTransition()},Ge.version="19.1.0",Ge}var iy;function fd(){return iy||(iy=1,Gh.exports=LC()),Gh.exports}var M=fd();const Le=hd(M);var $h={exports:{}},La={},Wh={exports:{}},qh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function FC(){return ry||(ry=1,function(e){function t(U,q){var Z=U.length;U.push(q);e:for(;0<Z;){var L=Z-1>>>1,A=U[L];if(0<y(A,q))U[L]=q,U[Z]=A,Z=L;else break e}}function s(U){return U.length===0?null:U[0]}function h(U){if(U.length===0)return null;var q=U[0],Z=U.pop();if(Z!==q){U[0]=Z;e:for(var L=0,A=U.length,j=A>>>1;L<j;){var R=2*(L+1)-1,I=U[R],B=R+1,z=U[B];if(0>y(I,Z))B<A&&0>y(z,I)?(U[L]=z,U[B]=Z,L=B):(U[L]=I,U[R]=Z,L=R);else if(B<A&&0>y(z,Z))U[L]=z,U[B]=Z,L=B;else break e}}return q}function y(U,q){var Z=U.sortIndex-q.sortIndex;return Z!==0?Z:U.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;e.unstable_now=function(){return x.now()}}else{var S=Date,f=S.now();e.unstable_now=function(){return S.now()-f}}var r=[],c=[],d=1,a=null,l=3,u=!1,m=!1,v=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var q=s(c);q!==null;){if(q.callback===null)h(c);else if(q.startTime<=U)h(c),q.sortIndex=q.expirationTime,t(r,q);else break;q=s(c)}}function O(U){if(v=!1,k(U),!m)if(s(r)!==null)m=!0,D||(D=!0,X());else{var q=s(c);q!==null&&K(O,q.startTime-U)}}var D=!1,P=-1,F=5,V=-1;function $(){return g?!0:!(e.unstable_now()-V<F)}function te(){if(g=!1,D){var U=e.unstable_now();V=U;var q=!0;try{e:{m=!1,v&&(v=!1,w(P),P=-1),u=!0;var Z=l;try{t:{for(k(U),a=s(r);a!==null&&!(a.expirationTime>U&&$());){var L=a.callback;if(typeof L=="function"){a.callback=null,l=a.priorityLevel;var A=L(a.expirationTime<=U);if(U=e.unstable_now(),typeof A=="function"){a.callback=A,k(U),q=!0;break t}a===s(r)&&h(r),k(U)}else h(r);a=s(r)}if(a!==null)q=!0;else{var j=s(c);j!==null&&K(O,j.startTime-U),q=!1}}break e}finally{a=null,l=Z,u=!1}q=void 0}}finally{q?X():D=!1}}}var X;if(typeof T=="function")X=function(){T(te)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,se=Q.port2;Q.port1.onmessage=te,X=function(){se.postMessage(null)}}else X=function(){b(te,0)};function K(U,q){P=b(function(){U(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return l},e.unstable_next=function(U){switch(l){case 1:case 2:case 3:var q=3;break;default:q=l}var Z=l;l=q;try{return U()}finally{l=Z}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=l;l=U;try{return q()}finally{l=Z}},e.unstable_scheduleCallback=function(U,q,Z){var L=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?L+Z:L):Z=L,U){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=Z+A,U={id:d++,callback:q,priorityLevel:U,startTime:Z,expirationTime:A,sortIndex:-1},Z>L?(U.sortIndex=Z,t(c,U),s(r)===null&&U===s(c)&&(v?(w(P),P=-1):v=!0,K(O,Z-L))):(U.sortIndex=A,t(r,U),m||u||(m=!0,D||(D=!0,X()))),U},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(U){var q=l;return function(){var Z=l;l=q;try{return U.apply(this,arguments)}finally{l=Z}}}}(qh)),qh}var sy;function zC(){return sy||(sy=1,Wh.exports=FC()),Wh.exports}var Kh={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function BC(){if(ay)return Yt;ay=1;var e=fd();function t(r){var c="https://react.dev/errors/"+r;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+r+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var h={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},y=Symbol.for("react.portal");function x(r,c,d){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:a==null?null:""+a,children:r,containerInfo:c,implementation:d}}var S=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(r,c){if(r==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=h,Yt.createPortal=function(r,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return x(r,c,null,d)},Yt.flushSync=function(r){var c=S.T,d=h.p;try{if(S.T=null,h.p=2,r)return r()}finally{S.T=c,h.p=d,h.d.f()}},Yt.preconnect=function(r,c){typeof r=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,h.d.C(r,c))},Yt.prefetchDNS=function(r){typeof r=="string"&&h.d.D(r)},Yt.preinit=function(r,c){if(typeof r=="string"&&c&&typeof c.as=="string"){var d=c.as,a=f(d,c.crossOrigin),l=typeof c.integrity=="string"?c.integrity:void 0,u=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?h.d.S(r,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:a,integrity:l,fetchPriority:u}):d==="script"&&h.d.X(r,{crossOrigin:a,integrity:l,fetchPriority:u,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Yt.preinitModule=function(r,c){if(typeof r=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=f(c.as,c.crossOrigin);h.d.M(r,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&h.d.M(r)},Yt.preload=function(r,c){if(typeof r=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,a=f(d,c.crossOrigin);h.d.L(r,d,{crossOrigin:a,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Yt.preloadModule=function(r,c){if(typeof r=="string")if(c){var d=f(c.as,c.crossOrigin);h.d.m(r,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else h.d.m(r)},Yt.requestFormReset=function(r){h.d.r(r)},Yt.unstable_batchedUpdates=function(r,c){return r(c)},Yt.useFormState=function(r,c,d){return S.H.useFormState(r,c,d)},Yt.useFormStatus=function(){return S.H.useHostTransitionStatus()},Yt.version="19.1.0",Yt}var oy;function VC(){if(oy)return Kh.exports;oy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Kh.exports=BC(),Kh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function UC(){if(ly)return La;ly=1;var e=zC(),t=fd(),s=VC();function h(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function x(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function S(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(x(n)!==n)throw Error(h(188))}function r(n){var i=n.alternate;if(!i){if(i=x(n),i===null)throw Error(h(188));return i!==n?null:n}for(var o=n,p=i;;){var C=o.return;if(C===null)break;var E=C.alternate;if(E===null){if(p=C.return,p!==null){o=p;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===o)return f(C),n;if(E===p)return f(C),i;E=E.sibling}throw Error(h(188))}if(o.return!==p.return)o=C,p=E;else{for(var N=!1,H=C.child;H;){if(H===o){N=!0,o=C,p=E;break}if(H===p){N=!0,p=C,o=E;break}H=H.sibling}if(!N){for(H=E.child;H;){if(H===o){N=!0,o=E,p=C;break}if(H===p){N=!0,p=E,o=C;break}H=H.sibling}if(!N)throw Error(h(189))}}if(o.alternate!==p)throw Error(h(190))}if(o.tag!==3)throw Error(h(188));return o.stateNode.current===o?n:i}function c(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=c(n),i!==null)return i;n=n.sibling}return null}var d=Object.assign,a=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function X(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Symbol.for("react.client.reference");function se(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case g:return"Profiler";case v:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case u:return"Portal";case T:return(n.displayName||"Context")+".Provider";case w:return(n._context.displayName||"Context")+".Consumer";case k:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return i=n.displayName||null,i!==null?i:se(n.type)||"Memo";case F:i=n._payload,n=n._init;try{return se(n(i))}catch{}}return null}var K=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},L=[],A=-1;function j(n){return{current:n}}function R(n){0>A||(n.current=L[A],L[A]=null,A--)}function I(n,i){A++,L[A]=n.current,n.current=i}var B=j(null),z=j(null),W=j(null),Y=j(null);function ne(n,i){switch(I(W,i),I(z,n),I(B,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?O0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=O0(i),n=M0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}R(B),I(B,n)}function ee(){R(B),R(z),R(W)}function de(n){n.memoizedState!==null&&I(Y,n);var i=B.current,o=M0(i,n.type);i!==o&&(I(z,n),I(B,o))}function le(n){z.current===n&&(R(B),R(z)),Y.current===n&&(R(Y),ja._currentValue=Z)}var we=Object.prototype.hasOwnProperty,ue=e.unstable_scheduleCallback,oe=e.unstable_cancelCallback,ge=e.unstable_shouldYield,ve=e.unstable_requestPaint,he=e.unstable_now,be=e.unstable_getCurrentPriorityLevel,Ee=e.unstable_ImmediatePriority,G=e.unstable_UserBlockingPriority,re=e.unstable_NormalPriority,J=e.unstable_LowPriority,xe=e.unstable_IdlePriority,Se=e.log,Ce=e.unstable_setDisableYieldValue,Me=null,je=null;function ze(n){if(typeof Se=="function"&&Ce(n),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Me,n)}catch{}}var Ie=Math.clz32?Math.clz32:nn,tn=Math.log,Ut=Math.LN2;function nn(n){return n>>>=0,n===0?32:31-(tn(n)/Ut|0)|0}var Un=256,Dn=4194304;function Rn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ti(n,i,o){var p=n.pendingLanes;if(p===0)return 0;var C=0,E=n.suspendedLanes,N=n.pingedLanes;n=n.warmLanes;var H=p&134217727;return H!==0?(p=H&~E,p!==0?C=Rn(p):(N&=H,N!==0?C=Rn(N):o||(o=H&~n,o!==0&&(C=Rn(o))))):(H=p&~E,H!==0?C=Rn(H):N!==0?C=Rn(N):o||(o=p&~n,o!==0&&(C=Rn(o)))),C===0?0:i!==0&&i!==C&&(i&E)===0&&(E=C&-C,o=i&-i,E>=o||E===32&&(o&4194048)!==0)?i:C}function rr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ko(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(){var n=Un;return Un<<=1,(Un&4194048)===0&&(Un=256),n}function fm(){var n=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),n}function Nc(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Vs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ww(n,i,o,p,C,E){var N=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var H=n.entanglements,ie=n.expirationTimes,me=n.hiddenUpdates;for(o=N&~o;0<o;){var _e=31-Ie(o),ke=1<<_e;H[_e]=0,ie[_e]=-1;var pe=me[_e];if(pe!==null)for(me[_e]=null,_e=0;_e<pe.length;_e++){var ye=pe[_e];ye!==null&&(ye.lane&=-536870913)}o&=~ke}p!==0&&dm(n,p,0),E!==0&&C===0&&n.tag!==0&&(n.suspendedLanes|=E&~(N&~i))}function dm(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var p=31-Ie(i);n.entangledLanes|=i,n.entanglements[p]=n.entanglements[p]|1073741824|o&4194090}function mm(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var p=31-Ie(o),C=1<<p;C&i|n[p]&i&&(n[p]|=i),o&=~C}}function Pc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Lc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gm(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:W0(n.type))}function Sw(n,i){var o=q.p;try{return q.p=n,i()}finally{q.p=o}}var ki=Math.random().toString(36).slice(2),Ht="__reactFiber$"+ki,rn="__reactProps$"+ki,Rr="__reactContainer$"+ki,Fc="__reactEvents$"+ki,Cw="__reactListeners$"+ki,_w="__reactHandles$"+ki,pm="__reactResources$"+ki,Us="__reactMarker$"+ki;function zc(n){delete n[Ht],delete n[rn],delete n[Fc],delete n[Cw],delete n[_w]}function Nr(n){var i=n[Ht];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Rr]||o[Ht]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=R0(n);n!==null;){if(o=n[Ht])return o;n=R0(n)}return i}n=o,o=n.parentNode}return null}function Pr(n){if(n=n[Ht]||n[Rr]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Hs(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(h(33))}function Lr(n){var i=n[pm];return i||(i=n[pm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function At(n){n[Us]=!0}var ym=new Set,vm={};function sr(n,i){Fr(n,i),Fr(n+"Capture",i)}function Fr(n,i){for(vm[n]=i,n=0;n<i.length;n++)ym.add(i[n])}var Tw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xm={},bm={};function kw(n){return we.call(bm,n)?!0:we.call(xm,n)?!1:Tw.test(n)?bm[n]=!0:(xm[n]=!0,!1)}function Eo(n,i,o){if(kw(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var p=i.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Oo(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function ni(n,i,o,p){if(p===null)n.removeAttribute(o);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+p)}}var Bc,wm;function zr(n){if(Bc===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Bc=i&&i[1]||"",wm=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bc+n+wm}var Vc=!1;function Uc(n,i){if(!n||Vc)return"";Vc=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(i){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(ye){var pe=ye}Reflect.construct(n,[],ke)}else{try{ke.call()}catch(ye){pe=ye}n.call(ke.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(ke=n())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),N=E[0],H=E[1];if(N&&H){var ie=N.split(`
`),me=H.split(`
`);for(C=p=0;p<ie.length&&!ie[p].includes("DetermineComponentFrameRoot");)p++;for(;C<me.length&&!me[C].includes("DetermineComponentFrameRoot");)C++;if(p===ie.length||C===me.length)for(p=ie.length-1,C=me.length-1;1<=p&&0<=C&&ie[p]!==me[C];)C--;for(;1<=p&&0<=C;p--,C--)if(ie[p]!==me[C]){if(p!==1||C!==1)do if(p--,C--,0>C||ie[p]!==me[C]){var _e=`
`+ie[p].replace(" at new "," at ");return n.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",n.displayName)),_e}while(1<=p&&0<=C);break}}}finally{Vc=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?zr(o):""}function Ew(n){switch(n.tag){case 26:case 27:case 5:return zr(n.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 15:return Uc(n.type,!1);case 11:return Uc(n.type.render,!1);case 1:return Uc(n.type,!0);case 31:return zr("Activity");default:return""}}function Sm(n){try{var i="";do i+=Ew(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function xn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cm(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ow(n){var i=Cm(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),p=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var C=o.get,E=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return C.call(this)},set:function(N){p=""+N,E.call(this,N)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return p},setValue:function(N){p=""+N},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Mo(n){n._valueTracker||(n._valueTracker=Ow(n))}function _m(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),p="";return n&&(p=Cm(n)?n.checked?"true":"false":n.value),n=p,n!==o?(i.setValue(n),!0):!1}function jo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mw=/[\n"\\]/g;function bn(n){return n.replace(Mw,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Hc(n,i,o,p,C,E,N,H){n.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.type=N:n.removeAttribute("type"),i!=null?N==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+xn(i)):n.value!==""+xn(i)&&(n.value=""+xn(i)):N!=="submit"&&N!=="reset"||n.removeAttribute("value"),i!=null?Ic(n,N,xn(i)):o!=null?Ic(n,N,xn(o)):p!=null&&n.removeAttribute("value"),C==null&&E!=null&&(n.defaultChecked=!!E),C!=null&&(n.checked=C&&typeof C!="function"&&typeof C!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?n.name=""+xn(H):n.removeAttribute("name")}function Tm(n,i,o,p,C,E,N,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.type=E),i!=null||o!=null){if(!(E!=="submit"&&E!=="reset"||i!=null))return;o=o!=null?""+xn(o):"",i=i!=null?""+xn(i):o,H||i===n.value||(n.value=i),n.defaultValue=i}p=p??C,p=typeof p!="function"&&typeof p!="symbol"&&!!p,n.checked=H?n.checked:!!p,n.defaultChecked=!!p,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(n.name=N)}function Ic(n,i,o){i==="number"&&jo(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Br(n,i,o,p){if(n=n.options,i){i={};for(var C=0;C<o.length;C++)i["$"+o[C]]=!0;for(o=0;o<n.length;o++)C=i.hasOwnProperty("$"+n[o].value),n[o].selected!==C&&(n[o].selected=C),C&&p&&(n[o].defaultSelected=!0)}else{for(o=""+xn(o),i=null,C=0;C<n.length;C++){if(n[C].value===o){n[C].selected=!0,p&&(n[C].defaultSelected=!0);return}i!==null||n[C].disabled||(i=n[C])}i!==null&&(i.selected=!0)}}function km(n,i,o){if(i!=null&&(i=""+xn(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+xn(o):""}function Em(n,i,o,p){if(i==null){if(p!=null){if(o!=null)throw Error(h(92));if(K(p)){if(1<p.length)throw Error(h(93));p=p[0]}o=p}o==null&&(o=""),i=o}o=xn(i),n.defaultValue=o,p=n.textContent,p===o&&p!==""&&p!==null&&(n.value=p)}function Vr(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var jw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Om(n,i,o){var p=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?p?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":p?n.setProperty(i,o):typeof o!="number"||o===0||jw.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Mm(n,i,o){if(i!=null&&typeof i!="object")throw Error(h(62));if(n=n.style,o!=null){for(var p in o)!o.hasOwnProperty(p)||i!=null&&i.hasOwnProperty(p)||(p.indexOf("--")===0?n.setProperty(p,""):p==="float"?n.cssFloat="":n[p]="");for(var C in i)p=i[C],i.hasOwnProperty(C)&&o[C]!==p&&Om(n,C,p)}else for(var E in i)i.hasOwnProperty(E)&&Om(n,E,i[E])}function Yc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ao(n){return Dw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Xc=null;function Gc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ur=null,Hr=null;function jm(n){var i=Pr(n);if(i&&(n=i.stateNode)){var o=n[rn]||null;e:switch(n=i.stateNode,i.type){case"input":if(Hc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+bn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var p=o[i];if(p!==n&&p.form===n.form){var C=p[rn]||null;if(!C)throw Error(h(90));Hc(p,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(i=0;i<o.length;i++)p=o[i],p.form===n.form&&_m(p)}break e;case"textarea":km(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Br(n,!!o.multiple,i,!1)}}}var $c=!1;function Am(n,i,o){if($c)return n(i,o);$c=!0;try{var p=n(i);return p}finally{if($c=!1,(Ur!==null||Hr!==null)&&(pl(),Ur&&(i=Ur,n=Hr,Hr=Ur=null,jm(i),n)))for(i=0;i<n.length;i++)jm(n[i])}}function Is(n,i){var o=n.stateNode;if(o===null)return null;var p=o[rn]||null;if(p===null)return null;o=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(h(231,i,typeof o));return o}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(ii)try{var Ys={};Object.defineProperty(Ys,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",Ys,Ys),window.removeEventListener("test",Ys,Ys)}catch{Wc=!1}var Ei=null,qc=null,Do=null;function Dm(){if(Do)return Do;var n,i=qc,o=i.length,p,C="value"in Ei?Ei.value:Ei.textContent,E=C.length;for(n=0;n<o&&i[n]===C[n];n++);var N=o-n;for(p=1;p<=N&&i[o-p]===C[E-p];p++);return Do=C.slice(n,1<p?1-p:void 0)}function Ro(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function No(){return!0}function Rm(){return!1}function sn(n){function i(o,p,C,E,N){this._reactName=o,this._targetInst=C,this.type=p,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var H in n)n.hasOwnProperty(H)&&(o=n[H],this[H]=o?o(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?No:Rm,this.isPropagationStopped=Rm,this}return d(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=No)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=No)},persist:function(){},isPersistent:No}),i}var ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=sn(ar),Xs=d({},ar,{view:0,detail:0}),Rw=sn(Xs),Kc,Zc,Gs,Lo=d({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gs&&(Gs&&n.type==="mousemove"?(Kc=n.screenX-Gs.screenX,Zc=n.screenY-Gs.screenY):Zc=Kc=0,Gs=n),Kc)},movementY:function(n){return"movementY"in n?n.movementY:Zc}}),Nm=sn(Lo),Nw=d({},Lo,{dataTransfer:0}),Pw=sn(Nw),Lw=d({},Xs,{relatedTarget:0}),Qc=sn(Lw),Fw=d({},ar,{animationName:0,elapsedTime:0,pseudoElement:0}),zw=sn(Fw),Bw=d({},ar,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Vw=sn(Bw),Uw=d({},ar,{data:0}),Pm=sn(Uw),Hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xw(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Yw[n])?!!i[n]:!1}function Jc(){return Xw}var Gw=d({},Xs,{key:function(n){if(n.key){var i=Hw[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ro(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Iw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(n){return n.type==="keypress"?Ro(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ro(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$w=sn(Gw),Ww=d({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=sn(Ww),qw=d({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),Kw=sn(qw),Zw=d({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=sn(Zw),Jw=d({},Lo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),eS=sn(Jw),tS=d({},ar,{newState:0,oldState:0}),nS=sn(tS),iS=[9,13,27,32],eu=ii&&"CompositionEvent"in window,$s=null;ii&&"documentMode"in document&&($s=document.documentMode);var rS=ii&&"TextEvent"in window&&!$s,Fm=ii&&(!eu||$s&&8<$s&&11>=$s),zm=" ",Bm=!1;function Vm(n,i){switch(n){case"keyup":return iS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ir=!1;function sS(n,i){switch(n){case"compositionend":return Um(i);case"keypress":return i.which!==32?null:(Bm=!0,zm);case"textInput":return n=i.data,n===zm&&Bm?null:n;default:return null}}function aS(n,i){if(Ir)return n==="compositionend"||!eu&&Vm(n,i)?(n=Dm(),Do=qc=Ei=null,Ir=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fm&&i.locale!=="ko"?null:i.data;default:return null}}var oS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!oS[n.type]:i==="textarea"}function Im(n,i,o,p){Ur?Hr?Hr.push(p):Hr=[p]:Ur=p,i=Sl(i,"onChange"),0<i.length&&(o=new Po("onChange","change",null,o,p),n.push({event:o,listeners:i}))}var Ws=null,qs=null;function lS(n){C0(n,0)}function Fo(n){var i=Hs(n);if(_m(i))return n}function Ym(n,i){if(n==="change")return i}var Xm=!1;if(ii){var tu;if(ii){var nu="oninput"in document;if(!nu){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),nu=typeof Gm.oninput=="function"}tu=nu}else tu=!1;Xm=tu&&(!document.documentMode||9<document.documentMode)}function $m(){Ws&&(Ws.detachEvent("onpropertychange",Wm),qs=Ws=null)}function Wm(n){if(n.propertyName==="value"&&Fo(qs)){var i=[];Im(i,qs,n,Gc(n)),Am(lS,i)}}function cS(n,i,o){n==="focusin"?($m(),Ws=i,qs=o,Ws.attachEvent("onpropertychange",Wm)):n==="focusout"&&$m()}function uS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fo(qs)}function hS(n,i){if(n==="click")return Fo(i)}function fS(n,i){if(n==="input"||n==="change")return Fo(i)}function dS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var hn=typeof Object.is=="function"?Object.is:dS;function Ks(n,i){if(hn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),p=Object.keys(i);if(o.length!==p.length)return!1;for(p=0;p<o.length;p++){var C=o[p];if(!we.call(i,C)||!hn(n[C],i[C]))return!1}return!0}function qm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Km(n,i){var o=qm(n);n=0;for(var p;o;){if(o.nodeType===3){if(p=n+o.textContent.length,n<=i&&p>=i)return{node:o,offset:i-n};n=p}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=qm(o)}}function Zm(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Zm(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Qm(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=jo(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=jo(n.document)}return i}function iu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var mS=ii&&"documentMode"in document&&11>=document.documentMode,Yr=null,ru=null,Zs=null,su=!1;function Jm(n,i,o){var p=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;su||Yr==null||Yr!==jo(p)||(p=Yr,"selectionStart"in p&&iu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Zs&&Ks(Zs,p)||(Zs=p,p=Sl(ru,"onSelect"),0<p.length&&(i=new Po("onSelect","select",null,i,o),n.push({event:i,listeners:p}),i.target=Yr)))}function or(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Xr={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},au={},eg={};ii&&(eg=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function lr(n){if(au[n])return au[n];if(!Xr[n])return n;var i=Xr[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in eg)return au[n]=i[o];return n}var tg=lr("animationend"),ng=lr("animationiteration"),ig=lr("animationstart"),gS=lr("transitionrun"),pS=lr("transitionstart"),yS=lr("transitioncancel"),rg=lr("transitionend"),sg=new Map,ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ou.push("scrollEnd");function Nn(n,i){sg.set(n,i),sr(i,[n])}var ag=new WeakMap;function wn(n,i){if(typeof n=="object"&&n!==null){var o=ag.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Sm(i)},ag.set(n,i),i)}return{value:n,source:i,stack:Sm(i)}}var Sn=[],Gr=0,lu=0;function zo(){for(var n=Gr,i=lu=Gr=0;i<n;){var o=Sn[i];Sn[i++]=null;var p=Sn[i];Sn[i++]=null;var C=Sn[i];Sn[i++]=null;var E=Sn[i];if(Sn[i++]=null,p!==null&&C!==null){var N=p.pending;N===null?C.next=C:(C.next=N.next,N.next=C),p.pending=C}E!==0&&og(o,C,E)}}function Bo(n,i,o,p){Sn[Gr++]=n,Sn[Gr++]=i,Sn[Gr++]=o,Sn[Gr++]=p,lu|=p,n.lanes|=p,n=n.alternate,n!==null&&(n.lanes|=p)}function cu(n,i,o,p){return Bo(n,i,o,p),Vo(n)}function $r(n,i){return Bo(n,null,null,i),Vo(n)}function og(n,i,o){n.lanes|=o;var p=n.alternate;p!==null&&(p.lanes|=o);for(var C=!1,E=n.return;E!==null;)E.childLanes|=o,p=E.alternate,p!==null&&(p.childLanes|=o),E.tag===22&&(n=E.stateNode,n===null||n._visibility&1||(C=!0)),n=E,E=E.return;return n.tag===3?(E=n.stateNode,C&&i!==null&&(C=31-Ie(o),n=E.hiddenUpdates,p=n[C],p===null?n[C]=[i]:p.push(i),i.lane=o|536870912),E):null}function Vo(n){if(50<Sa)throw Sa=0,gh=null,Error(h(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Wr={};function vS(n,i,o,p){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,i,o,p){return new vS(n,i,o,p)}function uu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ri(n,i){var o=n.alternate;return o===null?(o=fn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function lg(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Uo(n,i,o,p,C,E){var N=0;if(p=n,typeof n=="function")uu(n)&&(N=1);else if(typeof n=="string")N=bC(n,o,B.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=fn(31,o,i,C),n.elementType=V,n.lanes=E,n;case m:return cr(o.children,C,E,i);case v:N=8,C|=24;break;case g:return n=fn(12,o,i,C|2),n.elementType=g,n.lanes=E,n;case O:return n=fn(13,o,i,C),n.elementType=O,n.lanes=E,n;case D:return n=fn(19,o,i,C),n.elementType=D,n.lanes=E,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:case T:N=10;break e;case w:N=9;break e;case k:N=11;break e;case P:N=14;break e;case F:N=16,p=null;break e}N=29,o=Error(h(130,n===null?"null":typeof n,"")),p=null}return i=fn(N,o,i,C),i.elementType=n,i.type=p,i.lanes=E,i}function cr(n,i,o,p){return n=fn(7,n,p,i),n.lanes=o,n}function hu(n,i,o){return n=fn(6,n,null,i),n.lanes=o,n}function fu(n,i,o){return i=fn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var qr=[],Kr=0,Ho=null,Io=0,Cn=[],_n=0,ur=null,si=1,ai="";function hr(n,i){qr[Kr++]=Io,qr[Kr++]=Ho,Ho=n,Io=i}function cg(n,i,o){Cn[_n++]=si,Cn[_n++]=ai,Cn[_n++]=ur,ur=n;var p=si;n=ai;var C=32-Ie(p)-1;p&=~(1<<C),o+=1;var E=32-Ie(i)+C;if(30<E){var N=C-C%5;E=(p&(1<<N)-1).toString(32),p>>=N,C-=N,si=1<<32-Ie(i)+C|o<<C|p,ai=E+n}else si=1<<E|o<<C|p,ai=n}function du(n){n.return!==null&&(hr(n,1),cg(n,1,0))}function mu(n){for(;n===Ho;)Ho=qr[--Kr],qr[Kr]=null,Io=qr[--Kr],qr[Kr]=null;for(;n===ur;)ur=Cn[--_n],Cn[_n]=null,ai=Cn[--_n],Cn[_n]=null,si=Cn[--_n],Cn[_n]=null}var Kt=null,mt=null,et=!1,fr=null,Hn=!1,gu=Error(h(519));function dr(n){var i=Error(h(418,""));throw ea(wn(i,n)),gu}function ug(n){var i=n.stateNode,o=n.type,p=n.memoizedProps;switch(i[Ht]=n,i[rn]=p,o){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(o=0;o<_a.length;o++)Ze(_a[o],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Ze("invalid",i),Tm(i,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Mo(i);break;case"select":Ze("invalid",i);break;case"textarea":Ze("invalid",i),Em(i,p.value,p.defaultValue,p.children),Mo(i)}o=p.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||p.suppressHydrationWarning===!0||E0(i.textContent,o)?(p.popover!=null&&(Ze("beforetoggle",i),Ze("toggle",i)),p.onScroll!=null&&Ze("scroll",i),p.onScrollEnd!=null&&Ze("scrollend",i),p.onClick!=null&&(i.onclick=Cl),i=!0):i=!1,i||dr(n)}function hg(n){for(Kt=n.return;Kt;)switch(Kt.tag){case 5:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Kt=Kt.return}}function Qs(n){if(n!==Kt)return!1;if(!et)return hg(n),et=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ah(n.type,n.memoizedProps)),o=!o),o&&mt&&dr(n),hg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(h(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){mt=Ln(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}mt=null}}else i===27?(i=mt,Ii(n.type)?(n=Ph,Ph=null,mt=n):mt=i):mt=Kt?Ln(n.stateNode.nextSibling):null;return!0}function Js(){mt=Kt=null,et=!1}function fg(){var n=fr;return n!==null&&(ln===null?ln=n:ln.push.apply(ln,n),fr=null),n}function ea(n){fr===null?fr=[n]:fr.push(n)}var pu=j(null),mr=null,oi=null;function Oi(n,i,o){I(pu,i._currentValue),i._currentValue=o}function li(n){n._currentValue=pu.current,R(pu)}function yu(n,i,o){for(;n!==null;){var p=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),n===o)break;n=n.return}}function vu(n,i,o,p){var C=n.child;for(C!==null&&(C.return=n);C!==null;){var E=C.dependencies;if(E!==null){var N=C.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=C;for(var ie=0;ie<i.length;ie++)if(H.context===i[ie]){E.lanes|=o,H=E.alternate,H!==null&&(H.lanes|=o),yu(E.return,o,n),p||(N=null);break e}E=H.next}}else if(C.tag===18){if(N=C.return,N===null)throw Error(h(341));N.lanes|=o,E=N.alternate,E!==null&&(E.lanes|=o),yu(N,o,n),N=null}else N=C.child;if(N!==null)N.return=C;else for(N=C;N!==null;){if(N===n){N=null;break}if(C=N.sibling,C!==null){C.return=N.return,N=C;break}N=N.return}C=N}}function ta(n,i,o,p){n=null;for(var C=i,E=!1;C!==null;){if(!E){if((C.flags&524288)!==0)E=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var N=C.alternate;if(N===null)throw Error(h(387));if(N=N.memoizedProps,N!==null){var H=C.type;hn(C.pendingProps.value,N.value)||(n!==null?n.push(H):n=[H])}}else if(C===Y.current){if(N=C.alternate,N===null)throw Error(h(387));N.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(n!==null?n.push(ja):n=[ja])}C=C.return}n!==null&&vu(i,n,o,p),i.flags|=262144}function Yo(n){for(n=n.firstContext;n!==null;){if(!hn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function gr(n){mr=n,oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function It(n){return dg(mr,n)}function Xo(n,i){return mr===null&&gr(n),dg(n,i)}function dg(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},oi===null){if(n===null)throw Error(h(308));oi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else oi=oi.next=i;return o}var xS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,p){n.push(p)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},bS=e.unstable_scheduleCallback,wS=e.unstable_NormalPriority,kt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xu(){return{controller:new xS,data:new Map,refCount:0}}function na(n){n.refCount--,n.refCount===0&&bS(wS,function(){n.controller.abort()})}var ia=null,bu=0,Zr=0,Qr=null;function SS(n,i){if(ia===null){var o=ia=[];bu=0,Zr=Sh(),Qr={status:"pending",value:void 0,then:function(p){o.push(p)}}}return bu++,i.then(mg,mg),i}function mg(){if(--bu===0&&ia!==null){Qr!==null&&(Qr.status="fulfilled");var n=ia;ia=null,Zr=0,Qr=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function CS(n,i){var o=[],p={status:"pending",value:null,reason:null,then:function(C){o.push(C)}};return n.then(function(){p.status="fulfilled",p.value=i;for(var C=0;C<o.length;C++)(0,o[C])(i)},function(C){for(p.status="rejected",p.reason=C,C=0;C<o.length;C++)(0,o[C])(void 0)}),p}var gg=U.S;U.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&SS(n,i),gg!==null&&gg(n,i)};var pr=j(null);function wu(){var n=pr.current;return n!==null?n:ot.pooledCache}function Go(n,i){i===null?I(pr,pr.current):I(pr,i.pool)}function pg(){var n=wu();return n===null?null:{parent:kt._currentValue,pool:n}}var ra=Error(h(460)),yg=Error(h(474)),$o=Error(h(542)),Su={then:function(){}};function vg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Wo(){}function xg(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Wo,Wo),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,wg(n),n;default:if(typeof i.status=="string")i.then(Wo,Wo);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(h(482));n=i,n.status="pending",n.then(function(p){if(i.status==="pending"){var C=i;C.status="fulfilled",C.value=p}},function(p){if(i.status==="pending"){var C=i;C.status="rejected",C.reason=p}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,wg(n),n}throw sa=i,ra}}var sa=null;function bg(){if(sa===null)throw Error(h(459));var n=sa;return sa=null,n}function wg(n){if(n===ra||n===$o)throw Error(h(483))}var Mi=!1;function Cu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _u(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ji(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ai(n,i,o){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(tt&2)!==0){var C=p.pending;return C===null?i.next=i:(i.next=C.next,C.next=i),p.pending=i,i=Vo(n),og(n,null,o),i}return Bo(n,p,i,o),Vo(n)}function aa(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var p=i.lanes;p&=n.pendingLanes,o|=p,i.lanes=o,mm(n,o)}}function Tu(n,i){var o=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,o===p)){var C=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var N={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};E===null?C=E=N:E=E.next=N,o=o.next}while(o!==null);E===null?C=E=i:E=E.next=i}else C=E=i;o={baseState:p.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var ku=!1;function oa(){if(ku){var n=Qr;if(n!==null)throw n}}function la(n,i,o,p){ku=!1;var C=n.updateQueue;Mi=!1;var E=C.firstBaseUpdate,N=C.lastBaseUpdate,H=C.shared.pending;if(H!==null){C.shared.pending=null;var ie=H,me=ie.next;ie.next=null,N===null?E=me:N.next=me,N=ie;var _e=n.alternate;_e!==null&&(_e=_e.updateQueue,H=_e.lastBaseUpdate,H!==N&&(H===null?_e.firstBaseUpdate=me:H.next=me,_e.lastBaseUpdate=ie))}if(E!==null){var ke=C.baseState;N=0,_e=me=ie=null,H=E;do{var pe=H.lane&-536870913,ye=pe!==H.lane;if(ye?(Qe&pe)===pe:(p&pe)===pe){pe!==0&&pe===Zr&&(ku=!0),_e!==null&&(_e=_e.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ue=n,Be=H;pe=i;var st=o;switch(Be.tag){case 1:if(Ue=Be.payload,typeof Ue=="function"){ke=Ue.call(st,ke,pe);break e}ke=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Be.payload,pe=typeof Ue=="function"?Ue.call(st,ke,pe):Ue,pe==null)break e;ke=d({},ke,pe);break e;case 2:Mi=!0}}pe=H.callback,pe!==null&&(n.flags|=64,ye&&(n.flags|=8192),ye=C.callbacks,ye===null?C.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:H.tag,payload:H.payload,callback:H.callback,next:null},_e===null?(me=_e=ye,ie=ke):_e=_e.next=ye,N|=pe;if(H=H.next,H===null){if(H=C.shared.pending,H===null)break;ye=H,H=ye.next,ye.next=null,C.lastBaseUpdate=ye,C.shared.pending=null}}while(!0);_e===null&&(ie=ke),C.baseState=ie,C.firstBaseUpdate=me,C.lastBaseUpdate=_e,E===null&&(C.shared.lanes=0),Bi|=N,n.lanes=N,n.memoizedState=ke}}function Sg(n,i){if(typeof n!="function")throw Error(h(191,n));n.call(i)}function Cg(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Sg(o[n],i)}var Jr=j(null),qo=j(0);function _g(n,i){n=gi,I(qo,n),I(Jr,i),gi=n|i.baseLanes}function Eu(){I(qo,gi),I(Jr,Jr.current)}function Ou(){gi=qo.current,R(Jr),R(qo)}var Di=0,$e=null,it=null,St=null,Ko=!1,es=!1,yr=!1,Zo=0,ca=0,ts=null,_S=0;function yt(){throw Error(h(321))}function Mu(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!hn(n[o],i[o]))return!1;return!0}function ju(n,i,o,p,C,E){return Di=E,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=n===null||n.memoizedState===null?op:lp,yr=!1,E=o(p,C),yr=!1,es&&(E=kg(i,o,p,C)),Tg(n),E}function Tg(n){U.H=il;var i=it!==null&&it.next!==null;if(Di=0,St=it=$e=null,Ko=!1,ca=0,ts=null,i)throw Error(h(300));n===null||Dt||(n=n.dependencies,n!==null&&Yo(n)&&(Dt=!0))}function kg(n,i,o,p){$e=n;var C=0;do{if(es&&(ts=null),ca=0,es=!1,25<=C)throw Error(h(301));if(C+=1,St=it=null,n.updateQueue!=null){var E=n.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}U.H=AS,E=i(o,p)}while(es);return E}function TS(){var n=U.H,i=n.useState()[0];return i=typeof i.then=="function"?ua(i):i,n=n.useState()[0],(it!==null?it.memoizedState:null)!==n&&($e.flags|=1024),i}function Au(){var n=Zo!==0;return Zo=0,n}function Du(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Ru(n){if(Ko){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ko=!1}Di=0,St=it=$e=null,es=!1,ca=Zo=0,ts=null}function an(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?$e.memoizedState=St=n:St=St.next=n,St}function Ct(){if(it===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=it.next;var i=St===null?$e.memoizedState:St.next;if(i!==null)St=i,it=n;else{if(n===null)throw $e.alternate===null?Error(h(467)):Error(h(310));it=n,n={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},St===null?$e.memoizedState=St=n:St=St.next=n}return St}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ua(n){var i=ca;return ca+=1,ts===null&&(ts=[]),n=xg(ts,n,i),i=$e,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?op:lp),n}function Qo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ua(n);if(n.$$typeof===T)return It(n)}throw Error(h(438,String(n)))}function Pu(n){var i=null,o=$e.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var p=$e.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(i={data:p.data.map(function(C){return C.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Nu(),$e.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),p=0;p<n;p++)o[p]=$;return i.index++,o}function ci(n,i){return typeof i=="function"?i(n):i}function Jo(n){var i=Ct();return Lu(i,it,n)}function Lu(n,i,o){var p=n.queue;if(p===null)throw Error(h(311));p.lastRenderedReducer=o;var C=n.baseQueue,E=p.pending;if(E!==null){if(C!==null){var N=C.next;C.next=E.next,E.next=N}i.baseQueue=C=E,p.pending=null}if(E=n.baseState,C===null)n.memoizedState=E;else{i=C.next;var H=N=null,ie=null,me=i,_e=!1;do{var ke=me.lane&-536870913;if(ke!==me.lane?(Qe&ke)===ke:(Di&ke)===ke){var pe=me.revertLane;if(pe===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),ke===Zr&&(_e=!0);else if((Di&pe)===pe){me=me.next,pe===Zr&&(_e=!0);continue}else ke={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ie===null?(H=ie=ke,N=E):ie=ie.next=ke,$e.lanes|=pe,Bi|=pe;ke=me.action,yr&&o(E,ke),E=me.hasEagerState?me.eagerState:o(E,ke)}else pe={lane:ke,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ie===null?(H=ie=pe,N=E):ie=ie.next=pe,$e.lanes|=ke,Bi|=ke;me=me.next}while(me!==null&&me!==i);if(ie===null?N=E:ie.next=H,!hn(E,n.memoizedState)&&(Dt=!0,_e&&(o=Qr,o!==null)))throw o;n.memoizedState=E,n.baseState=N,n.baseQueue=ie,p.lastRenderedState=E}return C===null&&(p.lanes=0),[n.memoizedState,p.dispatch]}function Fu(n){var i=Ct(),o=i.queue;if(o===null)throw Error(h(311));o.lastRenderedReducer=n;var p=o.dispatch,C=o.pending,E=i.memoizedState;if(C!==null){o.pending=null;var N=C=C.next;do E=n(E,N.action),N=N.next;while(N!==C);hn(E,i.memoizedState)||(Dt=!0),i.memoizedState=E,i.baseQueue===null&&(i.baseState=E),o.lastRenderedState=E}return[E,p]}function Eg(n,i,o){var p=$e,C=Ct(),E=et;if(E){if(o===void 0)throw Error(h(407));o=o()}else o=i();var N=!hn((it||C).memoizedState,o);N&&(C.memoizedState=o,Dt=!0),C=C.queue;var H=jg.bind(null,p,C,n);if(ha(2048,8,H,[n]),C.getSnapshot!==i||N||St!==null&&St.memoizedState.tag&1){if(p.flags|=2048,ns(9,el(),Mg.bind(null,p,C,o,i),null),ot===null)throw Error(h(349));E||(Di&124)!==0||Og(p,i,o)}return o}function Og(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=$e.updateQueue,i===null?(i=Nu(),$e.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Mg(n,i,o,p){i.value=o,i.getSnapshot=p,Ag(i)&&Dg(n)}function jg(n,i,o){return o(function(){Ag(i)&&Dg(n)})}function Ag(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!hn(n,o)}catch{return!0}}function Dg(n){var i=$r(n,2);i!==null&&yn(i,n,2)}function zu(n){var i=an();if(typeof n=="function"){var o=n;if(n=o(),yr){ze(!0);try{o()}finally{ze(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:n},i}function Rg(n,i,o,p){return n.baseState=o,Lu(n,it,typeof p=="function"?p:ci)}function kS(n,i,o,p,C){if(nl(n))throw Error(h(485));if(n=i.action,n!==null){var E={payload:C,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){E.listeners.push(N)}};U.T!==null?o(!0):E.isTransition=!1,p(E),o=i.pending,o===null?(E.next=i.pending=E,Ng(i,E)):(E.next=o.next,i.pending=o.next=E)}}function Ng(n,i){var o=i.action,p=i.payload,C=n.state;if(i.isTransition){var E=U.T,N={};U.T=N;try{var H=o(C,p),ie=U.S;ie!==null&&ie(N,H),Pg(n,i,H)}catch(me){Bu(n,i,me)}finally{U.T=E}}else try{E=o(C,p),Pg(n,i,E)}catch(me){Bu(n,i,me)}}function Pg(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(p){Lg(n,i,p)},function(p){return Bu(n,i,p)}):Lg(n,i,o)}function Lg(n,i,o){i.status="fulfilled",i.value=o,Fg(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Ng(n,o)))}function Bu(n,i,o){var p=n.pending;if(n.pending=null,p!==null){p=p.next;do i.status="rejected",i.reason=o,Fg(i),i=i.next;while(i!==p)}n.action=null}function Fg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function zg(n,i){return i}function Bg(n,i){if(et){var o=ot.formState;if(o!==null){e:{var p=$e;if(et){if(mt){t:{for(var C=mt,E=Hn;C.nodeType!==8;){if(!E){C=null;break t}if(C=Ln(C.nextSibling),C===null){C=null;break t}}E=C.data,C=E==="F!"||E==="F"?C:null}if(C){mt=Ln(C.nextSibling),p=C.data==="F!";break e}}dr(p)}p=!1}p&&(i=o[0])}}return o=an(),o.memoizedState=o.baseState=i,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zg,lastRenderedState:i},o.queue=p,o=rp.bind(null,$e,p),p.dispatch=o,p=zu(!1),E=Yu.bind(null,$e,!1,p.queue),p=an(),C={state:i,dispatch:null,action:n,pending:null},p.queue=C,o=kS.bind(null,$e,C,E,o),C.dispatch=o,p.memoizedState=n,[i,o,!1]}function Vg(n){var i=Ct();return Ug(i,it,n)}function Ug(n,i,o){if(i=Lu(n,i,zg)[0],n=Jo(ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var p=ua(i)}catch(N){throw N===ra?$o:N}else p=i;i=Ct();var C=i.queue,E=C.dispatch;return o!==i.memoizedState&&($e.flags|=2048,ns(9,el(),ES.bind(null,C,o),null)),[p,E,n]}function ES(n,i){n.action=i}function Hg(n){var i=Ct(),o=it;if(o!==null)return Ug(i,o,n);Ct(),i=i.memoizedState,o=Ct();var p=o.queue.dispatch;return o.memoizedState=n,[i,p,!1]}function ns(n,i,o,p){return n={tag:n,create:o,deps:p,inst:i,next:null},i=$e.updateQueue,i===null&&(i=Nu(),$e.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(p=o.next,o.next=n,n.next=p,i.lastEffect=n),n}function el(){return{destroy:void 0,resource:void 0}}function Ig(){return Ct().memoizedState}function tl(n,i,o,p){var C=an();p=p===void 0?null:p,$e.flags|=n,C.memoizedState=ns(1|i,el(),o,p)}function ha(n,i,o,p){var C=Ct();p=p===void 0?null:p;var E=C.memoizedState.inst;it!==null&&p!==null&&Mu(p,it.memoizedState.deps)?C.memoizedState=ns(i,E,o,p):($e.flags|=n,C.memoizedState=ns(1|i,E,o,p))}function Yg(n,i){tl(8390656,8,n,i)}function Xg(n,i){ha(2048,8,n,i)}function Gg(n,i){return ha(4,2,n,i)}function $g(n,i){return ha(4,4,n,i)}function Wg(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function qg(n,i,o){o=o!=null?o.concat([n]):null,ha(4,4,Wg.bind(null,i,n),o)}function Vu(){}function Kg(n,i){var o=Ct();i=i===void 0?null:i;var p=o.memoizedState;return i!==null&&Mu(i,p[1])?p[0]:(o.memoizedState=[n,i],n)}function Zg(n,i){var o=Ct();i=i===void 0?null:i;var p=o.memoizedState;if(i!==null&&Mu(i,p[1]))return p[0];if(p=n(),yr){ze(!0);try{n()}finally{ze(!1)}}return o.memoizedState=[p,i],p}function Uu(n,i,o){return o===void 0||(Di&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=e0(),$e.lanes|=n,Bi|=n,o)}function Qg(n,i,o,p){return hn(o,i)?o:Jr.current!==null?(n=Uu(n,o,p),hn(n,i)||(Dt=!0),n):(Di&42)===0?(Dt=!0,n.memoizedState=o):(n=e0(),$e.lanes|=n,Bi|=n,i)}function Jg(n,i,o,p,C){var E=q.p;q.p=E!==0&&8>E?E:8;var N=U.T,H={};U.T=H,Yu(n,!1,i,o);try{var ie=C(),me=U.S;if(me!==null&&me(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var _e=CS(ie,p);fa(n,i,_e,pn(n))}else fa(n,i,p,pn(n))}catch(ke){fa(n,i,{then:function(){},status:"rejected",reason:ke},pn())}finally{q.p=E,U.T=N}}function OS(){}function Hu(n,i,o,p){if(n.tag!==5)throw Error(h(476));var C=ep(n).queue;Jg(n,C,i,Z,o===null?OS:function(){return tp(n),o(p)})}function ep(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:Z},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function tp(n){var i=ep(n).next.queue;fa(n,i,{},pn())}function Iu(){return It(ja)}function np(){return Ct().memoizedState}function ip(){return Ct().memoizedState}function MS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=pn();n=ji(o);var p=Ai(i,n,o);p!==null&&(yn(p,i,o),aa(p,i,o)),i={cache:xu()},n.payload=i;return}i=i.return}}function jS(n,i,o){var p=pn();o={lane:p,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},nl(n)?sp(i,o):(o=cu(n,i,o,p),o!==null&&(yn(o,n,p),ap(o,i,p)))}function rp(n,i,o){var p=pn();fa(n,i,o,p)}function fa(n,i,o,p){var C={lane:p,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(nl(n))sp(i,C);else{var E=n.alternate;if(n.lanes===0&&(E===null||E.lanes===0)&&(E=i.lastRenderedReducer,E!==null))try{var N=i.lastRenderedState,H=E(N,o);if(C.hasEagerState=!0,C.eagerState=H,hn(H,N))return Bo(n,i,C,0),ot===null&&zo(),!1}catch{}finally{}if(o=cu(n,i,C,p),o!==null)return yn(o,n,p),ap(o,i,p),!0}return!1}function Yu(n,i,o,p){if(p={lane:2,revertLane:Sh(),action:p,hasEagerState:!1,eagerState:null,next:null},nl(n)){if(i)throw Error(h(479))}else i=cu(n,o,p,2),i!==null&&yn(i,n,2)}function nl(n){var i=n.alternate;return n===$e||i!==null&&i===$e}function sp(n,i){es=Ko=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function ap(n,i,o){if((o&4194048)!==0){var p=i.lanes;p&=n.pendingLanes,o|=p,i.lanes=o,mm(n,o)}}var il={readContext:It,use:Qo,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},op={readContext:It,use:Qo,useCallback:function(n,i){return an().memoizedState=[n,i===void 0?null:i],n},useContext:It,useEffect:Yg,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,tl(4194308,4,Wg.bind(null,i,n),o)},useLayoutEffect:function(n,i){return tl(4194308,4,n,i)},useInsertionEffect:function(n,i){tl(4,2,n,i)},useMemo:function(n,i){var o=an();i=i===void 0?null:i;var p=n();if(yr){ze(!0);try{n()}finally{ze(!1)}}return o.memoizedState=[p,i],p},useReducer:function(n,i,o){var p=an();if(o!==void 0){var C=o(i);if(yr){ze(!0);try{o(i)}finally{ze(!1)}}}else C=i;return p.memoizedState=p.baseState=C,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:C},p.queue=n,n=n.dispatch=jS.bind(null,$e,n),[p.memoizedState,n]},useRef:function(n){var i=an();return n={current:n},i.memoizedState=n},useState:function(n){n=zu(n);var i=n.queue,o=rp.bind(null,$e,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Vu,useDeferredValue:function(n,i){var o=an();return Uu(o,n,i)},useTransition:function(){var n=zu(!1);return n=Jg.bind(null,$e,n.queue,!0,!1),an().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var p=$e,C=an();if(et){if(o===void 0)throw Error(h(407));o=o()}else{if(o=i(),ot===null)throw Error(h(349));(Qe&124)!==0||Og(p,i,o)}C.memoizedState=o;var E={value:o,getSnapshot:i};return C.queue=E,Yg(jg.bind(null,p,E,n),[n]),p.flags|=2048,ns(9,el(),Mg.bind(null,p,E,o,i),null),o},useId:function(){var n=an(),i=ot.identifierPrefix;if(et){var o=ai,p=si;o=(p&~(1<<32-Ie(p)-1)).toString(32)+o,i=""+i+"R"+o,o=Zo++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=_S++,i=""+i+"r"+o.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:Iu,useFormState:Bg,useActionState:Bg,useOptimistic:function(n){var i=an();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Yu.bind(null,$e,!0,o),o.dispatch=i,[n,i]},useMemoCache:Pu,useCacheRefresh:function(){return an().memoizedState=MS.bind(null,$e)}},lp={readContext:It,use:Qo,useCallback:Kg,useContext:It,useEffect:Xg,useImperativeHandle:qg,useInsertionEffect:Gg,useLayoutEffect:$g,useMemo:Zg,useReducer:Jo,useRef:Ig,useState:function(){return Jo(ci)},useDebugValue:Vu,useDeferredValue:function(n,i){var o=Ct();return Qg(o,it.memoizedState,n,i)},useTransition:function(){var n=Jo(ci)[0],i=Ct().memoizedState;return[typeof n=="boolean"?n:ua(n),i]},useSyncExternalStore:Eg,useId:np,useHostTransitionStatus:Iu,useFormState:Vg,useActionState:Vg,useOptimistic:function(n,i){var o=Ct();return Rg(o,it,n,i)},useMemoCache:Pu,useCacheRefresh:ip},AS={readContext:It,use:Qo,useCallback:Kg,useContext:It,useEffect:Xg,useImperativeHandle:qg,useInsertionEffect:Gg,useLayoutEffect:$g,useMemo:Zg,useReducer:Fu,useRef:Ig,useState:function(){return Fu(ci)},useDebugValue:Vu,useDeferredValue:function(n,i){var o=Ct();return it===null?Uu(o,n,i):Qg(o,it.memoizedState,n,i)},useTransition:function(){var n=Fu(ci)[0],i=Ct().memoizedState;return[typeof n=="boolean"?n:ua(n),i]},useSyncExternalStore:Eg,useId:np,useHostTransitionStatus:Iu,useFormState:Hg,useActionState:Hg,useOptimistic:function(n,i){var o=Ct();return it!==null?Rg(o,it,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:ip},is=null,da=0;function rl(n){var i=da;return da+=1,is===null&&(is=[]),xg(is,n,i)}function ma(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function sl(n,i){throw i.$$typeof===a?Error(h(525)):(n=Object.prototype.toString.call(i),Error(h(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function cp(n){var i=n._init;return i(n._payload)}function up(n){function i(ce,ae){if(n){var fe=ce.deletions;fe===null?(ce.deletions=[ae],ce.flags|=16):fe.push(ae)}}function o(ce,ae){if(!n)return null;for(;ae!==null;)i(ce,ae),ae=ae.sibling;return null}function p(ce){for(var ae=new Map;ce!==null;)ce.key!==null?ae.set(ce.key,ce):ae.set(ce.index,ce),ce=ce.sibling;return ae}function C(ce,ae){return ce=ri(ce,ae),ce.index=0,ce.sibling=null,ce}function E(ce,ae,fe){return ce.index=fe,n?(fe=ce.alternate,fe!==null?(fe=fe.index,fe<ae?(ce.flags|=67108866,ae):fe):(ce.flags|=67108866,ae)):(ce.flags|=1048576,ae)}function N(ce){return n&&ce.alternate===null&&(ce.flags|=67108866),ce}function H(ce,ae,fe,Te){return ae===null||ae.tag!==6?(ae=hu(fe,ce.mode,Te),ae.return=ce,ae):(ae=C(ae,fe),ae.return=ce,ae)}function ie(ce,ae,fe,Te){var Re=fe.type;return Re===m?_e(ce,ae,fe.props.children,Te,fe.key):ae!==null&&(ae.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===F&&cp(Re)===ae.type)?(ae=C(ae,fe.props),ma(ae,fe),ae.return=ce,ae):(ae=Uo(fe.type,fe.key,fe.props,null,ce.mode,Te),ma(ae,fe),ae.return=ce,ae)}function me(ce,ae,fe,Te){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==fe.containerInfo||ae.stateNode.implementation!==fe.implementation?(ae=fu(fe,ce.mode,Te),ae.return=ce,ae):(ae=C(ae,fe.children||[]),ae.return=ce,ae)}function _e(ce,ae,fe,Te,Re){return ae===null||ae.tag!==7?(ae=cr(fe,ce.mode,Te,Re),ae.return=ce,ae):(ae=C(ae,fe),ae.return=ce,ae)}function ke(ce,ae,fe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=hu(""+ae,ce.mode,fe),ae.return=ce,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return fe=Uo(ae.type,ae.key,ae.props,null,ce.mode,fe),ma(fe,ae),fe.return=ce,fe;case u:return ae=fu(ae,ce.mode,fe),ae.return=ce,ae;case F:var Te=ae._init;return ae=Te(ae._payload),ke(ce,ae,fe)}if(K(ae)||X(ae))return ae=cr(ae,ce.mode,fe,null),ae.return=ce,ae;if(typeof ae.then=="function")return ke(ce,rl(ae),fe);if(ae.$$typeof===T)return ke(ce,Xo(ce,ae),fe);sl(ce,ae)}return null}function pe(ce,ae,fe,Te){var Re=ae!==null?ae.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Re!==null?null:H(ce,ae,""+fe,Te);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:return fe.key===Re?ie(ce,ae,fe,Te):null;case u:return fe.key===Re?me(ce,ae,fe,Te):null;case F:return Re=fe._init,fe=Re(fe._payload),pe(ce,ae,fe,Te)}if(K(fe)||X(fe))return Re!==null?null:_e(ce,ae,fe,Te,null);if(typeof fe.then=="function")return pe(ce,ae,rl(fe),Te);if(fe.$$typeof===T)return pe(ce,ae,Xo(ce,fe),Te);sl(ce,fe)}return null}function ye(ce,ae,fe,Te,Re){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ce=ce.get(fe)||null,H(ae,ce,""+Te,Re);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return ce=ce.get(Te.key===null?fe:Te.key)||null,ie(ae,ce,Te,Re);case u:return ce=ce.get(Te.key===null?fe:Te.key)||null,me(ae,ce,Te,Re);case F:var qe=Te._init;return Te=qe(Te._payload),ye(ce,ae,fe,Te,Re)}if(K(Te)||X(Te))return ce=ce.get(fe)||null,_e(ae,ce,Te,Re,null);if(typeof Te.then=="function")return ye(ce,ae,fe,rl(Te),Re);if(Te.$$typeof===T)return ye(ce,ae,fe,Xo(ae,Te),Re);sl(ae,Te)}return null}function Ue(ce,ae,fe,Te){for(var Re=null,qe=null,Fe=ae,Ve=ae=0,Nt=null;Fe!==null&&Ve<fe.length;Ve++){Fe.index>Ve?(Nt=Fe,Fe=null):Nt=Fe.sibling;var Je=pe(ce,Fe,fe[Ve],Te);if(Je===null){Fe===null&&(Fe=Nt);break}n&&Fe&&Je.alternate===null&&i(ce,Fe),ae=E(Je,ae,Ve),qe===null?Re=Je:qe.sibling=Je,qe=Je,Fe=Nt}if(Ve===fe.length)return o(ce,Fe),et&&hr(ce,Ve),Re;if(Fe===null){for(;Ve<fe.length;Ve++)Fe=ke(ce,fe[Ve],Te),Fe!==null&&(ae=E(Fe,ae,Ve),qe===null?Re=Fe:qe.sibling=Fe,qe=Fe);return et&&hr(ce,Ve),Re}for(Fe=p(Fe);Ve<fe.length;Ve++)Nt=ye(Fe,ce,Ve,fe[Ve],Te),Nt!==null&&(n&&Nt.alternate!==null&&Fe.delete(Nt.key===null?Ve:Nt.key),ae=E(Nt,ae,Ve),qe===null?Re=Nt:qe.sibling=Nt,qe=Nt);return n&&Fe.forEach(function(Wi){return i(ce,Wi)}),et&&hr(ce,Ve),Re}function Be(ce,ae,fe,Te){if(fe==null)throw Error(h(151));for(var Re=null,qe=null,Fe=ae,Ve=ae=0,Nt=null,Je=fe.next();Fe!==null&&!Je.done;Ve++,Je=fe.next()){Fe.index>Ve?(Nt=Fe,Fe=null):Nt=Fe.sibling;var Wi=pe(ce,Fe,Je.value,Te);if(Wi===null){Fe===null&&(Fe=Nt);break}n&&Fe&&Wi.alternate===null&&i(ce,Fe),ae=E(Wi,ae,Ve),qe===null?Re=Wi:qe.sibling=Wi,qe=Wi,Fe=Nt}if(Je.done)return o(ce,Fe),et&&hr(ce,Ve),Re;if(Fe===null){for(;!Je.done;Ve++,Je=fe.next())Je=ke(ce,Je.value,Te),Je!==null&&(ae=E(Je,ae,Ve),qe===null?Re=Je:qe.sibling=Je,qe=Je);return et&&hr(ce,Ve),Re}for(Fe=p(Fe);!Je.done;Ve++,Je=fe.next())Je=ye(Fe,ce,Ve,Je.value,Te),Je!==null&&(n&&Je.alternate!==null&&Fe.delete(Je.key===null?Ve:Je.key),ae=E(Je,ae,Ve),qe===null?Re=Je:qe.sibling=Je,qe=Je);return n&&Fe.forEach(function(DC){return i(ce,DC)}),et&&hr(ce,Ve),Re}function st(ce,ae,fe,Te){if(typeof fe=="object"&&fe!==null&&fe.type===m&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case l:e:{for(var Re=fe.key;ae!==null;){if(ae.key===Re){if(Re=fe.type,Re===m){if(ae.tag===7){o(ce,ae.sibling),Te=C(ae,fe.props.children),Te.return=ce,ce=Te;break e}}else if(ae.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===F&&cp(Re)===ae.type){o(ce,ae.sibling),Te=C(ae,fe.props),ma(Te,fe),Te.return=ce,ce=Te;break e}o(ce,ae);break}else i(ce,ae);ae=ae.sibling}fe.type===m?(Te=cr(fe.props.children,ce.mode,Te,fe.key),Te.return=ce,ce=Te):(Te=Uo(fe.type,fe.key,fe.props,null,ce.mode,Te),ma(Te,fe),Te.return=ce,ce=Te)}return N(ce);case u:e:{for(Re=fe.key;ae!==null;){if(ae.key===Re)if(ae.tag===4&&ae.stateNode.containerInfo===fe.containerInfo&&ae.stateNode.implementation===fe.implementation){o(ce,ae.sibling),Te=C(ae,fe.children||[]),Te.return=ce,ce=Te;break e}else{o(ce,ae);break}else i(ce,ae);ae=ae.sibling}Te=fu(fe,ce.mode,Te),Te.return=ce,ce=Te}return N(ce);case F:return Re=fe._init,fe=Re(fe._payload),st(ce,ae,fe,Te)}if(K(fe))return Ue(ce,ae,fe,Te);if(X(fe)){if(Re=X(fe),typeof Re!="function")throw Error(h(150));return fe=Re.call(fe),Be(ce,ae,fe,Te)}if(typeof fe.then=="function")return st(ce,ae,rl(fe),Te);if(fe.$$typeof===T)return st(ce,ae,Xo(ce,fe),Te);sl(ce,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ae!==null&&ae.tag===6?(o(ce,ae.sibling),Te=C(ae,fe),Te.return=ce,ce=Te):(o(ce,ae),Te=hu(fe,ce.mode,Te),Te.return=ce,ce=Te),N(ce)):o(ce,ae)}return function(ce,ae,fe,Te){try{da=0;var Re=st(ce,ae,fe,Te);return is=null,Re}catch(Fe){if(Fe===ra||Fe===$o)throw Fe;var qe=fn(29,Fe,null,ce.mode);return qe.lanes=Te,qe.return=ce,qe}finally{}}}var rs=up(!0),hp=up(!1),Tn=j(null),In=null;function Ri(n){var i=n.alternate;I(Et,Et.current&1),I(Tn,n),In===null&&(i===null||Jr.current!==null||i.memoizedState!==null)&&(In=n)}function fp(n){if(n.tag===22){if(I(Et,Et.current),I(Tn,n),In===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(In=n)}}else Ni()}function Ni(){I(Et,Et.current),I(Tn,Tn.current)}function ui(n){R(Tn),In===n&&(In=null),R(Et)}var Et=j(0);function al(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Nh(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Xu(n,i,o,p){i=n.memoizedState,o=o(p,i),o=o==null?i:d({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Gu={enqueueSetState:function(n,i,o){n=n._reactInternals;var p=pn(),C=ji(p);C.payload=i,o!=null&&(C.callback=o),i=Ai(n,C,p),i!==null&&(yn(i,n,p),aa(i,n,p))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var p=pn(),C=ji(p);C.tag=1,C.payload=i,o!=null&&(C.callback=o),i=Ai(n,C,p),i!==null&&(yn(i,n,p),aa(i,n,p))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=pn(),p=ji(o);p.tag=2,i!=null&&(p.callback=i),i=Ai(n,p,o),i!==null&&(yn(i,n,o),aa(i,n,o))}};function dp(n,i,o,p,C,E,N){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,E,N):i.prototype&&i.prototype.isPureReactComponent?!Ks(o,p)||!Ks(C,E):!0}function mp(n,i,o,p){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,p),i.state!==n&&Gu.enqueueReplaceState(i,i.state,null)}function vr(n,i){var o=i;if("ref"in i){o={};for(var p in i)p!=="ref"&&(o[p]=i[p])}if(n=n.defaultProps){o===i&&(o=d({},o));for(var C in n)o[C]===void 0&&(o[C]=n[C])}return o}var ol=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function gp(n){ol(n)}function pp(n){console.error(n)}function yp(n){ol(n)}function ll(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(p){setTimeout(function(){throw p})}}function vp(n,i,o){try{var p=n.onCaughtError;p(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function $u(n,i,o){return o=ji(o),o.tag=3,o.payload={element:null},o.callback=function(){ll(n,i)},o}function xp(n){return n=ji(n),n.tag=3,n}function bp(n,i,o,p){var C=o.type.getDerivedStateFromError;if(typeof C=="function"){var E=p.value;n.payload=function(){return C(E)},n.callback=function(){vp(i,o,p)}}var N=o.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(n.callback=function(){vp(i,o,p),typeof C!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var H=p.stack;this.componentDidCatch(p.value,{componentStack:H!==null?H:""})})}function DS(n,i,o,p,C){if(o.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(i=o.alternate,i!==null&&ta(i,o,C,!0),o=Tn.current,o!==null){switch(o.tag){case 13:return In===null?yh():o.alternate===null&&gt===0&&(gt=3),o.flags&=-257,o.flags|=65536,o.lanes=C,p===Su?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([p]):i.add(p),xh(n,p,C)),!1;case 22:return o.flags|=65536,p===Su?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([p])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([p]):o.add(p)),xh(n,p,C)),!1}throw Error(h(435,o.tag))}return xh(n,p,C),yh(),!1}if(et)return i=Tn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=C,p!==gu&&(n=Error(h(422),{cause:p}),ea(wn(n,o)))):(p!==gu&&(i=Error(h(423),{cause:p}),ea(wn(i,o))),n=n.current.alternate,n.flags|=65536,C&=-C,n.lanes|=C,p=wn(p,o),C=$u(n.stateNode,p,C),Tu(n,C),gt!==4&&(gt=2)),!1;var E=Error(h(520),{cause:p});if(E=wn(E,o),wa===null?wa=[E]:wa.push(E),gt!==4&&(gt=2),i===null)return!0;p=wn(p,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=C&-C,o.lanes|=n,n=$u(o.stateNode,p,n),Tu(o,n),!1;case 1:if(i=o.type,E=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Vi===null||!Vi.has(E))))return o.flags|=65536,C&=-C,o.lanes|=C,C=xp(C),bp(C,n,o,p),Tu(o,C),!1}o=o.return}while(o!==null);return!1}var wp=Error(h(461)),Dt=!1;function Pt(n,i,o,p){i.child=n===null?hp(i,null,o,p):rs(i,n.child,o,p)}function Sp(n,i,o,p,C){o=o.render;var E=i.ref;if("ref"in p){var N={};for(var H in p)H!=="ref"&&(N[H]=p[H])}else N=p;return gr(i),p=ju(n,i,o,N,E,C),H=Au(),n!==null&&!Dt?(Du(n,i,C),hi(n,i,C)):(et&&H&&du(i),i.flags|=1,Pt(n,i,p,C),i.child)}function Cp(n,i,o,p,C){if(n===null){var E=o.type;return typeof E=="function"&&!uu(E)&&E.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=E,_p(n,i,E,p,C)):(n=Uo(o.type,null,p,i,i.mode,C),n.ref=i.ref,n.return=i,i.child=n)}if(E=n.child,!th(n,C)){var N=E.memoizedProps;if(o=o.compare,o=o!==null?o:Ks,o(N,p)&&n.ref===i.ref)return hi(n,i,C)}return i.flags|=1,n=ri(E,p),n.ref=i.ref,n.return=i,i.child=n}function _p(n,i,o,p,C){if(n!==null){var E=n.memoizedProps;if(Ks(E,p)&&n.ref===i.ref)if(Dt=!1,i.pendingProps=p=E,th(n,C))(n.flags&131072)!==0&&(Dt=!0);else return i.lanes=n.lanes,hi(n,i,C)}return Wu(n,i,o,p,C)}function Tp(n,i,o){var p=i.pendingProps,C=p.children,E=n!==null?n.memoizedState:null;if(p.mode==="hidden"){if((i.flags&128)!==0){if(p=E!==null?E.baseLanes|o:o,n!==null){for(C=i.child=n.child,E=0;C!==null;)E=E|C.lanes|C.childLanes,C=C.sibling;i.childLanes=E&~p}else i.childLanes=0,i.child=null;return kp(n,i,p,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Go(i,E!==null?E.cachePool:null),E!==null?_g(i,E):Eu(),fp(i);else return i.lanes=i.childLanes=536870912,kp(n,i,E!==null?E.baseLanes|o:o,o)}else E!==null?(Go(i,E.cachePool),_g(i,E),Ni(),i.memoizedState=null):(n!==null&&Go(i,null),Eu(),Ni());return Pt(n,i,C,o),i.child}function kp(n,i,o,p){var C=wu();return C=C===null?null:{parent:kt._currentValue,pool:C},i.memoizedState={baseLanes:o,cachePool:C},n!==null&&Go(i,null),Eu(),fp(i),n!==null&&ta(n,i,p,!0),null}function cl(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(h(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Wu(n,i,o,p,C){return gr(i),o=ju(n,i,o,p,void 0,C),p=Au(),n!==null&&!Dt?(Du(n,i,C),hi(n,i,C)):(et&&p&&du(i),i.flags|=1,Pt(n,i,o,C),i.child)}function Ep(n,i,o,p,C,E){return gr(i),i.updateQueue=null,o=kg(i,p,o,C),Tg(n),p=Au(),n!==null&&!Dt?(Du(n,i,E),hi(n,i,E)):(et&&p&&du(i),i.flags|=1,Pt(n,i,o,E),i.child)}function Op(n,i,o,p,C){if(gr(i),i.stateNode===null){var E=Wr,N=o.contextType;typeof N=="object"&&N!==null&&(E=It(N)),E=new o(p,E),i.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Gu,i.stateNode=E,E._reactInternals=i,E=i.stateNode,E.props=p,E.state=i.memoizedState,E.refs={},Cu(i),N=o.contextType,E.context=typeof N=="object"&&N!==null?It(N):Wr,E.state=i.memoizedState,N=o.getDerivedStateFromProps,typeof N=="function"&&(Xu(i,o,N,p),E.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(N=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),N!==E.state&&Gu.enqueueReplaceState(E,E.state,null),la(i,p,E,C),oa(),E.state=i.memoizedState),typeof E.componentDidMount=="function"&&(i.flags|=4194308),p=!0}else if(n===null){E=i.stateNode;var H=i.memoizedProps,ie=vr(o,H);E.props=ie;var me=E.context,_e=o.contextType;N=Wr,typeof _e=="object"&&_e!==null&&(N=It(_e));var ke=o.getDerivedStateFromProps;_e=typeof ke=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=i.pendingProps!==H,_e||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||me!==N)&&mp(i,E,p,N),Mi=!1;var pe=i.memoizedState;E.state=pe,la(i,p,E,C),oa(),me=i.memoizedState,H||pe!==me||Mi?(typeof ke=="function"&&(Xu(i,o,ke,p),me=i.memoizedState),(ie=Mi||dp(i,o,ie,p,pe,me,N))?(_e||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=me),E.props=p,E.state=me,E.context=N,p=ie):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{E=i.stateNode,_u(n,i),N=i.memoizedProps,_e=vr(o,N),E.props=_e,ke=i.pendingProps,pe=E.context,me=o.contextType,ie=Wr,typeof me=="object"&&me!==null&&(ie=It(me)),H=o.getDerivedStateFromProps,(me=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N!==ke||pe!==ie)&&mp(i,E,p,ie),Mi=!1,pe=i.memoizedState,E.state=pe,la(i,p,E,C),oa();var ye=i.memoizedState;N!==ke||pe!==ye||Mi||n!==null&&n.dependencies!==null&&Yo(n.dependencies)?(typeof H=="function"&&(Xu(i,o,H,p),ye=i.memoizedState),(_e=Mi||dp(i,o,_e,p,pe,ye,ie)||n!==null&&n.dependencies!==null&&Yo(n.dependencies))?(me||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,ye,ie),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,ye,ie)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||N===n.memoizedProps&&pe===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&pe===n.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=ye),E.props=p,E.state=ye,E.context=ie,p=_e):(typeof E.componentDidUpdate!="function"||N===n.memoizedProps&&pe===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&pe===n.memoizedState||(i.flags|=1024),p=!1)}return E=p,cl(n,i),p=(i.flags&128)!==0,E||p?(E=i.stateNode,o=p&&typeof o.getDerivedStateFromError!="function"?null:E.render(),i.flags|=1,n!==null&&p?(i.child=rs(i,n.child,null,C),i.child=rs(i,null,o,C)):Pt(n,i,o,C),i.memoizedState=E.state,n=i.child):n=hi(n,i,C),n}function Mp(n,i,o,p){return Js(),i.flags|=256,Pt(n,i,o,p),i.child}var qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(n){return{baseLanes:n,cachePool:pg()}}function Zu(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=kn),n}function jp(n,i,o){var p=i.pendingProps,C=!1,E=(i.flags&128)!==0,N;if((N=E)||(N=n!==null&&n.memoizedState===null?!1:(Et.current&2)!==0),N&&(C=!0,i.flags&=-129),N=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(C?Ri(i):Ni(),et){var H=mt,ie;if(ie=H){e:{for(ie=H,H=Hn;ie.nodeType!==8;){if(!H){H=null;break e}if(ie=Ln(ie.nextSibling),ie===null){H=null;break e}}H=ie}H!==null?(i.memoizedState={dehydrated:H,treeContext:ur!==null?{id:si,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},ie=fn(18,null,null,0),ie.stateNode=H,ie.return=i,i.child=ie,Kt=i,mt=null,ie=!0):ie=!1}ie||dr(i)}if(H=i.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return Nh(H)?i.lanes=32:i.lanes=536870912,null;ui(i)}return H=p.children,p=p.fallback,C?(Ni(),C=i.mode,H=ul({mode:"hidden",children:H},C),p=cr(p,C,o,null),H.return=i,p.return=i,H.sibling=p,i.child=H,C=i.child,C.memoizedState=Ku(o),C.childLanes=Zu(n,N,o),i.memoizedState=qu,p):(Ri(i),Qu(i,H))}if(ie=n.memoizedState,ie!==null&&(H=ie.dehydrated,H!==null)){if(E)i.flags&256?(Ri(i),i.flags&=-257,i=Ju(n,i,o)):i.memoizedState!==null?(Ni(),i.child=n.child,i.flags|=128,i=null):(Ni(),C=p.fallback,H=i.mode,p=ul({mode:"visible",children:p.children},H),C=cr(C,H,o,null),C.flags|=2,p.return=i,C.return=i,p.sibling=C,i.child=p,rs(i,n.child,null,o),p=i.child,p.memoizedState=Ku(o),p.childLanes=Zu(n,N,o),i.memoizedState=qu,i=C);else if(Ri(i),Nh(H)){if(N=H.nextSibling&&H.nextSibling.dataset,N)var me=N.dgst;N=me,p=Error(h(419)),p.stack="",p.digest=N,ea({value:p,source:null,stack:null}),i=Ju(n,i,o)}else if(Dt||ta(n,i,o,!1),N=(o&n.childLanes)!==0,Dt||N){if(N=ot,N!==null&&(p=o&-o,p=(p&42)!==0?1:Pc(p),p=(p&(N.suspendedLanes|o))!==0?0:p,p!==0&&p!==ie.retryLane))throw ie.retryLane=p,$r(n,p),yn(N,n,p),wp;H.data==="$?"||yh(),i=Ju(n,i,o)}else H.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=ie.treeContext,mt=Ln(H.nextSibling),Kt=i,et=!0,fr=null,Hn=!1,n!==null&&(Cn[_n++]=si,Cn[_n++]=ai,Cn[_n++]=ur,si=n.id,ai=n.overflow,ur=i),i=Qu(i,p.children),i.flags|=4096);return i}return C?(Ni(),C=p.fallback,H=i.mode,ie=n.child,me=ie.sibling,p=ri(ie,{mode:"hidden",children:p.children}),p.subtreeFlags=ie.subtreeFlags&65011712,me!==null?C=ri(me,C):(C=cr(C,H,o,null),C.flags|=2),C.return=i,p.return=i,p.sibling=C,i.child=p,p=C,C=i.child,H=n.child.memoizedState,H===null?H=Ku(o):(ie=H.cachePool,ie!==null?(me=kt._currentValue,ie=ie.parent!==me?{parent:me,pool:me}:ie):ie=pg(),H={baseLanes:H.baseLanes|o,cachePool:ie}),C.memoizedState=H,C.childLanes=Zu(n,N,o),i.memoizedState=qu,p):(Ri(i),o=n.child,n=o.sibling,o=ri(o,{mode:"visible",children:p.children}),o.return=i,o.sibling=null,n!==null&&(N=i.deletions,N===null?(i.deletions=[n],i.flags|=16):N.push(n)),i.child=o,i.memoizedState=null,o)}function Qu(n,i){return i=ul({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ul(n,i){return n=fn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Ju(n,i,o){return rs(i,n.child,null,o),n=Qu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Ap(n,i,o){n.lanes|=i;var p=n.alternate;p!==null&&(p.lanes|=i),yu(n.return,i,o)}function eh(n,i,o,p,C){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:o,tailMode:C}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=o,E.tailMode=C)}function Dp(n,i,o){var p=i.pendingProps,C=p.revealOrder,E=p.tail;if(Pt(n,i,p.children,o),p=Et.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ap(n,o,i);else if(n.tag===19)Ap(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}switch(I(Et,p),C){case"forwards":for(o=i.child,C=null;o!==null;)n=o.alternate,n!==null&&al(n)===null&&(C=o),o=o.sibling;o=C,o===null?(C=i.child,i.child=null):(C=o.sibling,o.sibling=null),eh(i,!1,C,o,E);break;case"backwards":for(o=null,C=i.child,i.child=null;C!==null;){if(n=C.alternate,n!==null&&al(n)===null){i.child=C;break}n=C.sibling,C.sibling=o,o=C,C=n}eh(i,!0,o,null,E);break;case"together":eh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function hi(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Bi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(ta(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(h(153));if(i.child!==null){for(n=i.child,o=ri(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=ri(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function th(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Yo(n)))}function RS(n,i,o){switch(i.tag){case 3:ne(i,i.stateNode.containerInfo),Oi(i,kt,n.memoizedState.cache),Js();break;case 27:case 5:de(i);break;case 4:ne(i,i.stateNode.containerInfo);break;case 10:Oi(i,i.type,i.memoizedProps.value);break;case 13:var p=i.memoizedState;if(p!==null)return p.dehydrated!==null?(Ri(i),i.flags|=128,null):(o&i.child.childLanes)!==0?jp(n,i,o):(Ri(i),n=hi(n,i,o),n!==null?n.sibling:null);Ri(i);break;case 19:var C=(n.flags&128)!==0;if(p=(o&i.childLanes)!==0,p||(ta(n,i,o,!1),p=(o&i.childLanes)!==0),C){if(p)return Dp(n,i,o);i.flags|=128}if(C=i.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),I(Et,Et.current),p)break;return null;case 22:case 23:return i.lanes=0,Tp(n,i,o);case 24:Oi(i,kt,n.memoizedState.cache)}return hi(n,i,o)}function Rp(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Dt=!0;else{if(!th(n,o)&&(i.flags&128)===0)return Dt=!1,RS(n,i,o);Dt=(n.flags&131072)!==0}else Dt=!1,et&&(i.flags&1048576)!==0&&cg(i,Io,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var p=i.elementType,C=p._init;if(p=C(p._payload),i.type=p,typeof p=="function")uu(p)?(n=vr(p,n),i.tag=1,i=Op(null,i,p,n,o)):(i.tag=0,i=Wu(null,i,p,n,o));else{if(p!=null){if(C=p.$$typeof,C===k){i.tag=11,i=Sp(null,i,p,n,o);break e}else if(C===P){i.tag=14,i=Cp(null,i,p,n,o);break e}}throw i=se(p)||p,Error(h(306,i,""))}}return i;case 0:return Wu(n,i,i.type,i.pendingProps,o);case 1:return p=i.type,C=vr(p,i.pendingProps),Op(n,i,p,C,o);case 3:e:{if(ne(i,i.stateNode.containerInfo),n===null)throw Error(h(387));p=i.pendingProps;var E=i.memoizedState;C=E.element,_u(n,i),la(i,p,null,o);var N=i.memoizedState;if(p=N.cache,Oi(i,kt,p),p!==E.cache&&vu(i,[kt],o,!0),oa(),p=N.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:N.cache},i.updateQueue.baseState=E,i.memoizedState=E,i.flags&256){i=Mp(n,i,p,o);break e}else if(p!==C){C=wn(Error(h(424)),i),ea(C),i=Mp(n,i,p,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=Ln(n.firstChild),Kt=i,et=!0,fr=null,Hn=!0,o=hp(i,null,p,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Js(),p===C){i=hi(n,i,o);break e}Pt(n,i,p,o)}i=i.child}return i;case 26:return cl(n,i),n===null?(o=F0(i.type,null,i.pendingProps,null))?i.memoizedState=o:et||(o=i.type,n=i.pendingProps,p=_l(W.current).createElement(o),p[Ht]=i,p[rn]=n,Ft(p,o,n),At(p),i.stateNode=p):i.memoizedState=F0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return de(i),n===null&&et&&(p=i.stateNode=N0(i.type,i.pendingProps,W.current),Kt=i,Hn=!0,C=mt,Ii(i.type)?(Ph=C,mt=Ln(p.firstChild)):mt=C),Pt(n,i,i.pendingProps.children,o),cl(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((C=p=mt)&&(p=oC(p,i.type,i.pendingProps,Hn),p!==null?(i.stateNode=p,Kt=i,mt=Ln(p.firstChild),Hn=!1,C=!0):C=!1),C||dr(i)),de(i),C=i.type,E=i.pendingProps,N=n!==null?n.memoizedProps:null,p=E.children,Ah(C,E)?p=null:N!==null&&Ah(C,N)&&(i.flags|=32),i.memoizedState!==null&&(C=ju(n,i,TS,null,null,o),ja._currentValue=C),cl(n,i),Pt(n,i,p,o),i.child;case 6:return n===null&&et&&((n=o=mt)&&(o=lC(o,i.pendingProps,Hn),o!==null?(i.stateNode=o,Kt=i,mt=null,n=!0):n=!1),n||dr(i)),null;case 13:return jp(n,i,o);case 4:return ne(i,i.stateNode.containerInfo),p=i.pendingProps,n===null?i.child=rs(i,null,p,o):Pt(n,i,p,o),i.child;case 11:return Sp(n,i,i.type,i.pendingProps,o);case 7:return Pt(n,i,i.pendingProps,o),i.child;case 8:return Pt(n,i,i.pendingProps.children,o),i.child;case 12:return Pt(n,i,i.pendingProps.children,o),i.child;case 10:return p=i.pendingProps,Oi(i,i.type,p.value),Pt(n,i,p.children,o),i.child;case 9:return C=i.type._context,p=i.pendingProps.children,gr(i),C=It(C),p=p(C),i.flags|=1,Pt(n,i,p,o),i.child;case 14:return Cp(n,i,i.type,i.pendingProps,o);case 15:return _p(n,i,i.type,i.pendingProps,o);case 19:return Dp(n,i,o);case 31:return p=i.pendingProps,o=i.mode,p={mode:p.mode,children:p.children},n===null?(o=ul(p,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ri(n.child,p),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Tp(n,i,o);case 24:return gr(i),p=It(kt),n===null?(C=wu(),C===null&&(C=ot,E=xu(),C.pooledCache=E,E.refCount++,E!==null&&(C.pooledCacheLanes|=o),C=E),i.memoizedState={parent:p,cache:C},Cu(i),Oi(i,kt,C)):((n.lanes&o)!==0&&(_u(n,i),la(i,null,null,o),oa()),C=n.memoizedState,E=i.memoizedState,C.parent!==p?(C={parent:p,cache:p},i.memoizedState=C,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=C),Oi(i,kt,p)):(p=E.cache,Oi(i,kt,p),p!==C.cache&&vu(i,[kt],o,!0))),Pt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(h(156,i.tag))}function fi(n){n.flags|=4}function Np(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!H0(i)){if(i=Tn.current,i!==null&&((Qe&4194048)===Qe?In!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||i!==In))throw sa=Su,yg;n.flags|=8192}}function hl(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?fm():536870912,n.lanes|=i,ls|=i)}function ga(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var p=null;o!==null;)o.alternate!==null&&(p=o),o=o.sibling;p===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,p=0;if(i)for(var C=n.child;C!==null;)o|=C.lanes|C.childLanes,p|=C.subtreeFlags&65011712,p|=C.flags&65011712,C.return=n,C=C.sibling;else for(C=n.child;C!==null;)o|=C.lanes|C.childLanes,p|=C.subtreeFlags,p|=C.flags,C.return=n,C=C.sibling;return n.subtreeFlags|=p,n.childLanes=o,i}function NS(n,i,o){var p=i.pendingProps;switch(mu(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return o=i.stateNode,p=null,n!==null&&(p=n.memoizedState.cache),i.memoizedState.cache!==p&&(i.flags|=2048),li(kt),ee(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Qs(i)?fi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,fg())),ft(i),null;case 26:return o=i.memoizedState,n===null?(fi(i),o!==null?(ft(i),Np(i,o)):(ft(i),i.flags&=-16777217)):o?o!==n.memoizedState?(fi(i),ft(i),Np(i,o)):(ft(i),i.flags&=-16777217):(n.memoizedProps!==p&&fi(i),ft(i),i.flags&=-16777217),null;case 27:le(i),o=W.current;var C=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==p&&fi(i);else{if(!p){if(i.stateNode===null)throw Error(h(166));return ft(i),null}n=B.current,Qs(i)?ug(i):(n=N0(C,p,o),i.stateNode=n,fi(i))}return ft(i),null;case 5:if(le(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==p&&fi(i);else{if(!p){if(i.stateNode===null)throw Error(h(166));return ft(i),null}if(n=B.current,Qs(i))ug(i);else{switch(C=_l(W.current),n){case 1:n=C.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=C.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=C.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=C.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=C.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof p.is=="string"?C.createElement("select",{is:p.is}):C.createElement("select"),p.multiple?n.multiple=!0:p.size&&(n.size=p.size);break;default:n=typeof p.is=="string"?C.createElement(o,{is:p.is}):C.createElement(o)}}n[Ht]=i,n[rn]=p;e:for(C=i.child;C!==null;){if(C.tag===5||C.tag===6)n.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===i)break e;for(;C.sibling===null;){if(C.return===null||C.return===i)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}i.stateNode=n;e:switch(Ft(n,o,p),o){case"button":case"input":case"select":case"textarea":n=!!p.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&fi(i)}}return ft(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==p&&fi(i);else{if(typeof p!="string"&&i.stateNode===null)throw Error(h(166));if(n=W.current,Qs(i)){if(n=i.stateNode,o=i.memoizedProps,p=null,C=Kt,C!==null)switch(C.tag){case 27:case 5:p=C.memoizedProps}n[Ht]=i,n=!!(n.nodeValue===o||p!==null&&p.suppressHydrationWarning===!0||E0(n.nodeValue,o)),n||dr(i)}else n=_l(n).createTextNode(p),n[Ht]=i,i.stateNode=n}return ft(i),null;case 13:if(p=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(C=Qs(i),p!==null&&p.dehydrated!==null){if(n===null){if(!C)throw Error(h(318));if(C=i.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(h(317));C[Ht]=i}else Js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),C=!1}else C=fg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=C),C=!0;if(!C)return i.flags&256?(ui(i),i):(ui(i),null)}if(ui(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=p!==null,n=n!==null&&n.memoizedState!==null,o){p=i.child,C=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(C=p.alternate.memoizedState.cachePool.pool);var E=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==C&&(p.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),hl(i,i.updateQueue),ft(i),null;case 4:return ee(),n===null&&kh(i.stateNode.containerInfo),ft(i),null;case 10:return li(i.type),ft(i),null;case 19:if(R(Et),C=i.memoizedState,C===null)return ft(i),null;if(p=(i.flags&128)!==0,E=C.rendering,E===null)if(p)ga(C,!1);else{if(gt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(E=al(n),E!==null){for(i.flags|=128,ga(C,!1),n=E.updateQueue,i.updateQueue=n,hl(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)lg(o,n),o=o.sibling;return I(Et,Et.current&1|2),i.child}n=n.sibling}C.tail!==null&&he()>ml&&(i.flags|=128,p=!0,ga(C,!1),i.lanes=4194304)}else{if(!p)if(n=al(E),n!==null){if(i.flags|=128,p=!0,n=n.updateQueue,i.updateQueue=n,hl(i,n),ga(C,!0),C.tail===null&&C.tailMode==="hidden"&&!E.alternate&&!et)return ft(i),null}else 2*he()-C.renderingStartTime>ml&&o!==536870912&&(i.flags|=128,p=!0,ga(C,!1),i.lanes=4194304);C.isBackwards?(E.sibling=i.child,i.child=E):(n=C.last,n!==null?n.sibling=E:i.child=E,C.last=E)}return C.tail!==null?(i=C.tail,C.rendering=i,C.tail=i.sibling,C.renderingStartTime=he(),i.sibling=null,n=Et.current,I(Et,p?n&1|2:n&1),i):(ft(i),null);case 22:case 23:return ui(i),Ou(),p=i.memoizedState!==null,n!==null?n.memoizedState!==null!==p&&(i.flags|=8192):p&&(i.flags|=8192),p?(o&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),o=i.updateQueue,o!==null&&hl(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),p=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(p=i.memoizedState.cachePool.pool),p!==o&&(i.flags|=2048),n!==null&&R(pr),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),li(kt),ft(i),null;case 25:return null;case 30:return null}throw Error(h(156,i.tag))}function PS(n,i){switch(mu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return li(kt),ee(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return le(i),null;case 13:if(ui(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(h(340));Js()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return R(Et),null;case 4:return ee(),null;case 10:return li(i.type),null;case 22:case 23:return ui(i),Ou(),n!==null&&R(pr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return li(kt),null;case 25:return null;default:return null}}function Pp(n,i){switch(mu(i),i.tag){case 3:li(kt),ee();break;case 26:case 27:case 5:le(i);break;case 4:ee();break;case 13:ui(i);break;case 19:R(Et);break;case 10:li(i.type);break;case 22:case 23:ui(i),Ou(),n!==null&&R(pr);break;case 24:li(kt)}}function pa(n,i){try{var o=i.updateQueue,p=o!==null?o.lastEffect:null;if(p!==null){var C=p.next;o=C;do{if((o.tag&n)===n){p=void 0;var E=o.create,N=o.inst;p=E(),N.destroy=p}o=o.next}while(o!==C)}}catch(H){at(i,i.return,H)}}function Pi(n,i,o){try{var p=i.updateQueue,C=p!==null?p.lastEffect:null;if(C!==null){var E=C.next;p=E;do{if((p.tag&n)===n){var N=p.inst,H=N.destroy;if(H!==void 0){N.destroy=void 0,C=i;var ie=o,me=H;try{me()}catch(_e){at(C,ie,_e)}}}p=p.next}while(p!==E)}}catch(_e){at(i,i.return,_e)}}function Lp(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Cg(i,o)}catch(p){at(n,n.return,p)}}}function Fp(n,i,o){o.props=vr(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(p){at(n,i,p)}}function ya(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var p=n.stateNode;break;case 30:p=n.stateNode;break;default:p=n.stateNode}typeof o=="function"?n.refCleanup=o(p):o.current=p}}catch(C){at(n,i,C)}}function Yn(n,i){var o=n.ref,p=n.refCleanup;if(o!==null)if(typeof p=="function")try{p()}catch(C){at(n,i,C)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(C){at(n,i,C)}else o.current=null}function zp(n){var i=n.type,o=n.memoizedProps,p=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&p.focus();break e;case"img":o.src?p.src=o.src:o.srcSet&&(p.srcset=o.srcSet)}}catch(C){at(n,n.return,C)}}function nh(n,i,o){try{var p=n.stateNode;nC(p,n.type,o,i),p[rn]=i}catch(C){at(n,n.return,C)}}function Bp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ii(n.type)||n.tag===4}function ih(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ii(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function rh(n,i,o){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Cl));else if(p!==4&&(p===27&&Ii(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(rh(n,i,o),n=n.sibling;n!==null;)rh(n,i,o),n=n.sibling}function fl(n,i,o){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(p!==4&&(p===27&&Ii(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(fl(n,i,o),n=n.sibling;n!==null;)fl(n,i,o),n=n.sibling}function Vp(n){var i=n.stateNode,o=n.memoizedProps;try{for(var p=n.type,C=i.attributes;C.length;)i.removeAttributeNode(C[0]);Ft(i,p,o),i[Ht]=n,i[rn]=o}catch(E){at(n,n.return,E)}}var di=!1,vt=!1,sh=!1,Up=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function LS(n,i){if(n=n.containerInfo,Mh=jl,n=Qm(n),iu(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var p=o.getSelection&&o.getSelection();if(p&&p.rangeCount!==0){o=p.anchorNode;var C=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break e}var N=0,H=-1,ie=-1,me=0,_e=0,ke=n,pe=null;t:for(;;){for(var ye;ke!==o||C!==0&&ke.nodeType!==3||(H=N+C),ke!==E||p!==0&&ke.nodeType!==3||(ie=N+p),ke.nodeType===3&&(N+=ke.nodeValue.length),(ye=ke.firstChild)!==null;)pe=ke,ke=ye;for(;;){if(ke===n)break t;if(pe===o&&++me===C&&(H=N),pe===E&&++_e===p&&(ie=N),(ye=ke.nextSibling)!==null)break;ke=pe,pe=ke.parentNode}ke=ye}o=H===-1||ie===-1?null:{start:H,end:ie}}else o=null}o=o||{start:0,end:0}}else o=null;for(jh={focusedElem:n,selectionRange:o},jl=!1,Rt=i;Rt!==null;)if(i=Rt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Rt=n;else for(;Rt!==null;){switch(i=Rt,E=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&E!==null){n=void 0,o=i,C=E.memoizedProps,E=E.memoizedState,p=o.stateNode;try{var Ue=vr(o.type,C,o.elementType===o.type);n=p.getSnapshotBeforeUpdate(Ue,E),p.__reactInternalSnapshotBeforeUpdate=n}catch(Be){at(o,o.return,Be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Rh(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(h(163))}if(n=i.sibling,n!==null){n.return=i.return,Rt=n;break}Rt=i.return}}function Hp(n,i,o){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Li(n,o),p&4&&pa(5,o);break;case 1:if(Li(n,o),p&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(N){at(o,o.return,N)}else{var C=vr(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(C,i,n.__reactInternalSnapshotBeforeUpdate)}catch(N){at(o,o.return,N)}}p&64&&Lp(o),p&512&&ya(o,o.return);break;case 3:if(Li(n,o),p&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Cg(n,i)}catch(N){at(o,o.return,N)}}break;case 27:i===null&&p&4&&Vp(o);case 26:case 5:Li(n,o),i===null&&p&4&&zp(o),p&512&&ya(o,o.return);break;case 12:Li(n,o);break;case 13:Li(n,o),p&4&&Xp(n,o),p&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=XS.bind(null,o),cC(n,o))));break;case 22:if(p=o.memoizedState!==null||di,!p){i=i!==null&&i.memoizedState!==null||vt,C=di;var E=vt;di=p,(vt=i)&&!E?Fi(n,o,(o.subtreeFlags&8772)!==0):Li(n,o),di=C,vt=E}break;case 30:break;default:Li(n,o)}}function Ip(n){var i=n.alternate;i!==null&&(n.alternate=null,Ip(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&zc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ut=null,on=!1;function mi(n,i,o){for(o=o.child;o!==null;)Yp(n,i,o),o=o.sibling}function Yp(n,i,o){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Me,o)}catch{}switch(o.tag){case 26:vt||Yn(o,i),mi(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vt||Yn(o,i);var p=ut,C=on;Ii(o.type)&&(ut=o.stateNode,on=!1),mi(n,i,o),ka(o.stateNode),ut=p,on=C;break;case 5:vt||Yn(o,i);case 6:if(p=ut,C=on,ut=null,mi(n,i,o),ut=p,on=C,ut!==null)if(on)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(o.stateNode)}catch(E){at(o,i,E)}else try{ut.removeChild(o.stateNode)}catch(E){at(o,i,E)}break;case 18:ut!==null&&(on?(n=ut,D0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Na(n)):D0(ut,o.stateNode));break;case 4:p=ut,C=on,ut=o.stateNode.containerInfo,on=!0,mi(n,i,o),ut=p,on=C;break;case 0:case 11:case 14:case 15:vt||Pi(2,o,i),vt||Pi(4,o,i),mi(n,i,o);break;case 1:vt||(Yn(o,i),p=o.stateNode,typeof p.componentWillUnmount=="function"&&Fp(o,i,p)),mi(n,i,o);break;case 21:mi(n,i,o);break;case 22:vt=(p=vt)||o.memoizedState!==null,mi(n,i,o),vt=p;break;default:mi(n,i,o)}}function Xp(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Na(n)}catch(o){at(i,i.return,o)}}function FS(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Up),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Up),i;default:throw Error(h(435,n.tag))}}function ah(n,i){var o=FS(n);i.forEach(function(p){var C=GS.bind(null,n,p);o.has(p)||(o.add(p),p.then(C,C))})}function dn(n,i){var o=i.deletions;if(o!==null)for(var p=0;p<o.length;p++){var C=o[p],E=n,N=i,H=N;e:for(;H!==null;){switch(H.tag){case 27:if(Ii(H.type)){ut=H.stateNode,on=!1;break e}break;case 5:ut=H.stateNode,on=!1;break e;case 3:case 4:ut=H.stateNode.containerInfo,on=!0;break e}H=H.return}if(ut===null)throw Error(h(160));Yp(E,N,C),ut=null,on=!1,E=C.alternate,E!==null&&(E.return=null),C.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Gp(i,n),i=i.sibling}var Pn=null;function Gp(n,i){var o=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:dn(i,n),mn(n),p&4&&(Pi(3,n,n.return),pa(3,n),Pi(5,n,n.return));break;case 1:dn(i,n),mn(n),p&512&&(vt||o===null||Yn(o,o.return)),p&64&&di&&(n=n.updateQueue,n!==null&&(p=n.callbacks,p!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?p:o.concat(p))));break;case 26:var C=Pn;if(dn(i,n),mn(n),p&512&&(vt||o===null||Yn(o,o.return)),p&4){var E=o!==null?o.memoizedState:null;if(p=n.memoizedState,o===null)if(p===null)if(n.stateNode===null){e:{p=n.type,o=n.memoizedProps,C=C.ownerDocument||C;t:switch(p){case"title":E=C.getElementsByTagName("title")[0],(!E||E[Us]||E[Ht]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=C.createElement(p),C.head.insertBefore(E,C.querySelector("head > title"))),Ft(E,p,o),E[Ht]=n,At(E),p=E;break e;case"link":var N=V0("link","href",C).get(p+(o.href||""));if(N){for(var H=0;H<N.length;H++)if(E=N[H],E.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&E.getAttribute("rel")===(o.rel==null?null:o.rel)&&E.getAttribute("title")===(o.title==null?null:o.title)&&E.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){N.splice(H,1);break t}}E=C.createElement(p),Ft(E,p,o),C.head.appendChild(E);break;case"meta":if(N=V0("meta","content",C).get(p+(o.content||""))){for(H=0;H<N.length;H++)if(E=N[H],E.getAttribute("content")===(o.content==null?null:""+o.content)&&E.getAttribute("name")===(o.name==null?null:o.name)&&E.getAttribute("property")===(o.property==null?null:o.property)&&E.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&E.getAttribute("charset")===(o.charSet==null?null:o.charSet)){N.splice(H,1);break t}}E=C.createElement(p),Ft(E,p,o),C.head.appendChild(E);break;default:throw Error(h(468,p))}E[Ht]=n,At(E),p=E}n.stateNode=p}else U0(C,n.type,n.stateNode);else n.stateNode=B0(C,p,n.memoizedProps);else E!==p?(E===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):E.count--,p===null?U0(C,n.type,n.stateNode):B0(C,p,n.memoizedProps)):p===null&&n.stateNode!==null&&nh(n,n.memoizedProps,o.memoizedProps)}break;case 27:dn(i,n),mn(n),p&512&&(vt||o===null||Yn(o,o.return)),o!==null&&p&4&&nh(n,n.memoizedProps,o.memoizedProps);break;case 5:if(dn(i,n),mn(n),p&512&&(vt||o===null||Yn(o,o.return)),n.flags&32){C=n.stateNode;try{Vr(C,"")}catch(ye){at(n,n.return,ye)}}p&4&&n.stateNode!=null&&(C=n.memoizedProps,nh(n,C,o!==null?o.memoizedProps:C)),p&1024&&(sh=!0);break;case 6:if(dn(i,n),mn(n),p&4){if(n.stateNode===null)throw Error(h(162));p=n.memoizedProps,o=n.stateNode;try{o.nodeValue=p}catch(ye){at(n,n.return,ye)}}break;case 3:if(El=null,C=Pn,Pn=Tl(i.containerInfo),dn(i,n),Pn=C,mn(n),p&4&&o!==null&&o.memoizedState.isDehydrated)try{Na(i.containerInfo)}catch(ye){at(n,n.return,ye)}sh&&(sh=!1,$p(n));break;case 4:p=Pn,Pn=Tl(n.stateNode.containerInfo),dn(i,n),mn(n),Pn=p;break;case 12:dn(i,n),mn(n);break;case 13:dn(i,n),mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fh=he()),p&4&&(p=n.updateQueue,p!==null&&(n.updateQueue=null,ah(n,p)));break;case 22:C=n.memoizedState!==null;var ie=o!==null&&o.memoizedState!==null,me=di,_e=vt;if(di=me||C,vt=_e||ie,dn(i,n),vt=_e,di=me,mn(n),p&8192)e:for(i=n.stateNode,i._visibility=C?i._visibility&-2:i._visibility|1,C&&(o===null||ie||di||vt||xr(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){ie=o=i;try{if(E=ie.stateNode,C)N=E.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{H=ie.stateNode;var ke=ie.memoizedProps.style,pe=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;H.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ye){at(ie,ie.return,ye)}}}else if(i.tag===6){if(o===null){ie=i;try{ie.stateNode.nodeValue=C?"":ie.memoizedProps}catch(ye){at(ie,ie.return,ye)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}p&4&&(p=n.updateQueue,p!==null&&(o=p.retryQueue,o!==null&&(p.retryQueue=null,ah(n,o))));break;case 19:dn(i,n),mn(n),p&4&&(p=n.updateQueue,p!==null&&(n.updateQueue=null,ah(n,p)));break;case 30:break;case 21:break;default:dn(i,n),mn(n)}}function mn(n){var i=n.flags;if(i&2){try{for(var o,p=n.return;p!==null;){if(Bp(p)){o=p;break}p=p.return}if(o==null)throw Error(h(160));switch(o.tag){case 27:var C=o.stateNode,E=ih(n);fl(n,E,C);break;case 5:var N=o.stateNode;o.flags&32&&(Vr(N,""),o.flags&=-33);var H=ih(n);fl(n,H,N);break;case 3:case 4:var ie=o.stateNode.containerInfo,me=ih(n);rh(n,me,ie);break;default:throw Error(h(161))}}catch(_e){at(n,n.return,_e)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function $p(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;$p(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Li(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Hp(n,i.alternate,i),i=i.sibling}function xr(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Pi(4,i,i.return),xr(i);break;case 1:Yn(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Fp(i,i.return,o),xr(i);break;case 27:ka(i.stateNode);case 26:case 5:Yn(i,i.return),xr(i);break;case 22:i.memoizedState===null&&xr(i);break;case 30:xr(i);break;default:xr(i)}n=n.sibling}}function Fi(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var p=i.alternate,C=n,E=i,N=E.flags;switch(E.tag){case 0:case 11:case 15:Fi(C,E,o),pa(4,E);break;case 1:if(Fi(C,E,o),p=E,C=p.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(me){at(p,p.return,me)}if(p=E,C=p.updateQueue,C!==null){var H=p.stateNode;try{var ie=C.shared.hiddenCallbacks;if(ie!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ie.length;C++)Sg(ie[C],H)}catch(me){at(p,p.return,me)}}o&&N&64&&Lp(E),ya(E,E.return);break;case 27:Vp(E);case 26:case 5:Fi(C,E,o),o&&p===null&&N&4&&zp(E),ya(E,E.return);break;case 12:Fi(C,E,o);break;case 13:Fi(C,E,o),o&&N&4&&Xp(C,E);break;case 22:E.memoizedState===null&&Fi(C,E,o),ya(E,E.return);break;case 30:break;default:Fi(C,E,o)}i=i.sibling}}function oh(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&na(o))}function lh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&na(n))}function Xn(n,i,o,p){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Wp(n,i,o,p),i=i.sibling}function Wp(n,i,o,p){var C=i.flags;switch(i.tag){case 0:case 11:case 15:Xn(n,i,o,p),C&2048&&pa(9,i);break;case 1:Xn(n,i,o,p);break;case 3:Xn(n,i,o,p),C&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&na(n)));break;case 12:if(C&2048){Xn(n,i,o,p),n=i.stateNode;try{var E=i.memoizedProps,N=E.id,H=E.onPostCommit;typeof H=="function"&&H(N,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ie){at(i,i.return,ie)}}else Xn(n,i,o,p);break;case 13:Xn(n,i,o,p);break;case 23:break;case 22:E=i.stateNode,N=i.alternate,i.memoizedState!==null?E._visibility&2?Xn(n,i,o,p):va(n,i):E._visibility&2?Xn(n,i,o,p):(E._visibility|=2,ss(n,i,o,p,(i.subtreeFlags&10256)!==0)),C&2048&&oh(N,i);break;case 24:Xn(n,i,o,p),C&2048&&lh(i.alternate,i);break;default:Xn(n,i,o,p)}}function ss(n,i,o,p,C){for(C=C&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var E=n,N=i,H=o,ie=p,me=N.flags;switch(N.tag){case 0:case 11:case 15:ss(E,N,H,ie,C),pa(8,N);break;case 23:break;case 22:var _e=N.stateNode;N.memoizedState!==null?_e._visibility&2?ss(E,N,H,ie,C):va(E,N):(_e._visibility|=2,ss(E,N,H,ie,C)),C&&me&2048&&oh(N.alternate,N);break;case 24:ss(E,N,H,ie,C),C&&me&2048&&lh(N.alternate,N);break;default:ss(E,N,H,ie,C)}i=i.sibling}}function va(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,p=i,C=p.flags;switch(p.tag){case 22:va(o,p),C&2048&&oh(p.alternate,p);break;case 24:va(o,p),C&2048&&lh(p.alternate,p);break;default:va(o,p)}i=i.sibling}}var xa=8192;function as(n){if(n.subtreeFlags&xa)for(n=n.child;n!==null;)qp(n),n=n.sibling}function qp(n){switch(n.tag){case 26:as(n),n.flags&xa&&n.memoizedState!==null&&SC(Pn,n.memoizedState,n.memoizedProps);break;case 5:as(n);break;case 3:case 4:var i=Pn;Pn=Tl(n.stateNode.containerInfo),as(n),Pn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=xa,xa=16777216,as(n),xa=i):as(n));break;default:as(n)}}function Kp(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ba(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var p=i[o];Rt=p,Qp(p,n)}Kp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zp(n),n=n.sibling}function Zp(n){switch(n.tag){case 0:case 11:case 15:ba(n),n.flags&2048&&Pi(9,n,n.return);break;case 3:ba(n);break;case 12:ba(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,dl(n)):ba(n);break;default:ba(n)}}function dl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var p=i[o];Rt=p,Qp(p,n)}Kp(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Pi(8,i,i.return),dl(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,dl(i));break;default:dl(i)}n=n.sibling}}function Qp(n,i){for(;Rt!==null;){var o=Rt;switch(o.tag){case 0:case 11:case 15:Pi(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var p=o.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:na(o.memoizedState.cache)}if(p=o.child,p!==null)p.return=o,Rt=p;else e:for(o=n;Rt!==null;){p=Rt;var C=p.sibling,E=p.return;if(Ip(p),p===o){Rt=null;break e}if(C!==null){C.return=E,Rt=C;break e}Rt=E}}}var zS={getCacheForType:function(n){var i=It(kt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},BS=typeof WeakMap=="function"?WeakMap:Map,tt=0,ot=null,Ke=null,Qe=0,nt=0,gn=null,zi=!1,os=!1,ch=!1,gi=0,gt=0,Bi=0,br=0,uh=0,kn=0,ls=0,wa=null,ln=null,hh=!1,fh=0,ml=1/0,gl=null,Vi=null,Lt=0,Ui=null,cs=null,us=0,dh=0,mh=null,Jp=null,Sa=0,gh=null;function pn(){if((tt&2)!==0&&Qe!==0)return Qe&-Qe;if(U.T!==null){var n=Zr;return n!==0?n:Sh()}return gm()}function e0(){kn===0&&(kn=(Qe&536870912)===0||et?hm():536870912);var n=Tn.current;return n!==null&&(n.flags|=32),kn}function yn(n,i,o){(n===ot&&(nt===2||nt===9)||n.cancelPendingCommit!==null)&&(hs(n,0),Hi(n,Qe,kn,!1)),Vs(n,o),((tt&2)===0||n!==ot)&&(n===ot&&((tt&2)===0&&(br|=o),gt===4&&Hi(n,Qe,kn,!1)),Gn(n))}function t0(n,i,o){if((tt&6)!==0)throw Error(h(327));var p=!o&&(i&124)===0&&(i&n.expiredLanes)===0||rr(n,i),C=p?HS(n,i):vh(n,i,!0),E=p;do{if(C===0){os&&!p&&Hi(n,i,0,!1);break}else{if(o=n.current.alternate,E&&!VS(o)){C=vh(n,i,!1),E=!1;continue}if(C===2){if(E=i,n.errorRecoveryDisabledLanes&E)var N=0;else N=n.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){i=N;e:{var H=n;C=wa;var ie=H.current.memoizedState.isDehydrated;if(ie&&(hs(H,N).flags|=256),N=vh(H,N,!1),N!==2){if(ch&&!ie){H.errorRecoveryDisabledLanes|=E,br|=E,C=4;break e}E=ln,ln=C,E!==null&&(ln===null?ln=E:ln.push.apply(ln,E))}C=N}if(E=!1,C!==2)continue}}if(C===1){hs(n,0),Hi(n,i,0,!0);break}e:{switch(p=n,E=C,E){case 0:case 1:throw Error(h(345));case 4:if((i&4194048)!==i)break;case 6:Hi(p,i,kn,!zi);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(h(329))}if((i&62914560)===i&&(C=fh+300-he(),10<C)){if(Hi(p,i,kn,!zi),ti(p,0,!0)!==0)break e;p.timeoutHandle=j0(n0.bind(null,p,o,ln,gl,hh,i,kn,br,ls,zi,E,2,-0,0),C);break e}n0(p,o,ln,gl,hh,i,kn,br,ls,zi,E,0,-0,0)}}break}while(!0);Gn(n)}function n0(n,i,o,p,C,E,N,H,ie,me,_e,ke,pe,ye){if(n.timeoutHandle=-1,ke=i.subtreeFlags,(ke&8192||(ke&16785408)===16785408)&&(Ma={stylesheets:null,count:0,unsuspend:wC},qp(i),ke=CC(),ke!==null)){n.cancelPendingCommit=ke(c0.bind(null,n,i,E,o,p,C,N,H,ie,_e,1,pe,ye)),Hi(n,E,N,!me);return}c0(n,i,E,o,p,C,N,H,ie)}function VS(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var p=0;p<o.length;p++){var C=o[p],E=C.getSnapshot;C=C.value;try{if(!hn(E(),C))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hi(n,i,o,p){i&=~uh,i&=~br,n.suspendedLanes|=i,n.pingedLanes&=~i,p&&(n.warmLanes|=i),p=n.expirationTimes;for(var C=i;0<C;){var E=31-Ie(C),N=1<<E;p[E]=-1,C&=~N}o!==0&&dm(n,o,i)}function pl(){return(tt&6)===0?(Ca(0),!1):!0}function ph(){if(Ke!==null){if(nt===0)var n=Ke.return;else n=Ke,oi=mr=null,Ru(n),is=null,da=0,n=Ke;for(;n!==null;)Pp(n.alternate,n),n=n.return;Ke=null}}function hs(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,rC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ph(),ot=n,Ke=o=ri(n.current,null),Qe=i,nt=0,gn=null,zi=!1,os=rr(n,i),ch=!1,ls=kn=uh=br=Bi=gt=0,ln=wa=null,hh=!1,(i&8)!==0&&(i|=i&32);var p=n.entangledLanes;if(p!==0)for(n=n.entanglements,p&=i;0<p;){var C=31-Ie(p),E=1<<C;i|=n[C],p&=~E}return gi=i,zo(),o}function i0(n,i){$e=null,U.H=il,i===ra||i===$o?(i=bg(),nt=3):i===yg?(i=bg(),nt=4):nt=i===wp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,Ke===null&&(gt=1,ll(n,wn(i,n.current)))}function r0(){var n=U.H;return U.H=il,n===null?il:n}function s0(){var n=U.A;return U.A=zS,n}function yh(){gt=4,zi||(Qe&4194048)!==Qe&&Tn.current!==null||(os=!0),(Bi&134217727)===0&&(br&134217727)===0||ot===null||Hi(ot,Qe,kn,!1)}function vh(n,i,o){var p=tt;tt|=2;var C=r0(),E=s0();(ot!==n||Qe!==i)&&(gl=null,hs(n,i)),i=!1;var N=gt;e:do try{if(nt!==0&&Ke!==null){var H=Ke,ie=gn;switch(nt){case 8:ph(),N=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(i=!0);var me=nt;if(nt=0,gn=null,fs(n,H,ie,me),o&&os){N=0;break e}break;default:me=nt,nt=0,gn=null,fs(n,H,ie,me)}}US(),N=gt;break}catch(_e){i0(n,_e)}while(!0);return i&&n.shellSuspendCounter++,oi=mr=null,tt=p,U.H=C,U.A=E,Ke===null&&(ot=null,Qe=0,zo()),N}function US(){for(;Ke!==null;)a0(Ke)}function HS(n,i){var o=tt;tt|=2;var p=r0(),C=s0();ot!==n||Qe!==i?(gl=null,ml=he()+500,hs(n,i)):os=rr(n,i);e:do try{if(nt!==0&&Ke!==null){i=Ke;var E=gn;t:switch(nt){case 1:nt=0,gn=null,fs(n,i,E,1);break;case 2:case 9:if(vg(E)){nt=0,gn=null,o0(i);break}i=function(){nt!==2&&nt!==9||ot!==n||(nt=7),Gn(n)},E.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:vg(E)?(nt=0,gn=null,o0(i)):(nt=0,gn=null,fs(n,i,E,7));break;case 5:var N=null;switch(Ke.tag){case 26:N=Ke.memoizedState;case 5:case 27:var H=Ke;if(!N||H0(N)){nt=0,gn=null;var ie=H.sibling;if(ie!==null)Ke=ie;else{var me=H.return;me!==null?(Ke=me,yl(me)):Ke=null}break t}}nt=0,gn=null,fs(n,i,E,5);break;case 6:nt=0,gn=null,fs(n,i,E,6);break;case 8:ph(),gt=6;break e;default:throw Error(h(462))}}IS();break}catch(_e){i0(n,_e)}while(!0);return oi=mr=null,U.H=p,U.A=C,tt=o,Ke!==null?0:(ot=null,Qe=0,zo(),gt)}function IS(){for(;Ke!==null&&!ge();)a0(Ke)}function a0(n){var i=Rp(n.alternate,n,gi);n.memoizedProps=n.pendingProps,i===null?yl(n):Ke=i}function o0(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=Ep(o,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=Ep(o,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:Ru(i);default:Pp(o,i),i=Ke=lg(i,gi),i=Rp(o,i,gi)}n.memoizedProps=n.pendingProps,i===null?yl(n):Ke=i}function fs(n,i,o,p){oi=mr=null,Ru(i),is=null,da=0;var C=i.return;try{if(DS(n,C,i,o,Qe)){gt=1,ll(n,wn(o,n.current)),Ke=null;return}}catch(E){if(C!==null)throw Ke=C,E;gt=1,ll(n,wn(o,n.current)),Ke=null;return}i.flags&32768?(et||p===1?n=!0:os||(Qe&536870912)!==0?n=!1:(zi=n=!0,(p===2||p===9||p===3||p===6)&&(p=Tn.current,p!==null&&p.tag===13&&(p.flags|=16384))),l0(i,n)):yl(i)}function yl(n){var i=n;do{if((i.flags&32768)!==0){l0(i,zi);return}n=i.return;var o=NS(i.alternate,i,gi);if(o!==null){Ke=o;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=n}while(i!==null);gt===0&&(gt=5)}function l0(n,i){do{var o=PS(n.alternate,n);if(o!==null){o.flags&=32767,Ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=o}while(n!==null);gt=6,Ke=null}function c0(n,i,o,p,C,E,N,H,ie){n.cancelPendingCommit=null;do vl();while(Lt!==0);if((tt&6)!==0)throw Error(h(327));if(i!==null){if(i===n.current)throw Error(h(177));if(E=i.lanes|i.childLanes,E|=lu,ww(n,o,E,N,H,ie),n===ot&&(Ke=ot=null,Qe=0),cs=i,Ui=n,us=o,dh=E,mh=C,Jp=p,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$S(re,function(){return m0(),null})):(n.callbackNode=null,n.callbackPriority=0),p=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||p){p=U.T,U.T=null,C=q.p,q.p=2,N=tt,tt|=4;try{LS(n,i,o)}finally{tt=N,q.p=C,U.T=p}}Lt=1,u0(),h0(),f0()}}function u0(){if(Lt===1){Lt=0;var n=Ui,i=cs,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var p=q.p;q.p=2;var C=tt;tt|=4;try{Gp(i,n);var E=jh,N=Qm(n.containerInfo),H=E.focusedElem,ie=E.selectionRange;if(N!==H&&H&&H.ownerDocument&&Zm(H.ownerDocument.documentElement,H)){if(ie!==null&&iu(H)){var me=ie.start,_e=ie.end;if(_e===void 0&&(_e=me),"selectionStart"in H)H.selectionStart=me,H.selectionEnd=Math.min(_e,H.value.length);else{var ke=H.ownerDocument||document,pe=ke&&ke.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),Ue=H.textContent.length,Be=Math.min(ie.start,Ue),st=ie.end===void 0?Be:Math.min(ie.end,Ue);!ye.extend&&Be>st&&(N=st,st=Be,Be=N);var ce=Km(H,Be),ae=Km(H,st);if(ce&&ae&&(ye.rangeCount!==1||ye.anchorNode!==ce.node||ye.anchorOffset!==ce.offset||ye.focusNode!==ae.node||ye.focusOffset!==ae.offset)){var fe=ke.createRange();fe.setStart(ce.node,ce.offset),ye.removeAllRanges(),Be>st?(ye.addRange(fe),ye.extend(ae.node,ae.offset)):(fe.setEnd(ae.node,ae.offset),ye.addRange(fe))}}}}for(ke=[],ye=H;ye=ye.parentNode;)ye.nodeType===1&&ke.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<ke.length;H++){var Te=ke[H];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}jl=!!Mh,jh=Mh=null}finally{tt=C,q.p=p,U.T=o}}n.current=i,Lt=2}}function h0(){if(Lt===2){Lt=0;var n=Ui,i=cs,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var p=q.p;q.p=2;var C=tt;tt|=4;try{Hp(n,i.alternate,i)}finally{tt=C,q.p=p,U.T=o}}Lt=3}}function f0(){if(Lt===4||Lt===3){Lt=0,ve();var n=Ui,i=cs,o=us,p=Jp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Lt=5:(Lt=0,cs=Ui=null,d0(n,n.pendingLanes));var C=n.pendingLanes;if(C===0&&(Vi=null),Lc(o),i=i.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Me,i,void 0,(i.current.flags&128)===128)}catch{}if(p!==null){i=U.T,C=q.p,q.p=2,U.T=null;try{for(var E=n.onRecoverableError,N=0;N<p.length;N++){var H=p[N];E(H.value,{componentStack:H.stack})}}finally{U.T=i,q.p=C}}(us&3)!==0&&vl(),Gn(n),C=n.pendingLanes,(o&4194090)!==0&&(C&42)!==0?n===gh?Sa++:(Sa=0,gh=n):Sa=0,Ca(0)}}function d0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,na(i)))}function vl(n){return u0(),h0(),f0(),m0()}function m0(){if(Lt!==5)return!1;var n=Ui,i=dh;dh=0;var o=Lc(us),p=U.T,C=q.p;try{q.p=32>o?32:o,U.T=null,o=mh,mh=null;var E=Ui,N=us;if(Lt=0,cs=Ui=null,us=0,(tt&6)!==0)throw Error(h(331));var H=tt;if(tt|=4,Zp(E.current),Wp(E,E.current,N,o),tt=H,Ca(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Me,E)}catch{}return!0}finally{q.p=C,U.T=p,d0(n,i)}}function g0(n,i,o){i=wn(o,i),i=$u(n.stateNode,i,2),n=Ai(n,i,2),n!==null&&(Vs(n,2),Gn(n))}function at(n,i,o){if(n.tag===3)g0(n,n,o);else for(;i!==null;){if(i.tag===3){g0(i,n,o);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vi===null||!Vi.has(p))){n=wn(o,n),o=xp(2),p=Ai(i,o,2),p!==null&&(bp(o,p,i,n),Vs(p,2),Gn(p));break}}i=i.return}}function xh(n,i,o){var p=n.pingCache;if(p===null){p=n.pingCache=new BS;var C=new Set;p.set(i,C)}else C=p.get(i),C===void 0&&(C=new Set,p.set(i,C));C.has(o)||(ch=!0,C.add(o),n=YS.bind(null,n,i,o),i.then(n,n))}function YS(n,i,o){var p=n.pingCache;p!==null&&p.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ot===n&&(Qe&o)===o&&(gt===4||gt===3&&(Qe&62914560)===Qe&&300>he()-fh?(tt&2)===0&&hs(n,0):uh|=o,ls===Qe&&(ls=0)),Gn(n)}function p0(n,i){i===0&&(i=fm()),n=$r(n,i),n!==null&&(Vs(n,i),Gn(n))}function XS(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),p0(n,o)}function GS(n,i){var o=0;switch(n.tag){case 13:var p=n.stateNode,C=n.memoizedState;C!==null&&(o=C.retryLane);break;case 19:p=n.stateNode;break;case 22:p=n.stateNode._retryCache;break;default:throw Error(h(314))}p!==null&&p.delete(i),p0(n,o)}function $S(n,i){return ue(n,i)}var xl=null,ds=null,bh=!1,bl=!1,wh=!1,wr=0;function Gn(n){n!==ds&&n.next===null&&(ds===null?xl=ds=n:ds=ds.next=n),bl=!0,bh||(bh=!0,qS())}function Ca(n,i){if(!wh&&bl){wh=!0;do for(var o=!1,p=xl;p!==null;){if(n!==0){var C=p.pendingLanes;if(C===0)var E=0;else{var N=p.suspendedLanes,H=p.pingedLanes;E=(1<<31-Ie(42|n)+1)-1,E&=C&~(N&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(o=!0,b0(p,E))}else E=Qe,E=ti(p,p===ot?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||rr(p,E)||(o=!0,b0(p,E));p=p.next}while(o);wh=!1}}function WS(){y0()}function y0(){bl=bh=!1;var n=0;wr!==0&&(iC()&&(n=wr),wr=0);for(var i=he(),o=null,p=xl;p!==null;){var C=p.next,E=v0(p,i);E===0?(p.next=null,o===null?xl=C:o.next=C,C===null&&(ds=o)):(o=p,(n!==0||(E&3)!==0)&&(bl=!0)),p=C}Ca(n)}function v0(n,i){for(var o=n.suspendedLanes,p=n.pingedLanes,C=n.expirationTimes,E=n.pendingLanes&-62914561;0<E;){var N=31-Ie(E),H=1<<N,ie=C[N];ie===-1?((H&o)===0||(H&p)!==0)&&(C[N]=ko(H,i)):ie<=i&&(n.expiredLanes|=H),E&=~H}if(i=ot,o=Qe,o=ti(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),p=n.callbackNode,o===0||n===i&&(nt===2||nt===9)||n.cancelPendingCommit!==null)return p!==null&&p!==null&&oe(p),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||rr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(p!==null&&oe(p),Lc(o)){case 2:case 8:o=G;break;case 32:o=re;break;case 268435456:o=xe;break;default:o=re}return p=x0.bind(null,n),o=ue(o,p),n.callbackPriority=i,n.callbackNode=o,i}return p!==null&&p!==null&&oe(p),n.callbackPriority=2,n.callbackNode=null,2}function x0(n,i){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(vl()&&n.callbackNode!==o)return null;var p=Qe;return p=ti(n,n===ot?p:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),p===0?null:(t0(n,p,i),v0(n,he()),n.callbackNode!=null&&n.callbackNode===o?x0.bind(null,n):null)}function b0(n,i){if(vl())return null;t0(n,i,!0)}function qS(){sC(function(){(tt&6)!==0?ue(Ee,WS):y0()})}function Sh(){return wr===0&&(wr=hm()),wr}function w0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ao(""+n)}function S0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function KS(n,i,o,p,C){if(i==="submit"&&o&&o.stateNode===C){var E=w0((C[rn]||null).action),N=p.submitter;N&&(i=(i=N[rn]||null)?w0(i.formAction):N.getAttribute("formAction"),i!==null&&(E=i,N=null));var H=new Po("action","action",null,p,C);n.push({event:H,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(wr!==0){var ie=N?S0(C,N):new FormData(C);Hu(o,{pending:!0,data:ie,method:C.method,action:E},null,ie)}}else typeof E=="function"&&(H.preventDefault(),ie=N?S0(C,N):new FormData(C),Hu(o,{pending:!0,data:ie,method:C.method,action:E},E,ie))},currentTarget:C}]})}}for(var Ch=0;Ch<ou.length;Ch++){var _h=ou[Ch],ZS=_h.toLowerCase(),QS=_h[0].toUpperCase()+_h.slice(1);Nn(ZS,"on"+QS)}Nn(tg,"onAnimationEnd"),Nn(ng,"onAnimationIteration"),Nn(ig,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(gS,"onTransitionRun"),Nn(pS,"onTransitionStart"),Nn(yS,"onTransitionCancel"),Nn(rg,"onTransitionEnd"),Fr("onMouseEnter",["mouseout","mouseover"]),Fr("onMouseLeave",["mouseout","mouseover"]),Fr("onPointerEnter",["pointerout","pointerover"]),Fr("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_a));function C0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var p=n[o],C=p.event;p=p.listeners;e:{var E=void 0;if(i)for(var N=p.length-1;0<=N;N--){var H=p[N],ie=H.instance,me=H.currentTarget;if(H=H.listener,ie!==E&&C.isPropagationStopped())break e;E=H,C.currentTarget=me;try{E(C)}catch(_e){ol(_e)}C.currentTarget=null,E=ie}else for(N=0;N<p.length;N++){if(H=p[N],ie=H.instance,me=H.currentTarget,H=H.listener,ie!==E&&C.isPropagationStopped())break e;E=H,C.currentTarget=me;try{E(C)}catch(_e){ol(_e)}C.currentTarget=null,E=ie}}}}function Ze(n,i){var o=i[Fc];o===void 0&&(o=i[Fc]=new Set);var p=n+"__bubble";o.has(p)||(_0(i,n,2,!1),o.add(p))}function Th(n,i,o){var p=0;i&&(p|=4),_0(o,n,p,i)}var wl="_reactListening"+Math.random().toString(36).slice(2);function kh(n){if(!n[wl]){n[wl]=!0,ym.forEach(function(o){o!=="selectionchange"&&(JS.has(o)||Th(o,!1,n),Th(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[wl]||(i[wl]=!0,Th("selectionchange",!1,i))}}function _0(n,i,o,p){switch(W0(i)){case 2:var C=kC;break;case 8:C=EC;break;default:C=Vh}o=C.bind(null,i,o,n),C=void 0,!Wc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(C=!0),p?C!==void 0?n.addEventListener(i,o,{capture:!0,passive:C}):n.addEventListener(i,o,!0):C!==void 0?n.addEventListener(i,o,{passive:C}):n.addEventListener(i,o,!1)}function Eh(n,i,o,p,C){var E=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var N=p.tag;if(N===3||N===4){var H=p.stateNode.containerInfo;if(H===C)break;if(N===4)for(N=p.return;N!==null;){var ie=N.tag;if((ie===3||ie===4)&&N.stateNode.containerInfo===C)return;N=N.return}for(;H!==null;){if(N=Nr(H),N===null)return;if(ie=N.tag,ie===5||ie===6||ie===26||ie===27){p=E=N;continue e}H=H.parentNode}}p=p.return}Am(function(){var me=E,_e=Gc(o),ke=[];e:{var pe=sg.get(n);if(pe!==void 0){var ye=Po,Ue=n;switch(n){case"keypress":if(Ro(o)===0)break e;case"keydown":case"keyup":ye=$w;break;case"focusin":Ue="focus",ye=Qc;break;case"focusout":Ue="blur",ye=Qc;break;case"beforeblur":case"afterblur":ye=Qc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Kw;break;case tg:case ng:case ig:ye=zw;break;case rg:ye=Qw;break;case"scroll":case"scrollend":ye=Rw;break;case"wheel":ye=eS;break;case"copy":case"cut":case"paste":ye=Vw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Lm;break;case"toggle":case"beforetoggle":ye=nS}var Be=(i&4)!==0,st=!Be&&(n==="scroll"||n==="scrollend"),ce=Be?pe!==null?pe+"Capture":null:pe;Be=[];for(var ae=me,fe;ae!==null;){var Te=ae;if(fe=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||fe===null||ce===null||(Te=Is(ae,ce),Te!=null&&Be.push(Ta(ae,Te,fe))),st)break;ae=ae.return}0<Be.length&&(pe=new ye(pe,Ue,null,o,_e),ke.push({event:pe,listeners:Be}))}}if((i&7)===0){e:{if(pe=n==="mouseover"||n==="pointerover",ye=n==="mouseout"||n==="pointerout",pe&&o!==Xc&&(Ue=o.relatedTarget||o.fromElement)&&(Nr(Ue)||Ue[Rr]))break e;if((ye||pe)&&(pe=_e.window===_e?_e:(pe=_e.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(Ue=o.relatedTarget||o.toElement,ye=me,Ue=Ue?Nr(Ue):null,Ue!==null&&(st=x(Ue),Be=Ue.tag,Ue!==st||Be!==5&&Be!==27&&Be!==6)&&(Ue=null)):(ye=null,Ue=me),ye!==Ue)){if(Be=Nm,Te="onMouseLeave",ce="onMouseEnter",ae="mouse",(n==="pointerout"||n==="pointerover")&&(Be=Lm,Te="onPointerLeave",ce="onPointerEnter",ae="pointer"),st=ye==null?pe:Hs(ye),fe=Ue==null?pe:Hs(Ue),pe=new Be(Te,ae+"leave",ye,o,_e),pe.target=st,pe.relatedTarget=fe,Te=null,Nr(_e)===me&&(Be=new Be(ce,ae+"enter",Ue,o,_e),Be.target=fe,Be.relatedTarget=st,Te=Be),st=Te,ye&&Ue)t:{for(Be=ye,ce=Ue,ae=0,fe=Be;fe;fe=ms(fe))ae++;for(fe=0,Te=ce;Te;Te=ms(Te))fe++;for(;0<ae-fe;)Be=ms(Be),ae--;for(;0<fe-ae;)ce=ms(ce),fe--;for(;ae--;){if(Be===ce||ce!==null&&Be===ce.alternate)break t;Be=ms(Be),ce=ms(ce)}Be=null}else Be=null;ye!==null&&T0(ke,pe,ye,Be,!1),Ue!==null&&st!==null&&T0(ke,st,Ue,Be,!0)}}e:{if(pe=me?Hs(me):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var Re=Ym;else if(Hm(pe))if(Xm)Re=fS;else{Re=uS;var qe=cS}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?me&&Yc(me.elementType)&&(Re=Ym):Re=hS;if(Re&&(Re=Re(n,me))){Im(ke,Re,o,_e);break e}qe&&qe(n,pe,me),n==="focusout"&&me&&pe.type==="number"&&me.memoizedProps.value!=null&&Ic(pe,"number",pe.value)}switch(qe=me?Hs(me):window,n){case"focusin":(Hm(qe)||qe.contentEditable==="true")&&(Yr=qe,ru=me,Zs=null);break;case"focusout":Zs=ru=Yr=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,Jm(ke,o,_e);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":Jm(ke,o,_e)}var Fe;if(eu)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ir?Vm(n,o)&&(Ve="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ve="onCompositionStart");Ve&&(Fm&&o.locale!=="ko"&&(Ir||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ir&&(Fe=Dm()):(Ei=_e,qc="value"in Ei?Ei.value:Ei.textContent,Ir=!0)),qe=Sl(me,Ve),0<qe.length&&(Ve=new Pm(Ve,n,null,o,_e),ke.push({event:Ve,listeners:qe}),Fe?Ve.data=Fe:(Fe=Um(o),Fe!==null&&(Ve.data=Fe)))),(Fe=rS?sS(n,o):aS(n,o))&&(Ve=Sl(me,"onBeforeInput"),0<Ve.length&&(qe=new Pm("onBeforeInput","beforeinput",null,o,_e),ke.push({event:qe,listeners:Ve}),qe.data=Fe)),KS(ke,n,me,o,_e)}C0(ke,i)})}function Ta(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Sl(n,i){for(var o=i+"Capture",p=[];n!==null;){var C=n,E=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||E===null||(C=Is(n,o),C!=null&&p.unshift(Ta(n,C,E)),C=Is(n,i),C!=null&&p.push(Ta(n,C,E))),n.tag===3)return p;n=n.return}return[]}function ms(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function T0(n,i,o,p,C){for(var E=i._reactName,N=[];o!==null&&o!==p;){var H=o,ie=H.alternate,me=H.stateNode;if(H=H.tag,ie!==null&&ie===p)break;H!==5&&H!==26&&H!==27||me===null||(ie=me,C?(me=Is(o,E),me!=null&&N.unshift(Ta(o,me,ie))):C||(me=Is(o,E),me!=null&&N.push(Ta(o,me,ie)))),o=o.return}N.length!==0&&n.push({event:i,listeners:N})}var eC=/\r\n?/g,tC=/\u0000|\uFFFD/g;function k0(n){return(typeof n=="string"?n:""+n).replace(eC,`
`).replace(tC,"")}function E0(n,i){return i=k0(i),k0(n)===i}function Cl(){}function rt(n,i,o,p,C,E){switch(o){case"children":typeof p=="string"?i==="body"||i==="textarea"&&p===""||Vr(n,p):(typeof p=="number"||typeof p=="bigint")&&i!=="body"&&Vr(n,""+p);break;case"className":Oo(n,"class",p);break;case"tabIndex":Oo(n,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Oo(n,o,p);break;case"style":Mm(n,p,E);break;case"data":if(i!=="object"){Oo(n,"data",p);break}case"src":case"href":if(p===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){n.removeAttribute(o);break}p=Ao(""+p),n.setAttribute(o,p);break;case"action":case"formAction":if(typeof p=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(o==="formAction"?(i!=="input"&&rt(n,i,"name",C.name,C,null),rt(n,i,"formEncType",C.formEncType,C,null),rt(n,i,"formMethod",C.formMethod,C,null),rt(n,i,"formTarget",C.formTarget,C,null)):(rt(n,i,"encType",C.encType,C,null),rt(n,i,"method",C.method,C,null),rt(n,i,"target",C.target,C,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){n.removeAttribute(o);break}p=Ao(""+p),n.setAttribute(o,p);break;case"onClick":p!=null&&(n.onclick=Cl);break;case"onScroll":p!=null&&Ze("scroll",n);break;case"onScrollEnd":p!=null&&Ze("scrollend",n);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(h(61));if(o=p.__html,o!=null){if(C.children!=null)throw Error(h(60));n.innerHTML=o}}break;case"multiple":n.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":n.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){n.removeAttribute("xlink:href");break}o=Ao(""+p),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?n.setAttribute(o,""+p):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":p===!0?n.setAttribute(o,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?n.setAttribute(o,p):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?n.setAttribute(o,p):n.removeAttribute(o);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?n.removeAttribute(o):n.setAttribute(o,p);break;case"popover":Ze("beforetoggle",n),Ze("toggle",n),Eo(n,"popover",p);break;case"xlinkActuate":ni(n,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ni(n,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ni(n,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ni(n,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ni(n,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ni(n,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ni(n,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ni(n,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ni(n,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Eo(n,"is",p);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Aw.get(o)||o,Eo(n,o,p))}}function Oh(n,i,o,p,C,E){switch(o){case"style":Mm(n,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(h(61));if(o=p.__html,o!=null){if(C.children!=null)throw Error(h(60));n.innerHTML=o}}break;case"children":typeof p=="string"?Vr(n,p):(typeof p=="number"||typeof p=="bigint")&&Vr(n,""+p);break;case"onScroll":p!=null&&Ze("scroll",n);break;case"onScrollEnd":p!=null&&Ze("scrollend",n);break;case"onClick":p!=null&&(n.onclick=Cl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vm.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(C=o.endsWith("Capture"),i=o.slice(2,C?o.length-7:void 0),E=n[rn]||null,E=E!=null?E[o]:null,typeof E=="function"&&n.removeEventListener(i,E,C),typeof p=="function")){typeof E!="function"&&E!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,p,C);break e}o in n?n[o]=p:p===!0?n.setAttribute(o,""):Eo(n,o,p)}}}function Ft(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",n),Ze("load",n);var p=!1,C=!1,E;for(E in o)if(o.hasOwnProperty(E)){var N=o[E];if(N!=null)switch(E){case"src":p=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(h(137,i));default:rt(n,i,E,N,o,null)}}C&&rt(n,i,"srcSet",o.srcSet,o,null),p&&rt(n,i,"src",o.src,o,null);return;case"input":Ze("invalid",n);var H=E=N=C=null,ie=null,me=null;for(p in o)if(o.hasOwnProperty(p)){var _e=o[p];if(_e!=null)switch(p){case"name":C=_e;break;case"type":N=_e;break;case"checked":ie=_e;break;case"defaultChecked":me=_e;break;case"value":E=_e;break;case"defaultValue":H=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(h(137,i));break;default:rt(n,i,p,_e,o,null)}}Tm(n,E,H,ie,me,N,C,!1),Mo(n);return;case"select":Ze("invalid",n),p=N=E=null;for(C in o)if(o.hasOwnProperty(C)&&(H=o[C],H!=null))switch(C){case"value":E=H;break;case"defaultValue":N=H;break;case"multiple":p=H;default:rt(n,i,C,H,o,null)}i=E,o=N,n.multiple=!!p,i!=null?Br(n,!!p,i,!1):o!=null&&Br(n,!!p,o,!0);return;case"textarea":Ze("invalid",n),E=C=p=null;for(N in o)if(o.hasOwnProperty(N)&&(H=o[N],H!=null))switch(N){case"value":p=H;break;case"defaultValue":C=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(h(91));break;default:rt(n,i,N,H,o,null)}Em(n,p,C,E),Mo(n);return;case"option":for(ie in o)if(o.hasOwnProperty(ie)&&(p=o[ie],p!=null))switch(ie){case"selected":n.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:rt(n,i,ie,p,o,null)}return;case"dialog":Ze("beforetoggle",n),Ze("toggle",n),Ze("cancel",n),Ze("close",n);break;case"iframe":case"object":Ze("load",n);break;case"video":case"audio":for(p=0;p<_a.length;p++)Ze(_a[p],n);break;case"image":Ze("error",n),Ze("load",n);break;case"details":Ze("toggle",n);break;case"embed":case"source":case"link":Ze("error",n),Ze("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in o)if(o.hasOwnProperty(me)&&(p=o[me],p!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(h(137,i));default:rt(n,i,me,p,o,null)}return;default:if(Yc(i)){for(_e in o)o.hasOwnProperty(_e)&&(p=o[_e],p!==void 0&&Oh(n,i,_e,p,o,void 0));return}}for(H in o)o.hasOwnProperty(H)&&(p=o[H],p!=null&&rt(n,i,H,p,o,null))}function nC(n,i,o,p){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,E=null,N=null,H=null,ie=null,me=null,_e=null;for(ye in o){var ke=o[ye];if(o.hasOwnProperty(ye)&&ke!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":ie=ke;default:p.hasOwnProperty(ye)||rt(n,i,ye,null,p,ke)}}for(var pe in p){var ye=p[pe];if(ke=o[pe],p.hasOwnProperty(pe)&&(ye!=null||ke!=null))switch(pe){case"type":E=ye;break;case"name":C=ye;break;case"checked":me=ye;break;case"defaultChecked":_e=ye;break;case"value":N=ye;break;case"defaultValue":H=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(h(137,i));break;default:ye!==ke&&rt(n,i,pe,ye,p,ke)}}Hc(n,N,H,ie,me,_e,E,C);return;case"select":ye=N=H=pe=null;for(E in o)if(ie=o[E],o.hasOwnProperty(E)&&ie!=null)switch(E){case"value":break;case"multiple":ye=ie;default:p.hasOwnProperty(E)||rt(n,i,E,null,p,ie)}for(C in p)if(E=p[C],ie=o[C],p.hasOwnProperty(C)&&(E!=null||ie!=null))switch(C){case"value":pe=E;break;case"defaultValue":H=E;break;case"multiple":N=E;default:E!==ie&&rt(n,i,C,E,p,ie)}i=H,o=N,p=ye,pe!=null?Br(n,!!o,pe,!1):!!p!=!!o&&(i!=null?Br(n,!!o,i,!0):Br(n,!!o,o?[]:"",!1));return;case"textarea":ye=pe=null;for(H in o)if(C=o[H],o.hasOwnProperty(H)&&C!=null&&!p.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:rt(n,i,H,null,p,C)}for(N in p)if(C=p[N],E=o[N],p.hasOwnProperty(N)&&(C!=null||E!=null))switch(N){case"value":pe=C;break;case"defaultValue":ye=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(h(91));break;default:C!==E&&rt(n,i,N,C,p,E)}km(n,pe,ye);return;case"option":for(var Ue in o)if(pe=o[Ue],o.hasOwnProperty(Ue)&&pe!=null&&!p.hasOwnProperty(Ue))switch(Ue){case"selected":n.selected=!1;break;default:rt(n,i,Ue,null,p,pe)}for(ie in p)if(pe=p[ie],ye=o[ie],p.hasOwnProperty(ie)&&pe!==ye&&(pe!=null||ye!=null))switch(ie){case"selected":n.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:rt(n,i,ie,pe,p,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in o)pe=o[Be],o.hasOwnProperty(Be)&&pe!=null&&!p.hasOwnProperty(Be)&&rt(n,i,Be,null,p,pe);for(me in p)if(pe=p[me],ye=o[me],p.hasOwnProperty(me)&&pe!==ye&&(pe!=null||ye!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(h(137,i));break;default:rt(n,i,me,pe,p,ye)}return;default:if(Yc(i)){for(var st in o)pe=o[st],o.hasOwnProperty(st)&&pe!==void 0&&!p.hasOwnProperty(st)&&Oh(n,i,st,void 0,p,pe);for(_e in p)pe=p[_e],ye=o[_e],!p.hasOwnProperty(_e)||pe===ye||pe===void 0&&ye===void 0||Oh(n,i,_e,pe,p,ye);return}}for(var ce in o)pe=o[ce],o.hasOwnProperty(ce)&&pe!=null&&!p.hasOwnProperty(ce)&&rt(n,i,ce,null,p,pe);for(ke in p)pe=p[ke],ye=o[ke],!p.hasOwnProperty(ke)||pe===ye||pe==null&&ye==null||rt(n,i,ke,pe,p,ye)}var Mh=null,jh=null;function _l(n){return n.nodeType===9?n:n.ownerDocument}function O0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Ah(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Dh=null;function iC(){var n=window.event;return n&&n.type==="popstate"?n===Dh?!1:(Dh=n,!0):(Dh=null,!1)}var j0=typeof setTimeout=="function"?setTimeout:void 0,rC=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,sC=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(n){return A0.resolve(null).then(n).catch(aC)}:j0;function aC(n){setTimeout(function(){throw n})}function Ii(n){return n==="head"}function D0(n,i){var o=i,p=0,C=0;do{var E=o.nextSibling;if(n.removeChild(o),E&&E.nodeType===8)if(o=E.data,o==="/$"){if(0<p&&8>p){o=p;var N=n.ownerDocument;if(o&1&&ka(N.documentElement),o&2&&ka(N.body),o&4)for(o=N.head,ka(o),N=o.firstChild;N;){var H=N.nextSibling,ie=N.nodeName;N[Us]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&N.rel.toLowerCase()==="stylesheet"||o.removeChild(N),N=H}}if(C===0){n.removeChild(E),Na(i);return}C--}else o==="$"||o==="$?"||o==="$!"?C++:p=o.charCodeAt(0)-48;else p=0;o=E}while(o);Na(i)}function Rh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rh(o),zc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function oC(n,i,o,p){for(;n.nodeType===1;){var C=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!p&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(p){if(!n[Us])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(E=n.getAttribute("rel"),E==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(E!==C.rel||n.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||n.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||n.getAttribute("title")!==(C.title==null?null:C.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(E=n.getAttribute("src"),(E!==(C.src==null?null:C.src)||n.getAttribute("type")!==(C.type==null?null:C.type)||n.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&E&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var E=C.name==null?null:""+C.name;if(C.type==="hidden"&&n.getAttribute("name")===E)return n}else return n;if(n=Ln(n.nextSibling),n===null)break}return null}function lC(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Ln(n.nextSibling),n===null))return null;return n}function Nh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function cC(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var p=function(){i(),o.removeEventListener("DOMContentLoaded",p)};o.addEventListener("DOMContentLoaded",p),n._reactRetry=p}}function Ln(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Ph=null;function R0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function N0(n,i,o){switch(i=_l(o),n){case"html":if(n=i.documentElement,!n)throw Error(h(452));return n;case"head":if(n=i.head,!n)throw Error(h(453));return n;case"body":if(n=i.body,!n)throw Error(h(454));return n;default:throw Error(h(451))}}function ka(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);zc(n)}var En=new Map,P0=new Set;function Tl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var pi=q.d;q.d={f:uC,r:hC,D:fC,C:dC,L:mC,m:gC,X:yC,S:pC,M:vC};function uC(){var n=pi.f(),i=pl();return n||i}function hC(n){var i=Pr(n);i!==null&&i.tag===5&&i.type==="form"?tp(i):pi.r(n)}var gs=typeof document>"u"?null:document;function L0(n,i,o){var p=gs;if(p&&typeof i=="string"&&i){var C=bn(i);C='link[rel="'+n+'"][href="'+C+'"]',typeof o=="string"&&(C+='[crossorigin="'+o+'"]'),P0.has(C)||(P0.add(C),n={rel:n,crossOrigin:o,href:i},p.querySelector(C)===null&&(i=p.createElement("link"),Ft(i,"link",n),At(i),p.head.appendChild(i)))}}function fC(n){pi.D(n),L0("dns-prefetch",n,null)}function dC(n,i){pi.C(n,i),L0("preconnect",n,i)}function mC(n,i,o){pi.L(n,i,o);var p=gs;if(p&&n&&i){var C='link[rel="preload"][as="'+bn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(C+='[imagesrcset="'+bn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(C+='[imagesizes="'+bn(o.imageSizes)+'"]')):C+='[href="'+bn(n)+'"]';var E=C;switch(i){case"style":E=ps(n);break;case"script":E=ys(n)}En.has(E)||(n=d({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),En.set(E,n),p.querySelector(C)!==null||i==="style"&&p.querySelector(Ea(E))||i==="script"&&p.querySelector(Oa(E))||(i=p.createElement("link"),Ft(i,"link",n),At(i),p.head.appendChild(i)))}}function gC(n,i){pi.m(n,i);var o=gs;if(o&&n){var p=i&&typeof i.as=="string"?i.as:"script",C='link[rel="modulepreload"][as="'+bn(p)+'"][href="'+bn(n)+'"]',E=C;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=ys(n)}if(!En.has(E)&&(n=d({rel:"modulepreload",href:n},i),En.set(E,n),o.querySelector(C)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oa(E)))return}p=o.createElement("link"),Ft(p,"link",n),At(p),o.head.appendChild(p)}}}function pC(n,i,o){pi.S(n,i,o);var p=gs;if(p&&n){var C=Lr(p).hoistableStyles,E=ps(n);i=i||"default";var N=C.get(E);if(!N){var H={loading:0,preload:null};if(N=p.querySelector(Ea(E)))H.loading=5;else{n=d({rel:"stylesheet",href:n,"data-precedence":i},o),(o=En.get(E))&&Lh(n,o);var ie=N=p.createElement("link");At(ie),Ft(ie,"link",n),ie._p=new Promise(function(me,_e){ie.onload=me,ie.onerror=_e}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,kl(N,i,p)}N={type:"stylesheet",instance:N,count:1,state:H},C.set(E,N)}}}function yC(n,i){pi.X(n,i);var o=gs;if(o&&n){var p=Lr(o).hoistableScripts,C=ys(n),E=p.get(C);E||(E=o.querySelector(Oa(C)),E||(n=d({src:n,async:!0},i),(i=En.get(C))&&Fh(n,i),E=o.createElement("script"),At(E),Ft(E,"link",n),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(C,E))}}function vC(n,i){pi.M(n,i);var o=gs;if(o&&n){var p=Lr(o).hoistableScripts,C=ys(n),E=p.get(C);E||(E=o.querySelector(Oa(C)),E||(n=d({src:n,async:!0,type:"module"},i),(i=En.get(C))&&Fh(n,i),E=o.createElement("script"),At(E),Ft(E,"link",n),o.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(C,E))}}function F0(n,i,o,p){var C=(C=W.current)?Tl(C):null;if(!C)throw Error(h(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=ps(o.href),o=Lr(C).hoistableStyles,p=o.get(i),p||(p={type:"style",instance:null,count:0,state:null},o.set(i,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ps(o.href);var E=Lr(C).hoistableStyles,N=E.get(n);if(N||(C=C.ownerDocument||C,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(n,N),(E=C.querySelector(Ea(n)))&&!E._p&&(N.instance=E,N.state.loading=5),En.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},En.set(n,o),E||xC(C,n,o,N.state))),i&&p===null)throw Error(h(528,""));return N}if(i&&p!==null)throw Error(h(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ys(o),o=Lr(C).hoistableScripts,p=o.get(i),p||(p={type:"script",instance:null,count:0,state:null},o.set(i,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(h(444,n))}}function ps(n){return'href="'+bn(n)+'"'}function Ea(n){return'link[rel="stylesheet"]['+n+"]"}function z0(n){return d({},n,{"data-precedence":n.precedence,precedence:null})}function xC(n,i,o,p){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?p.loading=1:(i=n.createElement("link"),p.preload=i,i.addEventListener("load",function(){return p.loading|=1}),i.addEventListener("error",function(){return p.loading|=2}),Ft(i,"link",o),At(i),n.head.appendChild(i))}function ys(n){return'[src="'+bn(n)+'"]'}function Oa(n){return"script[async]"+n}function B0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var p=n.querySelector('style[data-href~="'+bn(o.href)+'"]');if(p)return i.instance=p,At(p),p;var C=d({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return p=(n.ownerDocument||n).createElement("style"),At(p),Ft(p,"style",C),kl(p,o.precedence,n),i.instance=p;case"stylesheet":C=ps(o.href);var E=n.querySelector(Ea(C));if(E)return i.state.loading|=4,i.instance=E,At(E),E;p=z0(o),(C=En.get(C))&&Lh(p,C),E=(n.ownerDocument||n).createElement("link"),At(E);var N=E;return N._p=new Promise(function(H,ie){N.onload=H,N.onerror=ie}),Ft(E,"link",p),i.state.loading|=4,kl(E,o.precedence,n),i.instance=E;case"script":return E=ys(o.src),(C=n.querySelector(Oa(E)))?(i.instance=C,At(C),C):(p=o,(C=En.get(E))&&(p=d({},o),Fh(p,C)),n=n.ownerDocument||n,C=n.createElement("script"),At(C),Ft(C,"link",p),n.head.appendChild(C),i.instance=C);case"void":return null;default:throw Error(h(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(p=i.instance,i.state.loading|=4,kl(p,o.precedence,n));return i.instance}function kl(n,i,o){for(var p=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=p.length?p[p.length-1]:null,E=C,N=0;N<p.length;N++){var H=p[N];if(H.dataset.precedence===i)E=H;else if(E!==C)break}E?E.parentNode.insertBefore(n,E.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Lh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Fh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var El=null;function V0(n,i,o){if(El===null){var p=new Map,C=El=new Map;C.set(o,p)}else C=El,p=C.get(o),p||(p=new Map,C.set(o,p));if(p.has(n))return p;for(p.set(n,null),o=o.getElementsByTagName(n),C=0;C<o.length;C++){var E=o[C];if(!(E[Us]||E[Ht]||n==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var N=E.getAttribute(i)||"";N=n+N;var H=p.get(N);H?H.push(E):p.set(N,[E])}}return p}function U0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function bC(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ma=null;function wC(){}function SC(n,i,o){if(Ma===null)throw Error(h(475));var p=Ma;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var C=ps(o.href),E=n.querySelector(Ea(C));if(E){n=E._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(p.count++,p=Ol.bind(p),n.then(p,p)),i.state.loading|=4,i.instance=E,At(E);return}E=n.ownerDocument||n,o=z0(o),(C=En.get(C))&&Lh(o,C),E=E.createElement("link"),At(E);var N=E;N._p=new Promise(function(H,ie){N.onload=H,N.onerror=ie}),Ft(E,"link",o),i.instance=E}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(p.count++,i=Ol.bind(p),n.addEventListener("load",i),n.addEventListener("error",i))}}function CC(){if(Ma===null)throw Error(h(475));var n=Ma;return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Ol(){if(this.count--,this.count===0){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ml=null;function zh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ml=new Map,i.forEach(_C,n),Ml=null,Ol.call(n))}function _C(n,i){if(!(i.state.loading&4)){var o=Ml.get(n);if(o)var p=o.get(null);else{o=new Map,Ml.set(n,o);for(var C=n.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<C.length;E++){var N=C[E];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(o.set(N.dataset.precedence,N),p=N)}p&&o.set(null,p)}C=i.instance,N=C.getAttribute("data-precedence"),E=o.get(N)||p,E===p&&o.set(null,C),o.set(N,C),this.count++,p=Ol.bind(this),C.addEventListener("load",p),C.addEventListener("error",p),E?E.parentNode.insertBefore(C,E.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(C,n.firstChild)),i.state.loading|=4}}var ja={$$typeof:T,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function TC(n,i,o,p,C,E,N,H){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nc(0),this.hiddenUpdates=Nc(null),this.identifierPrefix=p,this.onUncaughtError=C,this.onCaughtError=E,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function I0(n,i,o,p,C,E,N,H,ie,me,_e,ke){return n=new TC(n,i,o,N,H,ie,me,ke),i=1,E===!0&&(i|=24),E=fn(3,null,null,i),n.current=E,E.stateNode=n,i=xu(),i.refCount++,n.pooledCache=i,i.refCount++,E.memoizedState={element:p,isDehydrated:o,cache:i},Cu(E),n}function Y0(n){return n?(n=Wr,n):Wr}function X0(n,i,o,p,C,E){C=Y0(C),p.context===null?p.context=C:p.pendingContext=C,p=ji(i),p.payload={element:o},E=E===void 0?null:E,E!==null&&(p.callback=E),o=Ai(n,p,i),o!==null&&(yn(o,n,i),aa(o,n,i))}function G0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Bh(n,i){G0(n,i),(n=n.alternate)&&G0(n,i)}function $0(n){if(n.tag===13){var i=$r(n,67108864);i!==null&&yn(i,n,67108864),Bh(n,67108864)}}var jl=!0;function kC(n,i,o,p){var C=U.T;U.T=null;var E=q.p;try{q.p=2,Vh(n,i,o,p)}finally{q.p=E,U.T=C}}function EC(n,i,o,p){var C=U.T;U.T=null;var E=q.p;try{q.p=8,Vh(n,i,o,p)}finally{q.p=E,U.T=C}}function Vh(n,i,o,p){if(jl){var C=Uh(p);if(C===null)Eh(n,i,p,Al,o),q0(n,p);else if(MC(C,n,i,o,p))p.stopPropagation();else if(q0(n,p),i&4&&-1<OC.indexOf(n)){for(;C!==null;){var E=Pr(C);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var N=Rn(E.pendingLanes);if(N!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;N;){var ie=1<<31-Ie(N);H.entanglements[1]|=ie,N&=~ie}Gn(E),(tt&6)===0&&(ml=he()+500,Ca(0))}}break;case 13:H=$r(E,2),H!==null&&yn(H,E,2),pl(),Bh(E,2)}if(E=Uh(p),E===null&&Eh(n,i,p,Al,o),E===C)break;C=E}C!==null&&p.stopPropagation()}else Eh(n,i,p,null,o)}}function Uh(n){return n=Gc(n),Hh(n)}var Al=null;function Hh(n){if(Al=null,n=Nr(n),n!==null){var i=x(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=S(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Al=n,null}function W0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(be()){case Ee:return 2;case G:return 8;case re:case J:return 32;case xe:return 268435456;default:return 32}default:return 32}}var Ih=!1,Yi=null,Xi=null,Gi=null,Aa=new Map,Da=new Map,$i=[],OC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q0(n,i){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Aa.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(i.pointerId)}}function Ra(n,i,o,p,C,E){return n===null||n.nativeEvent!==E?(n={blockedOn:i,domEventName:o,eventSystemFlags:p,nativeEvent:E,targetContainers:[C]},i!==null&&(i=Pr(i),i!==null&&$0(i)),n):(n.eventSystemFlags|=p,i=n.targetContainers,C!==null&&i.indexOf(C)===-1&&i.push(C),n)}function MC(n,i,o,p,C){switch(i){case"focusin":return Yi=Ra(Yi,n,i,o,p,C),!0;case"dragenter":return Xi=Ra(Xi,n,i,o,p,C),!0;case"mouseover":return Gi=Ra(Gi,n,i,o,p,C),!0;case"pointerover":var E=C.pointerId;return Aa.set(E,Ra(Aa.get(E)||null,n,i,o,p,C)),!0;case"gotpointercapture":return E=C.pointerId,Da.set(E,Ra(Da.get(E)||null,n,i,o,p,C)),!0}return!1}function K0(n){var i=Nr(n.target);if(i!==null){var o=x(i);if(o!==null){if(i=o.tag,i===13){if(i=S(o),i!==null){n.blockedOn=i,Sw(n.priority,function(){if(o.tag===13){var p=pn();p=Pc(p);var C=$r(o,p);C!==null&&yn(C,o,p),Bh(o,p)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Uh(n.nativeEvent);if(o===null){o=n.nativeEvent;var p=new o.constructor(o.type,o);Xc=p,o.target.dispatchEvent(p),Xc=null}else return i=Pr(o),i!==null&&$0(i),n.blockedOn=o,!1;i.shift()}return!0}function Z0(n,i,o){Dl(n)&&o.delete(i)}function jC(){Ih=!1,Yi!==null&&Dl(Yi)&&(Yi=null),Xi!==null&&Dl(Xi)&&(Xi=null),Gi!==null&&Dl(Gi)&&(Gi=null),Aa.forEach(Z0),Da.forEach(Z0)}function Rl(n,i){n.blockedOn===i&&(n.blockedOn=null,Ih||(Ih=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jC)))}var Nl=null;function Q0(n){Nl!==n&&(Nl=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nl===n&&(Nl=null);for(var i=0;i<n.length;i+=3){var o=n[i],p=n[i+1],C=n[i+2];if(typeof p!="function"){if(Hh(p||o)===null)continue;break}var E=Pr(o);E!==null&&(n.splice(i,3),i-=3,Hu(E,{pending:!0,data:C,method:o.method,action:p},p,C))}}))}function Na(n){function i(ie){return Rl(ie,n)}Yi!==null&&Rl(Yi,n),Xi!==null&&Rl(Xi,n),Gi!==null&&Rl(Gi,n),Aa.forEach(i),Da.forEach(i);for(var o=0;o<$i.length;o++){var p=$i[o];p.blockedOn===n&&(p.blockedOn=null)}for(;0<$i.length&&(o=$i[0],o.blockedOn===null);)K0(o),o.blockedOn===null&&$i.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(p=0;p<o.length;p+=3){var C=o[p],E=o[p+1],N=C[rn]||null;if(typeof E=="function")N||Q0(o);else if(N){var H=null;if(E&&E.hasAttribute("formAction")){if(C=E,N=E[rn]||null)H=N.formAction;else if(Hh(C)!==null)continue}else H=N.action;typeof H=="function"?o[p+1]=H:(o.splice(p,3),p-=3),Q0(o)}}}function Yh(n){this._internalRoot=n}Pl.prototype.render=Yh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(h(409));var o=i.current,p=pn();X0(o,p,n,i,null,null)},Pl.prototype.unmount=Yh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;X0(n.current,2,null,n,null,null),pl(),i[Rr]=null}};function Pl(n){this._internalRoot=n}Pl.prototype.unstable_scheduleHydration=function(n){if(n){var i=gm();n={blockedOn:null,target:n,priority:i};for(var o=0;o<$i.length&&i!==0&&i<$i[o].priority;o++);$i.splice(o,0,n),o===0&&K0(n)}};var J0=t.version;if(J0!=="19.1.0")throw Error(h(527,J0,"19.1.0"));q.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(h(188)):(n=Object.keys(n).join(","),Error(h(268,n)));return n=r(i),n=n!==null?c(n):null,n=n===null?null:n.stateNode,n};var AC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{Me=Ll.inject(AC),je=Ll}catch{}}return La.createRoot=function(n,i){if(!y(n))throw Error(h(299));var o=!1,p="",C=gp,E=pp,N=yp,H=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onUncaughtError!==void 0&&(C=i.onUncaughtError),i.onCaughtError!==void 0&&(E=i.onCaughtError),i.onRecoverableError!==void 0&&(N=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(H=i.unstable_transitionCallbacks)),i=I0(n,1,!1,null,null,o,p,C,E,N,H,null),n[Rr]=i.current,kh(n),new Yh(i)},La.hydrateRoot=function(n,i,o){if(!y(n))throw Error(h(299));var p=!1,C="",E=gp,N=pp,H=yp,ie=null,me=null;return o!=null&&(o.unstable_strictMode===!0&&(p=!0),o.identifierPrefix!==void 0&&(C=o.identifierPrefix),o.onUncaughtError!==void 0&&(E=o.onUncaughtError),o.onCaughtError!==void 0&&(N=o.onCaughtError),o.onRecoverableError!==void 0&&(H=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(ie=o.unstable_transitionCallbacks),o.formState!==void 0&&(me=o.formState)),i=I0(n,1,!0,i,o??null,p,C,E,N,H,ie,me),i.context=Y0(null),o=i.current,p=pn(),p=Pc(p),C=ji(p),C.callback=null,Ai(o,C,p),o=p,i.current.lanes=o,Vs(i,o),Gn(i),n[Rr]=i.current,kh(n),new Pl(i)},La.version="19.1.0",La}var cy;function HC(){if(cy)return $h.exports;cy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$h.exports=UC(),$h.exports}var IC=HC();const YC=hd(IC);var Fa={},uy;function XC(){if(uy)return Fa;uy=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.parse=S,Fa.serialize=c;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,h=/^[\u0020-\u003A\u003D-\u007E]*$/,y=Object.prototype.toString,x=(()=>{const l=function(){};return l.prototype=Object.create(null),l})();function S(l,u){const m=new x,v=l.length;if(v<2)return m;const g=(u==null?void 0:u.decode)||d;let b=0;do{const w=l.indexOf("=",b);if(w===-1)break;const T=l.indexOf(";",b),k=T===-1?v:T;if(w>k){b=l.lastIndexOf(";",w-1)+1;continue}const O=f(l,b,w),D=r(l,w,O),P=l.slice(O,D);if(m[P]===void 0){let F=f(l,w+1,k),V=r(l,k,F);const $=g(l.slice(F,V));m[P]=$}b=k+1}while(b<v);return m}function f(l,u,m){do{const v=l.charCodeAt(u);if(v!==32&&v!==9)return u}while(++u<m);return m}function r(l,u,m){for(;u>m;){const v=l.charCodeAt(--u);if(v!==32&&v!==9)return u+1}return m}function c(l,u,m){const v=(m==null?void 0:m.encode)||encodeURIComponent;if(!e.test(l))throw new TypeError(`argument name is invalid: ${l}`);const g=v(u);if(!t.test(g))throw new TypeError(`argument val is invalid: ${u}`);let b=l+"="+g;if(!m)return b;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);b+="; Max-Age="+m.maxAge}if(m.domain){if(!s.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);b+="; Domain="+m.domain}if(m.path){if(!h.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);b+="; Path="+m.path}if(m.expires){if(!a(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);b+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(b+="; HttpOnly"),m.secure&&(b+="; Secure"),m.partitioned&&(b+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return b}function d(l){if(l.indexOf("%")===-1)return l;try{return decodeURIComponent(l)}catch{return l}}function a(l){return y.call(l)==="[object Date]"}return Fa}XC();var hy="popstate";function GC(e={}){function t(y,x){let{pathname:S="/",search:f="",hash:r=""}=Ds(y.location.hash.substring(1));return!S.startsWith("/")&&!S.startsWith(".")&&(S="/"+S),Of("",{pathname:S,search:f,hash:r},x.state&&x.state.usr||null,x.state&&x.state.key||"default")}function s(y,x){let S=y.document.querySelector("base"),f="";if(S&&S.getAttribute("href")){let r=y.location.href,c=r.indexOf("#");f=c===-1?r:r.slice(0,c)}return f+"#"+(typeof x=="string"?x:so(x))}function h(y,x){Vn(y.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(x)})`)}return WC(t,s,h,e)}function jt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $C(){return Math.random().toString(36).substring(2,10)}function fy(e,t){return{usr:e.state,key:e.key,idx:t}}function Of(e,t,s=null,h){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ds(t):t,state:s,key:t&&t.key||h||$C()}}function so({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Ds(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let h=e.indexOf("?");h>=0&&(t.search=e.substring(h),e=e.substring(0,h)),e&&(t.pathname=e)}return t}function WC(e,t,s,h={}){let{window:y=document.defaultView,v5Compat:x=!1}=h,S=y.history,f="POP",r=null,c=d();c==null&&(c=0,S.replaceState({...S.state,idx:c},""));function d(){return(S.state||{idx:null}).idx}function a(){f="POP";let g=d(),b=g==null?null:g-c;c=g,r&&r({action:f,location:v.location,delta:b})}function l(g,b){f="PUSH";let w=Of(v.location,g,b);s&&s(w,g),c=d()+1;let T=fy(w,c),k=v.createHref(w);try{S.pushState(T,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;y.location.assign(k)}x&&r&&r({action:f,location:v.location,delta:1})}function u(g,b){f="REPLACE";let w=Of(v.location,g,b);s&&s(w,g),c=d();let T=fy(w,c),k=v.createHref(w);S.replaceState(T,"",k),x&&r&&r({action:f,location:v.location,delta:0})}function m(g){let b=y.location.origin!=="null"?y.location.origin:y.location.href,w=typeof g=="string"?g:so(g);return w=w.replace(/ $/,"%20"),jt(b,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,b)}let v={get action(){return f},get location(){return e(y,S)},listen(g){if(r)throw new Error("A history only accepts one active listener");return y.addEventListener(hy,a),r=g,()=>{y.removeEventListener(hy,a),r=null}},createHref(g){return t(y,g)},createURL:m,encodeLocation(g){let b=m(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:l,replace:u,go(g){return S.go(g)}};return v}function Ex(e,t,s="/"){return qC(e,t,s,!1)}function qC(e,t,s,h){let y=typeof t=="string"?Ds(t):t,x=Ci(y.pathname||"/",s);if(x==null)return null;let S=Ox(e);KC(S);let f=null;for(let r=0;f==null&&r<S.length;++r){let c=o2(x);f=s2(S[r],c,h)}return f}function Ox(e,t=[],s=[],h=""){let y=(x,S,f)=>{let r={relativePath:f===void 0?x.path||"":f,caseSensitive:x.caseSensitive===!0,childrenIndex:S,route:x};r.relativePath.startsWith("/")&&(jt(r.relativePath.startsWith(h),`Absolute route path "${r.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),r.relativePath=r.relativePath.slice(h.length));let c=wi([h,r.relativePath]),d=s.concat(r);x.children&&x.children.length>0&&(jt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Ox(x.children,t,d,c)),!(x.path==null&&!x.index)&&t.push({path:c,score:i2(c,x.index),routesMeta:d})};return e.forEach((x,S)=>{var f;if(x.path===""||!((f=x.path)!=null&&f.includes("?")))y(x,S);else for(let r of Mx(x.path))y(x,S,r)}),t}function Mx(e){let t=e.split("/");if(t.length===0)return[];let[s,...h]=t,y=s.endsWith("?"),x=s.replace(/\?$/,"");if(h.length===0)return y?[x,""]:[x];let S=Mx(h.join("/")),f=[];return f.push(...S.map(r=>r===""?x:[x,r].join("/"))),y&&f.push(...S),f.map(r=>e.startsWith("/")&&r===""?"/":r)}function KC(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:r2(t.routesMeta.map(h=>h.childrenIndex),s.routesMeta.map(h=>h.childrenIndex)))}var ZC=/^:[\w-]+$/,QC=3,JC=2,e2=1,t2=10,n2=-2,dy=e=>e==="*";function i2(e,t){let s=e.split("/"),h=s.length;return s.some(dy)&&(h+=n2),t&&(h+=JC),s.filter(y=>!dy(y)).reduce((y,x)=>y+(ZC.test(x)?QC:x===""?e2:t2),h)}function r2(e,t){return e.length===t.length&&e.slice(0,-1).every((h,y)=>h===t[y])?e[e.length-1]-t[t.length-1]:0}function s2(e,t,s=!1){let{routesMeta:h}=e,y={},x="/",S=[];for(let f=0;f<h.length;++f){let r=h[f],c=f===h.length-1,d=x==="/"?t:t.slice(x.length)||"/",a=nc({path:r.relativePath,caseSensitive:r.caseSensitive,end:c},d),l=r.route;if(!a&&c&&s&&!h[h.length-1].route.index&&(a=nc({path:r.relativePath,caseSensitive:r.caseSensitive,end:!1},d)),!a)return null;Object.assign(y,a.params),S.push({params:y,pathname:wi([x,a.pathname]),pathnameBase:h2(wi([x,a.pathnameBase])),route:l}),a.pathnameBase!=="/"&&(x=wi([x,a.pathnameBase]))}return S}function nc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,h]=a2(e.path,e.caseSensitive,e.end),y=t.match(s);if(!y)return null;let x=y[0],S=x.replace(/(.)\/+$/,"$1"),f=y.slice(1);return{params:h.reduce((c,{paramName:d,isOptional:a},l)=>{if(d==="*"){let m=f[l]||"";S=x.slice(0,x.length-m.length).replace(/(.)\/+$/,"$1")}const u=f[l];return a&&!u?c[d]=void 0:c[d]=(u||"").replace(/%2F/g,"/"),c},{}),pathname:x,pathnameBase:S,pattern:e}}function a2(e,t=!1,s=!0){Vn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let h=[],y="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(S,f,r)=>(h.push({paramName:f,isOptional:r!=null}),r?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(h.push({paramName:"*"}),y+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?y+="\\/*$":e!==""&&e!=="/"&&(y+="(?:(?=\\/|$))"),[new RegExp(y,t?void 0:"i"),h]}function o2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ci(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,h=e.charAt(s);return h&&h!=="/"?null:e.slice(s)||"/"}function l2(e,t="/"){let{pathname:s,search:h="",hash:y=""}=typeof e=="string"?Ds(e):e;return{pathname:s?s.startsWith("/")?s:c2(s,t):t,search:f2(h),hash:d2(y)}}function c2(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(y=>{y===".."?s.length>1&&s.pop():y!=="."&&s.push(y)}),s.length>1?s.join("/"):"/"}function Zh(e,t,s,h){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u2(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function jx(e){let t=u2(e);return t.map((s,h)=>h===t.length-1?s.pathname:s.pathnameBase)}function Ax(e,t,s,h=!1){let y;typeof e=="string"?y=Ds(e):(y={...e},jt(!y.pathname||!y.pathname.includes("?"),Zh("?","pathname","search",y)),jt(!y.pathname||!y.pathname.includes("#"),Zh("#","pathname","hash",y)),jt(!y.search||!y.search.includes("#"),Zh("#","search","hash",y)));let x=e===""||y.pathname==="",S=x?"/":y.pathname,f;if(S==null)f=s;else{let a=t.length-1;if(!h&&S.startsWith("..")){let l=S.split("/");for(;l[0]==="..";)l.shift(),a-=1;y.pathname=l.join("/")}f=a>=0?t[a]:"/"}let r=l2(y,f),c=S&&S!=="/"&&S.endsWith("/"),d=(x||S===".")&&s.endsWith("/");return!r.pathname.endsWith("/")&&(c||d)&&(r.pathname+="/"),r}var wi=e=>e.join("/").replace(/\/\/+/g,"/"),h2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),f2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,d2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function m2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Dx=["POST","PUT","PATCH","DELETE"];new Set(Dx);var g2=["GET",...Dx];new Set(g2);var Rs=M.createContext(null);Rs.displayName="DataRouter";var yc=M.createContext(null);yc.displayName="DataRouterState";var Rx=M.createContext({isTransitioning:!1});Rx.displayName="ViewTransition";var p2=M.createContext(new Map);p2.displayName="Fetchers";var y2=M.createContext(null);y2.displayName="Await";var Jn=M.createContext(null);Jn.displayName="Navigation";var vc=M.createContext(null);vc.displayName="Location";var ei=M.createContext({outlet:null,matches:[],isDataRoute:!1});ei.displayName="Route";var dd=M.createContext(null);dd.displayName="RouteError";function v2(e,{relative:t}={}){jt(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:h}=M.useContext(Jn),{hash:y,pathname:x,search:S}=xo(e,{relative:t}),f=x;return s!=="/"&&(f=x==="/"?s:wi([s,x])),h.createHref({pathname:f,search:S,hash:y})}function vo(){return M.useContext(vc)!=null}function nr(){return jt(vo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(vc).location}var Nx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Px(e){M.useContext(Jn).static||M.useLayoutEffect(e)}function x2(){let{isDataRoute:e}=M.useContext(ei);return e?N2():b2()}function b2(){jt(vo(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(Rs),{basename:t,navigator:s}=M.useContext(Jn),{matches:h}=M.useContext(ei),{pathname:y}=nr(),x=JSON.stringify(jx(h)),S=M.useRef(!1);return Px(()=>{S.current=!0}),M.useCallback((r,c={})=>{if(Vn(S.current,Nx),!S.current)return;if(typeof r=="number"){s.go(r);return}let d=Ax(r,JSON.parse(x),y,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:wi([t,d.pathname])),(c.replace?s.replace:s.push)(d,c.state,c)},[t,s,x,y,e])}var w2=M.createContext(null);function S2(e){let t=M.useContext(ei).outlet;return t&&M.createElement(w2.Provider,{value:e},t)}function xo(e,{relative:t}={}){let{matches:s}=M.useContext(ei),{pathname:h}=nr(),y=JSON.stringify(jx(s));return M.useMemo(()=>Ax(e,JSON.parse(y),h,t==="path"),[e,y,h,t])}function C2(e,t){return Lx(e)}function Lx(e,t,s,h){jt(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y,static:x}=M.useContext(Jn),{matches:S}=M.useContext(ei),f=S[S.length-1],r=f?f.params:{},c=f?f.pathname:"/",d=f?f.pathnameBase:"/",a=f&&f.route;{let w=a&&a.path||"";Fx(c,!a||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let l=nr(),u;u=l;let m=u.pathname||"/",v=m;if(d!=="/"){let w=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=!x&&s&&s.matches&&s.matches.length>0?s.matches:Ex(e,{pathname:v});return Vn(a||g!=null,`No routes matched location "${u.pathname}${u.search}${u.hash}" `),Vn(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${u.pathname}${u.search}${u.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),O2(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},r,w.params),pathname:wi([d,y.encodeLocation?y.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:wi([d,y.encodeLocation?y.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),S,s,h)}function _2(){let e=R2(),t=m2(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,h="rgba(200,200,200, 0.5)",y={padding:"0.5rem",backgroundColor:h},x={padding:"2px 4px",backgroundColor:h},S=null;return console.error("Error handled by React Router default ErrorBoundary:",e),S=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:x},"ErrorBoundary")," or"," ",M.createElement("code",{style:x},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),s?M.createElement("pre",{style:y},s):null,S)}var T2=M.createElement(_2,null),k2=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(ei.Provider,{value:this.props.routeContext},M.createElement(dd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function E2({routeContext:e,match:t,children:s}){let h=M.useContext(Rs);return h&&h.static&&h.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(ei.Provider,{value:e},s)}function O2(e,t=[],s=null,h=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let y=e,x=s==null?void 0:s.errors;if(x!=null){let r=y.findIndex(c=>c.route.id&&(x==null?void 0:x[c.route.id])!==void 0);jt(r>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),y=y.slice(0,Math.min(y.length,r+1))}let S=!1,f=-1;if(s)for(let r=0;r<y.length;r++){let c=y[r];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(f=r),c.route.id){let{loaderData:d,errors:a}=s,l=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!a||a[c.route.id]===void 0);if(c.route.lazy||l){S=!0,f>=0?y=y.slice(0,f+1):y=[y[0]];break}}}return y.reduceRight((r,c,d)=>{let a,l=!1,u=null,m=null;s&&(a=x&&c.route.id?x[c.route.id]:void 0,u=c.route.errorElement||T2,S&&(f<0&&d===0?(Fx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),l=!0,m=null):f===d&&(l=!0,m=c.route.hydrateFallbackElement||null)));let v=t.concat(y.slice(0,d+1)),g=()=>{let b;return a?b=u:l?b=m:c.route.Component?b=M.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=r,M.createElement(E2,{match:c,routeContext:{outlet:r,matches:v,isDataRoute:s!=null},children:b})};return s&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?M.createElement(k2,{location:s.location,revalidation:s.revalidation,component:u,error:a,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}function md(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M2(e){let t=M.useContext(Rs);return jt(t,md(e)),t}function j2(e){let t=M.useContext(yc);return jt(t,md(e)),t}function A2(e){let t=M.useContext(ei);return jt(t,md(e)),t}function gd(e){let t=A2(e),s=t.matches[t.matches.length-1];return jt(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function D2(){return gd("useRouteId")}function R2(){var h;let e=M.useContext(dd),t=j2("useRouteError"),s=gd("useRouteError");return e!==void 0?e:(h=t.errors)==null?void 0:h[s]}function N2(){let{router:e}=M2("useNavigate"),t=gd("useNavigate"),s=M.useRef(!1);return Px(()=>{s.current=!0}),M.useCallback(async(y,x={})=>{Vn(s.current,Nx),s.current&&(typeof y=="number"?e.navigate(y):await e.navigate(y,{fromRouteId:t,...x}))},[e,t])}var my={};function Fx(e,t,s){!t&&!my[e]&&(my[e]=!0,Vn(!1,s))}M.memo(P2);function P2({routes:e,future:t,state:s}){return Lx(e,void 0,s,t)}function L2(e){return S2(e.context)}function F2({basename:e="/",children:t=null,location:s,navigationType:h="POP",navigator:y,static:x=!1}){jt(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let S=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:S,navigator:y,static:x,future:{}}),[S,y,x]);typeof s=="string"&&(s=Ds(s));let{pathname:r="/",search:c="",hash:d="",state:a=null,key:l="default"}=s,u=M.useMemo(()=>{let m=Ci(r,S);return m==null?null:{location:{pathname:m,search:c,hash:d,state:a,key:l},navigationType:h}},[S,r,c,d,a,l,h]);return Vn(u!=null,`<Router basename="${S}"> is not able to match the URL "${r}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),u==null?null:M.createElement(Jn.Provider,{value:f},M.createElement(vc.Provider,{children:t,value:u}))}var Gl="get",$l="application/x-www-form-urlencoded";function xc(e){return e!=null&&typeof e.tagName=="string"}function z2(e){return xc(e)&&e.tagName.toLowerCase()==="button"}function B2(e){return xc(e)&&e.tagName.toLowerCase()==="form"}function V2(e){return xc(e)&&e.tagName.toLowerCase()==="input"}function U2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function H2(e,t){return e.button===0&&(!t||t==="_self")&&!U2(e)}var Fl=null;function I2(){if(Fl===null)try{new FormData(document.createElement("form"),0),Fl=!1}catch{Fl=!0}return Fl}var Y2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qh(e){return e!=null&&!Y2.has(e)?(Vn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$l}"`),null):e}function X2(e,t){let s,h,y,x,S;if(B2(e)){let f=e.getAttribute("action");h=f?Ci(f,t):null,s=e.getAttribute("method")||Gl,y=Qh(e.getAttribute("enctype"))||$l,x=new FormData(e)}else if(z2(e)||V2(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let r=e.getAttribute("formaction")||f.getAttribute("action");if(h=r?Ci(r,t):null,s=e.getAttribute("formmethod")||f.getAttribute("method")||Gl,y=Qh(e.getAttribute("formenctype"))||Qh(f.getAttribute("enctype"))||$l,x=new FormData(f,e),!I2()){let{name:c,type:d,value:a}=e;if(d==="image"){let l=c?`${c}.`:"";x.append(`${l}x`,"0"),x.append(`${l}y`,"0")}else c&&x.append(c,a)}}else{if(xc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Gl,h=null,y=$l,S=e}return x&&y==="text/plain"&&(S=x,x=void 0),{action:h,method:s.toLowerCase(),encType:y,formData:x,body:S}}function pd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function G2(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $2(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function W2(e,t,s){let h=await Promise.all(e.map(async y=>{let x=t.routes[y.route.id];if(x){let S=await G2(x,s);return S.links?S.links():[]}return[]}));return Q2(h.flat(1).filter($2).filter(y=>y.rel==="stylesheet"||y.rel==="preload").map(y=>y.rel==="stylesheet"?{...y,rel:"prefetch",as:"style"}:{...y,rel:"prefetch"}))}function gy(e,t,s,h,y,x){let S=(r,c)=>s[c]?r.route.id!==s[c].route.id:!0,f=(r,c)=>{var d;return s[c].pathname!==r.pathname||((d=s[c].route.path)==null?void 0:d.endsWith("*"))&&s[c].params["*"]!==r.params["*"]};return x==="assets"?t.filter((r,c)=>S(r,c)||f(r,c)):x==="data"?t.filter((r,c)=>{var a;let d=h.routes[r.route.id];if(!d||!d.hasLoader)return!1;if(S(r,c)||f(r,c))return!0;if(r.route.shouldRevalidate){let l=r.route.shouldRevalidate({currentUrl:new URL(y.pathname+y.search+y.hash,window.origin),currentParams:((a=s[0])==null?void 0:a.params)||{},nextUrl:new URL(e,window.origin),nextParams:r.params,defaultShouldRevalidate:!0});if(typeof l=="boolean")return l}return!0}):[]}function q2(e,t,{includeHydrateFallback:s}={}){return K2(e.map(h=>{let y=t.routes[h.route.id];if(!y)return[];let x=[y.module];return y.clientActionModule&&(x=x.concat(y.clientActionModule)),y.clientLoaderModule&&(x=x.concat(y.clientLoaderModule)),s&&y.hydrateFallbackModule&&(x=x.concat(y.hydrateFallbackModule)),y.imports&&(x=x.concat(y.imports)),x}).flat(1))}function K2(e){return[...new Set(e)]}function Z2(e){let t={},s=Object.keys(e).sort();for(let h of s)t[h]=e[h];return t}function Q2(e,t){let s=new Set;return new Set(t),e.reduce((h,y)=>{let x=JSON.stringify(Z2(y));return s.has(x)||(s.add(x),h.push({key:x,link:y})),h},[])}var J2=new Set([100,101,204,205]);function e_(e,t){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname="_root.data":t&&Ci(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function zx(){let e=M.useContext(Rs);return pd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function t_(){let e=M.useContext(yc);return pd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yd=M.createContext(void 0);yd.displayName="FrameworkContext";function Bx(){let e=M.useContext(yd);return pd(e,"You must render this element inside a <HydratedRouter> element"),e}function n_(e,t){let s=M.useContext(yd),[h,y]=M.useState(!1),[x,S]=M.useState(!1),{onFocus:f,onBlur:r,onMouseEnter:c,onMouseLeave:d,onTouchStart:a}=t,l=M.useRef(null);M.useEffect(()=>{if(e==="render"&&S(!0),e==="viewport"){let v=b=>{b.forEach(w=>{S(w.isIntersecting)})},g=new IntersectionObserver(v,{threshold:.5});return l.current&&g.observe(l.current),()=>{g.disconnect()}}},[e]),M.useEffect(()=>{if(h){let v=setTimeout(()=>{S(!0)},100);return()=>{clearTimeout(v)}}},[h]);let u=()=>{y(!0)},m=()=>{y(!1),S(!1)};return s?e!=="intent"?[x,l,{}]:[x,l,{onFocus:za(f,u),onBlur:za(r,m),onMouseEnter:za(c,u),onMouseLeave:za(d,m),onTouchStart:za(a,u)}]:[!1,l,{}]}function za(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function i_({page:e,...t}){let{router:s}=zx(),h=M.useMemo(()=>Ex(s.routes,e,s.basename),[s.routes,e,s.basename]);return h?M.createElement(s_,{page:e,matches:h,...t}):null}function r_(e){let{manifest:t,routeModules:s}=Bx(),[h,y]=M.useState([]);return M.useEffect(()=>{let x=!1;return W2(e,t,s).then(S=>{x||y(S)}),()=>{x=!0}},[e,t,s]),h}function s_({page:e,matches:t,...s}){let h=nr(),{manifest:y,routeModules:x}=Bx(),{basename:S}=zx(),{loaderData:f,matches:r}=t_(),c=M.useMemo(()=>gy(e,t,r,y,h,"data"),[e,t,r,y,h]),d=M.useMemo(()=>gy(e,t,r,y,h,"assets"),[e,t,r,y,h]),a=M.useMemo(()=>{if(e===h.pathname+h.search+h.hash)return[];let m=new Set,v=!1;if(t.forEach(b=>{var T;let w=y.routes[b.route.id];!w||!w.hasLoader||(!c.some(k=>k.route.id===b.route.id)&&b.route.id in f&&((T=x[b.route.id])!=null&&T.shouldRevalidate)||w.hasClientLoader?v=!0:m.add(b.route.id))}),m.size===0)return[];let g=e_(e,S);return v&&m.size>0&&g.searchParams.set("_routes",t.filter(b=>m.has(b.route.id)).map(b=>b.route.id).join(",")),[g.pathname+g.search]},[S,f,h,y,c,t,e,x]),l=M.useMemo(()=>q2(d,y),[d,y]),u=r_(d);return M.createElement(M.Fragment,null,a.map(m=>M.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...s})),l.map(m=>M.createElement("link",{key:m,rel:"modulepreload",href:m,...s})),u.map(({key:m,link:v})=>M.createElement("link",{key:m,...v})))}function a_(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Vx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vx&&(window.__reactRouterVersion="7.5.3")}catch{}function o_({basename:e,children:t,window:s}){let h=M.useRef();h.current==null&&(h.current=GC({window:s,v5Compat:!0}));let y=h.current,[x,S]=M.useState({action:y.action,location:y.location}),f=M.useCallback(r=>{M.startTransition(()=>S(r))},[S]);return M.useLayoutEffect(()=>y.listen(f),[y,f]),M.createElement(F2,{basename:e,children:t,location:x.location,navigationType:x.action,navigator:y})}var Ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vd=M.forwardRef(function({onClick:t,discover:s="render",prefetch:h="none",relative:y,reloadDocument:x,replace:S,state:f,target:r,to:c,preventScrollReset:d,viewTransition:a,...l},u){let{basename:m}=M.useContext(Jn),v=typeof c=="string"&&Ux.test(c),g,b=!1;if(typeof c=="string"&&v&&(g=c,Vx))try{let V=new URL(window.location.href),$=c.startsWith("//")?new URL(V.protocol+c):new URL(c),te=Ci($.pathname,m);$.origin===V.origin&&te!=null?c=te+$.search+$.hash:b=!0}catch{Vn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=v2(c,{relative:y}),[T,k,O]=n_(h,l),D=u_(c,{replace:S,state:f,target:r,preventScrollReset:d,relative:y,viewTransition:a});function P(V){t&&t(V),V.defaultPrevented||D(V)}let F=M.createElement("a",{...l,...O,href:g||w,onClick:b||x?t:P,ref:a_(u,k),target:r,"data-discover":!v&&s==="render"?"true":void 0});return T&&!v?M.createElement(M.Fragment,null,F,M.createElement(i_,{page:w})):F});vd.displayName="Link";var Hx=M.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:h="",end:y=!1,style:x,to:S,viewTransition:f,children:r,...c},d){let a=xo(S,{relative:c.relative}),l=nr(),u=M.useContext(yc),{navigator:m,basename:v}=M.useContext(Jn),g=u!=null&&g_(a)&&f===!0,b=m.encodeLocation?m.encodeLocation(a).pathname:a.pathname,w=l.pathname,T=u&&u.navigation&&u.navigation.location?u.navigation.location.pathname:null;s||(w=w.toLowerCase(),T=T?T.toLowerCase():null,b=b.toLowerCase()),T&&v&&(T=Ci(T,v)||T);const k=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let O=w===b||!y&&w.startsWith(b)&&w.charAt(k)==="/",D=T!=null&&(T===b||!y&&T.startsWith(b)&&T.charAt(b.length)==="/"),P={isActive:O,isPending:D,isTransitioning:g},F=O?t:void 0,V;typeof h=="function"?V=h(P):V=[h,O?"active":null,D?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let $=typeof x=="function"?x(P):x;return M.createElement(vd,{...c,"aria-current":F,className:V,ref:d,style:$,to:S,viewTransition:f},typeof r=="function"?r(P):r)});Hx.displayName="NavLink";var l_=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:h,replace:y,state:x,method:S=Gl,action:f,onSubmit:r,relative:c,preventScrollReset:d,viewTransition:a,...l},u)=>{let m=d_(),v=m_(f,{relative:c}),g=S.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&Ux.test(f),w=T=>{if(r&&r(T),T.defaultPrevented)return;T.preventDefault();let k=T.nativeEvent.submitter,O=(k==null?void 0:k.getAttribute("formmethod"))||S;m(k||T.currentTarget,{fetcherKey:t,method:O,navigate:s,replace:y,state:x,relative:c,preventScrollReset:d,viewTransition:a})};return M.createElement("form",{ref:u,method:g,action:v,onSubmit:h?r:w,...l,"data-discover":!b&&e==="render"?"true":void 0})});l_.displayName="Form";function c_(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ix(e){let t=M.useContext(Rs);return jt(t,c_(e)),t}function u_(e,{target:t,replace:s,state:h,preventScrollReset:y,relative:x,viewTransition:S}={}){let f=x2(),r=nr(),c=xo(e,{relative:x});return M.useCallback(d=>{if(H2(d,t)){d.preventDefault();let a=s!==void 0?s:so(r)===so(c);f(e,{replace:a,state:h,preventScrollReset:y,relative:x,viewTransition:S})}},[r,f,c,s,h,t,e,y,x,S])}var h_=0,f_=()=>`__${String(++h_)}__`;function d_(){let{router:e}=Ix("useSubmit"),{basename:t}=M.useContext(Jn),s=D2();return M.useCallback(async(h,y={})=>{let{action:x,method:S,encType:f,formData:r,body:c}=X2(h,t);if(y.navigate===!1){let d=y.fetcherKey||f_();await e.fetch(d,s,y.action||x,{preventScrollReset:y.preventScrollReset,formData:r,body:c,formMethod:y.method||S,formEncType:y.encType||f,flushSync:y.flushSync})}else await e.navigate(y.action||x,{preventScrollReset:y.preventScrollReset,formData:r,body:c,formMethod:y.method||S,formEncType:y.encType||f,replace:y.replace,state:y.state,fromRouteId:s,flushSync:y.flushSync,viewTransition:y.viewTransition})},[e,t,s])}function m_(e,{relative:t}={}){let{basename:s}=M.useContext(Jn),h=M.useContext(ei);jt(h,"useFormAction must be used inside a RouteContext");let[y]=h.matches.slice(-1),x={...xo(e||".",{relative:t})},S=nr();if(e==null){x.search=S.search;let f=new URLSearchParams(x.search),r=f.getAll("index");if(r.some(d=>d==="")){f.delete("index"),r.filter(a=>a).forEach(a=>f.append("index",a));let d=f.toString();x.search=d?`?${d}`:""}}return(!e||e===".")&&y.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(x.pathname=x.pathname==="/"?s:wi([s,x.pathname])),so(x)}function g_(e,t={}){let s=M.useContext(Rx);jt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:h}=Ix("useViewTransitionState"),y=xo(e,{relative:t.relative});if(!s.isTransitioning)return!1;let x=Ci(s.currentLocation.pathname,h)||s.currentLocation.pathname,S=Ci(s.nextLocation.pathname,h)||s.nextLocation.pathname;return nc(y.pathname,S)!=null||nc(y.pathname,x)!=null}new TextEncoder;[...J2];const p_=(e,t,s,h)=>{var x,S,f,r;const y=[s,{code:t,...h||{}}];if((S=(x=e==null?void 0:e.services)==null?void 0:x.logger)!=null&&S.forward)return e.services.logger.forward(y,"warn","react-i18next::",!0);Mr(y[0])&&(y[0]=`react-i18next:: ${y[0]}`),(r=(f=e==null?void 0:e.services)==null?void 0:f.logger)!=null&&r.warn?e.services.logger.warn(...y):console!=null&&console.warn&&console.warn(...y)},py={},Mf=(e,t,s,h)=>{Mr(s)&&py[s]||(Mr(s)&&(py[s]=new Date),p_(e,t,s,h))},Yx=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},jf=(e,t,s)=>{e.loadNamespaces(t,Yx(e,s))},yy=(e,t,s,h)=>{if(Mr(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return jf(e,s,h);s.forEach(y=>{e.options.ns.indexOf(y)<0&&e.options.ns.push(y)}),e.loadLanguages(t,Yx(e,h))},y_=(e,t,s={})=>!t.languages||!t.languages.length?(Mf(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:s.lng,precheck:(h,y)=>{var x;if(((x=s.bindI18n)==null?void 0:x.indexOf("languageChanging"))>-1&&h.services.backendConnector.backend&&h.isLanguageChangingTo&&!y(h.isLanguageChangingTo,e))return!1}}),Mr=e=>typeof e=="string",v_=e=>typeof e=="object"&&e!==null,x_=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,b_={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},w_=e=>b_[e],S_=e=>e.replace(x_,w_);let Af={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:S_};const C_=(e={})=>{Af={...Af,...e}},__=()=>Af;let Xx;const T_=e=>{Xx=e},k_=()=>Xx,E_={type:"3rdParty",init(e){C_(e.options.react),T_(e)}},O_=M.createContext();class M_{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const j_=(e,t)=>{const s=M.useRef();return M.useEffect(()=>{s.current=e},[e,t]),s.current},Gx=(e,t,s,h)=>e.getFixedT(t,s,h),A_=(e,t,s,h)=>M.useCallback(Gx(e,t,s,h),[e,t,s,h]),Wt=(e,t={})=>{var k,O,D,P;const{i18n:s}=t,{i18n:h,defaultNS:y}=M.useContext(O_)||{},x=s||h||k_();if(x&&!x.reportNamespaces&&(x.reportNamespaces=new M_),!x){Mf(x,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const F=($,te)=>Mr(te)?te:v_(te)&&Mr(te.defaultValue)?te.defaultValue:Array.isArray($)?$[$.length-1]:$,V=[F,{},!1];return V.t=F,V.i18n={},V.ready=!1,V}(k=x.options.react)!=null&&k.wait&&Mf(x,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const S={...__(),...x.options.react,...t},{useSuspense:f,keyPrefix:r}=S;let c=y||((O=x.options)==null?void 0:O.defaultNS);c=Mr(c)?[c]:c||["translation"],(P=(D=x.reportNamespaces).addUsedNamespaces)==null||P.call(D,c);const d=(x.isInitialized||x.initializedStoreOnce)&&c.every(F=>y_(F,x,S)),a=A_(x,t.lng||null,S.nsMode==="fallback"?c:c[0],r),l=()=>a,u=()=>Gx(x,t.lng||null,S.nsMode==="fallback"?c:c[0],r),[m,v]=M.useState(l);let g=c.join();t.lng&&(g=`${t.lng}${g}`);const b=j_(g),w=M.useRef(!0);M.useEffect(()=>{const{bindI18n:F,bindI18nStore:V}=S;w.current=!0,!d&&!f&&(t.lng?yy(x,t.lng,c,()=>{w.current&&v(u)}):jf(x,c,()=>{w.current&&v(u)})),d&&b&&b!==g&&w.current&&v(u);const $=()=>{w.current&&v(u)};return F&&(x==null||x.on(F,$)),V&&(x==null||x.store.on(V,$)),()=>{w.current=!1,x&&(F==null||F.split(" ").forEach(te=>x.off(te,$))),V&&x&&V.split(" ").forEach(te=>x.store.off(te,$))}},[x,g]),M.useEffect(()=>{w.current&&d&&v(l)},[x,r,d]);const T=[m,x,d];if(T.t=m,T.i18n=x,T.ready=d,d||!d&&!f)return T;throw new Promise(F=>{t.lng?yy(x,t.lng,c,()=>F()):jf(x,c,()=>F())})};function D_(){const{t:e}=Wt();return _.jsxs("div",{className:"p-4 sm:p-6 text-text",children:[_.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-4 sm:mb-6",children:e("homePage")}),_.jsx("p",{className:"text-sm sm:text-base text-text-muted",children:e("welcome")})]})}const $x=M.createContext(),R_=({children:e})=>{const[t,s]=M.useState(null),[h,y]=M.useState(!1),[x,S]=M.useState("connecting"),f=M.useRef([]),r=M.useRef(0),c=M.useRef(null),d=M.useRef(!1),a=M.useRef(null),l="ws://localhost:12345",u=10,m=M.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null),a.current&&a.current.readyState!==WebSocket.CLOSED&&a.current.close()},[]),v=M.useCallback(()=>{if(d.current)return;m(),S("connecting"),console.log(" Attempting to connect to WebSocket...");const D=new WebSocket(l);a.current=D,s(D),D.onopen=()=>{d.current||(console.log(" WebSocket connected successfully"),y(!0),S("connected"),r.current=0)},D.onmessage=P=>{if(d.current)return;const F=P.data;f.current.forEach(V=>{try{V(F)}catch($){console.error("Error in message callback:",$)}})},D.onerror=P=>{console.error(" WebSocket error:",P),S("disconnected")},D.onclose=P=>{d.current||(console.warn(" WebSocket disconnected",P.code,P.reason),y(!1),S("disconnected"),P.code!==1e3&&r.current<u&&g())}},[m]),g=M.useCallback(()=>{if(d.current||r.current>=u){console.error(" Max reconnection attempts reached");return}const D=Math.min(1e4,1e3*Math.pow(2,r.current));console.log(` Reconnecting in ${D/1e3}s... (attempt ${r.current+1})`),S("reconnecting"),c.current=setTimeout(()=>{d.current||(r.current+=1,v())},D)},[v]);M.useEffect(()=>(d.current=!1,v(),()=>{console.log(" Cleaning up WebSocket connection"),d.current=!0,m()}),[]);const b=M.useCallback(D=>{if(a.current&&a.current.readyState===WebSocket.OPEN)try{return a.current.send(D),!0}catch(P){return console.error(" Error sending message:",P),!1}return console.warn(" WebSocket not ready to send. Current state:",a.current?a.current.readyState:"null"),!1},[]),w=M.useCallback(D=>{if(typeof D=="function")return f.current.push(D),()=>T(D)},[]),T=M.useCallback(D=>{f.current=f.current.filter(P=>P!==D)},[]),k=M.useCallback(()=>{r.current=0,v()},[v]),O={isConnected:h,connectionStatus:x,send:b,addMessageCallback:w,removeMessageCallback:T,reconnect:k};return _.jsx($x.Provider,{value:O,children:e})},bc=()=>{const e=M.useContext($x);if(!e)throw new Error("useWebSocket must be used within a WebSocketProvider");return e};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,h)=>h?h.toUpperCase():s.toLowerCase()),vy=e=>{const t=P_(e);return t.charAt(0).toUpperCase()+t.slice(1)},Wx=(...e)=>e.filter((t,s,h)=>!!t&&t.trim()!==""&&h.indexOf(t)===s).join(" ").trim(),L_=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=M.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:h,className:y="",children:x,iconNode:S,...f},r)=>M.createElement("svg",{ref:r,...F_,width:t,height:t,stroke:e,strokeWidth:h?Number(s)*24/Number(t):s,className:Wx("lucide",y),...!x&&!L_(f)&&{"aria-hidden":"true"},...f},[...S.map(([c,d])=>M.createElement(c,d)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,t)=>{const s=M.forwardRef(({className:h,...y},x)=>M.createElement(z_,{ref:x,iconNode:t,className:Wx(`lucide-${N_(vy(e))}`,`lucide-${e}`,h),...y}));return s.displayName=vy(e),s};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ms=De("activity",B_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],U_=De("battery",V_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],qx=De("brush",H_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ic=De("camera",I_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Wa=De("chart-column",Y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],G_=De("chart-line",X_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],W_=De("check",$_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Df=De("chevron-down",q_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Z_=De("chevron-left",K_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],J_=De("chevron-right",Q_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tT=De("chevron-up",eT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xd=De("circle",nT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],rT=De("clock",iT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],aT=De("copy",sT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],Ya=De("crop",oT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Jh=De("crosshair",lT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ao=De("download",cT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],hT=De("ellipsis-vertical",uT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],oo=De("eraser",fT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mT=De("eye-off",dT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pT=De("eye",gT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],vT=De("factory",yT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],bT=De("flip-horizontal",xT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],ST=De("focus",wT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Cs=De("funnel",CT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],TT=De("gauge",_T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],ET=De("hand",kT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],MT=De("image-plus",OT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ef=De("image",jT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bd=De("info",AT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Wl=De("layers",DT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NT=De("layout-dashboard",RT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],LT=De("lock-open",PT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zT=De("lock",FT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],VT=De("maximize-2",BT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],rc=De("maximize",UT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],IT=De("minimize-2",HT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M5 12h14",key:"1ays0h"}]],Si=De("minus",YT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],GT=De("moon",XT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],WT=De("mouse-pointer",$T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],Rf=De("move-3d",qT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],ql=De("move",KT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],wd=De("palette",ZT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],JT=De("plus",QT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],xy=De("power",ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],nk=De("rectangle-horizontal",tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],wc=De("rotate-ccw",ik);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sk=De("save",rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],by=De("search",ak);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],en=De("settings",ok);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],ck=De("sliders-vertical",lk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Kl=De("sparkles",uk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Qi=De("square",hk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dk=De("sun",fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sc=De("trash-2",mk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],pk=De("triangle",gk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],vk=De("type",yk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],wy=De("undo-2",xk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],wk=De("undo",bk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Kx=De("upload",Sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Sy=De("video",Ck);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$t=De("x",_k);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],kk=De("wrench",Tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Xa=De("zap",Ek);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ga=De("zoom-in",Ok);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Cy=De("zoom-out",Mk),Ns=({icon:e})=>{const{t,i18n:s}=Wt(),{isConnected:h}=bc(),y=s.language==="fa"?"text-right":"text-left";return h?_.jsx("div",{className:"panel bg-background-white dark:bg-background-secondary border border-border rounded-lg p-4 mb-6",children:_.jsxs("div",{className:"flex items-center gap-3 text-primary dark:text-primary",children:[_.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),_.jsx("span",{className:`font-medium font-vazir ${y}`,children:t("websocketConnected")})]})}):_.jsx("div",{className:"panel variant-highlight border border-border rounded-lg p-4 mb-6 animate-pulse",children:_.jsxs("div",{className:"flex items-center gap-3 text-white dark:text-white",children:[_.jsxs("div",{className:"relative",children:[_.jsx(e,{className:"w-5 h-5"}),_.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-highlight rounded-full animate-ping"})]}),_.jsx("span",{className:`font-medium font-vazir ${y}`,children:t("websocketConnecting")})]})})},ct=({label:e,icon:t,children:s,value:h,unit:y,className:x="",showValue:S=!0})=>{const{i18n:f}=Wt(),r=f.language==="fa",c=r?"flex-row-reverse":"flex-row",d=r?"text-right":"text-left";return _.jsxs("div",{className:`card p-3 sm:p-4 transition-all duration-200 hover:shadow-md ${x}`,children:[_.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2 gap-1 sm:gap-0",children:[_.jsxs("div",{className:`flex items-center gap-2 ${c}`,children:[t&&_.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary flex-shrink-0"}),_.jsx("label",{className:`font-medium text-sm sm:text-base text-text dark:text-text font-vazir ${d}`,children:e})]}),S&&h&&_.jsxs("span",{className:`text-xs sm:text-sm text-primary dark:text-primary font-medium font-vazir ${d} flex-shrink-0`,children:[h," ",y]})]}),s]})},Xt=({type:e="text",name:t,value:s,onChange:h,placeholder:y,min:x,max:S,step:f,disabled:r=!1,className:c="",...d})=>{const{i18n:a}=Wt(),l=a.language==="fa"?"text-right":"text-left",u=`
    w-full p-2 sm:p-3 border border-border rounded-xl
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-300 ease-out text-sm sm:text-base
    ${r?"cursor-not-allowed opacity-50":""}
    ${l}
  `;return _.jsx("input",{type:e,name:t,value:s||"",onChange:h,placeholder:y,min:x,max:S,step:f,disabled:r,className:`${u} ${c}`,...d})},$n=({name:e,value:t,onChange:s,options:h=[],disabled:y=!1,className:x="",...S})=>{const{i18n:f}=Wt(),r=f.language==="fa"?"text-right":"text-left",c=`
    w-full p-2 sm:p-3 border border-border rounded-xl
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-300 ease-out font-vazir text-sm sm:text-base
    ${y?"cursor-not-allowed opacity-50":""}
    ${r}
  `;return _.jsx("select",{name:e,value:t,onChange:s,disabled:y,className:`${c} ${x}`,...S,children:h.map(d=>_.jsx("option",{value:d.value,children:d.label},d.value))})},Zi=({active:e,onClick:t,icon:s,label:h,disabled:y=!1,className:x="",showStatus:S=!0})=>{const{t:f,i18n:r}=Wt(),c=r.language==="fa"?"text-right":"text-left",d=`
    px-6 py-3 rounded-lg font-medium font-vazir transition-colors
    ${e?"bg-primary hover:bg-primary-dark text-white":"bg-background-secondary hover:bg-accent text-text-muted"}
    ${y?"opacity-50 cursor-not-allowed":""}
    ${x}
  `;return _.jsxs("div",{children:[S&&_.jsx("div",{className:"flex items-center justify-between mb-4",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-primary":"bg-text-muted"}`}),_.jsx("span",{className:`text-sm font-medium ${e?"text-primary dark:text-primary":"text-text-muted dark:text-text-muted"} font-vazir ${c}`,children:f(e?"active":"inactive")})]})}),_.jsx("button",{type:"button",onClick:t,disabled:y,className:d,children:_.jsxs("div",{className:"flex items-center gap-2",children:[s&&_.jsx(s,{className:"w-4 h-4"}),_.jsx("span",{children:h||f(e?"active":"inactive")})]})})]})},bo=({children:e,maxWidth:t="max-w-5xl"})=>_.jsx("div",{className:"h-full bg-background dark:bg-background font-vazir overflow-auto",children:_.jsx("div",{className:`${t} mx-auto p-2 sm:p-3 lg:p-4`,children:e})}),Zx=M.createContext(),jk=({children:e})=>{const[t,s]=M.useState({initialParameters:{power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1},positionAndOptimization:{manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null},postProcessing:{rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"},projectionAcquisition:{imagingMode:"180",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"},reconstruction:{algorithm:"FBP",iterationCount:"10",filterType:"Ram-Lak",pixelSize:"0.1",reconstructionMode:"2D",outputFormat:"DICOM"}}),h=M.useCallback((x,S)=>{s(f=>({...f,[x]:S}))},[]),y=M.useCallback(()=>{const x={};return Object.entries(t).forEach(([S,f])=>{if(f&&Object.keys(f).length>0){const r={};Object.entries(f).forEach(([c,d])=>{(d!=null&&d!==""||typeof d=="boolean"||typeof d=="string"&&["mA","Al","8-bit","Medium","None","Low Pass","3x3","Sobel","TIFF","180","FBP","Ram-Lak","2D","DICOM"].includes(d))&&(r[c]=d)}),Object.keys(r).length>0&&(x[S]=r)}}),x},[t]);return _.jsx(Zx.Provider,{value:{formData:t,updateFormData:h,getAllFormData:y},children:e})},Ak=()=>M.useContext(Zx),Cc=(e,t)=>{const{formData:s,updateFormData:h}=Ak(),{i18n:y}=Wt(),x=M.useMemo(()=>{const d=s[e]||{};return{...t,...d}},[t,s,e]),S=M.useCallback(d=>{const{name:a,value:l,type:u,checked:m}=d.target;h(e,{...x,[a]:u==="checkbox"?m:l})},[x,h,e]),f=y.language==="fa";return{pageData:x,handleChange:S,updateFormData:d=>h(e,d),isRtl:f,flexDir:f?"flex-row-reverse":"flex-row",textAlign:f?"text-right":"text-left"}},Dk=()=>{const{t:e}=Wt(),{isConnected:t}=bc(),s=M.useMemo(()=>({power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1}),[]),{pageData:h,handleChange:y,updateFormData:x}=Cc("initialParameters",s),[S,f]=M.useState(null),r=[{value:"mA",label:"mA"},{value:"A",label:"A"}],c=[{value:"Al",label:e("aluminum")},{value:"Cu",label:e("copper")},{value:"Ag",label:e("silver")}],d=[{value:"8-bit",label:e("8bit")},{value:"16-bit",label:e("16bit")}],a=M.useCallback(()=>{const g=!h.tubeStatus;x({...h,tubeStatus:g,tubeVoltageDisplay:g?"100":"0",tubeCurrentDisplay:g?"10":"0"})},[h,x]),l=M.useCallback(()=>{x({...h,cabinCameraStatus:!h.cabinCameraStatus})},[h,x]),u=M.useCallback(()=>{x({...h,fastImaging:!h.fastImaging})},[h,x]),m=M.useCallback(()=>{x({...h,dualEnergy:!h.dualEnergy})},[h,x]),v={standard:()=>{f("standard"),x({...h,power:"50",tubeVoltage:"120",anodeCurrent:"10"})},highPower:()=>{f("highPower"),x({...h,power:"100",tubeVoltage:"150",anodeCurrent:"20"})},clear:()=>{f("clear"),x({...s})}};return _.jsxs(bo,{children:[_.jsx(Ns,{icon:Xa}),_.jsx("div",{className:"card p-3 sm:p-4 mb-3 sm:mb-4",children:_.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries({standard:e("presetStandard"),highPower:e("presetHighPower"),clear:e("clearAll")}).map(([g,b])=>_.jsx("button",{onClick:v[g],className:`px-3 sm:px-4 py-1.5 sm:py-2 variant-primary rounded-lg border border-border hover:variant-primary text-xs sm:text-sm font-medium font-vazir flex-shrink-0 ${S===g?"button-active no-transition":""}`,children:b},g))})}),_.jsxs("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:[_.jsx(ct,{label:e("power"),icon:TT,value:h.power,unit:"W",children:_.jsx(Xt,{type:"number",name:"power",value:h.power,onChange:y,placeholder:e("enterPower"),min:"0",step:"1"})}),_.jsx(ct,{label:e("tubeVoltage"),icon:Xa,value:h.tubeVoltage,unit:"kVp",children:_.jsx(Xt,{type:"number",name:"tubeVoltage",value:h.tubeVoltage,onChange:y,placeholder:e("enterTubeVoltage"),min:"0",step:"0.1"})}),_.jsx(ct,{label:e("anodeCurrent"),icon:U_,value:h.anodeCurrent,unit:h.anodeCurrentUnit,children:_.jsxs("div",{className:"flex gap-3",children:[_.jsx(Xt,{type:"number",name:"anodeCurrent",value:h.anodeCurrent,onChange:y,placeholder:e("enterAnodeCurrent"),min:"0",step:"0.1",className:"flex-1"}),_.jsx($n,{name:"anodeCurrentUnit",value:h.anodeCurrentUnit,onChange:y,options:r,className:"w-20"})]})}),_.jsx(ct,{label:e("filtration"),icon:Cs,children:_.jsxs("div",{className:"flex gap-3",children:[_.jsx($n,{name:"filtrationMaterial",value:h.filtrationMaterial,onChange:y,options:c,className:"flex-1"}),_.jsx(Xt,{type:"number",name:"filtrationThickness",value:h.filtrationThickness,onChange:y,placeholder:e("enterThickness"),min:"0",step:"0.01",className:"w-28"})]})}),_.jsx(ct,{label:e("exposureTime"),icon:rT,children:_.jsx(Xt,{type:"text",value:h.exposureTime,disabled:!0,className:"bg-background-secondary dark:bg-accent cursor-not-allowed"})}),_.jsx(ct,{label:e("bitDepth"),icon:Wl,children:_.jsx($n,{name:"bitDepth",value:h.bitDepth,onChange:y,options:d})}),_.jsx(ct,{label:e("singleCalibration"),icon:en,value:h.singleCalibration,children:_.jsx(Xt,{type:"number",name:"singleCalibration",value:h.singleCalibration,onChange:y,placeholder:e("enterSingleCalibration"),min:"0",step:"0.1"})}),_.jsx(ct,{label:e("rotateCalibration"),icon:en,value:h.rotateCalibration,children:_.jsx(Xt,{type:"number",name:"rotateCalibration",value:h.rotateCalibration,onChange:y,placeholder:e("enterRotateCalibration"),min:"0",step:"0.1"})}),_.jsx("div",{className:"card p-6 lg:col-span-2",children:_.jsxs(ct,{label:e("tubeStatus"),icon:xy,showValue:!1,children:[_.jsx(Zi,{active:h.tubeStatus,onClick:a,icon:xy,disabled:!t}),_.jsx("div",{className:"flex gap-2 sm:gap-4 mt-3 sm:mt-4",children:[{label:e("voltage"),value:h.tubeVoltageDisplay,unit:"kVp"},{label:e("current"),value:h.tubeCurrentDisplay,unit:"mA"}].map(({label:g,value:b,unit:w})=>_.jsxs("div",{className:"text-center flex-1",children:[_.jsx("div",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted mb-1 font-vazir",children:g}),_.jsxs("div",{className:"panel px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-border",children:[_.jsx("span",{className:"text-base sm:text-lg font-mono font-bold text-text dark:text-text",children:b}),_.jsx("span",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted ml-1 font-vazir",children:w})]})]},g))})]})}),_.jsxs(ct,{label:e("fastImaging"),icon:ic,showValue:!1,children:[_.jsx(Zi,{active:h.fastImaging,onClick:u,icon:ic,disabled:!t}),_.jsxs("div",{className:"mt-4",children:[_.jsx("label",{className:"font-medium text-text dark:text-text font-vazir mb-2 block",children:e("rotationSpeed")}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Xt,{type:"number",name:"rotationSpeed",value:h.rotationSpeed,onChange:y,placeholder:e("enterRotationSpeed"),min:"0",step:"0.1"}),_.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted font-vazir",children:"rpm"})]})]})]}),_.jsx(ct,{label:e("dualEnergy"),icon:Xa,showValue:!1,children:_.jsx(Zi,{active:h.dualEnergy,onClick:m,icon:Xa,disabled:!t})}),_.jsx(ct,{label:e("cabinCameraStatus"),icon:Sy,showValue:!1,children:_.jsx(Zi,{active:h.cabinCameraStatus,onClick:l,icon:Sy,disabled:!t})})]})]})},Rk=()=>{const{t:e}=Wt(),t=M.useMemo(()=>({manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null}),[]),{pageData:s,handleChange:h,updateFormData:y}=Cc("positionAndOptimization",t),x=[{value:"Low",label:e("joystickSpeedLow")},{value:"Medium",label:e("joystickSpeedMedium")},{value:"High",label:e("joystickSpeedHigh")}],S=M.useMemo(()=>[{name:"manipulatorX",label:e("manipulatorX"),placeholder:e("enterManipulatorX")},{name:"manipulatorY",label:e("manipulatorY"),placeholder:e("enterManipulatorY")},{name:"manipulatorZ",label:e("manipulatorZ"),placeholder:e("enterManipulatorZ")},{name:"manipulatorTheta",label:e("manipulatorTheta"),placeholder:e("enterManipulatorTheta")},{name:"manipulatorGamma",label:e("manipulatorGamma"),placeholder:e("enterManipulatorGamma")}],[e]),f=M.useCallback(r=>{const c=r.target.files[0];y({...s,uploadedFile:c?c.name:null})},[s,y]);return _.jsxs(bo,{children:[_.jsx(Ns,{icon:Rf}),_.jsxs("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:[_.jsx("div",{className:"card p-3 sm:p-4 lg:col-span-2",children:_.jsx(ct,{label:e("manipulator"),icon:Rf,showValue:!1,children:_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-2 sm:gap-3",children:S.map(r=>_.jsxs("div",{children:[_.jsx("label",{className:"text-xs sm:text-sm font-medium text-text dark:text-text mb-1 sm:mb-2 font-vazir block",children:r.label}),_.jsx(Xt,{type:"number",name:r.name,value:s[r.name],onChange:h,placeholder:r.placeholder,step:"0.1"})]},r.name))})})}),_.jsx(ct,{label:e("joystickSpeed"),icon:ck,children:_.jsx($n,{name:"joystickSpeed",value:s.joystickSpeed,onChange:h,options:x})}),_.jsxs(ct,{label:e("uploadFile"),icon:Kx,children:[_.jsx("input",{type:"file",name:"uploadedFile",onChange:f,className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:shadow-sm focus:shadow-primary/50 transition-colors font-vazir text-xs sm:text-sm"}),s.uploadedFile&&_.jsx("div",{className:"mt-2",children:_.jsxs("span",{className:"text-xs sm:text-sm text-primary dark:text-primary font-medium font-vazir",children:[e("selectedFile"),": ",s.uploadedFile]})})]})]})]})},qa=({children:e,onClick:t,variant:s="primary",size:h="md",disabled:y=!1,loading:x=!1,icon:S,className:f="",...r})=>{const{i18n:c}=Wt(),d=c.language==="fa",a="font-vazir rounded-xl font-medium shadow-sm hover:shadow-md",l="transition-all duration-300 ease-out",u={sm:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm",md:"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base",lg:"px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg"},m={primary:"bg-primary hover:bg-primary-dark text-white",secondary:"bg-background-secondary hover:bg-accent text-text-muted",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white"},v=`
    ${a}
    ${l}
    ${u[h]}
    ${m[s]}
    ${y?"opacity-50 cursor-not-allowed":""}
    ${f}
  `;return _.jsx("button",{onClick:t,disabled:y||x,className:v,...r,children:_.jsxs("div",{className:`flex items-center gap-1 sm:gap-2 ${d?"flex-row-reverse":""}`,children:[x?_.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):S&&_.jsx(S,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e]})})},Nk=()=>{const{t:e}=Wt(),{isConnected:t,send:s}=bc(),h=M.useMemo(()=>({imagingMode:"180",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"}),[]),{pageData:y,handleChange:x,updateFormData:S}=Cc("projectionAcquisition",h),f=[{value:"180",label:e("180degree")},{value:"360",label:e("360degree")}],r=M.useCallback(()=>{S({...y,hdrStatus:!y.hdrStatus})},[y,S]),c=M.useCallback(a=>{if(t){const l=`Action:${a}`;s(l)?console.log(` Action ${a} sent via WebSocket`):console.error(` Failed to send Action ${a}`)}},[t,s]),d=M.useMemo(()=>[{key:"Gain",label:e("gain"),icon:en},{key:"Offset",label:e("offset"),icon:en},{key:"Preprocess",label:e("preprocess"),icon:Kl}],[e]);return _.jsxs(bo,{children:[_.jsx(Ns,{icon:ic}),_.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[_.jsx(ct,{label:e("imagingMode"),icon:ic,children:_.jsx($n,{name:"imagingMode",value:y.imagingMode,onChange:x,options:f})}),_.jsx(ct,{label:e("multiSegmentSize"),icon:ef,value:y.multiSegmentSize,unit:"mm",children:_.jsx(Xt,{type:"number",name:"multiSegmentSize",value:y.multiSegmentSize,onChange:x,placeholder:e("enterMultiSegmentSize"),min:"0",step:"0.1"})}),_.jsx("div",{className:"card p-6 lg:col-span-2",children:_.jsx(ct,{label:e("imageAdjustments"),icon:en,showValue:!1,children:_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:d.map(({key:a,label:l,icon:u})=>_.jsx(qa,{variant:"secondary",icon:u,onClick:()=>c(a),disabled:!t,children:l},a))})})}),_.jsx("div",{className:"card p-6 lg:col-span-2",children:_.jsx(ct,{label:e("hdr"),icon:ef,showValue:!1,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx(Zi,{active:y.hdrStatus,onClick:r,icon:ef,disabled:!t,showStatus:!0}),y.hdrStatus&&_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("energyLevel1")}),_.jsx(Xt,{type:"number",name:"energyLevel1",value:y.energyLevel1,onChange:x,placeholder:e("enterEnergyLevel1"),min:"0",step:"1"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("energyLevel2")}),_.jsx(Xt,{type:"number",name:"energyLevel2",value:y.energyLevel2,onChange:x,placeholder:e("enterEnergyLevel2"),min:"0",step:"1"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("imageCount")}),_.jsx(Xt,{type:"number",name:"imageCount",value:y.imageCount,onChange:x,placeholder:e("enterImageCount"),min:"1",step:"1"})]})]})]})})})]})]})},Pk=()=>{const{t:e,i18n:t}=Wt(),{isConnected:s,send:h}=bc(),y=M.useMemo(()=>({rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"}),[]),{pageData:x,handleChange:S,updateFormData:f}=Cc("postProcessing",y),r=M.useMemo(()=>({rotation:[{value:"None",label:e("none")},{value:"90",label:e("90degree")},{value:"180",label:e("180degree")},{value:"270",label:e("270degree")}],fourierFilter:[{value:"Low Pass",label:e("lowPass")},{value:"Band Pass",label:e("bandPass")},{value:"High Pass",label:e("highPass")}],kernelSize:[{value:"3x3",label:"3x3"},{value:"5x5",label:"5x5"},{value:"7x7",label:"7x7"}],edgeMethod:[{value:"Sobel",label:e("sobel")},{value:"Canny",label:e("canny")},{value:"Prewitt",label:e("prewitt")}],exportFormat:[{value:"TIFF",label:e("tiff")},{value:"JPG",label:e("jpg")},{value:"DICOM",label:e("dicom")}]}),[e]),c=M.useMemo(()=>[{name:"medianFilter",label:e("medianFilter")},{name:"meanFilter",label:e("meanFilter")},{name:"varianceFilter",label:e("varianceFilter")},{name:"pseudoColorFilter",label:e("pseudoColorFilter")}],[e]),d=M.useMemo(()=>[{key:"Normalize",label:e("normalize"),icon:Kl},{key:"FFT",label:e("fft"),icon:Cs},{key:"FFTInverse",label:e("fftInverse"),icon:Cs}],[e]),a={mirroring:M.useCallback(()=>{f({...x,mirroring:!x.mirroring})},[x,f]),sharpening:M.useCallback(()=>{f({...x,sharpening:!x.sharpening})},[x,f]),edgeDetection:M.useCallback(()=>{f({...x,edgeDetection:!x.edgeDetection})},[x,f])},l=M.useCallback((v,g=null)=>{if(s){const b=g?`Action:${v}:${g}`:`Action:${v}`;h(b)?console.log(` Action ${v} sent via WebSocket`):console.error(` Failed to send Action ${v}`)}},[s,h]),m=t.language==="fa"?"text-right":"text-left";return _.jsxs(bo,{children:[_.jsx(Ns,{icon:Kl}),_.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[_.jsx(ct,{label:e("imageTransform"),icon:wc,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx($n,{name:"rotationAngle",value:x.rotationAngle,onChange:S,options:r.rotation}),_.jsx(Zi,{active:x.mirroring,onClick:a.mirroring,icon:bT,disabled:!s})]})}),_.jsx(ct,{label:e("basicOperations"),icon:Kl,showValue:!1,children:_.jsx("div",{className:"grid grid-cols-1 gap-3",children:d.map(({key:v,label:g,icon:b})=>_.jsx(qa,{variant:"secondary",icon:b,onClick:()=>l(v),disabled:!s,children:g},v))})}),_.jsx(ct,{label:e("fourierFilter"),icon:Cs,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx($n,{name:"fourierFilter",value:x.fourierFilter,onChange:S,options:r.fourierFilter}),_.jsx(qa,{variant:"secondary",icon:Cs,onClick:()=>l("FourierFilter",x.fourierFilter),disabled:!s,children:e("applyFourierFilter")})]})}),_.jsx(ct,{label:e("exportImage"),icon:ao,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx($n,{name:"exportFormat",value:x.exportFormat,onChange:S,options:r.exportFormat}),_.jsx(qa,{variant:"primary",icon:ao,onClick:()=>l("Export",x.exportFormat),disabled:!s,children:e("export")})]})}),_.jsx("div",{className:"card p-6 lg:col-span-2",children:_.jsx(ct,{label:e("imageFilters"),icon:Cs,showValue:!1,children:_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.map(v=>_.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer hover:text-primary transition-colors`,children:[_.jsx("input",{type:"checkbox",name:v.name,checked:x[v.name]||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),v.label]},v.name)),_.jsxs("div",{className:"sm:col-span-2",children:[_.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer`,children:[_.jsx("input",{type:"checkbox",name:"gaussianFilter",checked:x.gaussianFilter||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),e("gaussianFilter")]}),x.gaussianFilter&&_.jsx("div",{className:"mt-2 ml-6",children:_.jsx(Xt,{type:"number",name:"gaussianSigma",value:x.gaussianSigma,onChange:S,placeholder:e("enterGaussianSigma"),min:"0",step:"0.1"})})]})]})})}),_.jsx(ct,{label:e("sharpening"),icon:rc,showValue:!1,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx(Zi,{active:x.sharpening,onClick:a.sharpening,icon:rc,disabled:!s,showStatus:!0}),x.sharpening&&_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("kernelSize")}),_.jsx($n,{name:"kernelSize",value:x.kernelSize,onChange:S,options:r.kernelSize})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("sharpeningStrength")}),_.jsx(Xt,{type:"number",name:"sharpeningStrength",value:x.sharpeningStrength,onChange:S,placeholder:e("enterSharpeningStrength"),min:"0",step:"0.1"})]})]})]})}),_.jsx(ct,{label:e("edgeDetection"),icon:by,showValue:!1,children:_.jsxs("div",{className:"space-y-4",children:[_.jsx(Zi,{active:x.edgeDetection,onClick:a.edgeDetection,icon:by,disabled:!s,showStatus:!0}),x.edgeDetection&&_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("threshold")}),_.jsx(Xt,{type:"number",name:"threshold",value:x.threshold,onChange:S,placeholder:e("enterThreshold"),min:"0",step:"1"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:e("edgeMethod")}),_.jsx($n,{name:"edgeMethod",value:x.edgeMethod,onChange:S,options:r.edgeMethod})]})]})]})})]})]})};function Lk(){return _.jsxs(_.Fragment,{children:[_.jsx(Ns,{icon:Xa}),_.jsx(qa,{variant:"secondary"})]})}const Sd="-",Fk=e=>{const t=Bk(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:h}=e;return{getClassGroupId:S=>{const f=S.split(Sd);return f[0]===""&&f.length!==1&&f.shift(),Qx(f,t)||zk(S)},getConflictingClassGroupIds:(S,f)=>{const r=s[S]||[];return f&&h[S]?[...r,...h[S]]:r}}},Qx=(e,t)=>{var S;if(e.length===0)return t.classGroupId;const s=e[0],h=t.nextPart.get(s),y=h?Qx(e.slice(1),h):void 0;if(y)return y;if(t.validators.length===0)return;const x=e.join(Sd);return(S=t.validators.find(({validator:f})=>f(x)))==null?void 0:S.classGroupId},_y=/^\[(.+)\]$/,zk=e=>{if(_y.test(e)){const t=_y.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Bk=e=>{const{theme:t,classGroups:s}=e,h={nextPart:new Map,validators:[]};for(const y in s)Nf(s[y],h,y,t);return h},Nf=(e,t,s,h)=>{e.forEach(y=>{if(typeof y=="string"){const x=y===""?t:Ty(t,y);x.classGroupId=s;return}if(typeof y=="function"){if(Vk(y)){Nf(y(h),t,s,h);return}t.validators.push({validator:y,classGroupId:s});return}Object.entries(y).forEach(([x,S])=>{Nf(S,Ty(t,x),s,h)})})},Ty=(e,t)=>{let s=e;return t.split(Sd).forEach(h=>{s.nextPart.has(h)||s.nextPart.set(h,{nextPart:new Map,validators:[]}),s=s.nextPart.get(h)}),s},Vk=e=>e.isThemeGetter,Uk=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,h=new Map;const y=(x,S)=>{s.set(x,S),t++,t>e&&(t=0,h=s,s=new Map)};return{get(x){let S=s.get(x);if(S!==void 0)return S;if((S=h.get(x))!==void 0)return y(x,S),S},set(x,S){s.has(x)?s.set(x,S):y(x,S)}}},Pf="!",Lf=":",Hk=Lf.length,Ik=e=>{const{prefix:t,experimentalParseClassName:s}=e;let h=y=>{const x=[];let S=0,f=0,r=0,c;for(let m=0;m<y.length;m++){let v=y[m];if(S===0&&f===0){if(v===Lf){x.push(y.slice(r,m)),r=m+Hk;continue}if(v==="/"){c=m;continue}}v==="["?S++:v==="]"?S--:v==="("?f++:v===")"&&f--}const d=x.length===0?y:y.substring(r),a=Yk(d),l=a!==d,u=c&&c>r?c-r:void 0;return{modifiers:x,hasImportantModifier:l,baseClassName:a,maybePostfixModifierPosition:u}};if(t){const y=t+Lf,x=h;h=S=>S.startsWith(y)?x(S.substring(y.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:S,maybePostfixModifierPosition:void 0}}if(s){const y=h;h=x=>s({className:x,parseClassName:y})}return h},Yk=e=>e.endsWith(Pf)?e.substring(0,e.length-1):e.startsWith(Pf)?e.substring(1):e,Xk=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(h=>[h,!0]));return h=>{if(h.length<=1)return h;const y=[];let x=[];return h.forEach(S=>{S[0]==="["||t[S]?(y.push(...x.sort(),S),x=[]):x.push(S)}),y.push(...x.sort()),y}},Gk=e=>({cache:Uk(e.cacheSize),parseClassName:Ik(e),sortModifiers:Xk(e),...Fk(e)}),$k=/\s+/,Wk=(e,t)=>{const{parseClassName:s,getClassGroupId:h,getConflictingClassGroupIds:y,sortModifiers:x}=t,S=[],f=e.trim().split($k);let r="";for(let c=f.length-1;c>=0;c-=1){const d=f[c],{isExternal:a,modifiers:l,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:v}=s(d);if(a){r=d+(r.length>0?" "+r:r);continue}let g=!!v,b=h(g?m.substring(0,v):m);if(!b){if(!g){r=d+(r.length>0?" "+r:r);continue}if(b=h(m),!b){r=d+(r.length>0?" "+r:r);continue}g=!1}const w=x(l).join(":"),T=u?w+Pf:w,k=T+b;if(S.includes(k))continue;S.push(k);const O=y(b,g);for(let D=0;D<O.length;++D){const P=O[D];S.push(T+P)}r=d+(r.length>0?" "+r:r)}return r};function qk(){let e=0,t,s,h="";for(;e<arguments.length;)(t=arguments[e++])&&(s=Jx(t))&&(h&&(h+=" "),h+=s);return h}const Jx=e=>{if(typeof e=="string")return e;let t,s="";for(let h=0;h<e.length;h++)e[h]&&(t=Jx(e[h]))&&(s&&(s+=" "),s+=t);return s};function Kk(e,...t){let s,h,y,x=S;function S(r){const c=t.reduce((d,a)=>a(d),e());return s=Gk(c),h=s.cache.get,y=s.cache.set,x=f,f(r)}function f(r){const c=h(r);if(c)return c;const d=Wk(r,s);return y(r,d),d}return function(){return x(qk.apply(null,arguments))}}const Ot=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},eb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,tb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Zk=/^\d+\/\d+$/,Qk=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jk=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vs=e=>Zk.test(e),We=e=>!!e&&!Number.isNaN(Number(e)),qi=e=>!!e&&Number.isInteger(Number(e)),tf=e=>e.endsWith("%")&&We(e.slice(0,-1)),yi=e=>Qk.test(e),iE=()=>!0,rE=e=>Jk.test(e)&&!eE.test(e),nb=()=>!1,sE=e=>tE.test(e),aE=e=>nE.test(e),oE=e=>!Ne(e)&&!Pe(e),lE=e=>Ps(e,sb,nb),Ne=e=>eb.test(e),Sr=e=>Ps(e,ab,rE),nf=e=>Ps(e,dE,We),ky=e=>Ps(e,ib,nb),cE=e=>Ps(e,rb,aE),zl=e=>Ps(e,ob,sE),Pe=e=>tb.test(e),Ba=e=>Ls(e,ab),uE=e=>Ls(e,mE),Ey=e=>Ls(e,ib),hE=e=>Ls(e,sb),fE=e=>Ls(e,rb),Bl=e=>Ls(e,ob,!0),Ps=(e,t,s)=>{const h=eb.exec(e);return h?h[1]?t(h[1]):s(h[2]):!1},Ls=(e,t,s=!1)=>{const h=tb.exec(e);return h?h[1]?t(h[1]):s:!1},ib=e=>e==="position"||e==="percentage",rb=e=>e==="image"||e==="url",sb=e=>e==="length"||e==="size"||e==="bg-size",ab=e=>e==="length",dE=e=>e==="number",mE=e=>e==="family-name",ob=e=>e==="shadow",gE=()=>{const e=Ot("color"),t=Ot("font"),s=Ot("text"),h=Ot("font-weight"),y=Ot("tracking"),x=Ot("leading"),S=Ot("breakpoint"),f=Ot("container"),r=Ot("spacing"),c=Ot("radius"),d=Ot("shadow"),a=Ot("inset-shadow"),l=Ot("text-shadow"),u=Ot("drop-shadow"),m=Ot("blur"),v=Ot("perspective"),g=Ot("aspect"),b=Ot("ease"),w=Ot("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...k(),Pe,Ne],D=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],F=()=>[Pe,Ne,r],V=()=>[vs,"full","auto",...F()],$=()=>[qi,"none","subgrid",Pe,Ne],te=()=>["auto",{span:["full",qi,Pe,Ne]},qi,Pe,Ne],X=()=>[qi,"auto",Pe,Ne],Q=()=>["auto","min","max","fr",Pe,Ne],se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...F()],q=()=>[vs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],Z=()=>[e,Pe,Ne],L=()=>[...k(),Ey,ky,{position:[Pe,Ne]}],A=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",hE,lE,{size:[Pe,Ne]}],R=()=>[tf,Ba,Sr],I=()=>["","none","full",c,Pe,Ne],B=()=>["",We,Ba,Sr],z=()=>["solid","dashed","dotted","double"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>[We,tf,Ey,ky],ne=()=>["","none",m,Pe,Ne],ee=()=>["none",We,Pe,Ne],de=()=>["none",We,Pe,Ne],le=()=>[We,Pe,Ne],we=()=>[vs,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yi],breakpoint:[yi],color:[iE],container:[yi],"drop-shadow":[yi],ease:["in","out","in-out"],font:[oE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yi],shadow:[yi],spacing:["px",We],text:[yi],"text-shadow":[yi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vs,Ne,Pe,g]}],container:["container"],columns:[{columns:[We,Ne,Pe,f]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[qi,"auto",Pe,Ne]}],basis:[{basis:[vs,"full","auto",f,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,vs,"auto","initial","none",Ne]}],grow:[{grow:["",We,Pe,Ne]}],shrink:[{shrink:["",We,Pe,Ne]}],order:[{order:[qi,"first","last","none",Pe,Ne]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Q()}],"auto-rows":[{"auto-rows":Q()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...se(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...se()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":se()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[f,"screen",...q()]}],"min-w":[{"min-w":[f,"screen","none",...q()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[S]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",s,Ba,Sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[h,Pe,nf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",tf,Ne]}],"font-family":[{font:[uE,Ne,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[y,Pe,Ne]}],"line-clamp":[{"line-clamp":[We,"none",Pe,nf]}],leading:[{leading:[x,...F()]}],"list-image":[{"list-image":["none",Pe,Ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Pe,Ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",Pe,Sr]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[We,"auto",Pe,Ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe,Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe,Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:A()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},qi,Pe,Ne],radial:["",Pe,Ne],conic:[qi,Pe,Ne]},fE,cE]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:R()}],"gradient-via-pos":[{via:R()}],"gradient-to-pos":[{to:R()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:I()}],"rounded-s":[{"rounded-s":I()}],"rounded-e":[{"rounded-e":I()}],"rounded-t":[{"rounded-t":I()}],"rounded-r":[{"rounded-r":I()}],"rounded-b":[{"rounded-b":I()}],"rounded-l":[{"rounded-l":I()}],"rounded-ss":[{"rounded-ss":I()}],"rounded-se":[{"rounded-se":I()}],"rounded-ee":[{"rounded-ee":I()}],"rounded-es":[{"rounded-es":I()}],"rounded-tl":[{"rounded-tl":I()}],"rounded-tr":[{"rounded-tr":I()}],"rounded-br":[{"rounded-br":I()}],"rounded-bl":[{"rounded-bl":I()}],"border-w":[{border:B()}],"border-w-x":[{"border-x":B()}],"border-w-y":[{"border-y":B()}],"border-w-s":[{"border-s":B()}],"border-w-e":[{"border-e":B()}],"border-w-t":[{"border-t":B()}],"border-w-r":[{"border-r":B()}],"border-w-b":[{"border-b":B()}],"border-w-l":[{"border-l":B()}],"divide-x":[{"divide-x":B()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":B()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...z(),"hidden","none"]}],"divide-style":[{divide:[...z(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,Pe,Ne]}],"outline-w":[{outline:["",We,Ba,Sr]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",d,Bl,zl]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",a,Bl,zl]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[We,Sr]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":B()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",l,Bl,zl]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[We,Pe,Ne]}],"mix-blend":[{"mix-blend":[...W(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":W()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":Y()}],"mask-image-linear-to-pos":[{"mask-linear-to":Y()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":Y()}],"mask-image-t-to-pos":[{"mask-t-to":Y()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":Y()}],"mask-image-r-to-pos":[{"mask-r-to":Y()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":Y()}],"mask-image-b-to-pos":[{"mask-b-to":Y()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":Y()}],"mask-image-l-to-pos":[{"mask-l-to":Y()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":Y()}],"mask-image-x-to-pos":[{"mask-x-to":Y()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":Y()}],"mask-image-y-to-pos":[{"mask-y-to":Y()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[Pe,Ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":Y()}],"mask-image-radial-to-pos":[{"mask-radial-to":Y()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":Y()}],"mask-image-conic-to-pos":[{"mask-conic-to":Y()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:A()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Pe,Ne]}],filter:[{filter:["","none",Pe,Ne]}],blur:[{blur:ne()}],brightness:[{brightness:[We,Pe,Ne]}],contrast:[{contrast:[We,Pe,Ne]}],"drop-shadow":[{"drop-shadow":["","none",u,Bl,zl]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",We,Pe,Ne]}],"hue-rotate":[{"hue-rotate":[We,Pe,Ne]}],invert:[{invert:["",We,Pe,Ne]}],saturate:[{saturate:[We,Pe,Ne]}],sepia:[{sepia:["",We,Pe,Ne]}],"backdrop-filter":[{"backdrop-filter":["","none",Pe,Ne]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[We,Pe,Ne]}],"backdrop-contrast":[{"backdrop-contrast":[We,Pe,Ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,Pe,Ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,Pe,Ne]}],"backdrop-invert":[{"backdrop-invert":["",We,Pe,Ne]}],"backdrop-opacity":[{"backdrop-opacity":[We,Pe,Ne]}],"backdrop-saturate":[{"backdrop-saturate":[We,Pe,Ne]}],"backdrop-sepia":[{"backdrop-sepia":["",We,Pe,Ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Pe,Ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",Pe,Ne]}],ease:[{ease:["linear","initial",b,Pe,Ne]}],delay:[{delay:[We,Pe,Ne]}],animate:[{animate:["none",w,Pe,Ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Pe,Ne]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:ee()}],"rotate-x":[{"rotate-x":ee()}],"rotate-y":[{"rotate-y":ee()}],"rotate-z":[{"rotate-z":ee()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:le()}],"skew-x":[{"skew-x":le()}],"skew-y":[{"skew-y":le()}],transform:[{transform:[Pe,Ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe,Ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe,Ne]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[We,Ba,Sr,nf]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jn=Kk(gE),Cd=M.createContext({});function _c(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const _d=typeof window<"u",lb=_d?M.useLayoutEffect:M.useEffect,Tc=M.createContext(null);function Td(e,t){e.indexOf(t)===-1&&e.push(t)}function kd(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const _i=(e,t,s)=>s>t?t:s<e?e:s;let Ed=()=>{};const Ti={},cb=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function ub(e){return typeof e=="object"&&e!==null}const hb=e=>/^0[^.\s]+$/u.test(e);function Od(e){let t;return()=>(t===void 0&&(t=e()),t)}const An=e=>e,pE=(e,t)=>s=>t(e(s)),wo=(...e)=>e.reduce(pE),lo=(e,t,s)=>{const h=t-e;return h===0?1:(s-e)/h};class Md{constructor(){this.subscriptions=[]}add(t){return Td(this.subscriptions,t),()=>kd(this.subscriptions,t)}notify(t,s,h){const y=this.subscriptions.length;if(y)if(y===1)this.subscriptions[0](t,s,h);else for(let x=0;x<y;x++){const S=this.subscriptions[x];S&&S(t,s,h)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kn=e=>e*1e3,Zn=e=>e/1e3;function fb(e,t){return t?e*(1e3/t):0}const db=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,yE=1e-7,vE=12;function xE(e,t,s,h,y){let x,S,f=0;do S=t+(s-t)/2,x=db(S,h,y)-e,x>0?s=S:t=S;while(Math.abs(x)>yE&&++f<vE);return S}function So(e,t,s,h){if(e===t&&s===h)return An;const y=x=>xE(x,0,1,e,s);return x=>x===0||x===1?x:db(y(x),t,h)}const mb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,gb=e=>t=>1-e(1-t),pb=So(.33,1.53,.69,.99),jd=gb(pb),yb=mb(jd),vb=e=>(e*=2)<1?.5*jd(e):.5*(2-Math.pow(2,-10*(e-1))),Ad=e=>1-Math.sin(Math.acos(e)),xb=gb(Ad),bb=mb(Ad),bE=So(.42,0,1,1),wE=So(0,0,.58,1),wb=So(.42,0,.58,1),SE=e=>Array.isArray(e)&&typeof e[0]!="number",Sb=e=>Array.isArray(e)&&typeof e[0]=="number",CE={linear:An,easeIn:bE,easeInOut:wb,easeOut:wE,circIn:Ad,circInOut:bb,circOut:xb,backIn:jd,backInOut:yb,backOut:pb,anticipate:vb},_E=e=>typeof e=="string",Oy=e=>{if(Sb(e)){Ed(e.length===4);const[t,s,h,y]=e;return So(t,s,h,y)}else if(_E(e))return CE[e];return e},Vl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function TE(e,t){let s=new Set,h=new Set,y=!1,x=!1;const S=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function r(d){S.has(d)&&(c.schedule(d),e()),d(f)}const c={schedule:(d,a=!1,l=!1)=>{const m=l&&y?s:h;return a&&S.add(d),m.has(d)||m.add(d),d},cancel:d=>{h.delete(d),S.delete(d)},process:d=>{if(f=d,y){x=!0;return}y=!0,[s,h]=[h,s],s.forEach(r),s.clear(),y=!1,x&&(x=!1,c.process(d))}};return c}const kE=40;function Cb(e,t){let s=!1,h=!0;const y={delta:0,timestamp:0,isProcessing:!1},x=()=>s=!0,S=Vl.reduce((T,k)=>(T[k]=TE(x),T),{}),{setup:f,read:r,resolveKeyframes:c,preUpdate:d,update:a,preRender:l,render:u,postRender:m}=S,v=()=>{const T=Ti.useManualTiming?y.timestamp:performance.now();s=!1,Ti.useManualTiming||(y.delta=h?1e3/60:Math.max(Math.min(T-y.timestamp,kE),1)),y.timestamp=T,y.isProcessing=!0,f.process(y),r.process(y),c.process(y),d.process(y),a.process(y),l.process(y),u.process(y),m.process(y),y.isProcessing=!1,s&&t&&(h=!1,e(v))},g=()=>{s=!0,h=!0,y.isProcessing||e(v)};return{schedule:Vl.reduce((T,k)=>{const O=S[k];return T[k]=(D,P=!1,F=!1)=>(s||g(),O.schedule(D,P,F)),T},{}),cancel:T=>{for(let k=0;k<Vl.length;k++)S[Vl[k]].cancel(T)},state:y,steps:S}}const{schedule:ht,cancel:er,state:Bt,steps:rf}=Cb(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0);let Zl;function EE(){Zl=void 0}const un={now:()=>(Zl===void 0&&un.set(Bt.isProcessing||Ti.useManualTiming?Bt.timestamp:performance.now()),Zl),set:e=>{Zl=e,queueMicrotask(EE)}},_b=e=>t=>typeof t=="string"&&t.startsWith(e),Dd=_b("--"),OE=_b("var(--"),Rd=e=>OE(e)?ME.test(e.split("/*")[0].trim()):!1,ME=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fs={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},co={...Fs,transform:e=>_i(0,1,e)},Ul={...Fs,default:1},Ka=e=>Math.round(e*1e5)/1e5,Nd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function jE(e){return e==null}const AE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Pd=(e,t)=>s=>!!(typeof s=="string"&&AE.test(s)&&s.startsWith(e)||t&&!jE(s)&&Object.prototype.hasOwnProperty.call(s,t)),Tb=(e,t,s)=>h=>{if(typeof h!="string")return h;const[y,x,S,f]=h.match(Nd);return{[e]:parseFloat(y),[t]:parseFloat(x),[s]:parseFloat(S),alpha:f!==void 0?parseFloat(f):1}},DE=e=>_i(0,255,e),sf={...Fs,transform:e=>Math.round(DE(e))},kr={test:Pd("rgb","red"),parse:Tb("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:h=1})=>"rgba("+sf.transform(e)+", "+sf.transform(t)+", "+sf.transform(s)+", "+Ka(co.transform(h))+")"};function RE(e){let t="",s="",h="",y="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),h=e.substring(5,7),y=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),h=e.substring(3,4),y=e.substring(4,5),t+=t,s+=s,h+=h,y+=y),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(h,16),alpha:y?parseInt(y,16)/255:1}}const Ff={test:Pd("#"),parse:RE,transform:kr.transform},Co=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ki=Co("deg"),Qn=Co("%"),He=Co("px"),NE=Co("vh"),PE=Co("vw"),My={...Qn,parse:e=>Qn.parse(e)/100,transform:e=>Qn.transform(e*100)},_s={test:Pd("hsl","hue"),parse:Tb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:h=1})=>"hsla("+Math.round(e)+", "+Qn.transform(Ka(t))+", "+Qn.transform(Ka(s))+", "+Ka(co.transform(h))+")"},Tt={test:e=>kr.test(e)||Ff.test(e)||_s.test(e),parse:e=>kr.test(e)?kr.parse(e):_s.test(e)?_s.parse(e):Ff.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?kr.transform(e):_s.transform(e),getAnimatableNone:e=>{const t=Tt.parse(e);return t.alpha=0,Tt.transform(t)}},LE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FE(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Nd))==null?void 0:t.length)||0)+(((s=e.match(LE))==null?void 0:s.length)||0)>0}const kb="number",Eb="color",zE="var",BE="var(",jy="${}",VE=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uo(e){const t=e.toString(),s=[],h={color:[],number:[],var:[]},y=[];let x=0;const f=t.replace(VE,r=>(Tt.test(r)?(h.color.push(x),y.push(Eb),s.push(Tt.parse(r))):r.startsWith(BE)?(h.var.push(x),y.push(zE),s.push(r)):(h.number.push(x),y.push(kb),s.push(parseFloat(r))),++x,jy)).split(jy);return{values:s,split:f,indexes:h,types:y}}function Ob(e){return uo(e).values}function Mb(e){const{split:t,types:s}=uo(e),h=t.length;return y=>{let x="";for(let S=0;S<h;S++)if(x+=t[S],y[S]!==void 0){const f=s[S];f===kb?x+=Ka(y[S]):f===Eb?x+=Tt.transform(y[S]):x+=y[S]}return x}}const UE=e=>typeof e=="number"?0:Tt.test(e)?Tt.getAnimatableNone(e):e;function HE(e){const t=Ob(e);return Mb(e)(t.map(UE))}const tr={test:FE,parse:Ob,createTransformer:Mb,getAnimatableNone:HE};function af(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function IE({hue:e,saturation:t,lightness:s,alpha:h}){e/=360,t/=100,s/=100;let y=0,x=0,S=0;if(!t)y=x=S=s;else{const f=s<.5?s*(1+t):s+t-s*t,r=2*s-f;y=af(r,f,e+1/3),x=af(r,f,e),S=af(r,f,e-1/3)}return{red:Math.round(y*255),green:Math.round(x*255),blue:Math.round(S*255),alpha:h}}function sc(e,t){return s=>s>0?t:e}const dt=(e,t,s)=>e+(t-e)*s,of=(e,t,s)=>{const h=e*e,y=s*(t*t-h)+h;return y<0?0:Math.sqrt(y)},YE=[Ff,kr,_s],XE=e=>YE.find(t=>t.test(e));function Ay(e){const t=XE(e);if(!t)return!1;let s=t.parse(e);return t===_s&&(s=IE(s)),s}const Dy=(e,t)=>{const s=Ay(e),h=Ay(t);if(!s||!h)return sc(e,t);const y={...s};return x=>(y.red=of(s.red,h.red,x),y.green=of(s.green,h.green,x),y.blue=of(s.blue,h.blue,x),y.alpha=dt(s.alpha,h.alpha,x),kr.transform(y))},zf=new Set(["none","hidden"]);function GE(e,t){return zf.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function $E(e,t){return s=>dt(e,t,s)}function Ld(e){return typeof e=="number"?$E:typeof e=="string"?Rd(e)?sc:Tt.test(e)?Dy:KE:Array.isArray(e)?jb:typeof e=="object"?Tt.test(e)?Dy:WE:sc}function jb(e,t){const s=[...e],h=s.length,y=e.map((x,S)=>Ld(x)(x,t[S]));return x=>{for(let S=0;S<h;S++)s[S]=y[S](x);return s}}function WE(e,t){const s={...e,...t},h={};for(const y in s)e[y]!==void 0&&t[y]!==void 0&&(h[y]=Ld(e[y])(e[y],t[y]));return y=>{for(const x in h)s[x]=h[x](y);return s}}function qE(e,t){const s=[],h={color:0,var:0,number:0};for(let y=0;y<t.values.length;y++){const x=t.types[y],S=e.indexes[x][h[x]],f=e.values[S]??0;s[y]=f,h[x]++}return s}const KE=(e,t)=>{const s=tr.createTransformer(t),h=uo(e),y=uo(t);return h.indexes.var.length===y.indexes.var.length&&h.indexes.color.length===y.indexes.color.length&&h.indexes.number.length>=y.indexes.number.length?zf.has(e)&&!y.values.length||zf.has(t)&&!h.values.length?GE(e,t):wo(jb(qE(h,y),y.values),s):sc(e,t)};function Ab(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?dt(e,t,s):Ld(e)(e,t)}const ZE=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>ht.update(t,s),stop:()=>er(t),now:()=>Bt.isProcessing?Bt.timestamp:un.now()}},Db=(e,t,s=10)=>{let h="";const y=Math.max(Math.round(t/s),2);for(let x=0;x<y;x++)h+=Math.round(e(x/(y-1))*1e4)/1e4+", ";return`linear(${h.substring(0,h.length-2)})`},ac=2e4;function Fd(e){let t=0;const s=50;let h=e.next(t);for(;!h.done&&t<ac;)t+=s,h=e.next(t);return t>=ac?1/0:t}function QE(e,t=100,s){const h=s({...e,keyframes:[0,t]}),y=Math.min(Fd(h),ac);return{type:"keyframes",ease:x=>h.next(y*x).value/t,duration:Zn(y)}}const JE=5;function Rb(e,t,s){const h=Math.max(t-JE,0);return fb(s-e(h),t-h)}const pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ry=.001;function eO({duration:e=pt.duration,bounce:t=pt.bounce,velocity:s=pt.velocity,mass:h=pt.mass}){let y,x,S=1-t;S=_i(pt.minDamping,pt.maxDamping,S),e=_i(pt.minDuration,pt.maxDuration,Zn(e)),S<1?(y=c=>{const d=c*S,a=d*e,l=d-s,u=Bf(c,S),m=Math.exp(-a);return Ry-l/u*m},x=c=>{const a=c*S*e,l=a*s+s,u=Math.pow(S,2)*Math.pow(c,2)*e,m=Math.exp(-a),v=Bf(Math.pow(c,2),S);return(-y(c)+Ry>0?-1:1)*((l-u)*m)/v}):(y=c=>{const d=Math.exp(-c*e),a=(c-s)*e+1;return-.001+d*a},x=c=>{const d=Math.exp(-c*e),a=(s-c)*(e*e);return d*a});const f=5/e,r=nO(y,x,f);if(e=Kn(e),isNaN(r))return{stiffness:pt.stiffness,damping:pt.damping,duration:e};{const c=Math.pow(r,2)*h;return{stiffness:c,damping:S*2*Math.sqrt(h*c),duration:e}}}const tO=12;function nO(e,t,s){let h=s;for(let y=1;y<tO;y++)h=h-e(h)/t(h);return h}function Bf(e,t){return e*Math.sqrt(1-t*t)}const iO=["duration","bounce"],rO=["stiffness","damping","mass"];function Ny(e,t){return t.some(s=>e[s]!==void 0)}function sO(e){let t={velocity:pt.velocity,stiffness:pt.stiffness,damping:pt.damping,mass:pt.mass,isResolvedFromDuration:!1,...e};if(!Ny(e,rO)&&Ny(e,iO))if(e.visualDuration){const s=e.visualDuration,h=2*Math.PI/(s*1.2),y=h*h,x=2*_i(.05,1,1-(e.bounce||0))*Math.sqrt(y);t={...t,mass:pt.mass,stiffness:y,damping:x}}else{const s=eO(e);t={...t,...s,mass:pt.mass},t.isResolvedFromDuration=!0}return t}function oc(e=pt.visualDuration,t=pt.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:h,restDelta:y}=s;const x=s.keyframes[0],S=s.keyframes[s.keyframes.length-1],f={done:!1,value:x},{stiffness:r,damping:c,mass:d,duration:a,velocity:l,isResolvedFromDuration:u}=sO({...s,velocity:-Zn(s.velocity||0)}),m=l||0,v=c/(2*Math.sqrt(r*d)),g=S-x,b=Zn(Math.sqrt(r/d)),w=Math.abs(g)<5;h||(h=w?pt.restSpeed.granular:pt.restSpeed.default),y||(y=w?pt.restDelta.granular:pt.restDelta.default);let T;if(v<1){const O=Bf(b,v);T=D=>{const P=Math.exp(-v*b*D);return S-P*((m+v*b*g)/O*Math.sin(O*D)+g*Math.cos(O*D))}}else if(v===1)T=O=>S-Math.exp(-b*O)*(g+(m+b*g)*O);else{const O=b*Math.sqrt(v*v-1);T=D=>{const P=Math.exp(-v*b*D),F=Math.min(O*D,300);return S-P*((m+v*b*g)*Math.sinh(F)+O*g*Math.cosh(F))/O}}const k={calculatedDuration:u&&a||null,next:O=>{const D=T(O);if(u)f.done=O>=a;else{let P=O===0?m:0;v<1&&(P=O===0?Kn(m):Rb(T,O,D));const F=Math.abs(P)<=h,V=Math.abs(S-D)<=y;f.done=F&&V}return f.value=f.done?S:D,f},toString:()=>{const O=Math.min(Fd(k),ac),D=Db(P=>k.next(O*P).value,O,30);return O+"ms "+D},toTransition:()=>{}};return k}oc.applyToOptions=e=>{const t=QE(e,100,oc);return e.ease=t.ease,e.duration=Kn(t.duration),e.type="keyframes",e};function Vf({keyframes:e,velocity:t=0,power:s=.8,timeConstant:h=325,bounceDamping:y=10,bounceStiffness:x=500,modifyTarget:S,min:f,max:r,restDelta:c=.5,restSpeed:d}){const a=e[0],l={done:!1,value:a},u=F=>f!==void 0&&F<f||r!==void 0&&F>r,m=F=>f===void 0?r:r===void 0||Math.abs(f-F)<Math.abs(r-F)?f:r;let v=s*t;const g=a+v,b=S===void 0?g:S(g);b!==g&&(v=b-a);const w=F=>-v*Math.exp(-F/h),T=F=>b+w(F),k=F=>{const V=w(F),$=T(F);l.done=Math.abs(V)<=c,l.value=l.done?b:$};let O,D;const P=F=>{u(l.value)&&(O=F,D=oc({keyframes:[l.value,m(l.value)],velocity:Rb(T,F,l.value),damping:y,stiffness:x,restDelta:c,restSpeed:d}))};return P(0),{calculatedDuration:null,next:F=>{let V=!1;return!D&&O===void 0&&(V=!0,k(F),P(F)),O!==void 0&&F>=O?D.next(F-O):(!V&&k(F),l)}}}function aO(e,t,s){const h=[],y=s||Ti.mix||Ab,x=e.length-1;for(let S=0;S<x;S++){let f=y(e[S],e[S+1]);if(t){const r=Array.isArray(t)?t[S]||An:t;f=wo(r,f)}h.push(f)}return h}function oO(e,t,{clamp:s=!0,ease:h,mixer:y}={}){const x=e.length;if(Ed(x===t.length),x===1)return()=>t[0];if(x===2&&t[0]===t[1])return()=>t[1];const S=e[0]===e[1];e[0]>e[x-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=aO(t,h,y),r=f.length,c=d=>{if(S&&d<e[0])return t[0];let a=0;if(r>1)for(;a<e.length-2&&!(d<e[a+1]);a++);const l=lo(e[a],e[a+1],d);return f[a](l)};return s?d=>c(_i(e[0],e[x-1],d)):c}function lO(e,t){const s=e[e.length-1];for(let h=1;h<=t;h++){const y=lo(0,t,h);e.push(dt(s,1,y))}}function cO(e){const t=[0];return lO(t,e.length-1),t}function uO(e,t){return e.map(s=>s*t)}function hO(e,t){return e.map(()=>t||wb).splice(0,e.length-1)}function Za({duration:e=300,keyframes:t,times:s,ease:h="easeInOut"}){const y=SE(h)?h.map(Oy):Oy(h),x={done:!1,value:t[0]},S=uO(s&&s.length===t.length?s:cO(t),e),f=oO(S,t,{ease:Array.isArray(y)?y:hO(t,y)});return{calculatedDuration:e,next:r=>(x.value=f(r),x.done=r>=e,x)}}const fO=e=>e!==null;function zd(e,{repeat:t,repeatType:s="loop"},h,y=1){const x=e.filter(fO),f=y<0||t&&s!=="loop"&&t%2===1?0:x.length-1;return!f||h===void 0?x[f]:h}const dO={decay:Vf,inertia:Vf,tween:Za,keyframes:Za,spring:oc};function Nb(e){typeof e.type=="string"&&(e.type=dO[e.type])}class Bd{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const mO=e=>e/100;class Vd extends Bd{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var h,y;const{motionValue:s}=this.options;s&&s.updatedAt!==un.now()&&this.tick(un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(y=(h=this.options).onStop)==null||y.call(h))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Nb(t);const{type:s=Za,repeat:h=0,repeatDelay:y=0,repeatType:x,velocity:S=0}=t;let{keyframes:f}=t;const r=s||Za;r!==Za&&typeof f[0]!="number"&&(this.mixKeyframes=wo(mO,Ab(f[0],f[1])),f=[0,100]);const c=r({...t,keyframes:f});x==="mirror"&&(this.mirroredGenerator=r({...t,keyframes:[...f].reverse(),velocity:-S})),c.calculatedDuration===null&&(c.calculatedDuration=Fd(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+y,this.totalDuration=this.resolvedDuration*(h+1)-y,this.generator=c}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:h,totalDuration:y,mixKeyframes:x,mirroredGenerator:S,resolvedDuration:f,calculatedDuration:r}=this;if(this.startTime===null)return h.next(0);const{delay:c=0,keyframes:d,repeat:a,repeatType:l,repeatDelay:u,type:m,onUpdate:v,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-y/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const b=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>y;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let T=this.currentTime,k=h;if(a){const F=Math.min(this.currentTime,y)/f;let V=Math.floor(F),$=F%1;!$&&F>=1&&($=1),$===1&&V--,V=Math.min(V,a+1),!!(V%2)&&(l==="reverse"?($=1-$,u&&($-=u/f)):l==="mirror"&&(k=S)),T=_i(0,1,$)*f}const O=w?{done:!1,value:d[0]}:k.next(T);x&&(O.value=x(O.value));let{done:D}=O;!w&&r!==null&&(D=this.playbackSpeed>=0?this.currentTime>=y:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return P&&m!==Vf&&(O.value=zd(d,this.options,g,this.speed)),v&&v(O.value),P&&this.finish(),O}then(t,s){return this.finished.then(t,s)}get duration(){return Zn(this.calculatedDuration)}get time(){return Zn(this.currentTime)}set time(t){var s;t=Kn(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(un.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=Zn(this.currentTime))}play(){var y,x;if(this.isStopped)return;const{driver:t=ZE,startTime:s}=this.options;this.driver||(this.driver=t(S=>this.tick(S))),(x=(y=this.options).onPlay)==null||x.call(y);const h=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=h):this.holdTime!==null?this.startTime=h-this.holdTime:this.startTime||(this.startTime=s??h),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function gO(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Er=e=>e*180/Math.PI,Uf=e=>{const t=Er(Math.atan2(e[1],e[0]));return Hf(t)},pO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Uf,rotateZ:Uf,skewX:e=>Er(Math.atan(e[1])),skewY:e=>Er(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Hf=e=>(e=e%360,e<0&&(e+=360),e),Py=Uf,Ly=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Fy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),yO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ly,scaleY:Fy,scale:e=>(Ly(e)+Fy(e))/2,rotateX:e=>Hf(Er(Math.atan2(e[6],e[5]))),rotateY:e=>Hf(Er(Math.atan2(-e[2],e[0]))),rotateZ:Py,rotate:Py,skewX:e=>Er(Math.atan(e[4])),skewY:e=>Er(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function If(e){return e.includes("scale")?1:0}function Yf(e,t){if(!e||e==="none")return If(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let h,y;if(s)h=yO,y=s;else{const f=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);h=pO,y=f}if(!y)return If(t);const x=h[t],S=y[1].split(",").map(xO);return typeof x=="function"?x(S):S[x]}const vO=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return Yf(s,t)};function xO(e){return parseFloat(e.trim())}const zs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bs=new Set(zs),zy=e=>e===Fs||e===He,bO=new Set(["x","y","z"]),wO=zs.filter(e=>!bO.has(e));function SO(e){const t=[];return wO.forEach(s=>{const h=e.getValue(s);h!==void 0&&(t.push([s,h.get()]),h.set(s.startsWith("scale")?1:0))}),t}const jr={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Yf(t,"x"),y:(e,{transform:t})=>Yf(t,"y")};jr.translateX=jr.x;jr.translateY=jr.y;const Ar=new Set;let Xf=!1,Gf=!1,$f=!1;function Pb(){if(Gf){const e=Array.from(Ar).filter(h=>h.needsMeasurement),t=new Set(e.map(h=>h.element)),s=new Map;t.forEach(h=>{const y=SO(h);y.length&&(s.set(h,y),h.render())}),e.forEach(h=>h.measureInitialState()),t.forEach(h=>{h.render();const y=s.get(h);y&&y.forEach(([x,S])=>{var f;(f=h.getValue(x))==null||f.set(S)})}),e.forEach(h=>h.measureEndState()),e.forEach(h=>{h.suspendedScrollY!==void 0&&window.scrollTo(0,h.suspendedScrollY)})}Gf=!1,Xf=!1,Ar.forEach(e=>e.complete($f)),Ar.clear()}function Lb(){Ar.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gf=!0)})}function CO(){$f=!0,Lb(),Pb(),$f=!1}class Ud{constructor(t,s,h,y,x,S=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=h,this.motionValue=y,this.element=x,this.isAsync=S}scheduleResolve(){this.state="scheduled",this.isAsync?(Ar.add(this),Xf||(Xf=!0,ht.read(Lb),ht.resolveKeyframes(Pb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:h,motionValue:y}=this;if(t[0]===null){const x=y==null?void 0:y.get(),S=t[t.length-1];if(x!==void 0)t[0]=x;else if(h&&s){const f=h.readValue(s,S);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=S),y&&x===void 0&&y.set(t[0])}gO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ar.delete(this)}cancel(){this.state==="scheduled"&&(Ar.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _O=e=>e.startsWith("--");function TO(e,t,s){_O(t)?e.style.setProperty(t,s):e.style[t]=s}const kO=Od(()=>window.ScrollTimeline!==void 0),EO={};function OO(e,t){const s=Od(e);return()=>EO[t]??s()}const Fb=OO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$a=([e,t,s,h])=>`cubic-bezier(${e}, ${t}, ${s}, ${h})`,By={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$a([0,.65,.55,1]),circOut:$a([.55,0,1,.45]),backIn:$a([.31,.01,.66,-.59]),backOut:$a([.33,1.53,.69,.99])};function zb(e,t){if(e)return typeof e=="function"?Fb()?Db(e,t):"ease-out":Sb(e)?$a(e):Array.isArray(e)?e.map(s=>zb(s,t)||By.easeOut):By[e]}function MO(e,t,s,{delay:h=0,duration:y=300,repeat:x=0,repeatType:S="loop",ease:f="easeOut",times:r}={},c=void 0){const d={[t]:s};r&&(d.offset=r);const a=zb(f,y);Array.isArray(a)&&(d.easing=a);const l={delay:h,duration:y,easing:Array.isArray(a)?"linear":a,fill:"both",iterations:x+1,direction:S==="reverse"?"alternate":"normal"};return c&&(l.pseudoElement=c),e.animate(d,l)}function Bb(e){return typeof e=="function"&&"applyToOptions"in e}function jO({type:e,...t}){return Bb(e)&&Fb()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class AO extends Bd{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:h,keyframes:y,pseudoElement:x,allowFlatten:S=!1,finalKeyframe:f,onComplete:r}=t;this.isPseudoElement=!!x,this.allowFlatten=S,this.options=t,Ed(typeof t.type!="string");const c=jO(t);this.animation=MO(s,h,y,c,x),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!x){const d=zd(y,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(d):TO(s,h,d),this.animation.cancel()}r==null||r(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,h;const t=((h=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:h.call(s).duration)||0;return Zn(Number(t))}get time(){return Zn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Kn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var h;return this.allowFlatten&&((h=this.animation.effect)==null||h.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&kO()?(this.animation.timeline=t,An):s(this)}}const Vb={anticipate:vb,backInOut:yb,circInOut:bb};function DO(e){return e in Vb}function RO(e){typeof e.ease=="string"&&DO(e.ease)&&(e.ease=Vb[e.ease])}const Vy=10;class NO extends AO{constructor(t){RO(t),Nb(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:h,onComplete:y,element:x,...S}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const f=new Vd({...S,autoplay:!1}),r=Kn(this.finishedTime??this.time);s.setWithVelocity(f.sample(r-Vy).value,f.sample(r).value,Vy),f.stop()}}const Uy=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(tr.test(e)||e==="0")&&!e.startsWith("url("));function PO(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function LO(e,t,s,h){const y=e[0];if(y===null)return!1;if(t==="display"||t==="visibility")return!0;const x=e[e.length-1],S=Uy(y,t),f=Uy(x,t);return!S||!f?!1:PO(e)||(s==="spring"||Bb(s))&&h}function Wf(e){e.duration=0,e.type}const FO=new Set(["opacity","clipPath","filter","transform"]),zO=Od(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function BO(e){var d;const{motionValue:t,name:s,repeatDelay:h,repeatType:y,damping:x,type:S}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:r,transformTemplate:c}=t.owner.getProps();return zO()&&s&&FO.has(s)&&(s!=="transform"||!c)&&!r&&!h&&y!=="mirror"&&x!==0&&S!=="inertia"}const VO=40;class UO extends Bd{constructor({autoplay:t=!0,delay:s=0,type:h="keyframes",repeat:y=0,repeatDelay:x=0,repeatType:S="loop",keyframes:f,name:r,motionValue:c,element:d,...a}){var m;super(),this.stop=()=>{var v,g;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=un.now();const l={autoplay:t,delay:s,type:h,repeat:y,repeatDelay:x,repeatType:S,name:r,motionValue:c,element:d,...a},u=(d==null?void 0:d.KeyframeResolver)||Ud;this.keyframeResolver=new u(f,(v,g,b)=>this.onKeyframesResolved(v,g,l,!b),r,c,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(t,s,h,y){this.keyframeResolver=void 0;const{name:x,type:S,velocity:f,delay:r,isHandoff:c,onUpdate:d}=h;this.resolvedAt=un.now(),LO(t,x,S,f)||((Ti.instantAnimations||!r)&&(d==null||d(zd(t,h,s))),t[0]=t[t.length-1],Wf(h),h.repeat=0);const l={startTime:y?this.resolvedAt?this.resolvedAt-this.createdAt>VO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...h,keyframes:t},u=!c&&BO(l)?new NO({...l,element:l.motionValue.owner.current}):new Vd(l);u.finished.then(()=>this.notifyFinished()).catch(An),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),CO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const HO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IO(e){const t=HO.exec(e);if(!t)return[,];const[,s,h,y]=t;return[`--${s??h}`,y]}function Ub(e,t,s=1){const[h,y]=IO(e);if(!h)return;const x=window.getComputedStyle(t).getPropertyValue(h);if(x){const S=x.trim();return cb(S)?parseFloat(S):S}return Rd(y)?Ub(y,t,s+1):y}function Hd(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const Hb=new Set(["width","height","top","left","right","bottom",...zs]),YO={test:e=>e==="auto",parse:e=>e},Ib=e=>t=>t.test(e),Yb=[Fs,He,Qn,Ki,PE,NE,YO],Hy=e=>Yb.find(Ib(e));function XO(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||hb(e):!0}const GO=new Set(["brightness","contrast","saturate","opacity"]);function $O(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[h]=s.match(Nd)||[];if(!h)return e;const y=s.replace(h,"");let x=GO.has(t)?1:0;return h!==s&&(x*=100),t+"("+x+y+")"}const WO=/\b([a-z-]*)\(.*?\)/gu,qf={...tr,getAnimatableNone:e=>{const t=e.match(WO);return t?t.map($O).join(" "):e}},Iy={...Fs,transform:Math.round},qO={rotate:Ki,rotateX:Ki,rotateY:Ki,rotateZ:Ki,scale:Ul,scaleX:Ul,scaleY:Ul,scaleZ:Ul,skew:Ki,skewX:Ki,skewY:Ki,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:co,originX:My,originY:My,originZ:He},Id={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...qO,zIndex:Iy,fillOpacity:co,strokeOpacity:co,numOctaves:Iy},KO={...Id,color:Tt,backgroundColor:Tt,outlineColor:Tt,fill:Tt,stroke:Tt,borderColor:Tt,borderTopColor:Tt,borderRightColor:Tt,borderBottomColor:Tt,borderLeftColor:Tt,filter:qf,WebkitFilter:qf},Xb=e=>KO[e];function Gb(e,t){let s=Xb(e);return s!==qf&&(s=tr),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const ZO=new Set(["auto","none","0"]);function QO(e,t,s){let h=0,y;for(;h<e.length&&!y;){const x=e[h];typeof x=="string"&&!ZO.has(x)&&uo(x).values.length&&(y=e[h]),h++}if(y&&s)for(const x of t)e[x]=Gb(s,y)}class JO extends Ud{constructor(t,s,h,y,x){super(t,s,h,y,x,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:h}=this;if(!s||!s.current)return;super.readKeyframes();for(let r=0;r<t.length;r++){let c=t[r];if(typeof c=="string"&&(c=c.trim(),Rd(c))){const d=Ub(c,s.current);d!==void 0&&(t[r]=d),r===t.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Hb.has(h)||t.length!==2)return;const[y,x]=t,S=Hy(y),f=Hy(x);if(S!==f)if(zy(S)&&zy(f))for(let r=0;r<t.length;r++){const c=t[r];typeof c=="string"&&(t[r]=parseFloat(c))}else jr[h]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,h=[];for(let y=0;y<t.length;y++)(t[y]===null||XO(t[y]))&&h.push(y);h.length&&QO(t,h,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:h}=this;if(!t||!t.current)return;h==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jr[h](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const y=s[s.length-1];y!==void 0&&t.getValue(h,y).jump(y,!1)}measureEndState(){var f;const{element:t,name:s,unresolvedKeyframes:h}=this;if(!t||!t.current)return;const y=t.getValue(s);y&&y.jump(this.measuredOrigin,!1);const x=h.length-1,S=h[x];h[x]=jr[s](t.measureViewportBox(),window.getComputedStyle(t.current)),S!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=S),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([r,c])=>{t.getValue(r).set(c)}),this.resolveNoneKeyframes()}}function eM(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let h=document;const y=(s==null?void 0:s[e])??h.querySelectorAll(e);return y?Array.from(y):[]}return Array.from(e)}const $b=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Wb(e){return ub(e)&&"offsetHeight"in e}const Yy=30,tM=e=>!isNaN(parseFloat(e));class nM{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=h=>{var x;const y=un.now();if(this.updatedAt!==y&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(h),this.current!==this.prev&&((x=this.events.change)==null||x.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=un.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=tM(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Md);const h=this.events[t].add(s);return t==="change"?()=>{h(),ht.read(()=>{this.events.change.getSize()||this.stop()})}:h}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,h){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-h}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Yy)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,Yy);return fb(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dr(e,t){return new nM(e,t)}const{schedule:Yd}=Cb(queueMicrotask,!1),Fn={x:!1,y:!1};function qb(){return Fn.x||Fn.y}function iM(e){return e==="x"||e==="y"?Fn[e]?null:(Fn[e]=!0,()=>{Fn[e]=!1}):Fn.x||Fn.y?null:(Fn.x=Fn.y=!0,()=>{Fn.x=Fn.y=!1})}function Kb(e,t){const s=eM(e),h=new AbortController,y={passive:!0,...t,signal:h.signal};return[s,y,()=>h.abort()]}function Xy(e){return!(e.pointerType==="touch"||qb())}function rM(e,t,s={}){const[h,y,x]=Kb(e,s),S=f=>{if(!Xy(f))return;const{target:r}=f,c=t(r,f);if(typeof c!="function"||!r)return;const d=a=>{Xy(a)&&(c(a),r.removeEventListener("pointerleave",d))};r.addEventListener("pointerleave",d,y)};return h.forEach(f=>{f.addEventListener("pointerenter",S,y)}),x}const Zb=(e,t)=>t?e===t?!0:Zb(e,t.parentElement):!1,Xd=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,sM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aM(e){return sM.has(e.tagName)||e.tabIndex!==-1}const Ql=new WeakSet;function Gy(e){return t=>{t.key==="Enter"&&e(t)}}function lf(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const oM=(e,t)=>{const s=e.currentTarget;if(!s)return;const h=Gy(()=>{if(Ql.has(s))return;lf(s,"down");const y=Gy(()=>{lf(s,"up")}),x=()=>lf(s,"cancel");s.addEventListener("keyup",y,t),s.addEventListener("blur",x,t)});s.addEventListener("keydown",h,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",h),t)};function $y(e){return Xd(e)&&!qb()}function lM(e,t,s={}){const[h,y,x]=Kb(e,s),S=f=>{const r=f.currentTarget;if(!$y(f))return;Ql.add(r);const c=t(r,f),d=(u,m)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),Ql.has(r)&&Ql.delete(r),$y(u)&&typeof c=="function"&&c(u,{success:m})},a=u=>{d(u,r===window||r===document||s.useGlobalTarget||Zb(r,u.target))},l=u=>{d(u,!1)};window.addEventListener("pointerup",a,y),window.addEventListener("pointercancel",l,y)};return h.forEach(f=>{(s.useGlobalTarget?window:f).addEventListener("pointerdown",S,y),Wb(f)&&(f.addEventListener("focus",c=>oM(c,y)),!aM(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),x}function Qb(e){return ub(e)&&"ownerSVGElement"in e}function cM(e){return Qb(e)&&e.tagName==="svg"}const Gt=e=>!!(e&&e.getVelocity),uM=[...Yb,Tt,tr],hM=e=>uM.find(Ib(e)),kc=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class fM extends M.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const h=s.offsetParent,y=Wb(h)&&h.offsetWidth||0,x=this.props.sizeRef.current;x.height=s.offsetHeight||0,x.width=s.offsetWidth||0,x.top=s.offsetTop,x.left=s.offsetLeft,x.right=y-x.width-x.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dM({children:e,isPresent:t,anchorX:s,root:h}){const y=M.useId(),x=M.useRef(null),S=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=M.useContext(kc);return M.useInsertionEffect(()=>{const{width:r,height:c,top:d,left:a,right:l}=S.current;if(t||!x.current||!r||!c)return;const u=s==="left"?`left: ${a}`:`right: ${l}`;x.current.dataset.motionPopId=y;const m=document.createElement("style");f&&(m.nonce=f);const v=h??document.head;return v.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${y}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${c}px !important;
            ${u}px !important;
            top: ${d}px !important;
          }
        `),()=>{v.contains(m)&&v.removeChild(m)}},[t]),_.jsx(fM,{isPresent:t,childRef:x,sizeRef:S,children:M.cloneElement(e,{ref:x})})}const mM=({children:e,initial:t,isPresent:s,onExitComplete:h,custom:y,presenceAffectsLayout:x,mode:S,anchorX:f,root:r})=>{const c=_c(gM),d=M.useId();let a=!0,l=M.useMemo(()=>(a=!1,{id:d,initial:t,isPresent:s,custom:y,onExitComplete:u=>{c.set(u,!0);for(const m of c.values())if(!m)return;h&&h()},register:u=>(c.set(u,!1),()=>c.delete(u))}),[s,c,h]);return x&&a&&(l={...l}),M.useMemo(()=>{c.forEach((u,m)=>c.set(m,!1))},[s]),M.useEffect(()=>{!s&&!c.size&&h&&h()},[s]),S==="popLayout"&&(e=_.jsx(dM,{isPresent:s,anchorX:f,root:r,children:e})),_.jsx(Tc.Provider,{value:l,children:e})};function gM(){return new Map}function Jb(e=!0){const t=M.useContext(Tc);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:h,register:y}=t,x=M.useId();M.useEffect(()=>{if(e)return y(x)},[e]);const S=M.useCallback(()=>e&&h&&h(x),[x,h,e]);return!s&&h?[!1,S]:[!0]}const Hl=e=>e.key||"";function Wy(e){const t=[];return M.Children.forEach(e,s=>{M.isValidElement(s)&&t.push(s)}),t}const Tr=({children:e,custom:t,initial:s=!0,onExitComplete:h,presenceAffectsLayout:y=!0,mode:x="sync",propagate:S=!1,anchorX:f="left",root:r})=>{const[c,d]=Jb(S),a=M.useMemo(()=>Wy(e),[e]),l=S&&!c?[]:a.map(Hl),u=M.useRef(!0),m=M.useRef(a),v=_c(()=>new Map),[g,b]=M.useState(a),[w,T]=M.useState(a);lb(()=>{u.current=!1,m.current=a;for(let D=0;D<w.length;D++){const P=Hl(w[D]);l.includes(P)?v.delete(P):v.get(P)!==!0&&v.set(P,!1)}},[w,l.length,l.join("-")]);const k=[];if(a!==g){let D=[...a];for(let P=0;P<w.length;P++){const F=w[P],V=Hl(F);l.includes(V)||(D.splice(P,0,F),k.push(F))}return x==="wait"&&k.length&&(D=k),T(Wy(D)),b(a),null}const{forceRender:O}=M.useContext(Cd);return _.jsx(_.Fragment,{children:w.map(D=>{const P=Hl(D),F=S&&!c?!1:a===w||l.includes(P),V=()=>{if(v.has(P))v.set(P,!0);else return;let $=!0;v.forEach(te=>{te||($=!1)}),$&&(O==null||O(),T(m.current),S&&(d==null||d()),h&&h())};return _.jsx(mM,{isPresent:F,initial:!u.current||s?void 0:!1,custom:t,presenceAffectsLayout:y,mode:x,root:r,onExitComplete:F?void 0:V,anchorX:f,children:D},P)})})},e1=M.createContext({strict:!1}),qy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},As={};for(const e in qy)As[e]={isEnabled:t=>qy[e].some(s=>!!t[s])};function pM(e){for(const t in e)As[t]={...As[t],...e[t]}}const yM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||yM.has(e)}let t1=e=>!lc(e);function vM(e){typeof e=="function"&&(t1=t=>t.startsWith("on")?!lc(t):e(t))}try{vM(require("@emotion/is-prop-valid").default)}catch{}function xM(e,t,s){const h={};for(const y in e)y==="values"&&typeof e.values=="object"||(t1(y)||s===!0&&lc(y)||!t&&!lc(y)||e.draggable&&y.startsWith("onDrag"))&&(h[y]=e[y]);return h}const Ec=M.createContext({});function Oc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ho(e){return typeof e=="string"||Array.isArray(e)}const Gd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$d=["initial",...Gd];function Mc(e){return Oc(e.animate)||$d.some(t=>ho(e[t]))}function n1(e){return!!(Mc(e)||e.variants)}function bM(e,t){if(Mc(e)){const{initial:s,animate:h}=e;return{initial:s===!1||ho(s)?s:void 0,animate:ho(h)?h:void 0}}return e.inherit!==!1?t:{}}function wM(e){const{initial:t,animate:s}=bM(e,M.useContext(Ec));return M.useMemo(()=>({initial:t,animate:s}),[Ky(t),Ky(s)])}function Ky(e){return Array.isArray(e)?e.join(" "):e}const fo={};function SM(e){for(const t in e)fo[t]=e[t],Dd(t)&&(fo[t].isCSSVariable=!0)}function i1(e,{layout:t,layoutId:s}){return Bs.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!fo[e]||e==="opacity")}const CM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_M=zs.length;function TM(e,t,s){let h="",y=!0;for(let x=0;x<_M;x++){const S=zs[x],f=e[S];if(f===void 0)continue;let r=!0;if(typeof f=="number"?r=f===(S.startsWith("scale")?1:0):r=parseFloat(f)===0,!r||s){const c=$b(f,Id[S]);if(!r){y=!1;const d=CM[S]||S;h+=`${d}(${c}) `}s&&(t[S]=c)}}return h=h.trim(),s?h=s(t,y?"":h):y&&(h="none"),h}function Wd(e,t,s){const{style:h,vars:y,transformOrigin:x}=e;let S=!1,f=!1;for(const r in t){const c=t[r];if(Bs.has(r)){S=!0;continue}else if(Dd(r)){y[r]=c;continue}else{const d=$b(c,Id[r]);r.startsWith("origin")?(f=!0,x[r]=d):h[r]=d}}if(t.transform||(S||s?h.transform=TM(t,e.transform,s):h.transform&&(h.transform="none")),f){const{originX:r="50%",originY:c="50%",originZ:d=0}=x;h.transformOrigin=`${r} ${c} ${d}`}}const qd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function r1(e,t,s){for(const h in t)!Gt(t[h])&&!i1(h,s)&&(e[h]=t[h])}function kM({transformTemplate:e},t){return M.useMemo(()=>{const s=qd();return Wd(s,t,e),Object.assign({},s.vars,s.style)},[t])}function EM(e,t){const s=e.style||{},h={};return r1(h,s,e),Object.assign(h,kM(e,t)),h}function OM(e,t){const s={},h=EM(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,h.userSelect=h.WebkitUserSelect=h.WebkitTouchCallout="none",h.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=h,s}const MM={offset:"stroke-dashoffset",array:"stroke-dasharray"},jM={offset:"strokeDashoffset",array:"strokeDasharray"};function AM(e,t,s=1,h=0,y=!0){e.pathLength=1;const x=y?MM:jM;e[x.offset]=He.transform(-h);const S=He.transform(t),f=He.transform(s);e[x.array]=`${S} ${f}`}function s1(e,{attrX:t,attrY:s,attrScale:h,pathLength:y,pathSpacing:x=1,pathOffset:S=0,...f},r,c,d){if(Wd(e,f,c),r){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:a,style:l}=e;a.transform&&(l.transform=a.transform,delete a.transform),(l.transform||a.transformOrigin)&&(l.transformOrigin=a.transformOrigin??"50% 50%",delete a.transformOrigin),l.transform&&(l.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete a.transformBox),t!==void 0&&(a.x=t),s!==void 0&&(a.y=s),h!==void 0&&(a.scale=h),y!==void 0&&AM(a,y,x,S,!1)}const a1=()=>({...qd(),attrs:{}}),o1=e=>typeof e=="string"&&e.toLowerCase()==="svg";function DM(e,t,s,h){const y=M.useMemo(()=>{const x=a1();return s1(x,t,o1(h),e.transformTemplate,e.style),{...x.attrs,style:{...x.style}}},[t]);if(e.style){const x={};r1(x,e.style,e),y.style={...x,...y.style}}return y}const RM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Kd(e){return typeof e!="string"||e.includes("-")?!1:!!(RM.indexOf(e)>-1||/[A-Z]/u.test(e))}function NM(e,t,s,{latestValues:h},y,x=!1){const f=(Kd(e)?DM:OM)(t,h,y,e),r=xM(t,typeof e=="string",x),c=e!==M.Fragment?{...r,...f,ref:s}:{},{children:d}=t,a=M.useMemo(()=>Gt(d)?d.get():d,[d]);return M.createElement(e,{...c,children:a})}function Zy(e){const t=[{},{}];return e==null||e.values.forEach((s,h)=>{t[0][h]=s.get(),t[1][h]=s.getVelocity()}),t}function Zd(e,t,s,h){if(typeof t=="function"){const[y,x]=Zy(h);t=t(s!==void 0?s:e.custom,y,x)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[y,x]=Zy(h);t=t(s!==void 0?s:e.custom,y,x)}return t}function Jl(e){return Gt(e)?e.get():e}function PM({scrapeMotionValuesFromProps:e,createRenderState:t},s,h,y){return{latestValues:LM(s,h,y,e),renderState:t()}}function LM(e,t,s,h){const y={},x=h(e,{});for(const l in x)y[l]=Jl(x[l]);let{initial:S,animate:f}=e;const r=Mc(e),c=n1(e);t&&c&&!r&&e.inherit!==!1&&(S===void 0&&(S=t.initial),f===void 0&&(f=t.animate));let d=s?s.initial===!1:!1;d=d||S===!1;const a=d?f:S;if(a&&typeof a!="boolean"&&!Oc(a)){const l=Array.isArray(a)?a:[a];for(let u=0;u<l.length;u++){const m=Zd(e,l[u]);if(m){const{transitionEnd:v,transition:g,...b}=m;for(const w in b){let T=b[w];if(Array.isArray(T)){const k=d?T.length-1:0;T=T[k]}T!==null&&(y[w]=T)}for(const w in v)y[w]=v[w]}}}return y}const l1=e=>(t,s)=>{const h=M.useContext(Ec),y=M.useContext(Tc),x=()=>PM(e,t,h,y);return s?x():_c(x)};function Qd(e,t,s){var x;const{style:h}=e,y={};for(const S in h)(Gt(h[S])||t.style&&Gt(t.style[S])||i1(S,e)||((x=s==null?void 0:s.getValue(S))==null?void 0:x.liveStyle)!==void 0)&&(y[S]=h[S]);return y}const FM=l1({scrapeMotionValuesFromProps:Qd,createRenderState:qd});function c1(e,t,s){const h=Qd(e,t,s);for(const y in e)if(Gt(e[y])||Gt(t[y])){const x=zs.indexOf(y)!==-1?"attr"+y.charAt(0).toUpperCase()+y.substring(1):y;h[x]=e[y]}return h}const zM=l1({scrapeMotionValuesFromProps:c1,createRenderState:a1}),BM=Symbol.for("motionComponentSymbol");function Ts(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function VM(e,t,s){return M.useCallback(h=>{h&&e.onMount&&e.onMount(h),t&&(h?t.mount(h):t.unmount()),s&&(typeof s=="function"?s(h):Ts(s)&&(s.current=h))},[t])}const Jd=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UM="framerAppearId",u1="data-"+Jd(UM),h1=M.createContext({});function HM(e,t,s,h,y){var v,g;const{visualElement:x}=M.useContext(Ec),S=M.useContext(e1),f=M.useContext(Tc),r=M.useContext(kc).reducedMotion,c=M.useRef(null);h=h||S.renderer,!c.current&&h&&(c.current=h(e,{visualState:t,parent:x,props:s,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:r}));const d=c.current,a=M.useContext(h1);d&&!d.projection&&y&&(d.type==="html"||d.type==="svg")&&IM(c.current,s,y,a);const l=M.useRef(!1);M.useInsertionEffect(()=>{d&&l.current&&d.update(s,f)});const u=s[u1],m=M.useRef(!!u&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,u))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,u)));return lb(()=>{d&&(l.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),M.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,u)}),m.current=!1),d.enteringChildren=void 0)}),d}function IM(e,t,s,h){const{layoutId:y,layout:x,drag:S,dragConstraints:f,layoutScroll:r,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:f1(e.parent)),e.projection.setOptions({layoutId:y,layout:x,alwaysMeasureLayout:!!S||f&&Ts(f),visualElement:e,animationType:typeof x=="string"?x:"both",initialPromotionConfig:h,crossfade:d,layoutScroll:r,layoutRoot:c})}function f1(e){if(e)return e.options.allowProjection!==!1?e.projection:f1(e.parent)}function cf(e,{forwardMotionProps:t=!1}={},s,h){s&&pM(s);const y=Kd(e)?zM:FM;function x(f,r){let c;const d={...M.useContext(kc),...f,layoutId:YM(f)},{isStatic:a}=d,l=wM(f),u=y(f,a);if(!a&&_d){XM();const m=GM(d);c=m.MeasureLayout,l.visualElement=HM(e,u,d,h,m.ProjectionNode)}return _.jsxs(Ec.Provider,{value:l,children:[c&&l.visualElement?_.jsx(c,{visualElement:l.visualElement,...d}):null,NM(e,f,VM(u,l.visualElement,r),u,a,t)]})}x.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const S=M.forwardRef(x);return S[BM]=e,S}function YM({layoutId:e}){const t=M.useContext(Cd).id;return t&&e!==void 0?t+"-"+e:e}function XM(e,t){M.useContext(e1).strict}function GM(e){const{drag:t,layout:s}=As;if(!t&&!s)return{};const h={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?h.MeasureLayout:void 0,ProjectionNode:h.ProjectionNode}}function $M(e,t){if(typeof Proxy>"u")return cf;const s=new Map,h=(x,S)=>cf(x,S,e,t),y=(x,S)=>h(x,S);return new Proxy(y,{get:(x,S)=>S==="create"?h:(s.has(S)||s.set(S,cf(S,void 0,e,t)),s.get(S))})}function d1({top:e,left:t,right:s,bottom:h}){return{x:{min:t,max:s},y:{min:e,max:h}}}function WM({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qM(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),h=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:h.y,right:h.x}}function uf(e){return e===void 0||e===1}function Kf({scale:e,scaleX:t,scaleY:s}){return!uf(e)||!uf(t)||!uf(s)}function _r(e){return Kf(e)||m1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function m1(e){return Qy(e.x)||Qy(e.y)}function Qy(e){return e&&e!=="0%"}function cc(e,t,s){const h=e-s,y=t*h;return s+y}function Jy(e,t,s,h,y){return y!==void 0&&(e=cc(e,y,h)),cc(e,s,h)+t}function Zf(e,t=0,s=1,h,y){e.min=Jy(e.min,t,s,h,y),e.max=Jy(e.max,t,s,h,y)}function g1(e,{x:t,y:s}){Zf(e.x,t.translate,t.scale,t.originPoint),Zf(e.y,s.translate,s.scale,s.originPoint)}const ev=.999999999999,tv=1.0000000000001;function KM(e,t,s,h=!1){const y=s.length;if(!y)return;t.x=t.y=1;let x,S;for(let f=0;f<y;f++){x=s[f],S=x.projectionDelta;const{visualElement:r}=x.options;r&&r.props.style&&r.props.style.display==="contents"||(h&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Es(e,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),S&&(t.x*=S.x.scale,t.y*=S.y.scale,g1(e,S)),h&&_r(x.latestValues)&&Es(e,x.latestValues))}t.x<tv&&t.x>ev&&(t.x=1),t.y<tv&&t.y>ev&&(t.y=1)}function ks(e,t){e.min=e.min+t,e.max=e.max+t}function nv(e,t,s,h,y=.5){const x=dt(e.min,e.max,y);Zf(e,t,s,x,h)}function Es(e,t){nv(e.x,t.x,t.scaleX,t.scale,t.originX),nv(e.y,t.y,t.scaleY,t.scale,t.originY)}function p1(e,t){return d1(qM(e.getBoundingClientRect(),t))}function ZM(e,t,s){const h=p1(e,s),{scroll:y}=t;return y&&(ks(h.x,y.offset.x),ks(h.y,y.offset.y)),h}const iv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Os=()=>({x:iv(),y:iv()}),rv=()=>({min:0,max:0}),xt=()=>({x:rv(),y:rv()}),Qf={current:null},y1={current:!1};function QM(){if(y1.current=!0,!!_d)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qf.current=e.matches;e.addEventListener("change",t),t()}else Qf.current=!1}const JM=new WeakMap;function ej(e,t,s){for(const h in t){const y=t[h],x=s[h];if(Gt(y))e.addValue(h,y);else if(Gt(x))e.addValue(h,Dr(y,{owner:e}));else if(x!==y)if(e.hasValue(h)){const S=e.getValue(h);S.liveStyle===!0?S.jump(y):S.hasAnimated||S.set(y)}else{const S=e.getStaticValue(h);e.addValue(h,Dr(S!==void 0?S:y,{owner:e}))}}for(const h in s)t[h]===void 0&&e.removeValue(h);return t}const sv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tj{scrapeMotionValuesFromProps(t,s,h){return{}}constructor({parent:t,props:s,presenceContext:h,reducedMotionConfig:y,blockInitialAnimation:x,visualState:S},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ud,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const l=un.now();this.renderScheduledAt<l&&(this.renderScheduledAt=l,ht.render(this.render,!1,!0))};const{latestValues:r,renderState:c}=S;this.latestValues=r,this.baseTarget={...r},this.initialValues=s.initial?{...r}:{},this.renderState=c,this.parent=t,this.props=s,this.presenceContext=h,this.depth=t?t.depth+1:0,this.reducedMotionConfig=y,this.options=f,this.blockInitialAnimation=!!x,this.isControllingVariants=Mc(s),this.isVariantNode=n1(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...a}=this.scrapeMotionValuesFromProps(s,{},this);for(const l in a){const u=a[l];r[l]!==void 0&&Gt(u)&&u.set(r[l])}}mount(t){var s;this.current=t,JM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((h,y)=>this.bindToMotionValue(y,h)),y1.current||QM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qf.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),er(this.notifyUpdate),er(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const h=this.features[s];h&&(h.unmount(),h.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const h=Bs.has(t);h&&this.onBindTransform&&this.onBindTransform();const y=s.on("change",S=>{this.latestValues[t]=S,this.props.onUpdate&&ht.preRender(this.notifyUpdate),h&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let x;window.MotionCheckAppearSync&&(x=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{y(),x&&x(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in As){const s=As[t];if(!s)continue;const{isEnabled:h,Feature:y}=s;if(!this.features[t]&&y&&h(this.props)&&(this.features[t]=new y(this)),this.features[t]){const x=this.features[t];x.isMounted?x.update():(x.mount(),x.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let h=0;h<sv.length;h++){const y=sv[h];this.propEventSubscriptions[y]&&(this.propEventSubscriptions[y](),delete this.propEventSubscriptions[y]);const x="on"+y,S=t[x];S&&(this.propEventSubscriptions[y]=this.on(y,S))}this.prevMotionValues=ej(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const h=this.values.get(t);s!==h&&(h&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let h=this.values.get(t);return h===void 0&&s!==void 0&&(h=Dr(s===null?void 0:s,{owner:this}),this.addValue(t,h)),h}readValue(t,s){let h=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return h!=null&&(typeof h=="string"&&(cb(h)||hb(h))?h=parseFloat(h):!hM(h)&&tr.test(s)&&(h=Gb(t,s)),this.setBaseTarget(t,Gt(h)?h.get():h)),Gt(h)?h.get():h}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var x;const{initial:s}=this.props;let h;if(typeof s=="string"||typeof s=="object"){const S=Zd(this.props,s,(x=this.presenceContext)==null?void 0:x.custom);S&&(h=S[t])}if(s&&h!==void 0)return h;const y=this.getBaseTargetFromProps(this.props,t);return y!==void 0&&!Gt(y)?y:this.initialValues[t]!==void 0&&h===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Md),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Yd.render(this.render)}}class v1 extends tj{constructor(){super(...arguments),this.KeyframeResolver=JO}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:h}){delete s[t],delete h[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gt(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function x1(e,{style:t,vars:s},h,y){const x=e.style;let S;for(S in t)x[S]=t[S];y==null||y.applyProjectionStyles(x,h);for(S in s)x.setProperty(S,s[S])}function nj(e){return window.getComputedStyle(e)}class ij extends v1{constructor(){super(...arguments),this.type="html",this.renderInstance=x1}readValueFromInstance(t,s){var h;if(Bs.has(s))return(h=this.projection)!=null&&h.isProjecting?If(s):vO(t,s);{const y=nj(t),x=(Dd(s)?y.getPropertyValue(s):y[s])||0;return typeof x=="string"?x.trim():x}}measureInstanceViewportBox(t,{transformPagePoint:s}){return p1(t,s)}build(t,s,h){Wd(t,s,h.transformTemplate)}scrapeMotionValuesFromProps(t,s,h){return Qd(t,s,h)}}const b1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rj(e,t,s,h){x1(e,t,void 0,h);for(const y in t.attrs)e.setAttribute(b1.has(y)?y:Jd(y),t.attrs[y])}class sj extends v1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Bs.has(s)){const h=Xb(s);return h&&h.default||0}return s=b1.has(s)?s:Jd(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,h){return c1(t,s,h)}build(t,s,h){s1(t,s,this.isSVGTag,h.transformTemplate,h.style)}renderInstance(t,s,h,y){rj(t,s,h,y)}mount(t){this.isSVGTag=o1(t.tagName),super.mount(t)}}const aj=(e,t)=>Kd(e)?new sj(t):new ij(t,{allowProjection:e!==M.Fragment});function js(e,t,s){const h=e.getProps();return Zd(h,t,s!==void 0?s:h.custom,e)}const Jf=e=>Array.isArray(e);function oj(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Dr(s))}function lj(e){return Jf(e)?e[e.length-1]||0:e}function cj(e,t){const s=js(e,t);let{transitionEnd:h={},transition:y={},...x}=s||{};x={...x,...h};for(const S in x){const f=lj(x[S]);oj(e,S,f)}}function uj(e){return!!(Gt(e)&&e.add)}function ed(e,t){const s=e.getValue("willChange");if(uj(s))return s.add(t);if(!s&&Ti.WillChange){const h=new Ti.WillChange("auto");e.addValue("willChange",h),h.add(t)}}function w1(e){return e.props[u1]}const hj=e=>e!==null;function fj(e,{repeat:t,repeatType:s="loop"},h){const y=e.filter(hj),x=t&&s!=="loop"&&t%2===1?0:y.length-1;return y[x]}const dj={type:"spring",stiffness:500,damping:25,restSpeed:10},mj=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gj={type:"keyframes",duration:.8},pj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yj=(e,{keyframes:t})=>t.length>2?gj:Bs.has(e)?e.startsWith("scale")?mj(t[1]):dj:pj;function vj({when:e,delay:t,delayChildren:s,staggerChildren:h,staggerDirection:y,repeat:x,repeatType:S,repeatDelay:f,from:r,elapsed:c,...d}){return!!Object.keys(d).length}const em=(e,t,s,h={},y,x)=>S=>{const f=Hd(h,e)||{},r=f.delay||h.delay||0;let{elapsed:c=0}=h;c=c-Kn(r);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-c,onUpdate:l=>{t.set(l),f.onUpdate&&f.onUpdate(l)},onComplete:()=>{S(),f.onComplete&&f.onComplete()},name:e,motionValue:t,element:x?void 0:y};vj(f)||Object.assign(d,yj(e,d)),d.duration&&(d.duration=Kn(d.duration)),d.repeatDelay&&(d.repeatDelay=Kn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let a=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Wf(d),d.delay===0&&(a=!0)),(Ti.instantAnimations||Ti.skipAnimations)&&(a=!0,Wf(d),d.delay=0),d.allowFlatten=!f.type&&!f.ease,a&&!x&&t.get()!==void 0){const l=fj(d.keyframes,f);if(l!==void 0){ht.update(()=>{d.onUpdate(l),d.onComplete()});return}}return f.isSync?new Vd(d):new UO(d)};function xj({protectedKeys:e,needsAnimating:t},s){const h=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,h}function S1(e,t,{delay:s=0,transitionOverride:h,type:y}={}){let{transition:x=e.getDefaultTransition(),transitionEnd:S,...f}=t;h&&(x=h);const r=[],c=y&&e.animationState&&e.animationState.getState()[y];for(const d in f){const a=e.getValue(d,e.latestValues[d]??null),l=f[d];if(l===void 0||c&&xj(c,d))continue;const u={delay:s,...Hd(x||{},d)},m=a.get();if(m!==void 0&&!a.isAnimating&&!Array.isArray(l)&&l===m&&!u.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const b=w1(e);if(b){const w=window.MotionHandoffAnimation(b,d,ht);w!==null&&(u.startTime=w,v=!0)}}ed(e,d),a.start(em(d,a,l,e.shouldReduceMotion&&Hb.has(d)?{type:!1}:u,e,v));const g=a.animation;g&&r.push(g)}return S&&Promise.all(r).then(()=>{ht.update(()=>{S&&cj(e,S)})}),r}function C1(e,t,s,h=0,y=1){const x=Array.from(e).sort((c,d)=>c.sortNodePosition(d)).indexOf(t),S=e.size,f=(S-1)*h;return typeof s=="function"?s(x,S):y===1?x*h:f-x*h}function td(e,t,s={}){var r;const h=js(e,t,s.type==="exit"?(r=e.presenceContext)==null?void 0:r.custom:void 0);let{transition:y=e.getDefaultTransition()||{}}=h||{};s.transitionOverride&&(y=s.transitionOverride);const x=h?()=>Promise.all(S1(e,h,s)):()=>Promise.resolve(),S=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:a,staggerDirection:l}=y;return bj(e,t,c,d,a,l,s)}:()=>Promise.resolve(),{when:f}=y;if(f){const[c,d]=f==="beforeChildren"?[x,S]:[S,x];return c().then(()=>d())}else return Promise.all([x(),S(s.delay)])}function bj(e,t,s=0,h=0,y=0,x=1,S){const f=[];for(const r of e.variantChildren)r.notify("AnimationStart",t),f.push(td(r,t,{...S,delay:s+(typeof h=="function"?0:h)+C1(e.variantChildren,r,h,y,x)}).then(()=>r.notify("AnimationComplete",t)));return Promise.all(f)}function wj(e,t,s={}){e.notify("AnimationStart",t);let h;if(Array.isArray(t)){const y=t.map(x=>td(e,x,s));h=Promise.all(y)}else if(typeof t=="string")h=td(e,t,s);else{const y=typeof t=="function"?js(e,t,s.custom):t;h=Promise.all(S1(e,y,s))}return h.then(()=>{e.notify("AnimationComplete",t)})}function _1(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let h=0;h<s;h++)if(t[h]!==e[h])return!1;return!0}const Sj=$d.length;function T1(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?T1(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Sj;s++){const h=$d[s],y=e.props[h];(ho(y)||y===!1)&&(t[h]=y)}return t}const Cj=[...Gd].reverse(),_j=Gd.length;function Tj(e){return t=>Promise.all(t.map(({animation:s,options:h})=>wj(e,s,h)))}function kj(e){let t=Tj(e),s=av(),h=!0;const y=r=>(c,d)=>{var l;const a=js(e,d,r==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);if(a){const{transition:u,transitionEnd:m,...v}=a;c={...c,...v,...m}}return c};function x(r){t=r(e)}function S(r){const{props:c}=e,d=T1(e.parent)||{},a=[],l=new Set;let u={},m=1/0;for(let g=0;g<_j;g++){const b=Cj[g],w=s[b],T=c[b]!==void 0?c[b]:d[b],k=ho(T),O=b===r?w.isActive:null;O===!1&&(m=g);let D=T===d[b]&&T!==c[b]&&k;if(D&&h&&e.manuallyAnimateOnMount&&(D=!1),w.protectedKeys={...u},!w.isActive&&O===null||!T&&!w.prevProp||Oc(T)||typeof T=="boolean")continue;const P=Ej(w.prevProp,T);let F=P||b===r&&w.isActive&&!D&&k||g>m&&k,V=!1;const $=Array.isArray(T)?T:[T];let te=$.reduce(y(b),{});O===!1&&(te={});const{prevResolvedValues:X={}}=w,Q={...X,...te},se=q=>{F=!0,l.has(q)&&(V=!0,l.delete(q)),w.needsAnimating[q]=!0;const Z=e.getValue(q);Z&&(Z.liveStyle=!1)};for(const q in Q){const Z=te[q],L=X[q];if(u.hasOwnProperty(q))continue;let A=!1;Jf(Z)&&Jf(L)?A=!_1(Z,L):A=Z!==L,A?Z!=null?se(q):l.add(q):Z!==void 0&&l.has(q)?se(q):w.protectedKeys[q]=!0}w.prevProp=T,w.prevResolvedValues=te,w.isActive&&(u={...u,...te}),h&&e.blockInitialAnimation&&(F=!1);const K=D&&P;F&&(!K||V)&&a.push(...$.map(q=>{const Z={type:b};if(typeof q=="string"&&h&&!K&&e.manuallyAnimateOnMount&&e.parent){const{parent:L}=e,A=js(L,q);if(L.enteringChildren&&A){const{delayChildren:j}=A.transition||{};Z.delay=C1(L.enteringChildren,e,j)}}return{animation:q,options:Z}}))}if(l.size){const g={};if(typeof c.initial!="boolean"){const b=js(e,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(g.transition=b.transition)}l.forEach(b=>{const w=e.getBaseTarget(b),T=e.getValue(b);T&&(T.liveStyle=!0),g[b]=w??null}),a.push({animation:g})}let v=!!a.length;return h&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(v=!1),h=!1,v?t(a):Promise.resolve()}function f(r,c){var a;if(s[r].isActive===c)return Promise.resolve();(a=e.variantChildren)==null||a.forEach(l=>{var u;return(u=l.animationState)==null?void 0:u.setActive(r,c)}),s[r].isActive=c;const d=S(r);for(const l in s)s[l].protectedKeys={};return d}return{animateChanges:S,setActive:f,setAnimateFunction:x,getState:()=>s,reset:()=>{s=av(),h=!0}}}function Ej(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_1(t,e):!1}function Cr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function av(){return{animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()}}class ir{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Oj extends ir{constructor(t){super(t),t.animationState||(t.animationState=kj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Oc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Mj=0;class jj extends ir{constructor(){super(...arguments),this.id=Mj++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:h}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===h)return;const y=this.node.animationState.setActive("exit",!t);s&&!t&&y.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Aj={animation:{Feature:Oj},exit:{Feature:jj}};function mo(e,t,s,h={passive:!0}){return e.addEventListener(t,s,h),()=>e.removeEventListener(t,s)}function _o(e){return{point:{x:e.pageX,y:e.pageY}}}const Dj=e=>t=>Xd(t)&&e(t,_o(t));function Qa(e,t,s,h){return mo(e,t,Dj(s),h)}const k1=1e-4,Rj=1-k1,Nj=1+k1,E1=.01,Pj=0-E1,Lj=0+E1;function Jt(e){return e.max-e.min}function Fj(e,t,s){return Math.abs(e-t)<=s}function ov(e,t,s,h=.5){e.origin=h,e.originPoint=dt(t.min,t.max,e.origin),e.scale=Jt(s)/Jt(t),e.translate=dt(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Rj&&e.scale<=Nj||isNaN(e.scale))&&(e.scale=1),(e.translate>=Pj&&e.translate<=Lj||isNaN(e.translate))&&(e.translate=0)}function Ja(e,t,s,h){ov(e.x,t.x,s.x,h?h.originX:void 0),ov(e.y,t.y,s.y,h?h.originY:void 0)}function lv(e,t,s){e.min=s.min+t.min,e.max=e.min+Jt(t)}function zj(e,t,s){lv(e.x,t.x,s.x),lv(e.y,t.y,s.y)}function cv(e,t,s){e.min=t.min-s.min,e.max=e.min+Jt(t)}function eo(e,t,s){cv(e.x,t.x,s.x),cv(e.y,t.y,s.y)}function Mn(e){return[e("x"),e("y")]}const O1=({current:e})=>e?e.ownerDocument.defaultView:null,uv=(e,t)=>Math.abs(e-t);function Bj(e,t){const s=uv(e.x,t.x),h=uv(e.y,t.y);return Math.sqrt(s**2+h**2)}class M1{constructor(t,s,{transformPagePoint:h,contextWindow:y=window,dragSnapToOrigin:x=!1,distanceThreshold:S=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=ff(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,m=Bj(l.offset,{x:0,y:0})>=this.distanceThreshold;if(!u&&!m)return;const{point:v}=l,{timestamp:g}=Bt;this.history.push({...v,timestamp:g});const{onStart:b,onMove:w}=this.handlers;u||(b&&b(this.lastMoveEvent,l),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,l)},this.handlePointerMove=(l,u)=>{this.lastMoveEvent=l,this.lastMoveEventInfo=hf(u,this.transformPagePoint),ht.update(this.updatePoint,!0)},this.handlePointerUp=(l,u)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=ff(l.type==="pointercancel"?this.lastMoveEventInfo:hf(u,this.transformPagePoint),this.history);this.startEvent&&m&&m(l,b),v&&v(l,b)},!Xd(t))return;this.dragSnapToOrigin=x,this.handlers=s,this.transformPagePoint=h,this.distanceThreshold=S,this.contextWindow=y||window;const f=_o(t),r=hf(f,this.transformPagePoint),{point:c}=r,{timestamp:d}=Bt;this.history=[{...c,timestamp:d}];const{onSessionStart:a}=s;a&&a(t,ff(r,this.history)),this.removeListeners=wo(Qa(this.contextWindow,"pointermove",this.handlePointerMove),Qa(this.contextWindow,"pointerup",this.handlePointerUp),Qa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),er(this.updatePoint)}}function hf(e,t){return t?{point:t(e.point)}:e}function hv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ff({point:e},t){return{point:e,delta:hv(e,j1(t)),offset:hv(e,Vj(t)),velocity:Uj(t,.1)}}function Vj(e){return e[0]}function j1(e){return e[e.length-1]}function Uj(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,h=null;const y=j1(e);for(;s>=0&&(h=e[s],!(y.timestamp-h.timestamp>Kn(t)));)s--;if(!h)return{x:0,y:0};const x=Zn(y.timestamp-h.timestamp);if(x===0)return{x:0,y:0};const S={x:(y.x-h.x)/x,y:(y.y-h.y)/x};return S.x===1/0&&(S.x=0),S.y===1/0&&(S.y=0),S}function Hj(e,{min:t,max:s},h){return t!==void 0&&e<t?e=h?dt(t,e,h.min):Math.max(e,t):s!==void 0&&e>s&&(e=h?dt(s,e,h.max):Math.min(e,s)),e}function fv(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function Ij(e,{top:t,left:s,bottom:h,right:y}){return{x:fv(e.x,s,y),y:fv(e.y,t,h)}}function dv(e,t){let s=t.min-e.min,h=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,h]=[h,s]),{min:s,max:h}}function Yj(e,t){return{x:dv(e.x,t.x),y:dv(e.y,t.y)}}function Xj(e,t){let s=.5;const h=Jt(e),y=Jt(t);return y>h?s=lo(t.min,t.max-h,e.min):h>y&&(s=lo(e.min,e.max-y,t.min)),_i(0,1,s)}function Gj(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const nd=.35;function $j(e=nd){return e===!1?e=0:e===!0&&(e=nd),{x:mv(e,"left","right"),y:mv(e,"top","bottom")}}function mv(e,t,s){return{min:gv(e,t),max:gv(e,s)}}function gv(e,t){return typeof e=="number"?e:e[t]||0}const Wj=new WeakMap;class qj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:h}={}){const{presenceContext:y}=this.visualElement;if(y&&y.isPresent===!1)return;const x=a=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(_o(a).point)},S=(a,l)=>{const{drag:u,dragPropagation:m,onDragStart:v}=this.getProps();if(u&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iM(u),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mn(b=>{let w=this.getAxisMotionValue(b).get()||0;if(Qn.test(w)){const{projection:T}=this.visualElement;if(T&&T.layout){const k=T.layout.layoutBox[b];k&&(w=Jt(k)*(parseFloat(w)/100))}}this.originPoint[b]=w}),v&&ht.postRender(()=>v(a,l)),ed(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},f=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l;const{dragPropagation:u,dragDirectionLock:m,onDirectionLock:v,onDrag:g}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:b}=l;if(m&&this.currentDirection===null){this.currentDirection=Kj(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",l.point,b),this.updateAxis("y",l.point,b),this.visualElement.render(),g&&g(a,l)},r=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l,this.stop(a,l),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Mn(a=>{var l;return this.getAnimationState(a)==="paused"&&((l=this.getAxisMotionValue(a).animation)==null?void 0:l.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new M1(t,{onSessionStart:x,onStart:S,onMove:f,onSessionEnd:r,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:h,contextWindow:O1(this.visualElement)})}stop(t,s){const h=t||this.latestPointerEvent,y=s||this.latestPanInfo,x=this.isDragging;if(this.cancel(),!x||!y||!h)return;const{velocity:S}=y;this.startAnimation(S);const{onDragEnd:f}=this.getProps();f&&ht.postRender(()=>f(h,y))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:h}=this.getProps();!h&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,h){const{drag:y}=this.getProps();if(!h||!Il(t,y,this.currentDirection))return;const x=this.getAxisMotionValue(t);let S=this.originPoint[t]+h[t];this.constraints&&this.constraints[t]&&(S=Hj(S,this.constraints[t],this.elastic[t])),x.set(S)}resolveConstraints(){var x;const{dragConstraints:t,dragElastic:s}=this.getProps(),h=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(x=this.visualElement.projection)==null?void 0:x.layout,y=this.constraints;t&&Ts(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&h?this.constraints=Ij(h.layoutBox,t):this.constraints=!1,this.elastic=$j(s),y!==this.constraints&&h&&this.constraints&&!this.hasMutatedConstraints&&Mn(S=>{this.constraints!==!1&&this.getAxisMotionValue(S)&&(this.constraints[S]=Gj(h.layoutBox[S],this.constraints[S]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ts(t))return!1;const h=t.current,{projection:y}=this.visualElement;if(!y||!y.layout)return!1;const x=ZM(h,y.root,this.visualElement.getTransformPagePoint());let S=Yj(y.layout.layoutBox,x);if(s){const f=s(WM(S));this.hasMutatedConstraints=!!f,f&&(S=d1(f))}return S}startAnimation(t){const{drag:s,dragMomentum:h,dragElastic:y,dragTransition:x,dragSnapToOrigin:S,onDragTransitionEnd:f}=this.getProps(),r=this.constraints||{},c=Mn(d=>{if(!Il(d,s,this.currentDirection))return;let a=r&&r[d]||{};S&&(a={min:0,max:0});const l=y?200:1e6,u=y?40:1e7,m={type:"inertia",velocity:h?t[d]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...x,...a};return this.startAxisValueAnimation(d,m)});return Promise.all(c).then(f)}startAxisValueAnimation(t,s){const h=this.getAxisMotionValue(t);return ed(this.visualElement,t),h.start(em(t,h,0,s,this.visualElement,!1))}stopAnimation(){Mn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Mn(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,h=this.visualElement.getProps(),y=h[s];return y||this.visualElement.getValue(t,(h.initial?h.initial[t]:void 0)||0)}snapToCursor(t){Mn(s=>{const{drag:h}=this.getProps();if(!Il(s,h,this.currentDirection))return;const{projection:y}=this.visualElement,x=this.getAxisMotionValue(s);if(y&&y.layout){const{min:S,max:f}=y.layout.layoutBox[s];x.set(t[s]-dt(S,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:h}=this.visualElement;if(!Ts(s)||!h||!this.constraints)return;this.stopAnimation();const y={x:0,y:0};Mn(S=>{const f=this.getAxisMotionValue(S);if(f&&this.constraints!==!1){const r=f.get();y[S]=Xj({min:r,max:r},this.constraints[S])}});const{transformTemplate:x}=this.visualElement.getProps();this.visualElement.current.style.transform=x?x({},""):"none",h.root&&h.root.updateScroll(),h.updateLayout(),this.resolveConstraints(),Mn(S=>{if(!Il(S,t,null))return;const f=this.getAxisMotionValue(S),{min:r,max:c}=this.constraints[S];f.set(dt(r,c,y[S]))})}addListeners(){if(!this.visualElement.current)return;Wj.set(this.visualElement,this);const t=this.visualElement.current,s=Qa(t,"pointerdown",r=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(r)}),h=()=>{const{dragConstraints:r}=this.getProps();Ts(r)&&r.current&&(this.constraints=this.resolveRefConstraints())},{projection:y}=this.visualElement,x=y.addEventListener("measure",h);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),ht.read(h);const S=mo(window,"resize",()=>this.scalePositionWithinConstraints()),f=y.addEventListener("didUpdate",({delta:r,hasLayoutChanged:c})=>{this.isDragging&&c&&(Mn(d=>{const a=this.getAxisMotionValue(d);a&&(this.originPoint[d]+=r[d].translate,a.set(a.get()+r[d].translate))}),this.visualElement.render())});return()=>{S(),s(),x(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:h=!1,dragPropagation:y=!1,dragConstraints:x=!1,dragElastic:S=nd,dragMomentum:f=!0}=t;return{...t,drag:s,dragDirectionLock:h,dragPropagation:y,dragConstraints:x,dragElastic:S,dragMomentum:f}}}function Il(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function Kj(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class Zj extends ir{constructor(t){super(t),this.removeGroupControls=An,this.removeListeners=An,this.controls=new qj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}unmount(){this.removeGroupControls(),this.removeListeners()}}const pv=e=>(t,s)=>{e&&ht.postRender(()=>e(t,s))};class Qj extends ir{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(t){this.session=new M1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:O1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:h,onPanEnd:y}=this.node.getProps();return{onSessionStart:pv(t),onStart:pv(s),onMove:h,onEnd:(x,S)=>{delete this.session,y&&ht.postRender(()=>y(x,S))}}}mount(){this.removePointerDownListener=Qa(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Va={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(He.test(e))e=parseFloat(e);else return e;const s=yv(e,t.target.x),h=yv(e,t.target.y);return`${s}% ${h}%`}},Jj={correct:(e,{treeScale:t,projectionDelta:s})=>{const h=e,y=tr.parse(e);if(y.length>5)return h;const x=tr.createTransformer(e),S=typeof y[0]!="number"?1:0,f=s.x.scale*t.x,r=s.y.scale*t.y;y[0+S]/=f,y[1+S]/=r;const c=dt(f,r,.5);return typeof y[2+S]=="number"&&(y[2+S]/=c),typeof y[3+S]=="number"&&(y[3+S]/=c),x(y)}};let df=!1;class eA extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:h,layoutId:y}=this.props,{projection:x}=t;SM(tA),x&&(s.group&&s.group.add(x),h&&h.register&&y&&h.register(x),df&&x.root.didUpdate(),x.addEventListener("animationComplete",()=>{this.safeToRemove()}),x.setOptions({...x.options,onExitComplete:()=>this.safeToRemove()})),ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:h,drag:y,isPresent:x}=this.props,{projection:S}=h;return S&&(S.isPresent=x,df=!0,y||t.layoutDependency!==s||s===void 0||t.isPresent!==x?S.willUpdate():this.safeToRemove(),t.isPresent!==x&&(x?S.promote():S.relegate()||ht.postRender(()=>{const f=S.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Yd.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:h}=this.props,{projection:y}=t;df=!0,y&&(y.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(y),h&&h.deregister&&h.deregister(y))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function A1(e){const[t,s]=Jb(),h=M.useContext(Cd);return _.jsx(eA,{...e,layoutGroup:h,switchLayoutGroup:M.useContext(h1),isPresent:t,safeToRemove:s})}const tA={borderRadius:{...Va,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Va,borderTopRightRadius:Va,borderBottomLeftRadius:Va,borderBottomRightRadius:Va,boxShadow:Jj};function nA(e,t,s){const h=Gt(e)?e:Dr(e);return h.start(em("",h,t,s)),h.animation}const iA=(e,t)=>e.depth-t.depth;class rA{constructor(){this.children=[],this.isDirty=!1}add(t){Td(this.children,t),this.isDirty=!0}remove(t){kd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iA),this.isDirty=!1,this.children.forEach(t)}}function sA(e,t){const s=un.now(),h=({timestamp:y})=>{const x=y-s;x>=t&&(er(h),e(x-t))};return ht.setup(h,!0),()=>er(h)}const D1=["TopLeft","TopRight","BottomLeft","BottomRight"],aA=D1.length,vv=e=>typeof e=="string"?parseFloat(e):e,xv=e=>typeof e=="number"||He.test(e);function oA(e,t,s,h,y,x){y?(e.opacity=dt(0,s.opacity??1,lA(h)),e.opacityExit=dt(t.opacity??1,0,cA(h))):x&&(e.opacity=dt(t.opacity??1,s.opacity??1,h));for(let S=0;S<aA;S++){const f=`border${D1[S]}Radius`;let r=bv(t,f),c=bv(s,f);if(r===void 0&&c===void 0)continue;r||(r=0),c||(c=0),r===0||c===0||xv(r)===xv(c)?(e[f]=Math.max(dt(vv(r),vv(c),h),0),(Qn.test(c)||Qn.test(r))&&(e[f]+="%")):e[f]=c}(t.rotate||s.rotate)&&(e.rotate=dt(t.rotate||0,s.rotate||0,h))}function bv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lA=R1(0,.5,xb),cA=R1(.5,.95,An);function R1(e,t,s){return h=>h<e?0:h>t?1:s(lo(e,t,h))}function wv(e,t){e.min=t.min,e.max=t.max}function On(e,t){wv(e.x,t.x),wv(e.y,t.y)}function Sv(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Cv(e,t,s,h,y){return e-=t,e=cc(e,1/s,h),y!==void 0&&(e=cc(e,1/y,h)),e}function uA(e,t=0,s=1,h=.5,y,x=e,S=e){if(Qn.test(t)&&(t=parseFloat(t),t=dt(S.min,S.max,t/100)-S.min),typeof t!="number")return;let f=dt(x.min,x.max,h);e===x&&(f-=t),e.min=Cv(e.min,t,s,f,y),e.max=Cv(e.max,t,s,f,y)}function _v(e,t,[s,h,y],x,S){uA(e,t[s],t[h],t[y],t.scale,x,S)}const hA=["x","scaleX","originX"],fA=["y","scaleY","originY"];function Tv(e,t,s,h){_v(e.x,t,hA,s?s.x:void 0,h?h.x:void 0),_v(e.y,t,fA,s?s.y:void 0,h?h.y:void 0)}function kv(e){return e.translate===0&&e.scale===1}function N1(e){return kv(e.x)&&kv(e.y)}function Ev(e,t){return e.min===t.min&&e.max===t.max}function dA(e,t){return Ev(e.x,t.x)&&Ev(e.y,t.y)}function Ov(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function P1(e,t){return Ov(e.x,t.x)&&Ov(e.y,t.y)}function Mv(e){return Jt(e.x)/Jt(e.y)}function jv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mA{constructor(){this.members=[]}add(t){Td(this.members,t),t.scheduleRender()}remove(t){if(kd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(y=>t===y);if(s===0)return!1;let h;for(let y=s;y>=0;y--){const x=this.members[y];if(x.isPresent!==!1){h=x;break}}return h?(this.promote(h),!0):!1}promote(t,s){const h=this.lead;if(t!==h&&(this.prevLead=h,this.lead=t,t.show(),h)){h.instance&&h.scheduleRender(),t.scheduleRender(),t.resumeFrom=h,s&&(t.resumeFrom.preserveOpacity=!0),h.snapshot&&(t.snapshot=h.snapshot,t.snapshot.latestValues=h.animationValues||h.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:y}=t.options;y===!1&&h.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:h}=t;s.onExitComplete&&s.onExitComplete(),h&&h.options.onExitComplete&&h.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gA(e,t,s){let h="";const y=e.x.translate/t.x,x=e.y.translate/t.y,S=(s==null?void 0:s.z)||0;if((y||x||S)&&(h=`translate3d(${y}px, ${x}px, ${S}px) `),(t.x!==1||t.y!==1)&&(h+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:c,rotate:d,rotateX:a,rotateY:l,skewX:u,skewY:m}=s;c&&(h=`perspective(${c}px) ${h}`),d&&(h+=`rotate(${d}deg) `),a&&(h+=`rotateX(${a}deg) `),l&&(h+=`rotateY(${l}deg) `),u&&(h+=`skewX(${u}deg) `),m&&(h+=`skewY(${m}deg) `)}const f=e.x.scale*t.x,r=e.y.scale*t.y;return(f!==1||r!==1)&&(h+=`scale(${f}, ${r})`),h||"none"}const mf=["","X","Y","Z"],pA=1e3;let yA=0;function gf(e,t,s,h){const{latestValues:y}=t;y[e]&&(s[e]=y[e],t.setStaticValue(e,0),h&&(h[e]=0))}function L1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=w1(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:y,layoutId:x}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",ht,!(y||x))}const{parent:h}=e;h&&!h.hasCheckedOptimisedAppear&&L1(h)}function F1({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:h,resetTransform:y}){return class{constructor(S={},f=t==null?void 0:t()){this.id=yA++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bA),this.nodes.forEach(_A),this.nodes.forEach(TA),this.nodes.forEach(wA)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=S,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let r=0;r<this.path.length;r++)this.path[r].shouldResetTransform=!0;this.root===this&&(this.nodes=new rA)}addEventListener(S,f){return this.eventHandlers.has(S)||this.eventHandlers.set(S,new Md),this.eventHandlers.get(S).add(f)}notifyListeners(S,...f){const r=this.eventHandlers.get(S);r&&r.notify(...f)}hasListeners(S){return this.eventHandlers.has(S)}mount(S){if(this.instance)return;this.isSVG=Qb(S)&&!cM(S),this.instance=S;const{layoutId:f,layout:r,visualElement:c}=this.options;if(c&&!c.current&&c.mount(S),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||f)&&(this.isLayoutDirty=!0),e){let d,a=0;const l=()=>this.root.updateBlockedByResize=!1;ht.read(()=>{a=window.innerWidth}),e(S,()=>{const u=window.innerWidth;u!==a&&(a=u,this.root.updateBlockedByResize=!0,d&&d(),d=sA(l,250),ec.hasAnimatedSinceResize&&(ec.hasAnimatedSinceResize=!1,this.nodes.forEach(Rv)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&c&&(f||r)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:a,hasRelativeLayoutChanged:l,layout:u})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||jA,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=c.getProps(),b=!this.targetLayout||!P1(this.targetLayout,u),w=!a&&l;if(this.options.layoutRoot||this.resumeFrom||w||a&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...Hd(m,"layout"),onPlay:v,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(d,w)}else a||Rv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=u})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const S=this.getStack();S&&S.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),er(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kA),this.animationId++)}getTransformTemplate(){const{visualElement:S}=this.options;return S&&S.getProps().transformTemplate}willUpdate(S=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&L1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const a=this.path[d];a.shouldResetTransform=!0,a.updateScroll("snapshot"),a.options.layoutRoot&&a.willUpdate(!1)}const{layoutId:f,layout:r}=this.options;if(f===void 0&&!r)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),S&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Av);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Dv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CA),this.nodes.forEach(vA),this.nodes.forEach(xA)):this.nodes.forEach(Dv),this.clearAllSnapshots();const f=un.now();Bt.delta=_i(0,1e3/60,f-Bt.timestamp),Bt.timestamp=f,Bt.isProcessing=!0,rf.update.process(Bt),rf.preRender.process(Bt),rf.render.process(Bt),Bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SA),this.sharedNodes.forEach(EA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jt(this.snapshot.measuredBox.x)&&!Jt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++)this.path[r].updateScroll();const S=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,S?S.layoutBox:void 0)}updateScroll(S="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===S&&(f=!1),f&&this.instance){const r=h(this.instance);this.scroll={animationId:this.root.animationId,phase:S,isRoot:r,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:r}}}resetTransform(){if(!y)return;const S=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!N1(this.projectionDelta),r=this.getTransformTemplate(),c=r?r(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;S&&this.instance&&(f||_r(this.latestValues)||d)&&(y(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(S=!0){const f=this.measurePageBox();let r=this.removeElementScroll(f);return S&&(r=this.removeTransform(r)),AA(r),{animationId:this.root.animationId,measuredBox:f,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:S}=this.options;if(!S)return xt();const f=S.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(DA))){const{scroll:d}=this.root;d&&(ks(f.x,d.offset.x),ks(f.y,d.offset.y))}return f}removeElementScroll(S){var r;const f=xt();if(On(f,S),(r=this.scroll)!=null&&r.wasRoot)return f;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:a,options:l}=d;d!==this.root&&a&&l.layoutScroll&&(a.wasRoot&&On(f,S),ks(f.x,a.offset.x),ks(f.y,a.offset.y))}return f}applyTransform(S,f=!1){const r=xt();On(r,S);for(let c=0;c<this.path.length;c++){const d=this.path[c];!f&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Es(r,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),_r(d.latestValues)&&Es(r,d.latestValues)}return _r(this.latestValues)&&Es(r,this.latestValues),r}removeTransform(S){const f=xt();On(f,S);for(let r=0;r<this.path.length;r++){const c=this.path[r];if(!c.instance||!_r(c.latestValues))continue;Kf(c.latestValues)&&c.updateSnapshot();const d=xt(),a=c.measurePageBox();On(d,a),Tv(f,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return _r(this.latestValues)&&Tv(f,this.latestValues),f}setTargetDelta(S){this.targetDelta=S,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(S){this.options={...this.options,...S,crossfade:S.crossfade!==void 0?S.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(S=!1){var l;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const r=!!this.resumingFrom||this!==f;if(!(S||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(l=this.parent)!=null&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:a}=this.options;if(!(!this.layout||!(d||a))){if(this.resolvedRelativeTargetAt=Bt.timestamp,!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),eo(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):On(this.target,this.layout.layoutBox),g1(this.target,this.targetDelta)):On(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),eo(this.relativeTargetOrigin,this.target,u.target),On(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Kf(this.parent.latestValues)||m1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const S=this.getLead(),f=!!this.resumingFrom||this!==S;let r=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(r=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Bt.timestamp&&(r=!1),r)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;On(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,l=this.treeScale.y;KM(this.layoutCorrected,this.treeScale,this.path,f),S.layout&&!S.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(S.target=S.layout.layoutBox,S.targetWithTransforms=xt());const{target:u}=S;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Sv(this.prevProjectionDelta.x,this.projectionDelta.x),Sv(this.prevProjectionDelta.y,this.projectionDelta.y)),Ja(this.projectionDelta,this.layoutCorrected,u,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==l||!jv(this.projectionDelta.x,this.prevProjectionDelta.x)||!jv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(S=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),S){const r=this.getStack();r&&r.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Os(),this.projectionDelta=Os(),this.projectionDeltaWithTransform=Os()}setAnimationOrigin(S,f=!1){const r=this.snapshot,c=r?r.latestValues:{},d={...this.latestValues},a=Os();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const l=xt(),u=r?r.source:void 0,m=this.layout?this.layout.source:void 0,v=u!==m,g=this.getStack(),b=!g||g.members.length<=1,w=!!(v&&!b&&this.options.crossfade===!0&&!this.path.some(MA));this.animationProgress=0;let T;this.mixTargetDelta=k=>{const O=k/1e3;Nv(a.x,S.x,O),Nv(a.y,S.y,O),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(eo(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OA(this.relativeTarget,this.relativeTargetOrigin,l,O),T&&dA(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=xt()),On(T,this.relativeTarget)),v&&(this.animationValues=d,oA(d,c,this.latestValues,O,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(S){var f,r,c;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(c=(r=this.resumingFrom)==null?void 0:r.currentAnimation)==null||c.stop(),this.pendingAnimation&&(er(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ht.update(()=>{ec.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Dr(0)),this.currentAnimation=nA(this.motionValue,[0,1e3],{...S,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),S.onUpdate&&S.onUpdate(d)},onStop:()=>{},onComplete:()=>{S.onComplete&&S.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const S=this.getStack();S&&S.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const S=this.getLead();let{targetWithTransforms:f,target:r,layout:c,latestValues:d}=S;if(!(!f||!r||!c)){if(this!==S&&this.layout&&c&&z1(this.options.animationType,this.layout.layoutBox,c.layoutBox)){r=this.target||xt();const a=Jt(this.layout.layoutBox.x);r.x.min=S.target.x.min,r.x.max=r.x.min+a;const l=Jt(this.layout.layoutBox.y);r.y.min=S.target.y.min,r.y.max=r.y.min+l}On(f,r),Es(f,d),Ja(this.projectionDeltaWithTransform,this.layoutCorrected,f,d)}}registerSharedNode(S,f){this.sharedNodes.has(S)||this.sharedNodes.set(S,new mA),this.sharedNodes.get(S).add(f);const c=f.options.initialPromotionConfig;f.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(f):void 0})}isLead(){const S=this.getStack();return S?S.lead===this:!0}getLead(){var f;const{layoutId:S}=this.options;return S?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:S}=this.options;return S?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:S}=this.options;if(S)return this.root.sharedNodes.get(S)}promote({needsReset:S,transition:f,preserveFollowOpacity:r}={}){const c=this.getStack();c&&c.promote(this,r),S&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const S=this.getStack();return S?S.relegate(this):!1}resetSkewAndRotation(){const{visualElement:S}=this.options;if(!S)return;let f=!1;const{latestValues:r}=S;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(f=!0),!f)return;const c={};r.z&&gf("z",S,c,this.animationValues);for(let d=0;d<mf.length;d++)gf(`rotate${mf[d]}`,S,c,this.animationValues),gf(`skew${mf[d]}`,S,c,this.animationValues);S.render();for(const d in c)S.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);S.scheduleRender()}applyProjectionStyles(S,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){S.visibility="hidden";return}const r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,S.visibility="",S.opacity="",S.pointerEvents=Jl(f==null?void 0:f.pointerEvents)||"",S.transform=r?r(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Jl(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!_r(this.latestValues)&&(S.transform=r?r({},""):"none",this.hasProjected=!1);return}S.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let a=gA(this.projectionDeltaWithTransform,this.treeScale,d);r&&(a=r(d,a)),S.transform=a;const{x:l,y:u}=this.projectionDelta;S.transformOrigin=`${l.origin*100}% ${u.origin*100}% 0`,c.animationValues?S.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:S.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in fo){if(d[m]===void 0)continue;const{correct:v,applyTo:g,isCSSVariable:b}=fo[m],w=a==="none"?d[m]:v(d[m],c);if(g){const T=g.length;for(let k=0;k<T;k++)S[g[k]]=w}else b?this.options.visualElement.renderState.vars[m]=w:S[m]=w}this.options.layoutId&&(S.pointerEvents=c===this?Jl(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(S=>{var f;return(f=S.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(Av),this.root.sharedNodes.clear()}}}function vA(e){e.updateLayout()}function xA(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:h,measuredBox:y}=e.layout,{animationType:x}=e.options,S=t.source!==e.layout.source;x==="size"?Mn(a=>{const l=S?t.measuredBox[a]:t.layoutBox[a],u=Jt(l);l.min=h[a].min,l.max=l.min+u}):z1(x,t.layoutBox,h)&&Mn(a=>{const l=S?t.measuredBox[a]:t.layoutBox[a],u=Jt(h[a]);l.max=l.min+u,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[a].max=e.relativeTarget[a].min+u)});const f=Os();Ja(f,h,t.layoutBox);const r=Os();S?Ja(r,e.applyTransform(y,!0),t.measuredBox):Ja(r,h,t.layoutBox);const c=!N1(f);let d=!1;if(!e.resumeFrom){const a=e.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:l,layout:u}=a;if(l&&u){const m=xt();eo(m,t.layoutBox,l.layoutBox);const v=xt();eo(v,h,u.layoutBox),P1(m,v)||(d=!0),a.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=m,e.relativeParent=a)}}}e.notifyListeners("didUpdate",{layout:h,snapshot:t,delta:r,layoutDelta:f,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:h}=e.options;h&&h()}e.options.transition=void 0}function bA(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wA(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SA(e){e.clearSnapshot()}function Av(e){e.clearMeasurements()}function Dv(e){e.isLayoutDirty=!1}function CA(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _A(e){e.resolveTargetDelta()}function TA(e){e.calcProjection()}function kA(e){e.resetSkewAndRotation()}function EA(e){e.removeLeadSnapshot()}function Nv(e,t,s){e.translate=dt(t.translate,0,s),e.scale=dt(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function Pv(e,t,s,h){e.min=dt(t.min,s.min,h),e.max=dt(t.max,s.max,h)}function OA(e,t,s,h){Pv(e.x,t.x,s.x,h),Pv(e.y,t.y,s.y,h)}function MA(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const jA={duration:.45,ease:[.4,0,.1,1]},Lv=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Fv=Lv("applewebkit/")&&!Lv("chrome/")?Math.round:An;function zv(e){e.min=Fv(e.min),e.max=Fv(e.max)}function AA(e){zv(e.x),zv(e.y)}function z1(e,t,s){return e==="position"||e==="preserve-aspect"&&!Fj(Mv(t),Mv(s),.2)}function DA(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const RA=F1({attachResizeListener:(e,t)=>mo(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pf={current:void 0},B1=F1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!pf.current){const e=new RA({});e.mount(window),e.setOptions({layoutScroll:!0}),pf.current=e}return pf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),NA={pan:{Feature:Qj},drag:{Feature:Zj,ProjectionNode:B1,MeasureLayout:A1}};function Bv(e,t,s){const{props:h}=e;e.animationState&&h.whileHover&&e.animationState.setActive("whileHover",s==="Start");const y="onHover"+s,x=h[y];x&&ht.postRender(()=>x(t,_o(t)))}class PA extends ir{mount(){const{current:t}=this.node;t&&(this.unmount=rM(t,(s,h)=>(Bv(this.node,h,"Start"),y=>Bv(this.node,y,"End"))))}unmount(){}}class LA extends ir{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wo(mo(this.node.current,"focus",()=>this.onFocus()),mo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vv(e,t,s){const{props:h}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&h.whileTap&&e.animationState.setActive("whileTap",s==="Start");const y="onTap"+(s==="End"?"":s),x=h[y];x&&ht.postRender(()=>x(t,_o(t)))}class FA extends ir{mount(){const{current:t}=this.node;t&&(this.unmount=lM(t,(s,h)=>(Vv(this.node,h,"Start"),(y,{success:x})=>Vv(this.node,y,x?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const id=new WeakMap,yf=new WeakMap,zA=e=>{const t=id.get(e.target);t&&t(e)},BA=e=>{e.forEach(zA)};function VA({root:e,...t}){const s=e||document;yf.has(s)||yf.set(s,{});const h=yf.get(s),y=JSON.stringify(t);return h[y]||(h[y]=new IntersectionObserver(BA,{root:e,...t})),h[y]}function UA(e,t,s){const h=VA(t);return id.set(e,s),h.observe(e),()=>{id.delete(e),h.unobserve(e)}}const HA={some:0,all:1};class IA extends ir{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:h,amount:y="some",once:x}=t,S={root:s?s.current:void 0,rootMargin:h,threshold:typeof y=="number"?y:HA[y]},f=r=>{const{isIntersecting:c}=r;if(this.isInView===c||(this.isInView=c,x&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:a}=this.node.getProps(),l=c?d:a;l&&l(r)};return UA(this.node.current,S,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(YA(t,s))&&this.startObserver()}unmount(){}}function YA({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const XA={inView:{Feature:IA},tap:{Feature:FA},focus:{Feature:LA},hover:{Feature:PA}},GA={layout:{ProjectionNode:B1,MeasureLayout:A1}},$A={...Aj,...XA,...NA,...GA},Oe=$M($A,aj);function Uv(e){const t=_c(()=>Dr(e)),{isStatic:s}=M.useContext(kc);if(s){const[,h]=M.useState(e);M.useEffect(()=>t.on("change",h),[])}return t}function jc(){return(jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(e[h]=s[h])}return e}).apply(this,arguments)}function V1(e,t){if(e==null)return{};var s,h,y={},x=Object.keys(e);for(h=0;h<x.length;h++)t.indexOf(s=x[h])>=0||(y[s]=e[s]);return y}function rd(e){var t=M.useRef(e),s=M.useRef(function(h){t.current&&t.current(h)});return t.current=e,s.current}var go=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=1),e>s?s:e<t?t:e},to=function(e){return"touches"in e},sd=function(e){return e&&e.ownerDocument.defaultView||self},Hv=function(e,t,s){var h=e.getBoundingClientRect(),y=to(t)?function(x,S){for(var f=0;f<x.length;f++)if(x[f].identifier===S)return x[f];return x[0]}(t.touches,s):t;return{left:go((y.pageX-(h.left+sd(e).pageXOffset))/h.width),top:go((y.pageY-(h.top+sd(e).pageYOffset))/h.height)}},Iv=function(e){!to(e)&&e.preventDefault()},U1=Le.memo(function(e){var t=e.onMove,s=e.onKey,h=V1(e,["onMove","onKey"]),y=M.useRef(null),x=rd(t),S=rd(s),f=M.useRef(null),r=M.useRef(!1),c=M.useMemo(function(){var u=function(g){Iv(g),(to(g)?g.touches.length>0:g.buttons>0)&&y.current?x(Hv(y.current,g,f.current)):v(!1)},m=function(){return v(!1)};function v(g){var b=r.current,w=sd(y.current),T=g?w.addEventListener:w.removeEventListener;T(b?"touchmove":"mousemove",u),T(b?"touchend":"mouseup",m)}return[function(g){var b=g.nativeEvent,w=y.current;if(w&&(Iv(b),!function(k,O){return O&&!to(k)}(b,r.current)&&w)){if(to(b)){r.current=!0;var T=b.changedTouches||[];T.length&&(f.current=T[0].identifier)}w.focus(),x(Hv(w,b,f.current)),v(!0)}},function(g){var b=g.which||g.keyCode;b<37||b>40||(g.preventDefault(),S({left:b===39?.05:b===37?-.05:0,top:b===40?.05:b===38?-.05:0}))},v]},[S,x]),d=c[0],a=c[1],l=c[2];return M.useEffect(function(){return l},[l]),Le.createElement("div",jc({},h,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:y,onKeyDown:a,tabIndex:0,role:"slider"}))}),tm=function(e){return e.filter(Boolean).join(" ")},H1=function(e){var t=e.color,s=e.left,h=e.top,y=h===void 0?.5:h,x=tm(["react-colorful__pointer",e.className]);return Le.createElement("div",{className:x,style:{top:100*y+"%",left:100*s+"%"}},Le.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},Vt=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=Math.pow(10,t)),Math.round(s*e)/s},WA=function(e){return JA(ad(e))},ad=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Vt(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?Vt(parseInt(e.substring(6,8),16)/255,2):1}},qA=function(e){return QA(ZA(e))},KA=function(e){var t=e.s,s=e.v,h=e.a,y=(200-t)*s/100;return{h:Vt(e.h),s:Vt(y>0&&y<200?t*s/100/(y<=100?y:200-y)*100:0),l:Vt(y/2),a:Vt(h,2)}},od=function(e){var t=KA(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},ZA=function(e){var t=e.h,s=e.s,h=e.v,y=e.a;t=t/360*6,s/=100,h/=100;var x=Math.floor(t),S=h*(1-s),f=h*(1-(t-x)*s),r=h*(1-(1-t+x)*s),c=x%6;return{r:Vt(255*[h,f,S,S,r,h][c]),g:Vt(255*[r,h,h,f,S,S][c]),b:Vt(255*[S,S,r,h,h,f][c]),a:Vt(y,2)}},Yl=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},QA=function(e){var t=e.r,s=e.g,h=e.b,y=e.a,x=y<1?Yl(Vt(255*y)):"";return"#"+Yl(t)+Yl(s)+Yl(h)+x},JA=function(e){var t=e.r,s=e.g,h=e.b,y=e.a,x=Math.max(t,s,h),S=x-Math.min(t,s,h),f=S?x===t?(s-h)/S:x===s?2+(h-t)/S:4+(t-s)/S:0;return{h:Vt(60*(f<0?f+6:f)),s:Vt(x?S/x*100:0),v:Vt(x/255*100),a:y}},eD=Le.memo(function(e){var t=e.hue,s=e.onChange,h=tm(["react-colorful__hue",e.className]);return Le.createElement("div",{className:h},Le.createElement(U1,{onMove:function(y){s({h:360*y.left})},onKey:function(y){s({h:go(t+360*y.left,0,360)})},"aria-label":"Hue","aria-valuenow":Vt(t),"aria-valuemax":"360","aria-valuemin":"0"},Le.createElement(H1,{className:"react-colorful__hue-pointer",left:t/360,color:od({h:t,s:100,v:100,a:1})})))}),tD=Le.memo(function(e){var t=e.hsva,s=e.onChange,h={backgroundColor:od({h:t.h,s:100,v:100,a:1})};return Le.createElement("div",{className:"react-colorful__saturation",style:h},Le.createElement(U1,{onMove:function(y){s({s:100*y.left,v:100-100*y.top})},onKey:function(y){s({s:go(t.s+100*y.left,0,100),v:go(t.v-100*y.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Vt(t.s)+"%, Brightness "+Vt(t.v)+"%"},Le.createElement(H1,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:od(t)})))}),I1=function(e,t){if(e===t)return!0;for(var s in e)if(e[s]!==t[s])return!1;return!0},nD=function(e,t){return e.toLowerCase()===t.toLowerCase()||I1(ad(e),ad(t))};function iD(e,t,s){var h=rd(s),y=M.useState(function(){return e.toHsva(t)}),x=y[0],S=y[1],f=M.useRef({color:t,hsva:x});M.useEffect(function(){if(!e.equal(t,f.current.color)){var c=e.toHsva(t);f.current={hsva:c,color:t},S(c)}},[t,e]),M.useEffect(function(){var c;I1(x,f.current.hsva)||e.equal(c=e.fromHsva(x),f.current.color)||(f.current={hsva:x,color:c},h(c))},[x,e,h]);var r=M.useCallback(function(c){S(function(d){return Object.assign({},d,c)})},[]);return[x,r]}var rD=typeof window<"u"?M.useLayoutEffect:M.useEffect,sD=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Yv=new Map,aD=function(e){rD(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!Yv.has(t)){var s=t.createElement("style");s.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Yv.set(t,s);var h=sD();h&&s.setAttribute("nonce",h),t.head.appendChild(s)}},[])},oD=function(e){var t=e.className,s=e.colorModel,h=e.color,y=h===void 0?s.defaultColor:h,x=e.onChange,S=V1(e,["className","colorModel","color","onChange"]),f=M.useRef(null);aD(f);var r=iD(s,y,x),c=r[0],d=r[1],a=tm(["react-colorful",t]);return Le.createElement("div",jc({},S,{ref:f,className:a}),Le.createElement(tD,{hsva:c,onChange:d}),Le.createElement(eD,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},lD={defaultColor:"000",toHsva:WA,fromHsva:function(e){return qA({h:e.h,s:e.s,v:e.v,a:1})},equal:nD},cD=function(e){return Le.createElement(oD,jc({},e,{colorModel:lD}))};const Y1=["shift","alt","meta","mod","ctrl","control"],uD={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function Ji(e){return(uD[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function X1(e){return Y1.includes(e)}function vf(e,t=","){return e.toLowerCase().split(t)}function xf(e,t="+",s=">",h=!1,y){let x=[],S=!1;e.includes(s)?(S=!0,x=e.toLocaleLowerCase().split(s).map(c=>Ji(c))):x=e.toLocaleLowerCase().split(t).map(c=>Ji(c));const f={alt:x.includes("alt"),ctrl:x.includes("ctrl")||x.includes("control"),shift:x.includes("shift"),meta:x.includes("meta"),mod:x.includes("mod"),useKey:h},r=x.filter(c=>!Y1.includes(c));return{...f,keys:r,description:y,isSequence:S}}typeof document<"u"&&(document.addEventListener("keydown",e=>{e.code!==void 0&&G1([Ji(e.code)])}),document.addEventListener("keyup",e=>{e.code!==void 0&&$1([Ji(e.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{bi.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{bi.clear()},0)}));const bi=new Set;function nm(e){return Array.isArray(e)}function hD(e,t=","){return(nm(e)?e:e.split(t)).every(s=>bi.has(s.trim().toLowerCase()))}function G1(e){const t=Array.isArray(e)?e:[e];bi.has("meta")&&bi.forEach(s=>!X1(s)&&bi.delete(s.toLowerCase())),t.forEach(s=>bi.add(s.toLowerCase()))}function $1(e){const t=Array.isArray(e)?e:[e];e==="meta"?bi.clear():t.forEach(s=>bi.delete(s.toLowerCase()))}function fD(e,t,s){(typeof s=="function"&&s(e,t)||s===!0)&&e.preventDefault()}function dD(e,t,s){return typeof s=="function"?s(e,t):s===!0||s===void 0}function mD(e){return W1(e,["input","textarea","select"])}function W1(e,t=!1){const{target:s,composed:h}=e;let y;return gD(s)&&h?y=e.composedPath()[0]&&e.composedPath()[0].tagName:y=s&&s.tagName,nm(t)?!!(y&&t&&t.some(x=>x.toLowerCase()===y.toLowerCase())):!!(y&&t&&t)}function gD(e){return!!e.tagName&&!e.tagName.startsWith("-")&&e.tagName.includes("-")}function pD(e,t){return e.length===0&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):t?e.some(s=>t.includes(s))||e.includes("*"):!0}const yD=(e,t,s=!1)=>{const{alt:h,meta:y,mod:x,shift:S,ctrl:f,keys:r,useKey:c}=t,{code:d,key:a,ctrlKey:l,metaKey:u,shiftKey:m,altKey:v}=e,g=Ji(d);if(c&&(r==null?void 0:r.length)===1&&r.includes(a))return!0;if(!(r!=null&&r.includes(g))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(g))return!1;if(!s){if(h!==v&&g!=="alt"||S!==m&&g!=="shift")return!1;if(x){if(!u&&!l)return!1}else if(y!==u&&g!=="meta"&&g!=="os"||f!==l&&g!=="ctrl"&&g!=="control")return!1}return r&&r.length===1&&r.includes(g)?!0:r?hD(r):!r},vD=M.createContext(void 0),xD=()=>M.useContext(vD);function q1(e,t){return e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((s,h)=>s&&q1(e[h],t[h]),!0):e===t}const bD=M.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),wD=()=>M.useContext(bD);function SD(e){const t=M.useRef(void 0);return q1(t.current,e)||(t.current=e),t.current}const Xv=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},CD=typeof window<"u"?M.useLayoutEffect:M.useEffect;function zt(e,t,s,h){const y=M.useRef(null),x=M.useRef(!1),S=s instanceof Array?h instanceof Array?void 0:h:s,f=nm(e)?e.join(S==null?void 0:S.delimiter):e,r=s instanceof Array?s:h instanceof Array?h:void 0,c=M.useCallback(t,r??[]),d=M.useRef(c);r?d.current=c:d.current=t;const a=SD(S),{activeScopes:l}=wD(),u=xD();return CD(()=>{if((a==null?void 0:a.enabled)===!1||!pD(l,a==null?void 0:a.scopes))return;let m=[],v;const g=(k,O=!1)=>{var D;if(!(mD(k)&&!W1(k,a==null?void 0:a.enableOnFormTags))){if(y.current!==null){const P=y.current.getRootNode();if((P instanceof Document||P instanceof ShadowRoot)&&P.activeElement!==y.current&&!y.current.contains(P.activeElement)){Xv(k);return}}(D=k.target)!=null&&D.isContentEditable&&!(a!=null&&a.enableOnContentEditable)||vf(f,a==null?void 0:a.delimiter).forEach(P=>{var F,V,$,te;if(P.includes((a==null?void 0:a.splitKey)??"+")&&P.includes((a==null?void 0:a.sequenceSplitKey)??">")){console.warn(`Hotkey ${P} contains both ${(a==null?void 0:a.splitKey)??"+"} and ${(a==null?void 0:a.sequenceSplitKey)??">"} which is not supported.`);return}const X=xf(P,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description);if(X.isSequence){v=setTimeout(()=>{m=[]},(a==null?void 0:a.sequenceTimeoutMs)??1e3);const Q=X.useKey?k.key:Ji(k.code);if(X1(Q.toLowerCase()))return;m.push(Q);const se=(F=X.keys)==null?void 0:F[m.length-1];if(Q!==se){m=[],v&&clearTimeout(v);return}m.length===((V=X.keys)==null?void 0:V.length)&&(d.current(k,X),v&&clearTimeout(v),m=[])}else if(yD(k,X,a==null?void 0:a.ignoreModifiers)||($=X.keys)!=null&&$.includes("*")){if((te=a==null?void 0:a.ignoreEventWhen)!=null&&te.call(a,k)||O&&x.current)return;if(fD(k,X,a==null?void 0:a.preventDefault),!dD(k,X,a==null?void 0:a.enabled)){Xv(k);return}d.current(k,X),O||(x.current=!0)}})}},b=k=>{k.code!==void 0&&(G1(Ji(k.code)),((a==null?void 0:a.keydown)===void 0&&(a==null?void 0:a.keyup)!==!0||a!=null&&a.keydown)&&g(k))},w=k=>{k.code!==void 0&&($1(Ji(k.code)),x.current=!1,a!=null&&a.keyup&&g(k,!0))},T=y.current||(S==null?void 0:S.document)||document;return T.addEventListener("keyup",w,S==null?void 0:S.eventListenerOptions),T.addEventListener("keydown",b,S==null?void 0:S.eventListenerOptions),u&&vf(f,a==null?void 0:a.delimiter).forEach(k=>u.addHotkey(xf(k,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),()=>{T.removeEventListener("keyup",w,S==null?void 0:S.eventListenerOptions),T.removeEventListener("keydown",b,S==null?void 0:S.eventListenerOptions),u&&vf(f,a==null?void 0:a.delimiter).forEach(k=>u.removeHotkey(xf(k,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),m=[],v&&clearTimeout(v)}},[f,a,l]),y}var To=e=>e.type==="checkbox",Or=e=>e instanceof Date,Qt=e=>e==null;const K1=e=>typeof e=="object";var wt=e=>!Qt(e)&&!Array.isArray(e)&&K1(e)&&!Or(e),Z1=e=>wt(e)&&e.target?To(e.target)?e.target.checked:e.target.value:e,_D=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Q1=(e,t)=>e.has(_D(t)),TD=e=>{const t=e.constructor&&e.constructor.prototype;return wt(t)&&t.hasOwnProperty("isPrototypeOf")},im=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mt(e){let t;const s=Array.isArray(e),h=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(im&&(e instanceof Blob||h))&&(s||wt(e)))if(t=s?[]:Object.create(Object.getPrototypeOf(e)),!s&&!TD(e))t=e;else for(const y in e)e.hasOwnProperty(y)&&(t[y]=Mt(e[y]));else return e;return t}var Ac=e=>/^\w*$/.test(e),bt=e=>e===void 0,rm=e=>Array.isArray(e)?e.filter(Boolean):[],sm=e=>rm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(e,t,s)=>{if(!t||!wt(e))return s;const h=(Ac(t)?[t]:sm(t)).reduce((y,x)=>Qt(y)?y:y[x],e);return bt(h)||h===e?bt(e[t])?s:e[t]:h},vn=e=>typeof e=="boolean",lt=(e,t,s)=>{let h=-1;const y=Ac(t)?[t]:sm(t),x=y.length,S=x-1;for(;++h<x;){const f=y[h];let r=s;if(h!==S){const c=e[f];r=wt(c)||Array.isArray(c)?c:isNaN(+y[h+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=r,e=e[f]}};const uc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},zn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},J1=Le.createContext(null);J1.displayName="HookFormContext";const am=()=>Le.useContext(J1);var ew=(e,t,s,h=!0)=>{const y={defaultValues:t._defaultValues};for(const x in e)Object.defineProperty(y,x,{get:()=>{const S=x;return t._proxyFormState[S]!==zn.all&&(t._proxyFormState[S]=!h||zn.all),s&&(s[S]=!0),e[S]}});return y};const om=typeof window<"u"?Le.useLayoutEffect:Le.useEffect;function kD(e){const t=am(),{control:s=t.control,disabled:h,name:y,exact:x}=e||{},[S,f]=Le.useState(s._formState),r=Le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return om(()=>s._subscribe({name:y,formState:r.current,exact:x,callback:c=>{!h&&f({...s._formState,...c})}}),[y,h,x]),Le.useEffect(()=>{r.current.isValid&&s._setValid(!0)},[s]),Le.useMemo(()=>ew(S,s,r.current,!1),[S,s])}var Wn=e=>typeof e=="string",tw=(e,t,s,h,y)=>Wn(e)?(h&&t.watch.add(e),Ae(s,e,y)):Array.isArray(e)?e.map(x=>(h&&t.watch.add(x),Ae(s,x))):(h&&(t.watchAll=!0),s),ld=e=>Qt(e)||!K1(e);function xi(e,t,s=new WeakSet){if(ld(e)||ld(t))return e===t;if(Or(e)&&Or(t))return e.getTime()===t.getTime();const h=Object.keys(e),y=Object.keys(t);if(h.length!==y.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const x of h){const S=e[x];if(!y.includes(x))return!1;if(x!=="ref"){const f=t[x];if(Or(S)&&Or(f)||wt(S)&&wt(f)||Array.isArray(S)&&Array.isArray(f)?!xi(S,f,s):S!==f)return!1}}return!0}function ED(e){const t=am(),{control:s=t.control,name:h,defaultValue:y,disabled:x,exact:S,compute:f}=e||{},r=Le.useRef(y),c=Le.useRef(f),d=Le.useRef(void 0);c.current=f;const a=Le.useMemo(()=>s._getWatch(h,r.current),[s,h]),[l,u]=Le.useState(c.current?c.current(a):a);return om(()=>s._subscribe({name:h,formState:{values:!0},exact:S,callback:m=>{if(!x){const v=tw(h,s._names,m.values||s._formValues,!1,r.current);if(c.current){const g=c.current(v);xi(g,d.current)||(u(g),d.current=g)}else u(v)}}}),[s,x,h,S]),Le.useEffect(()=>s._removeUnmounted()),l}function OD(e){const t=am(),{name:s,disabled:h,control:y=t.control,shouldUnregister:x,defaultValue:S}=e,f=Q1(y._names.array,s),r=Le.useMemo(()=>Ae(y._formValues,s,Ae(y._defaultValues,s,S)),[y,s,S]),c=ED({control:y,name:s,defaultValue:r,exact:!0}),d=kD({control:y,name:s,exact:!0}),a=Le.useRef(e),l=Le.useRef(y.register(s,{...e.rules,value:c,...vn(e.disabled)?{disabled:e.disabled}:{}}));a.current=e;const u=Le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ae(d.errors,s)},isDirty:{enumerable:!0,get:()=>!!Ae(d.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Ae(d.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Ae(d.validatingFields,s)},error:{enumerable:!0,get:()=>Ae(d.errors,s)}}),[d,s]),m=Le.useCallback(w=>l.current.onChange({target:{value:Z1(w),name:s},type:uc.CHANGE}),[s]),v=Le.useCallback(()=>l.current.onBlur({target:{value:Ae(y._formValues,s),name:s},type:uc.BLUR}),[s,y._formValues]),g=Le.useCallback(w=>{const T=Ae(y._fields,s);T&&w&&(T._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:k=>w.setCustomValidity(k),reportValidity:()=>w.reportValidity()})},[y._fields,s]),b=Le.useMemo(()=>({name:s,value:c,...vn(h)||d.disabled?{disabled:d.disabled||h}:{},onChange:m,onBlur:v,ref:g}),[s,h,d.disabled,m,v,g,c]);return Le.useEffect(()=>{const w=y._options.shouldUnregister||x;y.register(s,{...a.current.rules,...vn(a.current.disabled)?{disabled:a.current.disabled}:{}});const T=(k,O)=>{const D=Ae(y._fields,k);D&&D._f&&(D._f.mount=O)};if(T(s,!0),w){const k=Mt(Ae(y._options.defaultValues,s));lt(y._defaultValues,s,k),bt(Ae(y._formValues,s))&&lt(y._formValues,s,k)}return!f&&y.register(s),()=>{(f?w&&!y._state.action:w)?y.unregister(s):T(s,!1)}},[s,y,f,x]),Le.useEffect(()=>{y._setDisabledField({disabled:h,name:s})},[h,s,y]),Le.useMemo(()=>({field:b,formState:d,fieldState:u}),[b,d,u])}const bf=e=>e.render(OD(e));var MD=(e,t,s,h,y)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[h]:y||!0}}:{},no=e=>Array.isArray(e)?e:[e],Gv=()=>{let e=[];return{get observers(){return e},next:y=>{for(const x of e)x.next&&x.next(y)},subscribe:y=>(e.push(y),{unsubscribe:()=>{e=e.filter(x=>x!==y)}}),unsubscribe:()=>{e=[]}}},cn=e=>wt(e)&&!Object.keys(e).length,lm=e=>e.type==="file",Bn=e=>typeof e=="function",hc=e=>{if(!im)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},nw=e=>e.type==="select-multiple",cm=e=>e.type==="radio",jD=e=>cm(e)||To(e),wf=e=>hc(e)&&e.isConnected;function AD(e,t){const s=t.slice(0,-1).length;let h=0;for(;h<s;)e=bt(e)?h++:e[t[h++]];return e}function DD(e){for(const t in e)if(e.hasOwnProperty(t)&&!bt(e[t]))return!1;return!0}function _t(e,t){const s=Array.isArray(t)?t:Ac(t)?[t]:sm(t),h=s.length===1?e:AD(e,s),y=s.length-1,x=s[y];return h&&delete h[x],y!==0&&(wt(h)&&cn(h)||Array.isArray(h)&&DD(h))&&_t(e,s.slice(0,-1)),e}var iw=e=>{for(const t in e)if(Bn(e[t]))return!0;return!1};function fc(e,t={}){const s=Array.isArray(e);if(wt(e)||s)for(const h in e)Array.isArray(e[h])||wt(e[h])&&!iw(e[h])?(t[h]=Array.isArray(e[h])?[]:{},fc(e[h],t[h])):Qt(e[h])||(t[h]=!0);return t}function rw(e,t,s){const h=Array.isArray(e);if(wt(e)||h)for(const y in e)Array.isArray(e[y])||wt(e[y])&&!iw(e[y])?bt(t)||ld(s[y])?s[y]=Array.isArray(e[y])?fc(e[y],[]):{...fc(e[y])}:rw(e[y],Qt(t)?{}:t[y],s[y]):s[y]=!xi(e[y],t[y]);return s}var Ua=(e,t)=>rw(e,t,fc(t));const $v={value:!1,isValid:!1},Wv={value:!0,isValid:!0};var sw=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!bt(e[0].attributes.value)?bt(e[0].value)||e[0].value===""?Wv:{value:e[0].value,isValid:!0}:Wv:$v}return $v},aw=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:h})=>bt(e)?e:t?e===""?NaN:e&&+e:s&&Wn(e)?new Date(e):h?h(e):e;const qv={isValid:!1,value:null};var ow=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,qv):qv;function Kv(e){const t=e.ref;return lm(t)?t.files:cm(t)?ow(e.refs).value:nw(t)?[...t.selectedOptions].map(({value:s})=>s):To(t)?sw(e.refs).value:aw(bt(t.value)?e.ref.value:t.value,e)}var RD=(e,t,s,h)=>{const y={};for(const x of e){const S=Ae(t,x);S&&lt(y,x,S._f)}return{criteriaMode:s,names:[...e],fields:y,shouldUseNativeValidation:h}},dc=e=>e instanceof RegExp,Ha=e=>bt(e)?e:dc(e)?e.source:wt(e)?dc(e.value)?e.value.source:e.value:e,Zv=e=>({isOnSubmit:!e||e===zn.onSubmit,isOnBlur:e===zn.onBlur,isOnChange:e===zn.onChange,isOnAll:e===zn.all,isOnTouch:e===zn.onTouched});const Qv="AsyncFunction";var ND=e=>!!e&&!!e.validate&&!!(Bn(e.validate)&&e.validate.constructor.name===Qv||wt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Qv)),PD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Jv=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(h=>e.startsWith(h)&&/^\.\w+/.test(e.slice(h.length))));const io=(e,t,s,h)=>{for(const y of s||Object.keys(e)){const x=Ae(e,y);if(x){const{_f:S,...f}=x;if(S){if(S.refs&&S.refs[0]&&t(S.refs[0],y)&&!h)return!0;if(S.ref&&t(S.ref,S.name)&&!h)return!0;if(io(f,t))break}else if(wt(f)&&io(f,t))break}}};function ex(e,t,s){const h=Ae(e,s);if(h||Ac(s))return{error:h,name:s};const y=s.split(".");for(;y.length;){const x=y.join("."),S=Ae(t,x),f=Ae(e,x);if(S&&!Array.isArray(S)&&s!==x)return{name:s};if(f&&f.type)return{name:x,error:f};if(f&&f.root&&f.root.type)return{name:`${x}.root`,error:f.root};y.pop()}return{name:s}}var LD=(e,t,s,h)=>{s(e);const{name:y,...x}=e;return cn(x)||Object.keys(x).length>=Object.keys(t).length||Object.keys(x).find(S=>t[S]===(!h||zn.all))},FD=(e,t,s)=>!e||!t||e===t||no(e).some(h=>h&&(s?h===t:h.startsWith(t)||t.startsWith(h))),zD=(e,t,s,h,y)=>y.isOnAll?!1:!s&&y.isOnTouch?!(t||e):(s?h.isOnBlur:y.isOnBlur)?!e:(s?h.isOnChange:y.isOnChange)?e:!0,BD=(e,t)=>!rm(Ae(e,t)).length&&_t(e,t),VD=(e,t,s)=>{const h=no(Ae(e,s));return lt(h,"root",t[s]),lt(e,s,h),e},tc=e=>Wn(e);function tx(e,t,s="validate"){if(tc(e)||Array.isArray(e)&&e.every(tc)||vn(e)&&!e)return{type:s,message:tc(e)?e:"",ref:t}}var xs=e=>wt(e)&&!dc(e)?e:{value:e,message:""},nx=async(e,t,s,h,y,x)=>{const{ref:S,refs:f,required:r,maxLength:c,minLength:d,min:a,max:l,pattern:u,validate:m,name:v,valueAsNumber:g,mount:b}=e._f,w=Ae(s,v);if(!b||t.has(v))return{};const T=f?f[0]:S,k=X=>{y&&T.reportValidity&&(T.setCustomValidity(vn(X)?"":X||""),T.reportValidity())},O={},D=cm(S),P=To(S),F=D||P,V=(g||lm(S))&&bt(S.value)&&bt(w)||hc(S)&&S.value===""||w===""||Array.isArray(w)&&!w.length,$=MD.bind(null,v,h,O),te=(X,Q,se,K=vi.maxLength,U=vi.minLength)=>{const q=X?Q:se;O[v]={type:X?K:U,message:q,ref:S,...$(X?K:U,q)}};if(x?!Array.isArray(w)||!w.length:r&&(!F&&(V||Qt(w))||vn(w)&&!w||P&&!sw(f).isValid||D&&!ow(f).isValid)){const{value:X,message:Q}=tc(r)?{value:!!r,message:r}:xs(r);if(X&&(O[v]={type:vi.required,message:Q,ref:T,...$(vi.required,Q)},!h))return k(Q),O}if(!V&&(!Qt(a)||!Qt(l))){let X,Q;const se=xs(l),K=xs(a);if(!Qt(w)&&!isNaN(w)){const U=S.valueAsNumber||w&&+w;Qt(se.value)||(X=U>se.value),Qt(K.value)||(Q=U<K.value)}else{const U=S.valueAsDate||new Date(w),q=A=>new Date(new Date().toDateString()+" "+A),Z=S.type=="time",L=S.type=="week";Wn(se.value)&&w&&(X=Z?q(w)>q(se.value):L?w>se.value:U>new Date(se.value)),Wn(K.value)&&w&&(Q=Z?q(w)<q(K.value):L?w<K.value:U<new Date(K.value))}if((X||Q)&&(te(!!X,se.message,K.message,vi.max,vi.min),!h))return k(O[v].message),O}if((c||d)&&!V&&(Wn(w)||x&&Array.isArray(w))){const X=xs(c),Q=xs(d),se=!Qt(X.value)&&w.length>+X.value,K=!Qt(Q.value)&&w.length<+Q.value;if((se||K)&&(te(se,X.message,Q.message),!h))return k(O[v].message),O}if(u&&!V&&Wn(w)){const{value:X,message:Q}=xs(u);if(dc(X)&&!w.match(X)&&(O[v]={type:vi.pattern,message:Q,ref:S,...$(vi.pattern,Q)},!h))return k(Q),O}if(m){if(Bn(m)){const X=await m(w,s),Q=tx(X,T);if(Q&&(O[v]={...Q,...$(vi.validate,Q.message)},!h))return k(Q.message),O}else if(wt(m)){let X={};for(const Q in m){if(!cn(X)&&!h)break;const se=tx(await m[Q](w,s),T,Q);se&&(X={...se,...$(Q,se.message)},k(se.message),h&&(O[v]=X))}if(!cn(X)&&(O[v]={ref:T,...X},!h))return O}}return k(!0),O};const UD={mode:zn.onSubmit,reValidateMode:zn.onChange,shouldFocusError:!0};function HD(e={}){let t={...UD,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},h={},y=wt(t.defaultValues)||wt(t.values)?Mt(t.defaultValues||t.values)||{}:{},x=t.shouldUnregister?{}:Mt(y),S={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},r,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let a={...d};const l={array:Gv(),state:Gv()},u=t.criteriaMode===zn.all,m=G=>re=>{clearTimeout(c),c=setTimeout(G,re)},v=async G=>{if(!t.disabled&&(d.isValid||a.isValid||G)){const re=t.resolver?cn((await P()).errors):await V(h,!0);re!==s.isValid&&l.state.next({isValid:re})}},g=(G,re)=>{!t.disabled&&(d.isValidating||d.validatingFields||a.isValidating||a.validatingFields)&&((G||Array.from(f.mount)).forEach(J=>{J&&(re?lt(s.validatingFields,J,re):_t(s.validatingFields,J))}),l.state.next({validatingFields:s.validatingFields,isValidating:!cn(s.validatingFields)}))},b=(G,re=[],J,xe,Se=!0,Ce=!0)=>{if(xe&&J&&!t.disabled){if(S.action=!0,Ce&&Array.isArray(Ae(h,G))){const Me=J(Ae(h,G),xe.argA,xe.argB);Se&&lt(h,G,Me)}if(Ce&&Array.isArray(Ae(s.errors,G))){const Me=J(Ae(s.errors,G),xe.argA,xe.argB);Se&&lt(s.errors,G,Me),BD(s.errors,G)}if((d.touchedFields||a.touchedFields)&&Ce&&Array.isArray(Ae(s.touchedFields,G))){const Me=J(Ae(s.touchedFields,G),xe.argA,xe.argB);Se&&lt(s.touchedFields,G,Me)}(d.dirtyFields||a.dirtyFields)&&(s.dirtyFields=Ua(y,x)),l.state.next({name:G,isDirty:te(G,re),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else lt(x,G,re)},w=(G,re)=>{lt(s.errors,G,re),l.state.next({errors:s.errors})},T=G=>{s.errors=G,l.state.next({errors:s.errors,isValid:!1})},k=(G,re,J,xe)=>{const Se=Ae(h,G);if(Se){const Ce=Ae(x,G,bt(J)?Ae(y,G):J);bt(Ce)||xe&&xe.defaultChecked||re?lt(x,G,re?Ce:Kv(Se._f)):se(G,Ce),S.mount&&v()}},O=(G,re,J,xe,Se)=>{let Ce=!1,Me=!1;const je={name:G};if(!t.disabled){if(!J||xe){(d.isDirty||a.isDirty)&&(Me=s.isDirty,s.isDirty=je.isDirty=te(),Ce=Me!==je.isDirty);const ze=xi(Ae(y,G),re);Me=!!Ae(s.dirtyFields,G),ze?_t(s.dirtyFields,G):lt(s.dirtyFields,G,!0),je.dirtyFields=s.dirtyFields,Ce=Ce||(d.dirtyFields||a.dirtyFields)&&Me!==!ze}if(J){const ze=Ae(s.touchedFields,G);ze||(lt(s.touchedFields,G,J),je.touchedFields=s.touchedFields,Ce=Ce||(d.touchedFields||a.touchedFields)&&ze!==J)}Ce&&Se&&l.state.next(je)}return Ce?je:{}},D=(G,re,J,xe)=>{const Se=Ae(s.errors,G),Ce=(d.isValid||a.isValid)&&vn(re)&&s.isValid!==re;if(t.delayError&&J?(r=m(()=>w(G,J)),r(t.delayError)):(clearTimeout(c),r=null,J?lt(s.errors,G,J):_t(s.errors,G)),(J?!xi(Se,J):Se)||!cn(xe)||Ce){const Me={...xe,...Ce&&vn(re)?{isValid:re}:{},errors:s.errors,name:G};s={...s,...Me},l.state.next(Me)}},P=async G=>{g(G,!0);const re=await t.resolver(x,t.context,RD(G||f.mount,h,t.criteriaMode,t.shouldUseNativeValidation));return g(G),re},F=async G=>{const{errors:re}=await P(G);if(G)for(const J of G){const xe=Ae(re,J);xe?lt(s.errors,J,xe):_t(s.errors,J)}else s.errors=re;return re},V=async(G,re,J={valid:!0})=>{for(const xe in G){const Se=G[xe];if(Se){const{_f:Ce,...Me}=Se;if(Ce){const je=f.array.has(Ce.name),ze=Se._f&&ND(Se._f);ze&&d.validatingFields&&g([xe],!0);const Ie=await nx(Se,f.disabled,x,u,t.shouldUseNativeValidation&&!re,je);if(ze&&d.validatingFields&&g([xe]),Ie[Ce.name]&&(J.valid=!1,re))break;!re&&(Ae(Ie,Ce.name)?je?VD(s.errors,Ie,Ce.name):lt(s.errors,Ce.name,Ie[Ce.name]):_t(s.errors,Ce.name))}!cn(Me)&&await V(Me,re,J)}}return J.valid},$=()=>{for(const G of f.unMount){const re=Ae(h,G);re&&(re._f.refs?re._f.refs.every(J=>!wf(J)):!wf(re._f.ref))&&Y(G)}f.unMount=new Set},te=(G,re)=>!t.disabled&&(G&&re&&lt(x,G,re),!xi(A(),y)),X=(G,re,J)=>tw(G,f,{...S.mount?x:bt(re)?y:Wn(G)?{[G]:re}:re},J,re),Q=G=>rm(Ae(S.mount?x:y,G,t.shouldUnregister?Ae(y,G,[]):[])),se=(G,re,J={})=>{const xe=Ae(h,G);let Se=re;if(xe){const Ce=xe._f;Ce&&(!Ce.disabled&&lt(x,G,aw(re,Ce)),Se=hc(Ce.ref)&&Qt(re)?"":re,nw(Ce.ref)?[...Ce.ref.options].forEach(Me=>Me.selected=Se.includes(Me.value)):Ce.refs?To(Ce.ref)?Ce.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(Se)?Me.checked=!!Se.find(je=>je===Me.value):Me.checked=Se===Me.value||!!Se)}):Ce.refs.forEach(Me=>Me.checked=Me.value===Se):lm(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Se,Ce.ref.type||l.state.next({name:G,values:Mt(x)})))}(J.shouldDirty||J.shouldTouch)&&O(G,Se,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&L(G)},K=(G,re,J)=>{for(const xe in re){if(!re.hasOwnProperty(xe))return;const Se=re[xe],Ce=G+"."+xe,Me=Ae(h,Ce);(f.array.has(G)||wt(Se)||Me&&!Me._f)&&!Or(Se)?K(Ce,Se,J):se(Ce,Se,J)}},U=(G,re,J={})=>{const xe=Ae(h,G),Se=f.array.has(G),Ce=Mt(re);lt(x,G,Ce),Se?(l.array.next({name:G,values:Mt(x)}),(d.isDirty||d.dirtyFields||a.isDirty||a.dirtyFields)&&J.shouldDirty&&l.state.next({name:G,dirtyFields:Ua(y,x),isDirty:te(G,Ce)})):xe&&!xe._f&&!Qt(Ce)?K(G,Ce,J):se(G,Ce,J),Jv(G,f)&&l.state.next({...s,name:G}),l.state.next({name:S.mount?G:void 0,values:Mt(x)})},q=async G=>{S.mount=!0;const re=G.target;let J=re.name,xe=!0;const Se=Ae(h,J),Ce=ze=>{xe=Number.isNaN(ze)||Or(ze)&&isNaN(ze.getTime())||xi(ze,Ae(x,J,ze))},Me=Zv(t.mode),je=Zv(t.reValidateMode);if(Se){let ze,Ie;const tn=re.type?Kv(Se._f):Z1(G),Ut=G.type===uc.BLUR||G.type===uc.FOCUS_OUT,nn=!PD(Se._f)&&!t.resolver&&!Ae(s.errors,J)&&!Se._f.deps||zD(Ut,Ae(s.touchedFields,J),s.isSubmitted,je,Me),Un=Jv(J,f,Ut);lt(x,J,tn),Ut?(!re||!re.readOnly)&&(Se._f.onBlur&&Se._f.onBlur(G),r&&r(0)):Se._f.onChange&&Se._f.onChange(G);const Dn=O(J,tn,Ut),Rn=!cn(Dn)||Un;if(!Ut&&l.state.next({name:J,type:G.type,values:Mt(x)}),nn)return(d.isValid||a.isValid)&&(t.mode==="onBlur"?Ut&&v():Ut||v()),Rn&&l.state.next({name:J,...Un?{}:Dn});if(!Ut&&Un&&l.state.next({...s}),t.resolver){const{errors:ti}=await P([J]);if(Ce(tn),xe){const rr=ex(s.errors,h,J),ko=ex(ti,h,rr.name||J);ze=ko.error,J=ko.name,Ie=cn(ti)}}else g([J],!0),ze=(await nx(Se,f.disabled,x,u,t.shouldUseNativeValidation))[J],g([J]),Ce(tn),xe&&(ze?Ie=!1:(d.isValid||a.isValid)&&(Ie=await V(h,!0)));xe&&(Se._f.deps&&L(Se._f.deps),D(J,Ie,ze,Dn))}},Z=(G,re)=>{if(Ae(s.errors,re)&&G.focus)return G.focus(),1},L=async(G,re={})=>{let J,xe;const Se=no(G);if(t.resolver){const Ce=await F(bt(G)?G:Se);J=cn(Ce),xe=G?!Se.some(Me=>Ae(Ce,Me)):J}else G?(xe=(await Promise.all(Se.map(async Ce=>{const Me=Ae(h,Ce);return await V(Me&&Me._f?{[Ce]:Me}:Me)}))).every(Boolean),!(!xe&&!s.isValid)&&v()):xe=J=await V(h);return l.state.next({...!Wn(G)||(d.isValid||a.isValid)&&J!==s.isValid?{}:{name:G},...t.resolver||!G?{isValid:J}:{},errors:s.errors}),re.shouldFocus&&!xe&&io(h,Z,G?Se:f.mount),xe},A=G=>{const re={...S.mount?x:y};return bt(G)?re:Wn(G)?Ae(re,G):G.map(J=>Ae(re,J))},j=(G,re)=>({invalid:!!Ae((re||s).errors,G),isDirty:!!Ae((re||s).dirtyFields,G),error:Ae((re||s).errors,G),isValidating:!!Ae(s.validatingFields,G),isTouched:!!Ae((re||s).touchedFields,G)}),R=G=>{G&&no(G).forEach(re=>_t(s.errors,re)),l.state.next({errors:G?s.errors:{}})},I=(G,re,J)=>{const xe=(Ae(h,G,{_f:{}})._f||{}).ref,Se=Ae(s.errors,G)||{},{ref:Ce,message:Me,type:je,...ze}=Se;lt(s.errors,G,{...ze,...re,ref:xe}),l.state.next({name:G,errors:s.errors,isValid:!1}),J&&J.shouldFocus&&xe&&xe.focus&&xe.focus()},B=(G,re)=>Bn(G)?l.state.subscribe({next:J=>"values"in J&&G(X(void 0,re),J)}):X(G,re,!0),z=G=>l.state.subscribe({next:re=>{FD(G.name,re.name,G.exact)&&LD(re,G.formState||d,he,G.reRenderRoot)&&G.callback({values:{...x},...s,...re,defaultValues:y})}}).unsubscribe,W=G=>(S.mount=!0,a={...a,...G.formState},z({...G,formState:a})),Y=(G,re={})=>{for(const J of G?no(G):f.mount)f.mount.delete(J),f.array.delete(J),re.keepValue||(_t(h,J),_t(x,J)),!re.keepError&&_t(s.errors,J),!re.keepDirty&&_t(s.dirtyFields,J),!re.keepTouched&&_t(s.touchedFields,J),!re.keepIsValidating&&_t(s.validatingFields,J),!t.shouldUnregister&&!re.keepDefaultValue&&_t(y,J);l.state.next({values:Mt(x)}),l.state.next({...s,...re.keepDirty?{isDirty:te()}:{}}),!re.keepIsValid&&v()},ne=({disabled:G,name:re})=>{(vn(G)&&S.mount||G||f.disabled.has(re))&&(G?f.disabled.add(re):f.disabled.delete(re))},ee=(G,re={})=>{let J=Ae(h,G);const xe=vn(re.disabled)||vn(t.disabled);return lt(h,G,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:G}},name:G,mount:!0,...re}}),f.mount.add(G),J?ne({disabled:vn(re.disabled)?re.disabled:t.disabled,name:G}):k(G,!0,re.value),{...xe?{disabled:re.disabled||t.disabled}:{},...t.progressive?{required:!!re.required,min:Ha(re.min),max:Ha(re.max),minLength:Ha(re.minLength),maxLength:Ha(re.maxLength),pattern:Ha(re.pattern)}:{},name:G,onChange:q,onBlur:q,ref:Se=>{if(Se){ee(G,re),J=Ae(h,G);const Ce=bt(Se.value)&&Se.querySelectorAll&&Se.querySelectorAll("input,select,textarea")[0]||Se,Me=jD(Ce),je=J._f.refs||[];if(Me?je.find(ze=>ze===Ce):Ce===J._f.ref)return;lt(h,G,{_f:{...J._f,...Me?{refs:[...je.filter(wf),Ce,...Array.isArray(Ae(y,G))?[{}]:[]],ref:{type:Ce.type,name:G}}:{ref:Ce}}}),k(G,!1,void 0,Ce)}else J=Ae(h,G,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(Q1(f.array,G)&&S.action)&&f.unMount.add(G)}}},de=()=>t.shouldFocusError&&io(h,Z,f.mount),le=G=>{vn(G)&&(l.state.next({disabled:G}),io(h,(re,J)=>{const xe=Ae(h,J);xe&&(re.disabled=xe._f.disabled||G,Array.isArray(xe._f.refs)&&xe._f.refs.forEach(Se=>{Se.disabled=xe._f.disabled||G}))},0,!1))},we=(G,re)=>async J=>{let xe;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let Se=Mt(x);if(l.state.next({isSubmitting:!0}),t.resolver){const{errors:Ce,values:Me}=await P();s.errors=Ce,Se=Mt(Me)}else await V(h);if(f.disabled.size)for(const Ce of f.disabled)_t(Se,Ce);if(_t(s.errors,"root"),cn(s.errors)){l.state.next({errors:{}});try{await G(Se,J)}catch(Ce){xe=Ce}}else re&&await re({...s.errors},J),de(),setTimeout(de);if(l.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cn(s.errors)&&!xe,submitCount:s.submitCount+1,errors:s.errors}),xe)throw xe},ue=(G,re={})=>{Ae(h,G)&&(bt(re.defaultValue)?U(G,Mt(Ae(y,G))):(U(G,re.defaultValue),lt(y,G,Mt(re.defaultValue))),re.keepTouched||_t(s.touchedFields,G),re.keepDirty||(_t(s.dirtyFields,G),s.isDirty=re.defaultValue?te(G,Mt(Ae(y,G))):te()),re.keepError||(_t(s.errors,G),d.isValid&&v()),l.state.next({...s}))},oe=(G,re={})=>{const J=G?Mt(G):y,xe=Mt(J),Se=cn(G),Ce=Se?y:xe;if(re.keepDefaultValues||(y=J),!re.keepValues){if(re.keepDirtyValues){const Me=new Set([...f.mount,...Object.keys(Ua(y,x))]);for(const je of Array.from(Me))Ae(s.dirtyFields,je)?lt(Ce,je,Ae(x,je)):U(je,Ae(Ce,je))}else{if(im&&bt(G))for(const Me of f.mount){const je=Ae(h,Me);if(je&&je._f){const ze=Array.isArray(je._f.refs)?je._f.refs[0]:je._f.ref;if(hc(ze)){const Ie=ze.closest("form");if(Ie){Ie.reset();break}}}}if(re.keepFieldsRef)for(const Me of f.mount)U(Me,Ae(Ce,Me));else h={}}x=t.shouldUnregister?re.keepDefaultValues?Mt(y):{}:Mt(Ce),l.array.next({values:{...Ce}}),l.state.next({values:{...Ce}})}f={mount:re.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},S.mount=!d.isValid||!!re.keepIsValid||!!re.keepDirtyValues,S.watch=!!t.shouldUnregister,l.state.next({submitCount:re.keepSubmitCount?s.submitCount:0,isDirty:Se?!1:re.keepDirty?s.isDirty:!!(re.keepDefaultValues&&!xi(G,y)),isSubmitted:re.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Se?{}:re.keepDirtyValues?re.keepDefaultValues&&x?Ua(y,x):s.dirtyFields:re.keepDefaultValues&&G?Ua(y,G):re.keepDirty?s.dirtyFields:{},touchedFields:re.keepTouched?s.touchedFields:{},errors:re.keepErrors?s.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:y})},ge=(G,re)=>oe(Bn(G)?G(x):G,re),ve=(G,re={})=>{const J=Ae(h,G),xe=J&&J._f;if(xe){const Se=xe.refs?xe.refs[0]:xe.ref;Se.focus&&(Se.focus(),re.shouldSelect&&Bn(Se.select)&&Se.select())}},he=G=>{s={...s,...G}},Ee={control:{register:ee,unregister:Y,getFieldState:j,handleSubmit:we,setError:I,_subscribe:z,_runSchema:P,_focusError:de,_getWatch:X,_getDirty:te,_setValid:v,_setFieldArray:b,_setDisabledField:ne,_setErrors:T,_getFieldArray:Q,_reset:oe,_resetDefaultValues:()=>Bn(t.defaultValues)&&t.defaultValues().then(G=>{ge(G,t.resetOptions),l.state.next({isLoading:!1})}),_removeUnmounted:$,_disableForm:le,_subjects:l,_proxyFormState:d,get _fields(){return h},get _formValues(){return x},get _state(){return S},set _state(G){S=G},get _defaultValues(){return y},get _names(){return f},set _names(G){f=G},get _formState(){return s},get _options(){return t},set _options(G){t={...t,...G}}},subscribe:W,trigger:L,register:ee,handleSubmit:we,watch:B,setValue:U,getValues:A,reset:ge,resetField:ue,clearErrors:R,unregister:Y,setError:I,setFocus:ve,getFieldState:j};return{...Ee,formControl:Ee}}function ID(e={}){const t=Le.useRef(void 0),s=Le.useRef(void 0),[h,y]=Le.useState({isDirty:!1,isValidating:!1,isLoading:Bn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bn(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:h},e.defaultValues&&!Bn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:S,...f}=HD(e);t.current={...f,formState:h}}const x=t.current.control;return x._options=e,om(()=>{const S=x._subscribe({formState:x._proxyFormState,callback:()=>y({...x._formState}),reRenderRoot:!0});return y(f=>({...f,isReady:!0})),x._formState.isReady=!0,S},[x]),Le.useEffect(()=>x._disableForm(e.disabled),[x,e.disabled]),Le.useEffect(()=>{e.mode&&(x._options.mode=e.mode),e.reValidateMode&&(x._options.reValidateMode=e.reValidateMode)},[x,e.mode,e.reValidateMode]),Le.useEffect(()=>{e.errors&&(x._setErrors(e.errors),x._focusError())},[x,e.errors]),Le.useEffect(()=>{e.shouldUnregister&&x._subjects.state.next({values:x._getWatch()})},[x,e.shouldUnregister]),Le.useEffect(()=>{if(x._proxyFormState.isDirty){const S=x._getDirty();S!==h.isDirty&&x._subjects.state.next({isDirty:S})}},[x,h.isDirty]),Le.useEffect(()=>{e.values&&!xi(e.values,s.current)?(x._reset(e.values,{keepFieldsRef:!0,...x._options.resetOptions}),s.current=e.values,y(S=>({...S}))):x._resetDefaultValues()},[x,e.values]),Le.useEffect(()=>{x._state.mount||(x._setValid(),x._state.mount=!0),x._state.watch&&(x._state.watch=!1,x._subjects.state.next({...x._formState})),x._removeUnmounted()}),t.current.formState=ew(h,x),t.current}var Sf={exports:{}},Cf,ix;function YD(){if(ix)return Cf;ix=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cf=e,Cf}var _f,rx;function XD(){if(rx)return _f;rx=1;var e=YD();function t(){}function s(){}return s.resetWarningCache=t,_f=function(){function h(S,f,r,c,d,a){if(a!==e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}h.isRequired=h;function y(){return h}var x={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:y,element:h,elementType:h,instanceOf:y,node:h,objectOf:y,oneOf:y,oneOfType:y,shape:y,exact:y,checkPropTypes:s,resetWarningCache:t};return x.PropTypes=x,x},_f}var sx;function GD(){return sx||(sx=1,Sf.exports=XD()()),Sf.exports}var $D=GD();const Zt=hd($D);Zt.elementType.isRequired,Zt.string,Zt.func,Zt.string,Zt.oneOf(["sm","md","lg"]),Zt.oneOf(["default","primary","highlight"]),Zt.string,Zt.bool,Zt.string;const lw=M.createContext(),WD=({children:e})=>{const[t,s]=M.useState({basler:{currentFrame:null,isConnected:!1,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0},monitoring:{currentFrame:null,isConnected:!1,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0}}),[h,y]=M.useState(null),[x,S]=M.useState([]),[f,r]=M.useState(!1),[c,d]=M.useState([]),[a,l]=M.useState([]),[u,m]=M.useState({brightness:100,contrast:100,saturation:100,zoom:1,grayscale:!1,crop:null,panOffset:{x:0,y:0}}),[v,g]=M.useState({x:0,y:0}),[b,w]=M.useState([]),[T,k]=M.useState("disconnected");M.useEffect(()=>{let j=null,R=0,I=null,B=!1;const z=10,W=1e3,Y=()=>{B||(k("connecting"),j=new WebSocket("ws://localhost:12345"),j.binaryType="arraybuffer",j.onopen=()=>{B||(console.log(" WebSocket connected successfully"),k("connected"),s(ne=>({...ne,basler:{...ne.basler,isConnected:!0},monitoring:{...ne.monitoring,isConnected:!0}})),R=0)},j.onmessage=ne=>{if(!B)try{const ee=ne.data;if(typeof ee=="string"&&ee.startsWith("response:")){console.log("Backend Response:",ee.slice(9));return}if(typeof ee!="string")return;const de=ee.indexOf(":");if(de===-1)return;const le=ee.substring(0,de),we=ee.substring(de+1);if(!we)return;if(!["basler","monitoring"].includes(le)){console.warn("Unknown channel:",le);return}const ue=`data:image/jpeg;base64,${we}`,oe=Date.now();s(ge=>{const ve=ge[le],he=ve.frameCount+1;let be=ve.avgFps,Ee=ve.lastFpsCalculation;if(oe-Ee>=5e3){if(Ee>0){const G=(oe-Ee)/1e3,re=he-(ve.frameCount-he+1);be=Math.round(re/G*10)/10}Ee=oe}return{...ge,[le]:{currentFrame:ue,isConnected:!0,lastUpdate:oe,frameCount:he,avgFps:be,lastFpsCalculation:Ee}}})}catch(ee){console.error(" Error processing WebSocket message:",ee)}},j.onerror=ne=>{console.error(" WebSocket error:",ne),k("error")},j.onclose=ne=>{if(!B)if(console.warn(" WebSocket disconnected:",ne.code,ne.reason),k("disconnected"),s(ee=>({...ee,basler:{...ee.basler,isConnected:!1,currentFrame:null},monitoring:{...ee.monitoring,isConnected:!1,currentFrame:null}})),ne.code!==1e3&&R<z){const ee=Math.min(1e4,W*Math.pow(2,R));console.log(` Reconnecting in ${ee/1e3}s... (attempt ${R+1}/${z})`),k("reconnecting"),I=setTimeout(()=>{B||(R++,Y())},ee)}else R>=z&&(console.error(" Max reconnection attempts reached"),k("failed"))})};return Y(),()=>{B=!0,I&&clearTimeout(I),j&&j.readyState!==WebSocket.CLOSED&&j.close(1e3,"Component unmounted")}},[]);const O=M.useCallback(j=>{y(j),console.log(`: ${j}`)},[]),D=M.useCallback(j=>{j&&(j.tool==="eraser"?P(j):(l(R=>[...R,j]),w(R=>[...R,{type:"tool-drawing",action:"add",drawing:j}])))},[]),P=M.useCallback(j=>{const R=j.eraserRadius||15,I=j.path||[];I.length!==0&&(l(B=>{const z=[];return B.forEach(W=>{if(W.tool==="eraser")return;let Y=!1;if(W.path&&W.path.length>0)for(const ne of W.path){for(const ee of I)if(Math.sqrt(Math.pow(ne.x-ee.x,2)+Math.pow(ne.y-ee.y,2))<=R){Y=!0;break}if(Y)break}Y||z.push(W)}),z}),S(B=>{const z=[];return B.forEach(W=>{let Y=!1;if(W.path&&W.path.length>0)for(const ne of W.path){for(const ee of I)if(Math.sqrt(Math.pow(ne.x-ee.x,2)+Math.pow(ne.y-ee.y,2))<=R){Y=!0;break}if(Y)break}Y||z.push(W)}),z}),w(B=>[...B,{type:"eraser",action:"erase",eraserDrawing:j,eraserRadius:R}]))},[]),F=M.useCallback((j,R)=>{if(!(!h||h==="pan")){if(h==="crop"&&u.crop){m(I=>({...I,crop:null})),y(null),w(I=>[...I,{type:"crop",action:"remove"}]);return}r(!0),d([{x:j,y:R}])}},[h,u.crop]),V=M.useCallback((j,R)=>{g({x:j,y:R}),!(!f||!h)&&d(I=>[...I,{x:j,y:R}])},[f,h]),$=M.useCallback(()=>{if(!f||c.length<2){r(!1),d([]);return}if(h==="crop"){const j=c[0],R=c[c.length-1],I={x:Math.min(j.x,R.x),y:Math.min(j.y,R.y),width:Math.abs(R.x-j.x),height:Math.abs(R.y-j.y)};m(B=>({...B,crop:I})),w(B=>[...B,{type:"crop",action:"apply",settings:I}])}else{const j={id:Date.now(),tool:h,path:c};S(R=>[...R,j]),w(R=>[...R,{type:"drawing",action:"add",drawing:j}])}r(!1),d([])},[f,c,h]),te=M.useCallback(()=>{S([]),l([]),d([]),r(!1),m(j=>({...j,crop:null})),w(j=>[...j,{type:"clear",action:"all"}]),window.clearFabricCanvas&&window.clearFabricCanvas()},[]),X=M.useCallback(j=>{m(R=>({...R,...j})),w(R=>[...R,{type:"settings",action:"update",settings:j}])},[]),Q=M.useCallback(()=>{m(j=>{const R=!j.grayscale;return w(I=>[...I,{type:"grayscale",action:"toggle",value:R}]),{...j,grayscale:R}})},[]),se=M.useCallback(j=>{m(R=>{const I=j==="in"?R.zoom*1.2:R.zoom/1.2,B=Math.max(.2,Math.min(5,I));return w(z=>[...z,{type:"zoom",action:"change",value:B,prevValue:R.zoom}]),{...R,zoom:B}})},[]),K=M.useCallback(()=>{m(j=>{const R=j.zoom*1.2,I=Math.max(.2,Math.min(5,R));if(w(B=>[...B,{type:"zoom",action:"in",value:I,prevValue:j.zoom}]),window.fabricCanvas){const B=window.fabricCanvas,z=B.getCenter();B.zoomToPoint({x:z.left,y:z.top},I),B.requestRenderAll()}return{...j,zoom:I}})},[]),U=M.useCallback(()=>{m(j=>{const R=j.zoom/1.2,I=Math.max(.2,Math.min(5,R));if(w(B=>[...B,{type:"zoom",action:"out",value:I,prevValue:j.zoom}]),window.fabricCanvas){const B=window.fabricCanvas,z=B.getCenter();B.zoomToPoint({x:z.left,y:z.top},I),B.requestRenderAll()}return{...j,zoom:I}})},[]),q=M.useCallback(()=>{m(j=>{if(w(R=>[...R,{type:"zoom",action:"reset",value:1,prevValue:j.zoom}]),window.fabricCanvas){const R=window.fabricCanvas;R.setViewportTransform([1,0,0,1,0,0]),R.requestRenderAll()}return{...j,zoom:1}})},[]),Z=M.useCallback((j,R)=>{m(I=>{const B={x:I.panOffset.x+j,y:I.panOffset.y+R};return w(z=>[...z,{type:"pan",action:"move",offset:B,prevOffset:I.panOffset}]),{...I,panOffset:B}})},[]),L=M.useCallback(()=>{if(window.undoLastFabricAction){window.undoLastFabricAction();return}w(j=>{if(j.length===0)return j;const R=j[j.length-1],I=j.slice(0,-1);switch(R.type){case"drawing":R.action==="add"&&S(B=>B.slice(0,-1));break;case"tool-drawing":R.action==="add"&&l(B=>B.slice(0,-1));break;case"eraser":R.action==="erase"&&console.log("Undo eraser operation - complex operation");break;case"crop":R.action==="apply"?m(B=>({...B,crop:null})):R.action==="remove"&&m(B=>({...B,crop:R.settings}));break;case"grayscale":m(B=>({...B,grayscale:!R.value}));break;case"zoom":m(B=>({...B,zoom:R.prevValue}));break;case"settings":m(B=>({...B,...R.prevSettings}));break;case"pan":m(B=>({...B,panOffset:R.prevOffset}));break}return I})},[]),A={cameras:t,activeTool:h,drawings:x,toolDrawings:a,isDrawing:f,currentPath:c,imageSettings:u,cursorPosition:v,wsStatus:T,applyTool:O,startDrawing:F,continueDrawing:V,finishDrawing:$,clearDrawings:te,addToolDrawing:D,updateImageSettings:X,toggleGrayscale:Q,zoomImage:se,zoomIn:K,zoomOut:U,resetZoom:q,panImage:Z,undoLastChange:L};return _.jsx(lw.Provider,{value:A,children:e})},Dc=()=>{const e=M.useContext(lw);if(!e)throw new Error("useCamera must be used within CameraProvider");return e};var Tf={};const qD={},KD=Object.freeze(Object.defineProperty({__proto__:null,default:qD},Symbol.toStringTag,{value:"Module"})),kf=RC(KD);var ax;function ZD(){return ax||(ax=1,function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var s=kf,h=new s.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=h.document,t.jsdomImplForWrapper=kf.implForWrapper,t.nodeCanvas=kf.Canvas,t.window=h,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function f(u,m){if(this.__eventListeners[u]){var v=this.__eventListeners[u];m?v[v.indexOf(m)]=!1:t.util.array.fill(v,!1)}}function r(u,m){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var v in u)this.on(v,u[v]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(m);return this}function c(u,m){var v=(function(){m.apply(this,arguments),this.off(u,v)}).bind(this);this.on(u,v)}function d(u,m){if(arguments.length===1)for(var v in u)c.call(this,v,u[v]);else c.call(this,u,m);return this}function a(u,m){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)f.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var v in u)f.call(this,v,u[v]);else f.call(this,u,m);return this}function l(u,m){if(!this.__eventListeners)return this;var v=this.__eventListeners[u];if(!v)return this;for(var g=0,b=v.length;g<b;g++)v[g]&&v[g].call(this,m||{});return this.__eventListeners[u]=v.filter(function(w){return w!==!1}),this}t.Observable={fire:l,on:r,once:d,off:a}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,r=arguments.length;f<r;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,r,c){var d=this._objects;return c?d[r]=f:d.splice(r,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,r,c=!1,d=0,a=arguments.length;d<a;d++)r=f.indexOf(arguments[d]),r!==-1&&(c=!0,f.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(f,r){for(var c=this.getObjects(),d=0,a=c.length;d<a;d++)f.call(r,c[d],d,c);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,r){return this._objects.indexOf(f)>-1?!0:r?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,r){return f+=r.complexity?r.complexity():0,f},0)}},t.CommonMethods={_setOptions:function(f){for(var r in f)this.set(r,f[r])},_initGradient:function(f,r){f&&f.colorStops&&!(f instanceof t.Gradient)&&this.set(r,new t.Gradient(f))},_initPattern:function(f,r,c){f&&f.source&&!(f instanceof t.Pattern)?this.set(r,new t.Pattern(f,c)):c&&c()},_setObject:function(f){for(var r in f)this._set(r,f[r])},set:function(f,r){return typeof f=="object"?this._setObject(f):this._set(f,r),this},_set:function(f,r){this[f]=r},toggle:function(f){var r=this.get(f);return typeof r=="boolean"&&this.set(f,!r),this},get:function(f){return this[f]}},function(f){var r=Math.sqrt,c=Math.atan2,d=Math.pow,a=Math.PI/180,l=Math.PI/2;t.util={cos:function(u){if(u===0)return 1;u<0&&(u=-u);var m=u/l;switch(m){case 1:case 3:return 0;case 2:return-1}return Math.cos(u)},sin:function(u){if(u===0)return 0;var m=u/l,v=1;switch(u<0&&(v=-1),m){case 1:return v;case 2:return 0;case 3:return-v}return Math.sin(u)},removeFromArray:function(u,m){var v=u.indexOf(m);return v!==-1&&u.splice(v,1),u},getRandomInt:function(u,m){return Math.floor(Math.random()*(m-u+1))+u},degreesToRadians:function(u){return u*a},radiansToDegrees:function(u){return u/a},rotatePoint:function(u,m,v){var g=new t.Point(u.x-m.x,u.y-m.y),b=t.util.rotateVector(g,v);return new t.Point(b.x,b.y).addEquals(m)},rotateVector:function(u,m){var v=t.util.sin(m),g=t.util.cos(m),b=u.x*g-u.y*v,w=u.x*v+u.y*g;return{x:b,y:w}},createVector:function(u,m){return new t.Point(m.x-u.x,m.y-u.y)},calcAngleBetweenVectors:function(u,m){return Math.acos((u.x*m.x+u.y*m.y)/(Math.hypot(u.x,u.y)*Math.hypot(m.x,m.y)))},getHatVector:function(u){return new t.Point(u.x,u.y).multiply(1/Math.hypot(u.x,u.y))},getBisector:function(u,m,v){var g=t.util.createVector(u,m),b=t.util.createVector(u,v),w=t.util.calcAngleBetweenVectors(g,b),T=t.util.calcAngleBetweenVectors(t.util.rotateVector(g,w),b),k=w*(T===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(g,k)),angle:w}},projectStrokeOnPoints:function(u,m,v){var g=[],b=m.strokeWidth/2,w=m.strokeUniform?new t.Point(1/m.scaleX,1/m.scaleY):new t.Point(1,1),T=function(k){var O=b/Math.hypot(k.x,k.y);return new t.Point(k.x*O*w.x,k.y*O*w.y)};return u.length<=1||u.forEach(function(k,O){var D=new t.Point(k.x,k.y),P,F;O===0?(F=u[O+1],P=v?T(t.util.createVector(F,D)).addEquals(D):u[u.length-1]):O===u.length-1?(P=u[O-1],F=v?T(t.util.createVector(P,D)).addEquals(D):u[0]):(P=u[O-1],F=u[O+1]);var V=t.util.getBisector(D,P,F),$=V.vector,te=V.angle,X,Q;if(m.strokeLineJoin==="miter"&&(X=-b/Math.sin(te/2),Q=new t.Point($.x*X*w.x,$.y*X*w.y),Math.hypot(Q.x,Q.y)/b<=m.strokeMiterLimit)){g.push(D.add(Q)),g.push(D.subtract(Q));return}X=-b*Math.SQRT2,Q=new t.Point($.x*X*w.x,$.y*X*w.y),g.push(D.add(Q)),g.push(D.subtract(Q))}),g},transformPoint:function(u,m,v){return v?new t.Point(m[0]*u.x+m[2]*u.y,m[1]*u.x+m[3]*u.y):new t.Point(m[0]*u.x+m[2]*u.y+m[4],m[1]*u.x+m[3]*u.y+m[5])},makeBoundingBoxFromPoints:function(u,m){if(m)for(var v=0;v<u.length;v++)u[v]=t.util.transformPoint(u[v],m);var g=[u[0].x,u[1].x,u[2].x,u[3].x],b=t.util.array.min(g),w=t.util.array.max(g),T=w-b,k=[u[0].y,u[1].y,u[2].y,u[3].y],O=t.util.array.min(k),D=t.util.array.max(k),P=D-O;return{left:b,top:O,width:T,height:P}},invertTransform:function(u){var m=1/(u[0]*u[3]-u[1]*u[2]),v=[m*u[3],-m*u[1],-m*u[2],m*u[0]],g=t.util.transformPoint({x:u[4],y:u[5]},v,!0);return v[4]=-g.x,v[5]=-g.y,v},toFixed:function(u,m){return parseFloat(Number(u).toFixed(m))},parseUnit:function(u,m){var v=/\D{0,2}$/.exec(u),g=parseFloat(u);switch(m||(m=t.Text.DEFAULT_SVG_FONT_SIZE),v[0]){case"mm":return g*t.DPI/25.4;case"cm":return g*t.DPI/2.54;case"in":return g*t.DPI;case"pt":return g*t.DPI/72;case"pc":return g*t.DPI/72*12;case"em":return g*m;default:return g}},falseFunction:function(){return!1},getKlass:function(u,m){return u=t.util.string.camelize(u.charAt(0).toUpperCase()+u.slice(1)),t.util.resolveNamespace(m)[u]},getSvgAttributes:function(u){var m=["instantiated_by_use","style","id","class"];switch(u){case"linearGradient":m=m.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":m=m.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":m=m.concat(["offset","stop-color","stop-opacity"]);break}return m},resolveNamespace:function(u){if(!u)return t;var m=u.split("."),v=m.length,g,b=f||t.window;for(g=0;g<v;++g)b=b[m[g]];return b},loadImage:function(u,m,v,g){if(!u){m&&m.call(v,u);return}var b=t.util.createImage(),w=function(){m&&m.call(v,b,!1),b=b.onload=b.onerror=null};b.onload=w,b.onerror=function(){t.log("Error loading "+b.src),m&&m.call(v,null,!0),b=b.onload=b.onerror=null},u.indexOf("data")!==0&&g!==void 0&&g!==null&&(b.crossOrigin=g),u.substring(0,14)==="data:image/svg"&&(b.onload=null,t.util.loadImageInDom(b,w)),b.src=u},loadImageInDom:function(u,m){var v=t.document.createElement("div");v.style.width=v.style.height="1px",v.style.left=v.style.top="-100%",v.style.position="absolute",v.appendChild(u),t.document.querySelector("body").appendChild(v),u.onload=function(){m(),v.parentNode.removeChild(v),v=null}},enlivenObjects:function(u,m,v,g){u=u||[];var b=[],w=0,T=u.length;function k(){++w===T&&m&&m(b.filter(function(O){return O}))}if(!T){m&&m(b);return}u.forEach(function(O,D){if(!O||!O.type){k();return}var P=t.util.getKlass(O.type,v);P.fromObject(O,function(F,V){V||(b[D]=F),g&&g(O,F,V),k()})})},enlivenObjectEnlivables:function(u,m,v){var g=t.Object.ENLIVEN_PROPS.filter(function(b){return!!u[b]});t.util.enlivenObjects(g.map(function(b){return u[b]}),function(b){var w={};g.forEach(function(T,k){w[T]=b[k],m&&(m[T]=b[k])}),v&&v(w)})},enlivenPatterns:function(u,m){u=u||[];function v(){++b===w&&m&&m(g)}var g=[],b=0,w=u.length;if(!w){m&&m(g);return}u.forEach(function(T,k){T&&T.source?new t.Pattern(T,function(O){g[k]=O,v()}):(g[k]=T,v())})},groupSVGElements:function(u,m,v){var g;return u&&u.length===1?(typeof v<"u"&&(u[0].sourcePath=v),u[0]):(m&&(m.width&&m.height?m.centerPoint={x:m.width/2,y:m.height/2}:(delete m.width,delete m.height)),g=new t.Group(u,m),typeof v<"u"&&(g.sourcePath=v),g)},populateWithProperties:function(u,m,v){if(v&&Array.isArray(v))for(var g=0,b=v.length;g<b;g++)v[g]in u&&(m[v[g]]=u[v[g]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(u){var m=t.util.createCanvasElement();return m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0),m},toDataURL:function(u,m,v){return u.toDataURL("image/"+m,v)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(u,m,v){return[u[0]*m[0]+u[2]*m[1],u[1]*m[0]+u[3]*m[1],u[0]*m[2]+u[2]*m[3],u[1]*m[2]+u[3]*m[3],v?0:u[0]*m[4]+u[2]*m[5]+u[4],v?0:u[1]*m[4]+u[3]*m[5]+u[5]]},qrDecompose:function(u){var m=c(u[1],u[0]),v=d(u[0],2)+d(u[1],2),g=r(v),b=(u[0]*u[3]-u[2]*u[1])/g,w=c(u[0]*u[2]+u[1]*u[3],v);return{angle:m/a,scaleX:g,scaleY:b,skewX:w/a,skewY:0,translateX:u[4],translateY:u[5]}},calcRotateMatrix:function(u){if(!u.angle)return t.iMatrix.concat();var m=t.util.degreesToRadians(u.angle),v=t.util.cos(m),g=t.util.sin(m);return[v,g,-g,v,0,0]},calcDimensionsMatrix:function(u){var m=typeof u.scaleX>"u"?1:u.scaleX,v=typeof u.scaleY>"u"?1:u.scaleY,g=[u.flipX?-m:m,0,0,u.flipY?-v:v,0,0],b=t.util.multiplyTransformMatrices,w=t.util.degreesToRadians;return u.skewX&&(g=b(g,[1,0,Math.tan(w(u.skewX)),1],!0)),u.skewY&&(g=b(g,[1,Math.tan(w(u.skewY)),0,1],!0)),g},composeMatrix:function(u){var m=[1,0,0,1,u.translateX||0,u.translateY||0],v=t.util.multiplyTransformMatrices;return u.angle&&(m=v(m,t.util.calcRotateMatrix(u))),(u.scaleX!==1||u.scaleY!==1||u.skewX||u.skewY||u.flipX||u.flipY)&&(m=v(m,t.util.calcDimensionsMatrix(u))),m},resetObjectTransform:function(u){u.scaleX=1,u.scaleY=1,u.skewX=0,u.skewY=0,u.flipX=!1,u.flipY=!1,u.rotate(0)},saveObjectTransform:function(u){return{scaleX:u.scaleX,scaleY:u.scaleY,skewX:u.skewX,skewY:u.skewY,angle:u.angle,left:u.left,flipX:u.flipX,flipY:u.flipY,top:u.top}},isTransparent:function(u,m,v,g){g>0&&(m>g?m-=g:m=0,v>g?v-=g:v=0);var b=!0,w,T,k=u.getImageData(m,v,g*2||1,g*2||1),O=k.data.length;for(w=3;w<O&&(T=k.data[w],b=T<=0,b!==!1);w+=4);return k=null,b},parsePreserveAspectRatioAttribute:function(u){var m="meet",v="Mid",g="Mid",b=u.split(" "),w;return b&&b.length&&(m=b.pop(),m!=="meet"&&m!=="slice"?(w=m,m="meet"):b.length&&(w=b.pop())),v=w!=="none"?w.slice(1,4):"none",g=w!=="none"?w.slice(5,8):"none",{meetOrSlice:m,alignX:v,alignY:g}},clearFabricFontCache:function(u){u=(u||"").toLowerCase(),u?t.charWidthsCache[u]&&delete t.charWidthsCache[u]:t.charWidthsCache={}},limitDimsByArea:function(u,m){var v=Math.sqrt(m*u),g=Math.floor(m/v);return{x:Math.floor(v),y:g}},capValue:function(u,m,v){return Math.max(u,Math.min(m,v))},findScaleToFit:function(u,m){return Math.min(m.width/u.width,m.height/u.height)},findScaleToCover:function(u,m){return Math.max(m.width/u.width,m.height/u.height)},matrixToSVG:function(u){return"matrix("+u.map(function(m){return t.util.toFixed(m,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(u,m){var v=t.util.invertTransform(m),g=t.util.multiplyTransformMatrices(v,u.calcOwnMatrix());t.util.applyTransformToObject(u,g)},addTransformToObject:function(u,m){t.util.applyTransformToObject(u,t.util.multiplyTransformMatrices(m,u.calcOwnMatrix()))},applyTransformToObject:function(u,m){var v=t.util.qrDecompose(m),g=new t.Point(v.translateX,v.translateY);u.flipX=!1,u.flipY=!1,u.set("scaleX",v.scaleX),u.set("scaleY",v.scaleY),u.skewX=v.skewX,u.skewY=v.skewY,u.angle=v.angle,u.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(u,m,v){var g=u/2,b=m/2,w=[{x:-g,y:-b},{x:g,y:-b},{x:-g,y:b},{x:g,y:b}],T=t.util.calcDimensionsMatrix(v),k=t.util.makeBoundingBoxFromPoints(w,T);return{x:k.width,y:k.height}},mergeClipPaths:function(u,m){var v=u,g=m;v.inverted&&!g.inverted&&(v=m,g=u),t.util.applyTransformToObject(g,t.util.multiplyTransformMatrices(t.util.invertTransform(v.calcTransformMatrix()),g.calcTransformMatrix()));var b=v.inverted&&g.inverted;return b&&(v.inverted=g.inverted=!1),new t.Group([v],{clipPath:g,inverted:b})},hasStyleChanged:function(u,m,v){return v=v||!1,u.fill!==m.fill||u.stroke!==m.stroke||u.strokeWidth!==m.strokeWidth||u.fontSize!==m.fontSize||u.fontFamily!==m.fontFamily||u.fontWeight!==m.fontWeight||u.fontStyle!==m.fontStyle||u.textBackgroundColor!==m.textBackgroundColor||u.deltaY!==m.deltaY||v&&(u.overline!==m.overline||u.underline!==m.underline||u.linethrough!==m.linethrough)},stylesToArray:function(v,m){for(var v=t.util.object.clone(v,!0),g=m.split(`
`),b=-1,w={},T=[],k=0;k<g.length;k++){if(!v[k]){b+=g[k].length;continue}for(var O=0;O<g[k].length;O++){b++;var D=v[k][O];if(D&&Object.keys(D).length>0){var P=t.util.hasStyleChanged(w,D,!0);P?T.push({start:b,end:b+1,style:D}):T[T.length-1].end++}w=D||{}}}return T},stylesFromArray:function(u,m){if(!Array.isArray(u))return u;for(var v=m.split(`
`),g=-1,b=0,w={},T=0;T<v.length;T++)for(var k=0;k<v[T].length;k++)g++,u[b]&&u[b].start<=g&&g<u[b].end&&(w[T]=w[T]||{},w[T][k]=Object.assign({},u[b].style),g===u[b].end-1&&b++);return w}}}(e),function(){var f=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function d(L,A,j,R,I,B,z,W,Y,ne,ee){var de=t.util.cos(L),le=t.util.sin(L),we=t.util.cos(A),ue=t.util.sin(A),oe=j*I*we-R*B*ue+z,ge=R*I*we+j*B*ue+W,ve=ne+Y*(-j*I*le-R*B*de),he=ee+Y*(-R*I*le+j*B*de),be=oe+Y*(j*I*ue+R*B*we),Ee=ge+Y*(R*I*ue-j*B*we);return["C",ve,he,be,Ee,oe,ge]}function a(L,A,j,R,I,B,z){var W=Math.PI,Y=z*W/180,ne=t.util.sin(Y),ee=t.util.cos(Y),de=0,le=0;j=Math.abs(j),R=Math.abs(R);var we=-ee*L*.5-ne*A*.5,ue=-ee*A*.5+ne*L*.5,oe=j*j,ge=R*R,ve=ue*ue,he=we*we,be=oe*ge-oe*ve-ge*he,Ee=0;if(be<0){var G=Math.sqrt(1-be/(oe*ge));j*=G,R*=G}else Ee=(I===B?-1:1)*Math.sqrt(be/(oe*ve+ge*he));var re=Ee*j*ue/R,J=-Ee*R*we/j,xe=ee*re-ne*J+L*.5,Se=ne*re+ee*J+A*.5,Ce=l(1,0,(we-re)/j,(ue-J)/R),Me=l((we-re)/j,(ue-J)/R,(-we-re)/j,(-ue-J)/R);B===0&&Me>0?Me-=2*W:B===1&&Me<0&&(Me+=2*W);for(var je=Math.ceil(Math.abs(Me/W*2)),ze=[],Ie=Me/je,tn=8/3*Math.sin(Ie/4)*Math.sin(Ie/4)/Math.sin(Ie/2),Ut=Ce+Ie,nn=0;nn<je;nn++)ze[nn]=d(Ce,Ut,ee,ne,j,R,xe,Se,tn,de,le),de=ze[nn][5],le=ze[nn][6],Ce=Ut,Ut+=Ie;return ze}function l(L,A,j,R){var I=Math.atan2(A,L),B=Math.atan2(R,j);return B>=I?B-I:2*Math.PI-(I-B)}function u(L,A,j,R,I,B,z,W){var Y;if(t.cachesBoundsOfCurve&&(Y=f.call(arguments),t.boundsOfCurveCache[Y]))return t.boundsOfCurveCache[Y];var ne=Math.sqrt,ee=Math.min,de=Math.max,le=Math.abs,we=[],ue=[[],[]],oe,ge,ve,he,be,Ee,G,re;ge=6*L-12*j+6*I,oe=-3*L+9*j-9*I+3*z,ve=3*j-3*L;for(var J=0;J<2;++J){if(J>0&&(ge=6*A-12*R+6*B,oe=-3*A+9*R-9*B+3*W,ve=3*R-3*A),le(oe)<1e-12){if(le(ge)<1e-12)continue;he=-ve/ge,0<he&&he<1&&we.push(he);continue}G=ge*ge-4*ve*oe,!(G<0)&&(re=ne(G),be=(-ge+re)/(2*oe),0<be&&be<1&&we.push(be),Ee=(-ge-re)/(2*oe),0<Ee&&Ee<1&&we.push(Ee))}for(var xe,Se,Ce=we.length,Me=Ce,je;Ce--;)he=we[Ce],je=1-he,xe=je*je*je*L+3*je*je*he*j+3*je*he*he*I+he*he*he*z,ue[0][Ce]=xe,Se=je*je*je*A+3*je*je*he*R+3*je*he*he*B+he*he*he*W,ue[1][Ce]=Se;ue[0][Me]=L,ue[1][Me]=A,ue[0][Me+1]=z,ue[1][Me+1]=W;var ze=[{x:ee.apply(null,ue[0]),y:ee.apply(null,ue[1])},{x:de.apply(null,ue[0]),y:de.apply(null,ue[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[Y]=ze),ze}function m(L,A,j){for(var R=j[1],I=j[2],B=j[3],z=j[4],W=j[5],Y=j[6],ne=j[7],ee=a(Y-L,ne-A,R,I,z,W,B),de=0,le=ee.length;de<le;de++)ee[de][1]+=L,ee[de][2]+=A,ee[de][3]+=L,ee[de][4]+=A,ee[de][5]+=L,ee[de][6]+=A;return ee}function v(L){var A=0,j=0,R=L.length,I=0,B=0,z,W,Y,ne=[],ee,de,le;for(W=0;W<R;++W){switch(Y=!1,z=L[W].slice(0),z[0]){case"l":z[0]="L",z[1]+=A,z[2]+=j;case"L":A=z[1],j=z[2];break;case"h":z[1]+=A;case"H":z[0]="L",z[2]=j,A=z[1];break;case"v":z[1]+=j;case"V":z[0]="L",j=z[1],z[1]=A,z[2]=j;break;case"m":z[0]="M",z[1]+=A,z[2]+=j;case"M":A=z[1],j=z[2],I=z[1],B=z[2];break;case"c":z[0]="C",z[1]+=A,z[2]+=j,z[3]+=A,z[4]+=j,z[5]+=A,z[6]+=j;case"C":de=z[3],le=z[4],A=z[5],j=z[6];break;case"s":z[0]="S",z[1]+=A,z[2]+=j,z[3]+=A,z[4]+=j;case"S":ee==="C"?(de=2*A-de,le=2*j-le):(de=A,le=j),A=z[3],j=z[4],z[0]="C",z[5]=z[3],z[6]=z[4],z[3]=z[1],z[4]=z[2],z[1]=de,z[2]=le,de=z[3],le=z[4];break;case"q":z[0]="Q",z[1]+=A,z[2]+=j,z[3]+=A,z[4]+=j;case"Q":de=z[1],le=z[2],A=z[3],j=z[4];break;case"t":z[0]="T",z[1]+=A,z[2]+=j;case"T":ee==="Q"?(de=2*A-de,le=2*j-le):(de=A,le=j),z[0]="Q",A=z[1],j=z[2],z[1]=de,z[2]=le,z[3]=A,z[4]=j;break;case"a":z[0]="A",z[6]+=A,z[7]+=j;case"A":Y=!0,ne=ne.concat(m(A,j,z)),A=z[6],j=z[7];break;case"z":case"Z":A=I,j=B;break}Y||ne.push(z),ee=z[0]}return ne}function g(L,A,j,R){return Math.sqrt((j-L)*(j-L)+(R-A)*(R-A))}function b(L){return L*L*L}function w(L){return 3*L*L*(1-L)}function T(L){return 3*L*(1-L)*(1-L)}function k(L){return(1-L)*(1-L)*(1-L)}function O(L,A,j,R,I,B,z,W){return function(Y){var ne=b(Y),ee=w(Y),de=T(Y),le=k(Y);return{x:z*ne+I*ee+j*de+L*le,y:W*ne+B*ee+R*de+A*le}}}function D(L,A,j,R,I,B,z,W){return function(Y){var ne=1-Y,ee=3*ne*ne*(j-L)+6*ne*Y*(I-j)+3*Y*Y*(z-I),de=3*ne*ne*(R-A)+6*ne*Y*(B-R)+3*Y*Y*(W-B);return Math.atan2(de,ee)}}function P(L){return L*L}function F(L){return 2*L*(1-L)}function V(L){return(1-L)*(1-L)}function $(L,A,j,R,I,B){return function(z){var W=P(z),Y=F(z),ne=V(z);return{x:I*W+j*Y+L*ne,y:B*W+R*Y+A*ne}}}function te(L,A,j,R,I,B){return function(z){var W=1-z,Y=2*W*(j-L)+2*z*(I-j),ne=2*W*(R-A)+2*z*(B-R);return Math.atan2(ne,Y)}}function X(L,A,j){var R={x:A,y:j},I,B=0,z;for(z=1;z<=100;z+=1)I=L(z/100),B+=g(R.x,R.y,I.x,I.y),R=I;return B}function Q(L,A){for(var j=0,R=0,I=L.iterator,B={x:L.x,y:L.y},z,W,Y=.01,ne=L.angleFinder,ee;R<A&&Y>1e-4;)z=I(j),ee=j,W=g(B.x,B.y,z.x,z.y),W+R>A?(j-=Y,Y/=2):(B=z,j+=Y,R+=W);return z.angle=ne(ee),z}function se(L){for(var A=0,j=L.length,R,I=0,B=0,z=0,W=0,Y=[],ne,ee,de,le=0;le<j;le++){switch(R=L[le],ee={x:I,y:B,command:R[0]},R[0]){case"M":ee.length=0,z=I=R[1],W=B=R[2];break;case"L":ee.length=g(I,B,R[1],R[2]),I=R[1],B=R[2];break;case"C":ne=O(I,B,R[1],R[2],R[3],R[4],R[5],R[6]),de=D(I,B,R[1],R[2],R[3],R[4],R[5],R[6]),ee.iterator=ne,ee.angleFinder=de,ee.length=X(ne,I,B),I=R[5],B=R[6];break;case"Q":ne=$(I,B,R[1],R[2],R[3],R[4]),de=te(I,B,R[1],R[2],R[3],R[4]),ee.iterator=ne,ee.angleFinder=de,ee.length=X(ne,I,B),I=R[3],B=R[4];break;case"Z":case"z":ee.destX=z,ee.destY=W,ee.length=g(I,B,z,W),I=z,B=W;break}A+=ee.length,Y.push(ee)}return Y.push({length:A,x:I,y:B}),Y}function K(L,A,j){j||(j=se(L));for(var R=0;A-j[R].length>0&&R<j.length-2;)A-=j[R].length,R++;var I=j[R],B=A/I.length,z=I.command,W=L[R],Y;switch(z){case"M":return{x:I.x,y:I.y,angle:0};case"Z":case"z":return Y=new t.Point(I.x,I.y).lerp(new t.Point(I.destX,I.destY),B),Y.angle=Math.atan2(I.destY-I.y,I.destX-I.x),Y;case"L":return Y=new t.Point(I.x,I.y).lerp(new t.Point(W[1],W[2]),B),Y.angle=Math.atan2(W[2]-I.y,W[1]-I.x),Y;case"C":return Q(I,A);case"Q":return Q(I,A)}}function U(L){var A=[],j=[],R,I,B=t.rePathCommand,z="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",W="("+z+")"+t.commaWsp,Y="([01])"+t.commaWsp+"?",ne=W+"?"+W+"?"+W+Y+Y+W+"?("+z+")",ee=new RegExp(ne,"g"),de,le,we;if(!L||!L.match)return A;we=L.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var ue=0,oe,ge=we.length;ue<ge;ue++){R=we[ue],le=R.slice(1).trim(),j.length=0;var ve=R.charAt(0);if(oe=[ve],ve.toLowerCase()==="a")for(var he;he=ee.exec(le);)for(var be=1;be<he.length;be++)j.push(he[be]);else for(;de=B.exec(le);)j.push(de[0]);for(var be=0,Ee=j.length;be<Ee;be++)I=parseFloat(j[be]),isNaN(I)||oe.push(I);var G=r[ve.toLowerCase()],re=c[ve]||ve;if(oe.length-1>G)for(var J=1,xe=oe.length;J<xe;J+=G)A.push([ve].concat(oe.slice(J,J+G))),ve=re;else A.push(oe)}return A}function q(L,A){var j=[],R,I=new t.Point(L[0].x,L[0].y),B=new t.Point(L[1].x,L[1].y),z=L.length,W=1,Y=0,ne=z>2;for(A=A||0,ne&&(W=L[2].x<B.x?-1:L[2].x===B.x?0:1,Y=L[2].y<B.y?-1:L[2].y===B.y?0:1),j.push(["M",I.x-W*A,I.y-Y*A]),R=1;R<z;R++){if(!I.eq(B)){var ee=I.midPointFrom(B);j.push(["Q",I.x,I.y,ee.x,ee.y])}I=L[R],R+1<L.length&&(B=L[R+1])}return ne&&(W=I.x>L[R-2].x?1:I.x===L[R-2].x?0:-1,Y=I.y>L[R-2].y?1:I.y===L[R-2].y?0:-1),j.push(["L",I.x+W*A,I.y+Y*A]),j}function Z(L,A,j){return j&&(A=t.util.multiplyTransformMatrices(A,[1,0,0,1,-j.x,-j.y])),L.map(function(R){for(var I=R.slice(0),B={},z=1;z<R.length-1;z+=2)B.x=R[z],B.y=R[z+1],B=t.util.transformPoint(B,A),I[z]=B.x,I[z+1]=B.y;return I})}t.util.joinPath=function(L){return L.map(function(A){return A.join(" ")}).join(" ")},t.util.parsePath=U,t.util.makePathSimpler=v,t.util.getSmoothPathFromPoints=q,t.util.getPathSegmentsInfo=se,t.util.getBoundsOfCurve=u,t.util.getPointOnPath=K,t.util.transformPath=Z}(),function(){var f=Array.prototype.slice;function r(u,m){for(var v=f.call(arguments,2),g=[],b=0,w=u.length;b<w;b++)g[b]=v.length?u[b][m].apply(u[b],v):u[b][m].call(u[b]);return g}function c(u,m){return l(u,m,function(v,g){return v>=g})}function d(u,m){return l(u,m,function(v,g){return v<g})}function a(u,m){for(var v=u.length;v--;)u[v]=m;return u}function l(u,m,v){if(!(!u||u.length===0)){var g=u.length-1,b=m?u[g][m]:u[g];if(m)for(;g--;)v(u[g][m],b)&&(b=u[g][m]);else for(;g--;)v(u[g],b)&&(b=u[g]);return b}}t.util.array={fill:a,invoke:r,min:d,max:c}}(),function(){function f(c,d,a){if(a)if(!t.isLikelyNode&&d instanceof Element)c=d;else if(d instanceof Array){c=[];for(var l=0,u=d.length;l<u;l++)c[l]=f({},d[l],a)}else if(d&&typeof d=="object")for(var m in d)m==="canvas"||m==="group"?c[m]=null:d.hasOwnProperty(m)&&(c[m]=f({},d[m],a));else c=d;else for(var m in d)c[m]=d[m];return c}function r(c,d){return f({},c,d)}t.util.object={extend:f,clone:r},t.util.object.extend(t.util,t.Observable)}(),function(){function f(l){return l.replace(/-+(.)?/g,function(u,m){return m?m.toUpperCase():""})}function r(l,u){return l.charAt(0).toUpperCase()+(u?l.slice(1):l.slice(1).toLowerCase())}function c(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(l){var u=0,m,v=[];for(u=0,m;u<l.length;u++)(m=a(l,u))!==!1&&v.push(m);return v}function a(l,u){var m=l.charCodeAt(u);if(isNaN(m))return"";if(m<55296||m>57343)return l.charAt(u);if(55296<=m&&m<=56319){if(l.length<=u+1)throw"High surrogate without following low surrogate";var v=l.charCodeAt(u+1);if(56320>v||v>57343)throw"High surrogate without following low surrogate";return l.charAt(u)+l.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var g=l.charCodeAt(u-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:f,capitalize:r,escapeXml:c,graphemeSplit:d}}(),function(){var f=Array.prototype.slice,r=function(){},c=function(){for(var m in{toString:1})if(m==="toString")return!1;return!0}(),d=function(m,v,g){for(var b in v)b in m.prototype&&typeof m.prototype[b]=="function"&&(v[b]+"").indexOf("callSuper")>-1?m.prototype[b]=function(w){return function(){var T=this.constructor.superclass;this.constructor.superclass=g;var k=v[w].apply(this,arguments);if(this.constructor.superclass=T,w!=="initialize")return k}}(b):m.prototype[b]=v[b],c&&(v.toString!==Object.prototype.toString&&(m.prototype.toString=v.toString),v.valueOf!==Object.prototype.valueOf&&(m.prototype.valueOf=v.valueOf))};function a(){}function l(m){for(var v=null,g=this;g.constructor.superclass;){var b=g.constructor.superclass.prototype[m];if(g[m]!==b){v=b;break}g=g.constructor.superclass.prototype}return v?arguments.length>1?v.apply(this,f.call(arguments,1)):v.call(this):console.log("tried to callSuper "+m+", method not found in prototype chain",this)}function u(){var m=null,v=f.call(arguments,0);typeof v[0]=="function"&&(m=v.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=m,g.subclasses=[],m&&(a.prototype=m.prototype,g.prototype=new a,m.subclasses.push(g));for(var b=0,w=v.length;b<w;b++)d(g,v[b],m);return g.prototype.initialize||(g.prototype.initialize=r),g.prototype.constructor=g,g.prototype.callSuper=l,g}t.util.createClass=u}(),function(){var f=!!t.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];t.util.addListener=function(d,a,l,u){d&&d.addEventListener(a,l,f?!1:u)},t.util.removeListener=function(d,a,l,u){d&&d.removeEventListener(a,l,f?!1:u)};function c(d){var a=d.changedTouches;return a&&a[0]?a[0]:d}t.util.getPointer=function(d){var a=d.target,l=t.util.getScrollLeftTop(a),u=c(d);return{x:u.clientX+l.left,y:u.clientY+l.top}},t.util.isTouchEvent=function(d){return r.indexOf(d.type)>-1||d.pointerType==="touch"}}(),function(){function f(u,m){var v=u.style;if(!v)return u;if(typeof m=="string")return u.style.cssText+=";"+m,m.indexOf("opacity")>-1?l(u,m.match(/opacity:\s*(\d?\.?\d*)/)[1]):u;for(var g in m)if(g==="opacity")l(u,m[g]);else{var b=g==="float"||g==="cssFloat"?typeof v.styleFloat>"u"?"cssFloat":"styleFloat":g;v.setProperty(b,m[g])}return u}var r=t.document.createElement("div"),c=typeof r.style.opacity=="string",d=typeof r.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(u){return u};c?l=function(u,m){return u.style.opacity=m,u}:d&&(l=function(u,m){var v=u.style;return u.currentStyle&&!u.currentStyle.hasLayout&&(v.zoom=1),a.test(v.filter)?(m=m>=.9999?"":"alpha(opacity="+m*100+")",v.filter=v.filter.replace(a,m)):v.filter+=" alpha(opacity="+m*100+")",u}),t.util.setStyle=f}(),function(){var f=Array.prototype.slice;function r(k){return typeof k=="string"?t.document.getElementById(k):k}var c,d=function(k){return f.call(k,0)};try{c=d(t.document.childNodes)instanceof Array}catch{}c||(d=function(k){for(var O=new Array(k.length),D=k.length;D--;)O[D]=k[D];return O});function a(k,O){var D=t.document.createElement(k);for(var P in O)P==="class"?D.className=O[P]:P==="for"?D.htmlFor=O[P]:D.setAttribute(P,O[P]);return D}function l(k,O){k&&(" "+k.className+" ").indexOf(" "+O+" ")===-1&&(k.className+=(k.className?" ":"")+O)}function u(k,O,D){return typeof O=="string"&&(O=a(O,D)),k.parentNode&&k.parentNode.replaceChild(O,k),O.appendChild(k),O}function m(k){for(var O=0,D=0,P=t.document.documentElement,F=t.document.body||{scrollLeft:0,scrollTop:0};k&&(k.parentNode||k.host)&&(k=k.parentNode||k.host,k===t.document?(O=F.scrollLeft||P.scrollLeft||0,D=F.scrollTop||P.scrollTop||0):(O+=k.scrollLeft||0,D+=k.scrollTop||0),!(k.nodeType===1&&k.style.position==="fixed")););return{left:O,top:D}}function v(k){var O,D=k&&k.ownerDocument,P={left:0,top:0},F={left:0,top:0},V,$={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!D)return F;for(var te in $)F[$[te]]+=parseInt(g(k,te),10)||0;return O=D.documentElement,typeof k.getBoundingClientRect<"u"&&(P=k.getBoundingClientRect()),V=m(k),{left:P.left+V.left-(O.clientLeft||0)+F.left,top:P.top+V.top-(O.clientTop||0)+F.top}}var g;t.document.defaultView&&t.document.defaultView.getComputedStyle?g=function(k,O){var D=t.document.defaultView.getComputedStyle(k,null);return D?D[O]:void 0}:g=function(k,O){var D=k.style[O];return!D&&k.currentStyle&&(D=k.currentStyle[O]),D},function(){var k=t.document.documentElement.style,O="userSelect"in k?"userSelect":"MozUserSelect"in k?"MozUserSelect":"WebkitUserSelect"in k?"WebkitUserSelect":"KhtmlUserSelect"in k?"KhtmlUserSelect":"";function D(F){return typeof F.onselectstart<"u"&&(F.onselectstart=t.util.falseFunction),O?F.style[O]="none":typeof F.unselectable=="string"&&(F.unselectable="on"),F}function P(F){return typeof F.onselectstart<"u"&&(F.onselectstart=null),O?F.style[O]="":typeof F.unselectable=="string"&&(F.unselectable=""),F}t.util.makeElementUnselectable=D,t.util.makeElementSelectable=P}();function b(k){var O=t.jsdomImplForWrapper(k);return O._canvas||O._image}function w(k){if(t.isLikelyNode){var O=t.jsdomImplForWrapper(k);O&&(O._image=null,O._canvas=null,O._currentSrc=null,O._attributes=null,O._classList=null)}}function T(k,O){k.imageSmoothingEnabled=k.imageSmoothingEnabled||k.webkitImageSmoothingEnabled||k.mozImageSmoothingEnabled||k.msImageSmoothingEnabled||k.oImageSmoothingEnabled,k.imageSmoothingEnabled=O}t.util.setImageSmoothing=T,t.util.getById=r,t.util.toArray=d,t.util.addClass=l,t.util.makeElement=a,t.util.wrapElement=u,t.util.getScrollLeftTop=m,t.util.getElementOffset=v,t.util.getNodeCanvas=b,t.util.cleanUpJsdomNode=w}(),function(){function f(d,a){return d+(/\?/.test(d)?"&":"?")+a}function r(){}function c(d,a){a||(a={});var l=a.method?a.method.toUpperCase():"GET",u=a.onComplete||function(){},m=new t.window.XMLHttpRequest,v=a.body||a.parameters;return m.onreadystatechange=function(){m.readyState===4&&(u(m),m.onreadystatechange=r)},l==="GET"&&(v=null,typeof a.parameters=="string"&&(d=f(d,a.parameters))),m.open(l,d,!0),(l==="POST"||l==="PUT")&&m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(v),m}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){var f=t.util.object.extend,r=t.util.object.clone,c=[];t.util.object.extend(c,{cancelAll:function(){var b=this.splice(0);return b.forEach(function(w){w.cancel()}),b},cancelByCanvas:function(b){if(!b)return[];var w=this.filter(function(T){return typeof T.target=="object"&&T.target.canvas===b});return w.forEach(function(T){T.cancel()}),w},cancelByTarget:function(b){var w=this.findAnimationsByTarget(b);return w.forEach(function(T){T.cancel()}),w},findAnimationIndex:function(b){return this.indexOf(this.findAnimation(b))},findAnimation:function(b){return this.find(function(w){return w.cancel===b})},findAnimationsByTarget:function(b){return b?this.filter(function(w){return w.target===b}):[]}});function d(){return!1}function a(b,w,T,k){return-T*Math.cos(b/k*(Math.PI/2))+T+w}function l(b){b||(b={});var w=!1,T,k=function(){var O=t.runningAnimations.indexOf(T);return O>-1&&t.runningAnimations.splice(O,1)[0]};return T=f(r(b),{cancel:function(){return w=!0,k()},currentValue:"startValue"in b?b.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(T),v(function(O){var D=O||+new Date,P=b.duration||500,F=D+P,V,$=b.onChange||d,te=b.abort||d,X=b.onComplete||d,Q=b.easing||a,se="startValue"in b?b.startValue.length>0:!1,K="startValue"in b?b.startValue:0,U="endValue"in b?b.endValue:100,q=b.byValue||(se?K.map(function(Z,L){return U[L]-K[L]}):U-K);b.onStart&&b.onStart(),function Z(L){V=L||+new Date;var A=V>F?P:V-D,j=A/P,R=se?K.map(function(B,z){return Q(A,K[z],q[z],P)}):Q(A,K,q,P),I=Math.abs(se?(R[0]-K[0])/q[0]:(R-K)/q);if(T.currentValue=se?R.slice():R,T.completionRate=I,T.durationRate=j,!w){if(te(R,I,j)){k();return}if(V>F){T.currentValue=se?U.slice():U,T.completionRate=1,T.durationRate=1,$(se?U.slice():U,1,1),X(U,1,1),k();return}else $(R,I,j),v(Z)}}(D)}),T.cancel}var u=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(b){return t.window.setTimeout(b,1e3/60)},m=t.window.cancelAnimationFrame||t.window.clearTimeout;function v(){return u.apply(t.window,arguments)}function g(){return m.apply(t.window,arguments)}t.util.animate=l,t.util.requestAnimFrame=v,t.util.cancelAnimFrame=g,t.runningAnimations=c}(),function(){function f(c,d,a){var l="rgba("+parseInt(c[0]+a*(d[0]-c[0]),10)+","+parseInt(c[1]+a*(d[1]-c[1]),10)+","+parseInt(c[2]+a*(d[2]-c[2]),10);return l+=","+(c&&d?parseFloat(c[3]+a*(d[3]-c[3])):1),l+=")",l}function r(c,d,a,l){var u=new t.Color(c).getSource(),m=new t.Color(d).getSource(),v=l.onComplete,g=l.onChange;return l=l||{},t.util.animate(t.util.object.extend(l,{duration:a||500,startValue:u,endValue:m,byValue:m,easing:function(b,w,T,k){var O=l.colorEasing?l.colorEasing(b,k):1-Math.cos(b/k*(Math.PI/2));return f(w,T,O)},onComplete:function(b,w,T){if(v)return v(f(m,m,0),w,T)},onChange:function(b,w,T){if(g){if(Array.isArray(b))return g(f(b,b,0),w,T);g(b,w,T)}}}))}t.util.animateColor=r}(),function(){function f(L,A,j,R){return L<Math.abs(A)?(L=A,R=j/4):A===0&&L===0?R=j/(2*Math.PI)*Math.asin(1):R=j/(2*Math.PI)*Math.asin(A/L),{a:L,c:A,p:j,s:R}}function r(L,A,j){return L.a*Math.pow(2,10*(A-=1))*Math.sin((A*j-L.s)*(2*Math.PI)/L.p)}function c(L,A,j,R){return j*((L=L/R-1)*L*L+1)+A}function d(L,A,j,R){return L/=R/2,L<1?j/2*L*L*L+A:j/2*((L-=2)*L*L+2)+A}function a(L,A,j,R){return j*(L/=R)*L*L*L+A}function l(L,A,j,R){return-j*((L=L/R-1)*L*L*L-1)+A}function u(L,A,j,R){return L/=R/2,L<1?j/2*L*L*L*L+A:-j/2*((L-=2)*L*L*L-2)+A}function m(L,A,j,R){return j*(L/=R)*L*L*L*L+A}function v(L,A,j,R){return j*((L=L/R-1)*L*L*L*L+1)+A}function g(L,A,j,R){return L/=R/2,L<1?j/2*L*L*L*L*L+A:j/2*((L-=2)*L*L*L*L+2)+A}function b(L,A,j,R){return-j*Math.cos(L/R*(Math.PI/2))+j+A}function w(L,A,j,R){return j*Math.sin(L/R*(Math.PI/2))+A}function T(L,A,j,R){return-j/2*(Math.cos(Math.PI*L/R)-1)+A}function k(L,A,j,R){return L===0?A:j*Math.pow(2,10*(L/R-1))+A}function O(L,A,j,R){return L===R?A+j:j*(-Math.pow(2,-10*L/R)+1)+A}function D(L,A,j,R){return L===0?A:L===R?A+j:(L/=R/2,L<1?j/2*Math.pow(2,10*(L-1))+A:j/2*(-Math.pow(2,-10*--L)+2)+A)}function P(L,A,j,R){return-j*(Math.sqrt(1-(L/=R)*L)-1)+A}function F(L,A,j,R){return j*Math.sqrt(1-(L=L/R-1)*L)+A}function V(L,A,j,R){return L/=R/2,L<1?-j/2*(Math.sqrt(1-L*L)-1)+A:j/2*(Math.sqrt(1-(L-=2)*L)+1)+A}function $(L,A,j,R){var I=1.70158,B=0,z=j;if(L===0)return A;if(L/=R,L===1)return A+j;B||(B=R*.3);var W=f(z,j,B,I);return-r(W,L,R)+A}function te(L,A,j,R){var I=1.70158,B=0,z=j;if(L===0)return A;if(L/=R,L===1)return A+j;B||(B=R*.3);var W=f(z,j,B,I);return W.a*Math.pow(2,-10*L)*Math.sin((L*R-W.s)*(2*Math.PI)/W.p)+W.c+A}function X(L,A,j,R){var I=1.70158,B=0,z=j;if(L===0)return A;if(L/=R/2,L===2)return A+j;B||(B=R*(.3*1.5));var W=f(z,j,B,I);return L<1?-.5*r(W,L,R)+A:W.a*Math.pow(2,-10*(L-=1))*Math.sin((L*R-W.s)*(2*Math.PI)/W.p)*.5+W.c+A}function Q(L,A,j,R,I){return I===void 0&&(I=1.70158),j*(L/=R)*L*((I+1)*L-I)+A}function se(L,A,j,R,I){return I===void 0&&(I=1.70158),j*((L=L/R-1)*L*((I+1)*L+I)+1)+A}function K(L,A,j,R,I){return I===void 0&&(I=1.70158),L/=R/2,L<1?j/2*(L*L*(((I*=1.525)+1)*L-I))+A:j/2*((L-=2)*L*(((I*=1.525)+1)*L+I)+2)+A}function U(L,A,j,R){return j-q(R-L,0,j,R)+A}function q(L,A,j,R){return(L/=R)<1/2.75?j*(7.5625*L*L)+A:L<2/2.75?j*(7.5625*(L-=1.5/2.75)*L+.75)+A:L<2.5/2.75?j*(7.5625*(L-=2.25/2.75)*L+.9375)+A:j*(7.5625*(L-=2.625/2.75)*L+.984375)+A}function Z(L,A,j,R){return L<R/2?U(L*2,0,j,R)*.5+A:q(L*2-R,0,j,R)*.5+j*.5+A}t.util.ease={easeInQuad:function(L,A,j,R){return j*(L/=R)*L+A},easeOutQuad:function(L,A,j,R){return-j*(L/=R)*(L-2)+A},easeInOutQuad:function(L,A,j,R){return L/=R/2,L<1?j/2*L*L+A:-j/2*(--L*(L-2)-1)+A},easeInCubic:function(L,A,j,R){return j*(L/=R)*L*L+A},easeOutCubic:c,easeInOutCubic:d,easeInQuart:a,easeOutQuart:l,easeInOutQuart:u,easeInQuint:m,easeOutQuint:v,easeInOutQuint:g,easeInSine:b,easeOutSine:w,easeInOutSine:T,easeInExpo:k,easeOutExpo:O,easeInOutExpo:D,easeInCirc:P,easeOutCirc:F,easeInOutCirc:V,easeInElastic:$,easeOutElastic:te,easeInOutElastic:X,easeInBack:Q,easeOutBack:se,easeInOutBack:K,easeInBounce:U,easeOutBounce:q,easeInOutBounce:Z}}(),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.util.object.clone,a=r.util.toFixed,l=r.util.parseUnit,u=r.util.multiplyTransformMatrices,m=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],v=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],b=["symbol","g","a","svg","clipPath","defs"],w={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},T={stroke:"strokeOpacity",fill:"fillOpacity"},k="font-size",O="clip-path";r.svgValidTagNamesRegEx=F(m),r.svgViewBoxElementsRegEx=F(v),r.svgInvalidAncestorsRegEx=F(g),r.svgValidParentsRegEx=F(b),r.cssRules={},r.gradientDefs={},r.clipPaths={};function D(B){return B in w?w[B]:B}function P(B,z,W,Y){var ne=Array.isArray(z),ee;if((B==="fill"||B==="stroke")&&z==="none")z="";else{if(B==="strokeUniform")return z==="non-scaling-stroke";if(B==="strokeDashArray")z==="none"?z=null:z=z.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(B==="transformMatrix")W&&W.transformMatrix?z=u(W.transformMatrix,r.parseTransformAttribute(z)):z=r.parseTransformAttribute(z);else if(B==="visible")z=z!=="none"&&z!=="hidden",W&&W.visible===!1&&(z=!1);else if(B==="opacity")z=parseFloat(z),W&&typeof W.opacity<"u"&&(z*=W.opacity);else if(B==="textAnchor")z=z==="start"?"left":z==="end"?"right":"center";else if(B==="charSpacing")ee=l(z,Y)/Y*1e3;else if(B==="paintFirst"){var de=z.indexOf("fill"),le=z.indexOf("stroke"),z="fill";(de>-1&&le>-1&&le<de||de===-1&&le>-1)&&(z="stroke")}else{if(B==="href"||B==="xlink:href"||B==="font")return z;if(B==="imageSmoothing")return z==="optimizeQuality";ee=ne?z.map(l):l(z,Y)}}return!ne&&isNaN(ee)?z:ee}function F(B){return new RegExp("^("+B.join("|")+")\\b","i")}function V(B){for(var z in T)if(!(typeof B[T[z]]>"u"||B[z]==="")){if(typeof B[z]>"u"){if(!r.Object.prototype[z])continue;B[z]=r.Object.prototype[z]}if(B[z].indexOf("url(")!==0){var W=new r.Color(B[z]);B[z]=W.setAlpha(a(W.getAlpha()*B[T[z]],2)).toRgba()}}return B}function $(B,z){var W,Y=[],ne,ee,de;for(ee=0,de=z.length;ee<de;ee++)W=z[ee],ne=B.getElementsByTagName(W),Y=Y.concat(Array.prototype.slice.call(ne));return Y}r.parseTransformAttribute=function(){function B(J,xe){var Se=r.util.cos(xe[0]),Ce=r.util.sin(xe[0]),Me=0,je=0;xe.length===3&&(Me=xe[1],je=xe[2]),J[0]=Se,J[1]=Ce,J[2]=-Ce,J[3]=Se,J[4]=Me-(Se*Me-Ce*je),J[5]=je-(Ce*Me+Se*je)}function z(J,xe){var Se=xe[0],Ce=xe.length===2?xe[1]:xe[0];J[0]=Se,J[3]=Ce}function W(J,xe,Se){J[Se]=Math.tan(r.util.degreesToRadians(xe[0]))}function Y(J,xe){J[4]=xe[0],xe.length===2&&(J[5]=xe[1])}var ne=r.iMatrix,ee=r.reNum,de=r.commaWsp,le="(?:(skewX)\\s*\\(\\s*("+ee+")\\s*\\))",we="(?:(skewY)\\s*\\(\\s*("+ee+")\\s*\\))",ue="(?:(rotate)\\s*\\(\\s*("+ee+")(?:"+de+"("+ee+")"+de+"("+ee+"))?\\s*\\))",oe="(?:(scale)\\s*\\(\\s*("+ee+")(?:"+de+"("+ee+"))?\\s*\\))",ge="(?:(translate)\\s*\\(\\s*("+ee+")(?:"+de+"("+ee+"))?\\s*\\))",ve="(?:(matrix)\\s*\\(\\s*("+ee+")"+de+"("+ee+")"+de+"("+ee+")"+de+"("+ee+")"+de+"("+ee+")"+de+"("+ee+")\\s*\\))",he="(?:"+ve+"|"+ge+"|"+oe+"|"+ue+"|"+le+"|"+we+")",be="(?:"+he+"(?:"+de+"*"+he+")*)",Ee="^\\s*(?:"+be+"?)\\s*$",G=new RegExp(Ee),re=new RegExp(he,"g");return function(J){var xe=ne.concat(),Se=[];if(!J||J&&!G.test(J))return xe;J.replace(re,function(Me){var je=new RegExp(he).exec(Me).filter(function(tn){return!!tn}),ze=je[1],Ie=je.slice(2).map(parseFloat);switch(ze){case"translate":Y(xe,Ie);break;case"rotate":Ie[0]=r.util.degreesToRadians(Ie[0]),B(xe,Ie);break;case"scale":z(xe,Ie);break;case"skewX":W(xe,Ie,2);break;case"skewY":W(xe,Ie,1);break;case"matrix":xe=Ie;break}Se.push(xe.concat()),xe=ne.concat()});for(var Ce=Se[0];Se.length>1;)Se.shift(),Ce=r.util.multiplyTransformMatrices(Ce,Se[0]);return Ce}}();function te(B,z){var W,Y;B.replace(/;\s*$/,"").split(";").forEach(function(ne){var ee=ne.split(":");W=ee[0].trim().toLowerCase(),Y=ee[1].trim(),z[W]=Y})}function X(B,z){var W,Y;for(var ne in B)typeof B[ne]>"u"||(W=ne.toLowerCase(),Y=B[ne],z[W]=Y)}function Q(B,z){var W={};for(var Y in r.cssRules[z])if(se(B,Y.split(" ")))for(var ne in r.cssRules[z][Y])W[ne]=r.cssRules[z][Y][ne];return W}function se(B,z){var W,Y=!0;return W=U(B,z.pop()),W&&z.length&&(Y=K(B,z)),W&&Y&&z.length===0}function K(B,z){for(var W,Y=!0;B.parentNode&&B.parentNode.nodeType===1&&z.length;)Y&&(W=z.pop()),B=B.parentNode,Y=U(B,W);return z.length===0}function U(B,z){var W=B.nodeName,Y=B.getAttribute("class"),ne=B.getAttribute("id"),ee,de;if(ee=new RegExp("^"+W,"i"),z=z.replace(ee,""),ne&&z.length&&(ee=new RegExp("#"+ne+"(?![a-zA-Z\\-]+)","i"),z=z.replace(ee,"")),Y&&z.length)for(Y=Y.split(" "),de=Y.length;de--;)ee=new RegExp("\\."+Y[de]+"(?![a-zA-Z\\-]+)","i"),z=z.replace(ee,"");return z.length===0}function q(B,z){var W;if(B.getElementById&&(W=B.getElementById(z)),W)return W;var Y,ne,ee,de=B.getElementsByTagName("*");for(ne=0,ee=de.length;ne<ee;ne++)if(Y=de[ne],z===Y.getAttribute("id"))return Y}function Z(B){for(var z=$(B,["use","svg:use"]),W=0;z.length&&W<z.length;){var Y=z[W],ne=Y.getAttribute("xlink:href")||Y.getAttribute("href");if(ne===null)return;var ee=ne.slice(1),de=Y.getAttribute("x")||0,le=Y.getAttribute("y")||0,we=q(B,ee).cloneNode(!0),ue=(we.getAttribute("transform")||"")+" translate("+de+", "+le+")",oe,ge=z.length,ve,he,be,Ee,G=r.svgNS;if(A(we),/^svg$/i.test(we.nodeName)){var re=we.ownerDocument.createElementNS(G,"g");for(he=0,be=we.attributes,Ee=be.length;he<Ee;he++)ve=be.item(he),re.setAttributeNS(G,ve.nodeName,ve.nodeValue);for(;we.firstChild;)re.appendChild(we.firstChild);we=re}for(he=0,be=Y.attributes,Ee=be.length;he<Ee;he++)ve=be.item(he),!(ve.nodeName==="x"||ve.nodeName==="y"||ve.nodeName==="xlink:href"||ve.nodeName==="href")&&(ve.nodeName==="transform"?ue=ve.nodeValue+" "+ue:we.setAttribute(ve.nodeName,ve.nodeValue));we.setAttribute("transform",ue),we.setAttribute("instantiated_by_use","1"),we.removeAttribute("id"),oe=Y.parentNode,oe.replaceChild(we,Y),z.length===ge&&W++}}var L=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function A(B){if(!r.svgViewBoxElementsRegEx.test(B.nodeName))return{};var z=B.getAttribute("viewBox"),W=1,Y=1,ne=0,ee=0,de,le,we,ue,oe=B.getAttribute("width"),ge=B.getAttribute("height"),ve=B.getAttribute("x")||0,he=B.getAttribute("y")||0,be=B.getAttribute("preserveAspectRatio")||"",Ee=!z||!(z=z.match(L)),G=!oe||!ge||oe==="100%"||ge==="100%",re=Ee&&G,J={},xe="",Se=0,Ce=0;if(J.width=0,J.height=0,J.toBeParsed=re,Ee&&(ve||he)&&B.parentNode&&B.parentNode.nodeName!=="#document"&&(xe=" translate("+l(ve)+" "+l(he)+") ",we=(B.getAttribute("transform")||"")+xe,B.setAttribute("transform",we),B.removeAttribute("x"),B.removeAttribute("y")),re)return J;if(Ee)return J.width=l(oe),J.height=l(ge),J;if(ne=-parseFloat(z[1]),ee=-parseFloat(z[2]),de=parseFloat(z[3]),le=parseFloat(z[4]),J.minX=ne,J.minY=ee,J.viewBoxWidth=de,J.viewBoxHeight=le,G?(J.width=de,J.height=le):(J.width=l(oe),J.height=l(ge),W=J.width/de,Y=J.height/le),be=r.util.parsePreserveAspectRatioAttribute(be),be.alignX!=="none"&&(be.meetOrSlice==="meet"&&(Y=W=W>Y?Y:W),be.meetOrSlice==="slice"&&(Y=W=W>Y?W:Y),Se=J.width-de*W,Ce=J.height-le*W,be.alignX==="Mid"&&(Se/=2),be.alignY==="Mid"&&(Ce/=2),be.alignX==="Min"&&(Se=0),be.alignY==="Min"&&(Ce=0)),W===1&&Y===1&&ne===0&&ee===0&&ve===0&&he===0)return J;if((ve||he)&&B.parentNode.nodeName!=="#document"&&(xe=" translate("+l(ve)+" "+l(he)+") "),we=xe+" matrix("+W+" 0 0 "+Y+" "+(ne*W+Se)+" "+(ee*Y+Ce)+") ",B.nodeName==="svg"){for(ue=B.ownerDocument.createElementNS(r.svgNS,"g");B.firstChild;)ue.appendChild(B.firstChild);B.appendChild(ue)}else ue=B,ue.removeAttribute("x"),ue.removeAttribute("y"),we=ue.getAttribute("transform")+we;return ue.setAttribute("transform",we),J}function j(B,z){for(;B&&(B=B.parentNode);)if(B.nodeName&&z.test(B.nodeName.replace("svg:",""))&&!B.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(B,z,W,Y){if(B){Z(B);var ne=r.Object.__uid++,ee,de,le=A(B),we=r.util.toArray(B.getElementsByTagName("*"));if(le.crossOrigin=Y&&Y.crossOrigin,le.svgUid=ne,we.length===0&&r.isLikelyNode){we=B.selectNodes('//*[name(.)!="svg"]');var ue=[];for(ee=0,de=we.length;ee<de;ee++)ue[ee]=we[ee];we=ue}var oe=we.filter(function(ve){return A(ve),r.svgValidTagNamesRegEx.test(ve.nodeName.replace("svg:",""))&&!j(ve,r.svgInvalidAncestorsRegEx)});if(!oe||oe&&!oe.length){z&&z([],{});return}var ge={};we.filter(function(ve){return ve.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ve){var he=ve.getAttribute("id");ge[he]=r.util.toArray(ve.getElementsByTagName("*")).filter(function(be){return r.svgValidTagNamesRegEx.test(be.nodeName.replace("svg:",""))})}),r.gradientDefs[ne]=r.getGradientDefs(B),r.cssRules[ne]=r.getCSSRules(B),r.clipPaths[ne]=ge,r.parseElements(oe,function(ve,he){z&&(z(ve,le,he,we),delete r.gradientDefs[ne],delete r.cssRules[ne],delete r.clipPaths[ne])},d(le),W,Y)}};function R(B,z){var W=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Y="xlink:href",ne=z.getAttribute(Y).slice(1),ee=q(B,ne);if(ee&&ee.getAttribute(Y)&&R(B,ee),W.forEach(function(le){ee&&!z.hasAttribute(le)&&ee.hasAttribute(le)&&z.setAttribute(le,ee.getAttribute(le))}),!z.children.length)for(var de=ee.cloneNode(!0);de.firstChild;)z.appendChild(de.firstChild);z.removeAttribute(Y)}var I=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");c(r,{parseFontDeclaration:function(B,z){var W=B.match(I);if(W){var Y=W[1],ne=W[3],ee=W[4],de=W[5],le=W[6];Y&&(z.fontStyle=Y),ne&&(z.fontWeight=isNaN(parseFloat(ne))?ne:parseFloat(ne)),ee&&(z.fontSize=l(ee)),le&&(z.fontFamily=le),de&&(z.lineHeight=de==="normal"?1:de)}},getGradientDefs:function(B){var z=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],W=$(B,z),Y,ne=0,ee={};for(ne=W.length;ne--;)Y=W[ne],Y.getAttribute("xlink:href")&&R(B,Y),ee[Y.getAttribute("id")]=Y;return ee},parseAttributes:function(B,z,W){if(B){var Y,ne={},ee,de;typeof W>"u"&&(W=B.getAttribute("svgUid")),B.parentNode&&r.svgValidParentsRegEx.test(B.parentNode.nodeName)&&(ne=r.parseAttributes(B.parentNode,z,W));var le=z.reduce(function(be,Ee){return Y=B.getAttribute(Ee),Y&&(be[Ee]=Y),be},{}),we=c(Q(B,W),r.parseStyleAttribute(B));le=c(le,we),we[O]&&B.setAttribute(O,we[O]),ee=de=ne.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,le[k]&&(le[k]=ee=l(le[k],de));var ue,oe,ge={};for(var ve in le)ue=D(ve),oe=P(ue,le[ve],ne,ee),ge[ue]=oe;ge&&ge.font&&r.parseFontDeclaration(ge.font,ge);var he=c(ne,ge);return r.svgValidParentsRegEx.test(B.nodeName)?he:V(he)}},parseElements:function(B,z,W,Y,ne){new r.ElementsParser(B,z,W,Y,ne).parse()},parseStyleAttribute:function(B){var z={},W=B.getAttribute("style");return W&&(typeof W=="string"?te(W,z):X(W,z)),z},parsePointsAttribute:function(B){if(!B)return null;B=B.replace(/,/g," ").trim(),B=B.split(/\s+/);var z=[],W,Y;for(W=0,Y=B.length;W<Y;W+=2)z.push({x:parseFloat(B[W]),y:parseFloat(B[W+1])});return z},getCSSRules:function(B){var z=B.getElementsByTagName("style"),W,Y,ne={},ee;for(W=0,Y=z.length;W<Y;W++){var de=z[W].textContent;de=de.replace(/\/\*[\s\S]*?\*\//g,""),de.trim()!==""&&(ee=de.split("}"),ee=ee.filter(function(le){return le.trim()}),ee.forEach(function(le){var we=le.split("{"),ue={},oe=we[1].trim(),ge=oe.split(";").filter(function(Ee){return Ee.trim()});for(W=0,Y=ge.length;W<Y;W++){var ve=ge[W].split(":"),he=ve[0].trim(),be=ve[1].trim();ue[he]=be}le=we[0].trim(),le.split(",").forEach(function(Ee){Ee=Ee.replace(/^svg/i,"").trim(),Ee!==""&&(ne[Ee]?r.util.object.extend(ne[Ee],ue):ne[Ee]=r.util.object.clone(ue))})}))}return ne},loadSVGFromURL:function(B,z,W,Y){B=B.replace(/^\n\s*/,"").trim(),new r.util.request(B,{method:"get",onComplete:ne});function ne(ee){var de=ee.responseXML;if(!de||!de.documentElement)return z&&z(null),!1;r.parseSVGDocument(de.documentElement,function(le,we,ue,oe){z&&z(le,we,ue,oe)},W,Y)}},loadSVGFromString:function(B,z,W,Y){var ne=new r.window.DOMParser,ee=ne.parseFromString(B.trim(),"text/xml");r.parseSVGDocument(ee.documentElement,function(de,le,we,ue){z(de,le,we,ue)},W,Y)}})}(e),t.ElementsParser=function(f,r,c,d,a,l){this.elements=f,this.callback=r,this.options=c,this.reviver=d,this.svgUid=c&&c.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var r=this;this.elements.forEach(function(c,d){c.setAttribute("svgUid",r.svgUid),r.createObject(c,d)})},f.findTag=function(r){return t[t.util.string.capitalize(r.tagName.replace("svg:",""))]},f.createObject=function(r,c){var d=this.findTag(r);if(d&&d.fromElement)try{d.fromElement(r,this.createCallback(c,r),this.options)}catch(a){t.log(a)}else this.checkIfDone()},f.createCallback=function(r,c){var d=this;return function(a){var l;d.resolveGradient(a,c,"fill"),d.resolveGradient(a,c,"stroke"),a instanceof t.Image&&a._originalElement&&(l=a.parsePreserveAspectRatioAttribute(c)),a._removeTransformMatrix(l),d.resolveClipPath(a,c),d.reviver&&d.reviver(c,a),d.instances[r]=a,d.checkIfDone()}},f.extractPropertyDefinition=function(r,c,d){var a=r[c],l=this.regexUrl;if(l.test(a)){l.lastIndex=0;var u=l.exec(a)[1];return l.lastIndex=0,t[d][this.svgUid][u]}},f.resolveGradient=function(r,c,d){var a=this.extractPropertyDefinition(r,d,"gradientDefs");if(a){var l=c.getAttribute(d+"-opacity"),u=t.Gradient.fromElement(a,r,l,this.options);r.set(d,u)}},f.createClipPathCallback=function(r,c){return function(d){d._removeTransformMatrix(),d.fillRule=d.clipRule,c.push(d)}},f.resolveClipPath=function(r,c){var d=this.extractPropertyDefinition(r,"clipPath","clipPaths"),a,l,u,m,v,g;if(d){m=[],u=t.util.invertTransform(r.calcTransformMatrix());for(var b=d[0].parentNode,w=c;w.parentNode&&w.getAttribute("clip-path")!==r.clipPath;)w=w.parentNode;w.parentNode.appendChild(b);for(var T=0;T<d.length;T++)a=d[T],l=this.findTag(a),l.fromElement(a,this.createClipPathCallback(r,m),this.options);m.length===1?d=m[0]:d=new t.Group(m),v=t.util.multiplyTransformMatrices(u,d.calcTransformMatrix()),d.clipPath&&this.resolveClipPath(d,w);var g=t.util.qrDecompose(v);d.flipX=!1,d.flipY=!1,d.set("scaleX",g.scaleX),d.set("scaleY",g.scaleY),d.angle=g.angle,d.skewX=g.skewX,d.skewY=0,d.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),r.clipPath=d}else delete r.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(f){var r=f.fabric||(f.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=c;function c(d,a){this.x=d,this.y=a}c.prototype={type:"point",constructor:c,add:function(d){return new c(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new c(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new c(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new c(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new c(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new c(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new c(this.x+(d.x-this.x)*a,this.y+(d.y-this.y)*a)},distanceFrom:function(d){var a=this.x-d.x,l=this.y-d.y;return Math.sqrt(a*a+l*l)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new c(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new c(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,a){return this.x=d,this.y=a,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var a=this.x,l=this.y;this.x=d.x,this.y=d.y,d.x=a,d.y=l},clone:function(){return new c(this.x,this.y)}}}(e),function(f){var r=f.fabric||(f.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function c(d){this.status=d,this.points=[]}r.Intersection=c,r.Intersection.prototype={constructor:c,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},r.Intersection.intersectLineLine=function(d,a,l,u){var m,v=(u.x-l.x)*(d.y-l.y)-(u.y-l.y)*(d.x-l.x),g=(a.x-d.x)*(d.y-l.y)-(a.y-d.y)*(d.x-l.x),b=(u.y-l.y)*(a.x-d.x)-(u.x-l.x)*(a.y-d.y);if(b!==0){var w=v/b,T=g/b;0<=w&&w<=1&&0<=T&&T<=1?(m=new c("Intersection"),m.appendPoint(new r.Point(d.x+w*(a.x-d.x),d.y+w*(a.y-d.y)))):m=new c}else v===0||g===0?m=new c("Coincident"):m=new c("Parallel");return m},r.Intersection.intersectLinePolygon=function(d,a,l){var u=new c,m=l.length,v,g,b,w;for(w=0;w<m;w++)v=l[w],g=l[(w+1)%m],b=c.intersectLineLine(d,a,v,g),u.appendPoints(b.points);return u.points.length>0&&(u.status="Intersection"),u},r.Intersection.intersectPolygonPolygon=function(d,a){var l=new c,u=d.length,m;for(m=0;m<u;m++){var v=d[m],g=d[(m+1)%u],b=c.intersectLinePolygon(v,g,a);l.appendPoints(b.points)}return l.points.length>0&&(l.status="Intersection"),l},r.Intersection.intersectPolygonRectangle=function(d,a,l){var u=a.min(l),m=a.max(l),v=new r.Point(m.x,u.y),g=new r.Point(u.x,m.y),b=c.intersectLinePolygon(u,v,d),w=c.intersectLinePolygon(v,m,d),T=c.intersectLinePolygon(m,g,d),k=c.intersectLinePolygon(g,u,d),O=new c;return O.appendPoints(b.points),O.appendPoints(w.points),O.appendPoints(T.points),O.appendPoints(k.points),O.points.length>0&&(O.status="Intersection"),O}}(e),function(f){var r=f.fabric||(f.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function c(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}r.Color=c,r.Color.prototype={_tryParsingColor:function(a){var l;a in c.colorNameMap&&(a=c.colorNameMap[a]),a==="transparent"&&(l=[255,255,255,0]),l||(l=c.sourceFromHex(a)),l||(l=c.sourceFromRgb(a)),l||(l=c.sourceFromHsl(a)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(a,l,u){a/=255,l/=255,u/=255;var m,v,g,b=r.util.array.max([a,l,u]),w=r.util.array.min([a,l,u]);if(g=(b+w)/2,b===w)m=v=0;else{var T=b-w;switch(v=g>.5?T/(2-b-w):T/(b+w),b){case a:m=(l-u)/T+(l<u?6:0);break;case l:m=(u-a)/T+2;break;case u:m=(a-l)/T+4;break}m/=6}return[Math.round(m*360),Math.round(v*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),l,u,m;return l=a[0].toString(16),l=l.length===1?"0"+l:l,u=a[1].toString(16),u=u.length===1?"0"+u:u,m=a[2].toString(16),m=m.length===1?"0"+m:m,l.toUpperCase()+u.toUpperCase()+m.toUpperCase()},toHexa:function(){var a=this.getSource(),l;return l=Math.round(a[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var l=this.getSource();return l[3]=a,this.setSource(l),this},toGrayscale:function(){var a=this.getSource(),l=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),u=a[3];return this.setSource([l,l,l,u]),this},toBlackWhite:function(a){var l=this.getSource(),u=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),m=l[3];return a=a||127,u=Number(u)<Number(a)?0:255,this.setSource([u,u,u,m]),this},overlayWith:function(a){a instanceof c||(a=new c(a));var l=[],u=this.getAlpha(),m=.5,v=this.getSource(),g=a.getSource(),b;for(b=0;b<3;b++)l.push(Math.round(v[b]*(1-m)+g[b]*m));return l[3]=u,this.setSource(l),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function d(a,l,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?a+(l-a)*6*u:u<1/2?l:u<2/3?a+(l-a)*(2/3-u)*6:a}r.Color.fromRgb=function(a){return c.fromSource(c.sourceFromRgb(a))},r.Color.sourceFromRgb=function(a){var l=a.match(c.reRGBa);if(l){var u=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),m=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),v=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(u,10),parseInt(m,10),parseInt(v,10),l[4]?parseFloat(l[4]):1]}},r.Color.fromRgba=c.fromRgb,r.Color.fromHsl=function(a){return c.fromSource(c.sourceFromHsl(a))},r.Color.sourceFromHsl=function(a){var l=a.match(c.reHSLa);if(l){var u=(parseFloat(l[1])%360+360)%360/360,m=parseFloat(l[2])/(/%$/.test(l[2])?100:1),v=parseFloat(l[3])/(/%$/.test(l[3])?100:1),g,b,w;if(m===0)g=b=w=v;else{var T=v<=.5?v*(m+1):v+m-v*m,k=v*2-T;g=d(k,T,u+1/3),b=d(k,T,u),w=d(k,T,u-1/3)}return[Math.round(g*255),Math.round(b*255),Math.round(w*255),l[4]?parseFloat(l[4]):1]}},r.Color.fromHsla=c.fromHsl,r.Color.fromHex=function(a){return c.fromSource(c.sourceFromHex(a))},r.Color.sourceFromHex=function(a){if(a.match(c.reHex)){var l=a.slice(a.indexOf("#")+1),u=l.length===3||l.length===4,m=l.length===8||l.length===4,v=u?l.charAt(0)+l.charAt(0):l.substring(0,2),g=u?l.charAt(1)+l.charAt(1):l.substring(2,4),b=u?l.charAt(2)+l.charAt(2):l.substring(4,6),w=m?u?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(v,16),parseInt(g,16),parseInt(b,16),parseFloat((parseInt(w,16)/255).toFixed(2))]}},r.Color.fromSource=function(a){var l=new c;return l.setSource(a),l}}(e),function(f){var r=f.fabric||(f.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],a={},l="left",u="top",m="right",v="bottom",g="center",b={top:v,bottom:u,left:m,right:l,center:g},w=r.util.radiansToDegrees,T=Math.sign||function(ue){return(ue>0)-(ue<0)||+ue};function k(ue,oe){var ge=ue.angle+w(Math.atan2(oe.y,oe.x))+360;return Math.round(ge%360/45)}function O(ue,oe){var ge=oe.transform.target,ve=ge.canvas,he=r.util.object.clone(oe);he.target=ge,ve&&ve.fire("object:"+ue,he),ge.fire(ue,oe)}function D(ue,oe){var ge=oe.canvas,ve=ge.uniScaleKey,he=ue[ve];return ge.uniformScaling&&!he||!ge.uniformScaling&&he}function P(ue){return ue.originX===g&&ue.originY===g}function F(ue,oe,ge){var ve=ue.lockScalingX,he=ue.lockScalingY;return!!(ve&&he||!oe&&(ve||he)&&ge||ve&&oe==="x"||he&&oe==="y")}function V(ue,oe,ge){var ve="not-allowed",he=D(ue,ge),be="";if(oe.x!==0&&oe.y===0?be="x":oe.x===0&&oe.y!==0&&(be="y"),F(ge,be,he))return ve;var Ee=k(ge,oe);return c[Ee]+"-resize"}function $(ue,oe,ge){var ve="not-allowed";if(oe.x!==0&&ge.lockSkewingY||oe.y!==0&&ge.lockSkewingX)return ve;var he=k(ge,oe)%4;return d[he]+"-resize"}function te(ue,oe,ge){return ue[ge.canvas.altActionKey]?a.skewCursorStyleHandler(ue,oe,ge):a.scaleCursorStyleHandler(ue,oe,ge)}function X(ue,oe,ge){var ve=ue[ge.canvas.altActionKey];if(oe.x===0)return ve?"skewX":"scaleY";if(oe.y===0)return ve?"skewY":"scaleX"}function Q(ue,oe,ge){return ge.lockRotation?"not-allowed":oe.cursorStyle}function se(ue,oe,ge,ve){return{e:ue,transform:oe,pointer:{x:ge,y:ve}}}function K(ue){return function(oe,ge,ve,he){var be=ge.target,Ee=be.getCenterPoint(),G=be.translateToOriginPoint(Ee,ge.originX,ge.originY),re=ue(oe,ge,ve,he);return be.setPositionByOrigin(G,ge.originX,ge.originY),re}}function U(ue,oe){return function(ge,ve,he,be){var Ee=oe(ge,ve,he,be);return Ee&&O(ue,se(ge,ve,he,be)),Ee}}function q(ue,oe,ge,ve,he){var be=ue.target,Ee=be.controls[ue.corner],G=be.canvas.getZoom(),re=be.padding/G,J=be.toLocalPoint(new r.Point(ve,he),oe,ge);return J.x>=re&&(J.x-=re),J.x<=-re&&(J.x+=re),J.y>=re&&(J.y-=re),J.y<=re&&(J.y+=re),J.x-=Ee.offsetX,J.y-=Ee.offsetY,J}function Z(ue){return ue.flipX!==ue.flipY}function L(ue,oe,ge,ve,he){if(ue[oe]!==0){var be=ue._getTransformedDimensions()[ve],Ee=he/be*ue[ge];ue.set(ge,Ee)}}function A(ue,oe,ge,ve){var he=oe.target,be=he._getTransformedDimensions(0,he.skewY),Ee=q(oe,oe.originX,oe.originY,ge,ve),G=Math.abs(Ee.x*2)-be.x,re=he.skewX,J;G<2?J=0:(J=w(Math.atan2(G/he.scaleX,be.y/he.scaleY)),oe.originX===l&&oe.originY===v&&(J=-J),oe.originX===m&&oe.originY===u&&(J=-J),Z(he)&&(J=-J));var xe=re!==J;if(xe){var Se=he._getTransformedDimensions().y;he.set("skewX",J),L(he,"skewY","scaleY","y",Se)}return xe}function j(ue,oe,ge,ve){var he=oe.target,be=he._getTransformedDimensions(he.skewX,0),Ee=q(oe,oe.originX,oe.originY,ge,ve),G=Math.abs(Ee.y*2)-be.y,re=he.skewY,J;G<2?J=0:(J=w(Math.atan2(G/he.scaleY,be.x/he.scaleX)),oe.originX===l&&oe.originY===v&&(J=-J),oe.originX===m&&oe.originY===u&&(J=-J),Z(he)&&(J=-J));var xe=re!==J;if(xe){var Se=he._getTransformedDimensions().x;he.set("skewY",J),L(he,"skewX","scaleX","x",Se)}return xe}function R(ue,oe,ge,ve){var he=oe.target,be=he.skewX,Ee,G=oe.originY;if(he.lockSkewingX)return!1;if(be===0){var re=q(oe,g,g,ge,ve);re.x>0?Ee=l:Ee=m}else be>0&&(Ee=G===u?l:m),be<0&&(Ee=G===u?m:l),Z(he)&&(Ee=Ee===l?m:l);oe.originX=Ee;var J=U("skewing",K(A));return J(ue,oe,ge,ve)}function I(ue,oe,ge,ve){var he=oe.target,be=he.skewY,Ee,G=oe.originX;if(he.lockSkewingY)return!1;if(be===0){var re=q(oe,g,g,ge,ve);re.y>0?Ee=u:Ee=v}else be>0&&(Ee=G===l?u:v),be<0&&(Ee=G===l?v:u),Z(he)&&(Ee=Ee===u?v:u);oe.originY=Ee;var J=U("skewing",K(j));return J(ue,oe,ge,ve)}function B(ue,oe,ge,ve){var he=oe,be=he.target,Ee=be.translateToOriginPoint(be.getCenterPoint(),he.originX,he.originY);if(be.lockRotation)return!1;var G=Math.atan2(he.ey-Ee.y,he.ex-Ee.x),re=Math.atan2(ve-Ee.y,ge-Ee.x),J=w(re-G+he.theta),xe=!0;if(be.snapAngle>0){var Se=be.snapAngle,Ce=be.snapThreshold||Se,Me=Math.ceil(J/Se)*Se,je=Math.floor(J/Se)*Se;Math.abs(J-je)<Ce?J=je:Math.abs(J-Me)<Ce&&(J=Me)}return J<0&&(J=360+J),J%=360,xe=be.angle!==J,be.angle=J,xe}function z(ue,oe,ge,ve,he){he=he||{};var be=oe.target,Ee=be.lockScalingX,G=be.lockScalingY,re=he.by,J,xe,Se,Ce,Me=D(ue,be),je=F(be,re,Me),ze,Ie,tn=oe.gestureScale;if(je)return!1;if(tn)xe=oe.scaleX*tn,Se=oe.scaleY*tn;else{if(J=q(oe,oe.originX,oe.originY,ge,ve),ze=re!=="y"?T(J.x):1,Ie=re!=="x"?T(J.y):1,oe.signX||(oe.signX=ze),oe.signY||(oe.signY=Ie),be.lockScalingFlip&&(oe.signX!==ze||oe.signY!==Ie))return!1;if(Ce=be._getTransformedDimensions(),Me&&!re){var Ut=Math.abs(J.x)+Math.abs(J.y),nn=oe.original,Un=Math.abs(Ce.x*nn.scaleX/be.scaleX)+Math.abs(Ce.y*nn.scaleY/be.scaleY),Dn=Ut/Un;xe=nn.scaleX*Dn,Se=nn.scaleY*Dn}else xe=Math.abs(J.x*be.scaleX/Ce.x),Se=Math.abs(J.y*be.scaleY/Ce.y);P(oe)&&(xe*=2,Se*=2),oe.signX!==ze&&re!=="y"&&(oe.originX=b[oe.originX],xe*=-1,oe.signX=ze),oe.signY!==Ie&&re!=="x"&&(oe.originY=b[oe.originY],Se*=-1,oe.signY=Ie)}var Rn=be.scaleX,ti=be.scaleY;return re?(re==="x"&&be.set("scaleX",xe),re==="y"&&be.set("scaleY",Se)):(!Ee&&be.set("scaleX",xe),!G&&be.set("scaleY",Se)),Rn!==be.scaleX||ti!==be.scaleY}function W(ue,oe,ge,ve){return z(ue,oe,ge,ve)}function Y(ue,oe,ge,ve){return z(ue,oe,ge,ve,{by:"x"})}function ne(ue,oe,ge,ve){return z(ue,oe,ge,ve,{by:"y"})}function ee(ue,oe,ge,ve){return ue[oe.target.canvas.altActionKey]?a.skewHandlerX(ue,oe,ge,ve):a.scalingY(ue,oe,ge,ve)}function de(ue,oe,ge,ve){return ue[oe.target.canvas.altActionKey]?a.skewHandlerY(ue,oe,ge,ve):a.scalingX(ue,oe,ge,ve)}function le(ue,oe,ge,ve){var he=oe.target,be=q(oe,oe.originX,oe.originY,ge,ve),Ee=he.strokeWidth/(he.strokeUniform?he.scaleX:1),G=P(oe)?2:1,re=he.width,J=Math.abs(be.x*G/he.scaleX)-Ee;return he.set("width",Math.max(J,0)),re!==J}function we(ue,oe,ge,ve){var he=oe.target,be=ge-oe.offsetX,Ee=ve-oe.offsetY,G=!he.get("lockMovementX")&&he.left!==be,re=!he.get("lockMovementY")&&he.top!==Ee;return G&&he.set("left",be),re&&he.set("top",Ee),(G||re)&&O("moving",se(ue,oe,ge,ve)),G||re}a.scaleCursorStyleHandler=V,a.skewCursorStyleHandler=$,a.scaleSkewCursorStyleHandler=te,a.rotationWithSnapping=U("rotating",K(B)),a.scalingEqually=U("scaling",K(W)),a.scalingX=U("scaling",K(Y)),a.scalingY=U("scaling",K(ne)),a.scalingYOrSkewingX=ee,a.scalingXOrSkewingY=de,a.changeWidth=U("resizing",K(le)),a.skewHandlerX=R,a.skewHandlerY=I,a.dragHandler=we,a.scaleOrSkewActionName=X,a.rotationStyleHandler=Q,a.fireEvent=O,a.wrapWithFixedAnchor=K,a.wrapWithFireEvent=U,a.getLocalPoint=q,r.controlsUtils=a}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.degreesToRadians,d=r.controlsUtils;function a(u,m,v,g,b){g=g||{};var w=this.sizeX||g.cornerSize||b.cornerSize,T=this.sizeY||g.cornerSize||b.cornerSize,k=typeof g.transparentCorners<"u"?g.transparentCorners:b.transparentCorners,O=k?"stroke":"fill",D=!k&&(g.cornerStrokeColor||b.cornerStrokeColor),P=m,F=v,V;u.save(),u.fillStyle=g.cornerColor||b.cornerColor,u.strokeStyle=g.cornerStrokeColor||b.cornerStrokeColor,w>T?(V=w,u.scale(1,T/w),F=v*w/T):T>w?(V=T,u.scale(w/T,1),P=m*T/w):V=w,u.lineWidth=1,u.beginPath(),u.arc(P,F,V/2,0,2*Math.PI,!1),u[O](),D&&u.stroke(),u.restore()}function l(u,m,v,g,b){g=g||{};var w=this.sizeX||g.cornerSize||b.cornerSize,T=this.sizeY||g.cornerSize||b.cornerSize,k=typeof g.transparentCorners<"u"?g.transparentCorners:b.transparentCorners,O=k?"stroke":"fill",D=!k&&(g.cornerStrokeColor||b.cornerStrokeColor),P=w/2,F=T/2;u.save(),u.fillStyle=g.cornerColor||b.cornerColor,u.strokeStyle=g.cornerStrokeColor||b.cornerStrokeColor,u.lineWidth=1,u.translate(m,v),u.rotate(c(b.angle)),u[O+"Rect"](-P,-F,w,T),D&&u.strokeRect(-P,-F,w,T),u.restore()}d.renderCircleControl=a,d.renderSquareControl=l}(e),function(f){var r=f.fabric||(f.fabric={});function c(d){for(var a in d)this[a]=d[a]}r.Control=c,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(d,a){return a.cursorStyle},getActionName:function(d,a){return a.actionName},getVisibility:function(d,a){var l=d._controlsVisibility;return l&&typeof l[a]<"u"?l[a]:this.visible},setVisibility:function(d){this.visible=d},positionHandler:function(d,a){var l=r.util.transformPoint({x:this.x*d.x+this.offsetX,y:this.y*d.y+this.offsetY},a);return l},calcCornerCoords:function(d,a,l,u,m){var v,g,b,w,T=m?this.touchSizeX:this.sizeX,k=m?this.touchSizeY:this.sizeY;if(T&&k&&T!==k){var O=Math.atan2(k,T),D=Math.sqrt(T*T+k*k)/2,P=O-r.util.degreesToRadians(d),F=Math.PI/2-O-r.util.degreesToRadians(d);v=D*r.util.cos(P),g=D*r.util.sin(P),b=D*r.util.cos(F),w=D*r.util.sin(F)}else{var V=T&&k?T:a;D=V*.7071067812;var P=r.util.degreesToRadians(45-d);v=b=D*r.util.cos(P),g=w=D*r.util.sin(P)}return{tl:{x:l-w,y:u-b},tr:{x:l+v,y:u-g},bl:{x:l-v,y:u+g},br:{x:l+w,y:u+b}}},render:function(d,a,l,u,m){switch(u=u||{},u.cornerStyle||m.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,d,a,l,u,m);break;default:r.controlsUtils.renderSquareControl.call(this,d,a,l,u,m)}}}}(e),function(){function f(l,u){var m=l.getAttribute("style"),v=l.getAttribute("offset")||0,g,b,w,T;if(v=parseFloat(v)/(/%$/.test(v)?100:1),v=v<0?0:v>1?1:v,m){var k=m.split(/\s*;\s*/);for(k[k.length-1]===""&&k.pop(),T=k.length;T--;){var O=k[T].split(/\s*:\s*/),D=O[0].trim(),P=O[1].trim();D==="stop-color"?g=P:D==="stop-opacity"&&(w=P)}}return g||(g=l.getAttribute("stop-color")||"rgb(0,0,0)"),w||(w=l.getAttribute("stop-opacity")),g=new t.Color(g),b=g.getAlpha(),w=isNaN(parseFloat(w))?1:parseFloat(w),w*=b*u,{offset:v,color:g.toRgb(),opacity:w}}function r(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function c(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var d=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var u,m=this;Object.keys(l).forEach(function(v){m[v]=l[v]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,u={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(u.r1=l.coords.r1||0,u.r2=l.coords.r2||0),this.coords=u,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var u in l){var m=new t.Color(l[u]);this.colorStops.push({offset:parseFloat(u),color:m.toRgb(),opacity:m.getAlpha()})}return this},toObject:function(l){var u={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,u,l),u},toSVG:function(l,b){var m=d(this.coords,!0),v,g,b=b||{},w,T,k=d(this.colorStops,!0),O=m.r1>m.r2,D=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),P=-this.offsetX,F=-this.offsetY,V=!!b.additionalTransform,$=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(k.sort(function(K,U){return K.offset-U.offset}),$==="objectBoundingBox"?(P/=l.width,F/=l.height):(P+=l.width/2,F+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(P-=l.pathOffset.x,F-=l.pathOffset.y),D[4]-=P,D[5]-=F,T='id="SVGID_'+this.id+'" gradientUnits="'+$+'"',T+=' gradientTransform="'+(V?b.additionalTransform+" ":"")+t.util.matrixToSVG(D)+'" ',this.type==="linear"?w=["<linearGradient ",T,' x1="',m.x1,'" y1="',m.y1,'" x2="',m.x2,'" y2="',m.y2,`">
`]:this.type==="radial"&&(w=["<radialGradient ",T,' cx="',O?m.x1:m.x2,'" cy="',O?m.y1:m.y2,'" r="',O?m.r1:m.r2,'" fx="',O?m.x2:m.x1,'" fy="',O?m.y2:m.y1,`">
`]),this.type==="radial"){if(O)for(k=k.concat(),k.reverse(),v=0,g=k.length;v<g;v++)k[v].offset=1-k[v].offset;var te=Math.min(m.r1,m.r2);if(te>0){var X=Math.max(m.r1,m.r2),Q=te/X;for(v=0,g=k.length;v<g;v++)k[v].offset+=Q*(1-k[v].offset)}}for(v=0,g=k.length;v<g;v++){var se=k[v];w.push("<stop ",'offset="',se.offset*100+"%",'" style="stop-color:',se.color,typeof se.opacity<"u"?";stop-opacity: "+se.opacity:";",`"/>
`)}return w.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),w.join("")},toLive:function(l){var u,m=t.util.object.clone(this.coords),v,g;if(this.type){for(this.type==="linear"?u=l.createLinearGradient(m.x1,m.y1,m.x2,m.y2):this.type==="radial"&&(u=l.createRadialGradient(m.x1,m.y1,m.r1,m.x2,m.y2,m.r2)),v=0,g=this.colorStops.length;v<g;v++){var b=this.colorStops[v].color,w=this.colorStops[v].opacity,T=this.colorStops[v].offset;typeof w<"u"&&(b=new t.Color(b).setAlpha(w).toRgba()),u.addColorStop(T,b)}return u}}}),t.util.object.extend(t.Gradient,{fromElement:function(l,u,m,v){var g=parseFloat(m)/(/%$/.test(m)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var b=l.getElementsByTagName("stop"),w,T=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",k=l.getAttribute("gradientTransform")||"",O=[],D,P,F=0,V=0,$;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(w="linear",D=r(l)):(w="radial",D=c(l)),P=b.length;P--;)O.push(f(b[P],g));$=t.parseTransformAttribute(k),a(u,D,v,T),T==="pixels"&&(F=-u.left,V=-u.top);var te=new t.Gradient({id:l.getAttribute("id"),type:w,coords:D,colorStops:O,gradientUnits:T,gradientTransform:$,offsetX:F,offsetY:V});return te}});function a(l,u,m,v){var g,b;Object.keys(u).forEach(function(w){g=u[w],g==="Infinity"?b=1:g==="-Infinity"?b=0:(b=parseFloat(u[w],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(b*=.01,v==="pixels"&&((w==="x1"||w==="x2"||w==="r2")&&(b*=m.viewBoxWidth||m.width),(w==="y1"||w==="y2")&&(b*=m.viewBoxHeight||m.height)))),u[w]=b})}}(),function(){var f=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,c){if(r||(r={}),this.id=t.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){c&&c(this);return}else{var d=this;this.source=t.util.createImage(),t.util.loadImage(r.source,function(a,l){d.source=a,c&&c(d,l)},null,this.crossOrigin)}},toObject:function(r){var c=t.Object.NUM_FRACTION_DIGITS,d,a;return typeof this.source.src=="string"?d=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(d=this.source.toDataURL()),a={type:"pattern",source:d,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,c),offsetY:f(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,a,r),a},toSVG:function(r){var c=typeof this.source=="function"?this.source():this.source,d=c.width/r.width,a=c.height/r.height,l=this.offsetX/r.width,u=this.offsetY/r.height,m="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,u&&(a+=Math.abs(u))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(d=1,l&&(d+=Math.abs(l))),c.src?m=c.src:c.toDataURL&&(m=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+u+'" width="'+d+'" height="'+a+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+m+`"></image>
</pattern>
`},setOptions:function(r){for(var c in r)this[c]=r[c]},toLive:function(r){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":r.createPattern(c,this.repeat)}})}(),function(f){var r=f.fabric||(f.fabric={}),c=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){typeof d=="string"&&(d=this._parseShadow(d));for(var a in d)this[a]=d[a];this.id=r.Object.__uid++},_parseShadow:function(d){var a=d.trim(),l=r.Shadow.reOffsetsAndBlur.exec(a)||[],u=a.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:u.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var a=40,l=40,u=r.Object.NUM_FRACTION_DIGITS,m=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-d.angle)),v=20,g=new r.Color(this.color);return d.width&&d.height&&(a=c((Math.abs(m.x)+this.blur)/d.width,u)*100+v,l=c((Math.abs(m.y)+this.blur)/d.height,u)*100+v),d.flipX&&(m.x*=-1),d.flipY&&(m.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,u)+`"></feGaussianBlur>
	<feOffset dx="`+c(m.x,u)+'" dy="'+c(m.y,u)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},a=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==a[l]&&(d[l]=this[l])},this),d}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var f=t.util.object.extend,r=t.util.getElementOffset,c=t.util.removeFromArray,d=t.util.toFixed,a=t.util.transformPoint,l=t.util.invertTransform,u=t.util.getNodeCanvas,m=t.util.createCanvasElement,v=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(g,b){b||(b={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,b)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,b){var w=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(b),this.interactive||this._initRetinaScaling(),b.overlayImage&&this.setOverlayImage(b.overlayImage,w),b.backgroundImage&&this.setBackgroundImage(b.backgroundImage,w),b.backgroundColor&&this.setBackgroundColor(b.backgroundColor,w),b.overlayColor&&this.setOverlayColor(b.overlayColor,w),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=t.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,b,w){b.setAttribute("width",this.width*g),b.setAttribute("height",this.height*g),w.scale(g,g)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(g,b,w){return this.__setBgOverlayImage("overlayImage",g,b,w)},setBackgroundImage:function(g,b,w){return this.__setBgOverlayImage("backgroundImage",g,b,w)},setOverlayColor:function(g,b){return this.__setBgOverlayColor("overlayColor",g,b)},setBackgroundColor:function(g,b){return this.__setBgOverlayColor("backgroundColor",g,b)},__setBgOverlayImage:function(g,b,w,T){return typeof b=="string"?t.util.loadImage(b,function(k,O){if(k){var D=new t.Image(k,T);this[g]=D,D.canvas=this}w&&w(k,O)},this,T&&T.crossOrigin):(T&&b.setOptions(T),this[g]=b,b&&(b.canvas=this),w&&w(b,!1)),this},__setBgOverlayColor:function(g,b,w){return this[g]=b,this._initGradient(b,g),this._initPattern(b,g,w),this},_createCanvasElement:function(){var g=m();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw v;return g},_initOptions:function(g){var b=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(b.width,10)||0,this.height=this.height||parseInt(b.height,10)||0,this.lowerCanvasEl.style&&(b.width=this.width,b.height=this.height,b.style.width=this.width+"px",b.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=t.util.getById(g)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,b){return this.setDimensions({width:g},b)},setHeight:function(g,b){return this.setDimensions({height:g},b)},setDimensions:function(g,b){var w;b=b||{};for(var T in g)w=g[T],b.cssOnly||(this._setBackstoreDimension(T,g[T]),w+="px",this.hasLostContext=!0),b.backstoreOnly||this._setCssDimension(T,w);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),b.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,b){return this.lowerCanvasEl[g]=b,this.upperCanvasEl&&(this.upperCanvasEl[g]=b),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=b),this[g]=b,this},_setCssDimension:function(g,b){return this.lowerCanvasEl.style[g]=b,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=b),this.wrapperEl&&(this.wrapperEl.style[g]=b),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var b=this._activeObject,w=this.backgroundImage,T=this.overlayImage,k,O,D;for(this.viewportTransform=g,O=0,D=this._objects.length;O<D;O++)k=this._objects[O],k.group||k.setCoords(!0);return b&&b.setCoords(),w&&w.setCoords(!0),T&&T.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,b){var w=g,T=this.viewportTransform.slice(0);g=a(g,l(this.viewportTransform)),T[0]=b,T[3]=b;var k=a(g,T);return T[4]+=w.x-k.x,T[5]+=w.y-k.y,this.setViewportTransform(T)},setZoom:function(g){return this.zoomToPoint(new t.Point(0,0),g),this},absolutePan:function(g){var b=this.viewportTransform.slice(0);return b[4]=-g.x,b[5]=-g.y,this.setViewportTransform(b)},relativePan:function(g){return this.absolutePan(new t.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},b=this.width,w=this.height,T=l(this.viewportTransform);return g.tl=a({x:0,y:0},T),g.br=a({x:b,y:w},T),g.tr=new t.Point(g.br.x,g.tl.y),g.bl=new t.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,b){var w=this.viewportTransform,T=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),t.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._renderObjects(g,b),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),T&&(T.canvas=this,T.shouldCache(),T._transformDone=!0,T.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var b=this.viewportTransform,w=this.clipPath;g.save(),g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),g.globalCompositeOperation="destination-in",w.transform(g),g.scale(1/w.zoomX,1/w.zoomY),g.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),g.restore()},_renderObjects:function(g,b){var w,T;for(w=0,T=b.length;w<T;++w)b[w]&&b[w].render(g)},_renderBackgroundOrOverlay:function(g,b){var w=this[b+"Color"],T=this[b+"Image"],k=this.viewportTransform,O=this[b+"Vpt"];if(!(!w&&!T)){if(w){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=w.toLive?w.toLive(g,this):w,O&&g.transform(k[0],k[1],k[2],k[3],k[4],k[5]),g.transform(1,0,0,1,w.offsetX||0,w.offsetY||0);var D=w.gradientTransform||w.patternTransform;D&&g.transform(D[0],D[1],D[2],D[3],D[4],D[5]),g.fill(),g.restore()}T&&(g.save(),O&&g.transform(k[0],k[1],k[2],k[3],k[4],k[5]),T.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new t.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new t.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var b=this.getCenterPoint();return this._centerObject(g,b)},viewportCenterObject:function(g){var b=this.getVpCenter();return this._centerObject(g,b)},viewportCenterObjectH:function(g){var b=this.getVpCenter();return this._centerObject(g,new t.Point(b.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var b=this.getVpCenter();return this._centerObject(g,new t.Point(g.getCenterPoint().x,b.y))},getVpCenter:function(){var g=this.getCenterPoint(),b=l(this.viewportTransform);return a(g,b)},_centerObject:function(g,b){return g.setPositionByOrigin(b,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,b){var w=this.clipPath,T={version:t.version,objects:this._toObjects(g,b)};return w&&!w.excludeFromExport&&(T.clipPath=this._toObject(this.clipPath,g,b)),f(T,this.__serializeBgOverlay(g,b)),t.util.populateWithProperties(this,T,b),T},_toObjects:function(g,b){return this._objects.filter(function(w){return!w.excludeFromExport}).map(function(w){return this._toObject(w,g,b)},this)},_toObject:function(g,b,w){var T;this.includeDefaultValues||(T=g.includeDefaultValues,g.includeDefaultValues=!1);var k=g[b](w);return this.includeDefaultValues||(g.includeDefaultValues=T),k},__serializeBgOverlay:function(g,b){var w={},T=this.backgroundImage,k=this.overlayImage,O=this.backgroundColor,D=this.overlayColor;return O&&O.toObject?O.excludeFromExport||(w.background=O.toObject(b)):O&&(w.background=O),D&&D.toObject?D.excludeFromExport||(w.overlay=D.toObject(b)):D&&(w.overlay=D),T&&!T.excludeFromExport&&(w.backgroundImage=this._toObject(T,g,b)),k&&!k.excludeFromExport&&(w.overlayImage=this._toObject(k,g,b)),w},svgViewportTransformation:!0,toSVG:function(g,b){g||(g={}),g.reviver=b;var w=[];return this._setSVGPreamble(w,g),this._setSVGHeader(w,g),this.clipPath&&w.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(w,"background"),this._setSVGBgOverlayImage(w,"backgroundImage",b),this._setSVGObjects(w,b),this.clipPath&&w.push(`</g>
`),this._setSVGBgOverlayColor(w,"overlay"),this._setSVGBgOverlayImage(w,"overlayImage",b),w.push("</svg>"),w.join("")},_setSVGPreamble:function(g,b){b.suppressPreamble||g.push('<?xml version="1.0" encoding="',b.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,b){var w=b.width||this.width,T=b.height||this.height,k,O='viewBox="0 0 '+this.width+" "+this.height+'" ',D=t.Object.NUM_FRACTION_DIGITS;b.viewBox?O='viewBox="'+b.viewBox.x+" "+b.viewBox.y+" "+b.viewBox.width+" "+b.viewBox.height+'" ':this.svgViewportTransformation&&(k=this.viewportTransform,O='viewBox="'+d(-k[4]/k[0],D)+" "+d(-k[5]/k[3],D)+" "+d(this.width/k[0],D)+" "+d(this.height/k[3],D)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',w,'" ','height="',T,'" ',O,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(b),`</defs>
`)},createSVGClipPathMarkup:function(g){var b=this.clipPath;return b?(b.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+b.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,b=["background","overlay"].map(function(w){var T=g[w+"Color"];if(T&&T.toLive){var k=g[w+"Vpt"],O=g.viewportTransform,D={width:g.width/(k?O[0]:1),height:g.height/(k?O[3]:1)};return T.toSVG(D,{additionalTransform:k?t.util.matrixToSVG(O):""})}});return b.join("")},createSVGFontFacesMarkup:function(){var g="",b={},w,T,k,O,D,P,F,V,$,te=t.fontPaths,X=[];for(this._objects.forEach(function se(K){X.push(K),K._objects&&K._objects.forEach(se)}),V=0,$=X.length;V<$;V++)if(w=X[V],T=w.fontFamily,!(w.type.indexOf("text")===-1||b[T]||!te[T])&&(b[T]=!0,!!w.styles)){k=w.styles;for(D in k){O=k[D];for(F in O)P=O[F],T=P.fontFamily,!b[T]&&te[T]&&(b[T]=!0)}}for(var Q in b)g+=[`		@font-face {
`,"			font-family: '",Q,`';
`,"			src: url('",te[Q],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,b){var w,T,k,O=this._objects;for(T=0,k=O.length;T<k;T++)w=O[T],!w.excludeFromExport&&this._setSVGObject(g,w,b)},_setSVGObject:function(g,b,w){g.push(b.toSVG(w))},_setSVGBgOverlayImage:function(g,b,w){this[b]&&!this[b].excludeFromExport&&this[b].toSVG&&g.push(this[b].toSVG(w))},_setSVGBgOverlayColor:function(g,b){var w=this[b+"Color"],T=this.viewportTransform,k=this.width,O=this.height;if(w)if(w.toLive){var D=w.repeat,P=t.util.invertTransform(T),F=this[b+"Vpt"],V=F?t.util.matrixToSVG(P):"";g.push('<rect transform="'+V+" translate(",k/2,",",O/2,')"',' x="',w.offsetX-k/2,'" y="',w.offsetY-O/2,'" ','width="',D==="repeat-y"||D==="no-repeat"?w.source.width:k,'" height="',D==="repeat-x"||D==="no-repeat"?w.source.height:O,'" fill="url(#SVGID_'+w.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',w,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var b=this._activeObject,w,T,k;if(g===b&&g.type==="activeSelection")for(k=b._objects,w=k.length;w--;)T=k[w],c(this._objects,T),this._objects.unshift(T);else c(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var b=this._activeObject,w,T,k;if(g===b&&g.type==="activeSelection")for(k=b._objects,w=0;w<k.length;w++)T=k[w],c(this._objects,T),this._objects.push(T);else c(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,b){if(!g)return this;var w=this._activeObject,T,k,O,D,P,F=0;if(g===w&&g.type==="activeSelection")for(P=w._objects,T=0;T<P.length;T++)k=P[T],O=this._objects.indexOf(k),O>0+F&&(D=O-1,c(this._objects,k),this._objects.splice(D,0,k)),F++;else O=this._objects.indexOf(g),O!==0&&(D=this._findNewLowerIndex(g,O,b),c(this._objects,g),this._objects.splice(D,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,b,w){var T,k;if(w)for(T=b,k=b-1;k>=0;--k){var O=g.intersectsWithObject(this._objects[k])||g.isContainedWithinObject(this._objects[k])||this._objects[k].isContainedWithinObject(g);if(O){T=k;break}}else T=b-1;return T},bringForward:function(g,b){if(!g)return this;var w=this._activeObject,T,k,O,D,P,F=0;if(g===w&&g.type==="activeSelection")for(P=w._objects,T=P.length;T--;)k=P[T],O=this._objects.indexOf(k),O<this._objects.length-1-F&&(D=O+1,c(this._objects,k),this._objects.splice(D,0,k)),F++;else O=this._objects.indexOf(g),O!==this._objects.length-1&&(D=this._findNewUpperIndex(g,O,b),c(this._objects,g),this._objects.splice(D,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,b,w){var T,k,O;if(w)for(T=b,k=b+1,O=this._objects.length;k<O;++k){var D=g.intersectsWithObject(this._objects[k])||g.isContainedWithinObject(this._objects[k])||this._objects[k].isContainedWithinObject(g);if(D){T=k;break}}else T=b+1;return T},moveTo:function(g,b){return c(this._objects,g),this._objects.splice(b,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(t.StaticCanvas.prototype,t.Observable),f(t.StaticCanvas.prototype,t.Collection),f(t.StaticCanvas.prototype,t.DataURLExporter),f(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var b=m();if(!b||!b.getContext)return null;var w=b.getContext("2d");if(!w)return null;switch(g){case"setLineDash":return typeof w.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var g=u(this.lowerCanvasEl);return g&&g.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(g){var b=u(this.lowerCanvasEl);return b&&b.createJPEGStream(g)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var r=this.canvas.viewportTransform;f.save(),f.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,r=this.shadow,c=f.contextTop,d=f.getZoom();f&&f._isRetinaScaling()&&(d*=t.devicePixelRatio),c.shadowColor=r.color,c.shadowBlur=r.blur*d,c.shadowOffsetX=r.offsetX*d,c.shadowOffsetY=r.offsetY*d}},needsFullRender:function(){var f=new t.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,r,c){var d=r.midPointFrom(c);return f.quadraticCurveTo(r.x,r.y,d.x,d.y),d},onMouseDown:function(f,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,d=c.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,c[d-2],c[d-1],!0),a.stroke(),a.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var r=new t.Point(f.x,f.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var r=new t.Point(f.x,f.y);return this._addPoint(r)},_render:function(f){var r,c,d=this._points[0],a=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&d.x===a.x&&d.y===a.y){var l=this.width/1e3;d=new t.Point(d.x,d.y),a=new t.Point(a.x,a.y),d.x-=l,a.x+=l}for(f.moveTo(d.x,d.y),r=1,c=this._points.length;r<c;r++)this._drawSegment(f,d,a),d=this._points[r],a=this._points[r+1];f.lineTo(d.x,d.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var r=this.width/1e3;return t.util.getSmoothPathFromPoints(f,r)},_isEmptySVGPath:function(f){var r=t.util.joinPath(f);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var r=new t.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new t.Shadow(this.shadow)),r},decimatePoints:function(f,r){if(f.length<=2)return f;var c=this.canvas.getZoom(),d=Math.pow(r/c,2),a,l=f.length-1,u=f[0],m=[u],v;for(a=1;a<l-1;a++)v=Math.pow(u.x-f[a].x,2)+Math.pow(u.y-f[a].y,2),v>=d&&(u=f[a],m.push(u));return m.push(f[l]),m},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var c=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var r=this.addPoint(f),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,r),c.restore()},dot:function(f,r){f.fillStyle=r.fill,f.beginPath(),f.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,r,c,d=this.points;for(this._saveAndTransform(f),r=0,c=d.length;r<c;r++)this.dot(f,d[r]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,r,c;this.canvas.renderOnAddRemove=!1;var d=[];for(r=0,c=this.points.length;r<c;r++){var a=this.points[r],l=new t.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(l.shadow=new t.Shadow(this.shadow)),d.push(l)}var u=new t.Group(d);u.canvas=this.canvas,this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.fire("path:created",{path:u}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var r=new t.Point(f.x,f.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return r.radius=c,r.fill=d,this.points.push(r),r}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],c=0,d=this.sprayChunks.length;c<d;c++)for(var a=this.sprayChunks[c],l=0,u=a.length;l<u;l++){var m=new t.Rect({width:a[l].width,height:a[l].width,left:a[l].x+1,top:a[l].y+1,originX:"center",originY:"center",fill:this.color});r.push(m)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var v=new t.Group(r);this.shadow&&v.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:v}),this.canvas.add(v),this.canvas.fire("path:created",{path:v}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var r={},c,d,a;for(d=0,a=f.length;d<a;d++)c=f[d].left+""+f[d].top,r[c]||(r[c]=f[d]);var l=[];for(c in r)l.push(r[c]);return l},render:function(f){var r=this.canvas.contextTop,c,d;for(r.fillStyle=this.color,this._saveAndTransform(r),c=0,d=f.length;c<d;c++){var a=f[c];typeof a.opacity<"u"&&(r.globalAlpha=a.opacity),r.fillRect(a.x,a.y,a.width,a.width)}r.restore()},_render:function(){var f=this.canvas.contextTop,r,c;for(f.fillStyle=this.color,this._saveAndTransform(f),r=0,c=this.sprayChunks.length;r<c;r++)this.render(this.sprayChunks[r]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var r,c,d,a=this.width/2,l;for(l=0;l<this.density;l++){r=t.util.getRandomInt(f.x-a,f.x+a),c=t.util.getRandomInt(f.y-a,f.y+a),this.dotWidthVariance?d=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):d=this.dotWidth;var u=new t.Point(r,c);u.width=d,this.randomOpacity&&(u.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(u)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var f=20,r=5,c=t.util.createCanvasElement(),d=c.getContext("2d");return c.width=c.height=f+r,d.fillStyle=this.color,d.beginPath(),d.arc(f/2,f/2,f/2,0,Math.PI*2,!1),d.closePath(),d.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var r=this.callSuper("createPath",f),c=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),r}}),function(){var f=t.util.getPointer,r=t.util.degreesToRadians,c=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(a,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),l,u,m;if(a.length>0&&!this.preserveObjectStacking){u=[],m=[];for(var v=0,g=this._objects.length;v<g;v++)l=this._objects[v],a.indexOf(l)===-1?u.push(l):m.push(l);a.length>1&&(this._activeObject._objects=m),u.push.apply(u,m)}else u=this._objects;return u},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,l){var u=a.calcTransformMatrix(),m=t.util.invertTransform(u),v=this.restorePointerVpt(l);return t.util.transformPoint(v,m)},isTargetTransparent:function(a,l,u){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var m=this._normalizePointer(a,{x:l,y:u}),v=Math.max(a.cacheTranslationX+m.x*a.zoomX,0),g=Math.max(a.cacheTranslationY+m.y*a.zoomY,0),k=t.util.isTransparent(a._cacheContext,Math.round(v),Math.round(g),this.targetFindTolerance);return k}var b=this.contextCache,w=a.selectionBackgroundColor,T=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(b),b.save(),b.transform(T[0],T[1],T[2],T[3],T[4],T[5]),a.render(b),b.restore(),a.selectionBackgroundColor=w;var k=t.util.isTransparent(b,l,u,this.targetFindTolerance);return k},_isSelectionKeyPressed:function(a){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(u){return a[u]===!0}):l=a[this.selectionKey],l},_shouldClearSelection:function(a,l){var u=this.getActiveObjects(),m=this._activeObject;return!l||l&&m&&u.length>1&&u.indexOf(l)===-1&&m!==l&&!this._isSelectionKeyPressed(a)||l&&!l.evented||l&&!l.selectable&&m&&m!==l},_shouldCenterTransform:function(a,l,u){if(a){var m;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?m=this.centeredScaling||a.centeredScaling:l==="rotate"&&(m=this.centeredRotation||a.centeredRotation),m?!u:u}},_getOriginFromCorner:function(a,l){var u={x:a.originX,y:a.originY};return l==="ml"||l==="tl"||l==="bl"?u.x="right":(l==="mr"||l==="tr"||l==="br")&&(u.x="left"),l==="tl"||l==="mt"||l==="tr"?u.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(u.y="top"),u},_getActionFromCorner:function(a,l,u,m){if(!l||!a)return"drag";var v=m.controls[l];return v.getActionName(u,v,m)},_setupCurrentTransform:function(a,l,u){if(l){var m=this.getPointer(a),v=l.__corner,g=l.controls[v],b=u&&v?g.getActionHandler(a,l,g):t.controlsUtils.dragHandler,w=this._getActionFromCorner(u,v,a,l),T=this._getOriginFromCorner(l,v),k=a[this.centeredKey],O={target:l,action:w,actionHandler:b,corner:v,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:m.x-l.left,offsetY:m.y-l.top,originX:T.x,originY:T.y,ex:m.x,ey:m.y,lastX:m.x,lastY:m.y,theta:r(l.angle),width:l.width*l.scaleX,shiftKey:a.shiftKey,altKey:k,original:t.util.saveObjectTransform(l)};this._shouldCenterTransform(l,w,k)&&(O.originX="center",O.originY="center"),O.original.originX=T.x,O.original.originY=T.y,this._currentTransform=O,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var l=this._groupSelector,u=new t.Point(l.ex,l.ey),m=t.util.transformPoint(u,this.viewportTransform),v=new t.Point(l.ex+l.left,l.ey+l.top),g=t.util.transformPoint(v,this.viewportTransform),b=Math.min(m.x,g.x),w=Math.min(m.y,g.y),T=Math.max(m.x,g.x),k=Math.max(m.y,g.y),O=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(b,w,T-b,k-w)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,b+=O,w+=O,T-=O,k-=O,t.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(b,w,T-b,k-w))},findTarget:function(a,l){if(!this.skipTargetFind){var u=!0,m=this.getPointer(a,u),v=this._activeObject,g=this.getActiveObjects(),b,w,T=c(a),k=g.length>1&&!l||g.length===1;if(this.targets=[],k&&v._findTargetCorner(m,T)||g.length>1&&!l&&v===this._searchPossibleTargets([v],m))return v;if(g.length===1&&v===this._searchPossibleTargets([v],m))if(this.preserveObjectStacking)b=v,w=this.targets,this.targets=[];else return v;var O=this._searchPossibleTargets(this._objects,m);return a[this.altSelectionKey]&&O&&b&&O!==b&&(O=b,this.targets=w),O}},_checkTarget:function(a,l,u){if(l&&l.visible&&l.evented&&l.containsPoint(a))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var m=this.isTargetTransparent(l,u.x,u.y);if(!m)return!0}else return!0},_searchPossibleTargets:function(a,l){for(var u,m=a.length,v;m--;){var g=a[m],b=g.group?this._normalizePointer(g.group,l):l;if(this._checkTarget(b,g,l)){u=a[m],u.subTargetCheck&&u instanceof t.Group&&(v=this._searchPossibleTargets(u._objects,l),v&&this.targets.push(v));break}}return u},restorePointerVpt:function(a){return t.util.transformPoint(a,t.util.invertTransform(this.viewportTransform))},getPointer:function(a,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var u=f(a),m=this.upperCanvasEl,v=m.getBoundingClientRect(),g=v.width||0,b=v.height||0,w;(!g||!b)&&("top"in v&&"bottom"in v&&(b=Math.abs(v.top-v.bottom)),"right"in v&&"left"in v&&(g=Math.abs(v.right-v.left))),this.calcOffset(),u.x=u.x-this._offset.left,u.y=u.y-this._offset.top,l||(u=this.restorePointerVpt(u));var T=this.getRetinaScaling();return T!==1&&(u.x/=T,u.y/=T),g===0||b===0?w={width:1,height:1}:w={width:m.width/g,height:m.height/b},{x:u.x*w.width,y:u.y*w.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,u=this.upperCanvasEl;u?u.className="":(u=this._createCanvasElement(),this.upperCanvasEl=u),t.util.addClass(u,"upper-canvas "+a),this.wrapperEl.appendChild(u),this._copyCanvasStyle(l,u),this._applyCanvasStyle(u),this.contextTop=u.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var l=this.width||a.width,u=this.height||a.height;t.util.setStyle(a,{position:"absolute",width:l+"px",height:u+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=l,a.height=u,t.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,l){l.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,l){var u=!1,m=this.getActiveObjects(),v=[],g=[];a.forEach(function(b){m.indexOf(b)===-1&&(u=!0,b.fire("deselected",{e:l,target:b}),g.push(b))}),m.forEach(function(b){a.indexOf(b)===-1&&(u=!0,b.fire("selected",{e:l,target:b}),v.push(b))}),a.length>0&&m.length>0?u&&this.fire("selection:updated",{e:l,selected:v,deselected:g}):m.length>0?this.fire("selection:created",{e:l,selected:v}):a.length>0&&this.fire("selection:cleared",{e:l,deselected:g})},setActiveObject:function(a,l){var u=this.getActiveObjects();return this._setActiveObject(a,l),this._fireSelectionEvents(u,l),this},_setActiveObject:function(a,l){return this._activeObject===a||!this._discardActiveObject(l,a)||a.onSelect({e:l})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,l){var u=this._activeObject;if(u){if(u.onDeselect({e:a,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var l=this.getActiveObjects(),u=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:u,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(l,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){t.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var l=this._activeObject;l&&l._renderControls(a)},_toObject:function(a,l,u){var m=this._realizeGroupTransformOnObject(a),v=this.callSuper("_toObject",a,l,u);return this._unwindGroupTransformOnObject(a,m),v},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],u={};return l.forEach(function(m){u[m]=a[m]}),t.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),u}else return null},_unwindGroupTransformOnObject:function(a,l){l&&a.set(l)},_setSVGObject:function(a,l,u){var m=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",a,l,u),this._unwindGroupTransformOnObject(l,m)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var d in t.StaticCanvas)d!=="prototype"&&(t.Canvas[d]=t.StaticCanvas[d])}(),function(){var f=t.util.addListener,r=t.util.removeListener,c=3,d=2,a=1,l={passive:!1};function u(m,v){return m.button&&m.button===v-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(m,v){var g=this.upperCanvasEl,b=this._getEventPrefix();m(t.window,"resize",this._onResize),m(g,b+"down",this._onMouseDown),m(g,b+"move",this._onMouseMove,l),m(g,b+"out",this._onMouseOut),m(g,b+"enter",this._onMouseEnter),m(g,"wheel",this._onMouseWheel),m(g,"contextmenu",this._onContextMenu),m(g,"dblclick",this._onDoubleClick),m(g,"dragover",this._onDragOver),m(g,"dragenter",this._onDragEnter),m(g,"dragleave",this._onDragLeave),m(g,"drop",this._onDrop),this.enablePointerEvents||m(g,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&v in eventjs&&(eventjs[v](g,"gesture",this._onGesture),eventjs[v](g,"drag",this._onDrag),eventjs[v](g,"orientation",this._onOrientationChange),eventjs[v](g,"shake",this._onShake),eventjs[v](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var m=this._getEventPrefix();r(t.document,m+"up",this._onMouseUp),r(t.document,"touchend",this._onTouchEnd,l),r(t.document,m+"move",this._onMouseMove,l),r(t.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(m,v){this.__onTransformGesture&&this.__onTransformGesture(m,v)},_onDrag:function(m,v){this.__onDrag&&this.__onDrag(m,v)},_onMouseWheel:function(m){this.__onMouseWheel(m)},_onMouseOut:function(m){var v=this._hoveredTarget;this.fire("mouse:out",{target:v,e:m}),this._hoveredTarget=null,v&&v.fire("mouseout",{e:m});var g=this;this._hoveredTargets.forEach(function(b){g.fire("mouse:out",{target:v,e:m}),b&&v.fire("mouseout",{e:m})}),this._hoveredTargets=[]},_onMouseEnter:function(m){!this._currentTransform&&!this.findTarget(m)&&(this.fire("mouse:over",{target:null,e:m}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(m,v){this.__onOrientationChange&&this.__onOrientationChange(m,v)},_onShake:function(m,v){this.__onShake&&this.__onShake(m,v)},_onLongPress:function(m,v){this.__onLongPress&&this.__onLongPress(m,v)},_onDragOver:function(m){m.preventDefault();var v=this._simpleEventHandler("dragover",m);this._fireEnterLeaveEvents(v,m)},_onDrop:function(m){return this._simpleEventHandler("drop:before",m),this._simpleEventHandler("drop",m)},_onContextMenu:function(m){return this.stopContextMenu&&(m.stopPropagation(),m.preventDefault()),!1},_onDoubleClick:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"dblclick"),this._resetTransformEventData(m)},getPointerId:function(m){var v=m.changedTouches;return v?v[0]&&v[0].identifier:this.enablePointerEvents?m.pointerId:-1},_isMainEvent:function(m){return m.isPrimary===!0?!0:m.isPrimary===!1?!1:m.type==="touchend"&&m.touches.length===0?!0:m.changedTouches?m.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(m){m.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(m)),this.__onMouseDown(m),this._resetTransformEventData();var v=this.upperCanvasEl,g=this._getEventPrefix();f(t.document,"touchend",this._onTouchEnd,l),f(t.document,"touchmove",this._onMouseMove,l),r(v,g+"down",this._onMouseDown)},_onMouseDown:function(m){this.__onMouseDown(m),this._resetTransformEventData();var v=this.upperCanvasEl,g=this._getEventPrefix();r(v,g+"move",this._onMouseMove,l),f(t.document,g+"up",this._onMouseUp),f(t.document,g+"move",this._onMouseMove,l)},_onTouchEnd:function(m){if(!(m.touches.length>0)){this.__onMouseUp(m),this._resetTransformEventData(),this.mainTouchId=null;var v=this._getEventPrefix();r(t.document,"touchend",this._onTouchEnd,l),r(t.document,"touchmove",this._onMouseMove,l);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(g.upperCanvasEl,v+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(m){this.__onMouseUp(m),this._resetTransformEventData();var v=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(m)&&(r(t.document,g+"up",this._onMouseUp),r(t.document,g+"move",this._onMouseMove,l),f(v,g+"move",this._onMouseMove,l))},_onMouseMove:function(m){!this.allowTouchScrolling&&m.preventDefault&&m.preventDefault(),this.__onMouseMove(m)},_onResize:function(){this.calcOffset()},_shouldRender:function(m){var v=this._activeObject;return!!v!=!!m||v&&m&&v!==m?!0:(v&&v.isEditing,!1)},__onMouseUp:function(m){var v,g=this._currentTransform,b=this._groupSelector,w=!1,T=!b||b.left===0&&b.top===0;if(this._cacheTransformEventData(m),v=this._target,this._handleEvent(m,"up:before"),u(m,c)){this.fireRightClick&&this._handleEvent(m,"up",c,T);return}if(u(m,d)){this.fireMiddleClick&&this._handleEvent(m,"up",d,T),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(m);return}if(this._isMainEvent(m)){if(g&&(this._finalizeCurrentTransform(m),w=g.actionPerformed),!T){var k=v===this._activeObject;this._maybeGroupObjects(m),w||(w=this._shouldRender(v)||!k&&v===this._activeObject)}var O,D;if(v){if(O=v._findTargetCorner(this.getPointer(m,!0),t.util.isTouchEvent(m)),v.selectable&&v!==this._activeObject&&v.activeOn==="up")this.setActiveObject(v,m),w=!0;else{var P=v.controls[O],F=P&&P.getMouseUpHandler(m,v,P);F&&(D=this.getPointer(m),F(m,g,D.x,D.y))}v.isMoving=!1}if(g&&(g.target!==v||g.corner!==O)){var V=g.target&&g.target.controls[g.corner],$=V&&V.getMouseUpHandler(m,v,P);D=D||this.getPointer(m),$&&$(m,g,D.x,D.y)}this._setCursorFromEvent(m,v),this._handleEvent(m,"up",a,T),this._groupSelector=null,this._currentTransform=null,v&&(v.__corner=0),w?this.requestRenderAll():T||this.renderTop()}},_simpleEventHandler:function(m,v){var g=this.findTarget(v),b=this.targets,w={e:v,target:g,subTargets:b};if(this.fire(m,w),g&&g.fire(m,w),!b)return g;for(var T=0;T<b.length;T++)b[T].fire(m,w);return g},_handleEvent:function(m,v,g,b){var w=this._target,T=this.targets||[],k={e:m,target:w,subTargets:T,button:g||a,isClick:b||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};v==="up"&&(k.currentTarget=this.findTarget(m),k.currentSubTargets=this.targets),this.fire("mouse:"+v,k),w&&w.fire("mouse"+v,k);for(var O=0;O<T.length;O++)T[O].fire("mouse"+v,k)},_finalizeCurrentTransform:function(m){var v=this._currentTransform,g=v.target,b={e:m,target:g,transform:v,action:v.action};g._scaling&&(g._scaling=!1),g.setCoords(),(v.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",b)},_onMouseDownInDrawingMode:function(m){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(m).requestRenderAll();var v=this.getPointer(m);this.freeDrawingBrush.onMouseDown(v,{e:m,pointer:v}),this._handleEvent(m,"down")},_onMouseMoveInDrawingMode:function(m){if(this._isCurrentlyDrawing){var v=this.getPointer(m);this.freeDrawingBrush.onMouseMove(v,{e:m,pointer:v})}this.setCursor(this.freeDrawingCursor),this._handleEvent(m,"move")},_onMouseUpInDrawingMode:function(m){var v=this.getPointer(m);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:m,pointer:v}),this._handleEvent(m,"up")},__onMouseDown:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"down:before");var v=this._target;if(u(m,c)){this.fireRightClick&&this._handleEvent(m,"down",c);return}if(u(m,d)){this.fireMiddleClick&&this._handleEvent(m,"down",d);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(m);return}if(this._isMainEvent(m)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var b=this._shouldRender(v),w=this._shouldGroup(m,v);if(this._shouldClearSelection(m,v)?this.discardActiveObject(m):w&&(this._handleGrouping(m,v),v=this._activeObject),this.selection&&(!v||!v.selectable&&!v.isEditing&&v!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),v){var T=v===this._activeObject;v.selectable&&v.activeOn==="down"&&this.setActiveObject(v,m);var k=v._findTargetCorner(this.getPointer(m,!0),t.util.isTouchEvent(m));if(v.__corner=k,v===this._activeObject&&(k||!w)){this._setupCurrentTransform(m,v,T);var O=v.controls[k],g=this.getPointer(m),D=O&&O.getMouseDownHandler(m,v,O);D&&D(m,this._currentTransform,g.x,g.y)}}this._handleEvent(m,"down"),(b||w)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(m){this._resetTransformEventData(),this._pointer=this.getPointer(m,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(m)||null},_beforeTransform:function(m){var v=this._currentTransform;this.stateful&&v.target.saveState(),this.fire("before:transform",{e:m,transform:v})},__onMouseMove:function(m){this._handleEvent(m,"move:before"),this._cacheTransformEventData(m);var v,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(m);return}if(this._isMainEvent(m)){var b=this._groupSelector;b?(g=this._absolutePointer,b.left=g.x-b.ex,b.top=g.y-b.ey,this.renderTop()):this._currentTransform?this._transformObject(m):(v=this.findTarget(m)||null,this._setCursorFromEvent(m,v),this._fireOverOutEvents(v,m)),this._handleEvent(m,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(m,v){var g=this._hoveredTarget,b=this._hoveredTargets,w=this.targets,T=Math.max(b.length,w.length);this.fireSyntheticInOutEvents(m,v,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var k=0;k<T;k++)this.fireSyntheticInOutEvents(w[k],v,{oldTarget:b[k],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=m,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(m,v){var g=this._draggedoverTarget,b=this._hoveredTargets,w=this.targets,T=Math.max(b.length,w.length);this.fireSyntheticInOutEvents(m,v,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var k=0;k<T;k++)this.fireSyntheticInOutEvents(w[k],v,{oldTarget:b[k],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=m},fireSyntheticInOutEvents:function(m,v,g){var b,w,T=g.oldTarget,k,O,D=T!==m,P=g.canvasEvtIn,F=g.canvasEvtOut;D&&(b={e:v,target:m,previousTarget:T},w={e:v,target:T,nextTarget:m}),O=m&&D,k=T&&D,k&&(F&&this.fire(F,w),T.fire(g.evtOut,w)),O&&(P&&this.fire(P,b),m.fire(g.evtIn,b))},__onMouseWheel:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"wheel"),this._resetTransformEventData()},_transformObject:function(m){var v=this.getPointer(m),g=this._currentTransform;g.reset=!1,g.shiftKey=m.shiftKey,g.altKey=m[this.centeredKey],this._performTransformAction(m,g,v),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(m,v,g){var b=g.x,w=g.y,T=v.action,k=!1,O=v.actionHandler;O&&(k=O(m,v,b,w)),T==="drag"&&k&&(v.target.isMoving=!0,this.setCursor(v.target.moveCursor||this.moveCursor)),v.actionPerformed=v.actionPerformed||k},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(m,v){if(!v)return this.setCursor(this.defaultCursor),!1;var g=v.hoverCursor||this.hoverCursor,b=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,w=(!b||!b.contains(v))&&v._findTargetCorner(this.getPointer(m,!0));w?this.setCursor(this.getCornerCursor(w,v,m)):(v.subTargetCheck&&this.targets.concat().reverse().map(function(T){g=T.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(m,v,g){var b=v.controls[m];return b.cursorStyleHandler(g,b,v)}})}(),function(){var f=Math.min,r=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,d){var a=this._activeObject;return a&&this._isSelectionKeyPressed(c)&&d&&d.selectable&&this.selection&&(a!==d||a.type==="activeSelection")&&!d.onSelect({e:c})},_handleGrouping:function(c,d){var a=this._activeObject;a.__corner||d===a&&(d=this.findTarget(c,!0),!d||!d.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(d,c):this._createActiveSelection(d,c))},_updateActiveSelection:function(c,d){var a=this._activeObject,l=a._objects.slice(0);a.contains(c)?(a.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),d)):(a.addWithUpdate(c),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,d)},_createActiveSelection:function(c,d){var a=this.getActiveObjects(),l=this._createGroup(c);this._hoveredTarget=l,this._setActiveObject(l,d),this._fireSelectionEvents(a,d)},_createGroup:function(c){var d=this._objects,a=d.indexOf(this._activeObject)<d.indexOf(c),l=a?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(c){var d=this._collectObjects(c),a;d.length===1?this.setActiveObject(d[0],c):d.length>1&&(a=new t.ActiveSelection(d.reverse(),{canvas:this}),this.setActiveObject(a,c))},_collectObjects:function(c){for(var d=[],a,l=this._groupSelector.ex,u=this._groupSelector.ey,m=l+this._groupSelector.left,v=u+this._groupSelector.top,g=new t.Point(f(l,m),f(u,v)),b=new t.Point(r(l,m),r(u,v)),w=!this.selectionFullyContained,T=l===m&&u===v,k=this._objects.length;k--&&(a=this._objects[k],!(!(!a||!a.selectable||!a.visible)&&(w&&a.intersectsWithRect(g,b,!0)||a.isContainedWithinRect(g,b,!0)||w&&a.containsPoint(g,null,!0)||w&&a.containsPoint(b,null,!0))&&(d.push(a),T))););return d.length>1&&(d=d.filter(function(O){return!O.onSelect({e:c})})),d},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var r=f.format||"png",c=f.quality||1,d=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(d,f);return t.util.toDataURL(a,r,c)},toCanvasElement:function(f,r){f=f||1,r=r||{};var c=(r.width||this.width)*f,d=(r.height||this.height)*f,a=this.getZoom(),l=this.width,u=this.height,m=a*f,v=this.viewportTransform,g=(v[4]-(r.left||0))*f,b=(v[5]-(r.top||0))*f,w=this.interactive,T=[m,0,0,m,g,b],k=this.enableRetinaScaling,O=t.util.createCanvasElement(),D=this.contextTop;return O.width=c,O.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=T,this.width=c,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(O.getContext("2d"),this._objects),this.viewportTransform=v,this.width=l,this.height=u,this.calcViewportBoundaries(),this.interactive=w,this.enableRetinaScaling=k,this.contextTop=D,O}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(f,r,c){if(f){var d=typeof f=="string"?JSON.parse(f):t.util.object.clone(f),a=this,l=d.clipPath,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(m){a.clear(),a._setBgOverlay(d,function(){l?a._enlivenObjects([l],function(v){a.clipPath=v[0],a.__setupCanvas.call(a,d,m,u,r)}):a.__setupCanvas.call(a,d,m,u,r)})},c),this}},__setupCanvas:function(f,r,c,d){var a=this;r.forEach(function(l,u){a.insertAt(l,u)}),this.renderOnAddRemove=c,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),d&&d()},_setBgOverlay:function(f,r){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){r&&r();return}var d=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",f.backgroundImage,c,d),this.__setBgOverlay("overlayImage",f.overlayImage,c,d),this.__setBgOverlay("backgroundColor",f.background,c,d),this.__setBgOverlay("overlayColor",f.overlay,c,d)},__setBgOverlay:function(f,r,c,d){var a=this;if(!r){c[f]=!0,d&&d();return}f==="backgroundImage"||f==="overlayImage"?t.util.enlivenObjects([r],function(l){a[f]=l[0],c[f]=!0,d&&d()}):this["set"+t.util.string.capitalize(f,!0)](r,function(){c[f]=!0,d&&d()})},_enlivenObjects:function(f,r,c){if(!f||f.length===0){r&&r([]);return}t.util.enlivenObjects(f,function(d){r&&r(d)},null,c)},_toDataURL:function(f,r){this.clone(function(c){r(c.toDataURL(f))})},_toDataURLWithMultiplier:function(f,r,c){this.clone(function(d){c(d.toDataURLWithMultiplier(f,r))})},clone:function(f,r){var c=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(d){d.loadFromJSON(c,function(){f&&f(d)})})},cloneWithoutData:function(f){var r=t.util.createCanvasElement();r.width=this.width,r.height=this.height;var c=new t.Canvas(r);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),f&&f(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):f&&f(c)}}),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.util.object.clone,a=r.util.toFixed,l=r.util.string.capitalize,u=r.util.degreesToRadians,m=!r.isLikelyNode,v=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:m,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var b=r.perfLimitSizeTotal,w=g.width,T=g.height,k=r.maxCacheSideLimit,O=r.minCacheSideLimit;if(w<=k&&T<=k&&w*T<=b)return w<O&&(g.width=O),T<O&&(g.height=O),g;var D=w/T,P=r.util.limitDimsByArea(D,b),F=r.util.capValue,V=F(O,P.x,k),$=F(O,P.y,k);return w>V&&(g.zoomX/=w/V,g.width=V,g.capped=!0),T>$&&(g.zoomY/=T/$,g.height=$,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),b=this._getTransformedDimensions(0,0),w=b.x*g.scaleX/this.scaleX,T=b.y*g.scaleY/this.scaleY;return{width:w+v,height:T+v,zoomX:g.scaleX,zoomY:g.scaleY,x:w,y:T}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var b=g._currentTransform.target,w=g._currentTransform.action;if(this===b&&w.slice&&w.slice(0,5)==="scale")return!1}var T=this._cacheCanvas,k=this._limitCacheSize(this._getCacheCanvasDimensions()),O=r.minCacheSideLimit,D=k.width,P=k.height,F,V,$=k.zoomX,te=k.zoomY,X=D!==this.cacheWidth||P!==this.cacheHeight,Q=this.zoomX!==$||this.zoomY!==te,se=X||Q,K=0,U=0,q=!1;if(X){var Z=this._cacheCanvas.width,L=this._cacheCanvas.height,A=D>Z||P>L,j=(D<Z*.9||P<L*.9)&&Z>O&&L>O;q=A||j,A&&!k.capped&&(D>O||P>O)&&(K=D*.1,U=P*.1)}return this instanceof r.Text&&this.path&&(se=!0,q=!0,K+=this.getHeightOfLine(0)*this.zoomX,U+=this.getHeightOfLine(0)*this.zoomY),se?(q?(T.width=Math.ceil(D+K),T.height=Math.ceil(P+U)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,T.width,T.height)),F=k.x/2,V=k.y/2,this.cacheTranslationX=Math.round(T.width/2-F)+F,this.cacheTranslationY=Math.round(T.height/2-V)+V,this.cacheWidth=D,this.cacheHeight=P,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale($,te),this.zoomX=$,this.zoomY=te,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var b=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,w=this.calcTransformMatrix(!b);g.transform(w[0],w[1],w[2],w[3],w[4],w[5])},toObject:function(g){var b=r.Object.NUM_FRACTION_DIGITS,w={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:a(this.left,b),top:a(this.top,b),width:a(this.width,b),height:a(this.height,b),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,b),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,b),scaleX:a(this.scaleX,b),scaleY:a(this.scaleY,b),angle:a(this.angle,b),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,b),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,b),skewY:a(this.skewY,b)};return this.clipPath&&!this.clipPath.excludeFromExport&&(w.clipPath=this.clipPath.toObject(g),w.clipPath.inverted=this.clipPath.inverted,w.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,w,g),this.includeDefaultValues||(w=this._removeDefaultValues(w)),w},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var b=r.util.getKlass(g.type).prototype,w=b.stateProperties;return w.forEach(function(T){T==="left"||T==="top"||(g[T]===b[T]&&delete g[T],Array.isArray(g[T])&&Array.isArray(b[T])&&g[T].length===0&&b[T].length===0&&delete g[T])}),g},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),b=g.scaleX,w=g.scaleY;if(this.canvas){var T=this.canvas.getZoom(),k=this.canvas.getRetinaScaling();b*=T*k,w*=T*k}return{scaleX:b,scaleY:w}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,b){var w=g==="scaleX"||g==="scaleY",T=this[g]!==b,k=!1;return w&&(b=this._constrainScale(b)),g==="scaleX"&&b<0?(this.flipX=!this.flipX,b*=-1):g==="scaleY"&&b<0?(this.flipY=!this.flipY,b*=-1):g==="shadow"&&b&&!(b instanceof r.Shadow)?b=new r.Shadow(b):g==="dirty"&&this.group&&this.group.set("dirty",b),this[g]=b,T&&(k=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,k&&this.group.set("dirty",!0)):k&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,b){if(g.save(),b.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",b.absolutePositioned){var w=r.util.invertTransform(this.calcTransformMatrix());g.transform(w[0],w[1],w[2],w[3],w[4],w[5])}b.transform(g),g.scale(1/b.zoomX,1/b.zoomY),g.drawImage(b._cacheCanvas,-b.cacheTranslationX,-b.cacheTranslationY),g.restore()},drawObject:function(g,b){var w=this.fill,T=this.stroke;b?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=w,this.stroke=T},_drawClipPath:function(g,b){b&&(b.canvas=this.canvas,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,b))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var b=this.cacheWidth/this.zoomX,w=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-b/2,-w/2,b,w)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var b=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-b.x/2,-b.y/2,b.x,b.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,b){var w=b.stroke;w&&(g.lineWidth=b.strokeWidth,g.lineCap=b.strokeLineCap,g.lineDashOffset=b.strokeDashOffset,g.lineJoin=b.strokeLineJoin,g.miterLimit=b.strokeMiterLimit,w.toLive?w.gradientUnits==="percentage"||w.gradientTransform||w.patternTransform?this._applyPatternForTransformedGradient(g,w):(g.strokeStyle=w.toLive(g,this),this._applyPatternGradientTransform(g,w)):g.strokeStyle=b.stroke)},_setFillStyles:function(g,b){var w=b.fill;w&&(w.toLive?(g.fillStyle=w.toLive(g,this),this._applyPatternGradientTransform(g,b.fill)):g.fillStyle=w)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,b){!b||b.length===0||(1&b.length&&b.push.apply(b,b),g.setLineDash(b))},_renderControls:function(g,b){var w=this.getViewportTransform(),T=this.calcTransformMatrix(),k,O,D;b=b||{},O=typeof b.hasBorders<"u"?b.hasBorders:this.hasBorders,D=typeof b.hasControls<"u"?b.hasControls:this.hasControls,T=r.util.multiplyTransformMatrices(w,T),k=r.util.qrDecompose(T),g.save(),g.translate(k.translateX,k.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(k.angle-=180),g.rotate(u(this.group?k.angle:this.angle)),b.forActiveSelection||this.group?O&&this.drawBordersInGroup(g,k,b):O&&this.drawBorders(g,b),D&&this.drawControls(g,b),g.restore()},_setShadow:function(g){if(this.shadow){var b=this.shadow,w=this.canvas,T,k=w&&w.viewportTransform[0]||1,O=w&&w.viewportTransform[3]||1;b.nonScaling?T={scaleX:1,scaleY:1}:T=this.getObjectScaling(),w&&w._isRetinaScaling()&&(k*=r.devicePixelRatio,O*=r.devicePixelRatio),g.shadowColor=b.color,g.shadowBlur=b.blur*r.browserShadowBlurConstant*(k+O)*(T.scaleX+T.scaleY)/4,g.shadowOffsetX=b.offsetX*k*T.scaleX,g.shadowOffsetY=b.offsetY*O*T.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,b){if(!b||!b.toLive)return{offsetX:0,offsetY:0};var w=b.gradientTransform||b.patternTransform,T=-this.width/2+b.offsetX||0,k=-this.height/2+b.offsetY||0;return b.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,T,k):g.transform(1,0,0,1,T,k),w&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),{offsetX:T,offsetY:k}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var b=this.getObjectScaling();g.scale(1/b.scaleX,1/b.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,b){var w=this._limitCacheSize(this._getCacheCanvasDimensions()),T=r.util.createCanvasElement(),k,O=this.canvas.getRetinaScaling(),D=w.x/this.scaleX/O,P=w.y/this.scaleY/O;T.width=D,T.height=P,k=T.getContext("2d"),k.beginPath(),k.moveTo(0,0),k.lineTo(D,0),k.lineTo(D,P),k.lineTo(0,P),k.closePath(),k.translate(D/2,P/2),k.scale(w.zoomX/this.scaleX/O,w.zoomY/this.scaleY/O),this._applyPatternGradientTransform(k,b),k.fillStyle=b.toLive(g),k.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(O*this.scaleX/w.zoomX,O*this.scaleY/w.zoomY),g.strokeStyle=k.createPattern(T,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var b=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),b=r.util.transformPoint(b,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,b.x+=g.offsetLeft,b.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(b,"center","center")},clone:function(g,b){var w=this.toObject(b);this.constructor.fromObject?this.constructor.fromObject(w,g):r.Object._fromObject("Object",w,g)},cloneAsImage:function(g,b){var w=this.toCanvasElement(b);return g&&g(new r.Image(w)),this},toCanvasElement:function(g){g||(g={});var b=r.util,w=b.saveObjectTransform(this),T=this.group,k=this.shadow,O=Math.abs,D=(g.multiplier||1)*(g.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,g.withoutTransform&&b.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var P=r.util.createCanvasElement(),F=this.getBoundingRect(!0,!0),V=this.shadow,$,te={x:0,y:0},X,Q,se;V&&(X=V.blur,V.nonScaling?$={scaleX:1,scaleY:1}:$=this.getObjectScaling(),te.x=2*Math.round(O(V.offsetX)+X)*O($.scaleX),te.y=2*Math.round(O(V.offsetY)+X)*O($.scaleY)),Q=F.width+te.x,se=F.height+te.y,P.width=Math.ceil(Q),P.height=Math.ceil(se);var K=new r.StaticCanvas(P,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(K.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(K.width/2,K.height/2),"center","center");var U=this.canvas;K.add(this);var q=K.toCanvasElement(D||1,g);return this.shadow=k,this.set("canvas",U),T&&(this.group=T),this.set(w).setCoords(),K._objects=[],K.dispose(),K=null,q},toDataURL:function(g){return g||(g={}),r.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var b=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return b&&this._setOriginToCenter(),this.set("angle",g),b&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,b){b=b||this.canvas.getPointer(g);var w=new r.Point(b.x,b.y),T=this._getLeftTopCoords();return this.angle&&(w=r.util.rotatePoint(w,T,u(-this.angle))),{x:w.x-T.x,y:w.y-T.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),c(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(g,b,w,T){var k=r[g];b=d(b,!0),r.util.enlivenPatterns([b.fill,b.stroke],function(O){typeof O[0]<"u"&&(b.fill=O[0]),typeof O[1]<"u"&&(b.stroke=O[1]),r.util.enlivenObjectEnlivables(b,b,function(){var D=T?new k(b[T],b):new k(b);w&&w(D)})})},r.Object.__uid=0)}(e),function(){var f=t.util.degreesToRadians,r={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(d,a,l,u,m){var v=d.x,g=d.y,b,w,T;return typeof a=="string"?a=r[a]:a-=.5,typeof u=="string"?u=r[u]:u-=.5,b=u-a,typeof l=="string"?l=c[l]:l-=.5,typeof m=="string"?m=c[m]:m-=.5,w=m-l,(b||w)&&(T=this._getTransformedDimensions(),v=d.x+b*T.x,g=d.y+w*T.y),new t.Point(v,g)},translateToCenterPoint:function(d,a,l){var u=this.translateToGivenOrigin(d,a,l,"center","center");return this.angle?t.util.rotatePoint(u,d,f(this.angle)):u},translateToOriginPoint:function(d,a,l){var u=this.translateToGivenOrigin(d,"center","center",a,l);return this.angle?t.util.rotatePoint(u,d,f(this.angle)):u},getCenterPoint:function(){var d=new t.Point(this.left,this.top);return this.translateToCenterPoint(d,this.originX,this.originY)},getPointByOrigin:function(d,a){var l=this.getCenterPoint();return this.translateToOriginPoint(l,d,a)},toLocalPoint:function(d,a,l){var u=this.getCenterPoint(),m,v;return typeof a<"u"&&typeof l<"u"?m=this.translateToGivenOrigin(u,"center","center",a,l):m=new t.Point(this.left,this.top),v=new t.Point(d.x,d.y),this.angle&&(v=t.util.rotatePoint(v,u,-f(this.angle))),v.subtractEquals(m)},setPositionByOrigin:function(d,a,l){var u=this.translateToCenterPoint(d,a,l),m=this.translateToOriginPoint(u,this.originX,this.originY);this.set("left",m.x),this.set("top",m.y)},adjustPosition:function(d){var a=f(this.angle),l=this.getScaledWidth(),u=t.util.cos(a)*l,m=t.util.sin(a)*l,v,g;typeof this.originX=="string"?v=r[this.originX]:v=this.originX-.5,typeof d=="string"?g=r[d]:g=d-.5,this.left+=u*(g-v),this.top+=m*(g-v),this.setCoords(),this.originX=d},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var d=this.getCenterPoint();this.originX="center",this.originY="center",this.left=d.x,this.top=d.y},_resetOrigin:function(){var d=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=d.x,this.top=d.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(l){return[new t.Point(l.tl.x,l.tl.y),new t.Point(l.tr.x,l.tr.y),new t.Point(l.br.x,l.br.y),new t.Point(l.bl.x,l.bl.y)]}var r=t.util,c=r.degreesToRadians,d=r.multiplyTransformMatrices,a=r.transformPoint;r.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,u){return u?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,u){return f(this._getCoords(l,u))},intersectsWithRect:function(l,u,m,v){var g=this.getCoords(m,v),b=t.Intersection.intersectPolygonRectangle(g,l,u);return b.status==="Intersection"},intersectsWithObject:function(l,u,m){var v=t.Intersection.intersectPolygonPolygon(this.getCoords(u,m),l.getCoords(u,m));return v.status==="Intersection"||l.isContainedWithinObject(this,u,m)||this.isContainedWithinObject(l,u,m)},isContainedWithinObject:function(l,u,m){for(var v=this.getCoords(u,m),g=u?l.aCoords:l.lineCoords,b=0,w=l._getImageLines(g);b<4;b++)if(!l.containsPoint(v[b],w))return!1;return!0},isContainedWithinRect:function(l,u,m,v){var g=this.getBoundingRect(m,v);return g.left>=l.x&&g.left+g.width<=u.x&&g.top>=l.y&&g.top+g.height<=u.y},containsPoint:function(l,b,m,v){var g=this._getCoords(m,v),b=b||this._getImageLines(g),w=this._findCrossPoints(l,b);return w!==0&&w%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br,v=this.getCoords(!0,l);return v.some(function(g){return g.x<=m.x&&g.x>=u.x&&g.y<=m.y&&g.y>=u.y})||this.intersectsWithRect(u,m,!0,l)?!0:this._containsCenterOfCanvas(u,m,l)},_containsCenterOfCanvas:function(l,u,m){var v={x:(l.x+u.x)/2,y:(l.y+u.y)/2};return!!this.containsPoint(v,null,!0,m)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var u=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br;if(this.intersectsWithRect(u,m,!0,l))return!0;var v=this.getCoords(!0,l).every(function(g){return(g.x>=m.x||g.x<=u.x)&&(g.y>=m.y||g.y<=u.y)});return v&&this._containsCenterOfCanvas(u,m,l)},_getImageLines:function(l){var u={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return u},_findCrossPoints:function(l,u){var m,v,g,b,w,T=0,k;for(var O in u)if(k=u[O],!(k.o.y<l.y&&k.d.y<l.y)&&!(k.o.y>=l.y&&k.d.y>=l.y)&&(k.o.x===k.d.x&&k.o.x>=l.x?w=k.o.x:(m=0,v=(k.d.y-k.o.y)/(k.d.x-k.o.x),g=l.y-m*l.x,b=k.o.y-v*k.o.x,w=-(g-b)/(m-v)),w>=l.x&&(T+=1),T===2))break;return T},getBoundingRect:function(l,u){var m=this.getCoords(l,u);return r.makeBoundingBoxFromPoints(m)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,u){var m=this.getBoundingRect(u).width/this.getScaledWidth();return this.scale(l/this.width/m)},scaleToHeight:function(l,u){var m=this.getBoundingRect(u).height/this.getScaledHeight();return this.scale(l/this.height/m)},calcLineCoords:function(){var l=this.getViewportTransform(),u=this.padding,m=c(this.angle),v=r.cos(m),g=r.sin(m),b=v*u,w=g*u,T=b+w,k=b-w,O=this.calcACoords(),D={tl:a(O.tl,l),tr:a(O.tr,l),bl:a(O.bl,l),br:a(O.br,l)};return u&&(D.tl.x-=k,D.tl.y-=T,D.tr.x+=T,D.tr.y-=k,D.bl.x-=T,D.bl.y+=k,D.br.x+=k,D.br.y+=T),D},calcOCoords:function(){var l=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),m=this.getViewportTransform(),v=d(m,u),g=d(v,l),g=d(g,[1/m[0],0,0,1/m[3],0,0]),b=this._calculateCurrentDimensions(),w={};return this.forEachControl(function(T,k,O){w[k]=T.positionHandler(b,g,O)}),w},calcACoords:function(){var l=this._calcRotateMatrix(),u=this._calcTranslateMatrix(),m=d(u,l),v=this._getTransformedDimensions(),g=v.x/2,b=v.y/2;return{tl:a({x:-g,y:-b},m),tr:a({x:g,y:-b},m),bl:a({x:-g,y:b},m),br:a({x:g,y:b},m)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var u="_",m="";return!l&&this.group&&(m=this.group.transformMatrixKey(l)+u),m+this.top+u+this.left+u+this.scaleX+u+this.scaleY+u+this.skewX+u+this.skewY+u+this.angle+u+this.originX+u+this.originY+u+this.width+u+this.height+u+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var u=this.calcOwnMatrix();if(l||!this.group)return u;var m=this.transformMatrixKey(l),v=this.matrixCache||(this.matrixCache={});return v.key===m?v.value:(this.group&&(u=d(this.group.calcTransformMatrix(!1),u)),v.key=m,v.value=u,u)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),u=this.ownMatrixCache||(this.ownMatrixCache={});if(u.key===l)return u.value;var m=this._calcTranslateMatrix(),v={angle:this.angle,translateX:m[4],translateY:m[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return u.key=l,u.value=r.composeMatrix(v),u.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,u=this.width+l,m=this.height+l;return{x:u,y:m}},_getTransformedDimensions:function(l,u){typeof l>"u"&&(l=this.skewX),typeof u>"u"&&(u=this.skewY);var m,v,g,b=l===0&&u===0;if(this.strokeUniform?(v=this.width,g=this.height):(m=this._getNonTransformedDimensions(),v=m.x,g=m.y),b)return this._finalizeDimensions(v*this.scaleX,g*this.scaleY);var w=r.sizeAfterTransform(v,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:u});return this._finalizeDimensions(w.x,w.y)},_finalizeDimensions:function(l,u){return this.strokeUniform?{x:l+this.strokeWidth,y:u+this.strokeWidth}:{x:l,y:u}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),u=this._getTransformedDimensions(),m=a(u,l,!0);return m.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(c,d){if(d){if(d.toLive)return c+": url(#SVGID_"+d.id+"); ";var a=new t.Color(d),l=c+": "+a.toRgb()+"; ",u=a.getAlpha();return u!==1&&(l+=c+"-opacity: "+u.toString()+"; "),l}else return c+": none; "}var r=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var d=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",u=this.strokeDashOffset?this.strokeDashOffset:"0",m=this.strokeLineCap?this.strokeLineCap:"butt",v=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",b=typeof this.opacity<"u"?this.opacity:"1",w=this.visible?"":" visibility: hidden;",T=c?"":this.getSvgFilter(),k=f("fill",this.fill),O=f("stroke",this.stroke);return[O,"stroke-width: ",a,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",m,"; ","stroke-dashoffset: ",u,"; ","stroke-linejoin: ",v,"; ","stroke-miterlimit: ",g,"; ",k,"fill-rule: ",d,"; ","opacity: ",b,";",T,w].join("")},getSvgSpanStyles:function(c,d){var a="; ",u=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+a:"",l=c.strokeWidth?"stroke-width: "+c.strokeWidth+a:"",u=u,m=c.fontSize?"font-size: "+c.fontSize+"px"+a:"",v=c.fontStyle?"font-style: "+c.fontStyle+a:"",g=c.fontWeight?"font-weight: "+c.fontWeight+a:"",b=c.fill?f("fill",c.fill):"",w=c.stroke?f("stroke",c.stroke):"",T=this.getSvgTextDecoration(c),k=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return T&&(T="text-decoration: "+T+a),[w,l,u,m,v,g,T,b,k,d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(d){return c[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,d){var a=c?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+t.util.matrixToSVG(a);return l+(d||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var d=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,d),'" y="',r(-this.height/2,d),'" width="',r(this.width,d),'" height="',r(this.height,d),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,d){d=d||{};var a=d.reviver,l=d.additionalTransform||"",u=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),m=c.indexOf("COMMON_PARTS");return c[m]=u,a?a(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,d){d=d||{};var a=d.noStyle,l=d.reviver,u=a?"":'style="'+this.getSvgStyles()+'" ',m=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",v=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",b=v&&v.absolutePositioned,w=this.stroke,T=this.fill,k=this.shadow,O,D=[],P,F=c.indexOf("COMMON_PARTS"),V=d.additionalTransform;return v&&(v.clipPathId="CLIPPATH_"+t.Object.__uid++,P='<clipPath id="'+v.clipPathId+`" >
`+v.toClipPathSVG(l)+`</clipPath>
`),b&&D.push("<g ",m,this.getSvgCommons(),` >
`),D.push("<g ",this.getSvgTransform(!1),b?"":m+this.getSvgCommons(),` >
`),O=[u,g,a?"":this.addPaintOrder()," ",V?'transform="'+V+'" ':""].join(""),c[F]=O,T&&T.toLive&&D.push(T.toSVG(this)),w&&w.toLive&&D.push(w.toSVG(this)),k&&D.push(k.toSVG(this)),v&&D.push(P),D.push(c.join("")),D.push(`</g>
`),b&&D.push(`</g>
`),l?l(D.join("")):D.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=t.util.object.extend,r="stateProperties";function c(a,l,u){var m={},v=!0;u.forEach(function(g){m[g]=a[g]}),f(a[l],m,v)}function d(a,l,u){if(a===l)return!0;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(var m=0,v=a.length;m<v;m++)if(!d(a[m],l[m]))return!1;return!0}else if(a&&typeof a=="object"){var g=Object.keys(a),b;if(!l||typeof l!="object"||!u&&g.length!==Object.keys(l).length)return!1;for(var m=0,v=g.length;m<v;m++)if(b=g[m],!(b==="canvas"||b==="group")&&!d(a[b],l[b]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(a){a=a||r;var l="_"+a;return Object.keys(this[l]).length<this[a].length?!0:!d(this[l],this,!0)},saveState:function(a){var l=a&&a.propertySet||r,u="_"+l;return this[u]?(c(this,u,this[l]),a&&a.stateProperties&&c(this,u,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var l=a.propertySet||r;return a.propertySet=l,this["_"+l]={},this.saveState(a),this}})}(),function(){var f=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(r,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d=r.x,a=r.y,l,u,m=Object.keys(this.oCoords),v=m.length-1,g;for(this.__corner=0;v>=0;v--)if(g=m[v],!!this.isControlVisible(g)&&(u=this._getImageLines(c?this.oCoords[g].touchCorner:this.oCoords[g].corner),l=this._findCrossPoints({x:d,y:a},u),l!==0&&l%2===1))return this.__corner=g,g;return!1},forEachControl:function(r){for(var c in this.controls)r(this.controls[c],c,this)},_setCornerCoords:function(){var r=this.oCoords;for(var c in r){var d=this.controls[c];r[c].corner=d.calcCornerCoords(this.angle,this.cornerSize,r[c].x,r[c].y,!1),r[c].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,r[c].x,r[c].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var c=this.getCenterPoint(),d=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return r.translate(c.x,c.y),r.scale(1/a[0],1/a[3]),r.rotate(f(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-d.x/2,-d.y/2,d.x,d.y),r.restore(),this},drawBorders:function(r,c){c=c||{};var d=this._calculateCurrentDimensions(),a=this.borderScaleFactor,l=d.x+a,u=d.y+a,m=typeof c.hasControls<"u"?c.hasControls:this.hasControls,v=!1;return r.save(),r.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(r,c.borderDashArray||this.borderDashArray),r.strokeRect(-l/2,-u/2,l,u),m&&(r.beginPath(),this.forEachControl(function(g,b,w){g.withConnection&&g.getVisibility(w,b)&&(v=!0,r.moveTo(g.x*l,g.y*u),r.lineTo(g.x*l+g.offsetX,g.y*u+g.offsetY))}),v&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,c,d){d=d||{};var a=t.util.sizeAfterTransform(this.width,this.height,c),l=this.strokeWidth,u=this.strokeUniform,m=this.borderScaleFactor,v=a.x+l*(u?this.canvas.getZoom():c.scaleX)+m,g=a.y+l*(u?this.canvas.getZoom():c.scaleY)+m;return r.save(),this._setLineDash(r,d.borderDashArray||this.borderDashArray),r.strokeStyle=d.borderColor||this.borderColor,r.strokeRect(-v/2,-g/2,v,g),r.restore(),this},drawControls:function(r,c){c=c||{},r.save();var d=this.canvas.getRetinaScaling(),a,l;return r.setTransform(d,0,0,d,0,0),r.strokeStyle=r.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(u,m,v){l=v.oCoords[m],u.getVisibility(v,m)&&(a&&(l=t.util.transformPoint(l,a)),u.render(r,l.x,l.y,c,v))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=c,this},setControlsVisibility:function(r){r||(r={});for(var c in r)this.setControlVisible(c,r[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,r){r=r||{};var c=function(){},d=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(u){f.set("left",u),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),d()}})},fxCenterObjectV:function(f,r){r=r||{};var c=function(){},d=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(u){f.set("top",u),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),d()}})},fxRemove:function(f,r){r=r||{};var c=function(){},d=r.onComplete||c,a=r.onChange||c,l=this;return t.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(u){f.set("opacity",u),l.requestRenderAll(),a()},onComplete:function(){l.remove(f),d()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],r,c,d=[];for(r in arguments[0])f.push(r);for(var a=0,l=f.length;a<l;a++)r=f[a],c=a!==l-1,d.push(this._animate(r,arguments[0][r],arguments[1],c));return d}else return this._animate.apply(this,arguments)},_animate:function(f,r,c,d){var a=this,l;r=r.toString(),c?c=t.util.object.clone(c):c={},~f.indexOf(".")&&(l=f.split("."));var u=a.colorProperties.indexOf(f)>-1||l&&a.colorProperties.indexOf(l[1])>-1,m=l?this.get(l[0])[l[1]]:this.get(f);"from"in c||(c.from=m),u||(~r.indexOf("=")?r=m+parseFloat(r.replace("=","")):r=parseFloat(r));var v={target:this,startValue:c.from,endValue:r,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(g,b,w){return c.abort.call(a,g,b,w)},onChange:function(g,b,w){l?a[l[0]][l[1]]=g:a.set(f,g),!d&&c.onChange&&c.onChange(g,b,w)},onComplete:function(g,b,w){d||(a.setCoords(),c.onComplete&&c.onComplete(g,b,w))}};return u?t.util.animateColor(v.startValue,v.endValue,v.duration,v):t.util.animate(v)}}),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,m){u||(u=[0,0,0,0]),this.callSuper("initialize",m),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(m)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,m){return this.callSuper("_set",u,m),typeof a[u]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){u.beginPath();var m=this.calcLinePoints();u.moveTo(m.x1,m.y1),u.lineTo(m.x2,m.y2),u.lineWidth=this.strokeWidth;var v=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=v},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return c(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,m=this.y1<=this.y2?-1:1,v=u*this.width*.5,g=m*this.height*.5,b=u*this.width*-.5,w=m*this.height*-.5;return{x1:v,x2:b,y1:g,y2:w}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(u,m,v){v=v||{};var g=r.parseAttributes(u,r.Line.ATTRIBUTE_NAMES),b=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];m(new r.Line(b,c(g,v)))},r.Line.fromObject=function(u,m){function v(b){delete b.points,m&&m(b)}var g=d(u,!0);g.points=[u.x1,u.y1,u.x2,u.y2],r.Object._fromObject("Line",g,v,"points")};function l(u,m){var v=u.origin,g=u.axis1,b=u.axis2,w=u.dimension,T=m.nearest,k=m.center,O=m.farthest;return function(){switch(this.get(v)){case T:return Math.min(this.get(g),this.get(b));case k:return Math.min(this.get(g),this.get(b))+.5*this.get(w);case O:return Math.max(this.get(g),this.get(b))}}}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,l){return this.callSuper("_set",a,l),a==="radius"&&this.setRadius(l),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,l=0,u=0,m=(this.endAngle-this.startAngle)%360;if(m===0)a=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+u+'" ','r="',this.radius,`" />
`];else{var v=c(this.startAngle),g=c(this.endAngle),b=this.radius,w=r.util.cos(v)*b,T=r.util.sin(v)*b,k=r.util.cos(g)*b,O=r.util.sin(g)*b,D=m>180?"1":"0";a=['<path d="M '+w+" "+T," A "+b+" "+b," 0 ",+D+" 1"," "+k+" "+O,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(a,l){var u=r.parseAttributes(a,r.Circle.ATTRIBUTE_NAMES);if(!d(u))throw new Error("value of `r` attribute is required and can not be negative");u.left=(u.left||0)-u.radius,u.top=(u.top||0)-u.radius,l(new r.Circle(u))};function d(a){return"radius"in a&&a.radius>=0}r.Circle.fromObject=function(a,l){r.Object._fromObject("Circle",a,l)}}(e),function(f){var r=f.fabric||(f.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(c){var d=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-d,a),c.lineTo(0,-a),c.lineTo(d,a),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,d=this.height/2,a=[-c+" "+d,"0 "+-d,c+" "+d].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),r.Triangle.fromObject=function(c,d){return r.Object._fromObject("Triangle",c,d)}}(e),function(f){var r=f.fabric||(f.fabric={}),c=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,a){switch(this.callSuper("_set",d,a),d){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,c,!1),d.restore(),this._renderPaintInOrder(d)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(d,a){var l=r.parseAttributes(d,r.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,a(new r.Ellipse(l))},r.Ellipse.fromObject=function(d,a){r.Object._fromObject("Ellipse",d,a)}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var a=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,u=this.width,m=this.height,v=-this.width/2,g=-this.height/2,b=a!==0||l!==0,w=1-.5522847498;d.beginPath(),d.moveTo(v+a,g),d.lineTo(v+u-a,g),b&&d.bezierCurveTo(v+u-w*a,g,v+u,g+w*l,v+u,g+l),d.lineTo(v+u,g+m-l),b&&d.bezierCurveTo(v+u,g+m-w*l,v+u-w*a,g+m,v+u-a,g+m),d.lineTo(v+a,g+m),b&&d.bezierCurveTo(v+w*a,g+m,v,g+m-w*l,v,g+m-l),d.lineTo(v,g+l),b&&d.bezierCurveTo(v,g+w*l,v+w*a,g,v+a,g),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){var d=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',d,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(d,a,l){if(!d)return a(null);l=l||{};var u=r.parseAttributes(d,r.Rect.ATTRIBUTE_NAMES);u.left=u.left||0,u.top=u.top||0,u.height=u.height||0,u.width=u.width||0;var m=new r.Rect(c(l?r.util.object.clone(l):{},u));m.visible=m.visible&&m.width>0&&m.height>0,a(m)},r.Rect.fromObject=function(d,a){return r.Object._fromObject("Rect",d,a)}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.util.array.min,a=r.util.array.max,l=r.util.toFixed,u=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(m,v){v=v||{},this.points=m||[],this.callSuper("initialize",v),this._setPositionDimensions(v)},_projectStrokeOnPoints:function(){return u(this.points,this,!0)},_setPositionDimensions:function(m){var v=this._calcDimensions(m),g,b=this.exactBoundingBox?this.strokeWidth:0;this.width=v.width-b,this.height=v.height-b,m.fromSVG||(g=this.translateToGivenOrigin({x:v.left-this.strokeWidth/2+b/2,y:v.top-this.strokeWidth/2+b/2},"left","top",this.originX,this.originY)),typeof m.left>"u"&&(this.left=m.fromSVG?v.left:g.x),typeof m.top>"u"&&(this.top=m.fromSVG?v.top:g.y),this.pathOffset={x:v.left+this.width/2+b/2,y:v.top+this.height/2+b/2}},_calcDimensions:function(){var m=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,v=d(m,"x")||0,g=d(m,"y")||0,b=a(m,"x")||0,w=a(m,"y")||0,T=b-v,k=w-g;return{left:v,top:g,width:T,height:k}},toObject:function(m){return c(this.callSuper("toObject",m),{points:this.points.concat()})},_toSVG:function(){for(var m=[],v=this.pathOffset.x,g=this.pathOffset.y,b=r.Object.NUM_FRACTION_DIGITS,w=0,T=this.points.length;w<T;w++)m.push(l(this.points[w].x-v,b),",",l(this.points[w].y-g,b)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',m.join(""),`" />
`]},commonRender:function(m){var v,g=this.points.length,b=this.pathOffset.x,w=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;m.beginPath(),m.moveTo(this.points[0].x-b,this.points[0].y-w);for(var T=0;T<g;T++)v=this.points[T],m.lineTo(v.x-b,v.y-w);return!0},_render:function(m){this.commonRender(m)&&this._renderPaintInOrder(m)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(m){return function(v,g,b){if(!v)return g(null);b||(b={});var w=r.parsePointsAttribute(v.getAttribute("points")),T=r.parseAttributes(v,r[m].ATTRIBUTE_NAMES);T.fromSVG=!0,g(new r[m](w,c(T,b)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(m,v){return r.Object._fromObject("Polyline",m,v,"points")}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(d,a){r.Object._fromObject("Polygon",d,a,"points")}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.array.min,d=r.util.array.max,a=r.util.object.extend,l=r.util.object.clone,u=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(m,v){v=l(v||{}),delete v.path,this.callSuper("initialize",v),this._setPath(m||[],v)},_setPath:function(m,v){this.path=r.util.makePathSimpler(Array.isArray(m)?m:r.util.parsePath(m)),r.Polyline.prototype._setPositionDimensions.call(this,v||{})},_renderPathCommands:function(m){var v,g=0,b=0,w=0,T=0,k=0,O=0,D=-this.pathOffset.x,P=-this.pathOffset.y;m.beginPath();for(var F=0,V=this.path.length;F<V;++F)switch(v=this.path[F],v[0]){case"L":w=v[1],T=v[2],m.lineTo(w+D,T+P);break;case"M":w=v[1],T=v[2],g=w,b=T,m.moveTo(w+D,T+P);break;case"C":w=v[5],T=v[6],k=v[3],O=v[4],m.bezierCurveTo(v[1]+D,v[2]+P,k+D,O+P,w+D,T+P);break;case"Q":m.quadraticCurveTo(v[1]+D,v[2]+P,v[3]+D,v[4]+P),w=v[3],T=v[4],k=v[1],O=v[2];break;case"z":case"Z":w=g,T=b,m.closePath();break}},_render:function(m){this._renderPathCommands(m),this._renderPaintInOrder(m)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(m){return a(this.callSuper("toObject",m),{path:this.path.map(function(v){return v.slice()})})},toDatalessObject:function(m){var v=this.toObject(["sourcePath"].concat(m));return v.sourcePath&&delete v.path,v},_toSVG:function(){var m=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',m,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var m=r.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,m)+", "+u(-this.pathOffset.y,m)+")"},toClipPathSVG:function(m){var v=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:v})},toSVG:function(m){var v=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:v})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var m=[],v=[],g,b=0,w=0,T=0,k=0,O,D=0,P=this.path.length;D<P;++D){switch(g=this.path[D],g[0]){case"L":T=g[1],k=g[2],O=[];break;case"M":T=g[1],k=g[2],b=T,w=k,O=[];break;case"C":O=r.util.getBoundsOfCurve(T,k,g[1],g[2],g[3],g[4],g[5],g[6]),T=g[5],k=g[6];break;case"Q":O=r.util.getBoundsOfCurve(T,k,g[1],g[2],g[1],g[2],g[3],g[4]),T=g[3],k=g[4];break;case"z":case"Z":T=b,k=w;break}O.forEach(function(se){m.push(se.x),v.push(se.y)}),m.push(T),v.push(k)}var F=c(m)||0,V=c(v)||0,$=d(m)||0,te=d(v)||0,X=$-F,Q=te-V;return{left:F,top:V,width:X,height:Q}}}),r.Path.fromObject=function(m,v){if(typeof m.sourcePath=="string"){var g=m.sourcePath;r.loadSVGFromURL(g,function(b){var w=b[0];w.setOptions(m),m.clipPath?r.util.enlivenObjects([m.clipPath],function(T){w.clipPath=T[0],v&&v(w)}):v&&v(w)})}else r.Object._fromObject("Path",m,v,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(m,v,g){var b=r.parseAttributes(m,r.Path.ATTRIBUTE_NAMES);b.fromSVG=!0,v(new r.Path(b.d,a(b,g)))}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.array.min,d=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,l,u){l=l||{},this._objects=[],u&&this.callSuper("initialize",l),this._objects=a||[];for(var m=this._objects.length;m--;)this._objects[m].group=this;if(u)this._updateObjectsACoords();else{var v=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),v||this._calcBounds(),this._updateObjectsCoords(v),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,l=this._objects.length;l--;)this._objects[l].setCoords(a)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),u=this._objects.length;u--;)this._updateObjectCoords(this._objects[u],l)},_updateObjectCoords:function(a,l){var u=a.left,m=a.top,v=!0;a.set({left:u-l.x,top:m-l.y}),a.group=this,a.setCoords(v)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var l=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),a&&(l&&r.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,l){var u=this._objects.length;if(this.useSetOnGroup)for(;u--;)this._objects[u].setOnGroup(a,l);if(a==="canvas")for(;u--;)this._objects[u]._set(a,l);r.Object.prototype._set.call(this,a,l)},toObject:function(a){var l=this.includeDefaultValues,u=this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){var g=v.includeDefaultValues;v.includeDefaultValues=l;var b=v.toObject(a);return v.includeDefaultValues=g,b}),m=r.Object.prototype.toObject.call(this,a);return m.objects=u,m},toDatalessObject:function(a){var l,u=this.sourcePath;if(u)l=u;else{var m=this.includeDefaultValues;l=this._objects.map(function(g){var b=g.includeDefaultValues;g.includeDefaultValues=m;var w=g.toDatalessObject(a);return g.includeDefaultValues=b,w})}var v=r.Object.prototype.toDatalessObject.call(this,a);return v.objects=l,v},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=r.Object.prototype.shouldCache.call(this);if(a){for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,l=this._objects.length;a<l;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var l=0,u=this._objects.length;l<u;l++)this._objects[l].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var l=0,u=this._objects.length;l<u;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var m=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-v/2,m,v)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(l){r.util.addTransformToObject(l,a),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,l=this.canvas;this._objects=[];var u=this.toObject();delete u.objects;var m=new r.ActiveSelection([]);return m.set(u),m.type="activeSelection",l.remove(this),a.forEach(function(v){v.group=m,v.dirty=!0,l.add(v)}),m.canvas=l,m._objects=a,l._activeObject=m,m.setCoords(),m}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(l){l.setCoords(a)}),this},_calcBounds:function(a){for(var l=[],u=[],m,v,g,b=["tr","br","bl","tl"],w=0,T=this._objects.length,k,O=b.length;w<T;++w){for(m=this._objects[w],g=m.calcACoords(),k=0;k<O;k++)v=b[k],l.push(g[v].x),u.push(g[v].y);m.aCoords=g}this._getBounds(l,u,a)},_getBounds:function(a,l,u){var m=new r.Point(c(a),c(l)),v=new r.Point(d(a),d(l)),g=m.y||0,b=m.x||0,w=v.x-m.x||0,T=v.y-m.y||0;this.width=w,this.height=T,u||this.setPositionByOrigin({x:b,y:g},"left","top")},_toSVG:function(a){for(var l=["<g ","COMMON_PARTS",` >
`],u=0,m=this._objects.length;u<m;u++)l.push("		",this._objects[u].toSVG(a));return l.push(`</g>
`),l},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),l].join("")},toClipPathSVG:function(a){for(var l=[],u=0,m=this._objects.length;u<m;u++)l.push("	",this._objects[u].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(l,{reviver:a})}}),r.Group.fromObject=function(a,l){var u=a.objects,m=r.util.object.clone(a,!0);if(delete m.objects,typeof u=="string"){r.loadSVGFromURL(u,function(v){var g=r.util.groupSVGElements(v,a,u),b=m.clipPath;delete m.clipPath,g.set(m),b?r.util.enlivenObjects([b],function(w){g.clipPath=w[0],l&&l(g)}):l&&l(g)});return}r.util.enlivenObjects(u,function(v){r.util.enlivenObjectEnlivables(a,m,function(){l&&l(new r.Group(v,m,!0))})})})}(e),function(f){var r=f.fabric||(f.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(c,d){d=d||{},this._objects=c||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var d=r.Object.prototype.toObject.call(this),a=new r.Group([]);if(delete d.type,a.set(d),c.forEach(function(u){u.canvas.remove(u),u.group=a}),a._objects=c,!this.canvas)return a;var l=this.canvas;return l.add(a),l._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,d,a){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,d),a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var l=0,u=this._objects.length;l<u;l++)this._objects[l]._renderControls(c,a);c.restore()}}),r.ActiveSelection.fromObject=function(c,d){r.util.enlivenObjects(c.objects,function(a){delete c.objects,d&&d(new r.ActiveSelection(a,c,!0))})})}(e),function(f){var r=t.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,d){d||(d={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",d),this._initElement(c,d)},getElement:function(){return this._element||{}},setElement:function(c,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var d=t.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var d=this.width/2,a=this.height/2;c.beginPath(),c.moveTo(-d,-a),c.lineTo(d,-a),c.lineTo(d,a),c.lineTo(-d,a),c.lineTo(-d,-a),c.closePath()}},toObject:function(c){var d=[];this.filters.forEach(function(l){l&&d.push(l.toObject())});var a=r(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],d=[],a,l=this._element,u=-this.width/2,m=-this.height/2,v="",g="";if(!l)return[];if(this.hasCrop()){var b=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+b+`">
`,'	<rect x="'+u+'" y="'+m+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),v=' clip-path="url(#imageCrop_'+b+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),d.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',u-this.cropX,'" y="',m-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,g,'"',v,`></image>
`),this.stroke||this.strokeDashArray){var w=this.fill;this.fill=null,a=["	<rect ",'x="',u,'" y="',m,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=w}return this.paintFirst!=="fill"?c=c.concat(a,d):c=c.concat(d,a),c},getSrc:function(c){var d=c?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(c,d,a){return t.util.loadImage(c,function(l,u){this.setElement(l,a),this._setWidthHeight(),d&&d(this,u)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,d=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),l=a.scaleX,u=a.scaleY,m=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||l>d&&u>d){this._element=m,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=u;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var v=t.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,b=m.width,w=m.height;v.width=b,v.height=w,this._element=v,this._lastScaleX=c.scaleX=l,this._lastScaleY=c.scaleY=u,t.filterBackend.applyFilters([c],m,b,w,this._element,g),this._filterScalingX=v.width/this._originalElement.width,this._filterScalingY=v.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(m){return m&&!m.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,a=d.naturalWidth||d.width,l=d.naturalHeight||d.height;if(this._element===this._originalElement){var u=t.util.createCanvasElement();u.width=a,u.height=l,this._element=u,this._filteredEl=u}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,l),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,a,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){t.util.setImageSmoothing(c,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var d=this._element;if(d){var a=this._filterScalingX,l=this._filterScalingY,u=this.width,m=this.height,v=Math.min,g=Math.max,b=g(this.cropX,0),w=g(this.cropY,0),T=d.naturalWidth||d.width,k=d.naturalHeight||d.height,O=b*a,D=w*l,P=v(u*a,T-O),F=v(m*l,k-D),V=-u/2,$=-m/2,te=v(u,T/a-b),X=v(m,k/l-w);d&&c.drawImage(d,O,D,P,F,V,$,te,X)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,d){this.setElement(t.util.getById(c),d),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,d){c&&c.length?t.util.enlivenObjects(c,function(a){d&&d(a)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(c){c||(c={});var d=this.getElement();this.width=c.width||d.naturalWidth||d.width||0,this.height=c.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),d=this._element.width,a=this._element.height,l=1,u=1,m=0,v=0,g=0,b=0,w,T=this.width,k=this.height,O={width:T,height:k};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(l=u=t.util.findScaleToFit(this._element,O),w=(T-d*l)/2,c.alignX==="Min"&&(m=-w),c.alignX==="Max"&&(m=w),w=(k-a*u)/2,c.alignY==="Min"&&(v=-w),c.alignY==="Max"&&(v=w)),c.meetOrSlice==="slice"&&(l=u=t.util.findScaleToCover(this._element,O),w=d-T/l,c.alignX==="Mid"&&(g=w/2),c.alignX==="Max"&&(g=w),w=a-k/u,c.alignY==="Mid"&&(b=w/2),c.alignY==="Max"&&(b=w),d=T/l,a=k/u)):(l=T/d,u=k/a),{width:d,height:a,scaleX:l,scaleY:u,offsetLeft:m,offsetTop:v,cropX:g,cropY:b}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,d){var a=t.util.object.clone(c);t.util.loadImage(a.src,function(l,u){if(u){d&&d(null,!0);return}t.Image.prototype._initFilters.call(a,a.filters,function(m){a.filters=m||[],t.Image.prototype._initFilters.call(a,[a.resizeFilter],function(v){a.resizeFilter=v[0],t.util.enlivenObjectEnlivables(a,a,function(){var g=new t.Image(l,a);d(g,!1)})})})},null,a.crossOrigin)},t.Image.fromURL=function(c,d,a){t.util.loadImage(c,function(l,u){d&&d(new t.Image(l,a),u)},null,a&&a.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(c,d,a){var l=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(l["xlink:href"],d,r(a?t.util.object.clone(a):{},l))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var r=function(){},c=f.onComplete||r,d=f.onChange||r,a=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){a.rotate(l),d()},onComplete:function(){a.setCoords(),c()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(c,d){var a="precision "+d+` float;
void main(){}`,l=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(l,a),c.compileShader(l),!!c.getShaderParameter(l,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),a=d.getContext("webgl")||d.getContext("experimental-webgl"),l=!1;if(a){t.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),l=t.maxTextureSize>=c;for(var u=["highp","mediump","lowp"],m=0;m<3;m++)if(f(a,u[m])){t.webGlPrecision=u[m];break}}return this.isSupported=l,l},t.WebglFilterBackend=r;function r(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(c,d){this.dispose(),this.createWebGLCanvas(c,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,d)},chooseFastestCopyGLTo2DMethod:function(c,d){var a=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var u=typeof ArrayBuffer<"u",m=typeof Uint8ClampedArray<"u";if(a&&l&&u&&m){var v=t.util.createCanvasElement(),g=new ArrayBuffer(c*d*4);if(t.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=S;return}var b={imageBuffer:g,destinationWidth:c,destinationHeight:d,targetCanvas:v},w,T,k;v.width=c,v.height=d,w=window.performance.now(),x.call(b,this.gl,b),T=window.performance.now()-w,w=window.performance.now(),S.call(b,this.gl,b),k=window.performance.now()-w,T>k?(this.imageBuffer=g,this.copyGLTo2D=S):this.copyGLTo2D=x}},createWebGLCanvas:function(c,d){var a=t.util.createCanvasElement();a.width=c,a.height=d;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},u=a.getContext("webgl",l);u||(u=a.getContext("experimental-webgl",l)),u&&(u.clearColor(0,0,0,0),this.canvas=a,this.gl=u)},applyFilters:function(c,d,a,l,u,m){var v=this.gl,g;m&&(g=this.getCachedTexture(m,d));var b={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:a,sourceHeight:l,destinationWidth:a,destinationHeight:l,context:v,sourceTexture:this.createTexture(v,a,l,!g&&d),targetTexture:this.createTexture(v,a,l),originalTexture:g||this.createTexture(v,a,l,!g&&d),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:u},w=v.createFramebuffer();return v.bindFramebuffer(v.FRAMEBUFFER,w),c.forEach(function(T){T&&T.applyTo(b)}),y(b),this.copyGLTo2D(v,b),v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(b.sourceTexture),v.deleteTexture(b.targetTexture),v.deleteFramebuffer(w),u.getContext("2d").setTransform(1,0,0,1,0,0),b},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,d,a,l,u){var m=c.createTexture();return c.bindTexture(c.TEXTURE_2D,m),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,u||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,u||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),l?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,d,a,0,c.RGBA,c.UNSIGNED_BYTE,null),m},getCachedTexture:function(c,d){if(this.textureCache[c])return this.textureCache[c];var a=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[c]=a,a},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:x,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,d={renderer:"",vendor:""};if(!c)return d;var a=c.getExtension("WEBGL_debug_renderer_info");if(a){var l=c.getParameter(a.UNMASKED_RENDERER_WEBGL),u=c.getParameter(a.UNMASKED_VENDOR_WEBGL);l&&(d.renderer=l.toLowerCase()),u&&(d.vendor=u.toLowerCase())}return this.gpuInfo=d,d}}}();function y(f){var r=f.targetCanvas,c=r.width,d=r.height,a=f.destinationWidth,l=f.destinationHeight;(c!==a||d!==l)&&(r.width=a,r.height=l)}function x(f,r){var c=f.canvas,d=r.targetCanvas,a=d.getContext("2d");a.translate(0,d.height),a.scale(1,-1);var l=c.height-d.height;a.drawImage(c,0,l,d.width,d.height,0,0,d.width,d.height)}function S(f,r){var c=r.targetCanvas,d=c.getContext("2d"),a=r.destinationWidth,l=r.destinationHeight,u=a*l*4,m=new Uint8Array(this.imageBuffer,0,u),v=new Uint8ClampedArray(this.imageBuffer,0,u);f.readPixels(0,0,a,l,f.RGBA,f.UNSIGNED_BYTE,m);var g=new ImageData(v,a,l);d.putImageData(g,0,0)}(function(){var f=function(){};t.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(c,d,a,l,u){var m=u.getContext("2d");m.drawImage(d,0,0,a,l);var v=m.getImageData(0,0,a,l),g=m.getImageData(0,0,a,l),b={sourceWidth:a,sourceHeight:l,imageData:v,originalEl:d,originalImageData:g,canvasEl:u,ctx:m,filterBackend:this};return c.forEach(function(w){w.applyTo(b)}),(b.imageData.width!==a||b.imageData.height!==l)&&(u.width=b.imageData.width,u.height=b.imageData.height),m.putImageData(b.imageData,0,0),b}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var r in f)this[r]=f[r]},createProgram:function(f,r,c){r=r||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var d=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(d,c),f.compileShader(d),!f.getShaderParameter(d,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(d));var a=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(a,r),f.compileShader(a),!f.getShaderParameter(a,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(a));var l=f.createProgram();if(f.attachShader(l,d),f.attachShader(l,a),f.linkProgram(l),!f.getProgramParameter(l,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(l));var u=this.getAttributeLocations(f,l),m=this.getUniformLocations(f,l)||{};return m.uStepW=f.getUniformLocation(l,"uStepW"),m.uStepH=f.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:u,uniformLocations:m}},getAttributeLocations:function(f,r){return{aPosition:f.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,r,c){var d=r.aPosition,a=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,a),f.enableVertexAttribArray(d),f.vertexAttribPointer(d,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,c,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var r=f.context,c,d;f.passes>1?(c=f.destinationWidth,d=f.destinationHeight,(f.sourceWidth!==c||f.sourceHeight!==d)&&(r.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(r,c,d)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,f.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(f){f.passes--,f.pass++;var r=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=r},isNeutralState:function(){var f=this.mainParameter,r=t.Image.filters[this.type].prototype;if(f)if(Array.isArray(r[f])){for(var c=r[f].length;c--;)if(this[f][c]!==r[f][c])return!1;return!0}else return r[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var r=f.context,c=this.retrieveShader(f);f.pass===0&&f.originalTexture?r.bindTexture(r.TEXTURE_2D,f.originalTexture):r.bindTexture(r.TEXTURE_2D,f.sourceTexture),r.useProgram(c.program),this.sendAttributeData(r,c.attributeLocations,f.aPosition),r.uniform1f(c.uniformLocations.uStepW,1/f.sourceWidth),r.uniform1f(c.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(r,c.uniformLocations),r.viewport(0,0,f.destinationWidth,f.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,r,c){f.activeTexture(c),f.bindTexture(f.TEXTURE_2D,r),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,r){f.activeTexture(r),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var r=document.createElement("canvas");r.width=f.sourceWidth,r.height=f.sourceHeight,f.helpLayer=r}},toObject:function(){var f={type:this.type},r=this.mainParameter;return r&&(f[r]=this[r]),f},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(f,r){var c=new t.Image.filters[f.type](f);return r&&r(c),c},function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.ColorMatrix=d(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l=a.imageData,u=l.data,m=u.length,v=this.matrix,g,b,w,T,k,O=this.colorsOnly;for(k=0;k<m;k+=4)g=u[k],b=u[k+1],w=u[k+2],O?(u[k]=g*v[0]+b*v[1]+w*v[2]+v[4]*255,u[k+1]=g*v[5]+b*v[6]+w*v[7]+v[9]*255,u[k+2]=g*v[10]+b*v[11]+w*v[12]+v[14]*255):(T=u[k+3],u[k]=g*v[0]+b*v[1]+w*v[2]+T*v[3]+v[4]*255,u[k+1]=g*v[5]+b*v[6]+w*v[7]+T*v[8]+v[9]*255,u[k+2]=g*v[10]+b*v[11]+w*v[12]+T*v[13]+v[14]*255,u[k+3]=g*v[15]+b*v[16]+w*v[17]+T*v[18]+v[19]*255)},getUniformLocations:function(a,l){return{uColorMatrix:a.getUniformLocation(l,"uColorMatrix"),uConstants:a.getUniformLocation(l,"uConstants")}},sendUniformData:function(a,l){var u=this.matrix,m=[u[0],u[1],u[2],u[3],u[5],u[6],u[7],u[8],u[10],u[11],u[12],u[13],u[15],u[16],u[17],u[18]],v=[u[4],u[9],u[14],u[19]];a.uniformMatrix4fv(l.uColorMatrix,!1,m),a.uniform4fv(l.uConstants,v)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Brightness=d(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var l=a.imageData,u=l.data,m,v=u.length,g=Math.round(this.brightness*255);for(m=0;m<v;m+=4)u[m]=u[m]+g,u[m+1]=u[m+1]+g,u[m+2]=u[m+2]+g}},getUniformLocations:function(a,l){return{uBrightness:a.getUniformLocation(l,"uBrightness")}},sendUniformData:function(a,l){a.uniform1f(l.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.Image.filters,a=r.util.createClass;d.Convolute=a(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var u=Math.sqrt(this.matrix.length),m=this.type+"_"+u+"_"+(this.opaque?1:0),v=this.fragmentSource[m];return l.programCache.hasOwnProperty(m)||(l.programCache[m]=this.createProgram(l.context,v)),l.programCache[m]},applyTo2d:function(l){var u=l.imageData,m=u.data,v=this.matrix,g=Math.round(Math.sqrt(v.length)),b=Math.floor(g/2),w=u.width,T=u.height,k=l.ctx.createImageData(w,T),O=k.data,D=this.opaque?1:0,P,F,V,$,te,X,Q,se,K,U,q,Z,L;for(q=0;q<T;q++)for(U=0;U<w;U++){for(te=(q*w+U)*4,P=0,F=0,V=0,$=0,L=0;L<g;L++)for(Z=0;Z<g;Z++)Q=q+L-b,X=U+Z-b,!(Q<0||Q>=T||X<0||X>=w)&&(se=(Q*w+X)*4,K=v[L*g+Z],P+=m[se]*K,F+=m[se+1]*K,V+=m[se+2]*K,D||($+=m[se+3]*K));O[te]=P,O[te+1]=F,O[te+2]=V,D?O[te+3]=m[te+3]:O[te+3]=$}l.imageData=k},getUniformLocations:function(l,u){return{uMatrix:l.getUniformLocation(u,"uMatrix"),uOpaque:l.getUniformLocation(u,"uOpaque"),uHalfSize:l.getUniformLocation(u,"uHalfSize"),uSize:l.getUniformLocation(u,"uSize")}},sendUniformData:function(l,u){l.uniform1fv(u.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Grayscale=d(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var l=a.imageData,u=l.data,m,v=u.length,g,b=this.mode;for(m=0;m<v;m+=4)b==="average"?g=(u[m]+u[m+1]+u[m+2])/3:b==="lightness"?g=(Math.min(u[m],u[m+1],u[m+2])+Math.max(u[m],u[m+1],u[m+2]))/2:b==="luminosity"&&(g=.21*u[m]+.72*u[m+1]+.07*u[m+2]),u[m]=g,u[m+1]=g,u[m+2]=g},retrieveShader:function(a){var l=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(l)){var u=this.fragmentSource[this.mode];a.programCache[l]=this.createProgram(a.context,u)}return a.programCache[l]},getUniformLocations:function(a,l){return{uMode:a.getUniformLocation(l,"uMode")}},sendUniformData:function(a,l){var u=1;a.uniform1i(l.uMode,u)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Invert=d(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var l=a.imageData,u=l.data,m,v=u.length;for(m=0;m<v;m+=4)u[m]=255-u[m],u[m+1]=255-u[m+1],u[m+2]=255-u[m+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,l){return{uInvert:a.getUniformLocation(l,"uInvert")}},sendUniformData:function(a,l){a.uniform1i(l.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.Image.filters,a=r.util.createClass;d.Noise=a(d.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var u=l.imageData,m=u.data,v,g=m.length,b=this.noise,w;for(v=0,g=m.length;v<g;v+=4)w=(.5-Math.random())*b,m[v]+=w,m[v+1]+=w,m[v+2]+=w}},getUniformLocations:function(l,u){return{uNoise:l.getUniformLocation(u,"uNoise"),uSeed:l.getUniformLocation(u,"uSeed")}},sendUniformData:function(l,u){l.uniform1f(u.uNoise,this.noise/255),l.uniform1f(u.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Pixelate=d(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var l=a.imageData,u=l.data,m=l.height,v=l.width,g,b,w,T,k,O,D,P,F,V,$;for(b=0;b<m;b+=this.blocksize)for(w=0;w<v;w+=this.blocksize)for(g=b*4*v+w*4,T=u[g],k=u[g+1],O=u[g+2],D=u[g+3],V=Math.min(b+this.blocksize,m),$=Math.min(w+this.blocksize,v),P=b;P<V;P++)for(F=w;F<$;F++)g=P*4*v+F*4,u[g]=T,u[g+1]=k,u[g+2]=O,u[g+3]=D},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,l){return{uBlocksize:a.getUniformLocation(l,"uBlocksize"),uStepW:a.getUniformLocation(l,"uStepW"),uStepH:a.getUniformLocation(l,"uStepH")}},sendUniformData:function(a,l){a.uniform1f(l.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.extend,d=r.Image.filters,a=r.util.createClass;d.RemoveColor=a(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var u=l.imageData,m=u.data,v,g=this.distance*255,b,w,T,k=new r.Color(this.color).getSource(),O=[k[0]-g,k[1]-g,k[2]-g],D=[k[0]+g,k[1]+g,k[2]+g];for(v=0;v<m.length;v+=4)b=m[v],w=m[v+1],T=m[v+2],b>O[0]&&w>O[1]&&T>O[2]&&b<D[0]&&w<D[1]&&T<D[2]&&(m[v+3]=0)},getUniformLocations:function(l,u){return{uLow:l.getUniformLocation(u,"uLow"),uHigh:l.getUniformLocation(u,"uHigh")}},sendUniformData:function(l,u){var m=new r.Color(this.color).getSource(),v=parseFloat(this.distance),g=[0+m[0]/255-v,0+m[1]/255-v,0+m[2]/255-v,1],b=[m[0]/255+v,m[1]/255+v,m[2]/255+v,1];l.uniform4fv(u.uLow,g),l.uniform4fv(u.uHigh,b)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in a)c[l]=d(c.ColorMatrix,{type:l,matrix:a[l],mainParameter:!1,colorsOnly:!0}),r.Image.filters[l].fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric,c=r.Image.filters,d=r.util.createClass;c.BlendColor=d(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,u;return a.programCache.hasOwnProperty(l)||(u=this.buildSource(this.mode),a.programCache[l]=this.createProgram(a.context,u)),a.programCache[l]},applyTo2d:function(a){var l=a.imageData,u=l.data,m=u.length,v,g,b,w,T,k,O,D=1-this.alpha;O=new r.Color(this.color).getSource(),v=O[0]*this.alpha,g=O[1]*this.alpha,b=O[2]*this.alpha;for(var P=0;P<m;P+=4)switch(w=u[P],T=u[P+1],k=u[P+2],this.mode){case"multiply":u[P]=w*v/255,u[P+1]=T*g/255,u[P+2]=k*b/255;break;case"screen":u[P]=255-(255-w)*(255-v)/255,u[P+1]=255-(255-T)*(255-g)/255,u[P+2]=255-(255-k)*(255-b)/255;break;case"add":u[P]=w+v,u[P+1]=T+g,u[P+2]=k+b;break;case"diff":case"difference":u[P]=Math.abs(w-v),u[P+1]=Math.abs(T-g),u[P+2]=Math.abs(k-b);break;case"subtract":u[P]=w-v,u[P+1]=T-g,u[P+2]=k-b;break;case"darken":u[P]=Math.min(w,v),u[P+1]=Math.min(T,g),u[P+2]=Math.min(k,b);break;case"lighten":u[P]=Math.max(w,v),u[P+1]=Math.max(T,g),u[P+2]=Math.max(k,b);break;case"overlay":u[P]=v<128?2*w*v/255:255-2*(255-w)*(255-v)/255,u[P+1]=g<128?2*T*g/255:255-2*(255-T)*(255-g)/255,u[P+2]=b<128?2*k*b/255:255-2*(255-k)*(255-b)/255;break;case"exclusion":u[P]=v+w-2*v*w/255,u[P+1]=g+T-2*g*T/255,u[P+2]=b+k-2*b*k/255;break;case"tint":u[P]=v+w*D,u[P+1]=g+T*D,u[P+2]=b+k*D}},getUniformLocations:function(a,l){return{uColor:a.getUniformLocation(l,"uColor")}},sendUniformData:function(a,l){var u=new r.Color(this.color).getSource();u[0]=this.alpha*u[0]/255,u[1]=this.alpha*u[1]/255,u[2]=this.alpha*u[2]/255,u[3]=this.alpha,a.uniform4fv(l.uColor,u)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric,c=r.Image.filters,d=r.util.createClass;c.BlendImage=d(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,u=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,u)),a.programCache[l]},applyToWebGL:function(a){var l=a.context,u=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(l,u,l.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(a,l){return a.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var a=this.image,l=a._element.width,u=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/l,-a.top/u,1]},applyTo2d:function(a){var l=a.imageData,u=a.filterBackend.resources,m=l.data,v=m.length,g=l.width,b=l.height,w,T,k,O,D,P,F,V,$,te,X=this.image,Q;u.blendImage||(u.blendImage=r.util.createCanvasElement()),$=u.blendImage,te=$.getContext("2d"),$.width!==g||$.height!==b?($.width=g,$.height=b):te.clearRect(0,0,g,b),te.setTransform(X.scaleX,0,0,X.scaleY,X.left,X.top),te.drawImage(X._element,0,0,g,b),Q=te.getImageData(0,0,g,b).data;for(var se=0;se<v;se+=4)switch(D=m[se],P=m[se+1],F=m[se+2],V=m[se+3],w=Q[se],T=Q[se+1],k=Q[se+2],O=Q[se+3],this.mode){case"multiply":m[se]=D*w/255,m[se+1]=P*T/255,m[se+2]=F*k/255,m[se+3]=V*O/255;break;case"mask":m[se+3]=O;break}},getUniformLocations:function(a,l){return{uTransformMatrix:a.getUniformLocation(l,"uTransformMatrix"),uImage:a.getUniformLocation(l,"uImage")}},sendUniformData:function(a,l){var u=this.calculateMatrix();a.uniform1i(l.uImage,1),a.uniformMatrix3fv(l.uTransformMatrix,!1,u)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(a,l){r.Image.fromObject(a.image,function(u){var m=r.util.object.clone(a);m.image=u,l(new r.Image.filters.BlendImage(m))})}}(e),function(f){var r=f.fabric||(f.fabric={}),c=Math.pow,d=Math.floor,a=Math.sqrt,l=Math.abs,u=Math.round,m=Math.sin,v=Math.ceil,g=r.Image.filters,b=r.util.createClass;g.Resize=b(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(w,T){return{uDelta:w.getUniformLocation(T,"uDelta"),uTaps:w.getUniformLocation(T,"uTaps")}},sendUniformData:function(w,T){w.uniform2fv(T.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),w.uniform1fv(T.uTaps,this.taps)},retrieveShader:function(w){var T=this.getFilterWindow(),k=this.type+"_"+T;if(!w.programCache.hasOwnProperty(k)){var O=this.generateShader(T);w.programCache[k]=this.createProgram(w.context,O)}return w.programCache[k]},getFilterWindow:function(){var w=this.tempScale;return Math.ceil(this.lanczosLobes/w)},getTaps:function(){for(var w=this.lanczosCreate(this.lanczosLobes),T=this.tempScale,k=this.getFilterWindow(),O=new Array(k),D=1;D<=k;D++)O[D-1]=w(D*T);return O},generateShader:function(O){for(var T=new Array(O),k=this.fragmentSourceTOP,O,D=1;D<=O;D++)T[D-1]=D+".0 * uDelta";return k+="uniform float uTaps["+O+`];
`,k+=`void main() {
`,k+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,k+=`  float sum = 1.0;
`,T.forEach(function(P,F){k+="  color += texture2D(uTexture, vTexCoord + "+P+") * uTaps["+F+`];
`,k+="  color += texture2D(uTexture, vTexCoord - "+P+") * uTaps["+F+`];
`,k+="  sum += 2.0 * uTaps["+F+`];
`}),k+=`  gl_FragColor = color / sum;
`,k+="}",k},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(w){w.webgl?(w.passes++,this.width=w.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=w.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),w.destinationWidth=this.dW,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceWidth=w.destinationWidth,this.height=w.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),w.destinationHeight=this.dH,this._setupFrameBuffer(w),this.applyToWebGL(w),this._swapTextures(w),w.sourceHeight=w.destinationHeight):this.applyTo2d(w)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(w){return function(T){if(T>=w||T<=-w)return 0;if(T<11920929e-14&&T>-11920929e-14)return 1;T*=Math.PI;var k=T/w;return m(T)/T*m(k)/k}},applyTo2d:function(w){var T=w.imageData,k=this.scaleX,O=this.scaleY;this.rcpScaleX=1/k,this.rcpScaleY=1/O;var D=T.width,P=T.height,F=u(D*k),V=u(P*O),$;this.resizeType==="sliceHack"?$=this.sliceByTwo(w,D,P,F,V):this.resizeType==="hermite"?$=this.hermiteFastResize(w,D,P,F,V):this.resizeType==="bilinear"?$=this.bilinearFiltering(w,D,P,F,V):this.resizeType==="lanczos"&&($=this.lanczosResize(w,D,P,F,V)),w.imageData=$},sliceByTwo:function(w,T,k,O,D){var P=w.imageData,F=.5,V=!1,$=!1,te=T*F,X=k*F,Q=r.filterBackend.resources,se,K,U=0,q=0,Z=T,L=0;for(Q.sliceByTwo||(Q.sliceByTwo=document.createElement("canvas")),se=Q.sliceByTwo,(se.width<T*1.5||se.height<k)&&(se.width=T*1.5,se.height=k),K=se.getContext("2d"),K.clearRect(0,0,T*1.5,k),K.putImageData(P,0,0),O=d(O),D=d(D);!V||!$;)T=te,k=X,O<d(te*F)?te=d(te*F):(te=O,V=!0),D<d(X*F)?X=d(X*F):(X=D,$=!0),K.drawImage(se,U,q,T,k,Z,L,te,X),U=Z,q=L,L+=X;return K.getImageData(U,q,O,D)},lanczosResize:function(w,T,k,O,D){function P(j){var R,I,B,z,W,Y,ne,ee,de,le,we;for(L.x=(j+.5)*X,A.x=d(L.x),R=0;R<D;R++){for(L.y=(R+.5)*Q,A.y=d(L.y),W=0,Y=0,ne=0,ee=0,de=0,I=A.x-U;I<=A.x+U;I++)if(!(I<0||I>=T)){le=d(1e3*l(I-L.x)),Z[le]||(Z[le]={});for(var ue=A.y-q;ue<=A.y+q;ue++)ue<0||ue>=k||(we=d(1e3*l(ue-L.y)),Z[le][we]||(Z[le][we]=te(a(c(le*se,2)+c(we*K,2))/1e3)),B=Z[le][we],B>0&&(z=(ue*T+I)*4,W+=B,Y+=B*F[z],ne+=B*F[z+1],ee+=B*F[z+2],de+=B*F[z+3]))}z=(R*O+j)*4,$[z]=Y/W,$[z+1]=ne/W,$[z+2]=ee/W,$[z+3]=de/W}return++j<O?P(j):V}var F=w.imageData.data,V=w.ctx.createImageData(O,D),$=V.data,te=this.lanczosCreate(this.lanczosLobes),X=this.rcpScaleX,Q=this.rcpScaleY,se=2/this.rcpScaleX,K=2/this.rcpScaleY,U=v(X*this.lanczosLobes/2),q=v(Q*this.lanczosLobes/2),Z={},L={},A={};return P(0)},bilinearFiltering:function(w,T,k,O,D){var P,F,V,$,te,X,Q,se,K,U,q,Z,L=0,A,j=this.rcpScaleX,R=this.rcpScaleY,I=4*(T-1),B=w.imageData,z=B.data,W=w.ctx.createImageData(O,D),Y=W.data;for(Q=0;Q<D;Q++)for(se=0;se<O;se++)for(te=d(j*se),X=d(R*Q),K=j*se-te,U=R*Q-X,A=4*(X*T+te),q=0;q<4;q++)P=z[A+q],F=z[A+4+q],V=z[A+I+q],$=z[A+I+4+q],Z=P*(1-K)*(1-U)+F*K*(1-U)+V*U*(1-K)+$*K*U,Y[L++]=Z;return W},hermiteFastResize:function(w,T,k,O,D){for(var P=this.rcpScaleX,F=this.rcpScaleY,V=v(P/2),$=v(F/2),te=w.imageData,X=te.data,Q=w.ctx.createImageData(O,D),se=Q.data,K=0;K<D;K++)for(var U=0;U<O;U++){for(var q=(U+K*O)*4,Z=0,L=0,A=0,j=0,R=0,I=0,B=0,z=(K+.5)*F,W=d(K*F);W<(K+1)*F;W++)for(var Y=l(z-(W+.5))/$,ne=(U+.5)*P,ee=Y*Y,de=d(U*P);de<(U+1)*P;de++){var le=l(ne-(de+.5))/V,we=a(ee+le*le);we>1&&we<-1||(Z=2*we*we*we-3*we*we+1,Z>0&&(le=4*(de+W*T),B+=Z*X[le+3],A+=Z,X[le+3]<255&&(Z=Z*X[le+3]/250),j+=Z*X[le],R+=Z*X[le+1],I+=Z*X[le+2],L+=Z))}se[q]=j/L,se[q+1]=R/L,se[q+2]=I/L,se[q+3]=B/A}return Q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Contrast=d(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var l=a.imageData,u,v,m=l.data,v=m.length,g=Math.floor(this.contrast*255),b=259*(g+255)/(255*(259-g));for(u=0;u<v;u+=4)m[u]=b*(m[u]-128)+128,m[u+1]=b*(m[u+1]-128)+128,m[u+2]=b*(m[u+2]-128)+128}},getUniformLocations:function(a,l){return{uContrast:a.getUniformLocation(l,"uContrast")}},sendUniformData:function(a,l){a.uniform1f(l.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Saturation=d(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var l=a.imageData,u=l.data,m=u.length,v=-this.saturation,g,b;for(g=0;g<m;g+=4)b=Math.max(u[g],u[g+1],u[g+2]),u[g]+=b!==u[g]?(b-u[g])*v:0,u[g+1]+=b!==u[g+1]?(b-u[g+1])*v:0,u[g+2]+=b!==u[g+2]?(b-u[g+2])*v:0}},getUniformLocations:function(a,l){return{uSaturation:a.getUniformLocation(l,"uSaturation")}},sendUniformData:function(a,l){a.uniform1f(l.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Vibrance=d(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var l=a.imageData,u=l.data,m=u.length,v=-this.vibrance,g,b,w,T;for(g=0;g<m;g+=4)b=Math.max(u[g],u[g+1],u[g+2]),w=(u[g]+u[g+1]+u[g+2])/3,T=Math.abs(b-w)*2/255*v,u[g]+=b!==u[g]?(b-u[g])*T:0,u[g+1]+=b!==u[g+1]?(b-u[g+1])*T:0,u[g+2]+=b!==u[g+2]?(b-u[g+2])*T:0}},getUniformLocations:function(a,l){return{uVibrance:a.getUniformLocation(l,"uVibrance")}},sendUniformData:function(a,l){a.uniform1f(l.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Blur=d(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var l=a.filterBackend.resources,u,m,v=a.imageData.width,g=a.imageData.height;l.blurLayer1||(l.blurLayer1=r.util.createCanvasElement(),l.blurLayer2=r.util.createCanvasElement()),u=l.blurLayer1,m=l.blurLayer2,(u.width!==v||u.height!==g)&&(m.width=u.width=v,m.height=u.height=g);var b=u.getContext("2d"),w=m.getContext("2d"),T=15,k,O,D,P,F=this.blur*.06*.5;for(b.putImageData(a.imageData,0,0),w.clearRect(0,0,v,g),P=-15;P<=T;P++)k=(Math.random()-.5)/4,O=P/T,D=F*O*v+k,w.globalAlpha=1-Math.abs(O),w.drawImage(u,D,k),b.drawImage(m,0,0),w.globalAlpha=1,w.clearRect(0,0,m.width,m.height);for(P=-15;P<=T;P++)k=(Math.random()-.5)/4,O=P/T,D=F*O*g+k,w.globalAlpha=1-Math.abs(O),w.drawImage(u,k,D),b.drawImage(m,0,0),w.globalAlpha=1,w.clearRect(0,0,m.width,m.height);a.ctx.drawImage(u,0,0);var V=a.ctx.getImageData(0,0,u.width,u.height);return b.globalAlpha=1,b.clearRect(0,0,u.width,u.height),V},getUniformLocations:function(a,l){return{delta:a.getUniformLocation(l,"uDelta")}},sendUniformData:function(a,l){var u=this.chooseRightDelta();a.uniform2fv(l.delta,u)},chooseRightDelta:function(){var a=1,l=[0,0],u;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),u=a*this.blur*.12,this.horizontal?l[0]=u:l[1]=u,l}}),c.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Gamma=d(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var l=a.imageData,u=l.data,m=this.gamma,v=u.length,g=1/m[0],b=1/m[1],w=1/m[2],T;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),T=0,v=256;T<v;T++)this.rVals[T]=Math.pow(T/255,g)*255,this.gVals[T]=Math.pow(T/255,b)*255,this.bVals[T]=Math.pow(T/255,w)*255;for(T=0,v=u.length;T<v;T+=4)u[T]=this.rVals[u[T]],u[T+1]=this.gVals[u[T+1]],u[T+2]=this.bVals[u[T+2]]},getUniformLocations:function(a,l){return{uGamma:a.getUniformLocation(l,"uGamma")}},sendUniformData:function(a,l){a.uniform3fv(l.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.Composed=d(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(a)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(a,l){var u=a.subFilters||[],m=u.map(function(g){return new r.Image.filters[g.type](g)}),v=new r.Image.filters.Composed({subFilters:m});return l&&l(v),v}}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.Image.filters,d=r.util.createClass;c.HueRotation=d(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,l=r.util.cos(a),u=r.util.sin(a),m=1/3,v=Math.sqrt(m)*u,g=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+g/3,this.matrix[1]=m*g-v,this.matrix[2]=m*g+v,this.matrix[5]=m*g+v,this.matrix[6]=l+m*g,this.matrix[7]=m*g-v,this.matrix[10]=m*g-v,this.matrix[11]=m*g+v,this.matrix[12]=l+m*g},isNeutralState:function(a){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,a)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(e),function(f){var r=f.fabric||(f.fabric={}),c=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(d),cacheProperties:r.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,l){this.styles=l?l.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=r.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,l,u,m,v,g,b,w=0,T=this._textLines.length;w<T;w++)if(!(this.textAlign!=="justify"&&(w===T-1||this.isEndOfWrapping(w)))&&(m=0,v=this._textLines[w],l=this.getLineWidth(w),l<this.width&&(b=this.textLines[w].match(this._reSpacesAndTabs)))){u=b.length,a=(this.width-l)/u;for(var k=0,O=v.length;k<=O;k++)g=this.__charBounds[w][k],this._reSpaceAndTab.test(v[k])?(g.width+=a,g.kernedWidth+=a,g.left+=m,m+=a):g.left+=m}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return a.width+=l*a.zoomX,a.height+=l*a.zoomY,a},_render:function(a){var l=this.path;l&&!l.isNotVisible()&&l._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,l,u){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(l,u)},calcTextWidth:function(){for(var a=this.getLineWidth(0),l=1,u=this._textLines.length;l<u;l++){var m=this.getLineWidth(l);m>a&&(a=m)}return a},_renderTextLine:function(a,l,u,m,v,g){this._renderChars(a,l,u,m,v,g)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,u,m=a.fillStyle,v,g,b=this._getLeftOffset(),w=this._getTopOffset(),T=0,k=0,O,D,P=this.path,F,V=0,$=this._textLines.length;V<$;V++){if(l=this.getHeightOfLine(V),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",V)){w+=l;continue}v=this._textLines[V],u=this._getLineLeftOffset(V),k=0,T=0,g=this.getValueOfPropertyAt(V,0,"textBackgroundColor");for(var te=0,X=v.length;te<X;te++)O=this.__charBounds[V][te],D=this.getValueOfPropertyAt(V,te,"textBackgroundColor"),P?(a.save(),a.translate(O.renderLeft,O.renderTop),a.rotate(O.angle),a.fillStyle=D,D&&a.fillRect(-O.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),O.width,l/this.lineHeight),a.restore()):D!==g?(F=b+u+T,this.direction==="rtl"&&(F=this.width-F-k),a.fillStyle=g,g&&a.fillRect(F,w,k,l/this.lineHeight),T=O.left,k=O.width,g=D):k+=O.kernedWidth;D&&!P&&(F=b+u+T,this.direction==="rtl"&&(F=this.width-F-k),a.fillStyle=D,a.fillRect(F,w,k,l/this.lineHeight)),w+=l}a.fillStyle=m,this._removeShadow(a)}},getFontCache:function(a){var l=a.fontFamily.toLowerCase();r.charWidthsCache[l]||(r.charWidthsCache[l]={});var u=r.charWidthsCache[l],m=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return u[m]||(u[m]={}),u[m]},_measureChar:function(a,l,u,m){var v=this.getFontCache(l),g=this._getFontDeclaration(l),b=this._getFontDeclaration(m),w=u+a,T=g===b,k,O,D,P=l.fontSize/this.CACHE_FONT_SIZE,F;if(u&&v[u]!==void 0&&(D=v[u]),v[a]!==void 0&&(F=k=v[a]),T&&v[w]!==void 0&&(O=v[w],F=O-D),k===void 0||D===void 0||O===void 0){var V=this.getMeasuringContext();this._setTextStyles(V,l,!0)}return k===void 0&&(F=k=V.measureText(a).width,v[a]=k),D===void 0&&T&&u&&(D=V.measureText(u).width,v[u]=D),T&&O===void 0&&(O=V.measureText(w).width,v[w]=O,F=O-D),{width:k*P,kernedWidth:F*P}},getHeightOfChar:function(a,l){return this.getValueOfPropertyAt(a,l,"fontSize")},measureLine:function(a){var l=this._measureLine(a);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(a){var l=0,u,m,v=this._textLines[a],g,b,w=0,T=new Array(v.length),k=0,O,D,P=this.path,F=this.pathSide==="right";for(this.__charBounds[a]=T,u=0;u<v.length;u++)m=v[u],b=this._getGraphemeBox(m,a,u,g),T[u]=b,l+=b.kernedWidth,g=m;if(T[u]={left:b?b.left+b.width:0,width:0,kernedWidth:0,height:this.fontSize},P){switch(D=P.segmentsInfo[P.segmentsInfo.length-1].length,O=r.util.getPointOnPath(P.path,0,P.segmentsInfo),O.x+=P.pathOffset.x,O.y+=P.pathOffset.y,this.textAlign){case"left":k=F?D-l:0;break;case"center":k=(D-l)/2;break;case"right":k=F?0:D-l;break}for(k+=this.pathStartOffset*(F?-1:1),u=F?v.length-1:0;F?u>=0:u<v.length;F?u--:u++)b=T[u],k>D?k%=D:k<0&&(k+=D),this._setGraphemeOnPath(k,b,O),k+=b.kernedWidth}return{width:l,numOfSpaces:w}},_setGraphemeOnPath:function(a,l,u){var m=a+l.kernedWidth/2,v=this.path,g=r.util.getPointOnPath(v.path,m,v.segmentsInfo);l.renderLeft=g.x-u.x,l.renderTop=g.y-u.y,l.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,l,u,m,v){var g=this.getCompleteStyleDeclaration(l,u),b=m?this.getCompleteStyleDeclaration(l,u-1):{},w=this._measureChar(a,g,m,b),T=w.kernedWidth,k=w.width,O;this.charSpacing!==0&&(O=this._getWidthOfCharSpacing(),k+=O,T+=O);var D={width:k,left:0,height:g.fontSize,kernedWidth:T,deltaY:g.deltaY};if(u>0&&!v){var P=this.__charBounds[l][u-1];D.left=P.left+P.width+w.kernedWidth-w.width}return D},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var l=this._textLines[a],u=this.getHeightOfChar(a,0),m=1,v=l.length;m<v;m++)u=Math.max(this.getHeightOfChar(a,m),u);return this.__lineHeights[a]=u*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,l=0,u=0,m=this._textLines.length;u<m;u++)a=this.getHeightOfLine(u),l+=u===m-1?a/this.lineHeight:a;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,l){a.save();for(var u=0,m=this._getLeftOffset(),v=this._getTopOffset(),g=0,b=this._textLines.length;g<b;g++){var w=this.getHeightOfLine(g),T=w/this.lineHeight,k=this._getLineLeftOffset(g);this._renderTextLine(l,a,this._textLines[g],m+k,v+u+T,g),u+=w}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,l,u,m,v,g){var b=this.getHeightOfLine(g),w=this.textAlign.indexOf("justify")!==-1,T,k,O="",D,P=0,F,V=this.path,$=!w&&this.charSpacing===0&&this.isEmptyStyles(g)&&!V,te=this.direction==="ltr",X=this.direction==="ltr"?1:-1,Q,se=l.canvas.getAttribute("dir");if(l.save(),se!==this.direction&&(l.canvas.setAttribute("dir",te?"ltr":"rtl"),l.direction=te?"ltr":"rtl",l.textAlign=te?"left":"right"),v-=b*this._fontSizeFraction/this.lineHeight,$){this._renderChar(a,l,g,0,u.join(""),m,v,b),l.restore();return}for(var K=0,U=u.length-1;K<=U;K++)F=K===U||this.charSpacing||V,O+=u[K],D=this.__charBounds[g][K],P===0?(m+=X*(D.kernedWidth-D.width),P+=D.width):P+=D.kernedWidth,w&&!F&&this._reSpaceAndTab.test(u[K])&&(F=!0),F||(T=T||this.getCompleteStyleDeclaration(g,K),k=this.getCompleteStyleDeclaration(g,K+1),F=r.util.hasStyleChanged(T,k,!1)),F&&(V?(l.save(),l.translate(D.renderLeft,D.renderTop),l.rotate(D.angle),this._renderChar(a,l,g,K,O,-P/2,0,b),l.restore()):(Q=m,this._renderChar(a,l,g,K,O,Q,v,b)),O="",T=k,m+=X*P,P=0);l.restore()},_applyPatternGradientTransformText:function(a){var l=r.util.createCanvasElement(),u,m=this.width+this.strokeWidth,v=this.height+this.strokeWidth;return l.width=m,l.height=v,u=l.getContext("2d"),u.beginPath(),u.moveTo(0,0),u.lineTo(m,0),u.lineTo(m,v),u.lineTo(0,v),u.closePath(),u.translate(m/2,v/2),u.fillStyle=a.toLive(u),this._applyPatternGradientTransform(u,a),u.fill(),u.createPattern(l,"no-repeat")},handleFiller:function(a,l,u){var m,v;return u.toLive?u.gradientUnits==="percentage"||u.gradientTransform||u.patternTransform?(m=-this.width/2,v=-this.height/2,a.translate(m,v),a[l]=this._applyPatternGradientTransformText(u),{offsetX:m,offsetY:v}):(a[l]=u.toLive(a,this),this._applyPatternGradientTransform(a,u)):(a[l]=u,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,l){return a.lineWidth=l.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",l.stroke)},_setFillStyles:function(a,l){return this.handleFiller(a,"fillStyle",l.fill)},_renderChar:function(a,l,u,m,v,g,b){var w=this._getStyleDeclaration(u,m),T=this.getCompleteStyleDeclaration(u,m),k=a==="fillText"&&T.fill,O=a==="strokeText"&&T.stroke&&T.strokeWidth,D,P;!O&&!k||(l.save(),k&&(D=this._setFillStyles(l,T)),O&&(P=this._setStrokeStyles(l,T)),l.font=this._getFontDeclaration(T),w&&w.textBackgroundColor&&this._removeShadow(l),w&&w.deltaY&&(b+=w.deltaY),k&&l.fillText(v,g-D.offsetX,b-D.offsetY),O&&l.strokeText(v,g-P.offsetX,b-P.offsetY),l.restore())},setSuperscript:function(a,l){return this._setScript(a,l,this.superscript)},setSubscript:function(a,l){return this._setScript(a,l,this.subscript)},_setScript:function(a,l,u){var m=this.get2DCursorLocation(a,!0),v=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"fontSize"),g=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"deltaY"),b={fontSize:v*u.size,deltaY:g+v*u.baseline};return this.setSelectionStyles(b,a,l),this},_getLineLeftOffset:function(a){var l=this.getLineWidth(a),u=this.width-l,m=this.textAlign,v=this.direction,b,g=0,b=this.isEndOfWrapping(a);return m==="justify"||m==="justify-center"&&!b||m==="justify-right"&&!b||m==="justify-left"&&!b?0:(m==="center"&&(g=u/2),m==="right"&&(g=u),m==="justify-center"&&(g=u/2),m==="justify-right"&&(g=u),v==="rtl"&&(g-=u),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var l=this.measureLine(a),u=l.width;return this.__lineWidths[a]=u,u},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,l,u){var m=this._getStyleDeclaration(a,l);return m&&typeof m[u]<"u"?m[u]:this[u]},_renderTextDecoration:function(a,l){if(!(!this[l]&&!this.styleHas(l))){for(var u,m,v,g,b,w,T,k,O=this._getLeftOffset(),D=this._getTopOffset(),P,F,V,$,te,X,Q,se,K=this.path,U=this._getWidthOfCharSpacing(),q=this.offsets[l],Z=0,L=this._textLines.length;Z<L;Z++){if(u=this.getHeightOfLine(Z),!this[l]&&!this.styleHas(l,Z)){D+=u;continue}T=this._textLines[Z],X=u/this.lineHeight,g=this._getLineLeftOffset(Z),F=0,V=0,k=this.getValueOfPropertyAt(Z,0,l),se=this.getValueOfPropertyAt(Z,0,"fill"),P=D+X*(1-this._fontSizeFraction),m=this.getHeightOfChar(Z,0),b=this.getValueOfPropertyAt(Z,0,"deltaY");for(var A=0,j=T.length;A<j;A++)if($=this.__charBounds[Z][A],te=this.getValueOfPropertyAt(Z,A,l),Q=this.getValueOfPropertyAt(Z,A,"fill"),v=this.getHeightOfChar(Z,A),w=this.getValueOfPropertyAt(Z,A,"deltaY"),K&&te&&Q)a.save(),a.fillStyle=se,a.translate($.renderLeft,$.renderTop),a.rotate($.angle),a.fillRect(-$.kernedWidth/2,q*v+w,$.kernedWidth,this.fontSize/15),a.restore();else if((te!==k||Q!==se||v!==m||w!==b)&&V>0){var R=O+g+F;this.direction==="rtl"&&(R=this.width-R-V),k&&se&&(a.fillStyle=se,a.fillRect(R,P+q*m+b,V,this.fontSize/15)),F=$.left,V=$.width,k=te,se=Q,m=v,b=w}else V+=$.kernedWidth;var R=O+g+F;this.direction==="rtl"&&(R=this.width-R-V),a.fillStyle=Q,te&&Q&&a.fillRect(R,P+q*m+b,V-U,this.fontSize/15),D+=u}this._removeShadow(a)}},_getFontDeclaration:function(a,l){var u=a||this,m=this.fontFamily,v=r.Text.genericFonts.indexOf(m.toLowerCase())>-1,g=m===void 0||m.indexOf("'")>-1||m.indexOf(",")>-1||m.indexOf('"')>-1||v?u.fontFamily:'"'+u.fontFamily+'"';return[r.isLikelyNode?u.fontWeight:u.fontStyle,r.isLikelyNode?u.fontStyle:u.fontWeight,l?this.CACHE_FONT_SIZE+"px":u.fontSize+"px",g].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var l=a.split(this._reNewline),u=new Array(l.length),m=[`
`],v=[],g=0;g<l.length;g++)u[g]=r.util.string.graphemeSplit(l[g]),v=v.concat(u[g],m);return v.pop(),{_unwrappedLines:u,lines:l,graphemeText:v,graphemeLines:u}},toObject:function(a){var l=d.concat(a),u=this.callSuper("toObject",l);return u.styles=r.util.stylesToArray(this.styles,this.text),u.path&&(u.path=this.path.toObject()),u},set:function(a,l){this.callSuper("set",a,l);var u=!1,m=!1;if(typeof a=="object")for(var v in a)v==="path"&&this.setPathInfo(),u=u||this._dimensionAffectingProps.indexOf(v)!==-1,m=m||v==="path";else u=this._dimensionAffectingProps.indexOf(a)!==-1,m=a==="path";return m&&this.setPathInfo(),u&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(a,l,u){if(!a)return l(null);var m=r.parseAttributes(a,r.Text.ATTRIBUTE_NAMES),v=m.textAnchor||"left";if(u=r.util.object.extend(u?c(u):{},m),u.top=u.top||0,u.left=u.left||0,m.textDecoration){var g=m.textDecoration;g.indexOf("underline")!==-1&&(u.underline=!0),g.indexOf("overline")!==-1&&(u.overline=!0),g.indexOf("line-through")!==-1&&(u.linethrough=!0),delete u.textDecoration}"dx"in m&&(u.left+=m.dx),"dy"in m&&(u.top+=m.dy),"fontSize"in u||(u.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var b="";"textContent"in a?b=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(b=a.firstChild.data),b=b.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var w=u.strokeWidth;u.strokeWidth=0;var T=new r.Text(b,u),k=T.getScaledHeight()/T.height,O=(T.height+T.strokeWidth)*T.lineHeight-T.height,D=O*k,P=T.getScaledHeight()+D,F=0;v==="center"&&(F=T.getScaledWidth()/2),v==="right"&&(F=T.getScaledWidth()),T.set({left:T.left-F,top:T.top-(P-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:typeof w<"u"?w:1}),l(T)},r.Text.fromObject=function(a,l){var u=c(a),m=a.path;return delete u.path,r.Object._fromObject("Text",u,function(v){v.styles=r.util.stylesFromArray(a.styles,a.text),m?r.Object._fromObject("Path",m,function(g){v.set("path",g),l(v)},"path"):l(v)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var r=typeof f>"u"?this.styles:{line:this.styles[f]};for(var c in r)for(var d in r[c])for(var a in r[c][d])return!1;return!0},styleHas:function(f,r){if(!this.styles||!f||f===""||typeof r<"u"&&!this.styles[r])return!1;var c=typeof r>"u"?this.styles:{0:this.styles[r]};for(var d in c)for(var a in c[d])if(typeof c[d][a][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var r=this.styles,c=0,d,a,l=!0,u=0,m;for(var v in r){d=0;for(var g in r[v]){var m=r[v][g],b=m.hasOwnProperty(f);c++,b?(a?m[f]!==a&&(l=!1):a=m[f],m[f]===this[f]&&delete m[f]):l=!1,Object.keys(m).length!==0?d++:delete r[v][g]}d===0&&delete r[v]}for(var w=0;w<this._textLines.length;w++)u+=this._textLines[w].length;l&&c===u&&(this[f]=a,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var r=this.styles,c,d,a;for(d in r){c=r[d];for(a in c)delete c[a][f],Object.keys(c[a]).length===0&&delete c[a];Object.keys(c).length===0&&delete r[d]}}},_extendStyles:function(f,r){var c=this.get2DCursorLocation(f);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),r)},get2DCursorLocation:function(f,r){typeof f>"u"&&(f=this.selectionStart);for(var c=r?this._unwrappedTextLines:this._textLines,d=c.length,a=0;a<d;a++){if(f<=c[a].length)return{lineIndex:a,charIndex:f};f-=c[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:c[a-1].length<f?c[a-1].length:f}},getSelectionStyles:function(f,r,c){typeof f>"u"&&(f=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||f);for(var d=[],a=f;a<r;a++)d.push(this.getStyleAtPosition(a,c));return d},getStyleAtPosition:function(f,r){var c=this.get2DCursorLocation(f),d=r?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return d||{}},setSelectionStyles:function(f,r,c){typeof r>"u"&&(r=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||r);for(var d=r;d<c;d++)this._extendStyles(d,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,r){var c=this.styles&&this.styles[f];return c?c[r]:null},getCompleteStyleDeclaration:function(f,r){for(var c=this._getStyleDeclaration(f,r)||{},d={},a,l=0;l<this._styleProperties.length;l++)a=this._styleProperties[l],d[a]=typeof c[a]>"u"?this[a]:c[a];return d},_setStyleDeclaration:function(f,r,c){this.styles[f][r]=c},_deleteStyleDeclaration:function(f,r){delete this.styles[f][r]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,c){this.callSuper("initialize",r,c),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,c){this[r]!==c&&(this._fireSelectionChanged(),this[r]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,d=this.canvas.viewportTransform;c.save(),c.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(c),this._clearTextArea(c),r||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,c):this.renderSelection(r,c),c.restore()}},_clearTextArea:function(r){var c=this.width+4,d=this.height+4;r.clearRect(-c/2,-d/2,c,d)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var c=this._getLeftOffset(),d=this._getTopOffset(),a=this._getCursorBoundariesOffsets(r);return{left:c,top:d,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,d,a,l=0,u=0,m,v=this.get2DCursorLocation(r);a=v.charIndex,d=v.lineIndex;for(var g=0;g<d;g++)l+=this.getHeightOfLine(g);c=this._getLineLeftOffset(d);var b=this.__charBounds[d][a];return b&&(u=b.left),this.charSpacing!==0&&a===this._textLines[d].length&&(u-=this._getWidthOfCharSpacing()),m={top:l,left:c+(u>0?u:0)},this.direction==="rtl"&&(m.left*=-1),this.cursorOffsetCache=m,this.cursorOffsetCache},renderCursor:function(r,c){var d=this.get2DCursorLocation(),a=d.lineIndex,l=d.charIndex>0?d.charIndex-1:0,u=this.getValueOfPropertyAt(a,l,"fontSize"),m=this.scaleX*this.canvas.getZoom(),v=this.cursorWidth/m,g=r.topOffset,b=this.getValueOfPropertyAt(a,l,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-u*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,l,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(r.left+r.leftOffset-v/2,g+r.top+b,v,u)},renderSelection:function(r,c){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,u=this.get2DCursorLocation(d),m=this.get2DCursorLocation(a),v=u.lineIndex,g=m.lineIndex,b=u.charIndex<0?0:u.charIndex,w=m.charIndex<0?0:m.charIndex,T=v;T<=g;T++){var k=this._getLineLeftOffset(T)||0,O=this.getHeightOfLine(T),D=0,P=0,F=0;if(T===v&&(P=this.__charBounds[v][b].left),T>=v&&T<g)F=l&&!this.isEndOfWrapping(T)?this.width:this.getLineWidth(T)||5;else if(T===g)if(w===0)F=this.__charBounds[g][w].left;else{var V=this._getWidthOfCharSpacing();F=this.__charBounds[g][w-1].left+this.__charBounds[g][w-1].width-V}D=O,(this.lineHeight<1||T===g&&this.lineHeight>1)&&(O/=this.lineHeight);var $=r.left+k+P,te=F-P,X=O,Q=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",X=1,Q=O):c.fillStyle=this.selectionColor,this.direction==="rtl"&&($=this.width-$-te),c.fillRect($,r.top+r.topOffset+Q,te,X),r.topOffset+=D}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),c=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c}}}),t.IText.fromObject=function(r,c){var d=t.util.stylesFromArray(r.styles,r.text),a=Object.assign({},r,{styles:d});if(f(a),a.styles)for(var l in a.styles)for(var u in a.styles[l])f(a.styles[l][u]);t.Object._fromObject("IText",a,c,"text")}}(),function(){var f=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var c=r.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,r._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var c=r.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,r),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,r._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,c,d,a){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",c,{duration:d,onComplete:function(){l.isAborted||r[a]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var c=this,d=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},d)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var c=0,d=r-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)c++,d--;for(;/\S/.test(this._text[d])&&d>-1;)c++,d--;return r-c},findWordBoundaryRight:function(r){var c=0,d=r;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)c++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)c++,d++;return r+c},findLineBoundaryLeft:function(r){for(var c=0,d=r-1;!/\n/.test(this._text[d])&&d>-1;)c++,d--;return r-c},findLineBoundaryRight:function(r){for(var c=0,d=r;!/\n/.test(this._text[d])&&d<this._text.length;)c++,d++;return r+c},searchWordBoundary:function(r,c){for(var d=this._text,a=this._reSpace.test(d[r])?r-1:r,l=d[a],u=t.reNonWord;!u.test(l)&&a>0&&a<d.length;)a+=c,l=d[a];return u.test(l)&&(a+=c===1?0:1),a},selectWord:function(r){r=r||this.selectionStart;var c=this.searchWordBoundary(r,-1),d=this.searchWordBoundary(r,1);this.selectionStart=c,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var c=this.findLineBoundaryLeft(r),d=this.findLineBoundaryRight(r);return this.selectionStart=c,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(r.e),d=this.selectionStart,a=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||d===a)&&(d===c||a===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==d||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,c,d){var a=d.slice(0,r),l=t.util.string.graphemeSplit(a).length;if(r===c)return{selectionStart:l,selectionEnd:l};var u=d.slice(r,c),m=t.util.string.graphemeSplit(u).length;return{selectionStart:l,selectionEnd:l+m}},fromGraphemeToStringSelection:function(r,c,d){var a=d.slice(0,r),l=a.join("").length;if(r===c)return{selectionStart:l,selectionEnd:l};var u=d.slice(r,c),m=u.join("").length;return{selectionStart:l,selectionEnd:l+m}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(r),d=this.get2DCursorLocation(r),a=d.lineIndex,l=d.charIndex,u=this.getValueOfPropertyAt(a,l,"fontSize")*this.lineHeight,m=c.leftOffset,v=this.calcTransformMatrix(),g={x:c.left+m,y:c.top+c.topOffset+u},b=this.canvas.getRetinaScaling(),w=this.canvas.upperCanvasEl,T=w.width/b,k=w.height/b,O=T-u,D=k-u,P=w.clientWidth/T,F=w.clientHeight/k;return g=t.util.transformPoint(g,v),g=t.util.transformPoint(g,this.canvas.viewportTransform),g.x*=P,g.y*=F,g.x<0&&(g.x=0),g.x>O&&(g.x=O),g.y<0&&(g.y=0),g.y>D&&(g.y=D),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:u+"px",charHeight:u}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,c){var d=this.get2DCursorLocation(r,!0),a=this.get2DCursorLocation(c,!0),l=d.lineIndex,u=d.charIndex,m=a.lineIndex,v=a.charIndex,g,b;if(l!==m){if(this.styles[l])for(g=u;g<this._unwrappedTextLines[l].length;g++)delete this.styles[l][g];if(this.styles[m])for(g=v;g<this._unwrappedTextLines[m].length;g++)b=this.styles[m][g],b&&(this.styles[l]||(this.styles[l]={}),this.styles[l][u+g-v]=b);for(g=l+1;g<=m;g++)delete this.styles[g];this.shiftLineStyles(m,l-m)}else if(this.styles[l]){b=this.styles[l];var w=v-u,T,k;for(g=u;g<v;g++)delete b[g];for(k in this.styles[l])T=parseInt(k,10),T>=v&&(b[T-w]=b[k],delete b[k])}},shiftLineStyles:function(r,c){var d=f(this.styles);for(var a in this.styles){var l=parseInt(a,10);l>r&&(this.styles[l+c]=d[l],d[l-c]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,c,d,a){var l,u={},m=!1,v=this._unwrappedTextLines[r].length===c;d||(d=1),this.shiftLineStyles(r,d),this.styles[r]&&(l=this.styles[r][c===0?c:c-1]);for(var g in this.styles[r]){var b=parseInt(g,10);b>=c&&(m=!0,u[b-c]=this.styles[r][g],v&&c===0||delete this.styles[r][g])}var w=!1;for(m&&!v&&(this.styles[r+d]=u,w=!0),w&&d--;d>0;)a&&a[d-1]?this.styles[r+d]={0:f(a[d-1])}:l?this.styles[r+d]={0:f(l)}:delete this.styles[r+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(r,c,d,a){this.styles||(this.styles={});var l=this.styles[r],u=l?f(l):{};d||(d=1);for(var m in u){var v=parseInt(m,10);v>=c&&(l[v+d]=u[v],u[v-d]||delete l[v])}if(this._forceClearCache=!0,a){for(;d--;)Object.keys(a[d]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][c+d]=f(a[d]));return}if(l)for(var g=l[c?c-1:1];g&&d--;)this.styles[r][c+d]=f(g)},insertNewStyleBlock:function(r,c,d){for(var a=this.get2DCursorLocation(c,!0),l=[0],u=0,m=0;m<r.length;m++)r[m]===`
`?(u++,l[u]=0):l[u]++;l[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,l[0],d),d=d&&d.slice(l[0]+1)),u&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+l[0],u);for(var m=1;m<u;m++)l[m]>0?this.insertCharStyleObject(a.lineIndex+m,0,l[m],d):d&&this.styles[a.lineIndex+m]&&d[0]&&(this.styles[a.lineIndex+m][0]=d[0]),d=d&&d.slice(l[m]+1);l[m]>0&&this.insertCharStyleObject(a.lineIndex+m,0,l[m],d)},setSelectionStartEndWithShift:function(r,c,d){d<=r?(c===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=d):d>r&&d<c?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(c===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=d)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var r=f.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var r=this.getSelectionStartFromPointer(f),c=this.selectionStart,d=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(c,d,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var r=this.getLocalPointer(f),c=0,d=0,a=0,l=0,u=0,m,v,g=0,b=this._textLines.length;g<b&&a<=r.y;g++)a+=this.getHeightOfLine(g)*this.scaleY,u=g,g>0&&(l+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));m=this._getLineLeftOffset(u),d=m*this.scaleX,v=this._textLines[u],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+d);for(var w=0,T=v.length;w<T&&(c=d,d+=this.__charBounds[u][w].kernedWidth*this.scaleX,d<=r.x);w++)l++;return this._getNewSelectionStartFromOffset(r,c,d,l,T)},_getNewSelectionStartFromOffset:function(f,r,c,d,a){var l=f.x-r,u=c-f.x,m=u>l||u<0?0:1,v=d+m;return this.flipX&&(v=a-v),v>this._text.length&&(v=this._text.length),v}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in r)this[r[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var r=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,d=this._text.length,a=c.length,l,u,m=a-d,v=this.selectionStart,g=this.selectionEnd,b=v!==g,w,T,k;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var O=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),D=v>O.selectionStart;b?(l=this._text.slice(v,g),m+=g-v):a<d&&(D?l=this._text.slice(g+m,g):l=this._text.slice(v,v-m)),u=c.slice(O.selectionEnd-m,O.selectionEnd),l&&l.length&&(u.length&&(w=this.getSelectionStyles(v,v+1,!1),w=u.map(function(){return w[0]})),b?(T=v,k=g):D?(T=g-l.length,k=g):(T=g,k=g+l.length),this.removeStyleFromTo(T,k)),u.length&&(r&&u.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(w=t.copiedTextStyle),this.insertNewStyleBlock(u,v,w)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(f,r){var c=this._getLineLeftOffset(f),d;return r>0&&(d=this.__charBounds[f][r-1],c+=d.left+d.width),c},getDownCursorOffset:function(f,r){var c=this._getSelectionForOffset(f,r),d=this.get2DCursorLocation(c),a=d.lineIndex;if(a===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-c;var l=d.charIndex,u=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a+1,u),v=this._textLines[a].slice(l);return v.length+m+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(f,r){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,r){var c=this._getSelectionForOffset(f,r),d=this.get2DCursorLocation(c),a=d.lineIndex;if(a===0||f.metaKey||f.keyCode===33)return-c;var l=d.charIndex,u=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a-1,u),v=this._textLines[a].slice(0,l),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+m-v.length+(1-g)},_getIndexOnLine:function(f,r){for(var c=this._textLines[f],d=this._getLineLeftOffset(f),a=d,l=0,u,m,v=0,g=c.length;v<g;v++)if(u=this.__charBounds[f][v].width,a+=u,a>r){m=!0;var b=a-u,w=a,T=Math.abs(b-r),k=Math.abs(w-r);l=k<T?v:v-1;break}return m||(l=c.length-1),l},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,r){var c="get"+f+"CursorOffset",d=this[c](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(d):this.moveCursorWithoutShift(d),d!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var r=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,r,c){var d;if(f.altKey)d=this["findWordBoundary"+c](this[r]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)d=this["findLineBoundary"+c](this[r]);else return this[r]+=c==="Left"?-1:1,!0;if(typeof d<"u"&&this[r]!==d)return this[r]=d,!0},_moveLeft:function(f,r){return this._move(f,r,"Left")},_moveRight:function(f,r){return this._move(f,r,"Right")},moveCursorLeftWithoutShift:function(f){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,r){var c="moveCursor"+f+"With";this._currentCursorOpacity=1,r.shiftKey?c+="Shift":c+="outShift",this[c](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(f,r){typeof r>"u"&&(r=f+1),this.removeStyleFromTo(f,r),this._text.splice(f,r-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,r,c,d){typeof d>"u"&&(d=c),d>c&&this.removeStyleFromTo(c,d);var a=t.util.string.graphemeSplit(f);this.insertNewStyleBlock(a,c,r),this._text=[].concat(this._text.slice(0,c),a,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=t.util.toFixed,r=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),d=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(d)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var d=!0,a=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",a?'text-decoration="'+a+'" ':"",'style="',this.getSvgStyles(d),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,d){var a=[],l=[],u=c,m;this._setSVGBg(l);for(var v=0,g=this._textLines.length;v<g;v++)m=this._getLineLeftOffset(v),(this.textBackgroundColor||this.styleHas("textBackgroundColor",v))&&this._setSVGTextLineBg(l,v,d+m,u),this._setSVGTextLineText(a,v,d+m,u),u+=this.getHeightOfLine(v);return{textSpans:a,textBgRects:l}},_createTextCharSpan:function(c,d,a,l){var u=c!==c.trim()||c.match(r),m=this.getSvgSpanStyles(d,u),v=m?'style="'+m+'"':"",g=d.deltaY,b="",w=t.Object.NUM_FRACTION_DIGITS;return g&&(b=' dy="'+f(g,w)+'" '),['<tspan x="',f(a,w),'" y="',f(l,w),'" ',b,v,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,d,a,l){var u=this.getHeightOfLine(d),m=this.textAlign.indexOf("justify")!==-1,v,g,b="",w,T,k=0,O=this._textLines[d],D;l+=u*(1-this._fontSizeFraction)/this.lineHeight;for(var P=0,F=O.length-1;P<=F;P++)D=P===F||this.charSpacing,b+=O[P],w=this.__charBounds[d][P],k===0?(a+=w.kernedWidth-w.width,k+=w.width):k+=w.kernedWidth,m&&!D&&this._reSpaceAndTab.test(O[P])&&(D=!0),D||(v=v||this.getCompleteStyleDeclaration(d,P),g=this.getCompleteStyleDeclaration(d,P+1),D=t.util.hasStyleChanged(v,g,!0)),D&&(T=this._getStyleDeclaration(d,P)||{},c.push(this._createTextCharSpan(b,T,a,l)),b="",v=g,a+=k,k=0)},_pushTextBgRect:function(c,d,a,l,u,m){var v=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(d),' x="',f(a,v),'" y="',f(l,v),'" width="',f(u,v),'" height="',f(m,v),`"></rect>
`)},_setSVGTextLineBg:function(c,d,a,l){for(var u=this._textLines[d],m=this.getHeightOfLine(d)/this.lineHeight,v=0,g=0,b,w,T=this.getValueOfPropertyAt(d,0,"textBackgroundColor"),k=0,O=u.length;k<O;k++)b=this.__charBounds[d][k],w=this.getValueOfPropertyAt(d,k,"textBackgroundColor"),w!==T?(T&&this._pushTextBgRect(c,T,a+g,l,v,m),g=b.left,v=b.width,T=w):v+=b.kernedWidth;w&&this._pushTextBgRect(c,w,a+g,l,v,m)},_getFillAttributes:function(c){var d=c&&typeof c=="string"?new t.Color(c):"";return!d||!d.getSource()||d.getAlpha()===1?'fill="'+c+'"':'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var d=0,a=0,l=0;l<c;l++)d+=this.getHeightOfLine(l);return a=this.getHeightOfLine(l),{lineTop:d,offset:(this._fontSizeMult-this._fontSizeFraction)*a/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var d=t.Object.prototype.getSvgStyles.call(this,c);return d+" white-space: pre;"}})}(),function(f){var r=f.fabric||(f.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var d=0,a=0,l=0,u={},m=0;m<c.graphemeLines.length;m++)c.graphemeText[l]===`
`&&m>0?(a=0,l++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[l])&&m>0&&(a++,l++),u[m]={line:d,offset:a},l+=c.graphemeLines[m].length,a+=c.graphemeLines[m].length;return u},styleHas:function(c,d){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[d];a&&(d=a.line)}return r.Text.prototype.styleHas.call(this,c,d)},isEmptyStyles:function(c){if(!this.styles)return!0;var d=0,a=c+1,l,u,m=!1,v=this._styleMap[c],g=this._styleMap[c+1];v&&(c=v.line,d=v.offset),g&&(a=g.line,m=a===c,l=g.offset),u=typeof c>"u"?this.styles:{line:this.styles[c]};for(var b in u)for(var w in u[b])if(w>=d&&(!m||w<l))for(var T in u[b][w])return!1;return!0},_getStyleDeclaration:function(c,d){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[c];if(!a)return null;c=a.line,d=a.offset+d}return this.callSuper("_getStyleDeclaration",c,d)},_setStyleDeclaration:function(c,d,a){var l=this._styleMap[c];c=l.line,d=l.offset+d,this.styles[c][d]=a},_deleteStyleDeclaration:function(c,d){var a=this._styleMap[c];c=a.line,d=a.offset+d,delete this.styles[c][d]},_getLineStyle:function(c){var d=this._styleMap[c];return!!this.styles[d.line]},_setLineStyle:function(c){var d=this._styleMap[c];this.styles[d.line]={}},_wrapText:function(c,d){var a=[],l;for(this.isWrapping=!0,l=0;l<c.length;l++)a=a.concat(this._wrapLine(c[l],l,d));return this.isWrapping=!1,a},_measureWord:function(c,d,a){var l=0,u,m=!0;a=a||0;for(var v=0,g=c.length;v<g;v++){var b=this._getGraphemeBox(c[v],d,v+a,u,m);l+=b.kernedWidth,u=c[v]}return l},_wrapLine:function(c,d,a,$){var u=0,m=this.splitByGrapheme,v=[],g=[],b=m?r.util.string.graphemeSplit(c):c.split(this._wordJoiners),w="",T=0,k=m?"":" ",O=0,D=0,P=0,F=!0,V=this._getWidthOfCharSpacing(),$=$||0;b.length===0&&b.push([]),a-=$;for(var te=0;te<b.length;te++)w=m?b[te]:r.util.string.graphemeSplit(b[te]),O=this._measureWord(w,d,T),T+=w.length,u+=D+O-V,u>a&&!F?(v.push(g),g=[],u=O,F=!0):u+=V,!F&&!m&&g.push(k),g=g.concat(w),D=m?0:this._measureWord([k],d,T),T++,F=!1,O>P&&(P=O);return te&&v.push(g),P+$>this.dynamicMinWidth&&(this.dynamicMinWidth=P-V+$),v},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var d=r.Text.prototype._splitTextIntoLines.call(this,c),a=this._wrapText(d.lines,this.width),l=new Array(a.length),u=0;u<a.length;u++)l[u]=a[u].join("");return d.lines=l,d.graphemeLines=a,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var d in this._styleMap)this._textLines[d]&&(c[this._styleMap[d].line]=1);for(var d in this.styles)c[d]||delete this.styles[d]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),r.Textbox.fromObject=function(c,d){var a=r.util.stylesFromArray(c.styles,c.text),l=Object.assign({},c,{styles:a});return r.Object._fromObject("Textbox",l,d,"text")}}(e),function(){var f=t.controlsUtils,r=f.scaleSkewCursorStyleHandler,c=f.scaleCursorStyleHandler,d=f.scalingEqually,a=f.scalingYOrSkewingX,l=f.scalingXOrSkewingY,u=f.scaleOrSkewActionName,m=t.Object.prototype.controls;if(m.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:u}),m.mr=new t.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:u}),m.mb=new t.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:a,getActionName:u}),m.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:a,getActionName:u}),m.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:d}),m.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:d}),m.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:d}),m.br=new t.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:d}),m.mtr=new t.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var v=t.Textbox.prototype.controls={};v.mtr=m.mtr,v.tr=m.tr,v.br=m.br,v.tl=m.tl,v.bl=m.bl,v.mt=m.mt,v.mb=m.mb,v.mr=new t.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),v.ml=new t.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()}(Tf)),Tf}var Xe=ZD();const cw=M.createContext(),uw=()=>{const e=M.useContext(cw);if(!e)throw new Error("useLayer must be used within LayerProvider");return e},QD=({children:e})=>{const[t,s]=M.useState([]),[h,y]=M.useState(null),x=M.useRef(0),S=M.useCallback((P,F="default",V={})=>{const $={id:`layer-${x.current++}`,name:P,type:F,visible:!0,opacity:V.opacity!==void 0?V.opacity:100,locked:!1,objects:[],metadata:V.metadata||{},createdAt:new Date().toISOString(),zIndex:t.length};return s(te=>[...te,$]),y($.id),$},[t.length]),f=M.useCallback(P=>{s(F=>F.filter(V=>V.id!==P)),h===P&&y(F=>{const V=t.filter($=>$.id!==P);return V.length>0?V[V.length-1].id:null})},[h,t]),r=M.useCallback((P,F)=>{s(V=>V.map($=>$.id===P?{...$,...F}:$))},[]),c=M.useCallback(P=>{s(F=>F.map(V=>V.id===P?{...V,visible:!V.visible}:V))},[]),d=M.useCallback((P,F)=>{s(V=>V.map($=>$.id===P?{...$,opacity:Math.max(0,Math.min(100,F))}:$))},[]),a=M.useCallback(P=>{s(F=>F.map(V=>V.id===P?{...V,locked:!V.locked}:V))},[]),l=M.useCallback((P,F)=>{s(V=>{const $=Array.from(V),[te]=$.splice(P,1);return $.splice(F,0,te),$.map((X,Q)=>({...X,zIndex:Q}))})},[]),u=M.useCallback(P=>{s(F=>{const V=F.findIndex($=>$.id===P);if(V<F.length-1){const $=Array.from(F);return[$[V],$[V+1]]=[$[V+1],$[V]],$.map((te,X)=>({...te,zIndex:X}))}return F})},[]),m=M.useCallback(P=>{s(F=>{const V=F.findIndex($=>$.id===P);if(V>0){const $=Array.from(F);return[$[V],$[V-1]]=[$[V-1],$[V]],$.map((te,X)=>({...te,zIndex:X}))}return F})},[]),v=M.useCallback((P,F)=>{s(V=>V.map($=>$.id===P?{...$,objects:[...$.objects,F]}:$)),F&&(F.layerId=P)},[]),g=M.useCallback((P,F)=>{s(V=>V.map($=>$.id===P?{...$,objects:$.objects.filter(te=>te!==F)}:$))},[]),b=M.useCallback(P=>t.find(F=>F.id===P),[t]),w=M.useCallback(()=>t.find(P=>P.id===h),[t,h]),T=M.useCallback(P=>{const F=b(P);if(F)return S(`${F.name} Copy`,F.type,{opacity:F.opacity,metadata:{...F.metadata}})},[b,S]),k=M.useCallback(()=>{s([]),y(null)},[]),O=M.useCallback(P=>{const F=t.filter(te=>P.includes(te.id));if(F.length<2)return;const V=F.flatMap(te=>te.objects),$=S("Merged Layer","merged",{opacity:100,metadata:{mergedFrom:P}});return V.forEach(te=>{v($.id,te)}),P.forEach(te=>f(te)),$},[t,S,v,f]),D={layers:t,activeLayerId:h,setActiveLayerId:y,createLayer:S,deleteLayer:f,updateLayer:r,toggleLayerVisibility:c,setLayerOpacity:d,toggleLayerLock:a,reorderLayers:l,moveLayerUp:u,moveLayerDown:m,addObjectToLayer:v,removeObjectFromLayer:g,getLayerById:b,getActiveLayer:w,duplicateLayer:T,clearLayers:k,mergeLayers:O};return _.jsx(cw.Provider,{value:D,children:e})},um=(e,t,s,h)=>{const{createLayer:y,getActiveLayer:x,addObjectToLayer:S,removeObjectFromLayer:f,layers:r,setActiveLayerId:c}=uw(),d=M.useRef(null);M.useEffect(()=>{if(h&&!d.current){const v=r.find(g=>g.type===t&&g.objects.length===0);if(v)d.current=v,c(v.id);else{const g=y(e,t,{metadata:{createdBy:e}});d.current=g}}},[h,e,t,y,r,c]);const a=M.useCallback(v=>{const g=d.current||x();if(g&&v&&(S(g.id,v),v.set({opacity:g.opacity/100,visible:g.visible,layerId:g.id}),s)){const b=()=>{const w=r.find(T=>T.id===g.id);w&&v&&(v.set({opacity:w.opacity/100,visible:w.visible}),s.renderAll())};v._layerUpdateFn=b}},[S,x,r,s]),l=M.useCallback(v=>{const g=d.current||x();g&&v&&(f(g.id,v),v._layerUpdateFn&&delete v._layerUpdateFn)},[f,x]),u=M.useCallback(()=>d.current||x(),[x]),m=M.useCallback(()=>{const v=u();if(!(!v||!s))try{v.objects.forEach(g=>{g&&g.set({opacity:v.opacity/100,visible:v.visible,selectable:!v.locked,evented:!v.locked})}),s.getContext&&s.getContext("2d")&&s.renderAll()}catch(g){console.warn("Error syncing layer to objects:",g)}},[u,s]);return M.useEffect(()=>{m()},[r,m]),M.useEffect(()=>{h||(d.current=null)},[h]),{currentLayer:d.current,addToLayer:a,removeFromLayer:l,getCurrentLayer:u,syncLayerToObjects:m}},JD=({canvas:e,isActive:t,brushColor:s="#ff0000",brushWidth:h=5})=>{const y=M.useRef(null),{addToLayer:x,getCurrentLayer:S}=um("Brush","brush",e,t);return Le.useEffect(()=>{var f;if(e&&t){y.current=new Xe.fabric.PencilBrush(e),y.current.width=h,y.current.color=s,e.isDrawingMode=!0,e.freeDrawingBrush=y.current,e.contextTop&&(e.contextTop.globalCompositeOperation="source-over");const r=c=>{var d;c.path&&(x(c.path),console.log(" Brush stroke added to layer:",(d=S())==null?void 0:d.name))};return e.on("path:created",r),console.log(" Brush tool activated with layer:",(f=S())==null?void 0:f.name),()=>{e.off("path:created",r)}}},[e,t,s,h,x,S]),Le.useEffect(()=>{e&&!t&&(e.isDrawingMode=!1,console.log(" Brush tool deactivated"))},[e,t]),_.jsxs("div",{className:"brush-tool",children:[_.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Brush Tool - Draw freely"}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("label",{className:"text-xs",children:"Color:"}),_.jsx("input",{type:"color",value:s,onChange:f=>{y.current&&(y.current.color=f.target.value)},className:"w-8 h-6 rounded border"}),_.jsx("label",{className:"text-xs",children:"Width:"}),_.jsx("input",{type:"range",min:"1",max:"20",value:h,onChange:f=>{y.current&&(y.current.width=parseInt(f.target.value))},className:"w-20"}),_.jsxs("span",{className:"text-xs",children:[h,"px"]})]})]})};M.forwardRef(({canvas:e,isActive:t},s)=>{const[h,y]=Le.useState(20),[x,S]=Le.useState(!1),f=M.useRef(!1),r=M.useRef(null);return M.useImperativeHandle(s,()=>({togglePanel:()=>S(c=>!c),showPanel:()=>S(!0),hidePanel:()=>S(!1)})),Le.useEffect(()=>{if(e&&t){e.isDrawingMode=!1,e.selection=!1,e.defaultCursor="none",e.hoverCursor="none";const c=w=>{f.current=!0;const T=e.getPointer(w.e);g(T),m(T)},d=w=>{const T=e.getPointer(w.e);g(T),f.current&&m(T)},a=()=>{f.current=!1},l=w=>{const T=e.getPointer(w.e);g(T)},u=()=>{f.current=!1,b()},m=w=>{const T=e.getObjects(),k=[];T.forEach(O=>{O===e.backgroundImage||O===r.current||v(O,w,h/2)&&k.push(O)}),k.forEach(O=>{e.remove(O)}),k.length>0&&e.renderAll()},v=(w,T,k)=>{const O=w.getBoundingRect(),D=O.left+O.width/2,P=O.top+O.height/2,F=Math.sqrt(Math.pow(T.x-D,2)+Math.pow(T.y-P,2)),V=Math.max(O.width,O.height)/2;return F<k+V},g=w=>{r.current?(r.current.set({left:w.x,top:w.y,radius:h/2}),r.current.setCoords()):(r.current=new Xe.fabric.Circle({left:w.x,top:w.y,radius:h/2,fill:"transparent",stroke:"#ff0000",strokeWidth:2,strokeDashArray:[5,5],selectable:!1,evented:!1,excludeFromExport:!0,originX:"center",originY:"center"}),e.add(r.current)),e.bringToFront(r.current),e.requestRenderAll()},b=()=>{r.current&&(e.remove(r.current),r.current=null,e.renderAll())};return e.on("mouse:down",c),e.on("mouse:move",d),e.on("mouse:up",a),e.on("mouse:over",l),e.on("mouse:leave",u),console.log(" Eraser tool activated"),()=>{e.off("mouse:down",c),e.off("mouse:move",d),e.off("mouse:up",a),e.off("mouse:over",l),e.off("mouse:leave",u),b()}}else e&&!t&&(e.isDrawingMode=!1,e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",r.current&&(e.remove(r.current),r.current=null,e.renderAll()),console.log(" Eraser tool deactivated"))},[e,t,h]),_.jsx("div",{className:"eraser-tool p-3 border-t border-gray-200",children:x?_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Eraser Tool"}),_.jsx("button",{onClick:()=>S(!1),className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:""})]}),_.jsxs("div",{className:"mb-3",children:[_.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Size: ",h,"px"]}),_.jsx("input",{type:"range",min:"10",max:"100",value:h,onChange:c=>{y(parseInt(c.target.value))},className:"w-full"})]}),_.jsx("div",{className:"mb-3 flex justify-center",children:_.jsx("div",{className:"border-2 border-dashed border-red-400 rounded-full bg-red-50",style:{width:`${Math.min(h,60)}px`,height:`${Math.min(h,60)}px`}})}),_.jsx("button",{onClick:()=>{e&&(e.getObjects().slice().forEach(d=>{d!==e.backgroundImage&&e.remove(d)}),e.renderAll(),console.log(" All objects cleared"))},className:"w-full px-3 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"Clear All"})]}):_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Eraser Active"}),_.jsx("button",{onClick:()=>S(!0),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Settings"})]})})});const eR=({canvas:e,isActive:t,lineColor:s="#ff0000",lineWidth:h=2})=>{const y=M.useRef(!1),x=M.useRef(null),S=M.useCallback(c=>{if(!e||!t)return;const d=e.getPointer(c.e),a=new Xe.fabric.Line([d.x,d.y,d.x,d.y],{stroke:s,strokeWidth:h,selectable:!0,evented:!0});e.add(a),e.setActiveObject(a),x.current=a,y.current=!0,console.log(" Line started at:",d)},[e,t,s,h]),f=M.useCallback(c=>{if(!e||!t||!y.current||!x.current)return;const d=e.getPointer(c.e);x.current.set({x2:d.x,y2:d.y}),e.renderAll()},[e,t]),r=M.useCallback(()=>{!e||!t||(y.current=!1,x.current=null,console.log(" Line finished"))},[e,t]);return Le.useEffect(()=>{if(e&&t)return e.isDrawingMode=!1,e.selection=!1,e.on("mouse:down",S),e.on("mouse:move",f),e.on("mouse:up",r),()=>{e.off("mouse:down",S),e.off("mouse:move",f),e.off("mouse:up",r)}},[e,t,S,f,r]),Le.useEffect(()=>{e&&!t&&(e.selection=!0,console.log(" Line tool deactivated"))},[e,t]),_.jsxs("div",{className:"line-tool",children:[_.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Line Tool - Click and drag to draw lines"}),_.jsxs("div",{className:"flex gap-2 items-center",children:[_.jsx("label",{className:"text-xs",children:"Color:"}),_.jsx("input",{type:"color",value:s,onChange:c=>{},className:"w-8 h-6 rounded border"}),_.jsx("label",{className:"text-xs",children:"Width:"}),_.jsx("input",{type:"range",min:"1",max:"10",value:h,onChange:c=>{},className:"w-20"}),_.jsxs("span",{className:"text-xs",children:[h,"px"]})]})]})},tR=({canvas:e,isActive:t})=>{const s=M.useRef(!1),h=M.useRef(null),y=M.useCallback(f=>{if(!e||!t)return;const r=e.getPointer(f.e),c=e.findTarget(f.e);c&&c!==e.backgroundImage&&(e.setActiveObject(c),s.current=!0,h.current=r,console.log(" Moving object:",c.type))},[e,t]),x=M.useCallback(f=>{if(!e||!t||!s.current)return;const r=e.getPointer(f.e),c=e.getActiveObject();if(c){const d=r.x-h.current.x,a=r.y-h.current.y;c.set({left:c.left+d,top:c.top+a}),e.renderAll(),h.current=r}},[e,t]),S=M.useCallback(()=>{!e||!t||(s.current=!1,h.current=null,console.log(" Move finished"))},[e,t]);return Le.useEffect(()=>{if(e&&t)return e.isDrawingMode=!1,e.selection=!0,e.on("mouse:down",y),e.on("mouse:move",x),e.on("mouse:up",S),()=>{e.off("mouse:down",y),e.off("mouse:move",x),e.off("mouse:up",S)}},[e,t,y,x,S]),Le.useEffect(()=>{e&&!t&&console.log(" Move tool deactivated")},[e,t]),_.jsxs("div",{className:"move-tool",children:[_.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Move Tool - Click and drag to move objects"}),_.jsx("div",{className:"text-xs text-gray-500",children:"Click on any object to select and move it"})]})},nR=M.forwardRef(({canvas:e,isActive:t,onClose:s},h)=>{const[y,x]=M.useState(!1),[S,f]=M.useState(!1),[r,c]=M.useState("free"),[d,a]=M.useState(!1),[l,u]=M.useState(null),[m,v]=M.useState(null),[g,b]=M.useState(!1),w=M.useRef(null),T=M.useRef([]),k=M.useCallback(()=>{if(!(e!=null&&e.backgroundImage))return;const K=e.backgroundImage,U=K._element||K._originalElement;if(!U)return;const q=e.getObjects().filter(Z=>!Z.excludeFromExport).map(Z=>({object:Z,left:Z.left,top:Z.top,path:Z.path?JSON.parse(JSON.stringify(Z.path)):null}));v({src:U.src,canvasWidth:e.width,canvasHeight:e.height,imageScaleX:K.scaleX,imageScaleY:K.scaleY,imageLeft:K.left,imageTop:K.top,objectsState:q}),b(!0)},[e]),O=M.useCallback(()=>{if(!e||!m)return;e.setWidth(m.canvasWidth),e.setHeight(m.canvasHeight);const K=e.getElement();K&&(K.width=m.canvasWidth,K.height=m.canvasHeight,K.style.width=`${m.canvasWidth}px`,K.style.height=`${m.canvasHeight}px`),m.objectsState&&m.objectsState.forEach(U=>{const q=U.object;q.set({left:U.left,top:U.top}),U.path&&q.path&&(q.path=JSON.parse(JSON.stringify(U.path)),q.setCoords())}),Xe.fabric.Image.fromURL(m.src,U=>{U.set({left:m.imageLeft,top:m.imageTop,scaleX:m.imageScaleX,scaleY:m.imageScaleY,selectable:!1,evented:!1}),e.setBackgroundImage(U,()=>{e.renderAll(),b(!1),v(null),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:m.canvasWidth,height:m.canvasHeight,canvas:e}}))})})},[e,m]),D=M.useCallback(()=>{w.current&&e&&(T.current.forEach(K=>e.remove(K)),T.current=[],e.remove(w.current),w.current=null,e.renderAll())},[e]),P=M.useCallback(K=>{if(!e)return;const U={left:0,top:0,width:e.width,height:e.height},q=K.width*K.scaleX,Z=K.height*K.scaleY,L=[new Xe.fabric.Rect({left:U.left,top:U.top,width:U.width,height:Math.max(0,K.top-U.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:U.left,top:K.top+Z,width:U.width,height:Math.max(0,U.height-(K.top+Z)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:U.left,top:K.top,width:Math.max(0,K.left-U.left),height:Z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:K.left+q,top:K.top,width:Math.max(0,U.width-(K.left+q)),height:Z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})];L.forEach(A=>e.add(A)),T.current=L},[e]),F=M.useCallback((K,U,q,Z)=>{if(!e)return;D(),w.current=new Xe.fabric.Rect({left:K,top:U,width:q,height:Z,fill:"transparent",stroke:"#007bff",strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockRotation:!0,borderColor:"#007bff",cornerColor:"#007bff",cornerSize:12,transparentCorners:!1}),e.add(w.current),P(w.current);const L=()=>P(w.current);w.current.on("moving",L),w.current.on("scaling",L),e.setActiveObject(w.current),e.renderAll()},[e,D,P]),V=M.useCallback(()=>{if(!e||!t)return;f(!0),e.isDrawingMode=!1,e.selection=!1,e.defaultCursor="crosshair",e.hoverCursor="crosshair";const K=e.width*.25,U=e.height*.25,q=e.width*.5,Z=e.height*.5;F(K,U,q,Z)},[e,t,F]),$=M.useCallback(()=>{e&&(f(!1),D(),e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[D,e]),te=M.useCallback(()=>{if(!w.current||!(e!=null&&e.backgroundImage))return;const K=w.current,U=e.backgroundImage,q=U._element||U._originalElement;if(!q)return;k();const Z=K.width*K.scaleX,L=K.height*K.scaleY,A=K.left,j=K.top,R=e.getObjects().filter(le=>!le.excludeFromExport&&le!==w.current&&!T.current.includes(le)),I=q.naturalWidth||q.width,B=q.naturalHeight||q.height,z=I/e.width,W=B/e.height,Y={left:A*z,top:j*W,width:Z*z,height:L*W},ne={left:Math.max(0,Math.min(Y.left,I)),top:Math.max(0,Math.min(Y.top,B)),width:Math.min(Y.width,I-Math.max(0,Y.left)),height:Math.min(Y.height,B-Math.max(0,Y.top))},ee=document.createElement("canvas");ee.width=Math.max(1,Math.round(ne.width)),ee.height=Math.max(1,Math.round(ne.height));const de=ee.getContext("2d");de.imageSmoothingEnabled=!0,de.imageSmoothingQuality="high",de.drawImage(q,Math.round(ne.left),Math.round(ne.top),Math.round(ne.width),Math.round(ne.height),0,0,Math.round(ne.width),Math.round(ne.height)),Xe.fabric.Image.fromURL(ee.toDataURL(),le=>{const we=Z/2,ue=L/2;le.set({left:we,top:ue,originX:"center",originY:"center",scaleX:1,scaleY:1,selectable:!1,evented:!1}),R.forEach(ge=>{const ve=ge.left-A,he=ge.top-j;ge.set({left:ve,top:he}),ge.path&&(ge.path.forEach(be=>{be.length>1&&(be[1]-=A),be.length>2&&(be[2]-=j),be.length>3&&(be[3]-=A),be.length>4&&(be[4]-=j),be.length>5&&(be[5]-=A),be.length>6&&(be[6]-=j)}),ge.setCoords())}),e.setWidth(Z),e.setHeight(L);const oe=e.getElement();oe&&(oe.width=Z,oe.height=L,oe.style.width=`${Z}px`,oe.style.height=`${L}px`),e.setBackgroundImage(le,()=>{e.renderAll(),$(),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:Z,height:L,canvas:e}}))})})},[e,k,$]),X=M.useCallback(K=>{if(!S||r!=="free"||!e)return;const U=e.getPointer(K.e);a(!0),u(U),D()},[S,r,e,D]),Q=M.useCallback(K=>{if(!S||r!=="free"||!d||!l||!e)return;const U=e.getPointer(K.e),q=Math.min(l.x,U.x),Z=Math.min(l.y,U.y),L=Math.abs(U.x-l.x),A=Math.abs(U.y-l.y);L>10&&A>10&&(D(),F(q,Z,L,A))},[S,r,d,l,e,D,F]),se=M.useCallback(K=>{!S||r!=="free"||!d||!e||(a(!1),u(null),w.current&&(w.current.set({selectable:!0,evented:!0}),e.renderAll()))},[S,r,d,e]);return M.useImperativeHandle(h,()=>({togglePanel:()=>x(K=>!K),showPanel:()=>x(!0),hidePanel:()=>x(!1),startCrop:V,cancelCrop:$,undoCrop:O,canUndo:g}),[V,$,O,g]),M.useEffect(()=>{e&&t?V():e&&!t&&w.current&&(f(!1),T.current.forEach(K=>e.remove(K)),T.current=[],e.remove(w.current),w.current=null,e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[e,t,V]),M.useEffect(()=>{if(!(!e||!S))return r==="free"&&(e.on("mouse:down",X),e.on("mouse:move",Q),e.on("mouse:up",se)),()=>{e.off("mouse:down",X),e.off("mouse:move",Q),e.off("mouse:up",se)}},[e,S,r,X,Q,se]),_.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!y&&!S?_.jsx("div",{className:"space-y-3",children:_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Ya,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Tool"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>x(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:14,className:"sm:w-4 sm:h-4"})}),_.jsx(Oe.button,{onClick:s,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):S?_.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx(Oe.div,{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:_.jsx(Ya,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-primary",children:"Crop Active"})]}),_.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[g&&_.jsx(Oe.button,{onClick:O,className:"p-2 sm:p-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Undo Last Crop",children:_.jsx(wy,{size:14,className:"sm:w-4 sm:h-4"})}),_.jsx(Oe.button,{onClick:te,className:"p-2 sm:p-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-green-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Apply Crop",children:_.jsx(W_,{size:14,className:"sm:w-4 sm:h-4"})}),_.jsx(Oe.button,{onClick:$,className:"p-2 sm:p-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-red-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Cancel",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),_.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:_.jsx("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:" Click and drag to draw crop area, then adjust as needed. Click  to apply or  to cancel."})})]}):_.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Ya,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Settings"})]}),_.jsx(Oe.button,{onClick:()=>x(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 shadow-sm hover:shadow-md",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[_.jsxs(Oe.button,{onClick:V,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[_.jsx(Ya,{size:16,className:"sm:w-4 sm:h-5"}),_.jsx("span",{children:"Start Crop"})]}),g&&_.jsxs(Oe.button,{onClick:O,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[_.jsx(wy,{size:16,className:"sm:w-4 sm:h-5"}),_.jsx("span",{children:"Undo Last Crop"})]})]})]})})}),iR=M.forwardRef(({canvas:e,isActive:t,onClose:s},h)=>{const[y,x]=M.useState(!1),[S,f]=M.useState(100),[r,c]=M.useState(!1),[d,a]=M.useState(null),[l,u]=M.useState(null),m=[25,50,75,100,125,150,200,300,400,500],v=M.useCallback(()=>{e&&u({zoom:e.getZoom(),viewportTransform:e.viewportTransform.slice()})},[e]),g=M.useCallback(()=>{e&&(v(),e.setViewportTransform([1,0,0,1,0,0]),e.setZoom(1),f(100),e.renderAll())},[e,v]),b=M.useCallback(()=>{if(!e)return;v();const te=e.getZoom(),X=Math.min(te*1.2,5);e.setZoom(X),f(Math.round(X*100)),e.renderAll()},[e,v]),w=M.useCallback(()=>{if(!e)return;v();const te=e.getZoom(),X=Math.max(te/1.2,.1);e.setZoom(X),f(Math.round(X*100)),e.renderAll()},[e,v]),T=M.useCallback(te=>{if(!e)return;v();const X=te/100;e.setZoom(X),f(te),e.renderAll()},[e,v]),k=M.useCallback(()=>{e&&(c(!0),e.defaultCursor="grab",e.hoverCursor="grab",e.selection=!1,e.isDrawingMode=!1,v())},[e,v]),O=M.useCallback(()=>{e&&(c(!1),e.defaultCursor="default",e.hoverCursor="move",e.selection=!0)},[e]),D=M.useCallback(te=>{if(!r||!e)return;const X=e.getPointer(te.e);a(X),e.defaultCursor="grabbing"},[r,e]),P=M.useCallback(te=>{if(!r||!d||!e)return;const X=e.getPointer(te.e),Q=X.x-d.x,se=X.y-d.y,K=e.viewportTransform.slice();K[4]+=Q,K[5]+=se,e.setViewportTransform(K),e.renderAll(),a(X)},[r,d,e]),F=M.useCallback(()=>{r&&(a(null),e.defaultCursor="grab")},[r,e]),V=M.useCallback(te=>{if(!e)return;te.preventDefault();const X=te.deltaY,Q=e.getZoom(),se=Math.max(.1,Math.min(5,Q-X*.001));v(),e.setZoom(se),f(Math.round(se*100)),e.renderAll()},[e,v]),$=M.useCallback(()=>{!e||!l||(e.setZoom(l.zoom),e.setViewportTransform(l.viewportTransform),f(Math.round(l.zoom*100)),e.renderAll())},[e,l]);return M.useImperativeHandle(h,()=>({togglePanel:()=>x(te=>!te),showPanel:()=>x(!0),hidePanel:()=>x(!1),zoomIn:b,zoomOut:w,resetZoom:g,setZoom:T,startPan:k,stopPan:O,undoZoom:$,canUndo:!!l}),[b,w,g,T,k,O,$,l]),M.useEffect(()=>{if(!(!e||!r))return e.on("mouse:down",D),e.on("mouse:move",P),e.on("mouse:up",F),()=>{e.off("mouse:down",D),e.off("mouse:move",P),e.off("mouse:up",F)}},[e,r,D,P,F]),M.useEffect(()=>{if(e)return e.on("mouse:wheel",V),()=>{e.off("mouse:wheel",V)}},[e,V]),M.useEffect(()=>{if(!e)return;const te=()=>{g()};return e.on("mouse:dblclick",te),()=>{e.off("mouse:dblclick",te)}},[e,g]),M.useEffect(()=>{if(!e)return;const te=()=>{const X=e.getZoom();f(Math.round(X*100))};return e.on("mouse:wheel",te),()=>{e.off("mouse:wheel",te)}},[e]),_.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!y&&!r?_.jsx("div",{className:"space-y-3",children:_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Ga,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Zoom Tool"}),_.jsxs("span",{className:"text-xs bg-accent dark:bg-background-primary px-2 py-0.5 rounded-lg text-accent-dark font-semibold",children:[S,"%"]})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>x(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:14,className:"sm:w-4 sm:h-4"})}),_.jsx(Oe.button,{onClick:s,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):r?_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-md",children:_.jsx(ql,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Pan Mode"})]}),_.jsx(Oe.button,{onClick:s,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl border border-orange-500",children:_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(ql,{size:18,className:"animate-pulse"}),_.jsx("p",{className:"text-sm font-semibold",children:"Click and drag to pan..."})]})}),_.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:_.jsxs("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:[_.jsx("strong",{children:"Click and drag"})," to pan around the canvas.",_.jsx("br",{}),_.jsx("strong",{children:"Mouse wheel"})," to zoom in/out.",_.jsx("br",{}),_.jsx("strong",{children:"Double-click"})," to fit to screen."]})}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs(Oe.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[_.jsx(Cy,{size:12}),_.jsx("span",{children:"Out"})]}),_.jsxs(Oe.button,{onClick:b,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[_.jsx(Ga,{size:12}),_.jsx("span",{children:"In"})]}),_.jsxs(Oe.button,{onClick:g,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[_.jsx(rc,{size:12}),_.jsx("span",{children:"Fit"})]})]})]}):_.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Ga,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Zoom & Pan Controls"})]}),_.jsx(Oe.button,{onClick:()=>x(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsx("div",{className:"bg-accent dark:bg-background-primary border border-border rounded-xl p-3 sm:p-4",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{className:"text-sm font-medium text-text",children:"Current Zoom"}),_.jsxs("span",{className:"text-lg sm:text-xl font-bold text-primary",children:[S,"%"]})]})}),_.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[_.jsxs("div",{className:"flex gap-2",children:[_.jsxs(Oe.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-md hover:shadow-lg shadow-gray-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[_.jsx(Cy,{size:16}),_.jsx("span",{children:"Zoom Out"})]}),_.jsxs(Oe.button,{onClick:b,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[_.jsx(Ga,{size:16}),_.jsx("span",{children:"Zoom In"})]})]}),_.jsxs(Oe.button,{onClick:g,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(rc,{size:16}),_.jsx("span",{children:"Fit to Screen"})]}),_.jsxs(Oe.button,{onClick:k,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(ql,{size:16}),_.jsx("span",{children:"Pan Mode"})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"block text-sm font-semibold text-text",children:"Quick Zoom"}),_.jsx("div",{className:"grid grid-cols-5 gap-1",children:m.map(te=>_.jsxs(Oe.button,{onClick:()=>T(te),className:`px-2 py-1.5 text-xs rounded-lg font-semibold shadow-sm ${S===te?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[te,"%"]},te))})]}),l&&_.jsxs(Oe.button,{onClick:$,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(wc,{size:16}),_.jsx("span",{children:"Undo Last Zoom"})]}),_.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx(bd,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),_.jsxs("div",{className:"text-sm text-text",children:[_.jsx("p",{className:"font-semibold mb-1",children:"Tips:"}),_.jsxs("ul",{className:"space-y-1 leading-relaxed",children:[_.jsx("li",{children:" Use mouse wheel to zoom in/out"}),_.jsx("li",{children:" Hold Space + drag to pan"}),_.jsx("li",{children:" Double-click to fit to screen"})]})]})]})})]})})}),cd=({canvas:e,isActive:t=!1,onToolChange:s,onSettingsChange:h,onClose:y,initialSettings:x={}})=>{const[S,f]=M.useState({size:15,minSize:5,maxSize:100,opacity:.8,shape:"circle",pressure:!0,preview:!0,smoothing:.7,hardness:.8,spacing:.25,flow:1,dynamics:!0,antiAliasing:!0,blendMode:"destination-out",...x}),[r,c]=M.useState(!1),[d,a]=M.useState(!1),[l,u]=M.useState(!1),[m,v]=M.useState(null),[g,b]=M.useState([]),[w,T]=M.useState(1),[k,O]=M.useState(0),[D,P]=M.useState([]),[F,V]=M.useState(!1),[$,te]=M.useState({totalErased:0,sessionTime:0,undoCount:0});M.useRef({x:0,y:0});const X=M.useRef(null);M.useRef([]);const Q=M.useRef([]);M.useRef([]);const se=M.useRef(!1);M.useRef(1),M.useRef({x:0,y:0}),M.useRef(0),M.useRef(null),M.useRef(null),M.useRef(Date.now());const K=M.useRef(null);Uv(1),Uv(.8);const U=M.useMemo(()=>{let Y=S.size;if(S.pressure&&(Y*=.3+w*.7),S.dynamics&&k>0){const ne=Math.min(k/1e3,1);Y*=1-ne*.3}return Math.max(S.minSize,Math.min(S.maxSize,Y))},[S.size,S.pressure,S.dynamics,S.minSize,S.maxSize,w,k]),q=M.useCallback(Y=>{var ee,de,le,we;if(!e||!t)return;(de=(ee=Y.e)==null?void 0:ee.preventDefault)==null||de.call(ee),(we=(le=Y.e)==null?void 0:le.stopPropagation)==null||we.call(le),e.discardActiveObject();const ne=e.getPointer(Y.e);se.current=!0,u(!0),X.current=ne,console.log(`

 =============== MOUSE DOWN - ERASING STARTED ===============`),console.log(" Mouse down at:",ne),console.log(" Canvas objects count:",e.getObjects().length),console.log(" isMouseDownRef.current:",se.current),R(ne)},[e,t]),Z=M.useCallback(Y=>{if(!e||!t)return;const ne=e.getPointer(Y.e);v(ne);const ee=e.contextTop;ee&&(ee.save(),ee.clearRect(0,0,e.width,e.height),ee.strokeStyle="#ff0000",ee.lineWidth=2,ee.setLineDash([5,5]),ee.beginPath(),ee.arc(ne.x,ne.y,S.size/2,0,Math.PI*2),ee.stroke(),ee.restore()),se.current?(console.log(" MOUSE MOVE (dragging) at:",ne,"| isMouseDown:",se.current),R(ne)):console.log(" MOUSE MOVE (hover) at:",ne,"| isMouseDown:",se.current)},[e,t,S.size]),L=M.useCallback(()=>{!e||!t||(console.log(" =============== MOUSE UP - ERASING FINISHED ==============="),console.log(" Setting isMouseDownRef.current to false"),se.current=!1,u(!1),X.current=null,console.log(` Erasing session ended

`))},[e,t]),A=M.useCallback(()=>{v(null),se.current&&L()},[L]),j=M.useCallback((Y,ne,ee,de,le,we)=>{const ue=Y-ee,oe=ne-de,ge=le-ee,ve=we-de,he=ue*ge+oe*ve,be=ge*ge+ve*ve;let Ee=-1;be!==0&&(Ee=he/be);let G,re;Ee<0?(G=ee,re=de):Ee>1?(G=le,re=we):(G=ee+Ee*ge,re=de+Ee*ve);const J=Y-G,xe=ne-re;return Math.sqrt(J*J+xe*xe)},[]),R=M.useCallback(Y=>{if(!e)return;console.log(`
 ==================== PERFORM ERASE ACTION ====================`),console.log(" Eraser position:",Y),console.log(" Eraser size:",S.size),console.log(" Tolerance:",8);const ne=e.getObjects(),ee=[],de=8;if(console.log(" Total objects on canvas:",ne.length),ne.length===0){console.log(" No objects on canvas to erase!");return}ne.forEach((le,we)=>{var oe;if(le===e.backgroundImage||le._isPreview){console.log(`Object ${we}: SKIPPED (background/preview)`);return}let ue=!1;if(console.log(`
--- Object ${we} ---`),console.log("Object type:",le.type),console.log("Object position - left:",le.left,"top:",le.top),console.log("Stroke width:",le.strokeWidth),le.type==="line"){const ge=le.x1+le.left,ve=le.y1+le.top,he=le.x2+le.left,be=le.y2+le.top;console.log("Line endpoints:",{x1:ge,y1:ve,x2:he,y2:be});const Ee=j(Y.x,Y.y,ge,ve,he,be),re=(le.strokeWidth||1)/2+de;console.log("Distance to line:",Ee.toFixed(2),"Threshold:",re.toFixed(2)),Ee<=re?(ue=!0,console.log(" WILL ERASE - within threshold")):console.log(" NO ERASE - too far from line")}else if(le.type==="path"){if(console.log(" PATH OBJECT FOUND"),console.log("   Path points count:",((oe=le.path)==null?void 0:oe.length)||0),console.log("   Stroke color:",le.stroke),console.log("   Stroke width:",le.strokeWidth),le.path&&le.path.length>0){const ve=(le.strokeWidth||1)/2+de;console.log("    Threshold for hit detection:",ve.toFixed(2),"px"),console.log("    First 5 path points:",le.path.slice(0,5).map((G,re)=>{var J,xe;return`[${re}]: [${(J=G[1])==null?void 0:J.toFixed(1)}, ${(xe=G[2])==null?void 0:xe.toFixed(1)}]`}).join(", "));let he=1/0,be=null,Ee=[];for(let G=0;G<le.path.length;G++){const re=le.path[G];if(re.length>=3){const J=re[1],xe=re[2],Se=Math.sqrt(Math.pow(Y.x-J,2)+Math.pow(Y.y-xe,2));if(Se<he&&(he=Se,be={px:J,py:xe,index:G,distance:Se.toFixed(2)}),Se<=ve&&(ue=!0,Ee.push({index:G,distance:Se.toFixed(2)})),G>0&&le.path[G-1].length>=3){const Ce=le.path[G-1][1],Me=le.path[G-1][2],je=j(Y.x,Y.y,Ce,Me,J,xe);je<he&&(he=je,be={px:J,py:xe,index:G,distance:je.toFixed(2),type:"line-segment"}),je<=ve&&(ue=!0,Ee.push({index:`${G-1}-${G}`,distance:je.toFixed(2),type:"line"}))}}}ue?(console.log(`    HIT DETECTED! - Hit ${Ee.length} points/segments:`,Ee),console.log("    Instead of partial erase, removing entire object for now..."),ue=!0,console.log("    Marking object for complete removal")):console.log(`    NO HIT - Closest distance: ${he.toFixed(2)}px at`,be)}}else{const ge=le.getBoundingRect();if(Y.x>=ge.left-de&&Y.x<=ge.left+ge.width+de&&Y.y>=ge.top-de&&Y.y<=ge.top+ge.height+de)if(le.containsPoint){const ve=new Xe.fabric.Point(Y.x,Y.y);ue=le.containsPoint(ve)}else ue=!0}ue&&(console.log(" Adding to removal list"),ee.push(le))}),console.log(`
 ========== SUMMARY ==========`),console.log("Objects marked for complete removal:",ee.length),ee.length>0?(ee.forEach((le,we)=>{console.log(`    Removing object ${we}:`,le.type),e.remove(le)}),e.requestRenderAll(),console.log(" Successfully removed",ee.length,"objects")):console.log(" No objects marked for complete removal"),console.log(" Final canvas objects count:",e.getObjects().length),console.log(`======================================================
`)},[e,U,j,S.size]),I=M.useCallback(Y=>{f(ne=>{const ee={...ne,...Y};return h==null||h(ee),ee})},[h]);M.useCallback(()=>{if(Q.current.length>0){const Y=Q.current.pop();e.loadFromJSON(Y,()=>{e.renderAll(),console.log(" Undo  ")})}},[e]);const B=M.useCallback(()=>{if(!e)return;const Y=JSON.stringify(e.toJSON());Q.current.push(Y),e.getObjects().forEach(ee=>{ee!==e.backgroundImage&&e.remove(ee)}),e.renderAll(),b([]),console.log("  objects  ")},[e]),z=M.useCallback(()=>{if(!e||!m)return;const Y=e.contextTop;Y&&(Y.save(),Y.clearRect(0,0,e.width,e.height),Y.strokeStyle="#ff0000",Y.lineWidth=2,Y.setLineDash([5,5]),Y.beginPath(),Y.arc(m.x,m.y,U/2,0,Math.PI*2),Y.stroke(),Y.restore())},[e,m,U]),W=M.useRef({handleMouseDown:null,handleMouseMove:null,handleMouseUp:null,handleMouseLeave:null});return M.useEffect(()=>{W.current.handleMouseDown=q,W.current.handleMouseMove=Z,W.current.handleMouseUp=L,W.current.handleMouseLeave=A}),M.useEffect(()=>{if(!e||!t)return;e.discardActiveObject(),e.renderAll();const Y=le=>{var we,ue;return(ue=(we=W.current).handleMouseDown)==null?void 0:ue.call(we,le)},ne=le=>{var we,ue;return(ue=(we=W.current).handleMouseMove)==null?void 0:ue.call(we,le)},ee=le=>{var we,ue;return(ue=(we=W.current).handleMouseUp)==null?void 0:ue.call(we,le)},de=le=>{var we,ue;return(ue=(we=W.current).handleMouseLeave)==null?void 0:ue.call(we,le)};return e.on("mouse:down",Y),e.on("mouse:move",ne),e.on("mouse:up",ee),e.on("mouse:leave",de),()=>{e.off("mouse:down",Y),e.off("mouse:move",ne),e.off("mouse:up",ee),e.off("mouse:leave",de)}},[e,t]),M.useEffect(()=>{z()},[z]),M.useEffect(()=>{e&&t?(e.defaultCursor="crosshair",e.hoverCursor="crosshair",e.isDrawingMode=!1,e.selection=!1,e.renderAll()):e&&!t&&(e.selection=!0,e.defaultCursor="default",e.hoverCursor="move",e.renderAll())},[e,t]),M.useEffect(()=>{if(e&&!t){const Y=e.contextTop;Y&&Y.clearRect(0,0,e.width,e.height)}},[e,t]),M.useEffect(()=>{const Y=ne=>{K.current&&!K.current.contains(ne.target)&&c(!1)};return document.addEventListener("mousedown",Y),document.addEventListener("touchstart",Y),()=>{document.removeEventListener("mousedown",Y),document.removeEventListener("touchstart",Y)}},[r]),_.jsx(Oe.div,{ref:K,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:d?_.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:_.jsx(oo,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Eraser Tool"})]}),_.jsx(Oe.button,{onClick:()=>a(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("label",{className:"text-sm font-semibold text-text",children:"Size"}),_.jsxs("span",{className:"text-xs text-text-muted",children:[U,"px"]})]}),_.jsx("input",{type:"range",min:S.minSize,max:S.maxSize,value:S.size,onChange:Y=>I({size:parseInt(Y.target.value)}),className:"w-full h-2 bg-accent rounded-lg appearance-none cursor-pointer slider"}),_.jsxs("div",{className:"flex justify-between text-xs text-text-muted mt-1",children:[_.jsxs("span",{children:[S.minSize,"px"]}),_.jsxs("span",{children:[S.maxSize,"px"]})]})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Shape"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"circle",label:"Circle",icon:xd},{value:"square",label:"Square",icon:Qi},{value:"line",label:"Line",icon:Si}].map(({value:Y,label:ne,icon:ee})=>_.jsxs(Oe.button,{onClick:()=>I({shape:Y}),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${S.shape===Y?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[_.jsx(ee,{size:18}),_.jsx("span",{className:"text-xs font-semibold",children:ne})]},Y))})]}),_.jsx("div",{className:"flex items-center justify-center bg-accent dark:bg-background-primary rounded-xl border border-border p-4",children:_.jsx("div",{className:`border-2 border-dashed border-red-400 bg-red-100 ${S.shape==="square"?"":"rounded-full"}`,style:{width:`${Math.min(U,60)}px`,height:S.shape==="line"?"4px":`${Math.min(U,60)}px`}})}),_.jsxs(Oe.button,{onClick:B,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(Sc,{size:18}),_.jsx("span",{children:"Clear All"})]}),g.length>0&&_.jsxs(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-xl text-sm text-orange-800 dark:text-orange-300",children:[g.length," objects erased"]})]}):_.jsx("div",{className:"space-y-3",children:_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:_.jsx(oo,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Eraser Tool"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>a(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:14,className:"sm:w-4 sm:h-4"})}),_.jsx(Oe.button,{onClick:y,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]})]})})})};cd.propTypes={canvas:Zt.object,isActive:Zt.bool,onToolChange:Zt.func,onSettingsChange:Zt.func,onClose:Zt.func,initialSettings:Zt.object};const hw=M.createContext(),fw=()=>{const e=M.useContext(hw);if(!e)throw new Error("useHistogram must be used within HistogramProvider");return e},rR=({children:e})=>{const[t,s]=M.useState(null),[h,y]=M.useState(null),[x,S]=M.useState("gray"),[f,r]=M.useState(null),c=M.useCallback((l,u,m=null)=>{s(l),y(u),r(m)},[]),d=M.useCallback(()=>{s(null),y(null),r(null)},[]),a=M.useCallback(l=>{S(l)},[]);return _.jsx(hw.Provider,{value:{histogramData:t,selectedPoint:h,currentChannel:x,selectionRegion:f,updateHistogram:c,clearHistogram:d,changeChannel:a},children:e})},sR=({canvas:e,isActive:t,onClose:s})=>{const[h,y]=M.useState("area"),[x,S]=M.useState(!1),[f,r]=M.useState(null),[c,d]=M.useState(!1),a=M.useRef(null),l=M.useRef([]),{updateHistogram:u}=fw(),{addToLayer:m,removeFromLayer:v}=um("Histogram Selection","histogram",e,t),g=M.useCallback(X=>{const Q={red:new Array(256).fill(0),green:new Array(256).fill(0),blue:new Array(256).fill(0),gray:new Array(256).fill(0)};for(let K=0;K<X.length;K+=4){const U=X[K],q=X[K+1],Z=X[K+2],L=Math.round(.299*U+.587*q+.114*Z);Q.red[U]++,Q.green[q]++,Q.blue[Z]++,Q.gray[L]++}const se=X.length/4;return Object.keys(Q).forEach(K=>{Q[K]=Q[K].map(U=>U/se*100)}),Q},[]),b=M.useCallback((X,Q)=>{if(!e)return null;try{const U=e.getContext("2d").getImageData(X,Q,1,1).data;return{r:U[0],g:U[1],b:U[2],a:U[3]}}catch(se){return console.error("Error getting pixel data:",se),null}},[e]),w=M.useCallback(X=>{let Q=0,se=0,K=0,U=0;const q=X.data,Z=q.length/4;for(let L=0;L<q.length;L+=4)Q+=q[L],se+=q[L+1],K+=q[L+2],U+=q[L+3];return{r:Math.round(Q/Z),g:Math.round(se/Z),b:Math.round(K/Z),a:Math.round(U/Z)}},[]),T=M.useCallback(X=>{if(!e)return;const Q={left:0,top:0,width:e.width,height:e.height};let se=[];if(X.type==="circle"){const K=new Xe.fabric.Rect({left:Q.left,top:Q.top,width:Q.width,height:Q.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),U=new Xe.fabric.Circle({left:X.left,top:X.top,radius:X.radius,fill:"transparent",stroke:"transparent",originX:"center",originY:"center",selectable:!1,evented:!1,excludeFromExport:!0,globalCompositeOperation:"destination-out"});se=[K,U]}else if(X.type==="rect"){const K=X.width*(X.scaleX||1),U=X.height*(X.scaleY||1);se=[new Xe.fabric.Rect({left:Q.left,top:Q.top,width:Q.width,height:Math.max(0,X.top-Q.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:Q.left,top:X.top+U,width:Q.width,height:Math.max(0,Q.height-(X.top+U)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:Q.left,top:X.top,width:Math.max(0,X.left-Q.left),height:U,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:X.left+K,top:X.top,width:Math.max(0,Q.width-(X.left+K)),height:U,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]}else X.type==="line"&&(se=[new Xe.fabric.Rect({left:Q.left,top:Q.top,width:Q.width,height:Q.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]);se.forEach(K=>e.add(K)),l.current=se},[e]),k=M.useCallback(()=>{if(e)try{l.current.forEach(X=>{X&&(e.remove(X),v(X))}),l.current=[],a.current&&(e.remove(a.current),v(a.current),a.current=null),e.getContext&&e.getContext("2d")&&e.renderAll()}catch(X){console.warn("Error removing selection objects:",X)}},[e,v]),O=M.useCallback(X=>{const Q=Math.round(X.x),se=Math.round(X.y);console.log(" Point Selection:"),console.log("  Position:",{x:Q,y:se});const K=b(Q,se);console.log("  Pixel at point:",K);try{const U=e.getContext("2d"),q=50,Z=U.getImageData(Math.max(0,Q-q),Math.max(0,se-q),Math.min(q*2,e.width-(Q-q)),Math.min(q*2,e.height-(se-q)));console.log("  Analyzed pixels:",Z.data.length/4),console.log("  Area size:",Z.width,"x",Z.height);const L=g(Z.data);console.log("  Histogram calculated - Red channel sample:",L.red.slice(0,10));const A=new Xe.fabric.Circle({left:Q,top:se,radius:q,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,originX:"center",originY:"center",selectable:!1,evented:!1});u(L,{x:Q,y:se,pixel:K,mode:"point"},{type:"point",x:Q,y:se,radius:q,fabricObject:A}),k(),a.current=A,e.add(A),m(A),T(A),l.current.forEach(R=>m(R)),e.renderAll()}catch(U){console.error(" Error calculating histogram:",U)}},[e,b,g,u,k,T,m]),D=M.useCallback((X,Q,se,K)=>{console.log(" Area Selection:"),console.log("  Start:",{x:X,y:Q}),console.log("  End:",{x:se,y:K});try{const U=e.getContext("2d"),q=Math.min(X,se),Z=Math.min(Q,K),L=Math.abs(se-X),A=Math.abs(K-Q);console.log("  Rectangle:",{left:q,top:Z,width:L,height:A});const j=U.getImageData(q,Z,L,A);console.log("  Analyzed pixels:",j.data.length/4);const R=g(j.data),I=w(j);console.log("  Average pixel:",I),console.log("  Histogram calculated - Red channel sample:",R.red.slice(0,10));const B=new Xe.fabric.Rect({left:q,top:Z,width:L,height:A,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),z={type:"area",left:q,top:Z,width:L,height:A,fabricObject:B};u(R,{x:Math.round((X+se)/2),y:Math.round((Q+K)/2),pixel:I,mode:"area",width:L,height:A},z),k(),a.current=B,e.add(B),m(B),T(B),l.current.forEach(W=>m(W)),e.renderAll()}catch(U){console.error(" Error calculating histogram:",U)}},[e,g,w,u,k,T,m]),P=M.useCallback((X,Q,se,K)=>{console.log(" Line Selection:"),console.log("  Start:",{x:X,y:Q}),console.log("  End:",{x:se,y:K});try{const U=e.getContext("2d"),q=[],Z=Math.abs(se-X),L=Math.abs(K-Q),A=X<se?1:-1,j=Q<K?1:-1;let R=Z-L,I=X,B=Q;for(;q.push({x:I,y:B}),!(I===se&&B===K);){const le=2*R;le>-L&&(R-=L,I+=A),le<Z&&(R+=Z,B+=j)}console.log("  Points on line:",q.length),console.log("  First 5 points:",q.slice(0,5));const z=[];q.forEach(le=>{const we=U.getImageData(le.x,le.y,1,1);z.push(...Array.from(we.data))}),console.log("  Total pixels analyzed:",z.length/4);const W=g(new Uint8ClampedArray(z)),Y=w({data:new Uint8ClampedArray(z)}),ne=Math.round(Math.sqrt(Z*Z+L*L));console.log("  Line length:",ne,"pixels"),console.log("  Average pixel:",Y),console.log("  Histogram calculated - Red channel sample:",W.red.slice(0,10));const ee=new Xe.fabric.Line([X,Q,se,K],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),de={type:"line",x1:X,y1:Q,x2:se,y2:K,length:ne,fabricObject:ee};u(W,{x:Math.round((X+se)/2),y:Math.round((Q+K)/2),pixel:Y,mode:"line",length:ne},de),k(),a.current=ee,e.add(ee),m(ee),T(ee),l.current.forEach(le=>m(le)),e.renderAll()}catch(U){console.error(" Error calculating histogram:",U)}},[e,g,w,u,k,T,m]),F=M.useCallback(X=>{if(!e||!t||!x)return;const Q=e.getPointer(X.e);r(Q),h==="point"&&(O(Q),S(!1),e.defaultCursor="default",e.hoverCursor="move")},[e,t,x,h,O]),V=M.useCallback(X=>{if(!e||!t||!x||!f||h==="point")return;const Q=e.getPointer(X.e);if(k(),h==="area"){const se=new Xe.fabric.Rect({left:Math.min(f.x,Q.x),top:Math.min(f.y,Q.y),width:Math.abs(Q.x-f.x),height:Math.abs(Q.y-f.y),fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=se,e.add(se)}else if(h==="line"){const se=new Xe.fabric.Line([f.x,f.y,Q.x,Q.y],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=se,e.add(se)}e.renderAll()},[e,t,x,f,h,k]),$=M.useCallback(X=>{if(!e||!t||!x||!f||h==="point")return;const Q=e.getPointer(X.e);h==="area"?D(f.x,f.y,Q.x,Q.y):h==="line"&&P(Math.round(f.x),Math.round(f.y),Math.round(Q.x),Math.round(Q.y)),S(!1),r(null),e.defaultCursor="default",e.hoverCursor="move"},[e,t,x,f,h,D,P]),te=M.useCallback(()=>{e&&(S(!0),e.defaultCursor="crosshair",e.hoverCursor="crosshair")},[e]);return M.useEffect(()=>{if(!(!e||!t))return e.on("mouse:down",F),e.on("mouse:move",V),e.on("mouse:up",$),()=>{e.off("mouse:down",F),e.off("mouse:move",V),e.off("mouse:up",$)}},[e,t,F,V,$]),M.useEffect(()=>{t&&e?te():!t&&e&&(S(!1),r(null),k(),e.defaultCursor="default",e.hoverCursor="move")},[t,e,k]),_.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!c&&!x?_.jsx("div",{className:"space-y-3",children:_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Wa,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Histogram Tool"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>{d(!0),S(!1)},className:"p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:16})}),_.jsx(Oe.button,{onClick:s,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:16})})]})]})}):x?_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Wa,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>{d(!0),S(!1)},className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx(Oe.button,{onClick:s,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),_.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl border border-primary",children:_.jsxs("div",{className:"flex items-center gap-2",children:[h==="point"&&_.jsx(Jh,{size:18,className:"animate-pulse"}),h==="area"&&_.jsx(Qi,{size:18,className:"animate-pulse"}),h==="line"&&_.jsx(Si,{size:18,className:"animate-pulse"}),_.jsxs("p",{className:"text-sm font-semibold",children:[h==="point"&&"Click anywhere on the image...",h==="area"&&"Click and drag to select area...",h==="line"&&"Click and drag to draw line..."]})]})})]}):_.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:_.jsx(Wa,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),_.jsx(Oe.button,{onClick:()=>d(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Selection Mode"}),_.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"point",label:"Point",icon:Jh},{mode:"area",label:"Area",icon:Qi},{mode:"line",label:"Line",icon:Si}].map(({mode:X,label:Q,icon:se})=>_.jsxs(Oe.button,{onClick:()=>y(X),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${h===X?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[_.jsx(se,{size:18}),_.jsx("span",{className:"text-xs font-semibold",children:Q})]},X))})]}),_.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx(bd,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),_.jsxs("p",{className:"text-sm text-text leading-relaxed",children:[h==="point"&&"Click on a point to analyze 50px radius around it",h==="area"&&"Click and drag to select a rectangular area",h==="line"&&"Click and drag to draw a line across the image"]})]})}),_.jsxs(Oe.button,{onClick:te,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h==="point"&&_.jsx(Jh,{size:18}),h==="area"&&_.jsx(Qi,{size:18}),h==="line"&&_.jsx(Si,{size:18}),_.jsxs("span",{children:["Start ",h==="point"?"Point":h==="area"?"Area":"Line"," Selection"]})]})]})})},dw=M.createContext(),mw=()=>{const e=M.useContext(dw);if(!e)throw new Error("useIntensityProfile must be used within IntensityProfileProvider");return e},aR=({children:e})=>{const[t,s]=M.useState([]),[h,y]=M.useState(null),[x,S]=M.useState(null),f=M.useCallback(u=>{const m={id:`profile-${Date.now()}`,timestamp:new Date().toISOString(),...u};return s(v=>[...v,m]),y(m.id),m},[]),r=M.useCallback(u=>{s(m=>m.filter(v=>v.id!==u)),h===u&&y(null)},[h]),c=M.useCallback((u,m)=>{s(v=>v.map(g=>g.id===u?{...g,...m}:g))},[]),d=M.useCallback(()=>{s([]),y(null),S(null)},[]),a=M.useCallback(()=>t.find(u=>u.id===h),[t,h]),l={profiles:t,activeProfileId:h,selectedRegion:x,setActiveProfileId:y,setSelectedRegion:S,addProfile:f,removeProfile:r,updateProfile:c,clearProfiles:d,getActiveProfile:a};return _.jsx(dw.Provider,{value:l,children:e})},oR=({canvas:e,isActive:t,onClose:s})=>{const[h,y]=M.useState("line"),[x,S]=M.useState(!1),[f,r]=M.useState(null),[c,d]=M.useState(!1),a=M.useRef(null),{addProfile:l,selectedRegion:u,setSelectedRegion:m}=mw(),{addToLayer:v,removeFromLayer:g,getCurrentLayer:b}=um("Intensity Profile","intensity-profile",e,t);M.useEffect(()=>{console.log(" IntensityProfileTool render - canvas:",!!e,"isActive:",t,"isDrawing:",x)},[e,t,x]);const w=M.useCallback((te,X,Q,se)=>{if(!e)return null;try{const K=e.getContext("2d"),U=[],q=Math.abs(Q-te),Z=Math.abs(se-X),L=te<Q?1:-1,A=X<se?1:-1;let j=q-Z,R=Math.round(te),I=Math.round(X);const B=Math.round(Q),z=Math.round(se);for(;;){const Y=K.getImageData(R,I,1,1).data,ne=.299*Y[0]+.587*Y[1]+.114*Y[2];if(U.push({x:R,y:I,r:Y[0],g:Y[1],b:Y[2],intensity:ne,distance:Math.sqrt((R-te)**2+(I-X)**2)}),R===B&&I===z)break;const ee=2*j;ee>-Z&&(j-=Z,R+=L),ee<q&&(j+=q,I+=A)}return U}catch(K){return console.error("Error calculating line intensity:",K),null}},[e]),T=M.useCallback((te,X,Q,se)=>{if(!e)return null;try{const q=e.getContext("2d").getImageData(te,X,Q,se).data,Z=[];for(let Y=0;Y<Q;Y++){let ne=0,ee=0,de=0,le=0;for(let we=0;we<se;we++){const ue=(we*Q+Y)*4,oe=q[ue],ge=q[ue+1],ve=q[ue+2],he=.299*oe+.587*ge+.114*ve;ne+=oe,ee+=ge,de+=ve,le+=he}Z.push({position:Y,r:ne/se,g:ee/se,b:de/se,intensity:le/se})}const L=[];for(let Y=0;Y<se;Y++){let ne=0,ee=0,de=0,le=0;for(let we=0;we<Q;we++){const ue=(Y*Q+we)*4,oe=q[ue],ge=q[ue+1],ve=q[ue+2],he=.299*oe+.587*ge+.114*ve;ne+=oe,ee+=ge,de+=ve,le+=he}L.push({position:Y,r:ne/Q,g:ee/Q,b:de/Q,intensity:le/Q})}const A=[];for(let Y=0;Y<q.length;Y+=4){const ne=.299*q[Y]+.587*q[Y+1]+.114*q[Y+2];A.push(ne)}const j=A.reduce((Y,ne)=>Y+ne,0)/A.length,R=[...A].sort((Y,ne)=>Y-ne),I=R[0],B=R[R.length-1],z=R[Math.floor(R.length/2)],W=Math.sqrt(A.reduce((Y,ne)=>Y+(ne-j)**2,0)/A.length);return{horizontalProfile:Z,verticalProfile:L,statistics:{mean:j,min:I,max:B,median:z,stdDev:W,pixelCount:A.length}}}catch(K){return console.error("Error calculating rectangle intensity:",K),null}},[e]),k=M.useCallback(()=>{a.current&&e&&(e.remove(a.current),g(a.current),a.current=null,e.renderAll())},[e,g]),O=M.useCallback((te,X,Q,se)=>{k();const K=new Xe.fabric.Line([te,X,Q,se],{stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=K,e.add(K),v(K),e.renderAll();const U=w(te,X,Q,se);if(U){const q=l({type:"line",region:{x1:te,y1:X,x2:Q,y2:se},data:U,length:Math.sqrt((Q-te)**2+(se-X)**2)});m({type:"line",fabricObject:K,profile:q}),console.log(" Line intensity profile calculated:",U.length,"points")}},[e,v,w,l,m,k]),D=M.useCallback((te,X,Q,se)=>{k();const K=Math.min(te,Q),U=Math.min(X,se),q=Math.abs(Q-te),Z=Math.abs(se-X),L=new Xe.fabric.Rect({left:K,top:U,width:q,height:Z,fill:"transparent",stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=L,e.add(L),v(L),e.renderAll();const A=T(K,U,q,Z);if(A){const j=l({type:"rectangle",region:{left:K,top:U,width:q,height:Z},data:A,area:q*Z});m({type:"rectangle",fabricObject:L,profile:j}),console.log(" Rectangle intensity profiles calculated"),console.log("  Horizontal profile:",A.horizontalProfile.length,"points"),console.log("  Vertical profile:",A.verticalProfile.length,"points"),console.log("  Statistics:",A.statistics)}},[e,v,T,l,m,k]),P=M.useCallback(te=>{if(console.log(" Mouse down - isActive:",t,"isDrawing:",x),!e||!t||!x)return;const X=e.getPointer(te.e);console.log(" Start point:",X),r(X)},[e,t,x]),F=M.useCallback(te=>{if(!e||!t||!x||!f)return;const X=e.getPointer(te.e);if(k(),h==="line"){const Q=new Xe.fabric.Line([f.x,f.y,X.x,X.y],{stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1,opacity:.7});a.current=Q,e.add(Q)}else if(h==="rectangle"){const Q=new Xe.fabric.Rect({left:Math.min(f.x,X.x),top:Math.min(f.y,X.y),width:Math.abs(X.x-f.x),height:Math.abs(X.y-f.y),fill:"transparent",stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1,opacity:.7});a.current=Q,e.add(Q)}e.renderAll()},[e,t,x,f,h,k]),V=M.useCallback(te=>{if(console.log(" Mouse up - isActive:",t,"isDrawing:",x,"startPoint:",f),!e||!t||!x||!f)return;const X=e.getPointer(te.e);console.log(" End point:",X),h==="line"?(console.log(" Drawing line profile"),O(Math.round(f.x),Math.round(f.y),Math.round(X.x),Math.round(X.y))):h==="rectangle"&&(console.log(" Drawing rectangle profile"),D(Math.round(f.x),Math.round(f.y),Math.round(X.x),Math.round(X.y))),S(!1),r(null),e.defaultCursor="default",e.hoverCursor="move"},[e,t,x,f,h,O,D]);M.useEffect(()=>{if(!(!e||!t))return console.log(" Setting up intensity profile event listeners"),e.on("mouse:down",P),e.on("mouse:move",F),e.on("mouse:up",V),()=>{console.log(" Cleaning up intensity profile event listeners"),e.off("mouse:down",P),e.off("mouse:move",F),e.off("mouse:up",V)}},[e,t,P,F,V]),M.useEffect(()=>{t&&e?$():!t&&e&&(S(!1),r(null),k(),e.defaultCursor="default",e.hoverCursor="move")},[t,e,k]);const $=M.useCallback(()=>{e&&(console.log(" Starting intensity profile drawing, mode:",h),S(!0),e.defaultCursor="crosshair",e.hoverCursor="crosshair")},[e,h]);return _.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!c&&!x?_.jsx("div",{className:"space-y-3",children:_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:_.jsx(Ms,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Intensity Profile"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>{d(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:16})}),_.jsx(Oe.button,{onClick:s,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:16})})]})]})}):x?_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:_.jsx(Ms,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Oe.button,{onClick:()=>{d(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:_.jsx(en,{size:16,className:"sm:w-5 sm:h-5"})}),_.jsx(Oe.button,{onClick:s,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:_.jsx($t,{size:16,className:"sm:w-4 sm:h-4"})})]})]}),_.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl border border-green-500",children:_.jsxs("div",{className:"flex items-center gap-2",children:[h==="line"?_.jsx(Si,{size:18,className:"animate-pulse"}):_.jsx(Qi,{size:18,className:"animate-pulse"}),_.jsxs("p",{className:"text-sm font-semibold",children:[h==="line"&&"Click and drag to draw line...",h==="rectangle"&&"Click and drag to draw rectangle..."]})]})})]}):_.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:_.jsx(Ms,{size:20})}),_.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),_.jsx(Oe.button,{onClick:()=>d(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"})})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Region Type"}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{mode:"line",label:"Line",icon:Si},{mode:"rectangle",label:"Rectangle",icon:Qi}].map(({mode:te,label:X,icon:Q})=>_.jsxs(Oe.button,{onClick:()=>y(te),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${h===te?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[_.jsx(Q,{size:18}),_.jsx("span",{className:"text-xs font-semibold",children:X})]},te))})]}),_.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx(bd,{size:18,className:"text-green-500 mt-0.5 flex-shrink-0"}),_.jsxs("p",{className:"text-sm text-text leading-relaxed",children:[h==="line"&&"Draw a line to get intensity profile along the path",h==="rectangle"&&"Draw a rectangle to get average horizontal and vertical intensity profiles"]})]})}),_.jsxs(Oe.button,{onClick:$,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[h==="line"?_.jsx(Si,{size:18}):_.jsx(Qi,{size:18}),_.jsxs("span",{children:["Draw ",h==="line"?"Line":"Rectangle"]})]}),b()&&_.jsxs("div",{className:"p-3 bg-background-secondary dark:bg-background-primary rounded-lg border border-border",children:[_.jsx("div",{className:"text-xs text-text-muted",children:"Layer"}),_.jsx("div",{className:"text-sm font-semibold text-text",children:b().name})]})]})})},lR=`
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, and Opera */
  }
`;if(typeof document<"u"&&!document.getElementById("scrollbar-hide-styles")){const e=document.createElement("style");e.id="scrollbar-hide-styles",e.textContent=lR,document.head.appendChild(e)}const cR=[{Icon:Ya,name:"crop",hotkey:"c",category:"edit"},{Icon:qx,name:"brush",hotkey:"b",category:"draw"},{Icon:oo,name:"eraser",hotkey:"e",category:"draw"},{Icon:xd,name:"circle",hotkey:"o",category:"shape"},{Icon:nk,name:"rectangle",hotkey:"r",category:"shape"},{Icon:Si,name:"line",hotkey:"l",category:"shape"},{Icon:G_,name:"lineChart",hotkey:"shift+l",category:"shape"},{Icon:ql,name:"move",hotkey:"v",category:"nav"},{Icon:Ga,name:"zoom",hotkey:"z",category:"view"},{Icon:Wa,name:"histogram",hotkey:"h",category:"analyze"},{Icon:Ms,name:"intensity",hotkey:"i",category:"analyze"},{Icon:wd,name:"grayscale",hotkey:"g",category:"filter"},{Icon:ET,name:"pan",hotkey:"space",category:"nav"},{Icon:wc,name:"undo",hotkey:"ctrl+z",category:"edit"}],ox=({className:e=""})=>{const{t}=Wt(),{activeTool:s,applyTool:h,toggleGrayscale:y,undoLastChange:x,clearDrawings:S,imageSettings:f,updateImageSettings:r}=Dc(),[c,d]=M.useState(!1),[a,l]=M.useState(!1),[u,m]=M.useState(!1),[v,g]=M.useState(!1),[b,w]=M.useState("#ff0000"),[T,k]=M.useState(5),[O,D]=M.useState(15),[P,F]=M.useState(null),{control:V,watch:$}=ID({defaultValues:{brightness:f.brightness||100,contrast:f.contrast||100,saturation:f.saturation||100}}),te=$(),X=M.useCallback(()=>{if(window.fabricCanvas){const U=window.fabricCanvas.toDataURL("image/png"),q=document.createElement("a");q.download=`artwork-${Date.now()}.png`,q.href=U,q.click()}},[]),Q=M.useCallback(U=>{w(U),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.color=U)},[]),se=M.useCallback(U=>{k(U),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.width=U)},[]),K=M.useCallback(U=>{if(console.log(` Tool selected: ${U}`),U==="grayscale"?y():U==="undo"?x():U==="eraser"?s==="eraser"&&v?g(!1):(s==="eraser"&&!v||h(U),g(!0)):(h(U),g(!1)),window.fabricCanvas){const q=window.fabricCanvas;q.freeDrawingBrush&&(q.freeDrawingBrush.color=b,q.freeDrawingBrush.width=T)}},[y,x,h,b,T,s,v]);return zt("c",()=>K("crop"),{preventDefault:!0}),zt("b",()=>K("brush"),{preventDefault:!0}),zt("e",()=>K("eraser"),{preventDefault:!0}),zt("o",()=>K("circle"),{preventDefault:!0}),zt("r",()=>K("rectangle"),{preventDefault:!0}),zt("l",()=>K("line"),{preventDefault:!0}),zt("shift+l",()=>K("lineChart"),{preventDefault:!0}),zt("v",()=>K("move"),{preventDefault:!0}),zt("z",()=>K("zoom"),{preventDefault:!0}),zt("h",()=>K("histogram"),{preventDefault:!0}),zt("i",()=>K("intensity"),{preventDefault:!0}),zt("g",()=>K("grayscale"),{preventDefault:!0}),zt("space",()=>K("pan"),{preventDefault:!0}),zt("ctrl+z",()=>K("undo"),{preventDefault:!0}),zt("ctrl+s",X,{preventDefault:!0}),zt("ctrl+shift+c",S,{preventDefault:!0}),zt("tab",()=>d(!c),{preventDefault:!0}),M.useEffect(()=>{r(te)},[te.brightness,te.contrast,te.saturation,te.grayscale,r]),M.useEffect(()=>{const U=()=>{window.fabricCanvas?F(window.fabricCanvas):setTimeout(U,100)};U()},[]),_.jsxs(Oe.div,{className:jn("bg-background-secondary h-full flex flex-col border-r border-border shadow-card dark:bg-background-secondary dark:border-border relative",c?"w-48 sm:w-64":"w-12 sm:w-16",e),animate:{width:c?window.innerWidth<640?192:256:window.innerWidth<640?48:64},transition:{duration:.4,ease:[.4,0,.2,1]},children:[_.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 border-b border-border",children:[_.jsx(Tr,{children:c&&_.jsxs(Oe.h3,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs sm:text-sm font-semibold text-text",children:[_.jsx("span",{className:"hidden sm:inline",children:""}),_.jsx("span",{className:"sm:hidden",children:"Tools"})]})}),_.jsx(Oe.button,{onClick:()=>d(!c),className:"p-1.5 sm:p-2 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1},whileTap:{scale:.92},children:c?_.jsx(Z_,{size:14,className:"text-primary sm:w-4 sm:h-4"}):_.jsx(J_,{size:14,className:"text-primary sm:w-4 sm:h-4"})})]}),_.jsx("div",{className:"flex-1 py-2 sm:py-4 overflow-y-auto scrollbar-hide",children:_.jsx("div",{className:`flex ${c?"flex-col gap-1 sm:gap-2 px-2 sm:px-3":"flex-col items-center gap-2 sm:gap-4 px-1 sm:px-2"}`,children:cR.map(({Icon:U,name:q,hotkey:Z,category:L},A)=>{const j=s===q;return _.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:A*.05},children:c?_.jsxs(Oe.button,{onClick:()=>K(q),className:jn("w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl group font-medium shadow-sm hover:shadow-md",j?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[_.jsx(U,{size:16,className:jn(j?"drop-shadow-md":"","sm:w-5 sm:h-5")}),_.jsxs("div",{className:"flex-1 text-left min-w-0",children:[_.jsx("div",{className:"text-xs sm:text-sm font-semibold truncate",children:t(q)}),_.jsx("div",{className:jn("text-xs font-mono",j?"opacity-80":"opacity-50"),children:Z})]}),j&&_.jsx(Oe.div,{layoutId:"activeIndicator",className:"w-2 h-2 sm:w-2.5 sm:h-2.5 bg-white rounded-full shadow-md flex-shrink-0",animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0}})]}):_.jsxs(Oe.div,{className:"relative group",children:[_.jsx(Oe.button,{onClick:()=>K(q),className:jn("p-1.5 sm:p-2.5 rounded-xl shadow-sm hover:shadow-md",j?"bg-gradient-to-br from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text-muted hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.12,y:-2},whileTap:{scale:.93},title:`${t(q)} (${Z})`,children:_.jsx(U,{size:16,className:jn(j?"drop-shadow-md":"","sm:w-5 sm:h-5")})}),j&&_.jsx(Oe.div,{layoutId:"compactActiveIndicator",className:"absolute -right-0.5 sm:-right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 sm:h-8 bg-gradient-to-b from-primary to-primary-dark rounded-full shadow-md",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5}})]})},A)})})}),_.jsx(Tr,{children:c&&_.jsxs(Oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-border p-2 sm:p-3 space-y-2 sm:space-y-3",children:[_.jsxs(Oe.button,{onClick:()=>l(!a),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(wd,{size:16,className:"text-primary sm:w-4 sm:h-5"}),_.jsx("span",{className:"text-xs sm:text-sm font-medium",children:" "}),_.jsx("div",{className:"ml-auto w-4 h-4 sm:w-5 sm:h-5 rounded-lg border-2 border-white shadow-md ring-2 ring-border flex-shrink-0",style:{backgroundColor:b}})]}),_.jsxs(Oe.button,{onClick:()=>m(!u),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[_.jsx(en,{size:16,className:"text-primary sm:w-4 sm:h-5"}),_.jsx("span",{className:"text-xs sm:text-sm font-medium",children:""})]}),_.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[_.jsxs(Oe.button,{onClick:X,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[_.jsx(sk,{size:14,className:"sm:w-4 sm:h-4"}),_.jsx("span",{className:"text-xs font-semibold",children:""})]}),_.jsxs(Oe.button,{onClick:S,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[_.jsx($t,{size:14,className:"sm:w-4 sm:h-4"}),_.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]})}),_.jsx(Tr,{children:a&&c&&_.jsxs(Oe.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50",children:[_.jsxs("div",{className:"mb-3",children:[_.jsx("h4",{className:"text-sm font-medium mb-2",children:" "}),_.jsx(cD,{color:b,onChange:Q})]}),_.jsxs("div",{className:"mb-3",children:[_.jsxs("label",{className:"text-sm font-medium block mb-1",children:[" : ",T,"px"]}),_.jsx("input",{type:"range",min:"1",max:"50",value:T,onChange:U=>se(parseInt(U.target.value)),className:"w-full"})]}),_.jsxs("div",{className:"mb-3",children:[_.jsxs("label",{className:"text-sm font-medium block mb-1",children:[" : ",O,"px"]}),_.jsx("input",{type:"range",min:"5",max:"100",value:O,onChange:U=>D(parseInt(U.target.value)),className:"w-full"})]}),_.jsx(Oe.button,{onClick:()=>l(!1),className:"w-full py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})}),_.jsx(Tr,{children:u&&c&&_.jsxs(Oe.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50 w-64",children:[_.jsx("h4",{className:"text-sm font-medium mb-3",children:" "}),_.jsxs("div",{className:"space-y-3",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(te.brightness),"%"]}),_.jsx(bf,{name:"brightness",control:V,render:({field:U})=>_.jsx("input",{...U,type:"range",min:"0",max:"200",className:"w-full"})})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(te.contrast),"%"]}),_.jsx(bf,{name:"contrast",control:V,render:({field:U})=>_.jsx("input",{...U,type:"range",min:"0",max:"200",className:"w-full"})})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:[": ",Math.round(te.saturation),"%"]}),_.jsx(bf,{name:"saturation",control:V,render:({field:U})=>_.jsx("input",{...U,type:"range",min:"0",max:"200",className:"w-full"})})]})]}),_.jsx(Oe.button,{onClick:()=>m(!1),className:"w-full mt-4 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:""})]})}),_.jsx(Tr,{children:s==="eraser"&&P&&v&&_.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"absolute left-full top-0 ml-2 z-50",children:_.jsx(cd,{canvas:P,isActive:!0,initialSettings:{size:O},onSettingsChange:U=>{D(U.size)},onClose:()=>{g(!1)}})})}),s==="eraser"&&P&&!v&&_.jsx("div",{style:{display:"none"},children:_.jsx(cd,{canvas:P,isActive:!0,initialSettings:{size:O},onSettingsChange:U=>{D(U.size)},onClose:()=>{}})}),P&&_.jsxs("div",{style:{display:"none"},children:[s==="brush"&&_.jsx(JD,{canvas:P,isActive:s==="brush",brushColor:b,brushWidth:T}),s==="line"&&_.jsx(eR,{canvas:P,isActive:s==="line",lineColor:b,lineWidth:T}),s==="move"&&_.jsx(tR,{canvas:P,isActive:s==="move"})]}),P&&_.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${s==="crop"?"":"hidden"}`,children:_.jsx(nR,{canvas:P,isActive:s==="crop",onClose:()=>h(null)})}),s==="zoom"&&P&&_.jsx("div",{className:"absolute left-full top-0 ml-2 z-50",children:_.jsx(iR,{canvas:P,isActive:s==="zoom",onClose:()=>h(null)})}),P&&_.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${s==="histogram"?"":"hidden"}`,children:_.jsx(sR,{canvas:P,isActive:s==="histogram",onClose:()=>h(null)})}),P&&_.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${s==="intensity"?"":"hidden"}`,children:_.jsx(oR,{canvas:P,isActive:s==="intensity",onClose:()=>h(null)})})]})},uR=({tabs:e})=>{const{i18n:t,t:s}=Wt();return _.jsx("div",{className:jn("flex gap-1 overflow-x-auto scrollbar-hide pb-1",t.language==="fa"?"font-vazir":""),dir:t.language==="fa"?"rtl":"ltr",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:e.map((h,y)=>_.jsxs(Hx,{to:h.to,className:({isActive:x})=>jn("px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium flex items-center whitespace-nowrap flex-shrink-0 min-w-fit",x?"tab-active":"tab-inactive"),children:[h.icon,_.jsx("span",{className:jn(t.language==="fa"?"mr-1":"ml-1","hidden xs:inline"),children:h.label})]},y))})},hR=()=>{const e=M.useRef(null),t=M.useRef(null),s=M.useRef(null),h=M.useRef(null),y=M.useRef(null);M.useRef(null);const x=M.useRef(null);M.useRef(null);const{cameras:S,activeTool:f,drawings:r,toolDrawings:c,isDrawing:d,currentPath:a,imageSettings:l,cursorPosition:u,startDrawing:m,continueDrawing:v,finishDrawing:g,addToolDrawing:b,wsStatus:w,panImage:T}=Dc(),k=M.useCallback(j=>{var R,I,B,z;if(console.log(" ==================== PATH CREATED ===================="),console.log("Path object:",j.path),console.log("Path type:",(R=j.path)==null?void 0:R.type),console.log("Path position - left:",(I=j.path)==null?void 0:I.left,"top:",(B=j.path)==null?void 0:B.top),console.log("Stroke width:",(z=j.path)==null?void 0:z.strokeWidth),j.path&&j.path.path){console.log("Path data (first 10 points):"),j.path.path.slice(0,10).forEach((ne,ee)=>{console.log(`  Point ${ee}:`,ne)}),console.log("Total points in path:",j.path.path.length);const Y=j.path.getBoundingRect();console.log("Bounding box:",{left:Y.left,top:Y.top,width:Y.width,height:Y.height})}console.log("======================================================"),j.path&&j.path.set({selectable:f==="move",evented:f==="move",hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4}),f==="eraser"&&t.current&&t.current.contextTop&&(t.current.contextTop.globalCompositeOperation="source-over")},[f]),O=M.useCallback(j=>{console.log("Fabric object added:",j.target)},[]),D=M.useCallback(j=>{console.log(" Mouse down - Tool:",f)},[f]),P=M.useCallback(j=>{if(!t.current)return;const R=t.current.getPointer(j.e);if(f==="eraser"&&t.current.contextTop&&(t.current.contextTop.globalCompositeOperation="destination-out"),f==="pan"&&j.e.buttons===1&&y.current){const I={x:R.x-y.current.x,y:R.y-y.current.y};T(I.x,I.y),y.current=R}t.current._isCurrentlyDrawing&&t.current.renderAll()},[f]),F=M.useCallback(()=>{t.current&&(t.current._isCurrentlyDrawing=!1)},[]);M.useEffect(()=>{if(e.current&&!t.current){const j=new Xe.fabric.Canvas(e.current,{width:640,height:480,backgroundColor:"transparent",selection:!0,preserveObjectStacking:!0,enableRetinaScaling:!0,perPixelTargetFind:!0});return t.current=j,$(j),j.on("path:created",k),j.on("object:added",O),j.on("mouse:down",D),j.on("mouse:move",P),j.on("mouse:up",F),console.log(" Event listeners added to canvas"),j.on("object:added",R=>{R.target===j.backgroundImage&&R.target.set({selectable:!1,evented:!1,excludeFromExport:!1})}),()=>{j.dispose(),t.current=null}}},[]);const V=M.useCallback(()=>{if(!t.current||!S.basler.currentFrame)return;const j=S.basler.currentFrame;x.current!==j&&(x.current=j,console.log(" Updating Fabric.js background image"),Xe.fabric.Image.fromURL(j,R=>{const I=t.current.width||640,B=t.current.height||480;R.set({left:0,top:0,scaleX:I/R.width,scaleY:B/R.height,selectable:!1,evented:!1,excludeFromExport:!1});const z=[];l.brightness!==100&&z.push(new Xe.fabric.Image.filters.Brightness({brightness:(l.brightness-100)/100})),l.contrast!==100&&z.push(new Xe.fabric.Image.filters.Contrast({contrast:(l.contrast-100)/100})),l.grayscale&&z.push(new Xe.fabric.Image.filters.Grayscale),R.filters=z,R.applyFilters(),t.current.setBackgroundImage(R,t.current.renderAll.bind(t.current))}))},[S.basler.currentFrame,l.brightness,l.contrast,l.grayscale]),$=M.useCallback(j=>{j&&(j.isDrawingMode=!1,j.selection=!0,j.defaultCursor="default",j.hoverCursor="move",f==="move"?j.getObjects().forEach(R=>{R!==j.backgroundImage&&R.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4})}):j.getObjects().forEach(R=>{R!==j.backgroundImage&&R.set({selectable:!1,evented:!1})}),f==="crop"?(console.log(" Configuring crop tool in BaslerDisplay..."),j.selection=!1,j.defaultCursor="crosshair",j.hoverCursor="crosshair",console.log(" Crop tool configured in BaslerDisplay")):f==="eraser"?(j.selection=!1,j.defaultCursor="crosshair",j.hoverCursor="crosshair",console.log(" Eraser tool configured")):f==="move"?(j.selection=!0,j.defaultCursor="default",j.hoverCursor="move",console.log(" Move tool configured - all objects are now selectable")):(f==="brush"||f==="line")&&(j.isDrawingMode=!0,j.selection=!1,j.defaultCursor="crosshair",j.hoverCursor="crosshair",console.log(" Drawing tool configured:",f)),j.renderAll(),console.log(" Canvas initialized for tool components - Active tool:",f))},[f]);M.useEffect(()=>{t.current&&f&&$(t.current)},[f,$]),M.useEffect(()=>{if(t.current&&f){const j=setTimeout(()=>{t.current&&!t.current.backgroundImage&&S.basler.currentFrame&&(console.log(" Background image missing after tool change, restoring..."),V())},100);return()=>clearTimeout(j)}},[f,S.basler.currentFrame,V]),M.useEffect(()=>{t.current&&S.basler.currentFrame&&V()},[S.basler.currentFrame]),M.useEffect(()=>{const j=R=>{console.log(" Canvas resize event received:",R.detail),e.current&&R.detail&&(e.current.width=R.detail.width,e.current.height=R.detail.height,e.current.style.width=`${R.detail.width}px`,e.current.style.height=`${R.detail.height}px`,console.log(" HTML canvas updated to:",R.detail.width,"x",R.detail.height)),t.current&&t.current.renderAll()};return window.addEventListener("canvasResized",j),()=>{window.removeEventListener("canvasResized",j)}},[]),M.useEffect(()=>{if(t.current){const j=setTimeout(()=>{t.current&&t.current.renderAll()},50);return()=>clearTimeout(j)}},[f,S.basler.currentFrame]);const te=M.useCallback(()=>{if(!t.current||!t.current.backgroundImage)return;const j=t.current.backgroundImage,R=[];l.brightness!==100&&R.push(new Xe.fabric.Image.filters.Brightness({brightness:(l.brightness-100)/100})),l.contrast!==100&&R.push(new Xe.fabric.Image.filters.Contrast({contrast:(l.contrast-100)/100})),l.grayscale&&R.push(new Xe.fabric.Image.filters.Grayscale),j.filters=R,j.applyFilters(),t.current.renderAll()},[l.brightness,l.contrast,l.grayscale]);M.useEffect(()=>{te()},[te]);const X=M.useCallback(()=>{if(!t.current)return;const j=t.current.backgroundImage;t.current.getObjects().forEach(I=>{I!==t.current.backgroundImage&&t.current.remove(I)}),j?t.current.setBackgroundImage(j,t.current.renderAll.bind(t.current)):S.basler.currentFrame&&V(),console.log(" Canvas cleared - background preserved")},[V]),Q=M.useCallback(()=>{if(!t.current)return;const j=t.current.getObjects();let R=0;j.forEach(I=>{I!==t.current.backgroundImage&&(t.current.remove(I),R++)}),t.current.renderAll(),console.log(` Removed ${R} user objects`)},[]),se=M.useCallback(()=>{if(!t.current)return;const j=t.current.getObjects();for(let R=j.length-1;R>=0;R--)if(j[R]!==t.current.backgroundImage){t.current.remove(j[R]),console.log(" Undid last user action");break}},[]);M.useEffect(()=>{t.current&&window&&(window.fabricCanvas=t.current,window.clearFabricCanvas=X,window.clearAllUserObjects=Q,window.undoLastFabricAction=se)},[X,Q,se]);const K=M.useCallback(()=>{},[S.basler.currentFrame,r,c,d,a,f,l]),U=M.useCallback(j=>{const R=e.current;if(!R)return{x:0,y:0,rawX:0,rawY:0};const I=R.getBoundingClientRect(),B=j.clientX-I.left,z=j.clientY-I.top,W=t.current,Y=W?W.width:R.width,ne=W?W.height:R.height;(Math.abs(Y-R.width)>10||Math.abs(ne-R.height)>10)&&console.log(" Canvas dimensions mismatch - Fabric:",Y,"x",ne,"HTML:",R.width,"x",R.height);const ee=Y/I.width,de=ne/I.height,le=B*ee,we=z*de,ue=Math.max(0,Math.min(Y,le)),oe=Math.max(0,Math.min(ne,we)),ge=(ue-l.panOffset.x)/l.zoom,ve=(oe-l.panOffset.y)/l.zoom;return{x:ge,y:ve,rawX:ue,rawY:oe,clientX:B,clientY:z}},[l.zoom,l.panOffset]),q=M.useCallback(j=>{if(f==="pan"&&l.zoom>1){const R=U(j);y.current={x:R.rawX,y:R.rawY},t.current&&(t.current.defaultCursor="grabbing")}},[f,l,U]),Z=M.useCallback(j=>{if(f==="pan"&&y.current&&l.zoom>1){const R=U(j),I=R.rawX-y.current.x,B=R.rawY-y.current.y;T(I,B),y.current={x:R.rawX,y:R.rawY}}},[f,l.zoom,T,U]),L=M.useCallback(()=>{f==="pan"&&(y.current=null,t.current&&(t.current.defaultCursor="crosshair"))},[f]);M.useEffect(()=>{if(S.basler.currentFrame&&s.current){const j=s.current;j.src&&j.src.startsWith("data:")&&URL.revokeObjectURL(j.src),j.src=S.basler.currentFrame,j.onload=()=>{const R=e.current;if(R&&j){const I=j.naturalWidth||640,B=j.naturalHeight||480,z=t.current;!z||z.width===640&&z.height===480?(R.width=I,R.height=B,console.log(` Basler frame loaded: ${I}x${B}`)):console.log(` Basler frame loaded but keeping current canvas size: ${R.width}x${R.height}`)}K()},j.onerror=R=>{console.error(" Error loading Basler image:",R)}}},[S.basler.currentFrame,K]),M.useEffect(()=>{K()},[K]);const A=M.useCallback(j=>{if(!j)return"No data";try{return new Date(j).toLocaleTimeString()}catch{return"Invalid time"}},[]);return _.jsxs("div",{ref:h,className:"w-full h-full bg-black rounded-lg overflow-hidden relative flex justify-center items-center",children:[_.jsx("img",{ref:s,style:{display:"none"},alt:"Basler frame"}),_.jsx("canvas",{ref:e,width:640,height:480,className:"w-full h-full object-contain cursor-crosshair mx-auto",onMouseDown:q,onMouseMove:Z,onMouseUp:L,onMouseLeave:L,style:{maxWidth:"100%",maxHeight:"100%",display:"block",imageRendering:"high-quality"}}),!S.basler.currentFrame&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsxs("div",{className:"text-center p-4",children:[_.jsxs("div",{className:"text-white text-xs sm:text-sm mb-2",children:[w==="connecting"&&"   ...",w==="connected"&&"    ...",w==="reconnecting"&&"    ...",w==="error"&&"     ",w==="failed"&&"   -  ",w==="disconnected"&&"    "]}),(w==="error"||w==="failed")&&_.jsx("div",{className:"text-gray-400 text-xs",children:"    "})]})}),_.jsxs("div",{className:"absolute top-1 sm:top-2 left-1 sm:left-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm font-mono",children:[_.jsxs("span",{className:"hidden sm:inline",children:["X: ",Math.round(u.x)," | Y: ",Math.round(u.y)]}),_.jsxs("span",{className:"sm:hidden",children:[Math.round(u.x),",",Math.round(u.y)]})]}),f&&_.jsxs("div",{className:"absolute top-1 sm:top-2 right-1 sm:right-2 bg-primary text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm",children:[_.jsx("span",{className:"hidden sm:inline",children:f}),_.jsx("span",{className:"sm:hidden",children:f.charAt(0)})]}),_.jsx("div",{className:`absolute bottom-1 sm:bottom-2 left-1 sm:left-2 w-2 h-2 sm:w-3 sm:h-3 rounded-full ${S.basler.isConnected&&S.basler.currentFrame?"bg-green-500":"bg-red-500"}`}),S.basler.lastUpdate&&_.jsxs("div",{className:"absolute bottom-1 sm:bottom-2 right-1 sm:right-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:[_.jsx("div",{className:"hidden sm:block",children:A(S.basler.lastUpdate)}),_.jsx("div",{className:"sm:hidden text-xs",children:A(S.basler.lastUpdate).split(" ")[1]}),S.basler.avgFps>0&&_.jsxs("div",{className:"text-green-400 text-xs",children:[_.jsxs("span",{className:"hidden sm:inline",children:["FPS: ",S.basler.avgFps," | Frames: ",S.basler.frameCount]}),_.jsxs("span",{className:"sm:hidden",children:[S.basler.avgFps,"fps"]})]})]})]})},fR=()=>{const e=M.useRef(null),{cameras:t,wsStatus:s}=Dc();return M.useEffect(()=>{e.current&&t.monitoring.currentFrame&&(e.current.src=t.monitoring.currentFrame)},[t.monitoring.currentFrame]),_.jsxs("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden relative",children:[_.jsx("img",{ref:e,className:"w-full h-full object-contain",alt:"Monitoring Camera",style:{display:t.monitoring.currentFrame?"block":"none"}}),!t.monitoring.currentFrame&&_.jsx("div",{className:"w-full h-full flex items-center justify-center",children:_.jsxs("div",{className:"text-center",children:[_.jsxs("div",{className:"text-white text-sm mb-2",children:[s==="connecting"&&"    RTSP...",s==="connected"&&"    RTSP...",s==="reconnecting"&&"    ...",s==="error"&&"    RTSP",s==="failed"&&"  RTSP ",s==="disconnected"&&"    "]}),(s==="error"||s==="failed")&&_.jsx("div",{className:"text-gray-400 text-xs",children:"  RTSP  "})]})}),_.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm",children:"Monitoring Camera"}),_.jsx("div",{className:`absolute bottom-2 left-2 w-3 h-3 rounded-full ${t.monitoring.isConnected&&t.monitoring.currentFrame?"bg-green-500":"bg-red-500"}`}),t.monitoring.currentFrame&&_.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs space-y-1",children:[_.jsx("div",{children:"RTSP Live"}),t.monitoring.avgFps>0&&_.jsxs("div",{className:"text-green-400",children:["FPS: ",t.monitoring.avgFps," | Frames: ",t.monitoring.frameCount]})]})]})},dR=()=>{const{histogramData:e,selectedPoint:t,currentChannel:s,selectionRegion:h,changeChannel:y}=fw(),x=M.useRef(null);return M.useEffect(()=>{if(!e||!s||!x.current)return;const S=x.current.getContext("2d"),f=x.current.width,r=x.current.height;S.clearRect(0,0,f,r);const c=e[s];if(!c)return;const d=Math.max(...c),a=f/256,l={red:"rgba(239, 68, 68, 0.7)",green:"rgba(34, 197, 94, 0.7)",blue:"rgba(59, 130, 246, 0.7)",gray:"rgba(107, 114, 128, 0.7)"};S.fillStyle=l[s],c.forEach((u,m)=>{const v=u/d*r,g=m*a,b=r-v;S.fillRect(g,b,Math.max(a,1),v)})},[e,s]),!e||!t?_.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted",children:[_.jsx(Wa,{size:32,className:"mb-2 opacity-50"}),_.jsx("p",{className:"text-sm",children:"Select Histogram tool and click on image to see distribution"})]}):_.jsxs("div",{className:"h-full flex flex-col gap-2 overflow-hidden",children:[_.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[_.jsxs("div",{className:"bg-accent dark:bg-background-primary rounded-lg px-2 py-1 border border-border flex-shrink-0",children:[(h==null?void 0:h.type)==="point"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"text-xs text-text-muted",children:["Point (R=",h.radius,"px)"]}),_.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]}),(h==null?void 0:h.type)==="area"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"text-xs text-text-muted",children:["Area ",h.width,"",h.height,"px"]}),_.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]}),(h==null?void 0:h.type)==="line"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"text-xs text-text-muted",children:["Line (",h.length,"px)"]}),_.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]}),!h&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"text-xs text-text-muted",children:"Point"}),_.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",t.x,", ",t.y,")"]})]})]}),_.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[_.jsxs("div",{className:"text-center bg-red-100 dark:bg-red-900/20 rounded-lg px-2 py-1",children:[_.jsx("div",{className:"text-xs text-text-muted",children:"R"}),_.jsx("div",{className:"font-mono text-xs font-semibold text-red-700 dark:text-red-400",children:t.pixel.r})]}),_.jsxs("div",{className:"text-center bg-green-100 dark:bg-green-900/20 rounded-lg px-2 py-1",children:[_.jsx("div",{className:"text-xs text-text-muted",children:"G"}),_.jsx("div",{className:"font-mono text-xs font-semibold text-green-700 dark:text-green-400",children:t.pixel.g})]}),_.jsxs("div",{className:"text-center bg-blue-100 dark:bg-blue-900/20 rounded-lg px-2 py-1",children:[_.jsx("div",{className:"text-xs text-text-muted",children:"B"}),_.jsx("div",{className:"font-mono text-xs font-semibold text-blue-700 dark:text-blue-400",children:t.pixel.b})]})]}),_.jsx("div",{className:"flex gap-1 flex-shrink-0 flex-wrap",children:[{key:"red",label:"R",color:"from-red-500 to-red-600"},{key:"green",label:"G",color:"from-green-500 to-green-600"},{key:"blue",label:"B",color:"from-blue-500 to-blue-600"},{key:"gray",label:"Gray",color:"from-gray-500 to-gray-600"}].map(({key:S,label:f,color:r})=>_.jsx(Oe.button,{onClick:()=>y(S),className:`px-2 py-1 text-xs font-semibold rounded-lg transition-all duration-300 flex-shrink-0 ${s===S?`bg-gradient-to-r ${r} text-white shadow-md`:"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:f},S))})]}),_.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",children:_.jsx("canvas",{ref:x,width:1024,height:128,className:"w-full h-full object-contain"})})]})},mR=()=>{const{profiles:e,activeProfileId:t,getActiveProfile:s,removeProfile:h}=mw(),y=M.useRef(null),[x,S]=M.useState("intensity"),[f,r]=M.useState("horizontal"),c=s();M.useEffect(()=>{if(!c||c.type!=="line"||!y.current)return;const a=y.current,l=a.getContext("2d"),u=a.width,m=a.height;l.clearRect(0,0,u,m);const v=c.data;if(!v||v.length===0)return;const g=v.map(O=>{switch(x){case"red":return O.r;case"green":return O.g;case"blue":return O.b;default:return O.intensity}}),b=Math.max(...g),w=Math.min(...g),T=b-w||1;l.strokeStyle="rgba(200, 200, 200, 0.2)",l.lineWidth=1;for(let O=0;O<=10;O++){const D=m/10*O;l.beginPath(),l.moveTo(0,D),l.lineTo(u,D),l.stroke()}const k={intensity:"rgba(100, 100, 100, 1)",red:"rgba(239, 68, 68, 1)",green:"rgba(34, 197, 94, 1)",blue:"rgba(59, 130, 246, 1)"};l.strokeStyle=k[x],l.lineWidth=2,l.beginPath(),g.forEach((O,D)=>{const P=D/(g.length-1)*u,F=(O-w)/T,V=m-F*m;D===0?l.moveTo(P,V):l.lineTo(P,V)}),l.stroke(),l.fillStyle="#666",l.font="10px Arial",l.fillText(`Max: ${b.toFixed(1)}`,5,12),l.fillText(`Min: ${w.toFixed(1)}`,5,m-5)},[c,x]),M.useEffect(()=>{if(!c||c.type!=="rectangle"||!y.current)return;const a=y.current,l=a.getContext("2d"),u=a.width,m=a.height;l.clearRect(0,0,u,m);const v=f==="horizontal"?c.data.horizontalProfile:c.data.verticalProfile;if(!v||v.length===0)return;const g=v.map(O=>{switch(x){case"red":return O.r;case"green":return O.g;case"blue":return O.b;default:return O.intensity}}),b=Math.max(...g),w=Math.min(...g),T=b-w||1;l.strokeStyle="rgba(200, 200, 200, 0.2)",l.lineWidth=1;for(let O=0;O<=10;O++){const D=m/10*O;l.beginPath(),l.moveTo(0,D),l.lineTo(u,D),l.stroke()}const k={intensity:"rgba(100, 100, 100, 1)",red:"rgba(239, 68, 68, 1)",green:"rgba(34, 197, 94, 1)",blue:"rgba(59, 130, 246, 1)"};l.strokeStyle=k[x],l.lineWidth=2,l.beginPath(),g.forEach((O,D)=>{const P=D/(g.length-1)*u,F=(O-w)/T,V=m-F*m;D===0?l.moveTo(P,V):l.lineTo(P,V)}),l.stroke(),l.fillStyle="#666",l.font="10px Arial",l.fillText(`Max: ${b.toFixed(1)}`,5,12),l.fillText(`Min: ${w.toFixed(1)}`,5,m-5)},[c,x,f]);const d=()=>{if(!c)return;let a="";if(c.type==="line")a=`Distance,X,Y,Red,Green,Blue,Intensity
`,c.data.forEach(v=>{a+=`${v.distance.toFixed(2)},${v.x},${v.y},${v.r},${v.g},${v.b},${v.intensity.toFixed(2)}
`});else if(c.type==="rectangle"){a=`Position,Red,Green,Blue,Intensity
`,a+=`--- Horizontal Profile ---
`,c.data.horizontalProfile.forEach(g=>{a+=`${g.position},${g.r.toFixed(2)},${g.g.toFixed(2)},${g.b.toFixed(2)},${g.intensity.toFixed(2)}
`}),a+=`
--- Vertical Profile ---
`,a+=`Position,Red,Green,Blue,Intensity
`,c.data.verticalProfile.forEach(g=>{a+=`${g.position},${g.r.toFixed(2)},${g.g.toFixed(2)},${g.b.toFixed(2)},${g.intensity.toFixed(2)}
`});const v=c.data.statistics;a+=`
--- Statistics ---
`,a+=`Mean,${v.mean.toFixed(2)}
`,a+=`Median,${v.median.toFixed(2)}
`,a+=`Min,${v.min.toFixed(2)}
`,a+=`Max,${v.max.toFixed(2)}
`,a+=`Std Dev,${v.stdDev.toFixed(2)}
`,a+=`Pixel Count,${v.pixelCount}
`}const l=new Blob([a],{type:"text/csv"}),u=URL.createObjectURL(l),m=document.createElement("a");m.href=u,m.download=`intensity-profile-${Date.now()}.csv`,m.click(),URL.revokeObjectURL(u)};return c?_.jsxs("div",{className:"h-full flex flex-col gap-1.5 overflow-hidden",children:[_.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 flex-shrink-0",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Ms,{size:14,className:"text-green-500"}),_.jsx("span",{className:"text-xs font-semibold text-text",children:c.type==="line"?"Line":"Rectangle"})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx(Oe.button,{onClick:d,className:"p-1.5 rounded-lg bg-background-secondary hover:bg-accent border border-border hover:border-green-500 transition-all",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Export to CSV",children:_.jsx(ao,{size:12,className:"text-green-500"})}),_.jsx(Oe.button,{onClick:()=>h(c.id),className:"p-1.5 rounded-lg bg-background-secondary hover:bg-accent border border-border hover:border-red-500 transition-all",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete Profile",children:_.jsx(Sc,{size:12,className:"text-red-500"})})]})]}),_.jsxs("div",{className:"flex gap-2 flex-wrap flex-shrink-0",children:[_.jsx("div",{className:"flex gap-1 flex-wrap",children:[{key:"intensity",label:"Gray",color:"from-gray-500 to-gray-600"},{key:"red",label:"R",color:"from-red-500 to-red-600"},{key:"green",label:"G",color:"from-green-500 to-green-600"},{key:"blue",label:"B",color:"from-blue-500 to-blue-600"}].map(({key:a,label:l,color:u})=>_.jsx(Oe.button,{onClick:()=>S(a),className:`px-2 py-1 text-xs font-semibold rounded-lg transition-all duration-300 flex-shrink-0 ${x===a?`bg-gradient-to-r ${u} text-white shadow-md`:"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:l},a))}),c.type==="rectangle"&&_.jsx("div",{className:"flex gap-1",children:[{key:"horizontal",label:"H"},{key:"vertical",label:"V"}].map(({key:a,label:l})=>_.jsx(Oe.button,{onClick:()=>r(a),className:`px-2 py-1 text-xs font-semibold rounded-lg transition-all duration-300 ${f===a?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-md":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:l},a))})]}),_.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-lg border border-border p-1 overflow-hidden",children:_.jsx("canvas",{ref:y,width:800,height:150,className:"w-full h-full object-contain"})}),c.type==="rectangle"&&c.data.statistics&&_.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-1 text-xs flex-shrink-0",children:Object.entries(c.data.statistics).map(([a,l])=>_.jsxs("div",{className:"bg-background-secondary dark:bg-background-primary rounded px-1 py-1 border border-border",children:[_.jsx("div",{className:"text-text-muted capitalize truncate text-xs",children:a.replace(/([A-Z])/g," $1").trim()}),_.jsx("div",{className:"font-mono font-semibold text-text text-xs",children:typeof l=="number"?l.toFixed(1):l})]},a))})]}):_.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted",children:[_.jsx(Ms,{size:32,className:"mb-2 opacity-50"}),_.jsx("p",{className:"text-sm",children:"Select Intensity Profile tool and draw a region"})]})},gR=({className:e=""})=>{const{layers:t,activeLayerId:s,setActiveLayerId:h,createLayer:y,deleteLayer:x,toggleLayerVisibility:S,setLayerOpacity:f,toggleLayerLock:r,moveLayerUp:c,moveLayerDown:d,duplicateLayer:a}=uw(),[l,u]=M.useState(new Set),[m,v]=M.useState(!1),g=T=>{u(k=>{const O=new Set(k);return O.has(T)?O.delete(T):O.add(T),O})},b=()=>{const T=t.length;y(`Layer ${T+1}`,"default")},w=T=>{const k={background:"",brush:"",histogram:"",crop:"",line:"",text:"",eraser:"",default:""};return k[T]||k.default};return m?_.jsx(Oe.div,{initial:{width:48},animate:{width:48},className:`bg-background-secondary border-l border-border flex flex-col items-center py-3 ${e}`,children:_.jsx(Oe.button,{onClick:()=>v(!1),className:"p-2 rounded-lg bg-background-primary hover:bg-accent border border-border hover:border-primary transition-all duration-300",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Expand Layers Panel",children:_.jsx(Wl,{size:20,className:"text-primary"})})}):_.jsxs(Oe.div,{initial:{width:280},animate:{width:280},className:`bg-background-secondary border-l border-border flex flex-col ${e}`,children:[_.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(Wl,{size:18,className:"text-primary"}),_.jsx("h3",{className:"text-sm font-semibold text-text",children:"Layers"})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx(Oe.button,{onClick:b,className:"p-1.5 rounded-lg bg-background-primary hover:bg-accent border border-border hover:border-primary transition-all duration-300",whileHover:{scale:1.1},whileTap:{scale:.95},title:"New Layer",children:_.jsx(JT,{size:16,className:"text-primary"})}),_.jsx(Oe.button,{onClick:()=>v(!0),className:"p-1.5 rounded-lg bg-background-primary hover:bg-accent border border-border hover:border-primary transition-all duration-300",whileHover:{scale:1.1},whileTap:{scale:.95},title:"Collapse Panel",children:_.jsx(Df,{size:16,className:"text-text-muted"})})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:_.jsx(Tr,{children:t.length===0?_.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8 text-text-muted text-sm",children:[_.jsx(Wl,{size:32,className:"mx-auto mb-2 opacity-50"}),_.jsx("p",{children:"No layers yet"}),_.jsx("p",{className:"text-xs mt-1",children:"Click + to create a layer"})]}):[...t].reverse().map((T,k)=>_.jsxs(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:k*.02},className:`rounded-lg border transition-all duration-200 ${s===T.id?"bg-primary/10 border-primary shadow-sm":"bg-background-primary border-border hover:border-primary/50"}`,children:[_.jsxs("div",{className:"flex items-center gap-2 p-2 cursor-pointer",onClick:()=>h(T.id),children:[_.jsx("span",{className:"text-lg",children:w(T.type)}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("div",{className:"text-sm font-medium text-text truncate",children:T.name}),_.jsxs("div",{className:"text-xs text-text-muted",children:[T.objects.length," object",T.objects.length!==1?"s":""]})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[_.jsx(Oe.button,{onClick:O=>{O.stopPropagation(),S(T.id)},className:"p-1 rounded hover:bg-accent transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:T.visible?"Hide Layer":"Show Layer",children:T.visible?_.jsx(pT,{size:14,className:"text-text"}):_.jsx(mT,{size:14,className:"text-text-muted"})}),_.jsx(Oe.button,{onClick:O=>{O.stopPropagation(),r(T.id)},className:"p-1 rounded hover:bg-accent transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:T.locked?"Unlock Layer":"Lock Layer",children:T.locked?_.jsx(zT,{size:14,className:"text-orange-500"}):_.jsx(LT,{size:14,className:"text-text-muted"})}),_.jsx(Oe.button,{onClick:O=>{O.stopPropagation(),g(T.id)},className:"p-1 rounded hover:bg-accent transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:_.jsx(hT,{size:14,className:"text-text-muted"})})]})]}),_.jsx(Tr,{children:l.has(T.id)&&_.jsx(Oe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-border overflow-hidden",children:_.jsxs("div",{className:"p-2 space-y-2",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"text-xs text-text-muted block mb-1",children:["Opacity: ",T.opacity,"%"]}),_.jsx("input",{type:"range",min:"0",max:"100",value:T.opacity,onChange:O=>f(T.id,parseInt(O.target.value)),className:"w-full h-1 bg-background-secondary rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, var(--color-primary) 0%, var(--color-primary) ${T.opacity}%, var(--color-background-secondary) ${T.opacity}%, var(--color-background-secondary) 100%)`}})]}),_.jsxs("div",{className:"flex gap-1",children:[_.jsxs(Oe.button,{onClick:O=>{O.stopPropagation(),c(T.id)},className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-background-secondary hover:bg-accent rounded text-xs font-medium text-text border border-border hover:border-primary transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:k===0,title:"Move Up",children:[_.jsx(tT,{size:12}),_.jsx("span",{children:"Up"})]}),_.jsxs(Oe.button,{onClick:O=>{O.stopPropagation(),d(T.id)},className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-background-secondary hover:bg-accent rounded text-xs font-medium text-text border border-border hover:border-primary transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:k===t.length-1,title:"Move Down",children:[_.jsx(Df,{size:12}),_.jsx("span",{children:"Down"})]}),_.jsxs(Oe.button,{onClick:O=>{O.stopPropagation(),a(T.id)},className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-background-secondary hover:bg-accent rounded text-xs font-medium text-text border border-border hover:border-primary transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},title:"Duplicate",children:[_.jsx(aT,{size:12}),_.jsx("span",{children:"Dup"})]}),_.jsxs(Oe.button,{onClick:O=>{O.stopPropagation(),window.confirm(`Delete "${T.name}"?`)&&x(T.id)},className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-red-500/10 hover:bg-red-500/20 rounded text-xs font-medium text-red-600 border border-red-500/30 hover:border-red-500 transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},title:"Delete",children:[_.jsx(Sc,{size:12}),_.jsx("span",{children:"Del"})]})]})]})})})]},T.id))})}),t.length>0&&_.jsxs("div",{className:"border-t border-border p-2 text-xs text-text-muted text-center",children:[t.length," layer",t.length!==1?"s":""," total"]})]})},pR=[{to:"/initial",label:"initial",icon:_.jsx(NT,{className:"w-4 h-4 mr-1"})},{to:"/position",label:"position",icon:_.jsx(Rf,{className:"w-4 h-4 mr-1"})},{to:"/projection",label:"projection",icon:_.jsx(ST,{className:"w-4 h-4 mr-1"})},{to:"/post-processing",label:"postProcessing",icon:_.jsx(kk,{className:"w-4 h-4 mr-1"})},{to:"/reconstruction",label:"reconstruction",icon:_.jsx(MT,{className:"w-4 h-4 mr-1"})}],lx=({lng:e,current:t,onClick:s})=>_.jsx("button",{onClick:()=>s(e),className:jn("px-2 py-1 text-sm rounded-md",t===e?"bg-primary text-white":"bg-background-secondary text-text-muted"),children:e.toUpperCase()}),yR=({t:e})=>_.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row gap-2 py-2 px-2 sm:px-4",children:[_.jsx("div",{className:"panel bg-red-500 flex-1 flex items-center justify-center text-xs sm:text-sm dark:text-text min-h-[40px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px]",children:e("systemStatus")}),_.jsx("div",{className:"card border border-black flex-shrink-0 w-full sm:w-auto h-[60px] sm:h-[70px] md:h-[90px] lg:h-[110px]",children:_.jsx(fR,{})})]}),vR=()=>{const t=nr().pathname.includes("settings")?"Settings":null,[s,h]=M.useState(t),[y,x]=M.useState("histogram"),[S,f]=M.useState(!1),r=M.useRef(null),{t:c,i18n:d}=Wt(),a=M.useCallback(u=>{h(u)},[]),l=M.useCallback(u=>{d.changeLanguage(u),console.log("Changed language to:",u)},[d]);return M.useEffect(()=>{const u=m=>{r.current&&!r.current.contains(m.target)&&f(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),_.jsxs("div",{className:"responsive-layout gap-2 sm:gap-4 p-2 sm:p-4 bg-background dark:bg-background",children:[_.jsx("div",{className:"mobile-column",children:_.jsxs("div",{className:"card flex-1 flex flex-col min-h-0",children:[_.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-start sm:items-center justify-between px-2 sm:px-4 py-2 sm:py-3 border-b border-border bg-background-secondary dark:bg-background-secondary dark:border-border gap-2 sm:gap-0",children:[_.jsx("div",{className:"w-full sm:w-auto",children:_.jsx(uR,{tabs:pR.map(u=>({...u,label:c(u.label)}))})}),_.jsxs("div",{className:"flex gap-2 items-center relative",ref:r,children:[_.jsxs("button",{onClick:()=>f(!S),className:jn("flex items-center gap-1 px-3 py-2 rounded-lg transition-all",S||s==="Settings"?"bg-primary text-white":"bg-background-secondary text-text hover:bg-accent border border-border"),children:[_.jsx(en,{className:"w-4 h-4"}),_.jsx(Df,{className:jn("w-4 h-4 transition-transform",S&&"rotate-180")})]}),S&&_.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background-secondary dark:bg-background-primary border border-border rounded-lg shadow-lg z-50 overflow-hidden",children:[_.jsx(vd,{to:"/settings",onClick:()=>{f(!1),a("Settings")},className:"block px-4 py-2 hover:bg-accent text-text transition-colors",children:c("settings")}),_.jsxs("div",{className:"border-t border-border px-4 py-2",children:[_.jsx("div",{className:"text-xs text-text-muted mb-2",children:c("language")||"Language"}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx(lx,{lng:"en",current:d.language,onClick:l}),_.jsx(lx,{lng:"fa",current:d.language,onClick:l})]})]})]})]})]}),_.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 overflow-auto",children:_.jsx("div",{className:"h-full",children:_.jsx(L2,{})})}),_.jsx(yR,{t:c})]})}),_.jsxs("div",{className:"desktop-column",children:[_.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-0",children:[_.jsxs("div",{className:"card flex-1 border-b-0 relative overflow-hidden flex flex-col sm:flex-row min-h-[300px] sm:min-h-[400px] md:min-h-[450px] lg:min-h-[500px]",children:[_.jsx("div",{className:"hidden sm:block flex-shrink-0",children:_.jsx(ox,{})}),_.jsxs("div",{className:"flex-1 min-h-0 min-w-0 relative",children:[_.jsx(hR,{}),_.jsx("div",{className:"sm:hidden absolute top-2 left-2 z-10",children:_.jsx("div",{className:"bg-black/70 rounded-lg p-1",children:_.jsx("div",{className:"transform scale-75 origin-top-left",children:_.jsx(ox,{})})})})]}),_.jsx("div",{className:"hidden lg:block flex-shrink-0",children:_.jsx(gR,{className:"flex-shrink-0"})})]}),_.jsx("div",{className:"card flex-shrink-0 border-t-0 text-text dark:text-text font-medium text-center p-2 sm:p-3 text-xs sm:text-sm min-h-[40px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px] flex items-center justify-center",children:c("imageReel")})]}),_.jsxs("div",{className:"card flex-shrink-0 p-2 sm:p-3 min-h-[180px] sm:min-h-[200px] md:min-h-[220px] lg:min-h-[240px] max-h-[240px] sm:max-h-[280px] md:max-h-[320px] lg:max-h-[360px] flex flex-col",children:[_.jsxs("div",{className:"flex gap-1 sm:gap-2 mb-2 sm:mb-3 flex-shrink-0",children:[_.jsxs("button",{onClick:()=>x("histogram"),className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-semibold rounded-lg transition-all flex items-center gap-1 flex-shrink-0 ${y==="histogram"?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,children:[_.jsx("span",{className:"hidden sm:inline",children:" Histogram"}),_.jsx("span",{className:"sm:hidden",children:" Hist"})]}),_.jsxs("button",{onClick:()=>x("intensity"),className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-semibold rounded-lg transition-all flex items-center gap-1 flex-shrink-0 ${y==="intensity"?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-md":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,children:[_.jsx("span",{className:"hidden sm:inline",children:" Intensity Profile"}),_.jsx("span",{className:"sm:hidden",children:" Intensity"})]})]}),_.jsx("div",{className:"flex-1 min-h-0 overflow-hidden rounded-lg bg-background-secondary dark:bg-background-primary border border-border p-2",children:y==="histogram"?_.jsx(dR,{}):_.jsx(mR,{})})]})]})]})},gw=M.createContext();function xR({children:e}){const[t,s]=M.useState(()=>localStorage.getItem("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),[h,y]=M.useState(()=>localStorage.getItem("industrialUI")==="true");return M.useEffect(()=>{document.documentElement.classList.toggle("dark",t==="dark"),localStorage.setItem("theme",t)},[t]),M.useEffect(()=>{document.documentElement.classList.toggle("industrial",h),localStorage.setItem("industrialUI",h)},[h]),_.jsx(gw.Provider,{value:{theme:t,setTheme:s,industrialUI:h,setIndustrialUI:y},children:e})}function bR(){const e=M.useContext(gw);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function wR(){const{theme:e,setTheme:t,industrialUI:s,setIndustrialUI:h}=bR(),{t:y,i18n:x}=Wt(),S=()=>{t(e==="light"?"dark":"light")},f=()=>{h(!s)},r=c=>{x.changeLanguage(c)};return _.jsxs("div",{className:"p-4 sm:p-6 text-text dark:text-text space-y-6 sm:space-y-8 max-w-xl mx-auto",children:[_.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center",children:y("settingsPage")}),_.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center",children:y("settingsDescription")}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[_.jsx(vT,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-500 flex-shrink-0"}),_.jsxs("div",{children:[_.jsx("span",{className:"font-medium text-sm sm:text-base block",children:"Industrial UI"}),_.jsx("span",{className:"text-xs text-text-muted",children:"Windows XP-inspired interface"})]})]}),_.jsx("button",{onClick:f,className:`w-full sm:w-auto px-4 py-2 rounded-lg transition text-sm sm:text-base ${s?"bg-highlight text-white hover:bg-highlight-dark":"bg-primary text-white hover:bg-primary/90"}`,children:s?"Disable Industrial":"Enable Industrial"})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[_.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e==="light"?_.jsx(dk,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 flex-shrink-0"}):_.jsx(GT,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-400 flex-shrink-0"}),_.jsx("span",{className:"font-medium text-sm sm:text-base",children:y("theme")})]}),_.jsx("button",{onClick:S,className:"w-full sm:w-auto px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition text-sm sm:text-base",children:y("switchTo",{mode:y(e==="light"?"dark":"light")})})]}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[_.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:_.jsx("span",{className:"font-medium text-sm sm:text-base",children:y("language")})}),_.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:["en","fa"].map(c=>_.jsx("button",{onClick:()=>r(c),className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 rounded-lg text-sm transition font-medium
                ${x.language===c?"bg-primary text-white shadow":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:c.toUpperCase()},c))})]})]})}const SR=({width:e=800,height:t=600,backgroundImage:s=null,className:h=""})=>{const y=M.useRef(null),x=M.useRef(null),[S,f]=M.useState("brush"),[r,c]=M.useState(!1),[d,a]=M.useState({color:"#000000",width:5,opacity:1}),l=[{id:"select",icon:WT,label:""},{id:"brush",icon:qx,label:""},{id:"eraser",icon:oo,label:""},{id:"rectangle",icon:Qi,label:""},{id:"circle",icon:xd,label:""},{id:"triangle",icon:pk,label:""},{id:"line",icon:Si,label:""},{id:"text",icon:vk,label:""}];M.useEffect(()=>(y.current&&!x.current&&(x.current=new Xe.Canvas(y.current,{width:e,height:t,backgroundColor:"#ffffff",enableRetinaScaling:!0,selection:!0,preserveObjectStacking:!0}),u()),()=>{x.current&&x.current.dispose()}),[e,t]);const u=M.useCallback(()=>{if(!x.current)return;const V=new Xe.PencilBrush(x.current);V.color=d.color,V.width=d.width,V.strokeLineCap="round",V.strokeLineJoin="round",x.current.freeDrawingBrush=V},[d]);M.useEffect(()=>{x.current&&s&&Xe.FabricImage.fromURL(s).then(V=>{const $=x.current.width,te=x.current.height,X=$/V.width,Q=te/V.height,se=Math.min(X,Q);V.set({scaleX:se,scaleY:se,left:($-V.width*se)/2,top:(te-V.height*se)/2,selectable:!1,evented:!1}),x.current.setBackgroundImage(V,()=>{x.current.renderAll()})})},[s]);const m=M.useCallback(V=>{if(x.current)switch(f(V),V){case"select":x.current.isDrawingMode=!1,x.current.selection=!0,x.current.forEachObject(te=>{te.selectable=!0});break;case"brush":x.current.isDrawingMode=!0,x.current.selection=!1,u();break;case"eraser":x.current.isDrawingMode=!0,x.current.selection=!1;const $=new Xe.PencilBrush(x.current);$.color="#ffffff",$.width=d.width*2,x.current.freeDrawingBrush=$;break;case"rectangle":x.current.isDrawingMode=!1,w("rectangle");break;case"circle":x.current.isDrawingMode=!1,w("circle");break;case"triangle":x.current.isDrawingMode=!1,w("triangle");break;case"line":x.current.isDrawingMode=!1,w("line");break;case"text":x.current.isDrawingMode=!1,T();break}},[d,u]),v=M.useCallback(()=>{S!=="eraser"&&m("eraser")},[S,m]),g=M.useCallback(()=>{c(!r)},[r]),b=M.useCallback(V=>{V.preventDefault(),c(!r)},[r]),w=M.useCallback(V=>{if(!x.current)return;let $;switch(V){case"rectangle":$=new Xe.Rect({left:100,top:100,width:100,height:100,fill:"transparent",stroke:d.color,strokeWidth:2});break;case"circle":$=new Xe.Circle({left:100,top:100,radius:50,fill:"transparent",stroke:d.color,strokeWidth:2});break;case"triangle":$=new Xe.Triangle({left:100,top:100,width:100,height:100,fill:"transparent",stroke:d.color,strokeWidth:2});break;case"line":$=new Xe.Line([50,100,200,100],{stroke:d.color,strokeWidth:2});break}$&&(x.current.add($),x.current.setActiveObject($),x.current.renderAll())},[d.color]),T=M.useCallback(()=>{if(!x.current)return;const V=new Xe.Text(" ",{left:100,top:100,fontFamily:"Arial",fontSize:20,fill:d.color});x.current.add(V),x.current.setActiveObject(V),x.current.renderAll()},[d.color]),k=M.useCallback((V,$)=>{const te={...d,[V]:$};a(te),x.current&&S==="brush"&&u()},[d,S,u]),O=M.useCallback(()=>{if(!x.current)return;const V=x.current.getObjects();V.length>0&&(x.current.remove(V[V.length-1]),x.current.renderAll())},[]),D=M.useCallback(()=>{x.current&&(x.current.clear(),x.current.backgroundColor="#ffffff",x.current.renderAll())},[]),P=M.useCallback(()=>{if(!x.current)return;const V=x.current.getActiveObjects();V.length&&(x.current.remove(...V),x.current.discardActiveObject(),x.current.renderAll())},[]),F=M.useCallback(()=>{if(!x.current)return;const V=x.current.toDataURL({format:"png",quality:1}),$=document.createElement("a");$.download="canvas-image.png",$.href=V,$.click()},[]);return _.jsxs("div",{className:`flex flex-col bg-gray-50 ${h}`,children:[_.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b border-gray-200 shadow-sm",children:[_.jsx("div",{className:"flex items-center gap-2",children:l.map(V=>{const $=V.icon;return V.id==="eraser"?_.jsx("button",{onClick:v,onDoubleClick:g,onContextMenu:b,className:`
                    flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200
                    ${S===V.id?"bg-red-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}
                  `,title:`${V.label} (      )`,children:_.jsx($,{size:20})},V.id):_.jsx("button",{onClick:()=>m(V.id),className:`
                  flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200
                  ${S===V.id?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}
                `,title:V.label,children:_.jsx($,{size:20})},V.id)})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:O,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:"",children:_.jsx(wk,{size:20})}),_.jsx("button",{onClick:P,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:"  ",children:_.jsx(Sc,{size:20})}),_.jsx("button",{onClick:F,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:"",children:_.jsx(ao,{size:20})})]})]}),S==="brush"&&_.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white border-b border-gray-200",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(wd,{size:16,className:"text-gray-600"}),_.jsx("input",{type:"color",value:d.color,onChange:V=>k("color",V.target.value),className:"w-8 h-8 rounded border border-gray-300 cursor-pointer"})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm text-gray-600",children:":"}),_.jsx("input",{type:"range",min:"1",max:"50",value:d.width,onChange:V=>k("width",parseInt(V.target.value)),className:"w-24"}),_.jsx("span",{className:"text-sm text-gray-600 min-w-[30px]",children:d.width})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm text-gray-600",children:":"}),_.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d.opacity,onChange:V=>k("opacity",parseFloat(V.target.value)),className:"w-24"}),_.jsxs("span",{className:"text-sm text-gray-600 min-w-[30px]",children:[Math.round(d.opacity*100),"%"]})]})]}),S==="eraser"&&r&&_.jsxs("div",{className:"p-3 bg-red-50 border-b border-red-200",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(oo,{size:18,className:"text-red-600"}),_.jsx("span",{className:"text-sm font-medium text-red-800",children:"  "})]}),_.jsx("button",{onClick:()=>c(!1),className:"flex items-center justify-center w-6 h-6 rounded bg-red-200 text-red-600 hover:bg-red-300 transition-colors",title:" ",children:_.jsx($t,{size:14})})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-sm text-red-700",children:" :"}),_.jsx("input",{type:"range",min:"5",max:"100",value:d.width*2,onChange:V=>k("width",parseInt(V.target.value)/2),className:"w-24"}),_.jsx("span",{className:"text-sm text-red-700 min-w-[30px]",children:d.width*2})]}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsx("button",{onClick:D,className:"px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600 transition-colors",children:"  "})})]})]}),_.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-auto",children:_.jsx("div",{className:"relative bg-white rounded-lg shadow-lg flex justify-center items-center",children:_.jsx("canvas",{ref:y,className:"border border-gray-300 rounded-lg"})})})]})},CR=({className:e=""})=>{const{cameras:t,wsStatus:s,imageSettings:h,updateImageSettings:y,toggleGrayscale:x,zoomImage:S,undoLastChange:f}=Dc(),[r,c]=M.useState(!1),[d,a]=M.useState(!1),[l,u]=M.useState({brightness:100,contrast:100,saturation:100,blur:0,hue:0}),m=M.useCallback((k,O)=>{const D={...l,[k]:O};u(D),y(D)},[l,y]),v=M.useCallback(()=>{console.log("    Canvas  ")},[]),g=M.useCallback(()=>{const k={imageSettings:l,timestamp:Date.now()},O=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),D=document.createElement("a");D.download=`basler-project-${Date.now()}.json`,D.href=URL.createObjectURL(O),D.click(),URL.revokeObjectURL(D.href)},[l]),b=M.useCallback(k=>{const O=k.target.files[0];if(!O)return;const D=new FileReader;D.onload=async P=>{try{const F=JSON.parse(P.target.result);F.imageSettings&&(u(F.imageSettings),y(F.imageSettings)),console.log("    ")}catch(F){console.error("   :",F)}},D.readAsText(O),k.target.value=""},[y]),w=M.useCallback(()=>{c(!r)},[r]),T=r?{width:window.innerWidth-100,height:window.innerHeight-200}:{width:800,height:600};return _.jsxs("div",{className:`h-full flex flex-col bg-gray-50 ${e}`,children:[_.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b border-gray-200 shadow-sm",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Basler Camera -  "}),_.jsx(Ns,{status:s,lastUpdate:t.basler.lastUpdate})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("label",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors cursor-pointer",children:[_.jsx(Kx,{size:20}),_.jsx("input",{type:"file",accept:".json",onChange:b,className:"hidden"})]}),_.jsx("button",{onClick:g,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-green-100 text-green-600 hover:bg-green-200 transition-colors",title:" ",children:_.jsx(ao,{size:20})}),_.jsx("button",{onClick:()=>a(!d),className:`
              flex items-center justify-center w-10 h-10 rounded-lg transition-colors
              ${d?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}
            `,title:" ",children:_.jsx(en,{size:20})}),_.jsx("button",{onClick:w,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:r?"   ":" ",children:r?_.jsx(IT,{size:20}):_.jsx(VT,{size:20})}),_.jsx("button",{onClick:f,className:"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",title:"",children:_.jsx(wc,{size:20})})]})]}),d&&_.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:""}),_.jsx("input",{type:"range",min:"0",max:"200",value:l.brightness,onChange:k=>m("brightness",parseInt(k.target.value)),className:"w-full"}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.brightness,"%"]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:""}),_.jsx("input",{type:"range",min:"0",max:"200",value:l.contrast,onChange:k=>m("contrast",parseInt(k.target.value)),className:"w-full"}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.contrast,"%"]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:""}),_.jsx("input",{type:"range",min:"0",max:"200",value:l.saturation,onChange:k=>m("saturation",parseInt(k.target.value)),className:"w-full"}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.saturation,"%"]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:""}),_.jsx("input",{type:"range",min:"0",max:"10",value:l.blur,onChange:k=>m("blur",parseInt(k.target.value)),className:"w-full"}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.blur,"px"]})]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1",children:""}),_.jsx("input",{type:"range",min:"-180",max:"180",value:l.hue,onChange:k=>m("hue",parseInt(k.target.value)),className:"w-full"}),_.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[l.hue,""]})]})]}),_.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[_.jsx("button",{onClick:x,className:`
                px-4 py-2 rounded-lg text-sm font-medium transition-colors
                ${h.grayscale?"bg-gray-800 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}
              `,children:"  "}),_.jsx("button",{onClick:()=>{const k={brightness:100,contrast:100,saturation:100,blur:0,hue:0};u(k),y(k)},className:"px-4 py-2 rounded-lg text-sm font-medium bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",children:""})]})]}),_.jsx("div",{className:`flex-1 ${r?"fixed inset-0 z-50 bg-gray-50":""}`,children:_.jsx(SR,{width:T.width,height:T.height,backgroundImage:t.basler.currentFrame,className:"h-full"})}),_.jsx("div",{className:"p-2 bg-gray-100 border-t border-gray-200 text-sm text-gray-600",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("span",{children:[": ",t.basler.isConnected?"":""]}),_.jsxs("span",{children:[" : ",t.basler.lastUpdate?new Date(t.basler.lastUpdate).toLocaleTimeString("fa-IR"):"-"]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("span",{children:[" Canvas: ",T.width,"  ",T.height]}),_.jsx("button",{onClick:v,className:"px-3 py-1 rounded bg-green-500 text-white text-xs hover:bg-green-600 transition-colors",children:" "})]})]})})]})},_R=()=>_.jsx(bo,{title:" Canvas ",description:"       ",children:_.jsx("div",{className:"h-full",children:_.jsx(CR,{})})}),TR=[{path:"/",element:_.jsx(vR,{}),children:[{index:!0,element:_.jsx(D_,{})},{path:"initial",element:_.jsx(Dk,{})},{path:"position",element:_.jsx(Rk,{})},{path:"projection",element:_.jsx(Nk,{})},{path:"post-processing",element:_.jsx(Pk,{})},{path:"reconstruction",element:_.jsx(Lk,{})},{path:"settings",element:_.jsx(wR,{})},{path:"canvas-test",element:_.jsx(_R,{})}]}];function kR(){return C2(TR)}const Ye=e=>typeof e=="string",Ia=()=>{let e,t;const s=new Promise((h,y)=>{e=h,t=y});return s.resolve=e,s.reject=t,s},cx=e=>e==null?"":""+e,ER=(e,t,s)=>{e.forEach(h=>{t[h]&&(s[h]=t[h])})},OR=/###/g,ux=e=>e&&e.indexOf("###")>-1?e.replace(OR,"."):e,hx=e=>!e||Ye(e),ro=(e,t,s)=>{const h=Ye(t)?t.split("."):t;let y=0;for(;y<h.length-1;){if(hx(e))return{};const x=ux(h[y]);!e[x]&&s&&(e[x]=new s),Object.prototype.hasOwnProperty.call(e,x)?e=e[x]:e={},++y}return hx(e)?{}:{obj:e,k:ux(h[y])}},fx=(e,t,s)=>{const{obj:h,k:y}=ro(e,t,Object);if(h!==void 0||t.length===1){h[y]=s;return}let x=t[t.length-1],S=t.slice(0,t.length-1),f=ro(e,S,Object);for(;f.obj===void 0&&S.length;)x=`${S[S.length-1]}.${x}`,S=S.slice(0,S.length-1),f=ro(e,S,Object),f!=null&&f.obj&&typeof f.obj[`${f.k}.${x}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${x}`]=s},MR=(e,t,s,h)=>{const{obj:y,k:x}=ro(e,t,Object);y[x]=y[x]||[],y[x].push(s)},mc=(e,t)=>{const{obj:s,k:h}=ro(e,t);if(s&&Object.prototype.hasOwnProperty.call(s,h))return s[h]},jR=(e,t,s)=>{const h=mc(e,s);return h!==void 0?h:mc(t,s)},pw=(e,t,s)=>{for(const h in t)h!=="__proto__"&&h!=="constructor"&&(h in e?Ye(e[h])||e[h]instanceof String||Ye(t[h])||t[h]instanceof String?s&&(e[h]=t[h]):pw(e[h],t[h],s):e[h]=t[h]);return e},bs=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var AR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const DR=e=>Ye(e)?e.replace(/[&<>"'\/]/g,t=>AR[t]):e;class RR{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const s=this.regExpMap.get(t);if(s!==void 0)return s;const h=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,h),this.regExpQueue.push(t),h}}const NR=[" ",",","?","!",";"],PR=new RR(20),LR=(e,t,s)=>{t=t||"",s=s||"";const h=NR.filter(S=>t.indexOf(S)<0&&s.indexOf(S)<0);if(h.length===0)return!0;const y=PR.getRegExp(`(${h.map(S=>S==="?"?"\\?":S).join("|")})`);let x=!y.test(e);if(!x){const S=e.indexOf(s);S>0&&!y.test(e.substring(0,S))&&(x=!0)}return x},ud=(e,t,s=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const h=t.split(s);let y=e;for(let x=0;x<h.length;){if(!y||typeof y!="object")return;let S,f="";for(let r=x;r<h.length;++r)if(r!==x&&(f+=s),f+=h[r],S=y[f],S!==void 0){if(["string","number","boolean"].indexOf(typeof S)>-1&&r<h.length-1)continue;x+=r-x+1;break}y=S}return y},po=e=>e==null?void 0:e.replace("_","-"),FR={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var s,h;(h=(s=console==null?void 0:console[e])==null?void 0:s.apply)==null||h.call(s,console,t)}};class gc{constructor(t,s={}){this.init(t,s)}init(t,s={}){this.prefix=s.prefix||"i18next:",this.logger=t||FR,this.options=s,this.debug=s.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,s,h,y){return y&&!this.debug?null:(Ye(t[0])&&(t[0]=`${h}${this.prefix} ${t[0]}`),this.logger[s](t))}create(t){return new gc(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new gc(this.logger,t)}}var qn=new gc;class Rc{constructor(){this.observers={}}on(t,s){return t.split(" ").forEach(h=>{this.observers[h]||(this.observers[h]=new Map);const y=this.observers[h].get(s)||0;this.observers[h].set(s,y+1)}),this}off(t,s){if(this.observers[t]){if(!s){delete this.observers[t];return}this.observers[t].delete(s)}}emit(t,...s){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([y,x])=>{for(let S=0;S<x;S++)y(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([y,x])=>{for(let S=0;S<x;S++)y.apply(y,[t,...s])})}}class dx extends Rc{constructor(t,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const s=this.options.ns.indexOf(t);s>-1&&this.options.ns.splice(s,1)}getResource(t,s,h,y={}){var c,d;const x=y.keySeparator!==void 0?y.keySeparator:this.options.keySeparator,S=y.ignoreJSONStructure!==void 0?y.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;t.indexOf(".")>-1?f=t.split("."):(f=[t,s],h&&(Array.isArray(h)?f.push(...h):Ye(h)&&x?f.push(...h.split(x)):f.push(h)));const r=mc(this.data,f);return!r&&!s&&!h&&t.indexOf(".")>-1&&(t=f[0],s=f[1],h=f.slice(2).join(".")),r||!S||!Ye(h)?r:ud((d=(c=this.data)==null?void 0:c[t])==null?void 0:d[s],h,x)}addResource(t,s,h,y,x={silent:!1}){const S=x.keySeparator!==void 0?x.keySeparator:this.options.keySeparator;let f=[t,s];h&&(f=f.concat(S?h.split(S):h)),t.indexOf(".")>-1&&(f=t.split("."),y=s,s=f[1]),this.addNamespaces(s),fx(this.data,f,y),x.silent||this.emit("added",t,s,h,y)}addResources(t,s,h,y={silent:!1}){for(const x in h)(Ye(h[x])||Array.isArray(h[x]))&&this.addResource(t,s,x,h[x],{silent:!0});y.silent||this.emit("added",t,s,h)}addResourceBundle(t,s,h,y,x,S={silent:!1,skipCopy:!1}){let f=[t,s];t.indexOf(".")>-1&&(f=t.split("."),y=h,h=s,s=f[1]),this.addNamespaces(s);let r=mc(this.data,f)||{};S.skipCopy||(h=JSON.parse(JSON.stringify(h))),y?pw(r,h,x):r={...r,...h},fx(this.data,f,r),S.silent||this.emit("added",t,s,h)}removeResourceBundle(t,s){this.hasResourceBundle(t,s)&&delete this.data[t][s],this.removeNamespaces(s),this.emit("removed",t,s)}hasResourceBundle(t,s){return this.getResource(t,s)!==void 0}getResourceBundle(t,s){return s||(s=this.options.defaultNS),this.getResource(t,s)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const s=this.getDataByLanguage(t);return!!(s&&Object.keys(s)||[]).find(y=>s[y]&&Object.keys(s[y]).length>0)}toJSON(){return this.data}}var yw={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,s,h,y){return e.forEach(x=>{var S;t=((S=this.processors[x])==null?void 0:S.process(t,s,h,y))??t}),t}};const mx={},gx=e=>!Ye(e)&&typeof e!="boolean"&&typeof e!="number";class pc extends Rc{constructor(t,s={}){super(),ER(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qn.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,s={interpolation:{}}){const h={...s};if(t==null)return!1;const y=this.resolve(t,h);return(y==null?void 0:y.res)!==void 0}extractFromKey(t,s){let h=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const y=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let x=s.ns||this.options.defaultNS||[];const S=h&&t.indexOf(h)>-1,f=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!LR(t,h,y);if(S&&!f){const r=t.match(this.interpolator.nestingRegexp);if(r&&r.length>0)return{key:t,namespaces:Ye(x)?[x]:x};const c=t.split(h);(h!==y||h===y&&this.options.ns.indexOf(c[0])>-1)&&(x=c.shift()),t=c.join(y)}return{key:t,namespaces:Ye(x)?[x]:x}}translate(t,s,h){let y=typeof s=="object"?{...s}:s;if(typeof y!="object"&&this.options.overloadTranslationOptionHandler&&(y=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(y={...y}),y||(y={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const x=y.returnDetails!==void 0?y.returnDetails:this.options.returnDetails,S=y.keySeparator!==void 0?y.keySeparator:this.options.keySeparator,{key:f,namespaces:r}=this.extractFromKey(t[t.length-1],y),c=r[r.length-1];let d=y.nsSeparator!==void 0?y.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const a=y.lng||this.language,l=y.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((a==null?void 0:a.toLowerCase())==="cimode")return l?x?{res:`${c}${d}${f}`,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:c,usedParams:this.getUsedParamsDetails(y)}:`${c}${d}${f}`:x?{res:f,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:c,usedParams:this.getUsedParamsDetails(y)}:f;const u=this.resolve(t,y);let m=u==null?void 0:u.res;const v=(u==null?void 0:u.usedKey)||f,g=(u==null?void 0:u.exactUsedKey)||f,b=["[object Number]","[object Function]","[object RegExp]"],w=y.joinArrays!==void 0?y.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,k=y.count!==void 0&&!Ye(y.count),O=pc.hasDefaultValue(y),D=k?this.pluralResolver.getSuffix(a,y.count,y):"",P=y.ordinal&&k?this.pluralResolver.getSuffix(a,y.count,{ordinal:!1}):"",F=k&&!y.ordinal&&y.count===0,V=F&&y[`defaultValue${this.options.pluralSeparator}zero`]||y[`defaultValue${D}`]||y[`defaultValue${P}`]||y.defaultValue;let $=m;T&&!m&&O&&($=V);const te=gx($),X=Object.prototype.toString.apply($);if(T&&$&&te&&b.indexOf(X)<0&&!(Ye(w)&&Array.isArray($))){if(!y.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,$,{...y,ns:r}):`key '${f} (${this.language})' returned an object instead of string.`;return x?(u.res=Q,u.usedParams=this.getUsedParamsDetails(y),u):Q}if(S){const Q=Array.isArray($),se=Q?[]:{},K=Q?g:v;for(const U in $)if(Object.prototype.hasOwnProperty.call($,U)){const q=`${K}${S}${U}`;O&&!m?se[U]=this.translate(q,{...y,defaultValue:gx(V)?V[U]:void 0,joinArrays:!1,ns:r}):se[U]=this.translate(q,{...y,joinArrays:!1,ns:r}),se[U]===q&&(se[U]=$[U])}m=se}}else if(T&&Ye(w)&&Array.isArray(m))m=m.join(w),m&&(m=this.extendTranslation(m,t,y,h));else{let Q=!1,se=!1;!this.isValidLookup(m)&&O&&(Q=!0,m=V),this.isValidLookup(m)||(se=!0,m=f);const U=(y.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&se?void 0:m,q=O&&V!==m&&this.options.updateMissing;if(se||Q||q){if(this.logger.log(q?"updateKey":"missingKey",a,c,f,q?V:m),S){const j=this.resolve(f,{...y,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Z=[];const L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,y.lng||this.language);if(this.options.saveMissingTo==="fallback"&&L&&L[0])for(let j=0;j<L.length;j++)Z.push(L[j]);else this.options.saveMissingTo==="all"?Z=this.languageUtils.toResolveHierarchy(y.lng||this.language):Z.push(y.lng||this.language);const A=(j,R,I)=>{var z;const B=O&&I!==m?I:U;this.options.missingKeyHandler?this.options.missingKeyHandler(j,c,R,B,q,y):(z=this.backendConnector)!=null&&z.saveMissing&&this.backendConnector.saveMissing(j,c,R,B,q,y),this.emit("missingKey",j,c,R,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?Z.forEach(j=>{const R=this.pluralResolver.getSuffixes(j,y);F&&y[`defaultValue${this.options.pluralSeparator}zero`]&&R.indexOf(`${this.options.pluralSeparator}zero`)<0&&R.push(`${this.options.pluralSeparator}zero`),R.forEach(I=>{A([j],f+I,y[`defaultValue${I}`]||V)})}):A(Z,f,V))}m=this.extendTranslation(m,t,y,u,h),se&&m===f&&this.options.appendNamespaceToMissingKey&&(m=`${c}${d}${f}`),(se||Q)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${d}${f}`:f,Q?m:void 0,y))}return x?(u.res=m,u.usedParams=this.getUsedParamsDetails(y),u):m}extendTranslation(t,s,h,y,x){var r,c;if((r=this.i18nFormat)!=null&&r.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...h},h.lng||this.language||y.usedLng,y.usedNS,y.usedKey,{resolved:y});else if(!h.skipInterpolation){h.interpolation&&this.interpolator.init({...h,interpolation:{...this.options.interpolation,...h.interpolation}});const d=Ye(t)&&(((c=h==null?void 0:h.interpolation)==null?void 0:c.skipOnVariables)!==void 0?h.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(d){const u=t.match(this.interpolator.nestingRegexp);a=u&&u.length}let l=h.replace&&!Ye(h.replace)?h.replace:h;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,h.lng||this.language||y.usedLng,h),d){const u=t.match(this.interpolator.nestingRegexp),m=u&&u.length;a<m&&(h.nest=!1)}!h.lng&&y&&y.res&&(h.lng=this.language||y.usedLng),h.nest!==!1&&(t=this.interpolator.nest(t,(...u)=>(x==null?void 0:x[0])===u[0]&&!h.context?(this.logger.warn(`It seems you are nesting recursively key: ${u[0]} in key: ${s[0]}`),null):this.translate(...u,s),h)),h.interpolation&&this.interpolator.reset()}const S=h.postProcess||this.options.postProcess,f=Ye(S)?[S]:S;return t!=null&&(f!=null&&f.length)&&h.applyPostProcessor!==!1&&(t=yw.handle(f,t,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...y,usedParams:this.getUsedParamsDetails(h)},...h}:h,this)),t}resolve(t,s={}){let h,y,x,S,f;return Ye(t)&&(t=[t]),t.forEach(r=>{if(this.isValidLookup(h))return;const c=this.extractFromKey(r,s),d=c.key;y=d;let a=c.namespaces;this.options.fallbackNS&&(a=a.concat(this.options.fallbackNS));const l=s.count!==void 0&&!Ye(s.count),u=l&&!s.ordinal&&s.count===0,m=s.context!==void 0&&(Ye(s.context)||typeof s.context=="number")&&s.context!=="",v=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);a.forEach(g=>{var b,w;this.isValidLookup(h)||(f=g,!mx[`${v[0]}-${g}`]&&((b=this.utils)!=null&&b.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(f))&&(mx[`${v[0]}-${g}`]=!0,this.logger.warn(`key "${y}" for languages "${v.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(T=>{var D;if(this.isValidLookup(h))return;S=T;const k=[d];if((D=this.i18nFormat)!=null&&D.addLookupKeys)this.i18nFormat.addLookupKeys(k,d,T,g,s);else{let P;l&&(P=this.pluralResolver.getSuffix(T,s.count,s));const F=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(k.push(d+P),s.ordinal&&P.indexOf(V)===0&&k.push(d+P.replace(V,this.options.pluralSeparator)),u&&k.push(d+F)),m){const $=`${d}${this.options.contextSeparator}${s.context}`;k.push($),l&&(k.push($+P),s.ordinal&&P.indexOf(V)===0&&k.push($+P.replace(V,this.options.pluralSeparator)),u&&k.push($+F))}}let O;for(;O=k.pop();)this.isValidLookup(h)||(x=O,h=this.getResource(T,g,O,s))}))})}),{res:h,usedKey:y,exactUsedKey:x,usedLng:S,usedNS:f}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,s,h,y={}){var x;return(x=this.i18nFormat)!=null&&x.getResource?this.i18nFormat.getResource(t,s,h,y):this.resourceStore.getResource(t,s,h,y)}getUsedParamsDetails(t={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],h=t.replace&&!Ye(t.replace);let y=h?t.replace:t;if(h&&typeof t.count<"u"&&(y.count=t.count),this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),!h){y={...y};for(const x of s)delete y[x]}return y}static hasDefaultValue(t){const s="defaultValue";for(const h in t)if(Object.prototype.hasOwnProperty.call(t,h)&&s===h.substring(0,s.length)&&t[h]!==void 0)return!0;return!1}}class px{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qn.create("languageUtils")}getScriptPartFromCode(t){if(t=po(t),!t||t.indexOf("-")<0)return null;const s=t.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(t){if(t=po(t),!t||t.indexOf("-")<0)return t;const s=t.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(t){if(Ye(t)&&t.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(t)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let s;return t.forEach(h=>{if(s)return;const y=this.formatLanguageCode(h);(!this.options.supportedLngs||this.isSupportedCode(y))&&(s=y)}),!s&&this.options.supportedLngs&&t.forEach(h=>{if(s)return;const y=this.getScriptPartFromCode(h);if(this.isSupportedCode(y))return s=y;const x=this.getLanguagePartFromCode(h);if(this.isSupportedCode(x))return s=x;s=this.options.supportedLngs.find(S=>{if(S===x)return S;if(!(S.indexOf("-")<0&&x.indexOf("-")<0)&&(S.indexOf("-")>0&&x.indexOf("-")<0&&S.substring(0,S.indexOf("-"))===x||S.indexOf(x)===0&&x.length>1))return S})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(t,s){if(!t)return[];if(typeof t=="function"&&(t=t(s)),Ye(t)&&(t=[t]),Array.isArray(t))return t;if(!s)return t.default||[];let h=t[s];return h||(h=t[this.getScriptPartFromCode(s)]),h||(h=t[this.formatLanguageCode(s)]),h||(h=t[this.getLanguagePartFromCode(s)]),h||(h=t.default),h||[]}toResolveHierarchy(t,s){const h=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],t),y=[],x=S=>{S&&(this.isSupportedCode(S)?y.push(S):this.logger.warn(`rejecting language code not found in supportedLngs: ${S}`))};return Ye(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&x(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&x(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&x(this.getLanguagePartFromCode(t))):Ye(t)&&x(this.formatLanguageCode(t)),h.forEach(S=>{y.indexOf(S)<0&&x(this.formatLanguageCode(S))}),y}}const yx={zero:0,one:1,two:2,few:3,many:4,other:5},vx={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class zR{constructor(t,s={}){this.languageUtils=t,this.options=s,this.logger=qn.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,s){this.rules[t]=s}clearCache(){this.pluralRulesCache={}}getRule(t,s={}){const h=po(t==="dev"?"en":t),y=s.ordinal?"ordinal":"cardinal",x=JSON.stringify({cleanedCode:h,type:y});if(x in this.pluralRulesCache)return this.pluralRulesCache[x];let S;try{S=new Intl.PluralRules(h,{type:y})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),vx;if(!t.match(/-|_/))return vx;const r=this.languageUtils.getLanguagePartFromCode(t);S=this.getRule(r,s)}return this.pluralRulesCache[x]=S,S}needsPlural(t,s={}){let h=this.getRule(t,s);return h||(h=this.getRule("dev",s)),(h==null?void 0:h.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,s,h={}){return this.getSuffixes(t,h).map(y=>`${s}${y}`)}getSuffixes(t,s={}){let h=this.getRule(t,s);return h||(h=this.getRule("dev",s)),h?h.resolvedOptions().pluralCategories.sort((y,x)=>yx[y]-yx[x]).map(y=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${y}`):[]}getSuffix(t,s,h={}){const y=this.getRule(t,h);return y?`${this.options.prepend}${h.ordinal?`ordinal${this.options.prepend}`:""}${y.select(s)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",s,h))}}const xx=(e,t,s,h=".",y=!0)=>{let x=jR(e,t,s);return!x&&y&&Ye(s)&&(x=ud(e,s,h),x===void 0&&(x=ud(t,s,h))),x},Ef=e=>e.replace(/\$/g,"$$$$");class BR{constructor(t={}){var s;this.logger=qn.create("interpolator"),this.options=t,this.format=((s=t==null?void 0:t.interpolation)==null?void 0:s.format)||(h=>h),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:s,escapeValue:h,useRawValueToEscape:y,prefix:x,prefixEscaped:S,suffix:f,suffixEscaped:r,formatSeparator:c,unescapeSuffix:d,unescapePrefix:a,nestingPrefix:l,nestingPrefixEscaped:u,nestingSuffix:m,nestingSuffixEscaped:v,nestingOptionsSeparator:g,maxReplaces:b,alwaysFormat:w}=t.interpolation;this.escape=s!==void 0?s:DR,this.escapeValue=h!==void 0?h:!0,this.useRawValueToEscape=y!==void 0?y:!1,this.prefix=x?bs(x):S||"{{",this.suffix=f?bs(f):r||"}}",this.formatSeparator=c||",",this.unescapePrefix=d?"":a||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=l?bs(l):u||bs("$t("),this.nestingSuffix=m?bs(m):v||bs(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=b||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(s,h)=>(s==null?void 0:s.source)===h?(s.lastIndex=0,s):new RegExp(h,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,s,h,y){var u;let x,S,f;const r=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=m=>{if(m.indexOf(this.formatSeparator)<0){const w=xx(s,r,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,h,{...y,...s,interpolationkey:m}):w}const v=m.split(this.formatSeparator),g=v.shift().trim(),b=v.join(this.formatSeparator).trim();return this.format(xx(s,r,g,this.options.keySeparator,this.options.ignoreJSONStructure),b,h,{...y,...s,interpolationkey:g})};this.resetRegExp();const d=(y==null?void 0:y.missingInterpolationHandler)||this.options.missingInterpolationHandler,a=((u=y==null?void 0:y.interpolation)==null?void 0:u.skipOnVariables)!==void 0?y.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>Ef(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?Ef(this.escape(m)):Ef(m)}].forEach(m=>{for(f=0;x=m.regex.exec(t);){const v=x[1].trim();if(S=c(v),S===void 0)if(typeof d=="function"){const b=d(t,x,y);S=Ye(b)?b:""}else if(y&&Object.prototype.hasOwnProperty.call(y,v))S="";else if(a){S=x[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${t}`),S="";else!Ye(S)&&!this.useRawValueToEscape&&(S=cx(S));const g=m.safeValue(S);if(t=t.replace(x[0],g),a?(m.regex.lastIndex+=S.length,m.regex.lastIndex-=x[0].length):m.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),t}nest(t,s,h={}){let y,x,S;const f=(r,c)=>{const d=this.nestingOptionsSeparator;if(r.indexOf(d)<0)return r;const a=r.split(new RegExp(`${d}[ ]*{`));let l=`{${a[1]}`;r=a[0],l=this.interpolate(l,S);const u=l.match(/'/g),m=l.match(/"/g);(((u==null?void 0:u.length)??0)%2===0&&!m||m.length%2!==0)&&(l=l.replace(/'/g,'"'));try{S=JSON.parse(l),c&&(S={...c,...S})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${r}`,v),`${r}${d}${l}`}return S.defaultValue&&S.defaultValue.indexOf(this.prefix)>-1&&delete S.defaultValue,r};for(;y=this.nestingRegexp.exec(t);){let r=[];S={...h},S=S.replace&&!Ye(S.replace)?S.replace:S,S.applyPostProcessor=!1,delete S.defaultValue;let c=!1;if(y[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(y[1])){const d=y[1].split(this.formatSeparator).map(a=>a.trim());y[1]=d.shift(),r=d,c=!0}if(x=s(f.call(this,y[1].trim(),S),S),x&&y[0]===t&&!Ye(x))return x;Ye(x)||(x=cx(x)),x||(this.logger.warn(`missed to resolve ${y[1]} for nesting ${t}`),x=""),c&&(x=r.reduce((d,a)=>this.format(d,a,h.lng,{...h,interpolationkey:y[1].trim()}),x.trim())),t=t.replace(y[0],x),this.regexp.lastIndex=0}return t}}const VR=e=>{let t=e.toLowerCase().trim();const s={};if(e.indexOf("(")>-1){const h=e.split("(");t=h[0].toLowerCase().trim();const y=h[1].substring(0,h[1].length-1);t==="currency"&&y.indexOf(":")<0?s.currency||(s.currency=y.trim()):t==="relativetime"&&y.indexOf(":")<0?s.range||(s.range=y.trim()):y.split(";").forEach(S=>{if(S){const[f,...r]=S.split(":"),c=r.join(":").trim().replace(/^'+|'+$/g,""),d=f.trim();s[d]||(s[d]=c),c==="false"&&(s[d]=!1),c==="true"&&(s[d]=!0),isNaN(c)||(s[d]=parseInt(c,10))}})}return{formatName:t,formatOptions:s}},bx=e=>{const t={};return(s,h,y)=>{let x=y;y&&y.interpolationkey&&y.formatParams&&y.formatParams[y.interpolationkey]&&y[y.interpolationkey]&&(x={...x,[y.interpolationkey]:void 0});const S=h+JSON.stringify(x);let f=t[S];return f||(f=e(po(h),y),t[S]=f),f(s)}},UR=e=>(t,s,h)=>e(po(s),h)(t);class HR{constructor(t={}){this.logger=qn.create("formatter"),this.options=t,this.init(t)}init(t,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const h=s.cacheInBuiltFormats?bx:UR;this.formats={number:h((y,x)=>{const S=new Intl.NumberFormat(y,{...x});return f=>S.format(f)}),currency:h((y,x)=>{const S=new Intl.NumberFormat(y,{...x,style:"currency"});return f=>S.format(f)}),datetime:h((y,x)=>{const S=new Intl.DateTimeFormat(y,{...x});return f=>S.format(f)}),relativetime:h((y,x)=>{const S=new Intl.RelativeTimeFormat(y,{...x});return f=>S.format(f,x.range||"day")}),list:h((y,x)=>{const S=new Intl.ListFormat(y,{...x});return f=>S.format(f)})}}add(t,s){this.formats[t.toLowerCase().trim()]=s}addCached(t,s){this.formats[t.toLowerCase().trim()]=bx(s)}format(t,s,h,y={}){const x=s.split(this.formatSeparator);if(x.length>1&&x[0].indexOf("(")>1&&x[0].indexOf(")")<0&&x.find(f=>f.indexOf(")")>-1)){const f=x.findIndex(r=>r.indexOf(")")>-1);x[0]=[x[0],...x.splice(1,f)].join(this.formatSeparator)}return x.reduce((f,r)=>{var a;const{formatName:c,formatOptions:d}=VR(r);if(this.formats[c]){let l=f;try{const u=((a=y==null?void 0:y.formatParams)==null?void 0:a[y.interpolationkey])||{},m=u.locale||u.lng||y.locale||y.lng||h;l=this.formats[c](f,m,{...d,...y,...u})}catch(u){this.logger.warn(u)}return l}else this.logger.warn(`there was no format function for ${c}`);return f},t)}}const IR=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class YR extends Rc{constructor(t,s,h,y={}){var x,S;super(),this.backend=t,this.store=s,this.services=h,this.languageUtils=h.languageUtils,this.options=y,this.logger=qn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=y.maxParallelReads||10,this.readingCalls=0,this.maxRetries=y.maxRetries>=0?y.maxRetries:5,this.retryTimeout=y.retryTimeout>=1?y.retryTimeout:350,this.state={},this.queue=[],(S=(x=this.backend)==null?void 0:x.init)==null||S.call(x,h,y.backend,y)}queueLoad(t,s,h,y){const x={},S={},f={},r={};return t.forEach(c=>{let d=!0;s.forEach(a=>{const l=`${c}|${a}`;!h.reload&&this.store.hasResourceBundle(c,a)?this.state[l]=2:this.state[l]<0||(this.state[l]===1?S[l]===void 0&&(S[l]=!0):(this.state[l]=1,d=!1,S[l]===void 0&&(S[l]=!0),x[l]===void 0&&(x[l]=!0),r[a]===void 0&&(r[a]=!0)))}),d||(f[c]=!0)}),(Object.keys(x).length||Object.keys(S).length)&&this.queue.push({pending:S,pendingCount:Object.keys(S).length,loaded:{},errors:[],callback:y}),{toLoad:Object.keys(x),pending:Object.keys(S),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(r)}}loaded(t,s,h){const y=t.split("|"),x=y[0],S=y[1];s&&this.emit("failedLoading",x,S,s),!s&&h&&this.store.addResourceBundle(x,S,h,void 0,void 0,{skipCopy:!0}),this.state[t]=s?-1:2,s&&h&&(this.state[t]=0);const f={};this.queue.forEach(r=>{MR(r.loaded,[x],S),IR(r,t),s&&r.errors.push(s),r.pendingCount===0&&!r.done&&(Object.keys(r.loaded).forEach(c=>{f[c]||(f[c]={});const d=r.loaded[c];d.length&&d.forEach(a=>{f[c][a]===void 0&&(f[c][a]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(r=>!r.done)}read(t,s,h,y=0,x=this.retryTimeout,S){if(!t.length)return S(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:s,fcName:h,tried:y,wait:x,callback:S});return}this.readingCalls++;const f=(c,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const a=this.waitingReads.shift();this.read(a.lng,a.ns,a.fcName,a.tried,a.wait,a.callback)}if(c&&d&&y<this.maxRetries){setTimeout(()=>{this.read.call(this,t,s,h,y+1,x*2,S)},x);return}S(c,d)},r=this.backend[h].bind(this.backend);if(r.length===2){try{const c=r(t,s);c&&typeof c.then=="function"?c.then(d=>f(null,d)).catch(f):f(null,c)}catch(c){f(c)}return}return r(t,s,f)}prepareLoading(t,s,h={},y){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),y&&y();Ye(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ye(s)&&(s=[s]);const x=this.queueLoad(t,s,h,y);if(!x.toLoad.length)return x.pending.length||y(),null;x.toLoad.forEach(S=>{this.loadOne(S)})}load(t,s,h){this.prepareLoading(t,s,{},h)}reload(t,s,h){this.prepareLoading(t,s,{reload:!0},h)}loadOne(t,s=""){const h=t.split("|"),y=h[0],x=h[1];this.read(y,x,"read",void 0,void 0,(S,f)=>{S&&this.logger.warn(`${s}loading namespace ${x} for language ${y} failed`,S),!S&&f&&this.logger.log(`${s}loaded namespace ${x} for language ${y}`,f),this.loaded(t,S,f)})}saveMissing(t,s,h,y,x,S={},f=()=>{}){var r,c,d,a,l;if((c=(r=this.services)==null?void 0:r.utils)!=null&&c.hasLoadedNamespace&&!((a=(d=this.services)==null?void 0:d.utils)!=null&&a.hasLoadedNamespace(s))){this.logger.warn(`did not save key "${h}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(h==null||h==="")){if((l=this.backend)!=null&&l.create){const u={...S,isUpdate:x},m=this.backend.create.bind(this.backend);if(m.length<6)try{let v;m.length===5?v=m(t,s,h,y,u):v=m(t,s,h,y),v&&typeof v.then=="function"?v.then(g=>f(null,g)).catch(f):f(null,v)}catch(v){f(v)}else m(t,s,h,y,f,u)}!t||!t[0]||this.store.addResource(t[0],s,h,y)}}}const wx=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Ye(e[1])&&(t.defaultValue=e[1]),Ye(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const s=e[3]||e[2];Object.keys(s).forEach(h=>{t[h]=s[h]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Sx=e=>{var t,s;return Ye(e.ns)&&(e.ns=[e.ns]),Ye(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Ye(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((s=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:s.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},Xl=()=>{},XR=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(s=>{typeof e[s]=="function"&&(e[s]=e[s].bind(e))})};class yo extends Rc{constructor(t={},s){if(super(),this.options=Sx(t),this.services={},this.logger=qn,this.modules={external:[]},XR(this),s&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,s),this;setTimeout(()=>{this.init(t,s)},0)}}init(t={},s){this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),t.defaultNS==null&&t.ns&&(Ye(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const h=wx();this.options={...h,...this.options,...Sx(t)},this.options.interpolation={...h.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const y=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?qn.init(y(this.modules.logger),this.options):qn.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=HR;const d=new px(this.options);this.store=new dx(this.options.resources,this.options);const a=this.services;a.logger=qn,a.resourceStore=this.store,a.languageUtils=d,a.pluralResolver=new zR(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===h.interpolation.format)&&(a.formatter=y(c),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new BR(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new YR(y(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(l,...u)=>{this.emit(l,...u)}),this.modules.languageDetector&&(a.languageDetector=y(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=y(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new pc(this.services,this.options),this.translator.on("*",(l,...u)=>{this.emit(l,...u)}),this.modules.external.forEach(l=>{l.init&&l.init(this)})}if(this.format=this.options.interpolation.format,s||(s=Xl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...d)=>this.store[c](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...d)=>(this.store[c](...d),this)});const f=Ia(),r=()=>{const c=(d,a)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(a),s(d,a)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?r():setTimeout(r,0),f}loadResources(t,s=Xl){var x,S;let h=s;const y=Ye(t)?t:this.language;if(typeof t=="function"&&(h=t),!this.options.resources||this.options.partialBundledLanguages){if((y==null?void 0:y.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return h();const f=[],r=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(a=>{a!=="cimode"&&f.indexOf(a)<0&&f.push(a)})};y?r(y):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>r(d)),(S=(x=this.options.preload)==null?void 0:x.forEach)==null||S.call(x,c=>r(c)),this.services.backendConnector.load(f,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),h(c)})}else h(null)}reloadResources(t,s,h){const y=Ia();return typeof t=="function"&&(h=t,t=void 0),typeof s=="function"&&(h=s,s=void 0),t||(t=this.languages),s||(s=this.options.ns),h||(h=Xl),this.services.backendConnector.reload(t,s,x=>{y.resolve(),h(x)}),y}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&yw.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let s=0;s<this.languages.length;s++){const h=this.languages[s];if(!(["cimode","dev"].indexOf(h)>-1)&&this.store.hasLanguageSomeTranslations(h)){this.resolvedLanguage=h;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,s){this.isLanguageChangingTo=t;const h=Ia();this.emit("languageChanging",t);const y=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},x=(f,r)=>{r?this.isLanguageChangingTo===t&&(y(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,h.resolve((...c)=>this.t(...c)),s&&s(f,(...c)=>this.t(...c))},S=f=>{var d,a;!t&&!f&&this.services.languageDetector&&(f=[]);const r=Ye(f)?f:f&&f[0],c=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes(Ye(f)?[f]:f);c&&(this.language||y(c),this.translator.language||this.translator.changeLanguage(c),(a=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||a.call(d,c)),this.loadResources(c,l=>{x(l,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?S(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(S):this.services.languageDetector.detect(S):S(t),h}getFixedT(t,s,h){const y=(x,S,...f)=>{let r;typeof S!="object"?r=this.options.overloadTranslationOptionHandler([x,S].concat(f)):r={...S},r.lng=r.lng||y.lng,r.lngs=r.lngs||y.lngs,r.ns=r.ns||y.ns,r.keyPrefix!==""&&(r.keyPrefix=r.keyPrefix||h||y.keyPrefix);const c=this.options.keySeparator||".";let d;return r.keyPrefix&&Array.isArray(x)?d=x.map(a=>`${r.keyPrefix}${c}${a}`):d=r.keyPrefix?`${r.keyPrefix}${c}${x}`:x,this.t(d,r)};return Ye(t)?y.lng=t:y.lngs=t,y.ns=s,y.keyPrefix=h,y}t(...t){var s;return(s=this.translator)==null?void 0:s.translate(...t)}exists(...t){var s;return(s=this.translator)==null?void 0:s.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const h=s.lng||this.resolvedLanguage||this.languages[0],y=this.options?this.options.fallbackLng:!1,x=this.languages[this.languages.length-1];if(h.toLowerCase()==="cimode")return!0;const S=(f,r)=>{const c=this.services.backendConnector.state[`${f}|${r}`];return c===-1||c===0||c===2};if(s.precheck){const f=s.precheck(this,S);if(f!==void 0)return f}return!!(this.hasResourceBundle(h,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||S(h,t)&&(!y||S(x,t)))}loadNamespaces(t,s){const h=Ia();return this.options.ns?(Ye(t)&&(t=[t]),t.forEach(y=>{this.options.ns.indexOf(y)<0&&this.options.ns.push(y)}),this.loadResources(y=>{h.resolve(),s&&s(y)}),h):(s&&s(),Promise.resolve())}loadLanguages(t,s){const h=Ia();Ye(t)&&(t=[t]);const y=this.options.preload||[],x=t.filter(S=>y.indexOf(S)<0&&this.services.languageUtils.isSupportedCode(S));return x.length?(this.options.preload=y.concat(x),this.loadResources(S=>{h.resolve(),s&&s(S)}),h):(s&&s(),Promise.resolve())}dir(t){var y,x;if(t||(t=this.resolvedLanguage||(((y=this.languages)==null?void 0:y.length)>0?this.languages[0]:this.language)),!t)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],h=((x=this.services)==null?void 0:x.languageUtils)||new px(wx());return s.indexOf(h.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},s){return new yo(t,s)}cloneInstance(t={},s=Xl){const h=t.forkResourceStore;h&&delete t.forkResourceStore;const y={...this.options,...t,isClone:!0},x=new yo(y);if((t.debug!==void 0||t.prefix!==void 0)&&(x.logger=x.logger.clone(t)),["store","services","language"].forEach(f=>{x[f]=this[f]}),x.services={...this.services},x.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},h){const f=Object.keys(this.store.data).reduce((r,c)=>(r[c]={...this.store.data[c]},r[c]=Object.keys(r[c]).reduce((d,a)=>(d[a]={...r[c][a]},d),r[c]),r),{});x.store=new dx(f,y),x.services.resourceStore=x.store}return x.translator=new pc(x.services,y),x.translator.on("*",(f,...r)=>{x.emit(f,...r)}),x.init(y,s),x.translator.options=y,x.translator.backendConnector.services.utils={hasLoadedNamespace:x.hasLoadedNamespace.bind(x)},x}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const qt=yo.createInstance();qt.createInstance=yo.createInstance;qt.createInstance;qt.dir;qt.init;qt.loadResources;qt.reloadResources;qt.use;qt.changeLanguage;qt.getFixedT;qt.t;qt.exists;qt.setDefaultNamespace;qt.hasLoadedNamespace;qt.loadNamespaces;qt.loadLanguages;const{slice:GR,forEach:$R}=[];function WR(e){return $R.call(GR.call(arguments,1),t=>{if(t)for(const s in t)e[s]===void 0&&(e[s]=t[s])}),e}function qR(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(s=>s.test(e))}const Cx=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,KR=function(e,t){const h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},y=encodeURIComponent(t);let x=`${e}=${y}`;if(h.maxAge>0){const S=h.maxAge-0;if(Number.isNaN(S))throw new Error("maxAge should be a Number");x+=`; Max-Age=${Math.floor(S)}`}if(h.domain){if(!Cx.test(h.domain))throw new TypeError("option domain is invalid");x+=`; Domain=${h.domain}`}if(h.path){if(!Cx.test(h.path))throw new TypeError("option path is invalid");x+=`; Path=${h.path}`}if(h.expires){if(typeof h.expires.toUTCString!="function")throw new TypeError("option expires is invalid");x+=`; Expires=${h.expires.toUTCString()}`}if(h.httpOnly&&(x+="; HttpOnly"),h.secure&&(x+="; Secure"),h.sameSite)switch(typeof h.sameSite=="string"?h.sameSite.toLowerCase():h.sameSite){case!0:x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"strict":x+="; SameSite=Strict";break;case"none":x+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return h.partitioned&&(x+="; Partitioned"),x},_x={create(e,t,s,h){let y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};s&&(y.expires=new Date,y.expires.setTime(y.expires.getTime()+s*60*1e3)),h&&(y.domain=h),document.cookie=KR(e,encodeURIComponent(t),y)},read(e){const t=`${e}=`,s=document.cookie.split(";");for(let h=0;h<s.length;h++){let y=s[h];for(;y.charAt(0)===" ";)y=y.substring(1,y.length);if(y.indexOf(t)===0)return y.substring(t.length,y.length)}return null},remove(e){this.create(e,"",-1)}};var ZR={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return _x.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:s,cookieMinutes:h,cookieDomain:y,cookieOptions:x}=t;s&&typeof document<"u"&&_x.create(s,e,h,y,x)}},QR={name:"querystring",lookup(e){var h;let{lookupQuerystring:t}=e,s;if(typeof window<"u"){let{search:y}=window.location;!window.location.search&&((h=window.location.hash)==null?void 0:h.indexOf("?"))>-1&&(y=window.location.hash.substring(window.location.hash.indexOf("?")));const S=y.substring(1).split("&");for(let f=0;f<S.length;f++){const r=S[f].indexOf("=");r>0&&S[f].substring(0,r)===t&&(s=S[f].substring(r+1))}}return s}};let ws=null;const Tx=()=>{if(ws!==null)return ws;try{if(ws=typeof window<"u"&&window.localStorage!==null,!ws)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{ws=!1}return ws};var JR={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Tx())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:s}=t;s&&Tx()&&window.localStorage.setItem(s,e)}};let Ss=null;const kx=()=>{if(Ss!==null)return Ss;try{if(Ss=typeof window<"u"&&window.sessionStorage!==null,!Ss)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Ss=!1}return Ss};var eN={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&kx())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:s}=t;s&&kx()&&window.sessionStorage.setItem(s,e)}},tN={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:s,userLanguage:h,language:y}=navigator;if(s)for(let x=0;x<s.length;x++)t.push(s[x]);h&&t.push(h),y&&t.push(y)}return t.length>0?t:void 0}},nN={name:"htmlTag",lookup(e){let{htmlTag:t}=e,s;const h=t||(typeof document<"u"?document.documentElement:null);return h&&typeof h.getAttribute=="function"&&(s=h.getAttribute("lang")),s}},iN={name:"path",lookup(e){var y;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const s=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?(y=s[typeof t=="number"?t:0])==null?void 0:y.replace("/",""):void 0}},rN={name:"subdomain",lookup(e){var y,x;let{lookupFromSubdomainIndex:t}=e;const s=typeof t=="number"?t+1:1,h=typeof window<"u"&&((x=(y=window.location)==null?void 0:y.hostname)==null?void 0:x.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(h)return h[s]}};let vw=!1;try{document.cookie,vw=!0}catch{}const xw=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];vw||xw.splice(1,1);const sN=()=>({order:xw,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class bw{constructor(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,s)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=WR(s,this.options||{},sN()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=y=>y.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=h,this.addDetector(ZR),this.addDetector(QR),this.addDetector(JR),this.addDetector(eN),this.addDetector(tN),this.addDetector(nN),this.addDetector(iN),this.addDetector(rN)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,s=[];return t.forEach(h=>{if(this.detectors[h]){let y=this.detectors[h].lookup(this.options);y&&typeof y=="string"&&(y=[y]),y&&(s=s.concat(y))}}),s=s.filter(h=>h!=null&&!qR(h)).map(h=>this.options.convertDetectedLanguage(h)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}cacheUserLanguage(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;s&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||s.forEach(h=>{this.detectors[h]&&this.detectors[h].cacheUserLanguage(t,this.options)}))}}bw.type="languageDetector";const aN="Home",oN="Settings",lN="Initial",cN="Position",uN="Projection",hN="Post Processing",fN="Reconstruction",dN="System Status & Warnings",mN="Camera",gN="Projection Display",pN="Image Reel",yN="Histogram",vN="Toggle Theme",xN="Crop",bN="Brush",wN="Eraser",SN="Circle",CN="Rectangle",_N="Line Chart",TN="Line",kN="Move",EN="Zoom In",ON="Zoom Out",MN="Home Page",jN="Welcome to the Home page! This page is styled to match the overall theme of the application.",AN="Settings Page",DN="This is the Settings page. Adjust your preferences here.",RN="Switch to {{mode}} Mode",NN="Input Showcase",PN="Checkboxes",LN="Checkbox 1",FN="Checkbox 2 (Default Checked)",zN="Checkbox (Disabled)",BN="Confirm {{label}}",VN="Disabled Input",UN="Inputs",HN="Text Input",IN="Number Input",YN="Email Input",XN="Save {{label}}",GN="Textarea",$N="Enter your text here...",WN="Save Textarea",qN="Other Inputs",KN="Radio Buttons",ZN="Option 1",QN="Option 2",JN="Select Dropdown",eP="Select an option",tP="Upload File",nP="Selected: {{name}}",iP="Password Input",rP="Enter password",sP="Range Slider",aP="Color Picker",oP="Date Picker",lP="IconButton Showcase",cP="{{variant}} Variant",uP="Size: {{size}} (Normal)",hP="Size: {{size}} (Disabled)",fP="{{variant}} {{size}} clicked!",dP="Run",mP="Initial Parameters",gP="Name",pP="Email",yP="Enter your name",vP="Enter your email",xP="X Position",bP="Y Position",wP="Enable Filter",SP="Connecting to WebSocket...",CP="Theme",_P="Language",TP="Dark",kP="Light",EP="Projection Acquisition",OP="Success",MP="Form data submitted successfully",jP="Error",AP="No data available to submit",DP="Are you sure?",RP="Cancel",NP="Sending...",PP="No data available to send",LP="Invalid initial parameters",FP="Power",zP="Enter power (Watts)",BP="Tube Voltage",VP="Enter tube voltage (kVp)",UP="Anode Current",HP="Enter anode current",IP="Filtration",YP="Aluminum",XP="Copper",GP="Silver",$P="Enter filter thickness (mm)",WP="Exposure Time",qP="Bit Depth",KP="Tube Status",ZP="Manipulator",QP="X Position",JP="Y Position",eL="Z Position",tL="Theta Angle",nL="Gamma Angle",iL="Joystick Speed",rL="Low",sL="Medium",aL="High",oL="Cabin Camera Status",lL="Standard Preset",cL="High Power Preset",uL="Clear All",hL="Voltage",fL="Current",dL="Active",mL="Inactive",gL="Connected to WebSocket",pL="Fast Imaging",yL="Rotation Speed",vL="Enter rotation speed",xL="Dual Energy",bL="Single Calibration",wL="Enter single calibration",SL="Rotate Calibration",CL="Enter rotate calibration",_L="Selected File",TL="Enter X position",kL="Enter Y position",EL="Enter Z position",OL="Enter Theta angle",ML="Enter Gamma angle",jL="Imaging Mode",AL="Multi-Segment Size",DL="Enter multi-segment size",RL="Image Adjustments",NL="Gain",PL="Offset",LL="Preprocess",FL="HDR",zL="Energy Level 1",BL="Energy Level 2",VL="Enter energy level 1",UL="Enter energy level 2",HL="Image Count",IL="Enter image count",YL="Image Transform",XL="None",GL="Basic Operations",$L="Normalize",WL="FFT",qL="FFT Inverse",KL="Fourier Filter",ZL="Low Pass",QL="Band Pass",JL="High Pass",e5="Apply Fourier Filter",t5="Export Image",n5="TIFF",i5="JPG",r5="DICOM",s5="Image Filters",a5="Median Filter",o5="Mean Filter",l5="Variance Filter",c5="Pseudo Color Filter",u5="Gaussian Filter",h5="Enter Gaussian sigma",f5="Sharpening",d5="Kernel Size",m5="Sharpening Strength",g5="Enter sharpening strength",p5="Edge Detection",y5="Threshold",v5="Enter threshold",x5="Edge Method",b5="Sobel",w5="Canny",S5="Prewitt",C5="OK",_5="Failed to send data",T5="Grayscale",k5="Pan",E5="Undo",O5={home:aN,settings:oN,initial:lN,position:cN,projection:uN,postProcessing:hN,reconstruction:fN,systemStatus:dN,camera:mN,projectionDisplay:gN,imageReel:pN,histogram:yN,toggleTheme:vN,crop:xN,brush:bN,eraser:wN,circle:SN,rectangle:CN,lineChart:_N,line:TN,move:kN,zoomIn:EN,zoomOut:ON,homePage:MN,welcome:jN,settingsPage:AN,settingsDescription:DN,switchTo:RN,inputShowcase:NN,checkboxes:PN,checkbox1:LN,checkbox2:FN,disabledCheckbox:zN,confirm:BN,disabledInput:VN,inputs:UN,textInput:HN,numberInput:IN,emailInput:YN,save:XN,textarea:GN,enterText:$N,saveTextarea:WN,otherInputs:qN,radioButtons:KN,option1:ZN,option2:QN,selectDropdown:JN,selectOption:eP,uploadFile:tP,selected:nP,passwordInput:iP,enterPassword:rP,rangeSlider:sP,colorPicker:aP,datePicker:oP,iconButtonShowcase:lP,variant:cP,sizeNormal:uP,sizeDisabled:hP,clicked:fP,run:dP,initialParameters:mP,name:gP,email:pP,enterName:yP,enterEmail:vP,xPosition:xP,yPosition:bP,enableFilter:wP,websocketConnecting:SP,theme:CP,language:_P,dark:TP,light:kP,projectionAcquisition:EP,success:OP,dataSubmittedSuccessfully:MP,error:jP,noDataToSubmit:AP,areYouSure:DP,cancel:RP,sendingData:NP,noDataAvailable:PP,invalidInitialParameters:LP,power:FP,enterPower:zP,tubeVoltage:BP,enterTubeVoltage:VP,anodeCurrent:UP,enterAnodeCurrent:HP,filtration:IP,aluminum:YP,copper:XP,silver:GP,enterThickness:$P,exposureTime:WP,bitDepth:qP,"8bit":"8-bit","16bit":"16-bit",tubeStatus:KP,manipulator:ZP,manipulatorX:QP,manipulatorY:JP,manipulatorZ:eL,manipulatorTheta:tL,manipulatorGamma:nL,joystickSpeed:iL,joystickSpeedLow:rL,joystickSpeedMedium:sL,joystickSpeedHigh:aL,cabinCameraStatus:oL,presetStandard:lL,presetHighPower:cL,clearAll:uL,voltage:hL,current:fL,active:dL,inactive:mL,websocketConnected:gL,fastImaging:pL,rotationSpeed:yL,enterRotationSpeed:vL,dualEnergy:xL,singleCalibration:bL,enterSingleCalibration:wL,rotateCalibration:SL,enterRotateCalibration:CL,selectedFile:_L,enterManipulatorX:TL,enterManipulatorY:kL,enterManipulatorZ:EL,enterManipulatorTheta:OL,enterManipulatorGamma:ML,"180degree":"180","360degree":"360",imagingMode:jL,multiSegmentSize:AL,enterMultiSegmentSize:DL,imageAdjustments:RL,gain:NL,offset:PL,preprocess:LL,hdr:FL,energyLevel1:zL,energyLevel2:BL,enterEnergyLevel1:VL,enterEnergyLevel2:UL,imageCount:HL,enterImageCount:IL,imageTransform:YL,none:XL,"90degree":"90","270degree":"270",basicOperations:GL,normalize:$L,fft:WL,fftInverse:qL,fourierFilter:KL,lowPass:ZL,bandPass:QL,highPass:JL,applyFourierFilter:e5,exportImage:t5,export:"Export",tiff:n5,jpg:i5,dicom:r5,imageFilters:s5,medianFilter:a5,meanFilter:o5,varianceFilter:l5,pseudoColorFilter:c5,gaussianFilter:u5,enterGaussianSigma:h5,sharpening:f5,kernelSize:d5,sharpeningStrength:m5,enterSharpeningStrength:g5,edgeDetection:p5,threshold:y5,enterThreshold:v5,edgeMethod:x5,sobel:b5,canny:w5,prewitt:S5,ok:C5,failedToSendData:_5,grayscale:T5,pan:k5,undo:E5},M5="",j5="",A5="",D5="",R5="",N5="",P5="",L5="   ",F5="",z5=" ",B5=" ",V5="",U5=" ",H5="",I5="",Y5="",X5="",G5="",$5=" ",W5="",q5="",K5="",Z5="",Q5=" ",J5="    !         .",e3=" ",t3="   .       .",n3="   {{mode}}",i3=" ",r3="",s3=" ",a3="  ( )",o3=" ()",l3="",c3=" ",u3="",h3=" ",f3=" ",d3=" ",m3=" {{label}}",g3=" ",p3="     ...",y3="  ",v3=" ",x3=" ",b3=" ",w3=" ",S3=" ",C3="   ",_3=" ",T3=": {{name}}",k3="  ",E3="    ",O3=" ",M3=" ",j3=" ",A3="  ",D3=" {{variant}}",R3=": {{size}} ()",N3=": {{size}} ()",P3="{{variant}} {{size}}  !",L3="",F3=" ",z3="",B3="",V3="    ",U3="    ",H3=" X",I3=" Y",Y3="  ",X3="    WebSocket...",G3="",$3="",W3="",q3="",K3=" ",Z3="",Q3="     ",J3="",e4="     ",t4="  ",n4="",i4="  ...",r4="     ",s4="   ",a4="",o4="     ()",l4=" ",c4="      (kVp)",u4=" ",h4="     ",f4="",d4="",m4="",g4="",p4="     (mm)",y4=" ",v4=" ",x4=" ",b4="",w4=" X",S4=" Y",C4=" Z",_4=" ",T4=" ",k4=" ",E4="",O4="",M4="",j4="  ",A4=" ",D4="  ",R4="  ",N4="",P4="",L4="",F4="",z4=" WebSocket  ",B4=" ",V4=" ",U4="    ",H4=" ",I4=" ",Y4="    ",X4=" ",G4="    ",$4=" ",W4=" X   ",q4=" Y   ",K4=" Z   ",Z4="    ",Q4="    ",J4=" ",eF="  ",tF="     ",nF=" ",iF="",rF="",sF="",aF="HDR",oF="  ",lF="  ",cF="     ",uF="     ",hF=" ",fF="    ",dF=" ",mF="",gF=" ",pF="",yF=" ",vF="  ",xF=" ",bF="",wF="",SF="",CF="  ",_F=" ",TF="TIFF",kF="JPG",EF="DICOM",OF=" ",MF=" ",jF=" ",AF=" ",DF="  ",RF=" ",NF="    ",PF="",LF=" ",FF=" ",zF="    ",BF=" ",VF="",UF="   ",HF="  ",IF="",YF="",XF="",GF="",$F="   ",WF="  ",qF="",KF="",ZF={home:M5,settings:j5,initial:A5,position:D5,projection:R5,postProcessing:N5,reconstruction:P5,systemStatus:L5,camera:F5,projectionDisplay:z5,imageReel:B5,histogram:V5,toggleTheme:U5,crop:H5,brush:I5,eraser:Y5,circle:X5,rectangle:G5,lineChart:$5,line:W5,move:q5,zoomIn:K5,zoomOut:Z5,homePage:Q5,welcome:J5,settingsPage:e3,settingsDescription:t3,switchTo:n3,inputShowcase:i3,checkboxes:r3,checkbox1:s3,checkbox2:a3,disabledCheckbox:o3,confirm:l3,disabledInput:c3,inputs:u3,textInput:h3,numberInput:f3,emailInput:d3,save:m3,textarea:g3,enterText:p3,saveTextarea:y3,otherInputs:v3,radioButtons:x3,option1:b3,option2:w3,selectDropdown:S3,selectOption:C3,uploadFile:_3,selected:T3,passwordInput:k3,enterPassword:E3,rangeSlider:O3,colorPicker:M3,datePicker:j3,iconButtonShowcase:A3,variant:D3,sizeNormal:R3,sizeDisabled:N3,clicked:P3,run:L3,initialParameters:F3,name:z3,email:B3,enterName:V3,enterEmail:U3,xPosition:H3,yPosition:I3,enableFilter:Y3,websocketConnecting:X3,theme:G3,language:$3,dark:W3,light:q3,projectionAcquisition:K3,success:Z3,dataSubmittedSuccessfully:Q3,error:J3,noDataToSubmit:e4,areYouSure:t4,cancel:n4,sendingData:i4,noDataAvailable:r4,invalidInitialParameters:s4,power:a4,enterPower:o4,tubeVoltage:l4,enterTubeVoltage:c4,anodeCurrent:u4,enterAnodeCurrent:h4,filtration:f4,aluminum:d4,copper:m4,silver:g4,enterThickness:p4,exposureTime:y4,bitDepth:v4,"8bit":"8 ","16bit":"16 ",tubeStatus:x4,manipulator:b4,manipulatorX:w4,manipulatorY:S4,manipulatorZ:C4,manipulatorTheta:_4,manipulatorGamma:T4,joystickSpeed:k4,joystickSpeedLow:E4,joystickSpeedMedium:O4,joystickSpeedHigh:M4,cabinCameraStatus:j4,presetStandard:A4,presetHighPower:D4,clearAll:R4,voltage:N4,current:P4,active:L4,inactive:F4,websocketConnected:z4,fastImaging:B4,rotationSpeed:V4,enterRotationSpeed:U4,dualEnergy:H4,singleCalibration:I4,enterSingleCalibration:Y4,rotateCalibration:X4,enterRotateCalibration:G4,selectedFile:$4,enterManipulatorX:W4,enterManipulatorY:q4,enterManipulatorZ:K4,enterManipulatorTheta:Z4,enterManipulatorGamma:Q4,"180degree":" ","360degree":" ",imagingMode:J4,multiSegmentSize:eF,enterMultiSegmentSize:tF,imageAdjustments:nF,gain:iF,offset:rF,preprocess:sF,hdr:aF,energyLevel1:oF,energyLevel2:lF,enterEnergyLevel1:cF,enterEnergyLevel2:uF,imageCount:hF,enterImageCount:fF,imageTransform:dF,none:mF,"90degree":" ","270degree":" ",basicOperations:gF,normalize:pF,fft:yF,fftInverse:vF,fourierFilter:xF,lowPass:bF,bandPass:wF,highPass:SF,applyFourierFilter:CF,exportImage:_F,export:"",tiff:TF,jpg:kF,dicom:EF,imageFilters:OF,medianFilter:MF,meanFilter:jF,varianceFilter:AF,pseudoColorFilter:DF,gaussianFilter:RF,enterGaussianSigma:NF,sharpening:PF,kernelSize:LF,sharpeningStrength:FF,enterSharpeningStrength:zF,edgeDetection:BF,threshold:VF,enterThreshold:UF,edgeMethod:HF,sobel:IF,canny:YF,prewitt:XF,ok:GF,failedToSendData:$F,grayscale:WF,pan:qF,undo:KF},QF={en:{translation:O5},fa:{translation:ZF}};qt.use(bw).use(E_).init({resources:QF,fallbackLng:"en",supportedLngs:["en","fa"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},debug:!1,saveMissing:!1,missingKeyHandler:!1}).catch(e=>{console.error("i18next initialization error:",e)});const JF=M.createContext(),ez=({children:e})=>{const[t,s]=M.useState(null);return M.useEffect(()=>{const h=()=>{window.qt&&window.qt.webChannelTransport&&window.QWebChannel?new window.QWebChannel(window.qt.webChannelTransport,y=>{var x;(x=y==null?void 0:y.objects)!=null&&x.backend?s(y.objects.backend):console.error("WebChannel backend object not found.")}):setTimeout(h,100)};h()},[]),_.jsx(JF.Provider,{value:{backend:t},children:e})};YC.createRoot(document.getElementById("root")).render(_.jsx(Le.StrictMode,{children:_.jsx(o_,{children:_.jsx(xR,{children:_.jsx(ez,{children:_.jsx(R_,{children:_.jsx(jk,{children:_.jsx(WD,{children:_.jsx(rR,{children:_.jsx(aR,{children:_.jsx(QD,{children:_.jsx(kR,{})})})})})})})})})})}));
