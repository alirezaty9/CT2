(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))o(x);new MutationObserver(x=>{for(const v of x)if(v.type==="childList")for(const S of v.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&o(S)}).observe(document,{childList:!0,subtree:!0});function r(x){const v={};return x.integrity&&(v.integrity=x.integrity),x.referrerPolicy&&(v.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?v.credentials="include":x.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function o(x){if(x.ep)return;x.ep=!0;const v=r(x);fetch(x.href,v)}})();function Cf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h2(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var x=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,x.get?x:{enumerable:!0,get:function(){return t[o]}})}),r}var rh={exports:{}},Ha={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function f2(){if(m0)return Ha;m0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(o,x,v){var S=null;if(v!==void 0&&(S=""+v),x.key!==void 0&&(S=""+x.key),"key"in x){v={};for(var f in x)f!=="key"&&(v[f]=x[f])}else v=x;return x=v.ref,{$$typeof:t,type:o,key:S,ref:x!==void 0?x:null,props:v}}return Ha.Fragment=e,Ha.jsx=r,Ha.jsxs=r,Ha}var g0;function m2(){return g0||(g0=1,rh.exports=f2()),rh.exports}var g=m2(),sh={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function g2(){if(p0)return Ge;p0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),S=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),a=Symbol.iterator;function l(O){return O===null||typeof O!="object"?null:(O=a&&O[a]||O["@@iterator"],typeof O=="function"?O:null)}var c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function p(O,L,B){this.props=O,this.context=L,this.refs=y,this.updater=B||c}p.prototype.isReactComponent={},p.prototype.setState=function(O,L){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,L,"setState")},p.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=p.prototype;function C(O,L,B){this.props=O,this.context=L,this.refs=y,this.updater=B||c}var T=C.prototype=new w;T.constructor=C,m(T,p.prototype),T.isPureReactComponent=!0;var j=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function D(O,L,B,K,V,F){return B=F.ref,{$$typeof:t,type:O,key:L,ref:B!==void 0?B:null,props:F}}function A(O,L){return D(O.type,L,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function X(O){var L={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(B){return L[B]})}var oe=/\/+/g;function Z(O,L){return typeof O=="object"&&O!==null&&O.key!=null?X(""+O.key):L.toString(36)}function ae(){}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ae,ae):(O.status="pending",O.then(function(L){O.status==="pending"&&(O.status="fulfilled",O.value=L)},function(L){O.status==="pending"&&(O.status="rejected",O.reason=L)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function G(O,L,B,K,V){var F=typeof O;(F==="undefined"||F==="boolean")&&(O=null);var J=!1;if(O===null)J=!0;else switch(F){case"bigint":case"string":case"number":J=!0;break;case"object":switch(O.$$typeof){case t:case e:J=!0;break;case h:return J=O._init,G(J(O._payload),L,B,K,V)}}if(J)return V=V(O),J=K===""?"."+Z(O,0):K,j(V)?(B="",J!=null&&(B=J.replace(oe,"$&/")+"/"),G(V,L,B,"",function(ce){return ce})):V!=null&&(I(V)&&(V=A(V,B+(V.key==null||O&&O.key===V.key?"":(""+V.key).replace(oe,"$&/")+"/")+J)),L.push(V)),1;J=0;var W=K===""?".":K+":";if(j(O))for(var ue=0;ue<O.length;ue++)K=O[ue],F=W+Z(K,ue),J+=G(K,L,B,F,V);else if(ue=l(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(K=O.next()).done;)K=K.value,F=W+Z(K,ue++),J+=G(K,L,B,F,V);else if(F==="object"){if(typeof O.then=="function")return G(te(O),L,B,K,V);throw L=String(O),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return J}function z(O,L,B){if(O==null)return O;var K=[],V=0;return G(O,K,"","",function(F){return L.call(B,F,V++)}),K}function q(O){if(O._status===-1){var L=O._result;L=L(),L.then(function(B){(O._status===0||O._status===-1)&&(O._status=1,O._result=B)},function(B){(O._status===0||O._status===-1)&&(O._status=2,O._result=B)}),O._status===-1&&(O._status=0,O._result=L)}if(O._status===1)return O._result.default;throw O._result}var Y=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function R(){}return Ge.Children={map:z,forEach:function(O,L,B){z(O,function(){L.apply(this,arguments)},B)},count:function(O){var L=0;return z(O,function(){L++}),L},toArray:function(O){return z(O,function(L){return L})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ge.Component=p,Ge.Fragment=r,Ge.Profiler=x,Ge.PureComponent=C,Ge.StrictMode=o,Ge.Suspense=s,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(O){return E.H.useMemoCache(O)}},Ge.cache=function(O){return function(){return O.apply(null,arguments)}},Ge.cloneElement=function(O,L,B){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var K=m({},O.props),V=O.key,F=void 0;if(L!=null)for(J in L.ref!==void 0&&(F=void 0),L.key!==void 0&&(V=""+L.key),L)!M.call(L,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&L.ref===void 0||(K[J]=L[J]);var J=arguments.length-2;if(J===1)K.children=B;else if(1<J){for(var W=Array(J),ue=0;ue<J;ue++)W[ue]=arguments[ue+2];K.children=W}return D(O.type,V,void 0,void 0,F,K)},Ge.createContext=function(O){return O={$$typeof:S,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:v,_context:O},O},Ge.createElement=function(O,L,B){var K,V={},F=null;if(L!=null)for(K in L.key!==void 0&&(F=""+L.key),L)M.call(L,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(V[K]=L[K]);var J=arguments.length-2;if(J===1)V.children=B;else if(1<J){for(var W=Array(J),ue=0;ue<J;ue++)W[ue]=arguments[ue+2];V.children=W}if(O&&O.defaultProps)for(K in J=O.defaultProps,J)V[K]===void 0&&(V[K]=J[K]);return D(O,F,void 0,void 0,null,V)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(O){return{$$typeof:f,render:O}},Ge.isValidElement=I,Ge.lazy=function(O){return{$$typeof:h,_payload:{_status:-1,_result:O},_init:q}},Ge.memo=function(O,L){return{$$typeof:u,type:O,compare:L===void 0?null:L}},Ge.startTransition=function(O){var L=E.T,B={};E.T=B;try{var K=O(),V=E.S;V!==null&&V(B,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(R,Y)}catch(F){Y(F)}finally{E.T=L}},Ge.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ge.use=function(O){return E.H.use(O)},Ge.useActionState=function(O,L,B){return E.H.useActionState(O,L,B)},Ge.useCallback=function(O,L){return E.H.useCallback(O,L)},Ge.useContext=function(O){return E.H.useContext(O)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(O,L){return E.H.useDeferredValue(O,L)},Ge.useEffect=function(O,L,B){var K=E.H;if(typeof B=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(O,L)},Ge.useId=function(){return E.H.useId()},Ge.useImperativeHandle=function(O,L,B){return E.H.useImperativeHandle(O,L,B)},Ge.useInsertionEffect=function(O,L){return E.H.useInsertionEffect(O,L)},Ge.useLayoutEffect=function(O,L){return E.H.useLayoutEffect(O,L)},Ge.useMemo=function(O,L){return E.H.useMemo(O,L)},Ge.useOptimistic=function(O,L){return E.H.useOptimistic(O,L)},Ge.useReducer=function(O,L,B){return E.H.useReducer(O,L,B)},Ge.useRef=function(O){return E.H.useRef(O)},Ge.useState=function(O){return E.H.useState(O)},Ge.useSyncExternalStore=function(O,L,B){return E.H.useSyncExternalStore(O,L,B)},Ge.useTransition=function(){return E.H.useTransition()},Ge.version="19.1.0",Ge}var x0;function kf(){return x0||(x0=1,sh.exports=g2()),sh.exports}var N=kf();const Ae=Cf(N);var ah={exports:{}},$a={},oh={exports:{}},lh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function p2(){return y0||(y0=1,function(t){function e(z,q){var Y=z.length;z.push(q);e:for(;0<Y;){var R=Y-1>>>1,O=z[R];if(0<x(O,q))z[R]=q,z[Y]=O,Y=R;else break e}}function r(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var q=z[0],Y=z.pop();if(Y!==q){z[0]=Y;e:for(var R=0,O=z.length,L=O>>>1;R<L;){var B=2*(R+1)-1,K=z[B],V=B+1,F=z[V];if(0>x(K,Y))V<O&&0>x(F,K)?(z[R]=F,z[V]=Y,R=V):(z[R]=K,z[B]=Y,R=B);else if(V<O&&0>x(F,Y))z[R]=F,z[V]=Y,R=V;else break e}}return q}function x(z,q){var Y=z.sortIndex-q.sortIndex;return Y!==0?Y:z.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;t.unstable_now=function(){return v.now()}}else{var S=Date,f=S.now();t.unstable_now=function(){return S.now()-f}}var s=[],u=[],h=1,a=null,l=3,c=!1,m=!1,y=!1,p=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var q=r(u);q!==null;){if(q.callback===null)o(u);else if(q.startTime<=z)o(u),q.sortIndex=q.expirationTime,e(s,q);else break;q=r(u)}}function E(z){if(y=!1,j(z),!m)if(r(s)!==null)m=!0,M||(M=!0,Z());else{var q=r(u);q!==null&&G(E,q.startTime-z)}}var M=!1,D=-1,A=5,I=-1;function X(){return p?!0:!(t.unstable_now()-I<A)}function oe(){if(p=!1,M){var z=t.unstable_now();I=z;var q=!0;try{e:{m=!1,y&&(y=!1,C(D),D=-1),c=!0;var Y=l;try{t:{for(j(z),a=r(s);a!==null&&!(a.expirationTime>z&&X());){var R=a.callback;if(typeof R=="function"){a.callback=null,l=a.priorityLevel;var O=R(a.expirationTime<=z);if(z=t.unstable_now(),typeof O=="function"){a.callback=O,j(z),q=!0;break t}a===r(s)&&o(s),j(z)}else o(s);a=r(s)}if(a!==null)q=!0;else{var L=r(u);L!==null&&G(E,L.startTime-z),q=!1}}break e}finally{a=null,l=Y,c=!1}q=void 0}}finally{q?Z():M=!1}}}var Z;if(typeof T=="function")Z=function(){T(oe)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,te=ae.port2;ae.port1.onmessage=oe,Z=function(){te.postMessage(null)}}else Z=function(){w(oe,0)};function G(z,q){D=w(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return l},t.unstable_next=function(z){switch(l){case 1:case 2:case 3:var q=3;break;default:q=l}var Y=l;l=q;try{return z()}finally{l=Y}},t.unstable_requestPaint=function(){p=!0},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=l;l=z;try{return q()}finally{l=Y}},t.unstable_scheduleCallback=function(z,q,Y){var R=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?R+Y:R):Y=R,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Y+O,z={id:h++,callback:q,priorityLevel:z,startTime:Y,expirationTime:O,sortIndex:-1},Y>R?(z.sortIndex=Y,e(u,z),r(s)===null&&z===r(u)&&(y?(C(D),D=-1):y=!0,G(E,Y-R))):(z.sortIndex=O,e(s,z),m||c||(m=!0,M||(M=!0,Z()))),z},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(z){var q=l;return function(){var Y=l;l=q;try{return z.apply(this,arguments)}finally{l=Y}}}}(lh)),lh}var b0;function x2(){return b0||(b0=1,oh.exports=p2()),oh.exports}var ch={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function y2(){if(v0)return Kt;v0=1;var t=kf();function e(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},x=Symbol.for("react.portal");function v(s,u,h){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:a==null?null:""+a,children:s,containerInfo:u,implementation:h}}var S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(s,u){if(s==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Kt.createPortal=function(s,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return v(s,u,null,h)},Kt.flushSync=function(s){var u=S.T,h=o.p;try{if(S.T=null,o.p=2,s)return s()}finally{S.T=u,o.p=h,o.d.f()}},Kt.preconnect=function(s,u){typeof s=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,o.d.C(s,u))},Kt.prefetchDNS=function(s){typeof s=="string"&&o.d.D(s)},Kt.preinit=function(s,u){if(typeof s=="string"&&u&&typeof u.as=="string"){var h=u.as,a=f(h,u.crossOrigin),l=typeof u.integrity=="string"?u.integrity:void 0,c=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?o.d.S(s,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:a,integrity:l,fetchPriority:c}):h==="script"&&o.d.X(s,{crossOrigin:a,integrity:l,fetchPriority:c,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Kt.preinitModule=function(s,u){if(typeof s=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=f(u.as,u.crossOrigin);o.d.M(s,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&o.d.M(s)},Kt.preload=function(s,u){if(typeof s=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,a=f(h,u.crossOrigin);o.d.L(s,h,{crossOrigin:a,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Kt.preloadModule=function(s,u){if(typeof s=="string")if(u){var h=f(u.as,u.crossOrigin);o.d.m(s,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else o.d.m(s)},Kt.requestFormReset=function(s){o.d.r(s)},Kt.unstable_batchedUpdates=function(s,u){return s(u)},Kt.useFormState=function(s,u,h){return S.H.useFormState(s,u,h)},Kt.useFormStatus=function(){return S.H.useHostTransitionStatus()},Kt.version="19.1.0",Kt}var w0;function b2(){if(w0)return ch.exports;w0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ch.exports=y2(),ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function v2(){if(S0)return $a;S0=1;var t=x2(),e=kf(),r=b2();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)i+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function v(n){var i=n,d=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(d=i.return),n=i.return;while(n)}return i.tag===3?d:null}function S(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(v(n)!==n)throw Error(o(188))}function s(n){var i=n.alternate;if(!i){if(i=v(n),i===null)throw Error(o(188));return i!==n?null:n}for(var d=n,b=i;;){var k=d.return;if(k===null)break;var _=k.alternate;if(_===null){if(b=k.return,b!==null){d=b;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===d)return f(k),n;if(_===b)return f(k),i;_=_.sibling}throw Error(o(188))}if(d.return!==b.return)d=k,b=_;else{for(var P=!1,U=k.child;U;){if(U===d){P=!0,d=k,b=_;break}if(U===b){P=!0,b=k,d=_;break}U=U.sibling}if(!P){for(U=_.child;U;){if(U===d){P=!0,d=_,b=k;break}if(U===b){P=!0,b=_,d=k;break}U=U.sibling}if(!P)throw Error(o(189))}}if(d.alternate!==b)throw Error(o(190))}if(d.tag!==3)throw Error(o(188));return d.stateNode.current===d?n:i}function u(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=u(n),i!==null)return i;n=n.sibling}return null}var h=Object.assign,a=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Symbol.for("react.client.reference");function te(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ae?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case m:return"Fragment";case p:return"Profiler";case y:return"StrictMode";case E:return"Suspense";case M:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case c:return"Portal";case T:return(n.displayName||"Context")+".Provider";case C:return(n._context.displayName||"Context")+".Consumer";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:te(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return te(n(i))}catch{}}return null}var G=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},R=[],O=-1;function L(n){return{current:n}}function B(n){0>O||(n.current=R[O],R[O]=null,O--)}function K(n,i){O++,R[O]=n.current,n.current=i}var V=L(null),F=L(null),J=L(null),W=L(null);function ue(n,i){switch(K(J,i),K(F,n),K(V,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Ux(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Ux(i),n=Hx(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}B(V),K(V,n)}function ce(){B(V),B(F),B(J)}function ie(n){n.memoizedState!==null&&K(W,n);var i=V.current,d=Hx(i,n.type);i!==d&&(K(F,n),K(V,d))}function Q(n){F.current===n&&(B(V),B(F)),W.current===n&&(B(W),za._currentValue=Y)}var me=Object.prototype.hasOwnProperty,le=t.unstable_scheduleCallback,H=t.unstable_cancelCallback,re=t.unstable_shouldYield,ge=t.unstable_requestPaint,de=t.unstable_now,fe=t.unstable_getCurrentPriorityLevel,Se=t.unstable_ImmediatePriority,$=t.unstable_UserBlockingPriority,ne=t.unstable_NormalPriority,ee=t.unstable_LowPriority,we=t.unstable_IdlePriority,Ce=t.log,ke=t.unstable_setDisableYieldValue,Ne=null,Me=null;function ze(n){if(typeof Ce=="function"&&ke(n),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Ne,n)}catch{}}var Ue=Math.clz32?Math.clz32:rn,nn=Math.log,Gt=Math.LN2;function rn(n){return n>>>=0,n===0?32:31-(nn(n)/Gt|0)|0}var $n=256,Rn=4194304;function Pn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function si(n,i,d){var b=n.pendingLanes;if(b===0)return 0;var k=0,_=n.suspendedLanes,P=n.pingedLanes;n=n.warmLanes;var U=b&134217727;return U!==0?(b=U&~_,b!==0?k=Pn(b):(P&=U,P!==0?k=Pn(P):d||(d=U&~n,d!==0&&(k=Pn(d))))):(U=b&~_,U!==0?k=Pn(U):P!==0?k=Pn(P):d||(d=b&~n,d!==0&&(k=Pn(d)))),k===0?0:i!==0&&i!==k&&(i&_)===0&&(_=k&-k,d=i&-i,_>=d||_===32&&(d&4194048)!==0)?i:k}function lr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Bo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tm(){var n=$n;return $n<<=1,($n&4194048)===0&&($n=256),n}function jm(){var n=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),n}function Gc(n){for(var i=[],d=0;31>d;d++)i.push(n);return i}function qs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function eS(n,i,d,b,k,_){var P=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var U=n.entanglements,se=n.expirationTimes,ye=n.hiddenUpdates;for(d=P&~d;0<d;){var Te=31-Ue(d),_e=1<<Te;U[Te]=0,se[Te]=-1;var be=ye[Te];if(be!==null)for(ye[Te]=null,Te=0;Te<be.length;Te++){var ve=be[Te];ve!==null&&(ve.lane&=-536870913)}d&=~_e}b!==0&&_m(n,b,0),_!==0&&k===0&&n.tag!==0&&(n.suspendedLanes|=_&~(P&~i))}function _m(n,i,d){n.pendingLanes|=i,n.suspendedLanes&=~i;var b=31-Ue(i);n.entangledLanes|=i,n.entanglements[b]=n.entanglements[b]|1073741824|d&4194090}function Nm(n,i){var d=n.entangledLanes|=i;for(n=n.entanglements;d;){var b=31-Ue(d),k=1<<b;k&i|n[b]&i&&(n[b]|=i),d&=~k}}function qc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Wc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Em(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:l0(n.type))}function tS(n,i){var d=q.p;try{return q.p=n,i()}finally{q.p=d}}var Mi=Math.random().toString(36).slice(2),qt="__reactFiber$"+Mi,sn="__reactProps$"+Mi,Vr="__reactContainer$"+Mi,Kc="__reactEvents$"+Mi,nS="__reactListeners$"+Mi,iS="__reactHandles$"+Mi,Mm="__reactResources$"+Mi,Ws="__reactMarker$"+Mi;function Zc(n){delete n[qt],delete n[sn],delete n[Kc],delete n[nS],delete n[iS]}function Ur(n){var i=n[qt];if(i)return i;for(var d=n.parentNode;d;){if(i=d[Vr]||d[qt]){if(d=i.alternate,i.child!==null||d!==null&&d.child!==null)for(n=Gx(n);n!==null;){if(d=n[qt])return d;n=Gx(n)}return i}n=d,d=n.parentNode}return null}function Hr(n){if(n=n[qt]||n[Vr]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Ks(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function $r(n){var i=n[Mm];return i||(i=n[Mm]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Lt(n){n[Ws]=!0}var Om=new Set,Dm={};function cr(n,i){Xr(n,i),Xr(n+"Capture",i)}function Xr(n,i){for(Dm[n]=i,n=0;n<i.length;n++)Om.add(i[n])}var rS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Am={},Rm={};function sS(n){return me.call(Rm,n)?!0:me.call(Am,n)?!1:rS.test(n)?Rm[n]=!0:(Am[n]=!0,!1)}function Vo(n,i,d){if(sS(i))if(d===null)n.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var b=i.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+d)}}function Uo(n,i,d){if(d===null)n.removeAttribute(i);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+d)}}function ai(n,i,d,b){if(b===null)n.removeAttribute(d);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(i,d,""+b)}}var Qc,Pm;function Yr(n){if(Qc===void 0)try{throw Error()}catch(d){var i=d.stack.trim().match(/\n( *(at )?)/);Qc=i&&i[1]||"",Pm=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qc+n+Pm}var Jc=!1;function eu(n,i){if(!n||Jc)return"";Jc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(i){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(ve){var be=ve}Reflect.construct(n,[],_e)}else{try{_e.call()}catch(ve){be=ve}n.call(_e.prototype)}}else{try{throw Error()}catch(ve){be=ve}(_e=n())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(ve){if(ve&&be&&typeof ve.stack=="string")return[ve.stack,be.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=b.DetermineComponentFrameRoot(),P=_[0],U=_[1];if(P&&U){var se=P.split(`
`),ye=U.split(`
`);for(k=b=0;b<se.length&&!se[b].includes("DetermineComponentFrameRoot");)b++;for(;k<ye.length&&!ye[k].includes("DetermineComponentFrameRoot");)k++;if(b===se.length||k===ye.length)for(b=se.length-1,k=ye.length-1;1<=b&&0<=k&&se[b]!==ye[k];)k--;for(;1<=b&&0<=k;b--,k--)if(se[b]!==ye[k]){if(b!==1||k!==1)do if(b--,k--,0>k||se[b]!==ye[k]){var Te=`
`+se[b].replace(" at new "," at ");return n.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",n.displayName)),Te}while(1<=b&&0<=k);break}}}finally{Jc=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?Yr(d):""}function aS(n){switch(n.tag){case 26:case 27:case 5:return Yr(n.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 15:return eu(n.type,!1);case 11:return eu(n.type.render,!1);case 1:return eu(n.type,!0);case 31:return Yr("Activity");default:return""}}function Lm(n){try{var i="";do i+=aS(n),n=n.return;while(n);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Fm(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function oS(n){var i=Fm(n)?"checked":"value",d=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),b=""+n[i];if(!n.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var k=d.get,_=d.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return k.call(this)},set:function(P){b=""+P,_.call(this,P)}}),Object.defineProperty(n,i,{enumerable:d.enumerable}),{getValue:function(){return b},setValue:function(P){b=""+P},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ho(n){n._valueTracker||(n._valueTracker=oS(n))}function zm(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var d=i.getValue(),b="";return n&&(b=Fm(n)?n.checked?"true":"false":n.value),n=b,n!==d?(i.setValue(n),!0):!1}function $o(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var lS=/[\n"\\]/g;function Sn(n){return n.replace(lS,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function tu(n,i,d,b,k,_,P,U){n.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.type=P:n.removeAttribute("type"),i!=null?P==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+wn(i)):n.value!==""+wn(i)&&(n.value=""+wn(i)):P!=="submit"&&P!=="reset"||n.removeAttribute("value"),i!=null?nu(n,P,wn(i)):d!=null?nu(n,P,wn(d)):b!=null&&n.removeAttribute("value"),k==null&&_!=null&&(n.defaultChecked=!!_),k!=null&&(n.checked=k&&typeof k!="function"&&typeof k!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+wn(U):n.removeAttribute("name")}function Im(n,i,d,b,k,_,P,U){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.type=_),i!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||i!=null))return;d=d!=null?""+wn(d):"",i=i!=null?""+wn(i):d,U||i===n.value||(n.value=i),n.defaultValue=i}b=b??k,b=typeof b!="function"&&typeof b!="symbol"&&!!b,n.checked=U?n.checked:!!b,n.defaultChecked=!!b,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(n.name=P)}function nu(n,i,d){i==="number"&&$o(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Gr(n,i,d,b){if(n=n.options,i){i={};for(var k=0;k<d.length;k++)i["$"+d[k]]=!0;for(d=0;d<n.length;d++)k=i.hasOwnProperty("$"+n[d].value),n[d].selected!==k&&(n[d].selected=k),k&&b&&(n[d].defaultSelected=!0)}else{for(d=""+wn(d),i=null,k=0;k<n.length;k++){if(n[k].value===d){n[k].selected=!0,b&&(n[k].defaultSelected=!0);return}i!==null||n[k].disabled||(i=n[k])}i!==null&&(i.selected=!0)}}function Bm(n,i,d){if(i!=null&&(i=""+wn(i),i!==n.value&&(n.value=i),d==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=d!=null?""+wn(d):""}function Vm(n,i,d,b){if(i==null){if(b!=null){if(d!=null)throw Error(o(92));if(G(b)){if(1<b.length)throw Error(o(93));b=b[0]}d=b}d==null&&(d=""),i=d}d=wn(i),n.defaultValue=d,b=n.textContent,b===d&&b!==""&&b!==null&&(n.value=b)}function qr(n,i){if(i){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=i;return}}n.textContent=i}var cS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Um(n,i,d){var b=i.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?b?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":b?n.setProperty(i,d):typeof d!="number"||d===0||cS.has(i)?i==="float"?n.cssFloat=d:n[i]=(""+d).trim():n[i]=d+"px"}function Hm(n,i,d){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,d!=null){for(var b in d)!d.hasOwnProperty(b)||i!=null&&i.hasOwnProperty(b)||(b.indexOf("--")===0?n.setProperty(b,""):b==="float"?n.cssFloat="":n[b]="");for(var k in i)b=i[k],i.hasOwnProperty(k)&&d[k]!==b&&Um(n,k,b)}else for(var _ in i)i.hasOwnProperty(_)&&Um(n,_,i[_])}function iu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(n){return dS.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ru=null;function su(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wr=null,Kr=null;function $m(n){var i=Hr(n);if(i&&(n=i.stateNode)){var d=n[sn]||null;e:switch(n=i.stateNode,i.type){case"input":if(tu(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),i=d.name,d.type==="radio"&&i!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Sn(""+i)+'"][type="radio"]'),i=0;i<d.length;i++){var b=d[i];if(b!==n&&b.form===n.form){var k=b[sn]||null;if(!k)throw Error(o(90));tu(b,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(i=0;i<d.length;i++)b=d[i],b.form===n.form&&zm(b)}break e;case"textarea":Bm(n,d.value,d.defaultValue);break e;case"select":i=d.value,i!=null&&Gr(n,!!d.multiple,i,!1)}}}var au=!1;function Xm(n,i,d){if(au)return n(i,d);au=!0;try{var b=n(i);return b}finally{if(au=!1,(Wr!==null||Kr!==null)&&(Ml(),Wr&&(i=Wr,n=Kr,Kr=Wr=null,$m(i),n)))for(i=0;i<n.length;i++)$m(n[i])}}function Zs(n,i){var d=n.stateNode;if(d===null)return null;var b=d[sn]||null;if(b===null)return null;d=b[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(n=n.type,b=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!b;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(o(231,i,typeof d));return d}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(oi)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{ou=!1}var Oi=null,lu=null,Yo=null;function Ym(){if(Yo)return Yo;var n,i=lu,d=i.length,b,k="value"in Oi?Oi.value:Oi.textContent,_=k.length;for(n=0;n<d&&i[n]===k[n];n++);var P=d-n;for(b=1;b<=P&&i[d-b]===k[_-b];b++);return Yo=k.slice(n,1<b?1-b:void 0)}function Go(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qo(){return!0}function Gm(){return!1}function an(n){function i(d,b,k,_,P){this._reactName=d,this._targetInst=k,this.type=b,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(d=n[U],this[U]=d?d(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?qo:Gm,this.isPropagationStopped=Gm,this}return h(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),i}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=an(ur),Js=h({},ur,{view:0,detail:0}),hS=an(Js),cu,uu,ea,Ko=h({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ea&&(ea&&n.type==="mousemove"?(cu=n.screenX-ea.screenX,uu=n.screenY-ea.screenY):uu=cu=0,ea=n),cu)},movementY:function(n){return"movementY"in n?n.movementY:uu}}),qm=an(Ko),fS=h({},Ko,{dataTransfer:0}),mS=an(fS),gS=h({},Js,{relatedTarget:0}),du=an(gS),pS=h({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),xS=an(pS),yS=h({},ur,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bS=an(yS),vS=h({},ur,{data:0}),Wm=an(vS),wS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kS(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=CS[n])?!!i[n]:!1}function hu(){return kS}var TS=h({},Js,{key:function(n){if(n.key){var i=wS[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Go(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?SS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(n){return n.type==="keypress"?Go(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Go(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jS=an(TS),_S=h({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Km=an(_S),NS=h({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),ES=an(NS),MS=h({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),OS=an(MS),DS=h({},Ko,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),AS=an(DS),RS=h({},ur,{newState:0,oldState:0}),PS=an(RS),LS=[9,13,27,32],fu=oi&&"CompositionEvent"in window,ta=null;oi&&"documentMode"in document&&(ta=document.documentMode);var FS=oi&&"TextEvent"in window&&!ta,Zm=oi&&(!fu||ta&&8<ta&&11>=ta),Qm=" ",Jm=!1;function eg(n,i){switch(n){case"keyup":return LS.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zr=!1;function zS(n,i){switch(n){case"compositionend":return tg(i);case"keypress":return i.which!==32?null:(Jm=!0,Qm);case"textInput":return n=i.data,n===Qm&&Jm?null:n;default:return null}}function IS(n,i){if(Zr)return n==="compositionend"||!fu&&eg(n,i)?(n=Ym(),Yo=lu=Oi=null,Zr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Zm&&i.locale!=="ko"?null:i.data;default:return null}}var BS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!BS[n.type]:i==="textarea"}function ig(n,i,d,b){Wr?Kr?Kr.push(b):Kr=[b]:Wr=b,i=Ll(i,"onChange"),0<i.length&&(d=new Wo("onChange","change",null,d,b),n.push({event:d,listeners:i}))}var na=null,ia=null;function VS(n){Fx(n,0)}function Zo(n){var i=Ks(n);if(zm(i))return n}function rg(n,i){if(n==="change")return i}var sg=!1;if(oi){var mu;if(oi){var gu="oninput"in document;if(!gu){var ag=document.createElement("div");ag.setAttribute("oninput","return;"),gu=typeof ag.oninput=="function"}mu=gu}else mu=!1;sg=mu&&(!document.documentMode||9<document.documentMode)}function og(){na&&(na.detachEvent("onpropertychange",lg),ia=na=null)}function lg(n){if(n.propertyName==="value"&&Zo(ia)){var i=[];ig(i,ia,n,su(n)),Xm(VS,i)}}function US(n,i,d){n==="focusin"?(og(),na=i,ia=d,na.attachEvent("onpropertychange",lg)):n==="focusout"&&og()}function HS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Zo(ia)}function $S(n,i){if(n==="click")return Zo(i)}function XS(n,i){if(n==="input"||n==="change")return Zo(i)}function YS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var hn=typeof Object.is=="function"?Object.is:YS;function ra(n,i){if(hn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var d=Object.keys(n),b=Object.keys(i);if(d.length!==b.length)return!1;for(b=0;b<d.length;b++){var k=d[b];if(!me.call(i,k)||!hn(n[k],i[k]))return!1}return!0}function cg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ug(n,i){var d=cg(n);n=0;for(var b;d;){if(d.nodeType===3){if(b=n+d.textContent.length,n<=i&&b>=i)return{node:d,offset:i-n};n=b}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=cg(d)}}function dg(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?dg(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function hg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=$o(n.document);i instanceof n.HTMLIFrameElement;){try{var d=typeof i.contentWindow.location.href=="string"}catch{d=!1}if(d)n=i.contentWindow;else break;i=$o(n.document)}return i}function pu(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var GS=oi&&"documentMode"in document&&11>=document.documentMode,Qr=null,xu=null,sa=null,yu=!1;function fg(n,i,d){var b=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yu||Qr==null||Qr!==$o(b)||(b=Qr,"selectionStart"in b&&pu(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),sa&&ra(sa,b)||(sa=b,b=Ll(xu,"onSelect"),0<b.length&&(i=new Wo("onSelect","select",null,i,d),n.push({event:i,listeners:b}),i.target=Qr)))}function dr(n,i){var d={};return d[n.toLowerCase()]=i.toLowerCase(),d["Webkit"+n]="webkit"+i,d["Moz"+n]="moz"+i,d}var Jr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},bu={},mg={};oi&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function hr(n){if(bu[n])return bu[n];if(!Jr[n])return n;var i=Jr[n],d;for(d in i)if(i.hasOwnProperty(d)&&d in mg)return bu[n]=i[d];return n}var gg=hr("animationend"),pg=hr("animationiteration"),xg=hr("animationstart"),qS=hr("transitionrun"),WS=hr("transitionstart"),KS=hr("transitioncancel"),yg=hr("transitionend"),bg=new Map,vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vu.push("scrollEnd");function Ln(n,i){bg.set(n,i),cr(i,[n])}var vg=new WeakMap;function Cn(n,i){if(typeof n=="object"&&n!==null){var d=vg.get(n);return d!==void 0?d:(i={value:n,source:i,stack:Lm(i)},vg.set(n,i),i)}return{value:n,source:i,stack:Lm(i)}}var kn=[],es=0,wu=0;function Qo(){for(var n=es,i=wu=es=0;i<n;){var d=kn[i];kn[i++]=null;var b=kn[i];kn[i++]=null;var k=kn[i];kn[i++]=null;var _=kn[i];if(kn[i++]=null,b!==null&&k!==null){var P=b.pending;P===null?k.next=k:(k.next=P.next,P.next=k),b.pending=k}_!==0&&wg(d,k,_)}}function Jo(n,i,d,b){kn[es++]=n,kn[es++]=i,kn[es++]=d,kn[es++]=b,wu|=b,n.lanes|=b,n=n.alternate,n!==null&&(n.lanes|=b)}function Su(n,i,d,b){return Jo(n,i,d,b),el(n)}function ts(n,i){return Jo(n,null,null,i),el(n)}function wg(n,i,d){n.lanes|=d;var b=n.alternate;b!==null&&(b.lanes|=d);for(var k=!1,_=n.return;_!==null;)_.childLanes|=d,b=_.alternate,b!==null&&(b.childLanes|=d),_.tag===22&&(n=_.stateNode,n===null||n._visibility&1||(k=!0)),n=_,_=_.return;return n.tag===3?(_=n.stateNode,k&&i!==null&&(k=31-Ue(d),n=_.hiddenUpdates,b=n[k],b===null?n[k]=[i]:b.push(i),i.lane=d|536870912),_):null}function el(n){if(50<Ma)throw Ma=0,Nd=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ns={};function ZS(n,i,d,b){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,i,d,b){return new ZS(n,i,d,b)}function Cu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function li(n,i){var d=n.alternate;return d===null?(d=fn(n.tag,i,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=i,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,i=n.dependencies,d.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function Sg(n,i){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,i=d.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function tl(n,i,d,b,k,_){var P=0;if(b=n,typeof n=="function")Cu(n)&&(P=1);else if(typeof n=="string")P=JC(n,d,V.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=fn(31,d,i,k),n.elementType=I,n.lanes=_,n;case m:return fr(d.children,k,_,i);case y:P=8,k|=24;break;case p:return n=fn(12,d,i,k|2),n.elementType=p,n.lanes=_,n;case E:return n=fn(13,d,i,k),n.elementType=E,n.lanes=_,n;case M:return n=fn(19,d,i,k),n.elementType=M,n.lanes=_,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case w:case T:P=10;break e;case C:P=9;break e;case j:P=11;break e;case D:P=14;break e;case A:P=16,b=null;break e}P=29,d=Error(o(130,n===null?"null":typeof n,"")),b=null}return i=fn(P,d,i,k),i.elementType=n,i.type=b,i.lanes=_,i}function fr(n,i,d,b){return n=fn(7,n,b,i),n.lanes=d,n}function ku(n,i,d){return n=fn(6,n,null,i),n.lanes=d,n}function Tu(n,i,d){return i=fn(4,n.children!==null?n.children:[],n.key,i),i.lanes=d,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var is=[],rs=0,nl=null,il=0,Tn=[],jn=0,mr=null,ci=1,ui="";function gr(n,i){is[rs++]=il,is[rs++]=nl,nl=n,il=i}function Cg(n,i,d){Tn[jn++]=ci,Tn[jn++]=ui,Tn[jn++]=mr,mr=n;var b=ci;n=ui;var k=32-Ue(b)-1;b&=~(1<<k),d+=1;var _=32-Ue(i)+k;if(30<_){var P=k-k%5;_=(b&(1<<P)-1).toString(32),b>>=P,k-=P,ci=1<<32-Ue(i)+k|d<<k|b,ui=_+n}else ci=1<<_|d<<k|b,ui=n}function ju(n){n.return!==null&&(gr(n,1),Cg(n,1,0))}function _u(n){for(;n===nl;)nl=is[--rs],is[rs]=null,il=is[--rs],is[rs]=null;for(;n===mr;)mr=Tn[--jn],Tn[jn]=null,ui=Tn[--jn],Tn[jn]=null,ci=Tn[--jn],Tn[jn]=null}var Jt=null,pt=null,it=!1,pr=null,Xn=!1,Nu=Error(o(519));function xr(n){var i=Error(o(418,""));throw la(Cn(i,n)),Nu}function kg(n){var i=n.stateNode,d=n.type,b=n.memoizedProps;switch(i[qt]=n,i[sn]=b,d){case"dialog":Qe("cancel",i),Qe("close",i);break;case"iframe":case"object":case"embed":Qe("load",i);break;case"video":case"audio":for(d=0;d<Da.length;d++)Qe(Da[d],i);break;case"source":Qe("error",i);break;case"img":case"image":case"link":Qe("error",i),Qe("load",i);break;case"details":Qe("toggle",i);break;case"input":Qe("invalid",i),Im(i,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),Ho(i);break;case"select":Qe("invalid",i);break;case"textarea":Qe("invalid",i),Vm(i,b.value,b.defaultValue,b.children),Ho(i)}d=b.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||i.textContent===""+d||b.suppressHydrationWarning===!0||Vx(i.textContent,d)?(b.popover!=null&&(Qe("beforetoggle",i),Qe("toggle",i)),b.onScroll!=null&&Qe("scroll",i),b.onScrollEnd!=null&&Qe("scrollend",i),b.onClick!=null&&(i.onclick=Fl),i=!0):i=!1,i||xr(n)}function Tg(n){for(Jt=n.return;Jt;)switch(Jt.tag){case 5:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:Jt=Jt.return}}function aa(n){if(n!==Jt)return!1;if(!it)return Tg(n),it=!0,!1;var i=n.tag,d;if((d=i!==3&&i!==27)&&((d=i===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||$d(n.type,n.memoizedProps)),d=!d),d&&pt&&xr(n),Tg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(d=n.data,d==="/$"){if(i===0){pt=zn(n.nextSibling);break e}i--}else d!=="$"&&d!=="$!"&&d!=="$?"||i++;n=n.nextSibling}pt=null}}else i===27?(i=pt,Gi(n.type)?(n=qd,qd=null,pt=n):pt=i):pt=Jt?zn(n.stateNode.nextSibling):null;return!0}function oa(){pt=Jt=null,it=!1}function jg(){var n=pr;return n!==null&&(cn===null?cn=n:cn.push.apply(cn,n),pr=null),n}function la(n){pr===null?pr=[n]:pr.push(n)}var Eu=L(null),yr=null,di=null;function Di(n,i,d){K(Eu,i._currentValue),i._currentValue=d}function hi(n){n._currentValue=Eu.current,B(Eu)}function Mu(n,i,d){for(;n!==null;){var b=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,b!==null&&(b.childLanes|=i)):b!==null&&(b.childLanes&i)!==i&&(b.childLanes|=i),n===d)break;n=n.return}}function Ou(n,i,d,b){var k=n.child;for(k!==null&&(k.return=n);k!==null;){var _=k.dependencies;if(_!==null){var P=k.child;_=_.firstContext;e:for(;_!==null;){var U=_;_=k;for(var se=0;se<i.length;se++)if(U.context===i[se]){_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),Mu(_.return,d,n),b||(P=null);break e}_=U.next}}else if(k.tag===18){if(P=k.return,P===null)throw Error(o(341));P.lanes|=d,_=P.alternate,_!==null&&(_.lanes|=d),Mu(P,d,n),P=null}else P=k.child;if(P!==null)P.return=k;else for(P=k;P!==null;){if(P===n){P=null;break}if(k=P.sibling,k!==null){k.return=P.return,P=k;break}P=P.return}k=P}}function ca(n,i,d,b){n=null;for(var k=i,_=!1;k!==null;){if(!_){if((k.flags&524288)!==0)_=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var P=k.alternate;if(P===null)throw Error(o(387));if(P=P.memoizedProps,P!==null){var U=k.type;hn(k.pendingProps.value,P.value)||(n!==null?n.push(U):n=[U])}}else if(k===W.current){if(P=k.alternate,P===null)throw Error(o(387));P.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(n!==null?n.push(za):n=[za])}k=k.return}n!==null&&Ou(i,n,d,b),i.flags|=262144}function rl(n){for(n=n.firstContext;n!==null;){if(!hn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function br(n){yr=n,di=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return _g(yr,n)}function sl(n,i){return yr===null&&br(n),_g(n,i)}function _g(n,i){var d=i._currentValue;if(i={context:i,memoizedValue:d,next:null},di===null){if(n===null)throw Error(o(308));di=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else di=di.next=i;return d}var QS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(d,b){n.push(b)}};this.abort=function(){i.aborted=!0,n.forEach(function(d){return d()})}},JS=t.unstable_scheduleCallback,eC=t.unstable_NormalPriority,Mt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Du(){return{controller:new QS,data:new Map,refCount:0}}function ua(n){n.refCount--,n.refCount===0&&JS(eC,function(){n.controller.abort()})}var da=null,Au=0,ss=0,as=null;function tC(n,i){if(da===null){var d=da=[];Au=0,ss=Pd(),as={status:"pending",value:void 0,then:function(b){d.push(b)}}}return Au++,i.then(Ng,Ng),i}function Ng(){if(--Au===0&&da!==null){as!==null&&(as.status="fulfilled");var n=da;da=null,ss=0,as=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function nC(n,i){var d=[],b={status:"pending",value:null,reason:null,then:function(k){d.push(k)}};return n.then(function(){b.status="fulfilled",b.value=i;for(var k=0;k<d.length;k++)(0,d[k])(i)},function(k){for(b.status="rejected",b.reason=k,k=0;k<d.length;k++)(0,d[k])(void 0)}),b}var Eg=z.S;z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&tC(n,i),Eg!==null&&Eg(n,i)};var vr=L(null);function Ru(){var n=vr.current;return n!==null?n:ut.pooledCache}function al(n,i){i===null?K(vr,vr.current):K(vr,i.pool)}function Mg(){var n=Ru();return n===null?null:{parent:Mt._currentValue,pool:n}}var ha=Error(o(460)),Og=Error(o(474)),ol=Error(o(542)),Pu={then:function(){}};function Dg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ll(){}function Ag(n,i,d){switch(d=n[d],d===void 0?n.push(i):d!==i&&(i.then(ll,ll),i=d),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Pg(n),n;default:if(typeof i.status=="string")i.then(ll,ll);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(b){if(i.status==="pending"){var k=i;k.status="fulfilled",k.value=b}},function(b){if(i.status==="pending"){var k=i;k.status="rejected",k.reason=b}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Pg(n),n}throw fa=i,ha}}var fa=null;function Rg(){if(fa===null)throw Error(o(459));var n=fa;return fa=null,n}function Pg(n){if(n===ha||n===ol)throw Error(o(483))}var Ai=!1;function Lu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fu(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(n,i,d){var b=n.updateQueue;if(b===null)return null;if(b=b.shared,(rt&2)!==0){var k=b.pending;return k===null?i.next=i:(i.next=k.next,k.next=i),b.pending=i,i=el(n),wg(n,null,d),i}return Jo(n,b,i,d),el(n)}function ma(n,i,d){if(i=i.updateQueue,i!==null&&(i=i.shared,(d&4194048)!==0)){var b=i.lanes;b&=n.pendingLanes,d|=b,i.lanes=d,Nm(n,d)}}function zu(n,i){var d=n.updateQueue,b=n.alternate;if(b!==null&&(b=b.updateQueue,d===b)){var k=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var P={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?k=_=P:_=_.next=P,d=d.next}while(d!==null);_===null?k=_=i:_=_.next=i}else k=_=i;d={baseState:b.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:b.shared,callbacks:b.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=i:n.next=i,d.lastBaseUpdate=i}var Iu=!1;function ga(){if(Iu){var n=as;if(n!==null)throw n}}function pa(n,i,d,b){Iu=!1;var k=n.updateQueue;Ai=!1;var _=k.firstBaseUpdate,P=k.lastBaseUpdate,U=k.shared.pending;if(U!==null){k.shared.pending=null;var se=U,ye=se.next;se.next=null,P===null?_=ye:P.next=ye,P=se;var Te=n.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==P&&(U===null?Te.firstBaseUpdate=ye:U.next=ye,Te.lastBaseUpdate=se))}if(_!==null){var _e=k.baseState;P=0,Te=ye=se=null,U=_;do{var be=U.lane&-536870913,ve=be!==U.lane;if(ve?(et&be)===be:(b&be)===be){be!==0&&be===ss&&(Iu=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var He=n,Be=U;be=i;var lt=d;switch(Be.tag){case 1:if(He=Be.payload,typeof He=="function"){_e=He.call(lt,_e,be);break e}_e=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Be.payload,be=typeof He=="function"?He.call(lt,_e,be):He,be==null)break e;_e=h({},_e,be);break e;case 2:Ai=!0}}be=U.callback,be!==null&&(n.flags|=64,ve&&(n.flags|=8192),ve=k.callbacks,ve===null?k.callbacks=[be]:ve.push(be))}else ve={lane:be,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(ye=Te=ve,se=_e):Te=Te.next=ve,P|=be;if(U=U.next,U===null){if(U=k.shared.pending,U===null)break;ve=U,U=ve.next,ve.next=null,k.lastBaseUpdate=ve,k.shared.pending=null}}while(!0);Te===null&&(se=_e),k.baseState=se,k.firstBaseUpdate=ye,k.lastBaseUpdate=Te,_===null&&(k.shared.lanes=0),Hi|=P,n.lanes=P,n.memoizedState=_e}}function Lg(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function Fg(n,i){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)Lg(d[n],i)}var os=L(null),cl=L(0);function zg(n,i){n=bi,K(cl,n),K(os,i),bi=n|i.baseLanes}function Bu(){K(cl,bi),K(os,os.current)}function Vu(){bi=cl.current,B(os),B(cl)}var Li=0,qe=null,at=null,jt=null,ul=!1,ls=!1,wr=!1,dl=0,xa=0,cs=null,iC=0;function vt(){throw Error(o(321))}function Uu(n,i){if(i===null)return!1;for(var d=0;d<i.length&&d<n.length;d++)if(!hn(n[d],i[d]))return!1;return!0}function Hu(n,i,d,b,k,_){return Li=_,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,z.H=n===null||n.memoizedState===null?wp:Sp,wr=!1,_=d(b,k),wr=!1,ls&&(_=Bg(i,d,b,k)),Ig(n),_}function Ig(n){z.H=xl;var i=at!==null&&at.next!==null;if(Li=0,jt=at=qe=null,ul=!1,xa=0,cs=null,i)throw Error(o(300));n===null||Ft||(n=n.dependencies,n!==null&&rl(n)&&(Ft=!0))}function Bg(n,i,d,b){qe=n;var k=0;do{if(ls&&(cs=null),xa=0,ls=!1,25<=k)throw Error(o(301));if(k+=1,jt=at=null,n.updateQueue!=null){var _=n.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}z.H=uC,_=i(d,b)}while(ls);return _}function rC(){var n=z.H,i=n.useState()[0];return i=typeof i.then=="function"?ya(i):i,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(qe.flags|=1024),i}function $u(){var n=dl!==0;return dl=0,n}function Xu(n,i,d){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d}function Yu(n){if(ul){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ul=!1}Li=0,jt=at=qe=null,ls=!1,xa=dl=0,cs=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?qe.memoizedState=jt=n:jt=jt.next=n,jt}function _t(){if(at===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var i=jt===null?qe.memoizedState:jt.next;if(i!==null)jt=i,at=n;else{if(n===null)throw qe.alternate===null?Error(o(467)):Error(o(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},jt===null?qe.memoizedState=jt=n:jt=jt.next=n}return jt}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ya(n){var i=xa;return xa+=1,cs===null&&(cs=[]),n=Ag(cs,n,i),i=qe,(jt===null?i.memoizedState:jt.next)===null&&(i=i.alternate,z.H=i===null||i.memoizedState===null?wp:Sp),n}function hl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ya(n);if(n.$$typeof===T)return Wt(n)}throw Error(o(438,String(n)))}function qu(n){var i=null,d=qe.updateQueue;if(d!==null&&(i=d.memoCache),i==null){var b=qe.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(i={data:b.data.map(function(k){return k.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),d===null&&(d=Gu(),qe.updateQueue=d),d.memoCache=i,d=i.data[i.index],d===void 0)for(d=i.data[i.index]=Array(n),b=0;b<n;b++)d[b]=X;return i.index++,d}function fi(n,i){return typeof i=="function"?i(n):i}function fl(n){var i=_t();return Wu(i,at,n)}function Wu(n,i,d){var b=n.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=d;var k=n.baseQueue,_=b.pending;if(_!==null){if(k!==null){var P=k.next;k.next=_.next,_.next=P}i.baseQueue=k=_,b.pending=null}if(_=n.baseState,k===null)n.memoizedState=_;else{i=k.next;var U=P=null,se=null,ye=i,Te=!1;do{var _e=ye.lane&-536870913;if(_e!==ye.lane?(et&_e)===_e:(Li&_e)===_e){var be=ye.revertLane;if(be===0)se!==null&&(se=se.next={lane:0,revertLane:0,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),_e===ss&&(Te=!0);else if((Li&be)===be){ye=ye.next,be===ss&&(Te=!0);continue}else _e={lane:0,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(U=se=_e,P=_):se=se.next=_e,qe.lanes|=be,Hi|=be;_e=ye.action,wr&&d(_,_e),_=ye.hasEagerState?ye.eagerState:d(_,_e)}else be={lane:_e,revertLane:ye.revertLane,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},se===null?(U=se=be,P=_):se=se.next=be,qe.lanes|=_e,Hi|=_e;ye=ye.next}while(ye!==null&&ye!==i);if(se===null?P=_:se.next=U,!hn(_,n.memoizedState)&&(Ft=!0,Te&&(d=as,d!==null)))throw d;n.memoizedState=_,n.baseState=P,n.baseQueue=se,b.lastRenderedState=_}return k===null&&(b.lanes=0),[n.memoizedState,b.dispatch]}function Ku(n){var i=_t(),d=i.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=n;var b=d.dispatch,k=d.pending,_=i.memoizedState;if(k!==null){d.pending=null;var P=k=k.next;do _=n(_,P.action),P=P.next;while(P!==k);hn(_,i.memoizedState)||(Ft=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),d.lastRenderedState=_}return[_,b]}function Vg(n,i,d){var b=qe,k=_t(),_=it;if(_){if(d===void 0)throw Error(o(407));d=d()}else d=i();var P=!hn((at||k).memoizedState,d);P&&(k.memoizedState=d,Ft=!0),k=k.queue;var U=$g.bind(null,b,k,n);if(ba(2048,8,U,[n]),k.getSnapshot!==i||P||jt!==null&&jt.memoizedState.tag&1){if(b.flags|=2048,us(9,ml(),Hg.bind(null,b,k,d,i),null),ut===null)throw Error(o(349));_||(Li&124)!==0||Ug(b,i,d)}return d}function Ug(n,i,d){n.flags|=16384,n={getSnapshot:i,value:d},i=qe.updateQueue,i===null?(i=Gu(),qe.updateQueue=i,i.stores=[n]):(d=i.stores,d===null?i.stores=[n]:d.push(n))}function Hg(n,i,d,b){i.value=d,i.getSnapshot=b,Xg(i)&&Yg(n)}function $g(n,i,d){return d(function(){Xg(i)&&Yg(n)})}function Xg(n){var i=n.getSnapshot;n=n.value;try{var d=i();return!hn(n,d)}catch{return!0}}function Yg(n){var i=ts(n,2);i!==null&&yn(i,n,2)}function Zu(n){var i=on();if(typeof n=="function"){var d=n;if(n=d(),wr){ze(!0);try{d()}finally{ze(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},i}function Gg(n,i,d,b){return n.baseState=d,Wu(n,at,typeof b=="function"?b:fi)}function sC(n,i,d,b,k){if(pl(n))throw Error(o(485));if(n=i.action,n!==null){var _={payload:k,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};z.T!==null?d(!0):_.isTransition=!1,b(_),d=i.pending,d===null?(_.next=i.pending=_,qg(i,_)):(_.next=d.next,i.pending=d.next=_)}}function qg(n,i){var d=i.action,b=i.payload,k=n.state;if(i.isTransition){var _=z.T,P={};z.T=P;try{var U=d(k,b),se=z.S;se!==null&&se(P,U),Wg(n,i,U)}catch(ye){Qu(n,i,ye)}finally{z.T=_}}else try{_=d(k,b),Wg(n,i,_)}catch(ye){Qu(n,i,ye)}}function Wg(n,i,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(b){Kg(n,i,b)},function(b){return Qu(n,i,b)}):Kg(n,i,d)}function Kg(n,i,d){i.status="fulfilled",i.value=d,Zg(i),n.state=d,i=n.pending,i!==null&&(d=i.next,d===i?n.pending=null:(d=d.next,i.next=d,qg(n,d)))}function Qu(n,i,d){var b=n.pending;if(n.pending=null,b!==null){b=b.next;do i.status="rejected",i.reason=d,Zg(i),i=i.next;while(i!==b)}n.action=null}function Zg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Qg(n,i){return i}function Jg(n,i){if(it){var d=ut.formState;if(d!==null){e:{var b=qe;if(it){if(pt){t:{for(var k=pt,_=Xn;k.nodeType!==8;){if(!_){k=null;break t}if(k=zn(k.nextSibling),k===null){k=null;break t}}_=k.data,k=_==="F!"||_==="F"?k:null}if(k){pt=zn(k.nextSibling),b=k.data==="F!";break e}}xr(b)}b=!1}b&&(i=d[0])}}return d=on(),d.memoizedState=d.baseState=i,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:i},d.queue=b,d=yp.bind(null,qe,b),b.dispatch=d,b=Zu(!1),_=id.bind(null,qe,!1,b.queue),b=on(),k={state:i,dispatch:null,action:n,pending:null},b.queue=k,d=sC.bind(null,qe,k,_,d),k.dispatch=d,b.memoizedState=n,[i,d,!1]}function ep(n){var i=_t();return tp(i,at,n)}function tp(n,i,d){if(i=Wu(n,i,Qg)[0],n=fl(fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var b=ya(i)}catch(P){throw P===ha?ol:P}else b=i;i=_t();var k=i.queue,_=k.dispatch;return d!==i.memoizedState&&(qe.flags|=2048,us(9,ml(),aC.bind(null,k,d),null)),[b,_,n]}function aC(n,i){n.action=i}function np(n){var i=_t(),d=at;if(d!==null)return tp(i,d,n);_t(),i=i.memoizedState,d=_t();var b=d.queue.dispatch;return d.memoizedState=n,[i,b,!1]}function us(n,i,d,b){return n={tag:n,create:d,deps:b,inst:i,next:null},i=qe.updateQueue,i===null&&(i=Gu(),qe.updateQueue=i),d=i.lastEffect,d===null?i.lastEffect=n.next=n:(b=d.next,d.next=n,n.next=b,i.lastEffect=n),n}function ml(){return{destroy:void 0,resource:void 0}}function ip(){return _t().memoizedState}function gl(n,i,d,b){var k=on();b=b===void 0?null:b,qe.flags|=n,k.memoizedState=us(1|i,ml(),d,b)}function ba(n,i,d,b){var k=_t();b=b===void 0?null:b;var _=k.memoizedState.inst;at!==null&&b!==null&&Uu(b,at.memoizedState.deps)?k.memoizedState=us(i,_,d,b):(qe.flags|=n,k.memoizedState=us(1|i,_,d,b))}function rp(n,i){gl(8390656,8,n,i)}function sp(n,i){ba(2048,8,n,i)}function ap(n,i){return ba(4,2,n,i)}function op(n,i){return ba(4,4,n,i)}function lp(n,i){if(typeof i=="function"){n=n();var d=i(n);return function(){typeof d=="function"?d():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function cp(n,i,d){d=d!=null?d.concat([n]):null,ba(4,4,lp.bind(null,i,n),d)}function Ju(){}function up(n,i){var d=_t();i=i===void 0?null:i;var b=d.memoizedState;return i!==null&&Uu(i,b[1])?b[0]:(d.memoizedState=[n,i],n)}function dp(n,i){var d=_t();i=i===void 0?null:i;var b=d.memoizedState;if(i!==null&&Uu(i,b[1]))return b[0];if(b=n(),wr){ze(!0);try{n()}finally{ze(!1)}}return d.memoizedState=[b,i],b}function ed(n,i,d){return d===void 0||(Li&1073741824)!==0?n.memoizedState=i:(n.memoizedState=d,n=mx(),qe.lanes|=n,Hi|=n,d)}function hp(n,i,d,b){return hn(d,i)?d:os.current!==null?(n=ed(n,d,b),hn(n,i)||(Ft=!0),n):(Li&42)===0?(Ft=!0,n.memoizedState=d):(n=mx(),qe.lanes|=n,Hi|=n,i)}function fp(n,i,d,b,k){var _=q.p;q.p=_!==0&&8>_?_:8;var P=z.T,U={};z.T=U,id(n,!1,i,d);try{var se=k(),ye=z.S;if(ye!==null&&ye(U,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Te=nC(se,b);va(n,i,Te,xn(n))}else va(n,i,b,xn(n))}catch(_e){va(n,i,{then:function(){},status:"rejected",reason:_e},xn())}finally{q.p=_,z.T=P}}function oC(){}function td(n,i,d,b){if(n.tag!==5)throw Error(o(476));var k=mp(n).queue;fp(n,k,i,Y,d===null?oC:function(){return gp(n),d(b)})}function mp(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:Y},next:null};var d={};return i.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:d},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function gp(n){var i=mp(n).next.queue;va(n,i,{},xn())}function nd(){return Wt(za)}function pp(){return _t().memoizedState}function xp(){return _t().memoizedState}function lC(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var d=xn();n=Ri(d);var b=Pi(i,n,d);b!==null&&(yn(b,i,d),ma(b,i,d)),i={cache:Du()},n.payload=i;return}i=i.return}}function cC(n,i,d){var b=xn();d={lane:b,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},pl(n)?bp(i,d):(d=Su(n,i,d,b),d!==null&&(yn(d,n,b),vp(d,i,b)))}function yp(n,i,d){var b=xn();va(n,i,d,b)}function va(n,i,d,b){var k={lane:b,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(pl(n))bp(i,k);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var P=i.lastRenderedState,U=_(P,d);if(k.hasEagerState=!0,k.eagerState=U,hn(U,P))return Jo(n,i,k,0),ut===null&&Qo(),!1}catch{}finally{}if(d=Su(n,i,k,b),d!==null)return yn(d,n,b),vp(d,i,b),!0}return!1}function id(n,i,d,b){if(b={lane:2,revertLane:Pd(),action:b,hasEagerState:!1,eagerState:null,next:null},pl(n)){if(i)throw Error(o(479))}else i=Su(n,d,b,2),i!==null&&yn(i,n,2)}function pl(n){var i=n.alternate;return n===qe||i!==null&&i===qe}function bp(n,i){ls=ul=!0;var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}function vp(n,i,d){if((d&4194048)!==0){var b=i.lanes;b&=n.pendingLanes,d|=b,i.lanes=d,Nm(n,d)}}var xl={readContext:Wt,use:hl,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},wp={readContext:Wt,use:hl,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Wt,useEffect:rp,useImperativeHandle:function(n,i,d){d=d!=null?d.concat([n]):null,gl(4194308,4,lp.bind(null,i,n),d)},useLayoutEffect:function(n,i){return gl(4194308,4,n,i)},useInsertionEffect:function(n,i){gl(4,2,n,i)},useMemo:function(n,i){var d=on();i=i===void 0?null:i;var b=n();if(wr){ze(!0);try{n()}finally{ze(!1)}}return d.memoizedState=[b,i],b},useReducer:function(n,i,d){var b=on();if(d!==void 0){var k=d(i);if(wr){ze(!0);try{d(i)}finally{ze(!1)}}}else k=i;return b.memoizedState=b.baseState=k,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:k},b.queue=n,n=n.dispatch=cC.bind(null,qe,n),[b.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=Zu(n);var i=n.queue,d=yp.bind(null,qe,i);return i.dispatch=d,[n.memoizedState,d]},useDebugValue:Ju,useDeferredValue:function(n,i){var d=on();return ed(d,n,i)},useTransition:function(){var n=Zu(!1);return n=fp.bind(null,qe,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,d){var b=qe,k=on();if(it){if(d===void 0)throw Error(o(407));d=d()}else{if(d=i(),ut===null)throw Error(o(349));(et&124)!==0||Ug(b,i,d)}k.memoizedState=d;var _={value:d,getSnapshot:i};return k.queue=_,rp($g.bind(null,b,_,n),[n]),b.flags|=2048,us(9,ml(),Hg.bind(null,b,_,d,i),null),d},useId:function(){var n=on(),i=ut.identifierPrefix;if(it){var d=ui,b=ci;d=(b&~(1<<32-Ue(b)-1)).toString(32)+d,i="«"+i+"R"+d,d=dl++,0<d&&(i+="H"+d.toString(32)),i+="»"}else d=iC++,i="«"+i+"r"+d.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:nd,useFormState:Jg,useActionState:Jg,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=d,i=id.bind(null,qe,!0,d),d.dispatch=i,[n,i]},useMemoCache:qu,useCacheRefresh:function(){return on().memoizedState=lC.bind(null,qe)}},Sp={readContext:Wt,use:hl,useCallback:up,useContext:Wt,useEffect:sp,useImperativeHandle:cp,useInsertionEffect:ap,useLayoutEffect:op,useMemo:dp,useReducer:fl,useRef:ip,useState:function(){return fl(fi)},useDebugValue:Ju,useDeferredValue:function(n,i){var d=_t();return hp(d,at.memoizedState,n,i)},useTransition:function(){var n=fl(fi)[0],i=_t().memoizedState;return[typeof n=="boolean"?n:ya(n),i]},useSyncExternalStore:Vg,useId:pp,useHostTransitionStatus:nd,useFormState:ep,useActionState:ep,useOptimistic:function(n,i){var d=_t();return Gg(d,at,n,i)},useMemoCache:qu,useCacheRefresh:xp},uC={readContext:Wt,use:hl,useCallback:up,useContext:Wt,useEffect:sp,useImperativeHandle:cp,useInsertionEffect:ap,useLayoutEffect:op,useMemo:dp,useReducer:Ku,useRef:ip,useState:function(){return Ku(fi)},useDebugValue:Ju,useDeferredValue:function(n,i){var d=_t();return at===null?ed(d,n,i):hp(d,at.memoizedState,n,i)},useTransition:function(){var n=Ku(fi)[0],i=_t().memoizedState;return[typeof n=="boolean"?n:ya(n),i]},useSyncExternalStore:Vg,useId:pp,useHostTransitionStatus:nd,useFormState:np,useActionState:np,useOptimistic:function(n,i){var d=_t();return at!==null?Gg(d,at,n,i):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:qu,useCacheRefresh:xp},ds=null,wa=0;function yl(n){var i=wa;return wa+=1,ds===null&&(ds=[]),Ag(ds,n,i)}function Sa(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function bl(n,i){throw i.$$typeof===a?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Cp(n){var i=n._init;return i(n._payload)}function kp(n){function i(pe,he){if(n){var xe=pe.deletions;xe===null?(pe.deletions=[he],pe.flags|=16):xe.push(he)}}function d(pe,he){if(!n)return null;for(;he!==null;)i(pe,he),he=he.sibling;return null}function b(pe){for(var he=new Map;pe!==null;)pe.key!==null?he.set(pe.key,pe):he.set(pe.index,pe),pe=pe.sibling;return he}function k(pe,he){return pe=li(pe,he),pe.index=0,pe.sibling=null,pe}function _(pe,he,xe){return pe.index=xe,n?(xe=pe.alternate,xe!==null?(xe=xe.index,xe<he?(pe.flags|=67108866,he):xe):(pe.flags|=67108866,he)):(pe.flags|=1048576,he)}function P(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function U(pe,he,xe,je){return he===null||he.tag!==6?(he=ku(xe,pe.mode,je),he.return=pe,he):(he=k(he,xe),he.return=pe,he)}function se(pe,he,xe,je){var Re=xe.type;return Re===m?Te(pe,he,xe.props.children,je,xe.key):he!==null&&(he.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Cp(Re)===he.type)?(he=k(he,xe.props),Sa(he,xe),he.return=pe,he):(he=tl(xe.type,xe.key,xe.props,null,pe.mode,je),Sa(he,xe),he.return=pe,he)}function ye(pe,he,xe,je){return he===null||he.tag!==4||he.stateNode.containerInfo!==xe.containerInfo||he.stateNode.implementation!==xe.implementation?(he=Tu(xe,pe.mode,je),he.return=pe,he):(he=k(he,xe.children||[]),he.return=pe,he)}function Te(pe,he,xe,je,Re){return he===null||he.tag!==7?(he=fr(xe,pe.mode,je,Re),he.return=pe,he):(he=k(he,xe),he.return=pe,he)}function _e(pe,he,xe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return he=ku(""+he,pe.mode,xe),he.return=pe,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return xe=tl(he.type,he.key,he.props,null,pe.mode,xe),Sa(xe,he),xe.return=pe,xe;case c:return he=Tu(he,pe.mode,xe),he.return=pe,he;case A:var je=he._init;return he=je(he._payload),_e(pe,he,xe)}if(G(he)||Z(he))return he=fr(he,pe.mode,xe,null),he.return=pe,he;if(typeof he.then=="function")return _e(pe,yl(he),xe);if(he.$$typeof===T)return _e(pe,sl(pe,he),xe);bl(pe,he)}return null}function be(pe,he,xe,je){var Re=he!==null?he.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return Re!==null?null:U(pe,he,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return xe.key===Re?se(pe,he,xe,je):null;case c:return xe.key===Re?ye(pe,he,xe,je):null;case A:return Re=xe._init,xe=Re(xe._payload),be(pe,he,xe,je)}if(G(xe)||Z(xe))return Re!==null?null:Te(pe,he,xe,je,null);if(typeof xe.then=="function")return be(pe,he,yl(xe),je);if(xe.$$typeof===T)return be(pe,he,sl(pe,xe),je);bl(pe,xe)}return null}function ve(pe,he,xe,je,Re){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return pe=pe.get(xe)||null,U(he,pe,""+je,Re);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case l:return pe=pe.get(je.key===null?xe:je.key)||null,se(he,pe,je,Re);case c:return pe=pe.get(je.key===null?xe:je.key)||null,ye(he,pe,je,Re);case A:var Ke=je._init;return je=Ke(je._payload),ve(pe,he,xe,je,Re)}if(G(je)||Z(je))return pe=pe.get(xe)||null,Te(he,pe,je,Re,null);if(typeof je.then=="function")return ve(pe,he,xe,yl(je),Re);if(je.$$typeof===T)return ve(pe,he,xe,sl(he,je),Re);bl(he,je)}return null}function He(pe,he,xe,je){for(var Re=null,Ke=null,Fe=he,Ve=he=0,It=null;Fe!==null&&Ve<xe.length;Ve++){Fe.index>Ve?(It=Fe,Fe=null):It=Fe.sibling;var nt=be(pe,Fe,xe[Ve],je);if(nt===null){Fe===null&&(Fe=It);break}n&&Fe&&nt.alternate===null&&i(pe,Fe),he=_(nt,he,Ve),Ke===null?Re=nt:Ke.sibling=nt,Ke=nt,Fe=It}if(Ve===xe.length)return d(pe,Fe),it&&gr(pe,Ve),Re;if(Fe===null){for(;Ve<xe.length;Ve++)Fe=_e(pe,xe[Ve],je),Fe!==null&&(he=_(Fe,he,Ve),Ke===null?Re=Fe:Ke.sibling=Fe,Ke=Fe);return it&&gr(pe,Ve),Re}for(Fe=b(Fe);Ve<xe.length;Ve++)It=ve(Fe,pe,Ve,xe[Ve],je),It!==null&&(n&&It.alternate!==null&&Fe.delete(It.key===null?Ve:It.key),he=_(It,he,Ve),Ke===null?Re=It:Ke.sibling=It,Ke=It);return n&&Fe.forEach(function(Qi){return i(pe,Qi)}),it&&gr(pe,Ve),Re}function Be(pe,he,xe,je){if(xe==null)throw Error(o(151));for(var Re=null,Ke=null,Fe=he,Ve=he=0,It=null,nt=xe.next();Fe!==null&&!nt.done;Ve++,nt=xe.next()){Fe.index>Ve?(It=Fe,Fe=null):It=Fe.sibling;var Qi=be(pe,Fe,nt.value,je);if(Qi===null){Fe===null&&(Fe=It);break}n&&Fe&&Qi.alternate===null&&i(pe,Fe),he=_(Qi,he,Ve),Ke===null?Re=Qi:Ke.sibling=Qi,Ke=Qi,Fe=It}if(nt.done)return d(pe,Fe),it&&gr(pe,Ve),Re;if(Fe===null){for(;!nt.done;Ve++,nt=xe.next())nt=_e(pe,nt.value,je),nt!==null&&(he=_(nt,he,Ve),Ke===null?Re=nt:Ke.sibling=nt,Ke=nt);return it&&gr(pe,Ve),Re}for(Fe=b(Fe);!nt.done;Ve++,nt=xe.next())nt=ve(Fe,pe,Ve,nt.value,je),nt!==null&&(n&&nt.alternate!==null&&Fe.delete(nt.key===null?Ve:nt.key),he=_(nt,he,Ve),Ke===null?Re=nt:Ke.sibling=nt,Ke=nt);return n&&Fe.forEach(function(d2){return i(pe,d2)}),it&&gr(pe,Ve),Re}function lt(pe,he,xe,je){if(typeof xe=="object"&&xe!==null&&xe.type===m&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:e:{for(var Re=xe.key;he!==null;){if(he.key===Re){if(Re=xe.type,Re===m){if(he.tag===7){d(pe,he.sibling),je=k(he,xe.props.children),je.return=pe,pe=je;break e}}else if(he.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===A&&Cp(Re)===he.type){d(pe,he.sibling),je=k(he,xe.props),Sa(je,xe),je.return=pe,pe=je;break e}d(pe,he);break}else i(pe,he);he=he.sibling}xe.type===m?(je=fr(xe.props.children,pe.mode,je,xe.key),je.return=pe,pe=je):(je=tl(xe.type,xe.key,xe.props,null,pe.mode,je),Sa(je,xe),je.return=pe,pe=je)}return P(pe);case c:e:{for(Re=xe.key;he!==null;){if(he.key===Re)if(he.tag===4&&he.stateNode.containerInfo===xe.containerInfo&&he.stateNode.implementation===xe.implementation){d(pe,he.sibling),je=k(he,xe.children||[]),je.return=pe,pe=je;break e}else{d(pe,he);break}else i(pe,he);he=he.sibling}je=Tu(xe,pe.mode,je),je.return=pe,pe=je}return P(pe);case A:return Re=xe._init,xe=Re(xe._payload),lt(pe,he,xe,je)}if(G(xe))return He(pe,he,xe,je);if(Z(xe)){if(Re=Z(xe),typeof Re!="function")throw Error(o(150));return xe=Re.call(xe),Be(pe,he,xe,je)}if(typeof xe.then=="function")return lt(pe,he,yl(xe),je);if(xe.$$typeof===T)return lt(pe,he,sl(pe,xe),je);bl(pe,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,he!==null&&he.tag===6?(d(pe,he.sibling),je=k(he,xe),je.return=pe,pe=je):(d(pe,he),je=ku(xe,pe.mode,je),je.return=pe,pe=je),P(pe)):d(pe,he)}return function(pe,he,xe,je){try{wa=0;var Re=lt(pe,he,xe,je);return ds=null,Re}catch(Fe){if(Fe===ha||Fe===ol)throw Fe;var Ke=fn(29,Fe,null,pe.mode);return Ke.lanes=je,Ke.return=pe,Ke}finally{}}}var hs=kp(!0),Tp=kp(!1),_n=L(null),Yn=null;function Fi(n){var i=n.alternate;K(Ot,Ot.current&1),K(_n,n),Yn===null&&(i===null||os.current!==null||i.memoizedState!==null)&&(Yn=n)}function jp(n){if(n.tag===22){if(K(Ot,Ot.current),K(_n,n),Yn===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Yn=n)}}else zi()}function zi(){K(Ot,Ot.current),K(_n,_n.current)}function mi(n){B(_n),Yn===n&&(Yn=null),B(Ot)}var Ot=L(0);function vl(n){for(var i=n;i!==null;){if(i.tag===13){var d=i.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Gd(d)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function rd(n,i,d,b){i=n.memoizedState,d=d(b,i),d=d==null?i:h({},i,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var sd={enqueueSetState:function(n,i,d){n=n._reactInternals;var b=xn(),k=Ri(b);k.payload=i,d!=null&&(k.callback=d),i=Pi(n,k,b),i!==null&&(yn(i,n,b),ma(i,n,b))},enqueueReplaceState:function(n,i,d){n=n._reactInternals;var b=xn(),k=Ri(b);k.tag=1,k.payload=i,d!=null&&(k.callback=d),i=Pi(n,k,b),i!==null&&(yn(i,n,b),ma(i,n,b))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var d=xn(),b=Ri(d);b.tag=2,i!=null&&(b.callback=i),i=Pi(n,b,d),i!==null&&(yn(i,n,d),ma(i,n,d))}};function _p(n,i,d,b,k,_,P){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(b,_,P):i.prototype&&i.prototype.isPureReactComponent?!ra(d,b)||!ra(k,_):!0}function Np(n,i,d,b){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(d,b),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(d,b),i.state!==n&&sd.enqueueReplaceState(i,i.state,null)}function Sr(n,i){var d=i;if("ref"in i){d={};for(var b in i)b!=="ref"&&(d[b]=i[b])}if(n=n.defaultProps){d===i&&(d=h({},d));for(var k in n)d[k]===void 0&&(d[k]=n[k])}return d}var wl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ep(n){wl(n)}function Mp(n){console.error(n)}function Op(n){wl(n)}function Sl(n,i){try{var d=n.onUncaughtError;d(i.value,{componentStack:i.stack})}catch(b){setTimeout(function(){throw b})}}function Dp(n,i,d){try{var b=n.onCaughtError;b(d.value,{componentStack:d.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function ad(n,i,d){return d=Ri(d),d.tag=3,d.payload={element:null},d.callback=function(){Sl(n,i)},d}function Ap(n){return n=Ri(n),n.tag=3,n}function Rp(n,i,d,b){var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var _=b.value;n.payload=function(){return k(_)},n.callback=function(){Dp(i,d,b)}}var P=d.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(n.callback=function(){Dp(i,d,b),typeof k!="function"&&($i===null?$i=new Set([this]):$i.add(this));var U=b.stack;this.componentDidCatch(b.value,{componentStack:U!==null?U:""})})}function dC(n,i,d,b,k){if(d.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(i=d.alternate,i!==null&&ca(i,d,k,!0),d=_n.current,d!==null){switch(d.tag){case 13:return Yn===null?Md():d.alternate===null&&xt===0&&(xt=3),d.flags&=-257,d.flags|=65536,d.lanes=k,b===Pu?d.flags|=16384:(i=d.updateQueue,i===null?d.updateQueue=new Set([b]):i.add(b),Dd(n,b,k)),!1;case 22:return d.flags|=65536,b===Pu?d.flags|=16384:(i=d.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([b])},d.updateQueue=i):(d=i.retryQueue,d===null?i.retryQueue=new Set([b]):d.add(b)),Dd(n,b,k)),!1}throw Error(o(435,d.tag))}return Dd(n,b,k),Md(),!1}if(it)return i=_n.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=k,b!==Nu&&(n=Error(o(422),{cause:b}),la(Cn(n,d)))):(b!==Nu&&(i=Error(o(423),{cause:b}),la(Cn(i,d))),n=n.current.alternate,n.flags|=65536,k&=-k,n.lanes|=k,b=Cn(b,d),k=ad(n.stateNode,b,k),zu(n,k),xt!==4&&(xt=2)),!1;var _=Error(o(520),{cause:b});if(_=Cn(_,d),Ea===null?Ea=[_]:Ea.push(_),xt!==4&&(xt=2),i===null)return!0;b=Cn(b,d),d=i;do{switch(d.tag){case 3:return d.flags|=65536,n=k&-k,d.lanes|=n,n=ad(d.stateNode,b,n),zu(d,n),!1;case 1:if(i=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($i===null||!$i.has(_))))return d.flags|=65536,k&=-k,d.lanes|=k,k=Ap(k),Rp(k,n,d,b),zu(d,k),!1}d=d.return}while(d!==null);return!1}var Pp=Error(o(461)),Ft=!1;function Vt(n,i,d,b){i.child=n===null?Tp(i,null,d,b):hs(i,n.child,d,b)}function Lp(n,i,d,b,k){d=d.render;var _=i.ref;if("ref"in b){var P={};for(var U in b)U!=="ref"&&(P[U]=b[U])}else P=b;return br(i),b=Hu(n,i,d,P,_,k),U=$u(),n!==null&&!Ft?(Xu(n,i,k),gi(n,i,k)):(it&&U&&ju(i),i.flags|=1,Vt(n,i,b,k),i.child)}function Fp(n,i,d,b,k){if(n===null){var _=d.type;return typeof _=="function"&&!Cu(_)&&_.defaultProps===void 0&&d.compare===null?(i.tag=15,i.type=_,zp(n,i,_,b,k)):(n=tl(d.type,null,b,i,i.mode,k),n.ref=i.ref,n.return=i,i.child=n)}if(_=n.child,!md(n,k)){var P=_.memoizedProps;if(d=d.compare,d=d!==null?d:ra,d(P,b)&&n.ref===i.ref)return gi(n,i,k)}return i.flags|=1,n=li(_,b),n.ref=i.ref,n.return=i,i.child=n}function zp(n,i,d,b,k){if(n!==null){var _=n.memoizedProps;if(ra(_,b)&&n.ref===i.ref)if(Ft=!1,i.pendingProps=b=_,md(n,k))(n.flags&131072)!==0&&(Ft=!0);else return i.lanes=n.lanes,gi(n,i,k)}return od(n,i,d,b,k)}function Ip(n,i,d){var b=i.pendingProps,k=b.children,_=n!==null?n.memoizedState:null;if(b.mode==="hidden"){if((i.flags&128)!==0){if(b=_!==null?_.baseLanes|d:d,n!==null){for(k=i.child=n.child,_=0;k!==null;)_=_|k.lanes|k.childLanes,k=k.sibling;i.childLanes=_&~b}else i.childLanes=0,i.child=null;return Bp(n,i,b,d)}if((d&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&al(i,_!==null?_.cachePool:null),_!==null?zg(i,_):Bu(),jp(i);else return i.lanes=i.childLanes=536870912,Bp(n,i,_!==null?_.baseLanes|d:d,d)}else _!==null?(al(i,_.cachePool),zg(i,_),zi(),i.memoizedState=null):(n!==null&&al(i,null),Bu(),zi());return Vt(n,i,k,d),i.child}function Bp(n,i,d,b){var k=Ru();return k=k===null?null:{parent:Mt._currentValue,pool:k},i.memoizedState={baseLanes:d,cachePool:k},n!==null&&al(i,null),Bu(),jp(i),n!==null&&ca(n,i,b,!0),null}function Cl(n,i){var d=i.ref;if(d===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(o(284));(n===null||n.ref!==d)&&(i.flags|=4194816)}}function od(n,i,d,b,k){return br(i),d=Hu(n,i,d,b,void 0,k),b=$u(),n!==null&&!Ft?(Xu(n,i,k),gi(n,i,k)):(it&&b&&ju(i),i.flags|=1,Vt(n,i,d,k),i.child)}function Vp(n,i,d,b,k,_){return br(i),i.updateQueue=null,d=Bg(i,b,d,k),Ig(n),b=$u(),n!==null&&!Ft?(Xu(n,i,_),gi(n,i,_)):(it&&b&&ju(i),i.flags|=1,Vt(n,i,d,_),i.child)}function Up(n,i,d,b,k){if(br(i),i.stateNode===null){var _=ns,P=d.contextType;typeof P=="object"&&P!==null&&(_=Wt(P)),_=new d(b,_),i.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=sd,i.stateNode=_,_._reactInternals=i,_=i.stateNode,_.props=b,_.state=i.memoizedState,_.refs={},Lu(i),P=d.contextType,_.context=typeof P=="object"&&P!==null?Wt(P):ns,_.state=i.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(rd(i,d,P,b),_.state=i.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&sd.enqueueReplaceState(_,_.state,null),pa(i,b,_,k),ga(),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308),b=!0}else if(n===null){_=i.stateNode;var U=i.memoizedProps,se=Sr(d,U);_.props=se;var ye=_.context,Te=d.contextType;P=ns,typeof Te=="object"&&Te!==null&&(P=Wt(Te));var _e=d.getDerivedStateFromProps;Te=typeof _e=="function"||typeof _.getSnapshotBeforeUpdate=="function",U=i.pendingProps!==U,Te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U||ye!==P)&&Np(i,_,b,P),Ai=!1;var be=i.memoizedState;_.state=be,pa(i,b,_,k),ga(),ye=i.memoizedState,U||be!==ye||Ai?(typeof _e=="function"&&(rd(i,d,_e,b),ye=i.memoizedState),(se=Ai||_p(i,d,se,b,be,ye,P))?(Te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=b,i.memoizedState=ye),_.props=b,_.state=ye,_.context=P,b=se):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),b=!1)}else{_=i.stateNode,Fu(n,i),P=i.memoizedProps,Te=Sr(d,P),_.props=Te,_e=i.pendingProps,be=_.context,ye=d.contextType,se=ns,typeof ye=="object"&&ye!==null&&(se=Wt(ye)),U=d.getDerivedStateFromProps,(ye=typeof U=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==_e||be!==se)&&Np(i,_,b,se),Ai=!1,be=i.memoizedState,_.state=be,pa(i,b,_,k),ga();var ve=i.memoizedState;P!==_e||be!==ve||Ai||n!==null&&n.dependencies!==null&&rl(n.dependencies)?(typeof U=="function"&&(rd(i,d,U,b),ve=i.memoizedState),(Te=Ai||_p(i,d,Te,b,be,ve,se)||n!==null&&n.dependencies!==null&&rl(n.dependencies))?(ye||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(b,ve,se),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(b,ve,se)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&be===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&be===n.memoizedState||(i.flags|=1024),i.memoizedProps=b,i.memoizedState=ve),_.props=b,_.state=ve,_.context=se,b=Te):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&be===n.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&be===n.memoizedState||(i.flags|=1024),b=!1)}return _=b,Cl(n,i),b=(i.flags&128)!==0,_||b?(_=i.stateNode,d=b&&typeof d.getDerivedStateFromError!="function"?null:_.render(),i.flags|=1,n!==null&&b?(i.child=hs(i,n.child,null,k),i.child=hs(i,null,d,k)):Vt(n,i,d,k),i.memoizedState=_.state,n=i.child):n=gi(n,i,k),n}function Hp(n,i,d,b){return oa(),i.flags|=256,Vt(n,i,d,b),i.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cd(n){return{baseLanes:n,cachePool:Mg()}}function ud(n,i,d){return n=n!==null?n.childLanes&~d:0,i&&(n|=Nn),n}function $p(n,i,d){var b=i.pendingProps,k=!1,_=(i.flags&128)!==0,P;if((P=_)||(P=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),P&&(k=!0,i.flags&=-129),P=(i.flags&32)!==0,i.flags&=-33,n===null){if(it){if(k?Fi(i):zi(),it){var U=pt,se;if(se=U){e:{for(se=U,U=Xn;se.nodeType!==8;){if(!U){U=null;break e}if(se=zn(se.nextSibling),se===null){U=null;break e}}U=se}U!==null?(i.memoizedState={dehydrated:U,treeContext:mr!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},se=fn(18,null,null,0),se.stateNode=U,se.return=i,i.child=se,Jt=i,pt=null,se=!0):se=!1}se||xr(i)}if(U=i.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return Gd(U)?i.lanes=32:i.lanes=536870912,null;mi(i)}return U=b.children,b=b.fallback,k?(zi(),k=i.mode,U=kl({mode:"hidden",children:U},k),b=fr(b,k,d,null),U.return=i,b.return=i,U.sibling=b,i.child=U,k=i.child,k.memoizedState=cd(d),k.childLanes=ud(n,P,d),i.memoizedState=ld,b):(Fi(i),dd(i,U))}if(se=n.memoizedState,se!==null&&(U=se.dehydrated,U!==null)){if(_)i.flags&256?(Fi(i),i.flags&=-257,i=hd(n,i,d)):i.memoizedState!==null?(zi(),i.child=n.child,i.flags|=128,i=null):(zi(),k=b.fallback,U=i.mode,b=kl({mode:"visible",children:b.children},U),k=fr(k,U,d,null),k.flags|=2,b.return=i,k.return=i,b.sibling=k,i.child=b,hs(i,n.child,null,d),b=i.child,b.memoizedState=cd(d),b.childLanes=ud(n,P,d),i.memoizedState=ld,i=k);else if(Fi(i),Gd(U)){if(P=U.nextSibling&&U.nextSibling.dataset,P)var ye=P.dgst;P=ye,b=Error(o(419)),b.stack="",b.digest=P,la({value:b,source:null,stack:null}),i=hd(n,i,d)}else if(Ft||ca(n,i,d,!1),P=(d&n.childLanes)!==0,Ft||P){if(P=ut,P!==null&&(b=d&-d,b=(b&42)!==0?1:qc(b),b=(b&(P.suspendedLanes|d))!==0?0:b,b!==0&&b!==se.retryLane))throw se.retryLane=b,ts(n,b),yn(P,n,b),Pp;U.data==="$?"||Md(),i=hd(n,i,d)}else U.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=se.treeContext,pt=zn(U.nextSibling),Jt=i,it=!0,pr=null,Xn=!1,n!==null&&(Tn[jn++]=ci,Tn[jn++]=ui,Tn[jn++]=mr,ci=n.id,ui=n.overflow,mr=i),i=dd(i,b.children),i.flags|=4096);return i}return k?(zi(),k=b.fallback,U=i.mode,se=n.child,ye=se.sibling,b=li(se,{mode:"hidden",children:b.children}),b.subtreeFlags=se.subtreeFlags&65011712,ye!==null?k=li(ye,k):(k=fr(k,U,d,null),k.flags|=2),k.return=i,b.return=i,b.sibling=k,i.child=b,b=k,k=i.child,U=n.child.memoizedState,U===null?U=cd(d):(se=U.cachePool,se!==null?(ye=Mt._currentValue,se=se.parent!==ye?{parent:ye,pool:ye}:se):se=Mg(),U={baseLanes:U.baseLanes|d,cachePool:se}),k.memoizedState=U,k.childLanes=ud(n,P,d),i.memoizedState=ld,b):(Fi(i),d=n.child,n=d.sibling,d=li(d,{mode:"visible",children:b.children}),d.return=i,d.sibling=null,n!==null&&(P=i.deletions,P===null?(i.deletions=[n],i.flags|=16):P.push(n)),i.child=d,i.memoizedState=null,d)}function dd(n,i){return i=kl({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function kl(n,i){return n=fn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function hd(n,i,d){return hs(i,n.child,null,d),n=dd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Xp(n,i,d){n.lanes|=i;var b=n.alternate;b!==null&&(b.lanes|=i),Mu(n.return,i,d)}function fd(n,i,d,b,k){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:b,tail:d,tailMode:k}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=b,_.tail=d,_.tailMode=k)}function Yp(n,i,d){var b=i.pendingProps,k=b.revealOrder,_=b.tail;if(Vt(n,i,b.children,d),b=Ot.current,(b&2)!==0)b=b&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Xp(n,d,i);else if(n.tag===19)Xp(n,d,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}b&=1}switch(K(Ot,b),k){case"forwards":for(d=i.child,k=null;d!==null;)n=d.alternate,n!==null&&vl(n)===null&&(k=d),d=d.sibling;d=k,d===null?(k=i.child,i.child=null):(k=d.sibling,d.sibling=null),fd(i,!1,k,d,_);break;case"backwards":for(d=null,k=i.child,i.child=null;k!==null;){if(n=k.alternate,n!==null&&vl(n)===null){i.child=k;break}n=k.sibling,k.sibling=d,d=k,k=n}fd(i,!0,d,null,_);break;case"together":fd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gi(n,i,d){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(d&i.childLanes)===0)if(n!==null){if(ca(n,i,d,!1),(d&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,d=li(n,n.pendingProps),i.child=d,d.return=i;n.sibling!==null;)n=n.sibling,d=d.sibling=li(n,n.pendingProps),d.return=i;d.sibling=null}return i.child}function md(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&rl(n)))}function hC(n,i,d){switch(i.tag){case 3:ue(i,i.stateNode.containerInfo),Di(i,Mt,n.memoizedState.cache),oa();break;case 27:case 5:ie(i);break;case 4:ue(i,i.stateNode.containerInfo);break;case 10:Di(i,i.type,i.memoizedProps.value);break;case 13:var b=i.memoizedState;if(b!==null)return b.dehydrated!==null?(Fi(i),i.flags|=128,null):(d&i.child.childLanes)!==0?$p(n,i,d):(Fi(i),n=gi(n,i,d),n!==null?n.sibling:null);Fi(i);break;case 19:var k=(n.flags&128)!==0;if(b=(d&i.childLanes)!==0,b||(ca(n,i,d,!1),b=(d&i.childLanes)!==0),k){if(b)return Yp(n,i,d);i.flags|=128}if(k=i.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),K(Ot,Ot.current),b)break;return null;case 22:case 23:return i.lanes=0,Ip(n,i,d);case 24:Di(i,Mt,n.memoizedState.cache)}return gi(n,i,d)}function Gp(n,i,d){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ft=!0;else{if(!md(n,d)&&(i.flags&128)===0)return Ft=!1,hC(n,i,d);Ft=(n.flags&131072)!==0}else Ft=!1,it&&(i.flags&1048576)!==0&&Cg(i,il,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var b=i.elementType,k=b._init;if(b=k(b._payload),i.type=b,typeof b=="function")Cu(b)?(n=Sr(b,n),i.tag=1,i=Up(null,i,b,n,d)):(i.tag=0,i=od(null,i,b,n,d));else{if(b!=null){if(k=b.$$typeof,k===j){i.tag=11,i=Lp(null,i,b,n,d);break e}else if(k===D){i.tag=14,i=Fp(null,i,b,n,d);break e}}throw i=te(b)||b,Error(o(306,i,""))}}return i;case 0:return od(n,i,i.type,i.pendingProps,d);case 1:return b=i.type,k=Sr(b,i.pendingProps),Up(n,i,b,k,d);case 3:e:{if(ue(i,i.stateNode.containerInfo),n===null)throw Error(o(387));b=i.pendingProps;var _=i.memoizedState;k=_.element,Fu(n,i),pa(i,b,null,d);var P=i.memoizedState;if(b=P.cache,Di(i,Mt,b),b!==_.cache&&Ou(i,[Mt],d,!0),ga(),b=P.element,_.isDehydrated)if(_={element:b,isDehydrated:!1,cache:P.cache},i.updateQueue.baseState=_,i.memoizedState=_,i.flags&256){i=Hp(n,i,b,d);break e}else if(b!==k){k=Cn(Error(o(424)),i),la(k),i=Hp(n,i,b,d);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=zn(n.firstChild),Jt=i,it=!0,pr=null,Xn=!0,d=Tp(i,null,b,d),i.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(oa(),b===k){i=gi(n,i,d);break e}Vt(n,i,b,d)}i=i.child}return i;case 26:return Cl(n,i),n===null?(d=Zx(i.type,null,i.pendingProps,null))?i.memoizedState=d:it||(d=i.type,n=i.pendingProps,b=zl(J.current).createElement(d),b[qt]=i,b[sn]=n,Ht(b,d,n),Lt(b),i.stateNode=b):i.memoizedState=Zx(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ie(i),n===null&&it&&(b=i.stateNode=qx(i.type,i.pendingProps,J.current),Jt=i,Xn=!0,k=pt,Gi(i.type)?(qd=k,pt=zn(b.firstChild)):pt=k),Vt(n,i,i.pendingProps.children,d),Cl(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&it&&((k=b=pt)&&(b=BC(b,i.type,i.pendingProps,Xn),b!==null?(i.stateNode=b,Jt=i,pt=zn(b.firstChild),Xn=!1,k=!0):k=!1),k||xr(i)),ie(i),k=i.type,_=i.pendingProps,P=n!==null?n.memoizedProps:null,b=_.children,$d(k,_)?b=null:P!==null&&$d(k,P)&&(i.flags|=32),i.memoizedState!==null&&(k=Hu(n,i,rC,null,null,d),za._currentValue=k),Cl(n,i),Vt(n,i,b,d),i.child;case 6:return n===null&&it&&((n=d=pt)&&(d=VC(d,i.pendingProps,Xn),d!==null?(i.stateNode=d,Jt=i,pt=null,n=!0):n=!1),n||xr(i)),null;case 13:return $p(n,i,d);case 4:return ue(i,i.stateNode.containerInfo),b=i.pendingProps,n===null?i.child=hs(i,null,b,d):Vt(n,i,b,d),i.child;case 11:return Lp(n,i,i.type,i.pendingProps,d);case 7:return Vt(n,i,i.pendingProps,d),i.child;case 8:return Vt(n,i,i.pendingProps.children,d),i.child;case 12:return Vt(n,i,i.pendingProps.children,d),i.child;case 10:return b=i.pendingProps,Di(i,i.type,b.value),Vt(n,i,b.children,d),i.child;case 9:return k=i.type._context,b=i.pendingProps.children,br(i),k=Wt(k),b=b(k),i.flags|=1,Vt(n,i,b,d),i.child;case 14:return Fp(n,i,i.type,i.pendingProps,d);case 15:return zp(n,i,i.type,i.pendingProps,d);case 19:return Yp(n,i,d);case 31:return b=i.pendingProps,d=i.mode,b={mode:b.mode,children:b.children},n===null?(d=kl(b,d),d.ref=i.ref,i.child=d,d.return=i,i=d):(d=li(n.child,b),d.ref=i.ref,i.child=d,d.return=i,i=d),i;case 22:return Ip(n,i,d);case 24:return br(i),b=Wt(Mt),n===null?(k=Ru(),k===null&&(k=ut,_=Du(),k.pooledCache=_,_.refCount++,_!==null&&(k.pooledCacheLanes|=d),k=_),i.memoizedState={parent:b,cache:k},Lu(i),Di(i,Mt,k)):((n.lanes&d)!==0&&(Fu(n,i),pa(i,null,null,d),ga()),k=n.memoizedState,_=i.memoizedState,k.parent!==b?(k={parent:b,cache:b},i.memoizedState=k,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=k),Di(i,Mt,b)):(b=_.cache,Di(i,Mt,b),b!==k.cache&&Ou(i,[Mt],d,!0))),Vt(n,i,i.pendingProps.children,d),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function pi(n){n.flags|=4}function qp(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!n0(i)){if(i=_n.current,i!==null&&((et&4194048)===et?Yn!==null:(et&62914560)!==et&&(et&536870912)===0||i!==Yn))throw fa=Pu,Og;n.flags|=8192}}function Tl(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?jm():536870912,n.lanes|=i,ps|=i)}function Ca(n,i){if(!it)switch(n.tailMode){case"hidden":i=n.tail;for(var d=null;i!==null;)i.alternate!==null&&(d=i),i=i.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:b.sibling=null}}function mt(n){var i=n.alternate!==null&&n.alternate.child===n.child,d=0,b=0;if(i)for(var k=n.child;k!==null;)d|=k.lanes|k.childLanes,b|=k.subtreeFlags&65011712,b|=k.flags&65011712,k.return=n,k=k.sibling;else for(k=n.child;k!==null;)d|=k.lanes|k.childLanes,b|=k.subtreeFlags,b|=k.flags,k.return=n,k=k.sibling;return n.subtreeFlags|=b,n.childLanes=d,i}function fC(n,i,d){var b=i.pendingProps;switch(_u(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(i),null;case 1:return mt(i),null;case 3:return d=i.stateNode,b=null,n!==null&&(b=n.memoizedState.cache),i.memoizedState.cache!==b&&(i.flags|=2048),hi(Mt),ce(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(aa(i)?pi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,jg())),mt(i),null;case 26:return d=i.memoizedState,n===null?(pi(i),d!==null?(mt(i),qp(i,d)):(mt(i),i.flags&=-16777217)):d?d!==n.memoizedState?(pi(i),mt(i),qp(i,d)):(mt(i),i.flags&=-16777217):(n.memoizedProps!==b&&pi(i),mt(i),i.flags&=-16777217),null;case 27:Q(i),d=J.current;var k=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==b&&pi(i);else{if(!b){if(i.stateNode===null)throw Error(o(166));return mt(i),null}n=V.current,aa(i)?kg(i):(n=qx(k,b,d),i.stateNode=n,pi(i))}return mt(i),null;case 5:if(Q(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==b&&pi(i);else{if(!b){if(i.stateNode===null)throw Error(o(166));return mt(i),null}if(n=V.current,aa(i))kg(i);else{switch(k=zl(J.current),n){case 1:n=k.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:n=k.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":n=k.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":n=k.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":n=k.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof b.is=="string"?k.createElement("select",{is:b.is}):k.createElement("select"),b.multiple?n.multiple=!0:b.size&&(n.size=b.size);break;default:n=typeof b.is=="string"?k.createElement(d,{is:b.is}):k.createElement(d)}}n[qt]=i,n[sn]=b;e:for(k=i.child;k!==null;){if(k.tag===5||k.tag===6)n.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===i)break e;for(;k.sibling===null;){if(k.return===null||k.return===i)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}i.stateNode=n;e:switch(Ht(n,d,b),d){case"button":case"input":case"select":case"textarea":n=!!b.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&pi(i)}}return mt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==b&&pi(i);else{if(typeof b!="string"&&i.stateNode===null)throw Error(o(166));if(n=J.current,aa(i)){if(n=i.stateNode,d=i.memoizedProps,b=null,k=Jt,k!==null)switch(k.tag){case 27:case 5:b=k.memoizedProps}n[qt]=i,n=!!(n.nodeValue===d||b!==null&&b.suppressHydrationWarning===!0||Vx(n.nodeValue,d)),n||xr(i)}else n=zl(n).createTextNode(b),n[qt]=i,i.stateNode=n}return mt(i),null;case 13:if(b=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(k=aa(i),b!==null&&b.dehydrated!==null){if(n===null){if(!k)throw Error(o(318));if(k=i.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(o(317));k[qt]=i}else oa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;mt(i),k=!1}else k=jg(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=k),k=!0;if(!k)return i.flags&256?(mi(i),i):(mi(i),null)}if(mi(i),(i.flags&128)!==0)return i.lanes=d,i;if(d=b!==null,n=n!==null&&n.memoizedState!==null,d){b=i.child,k=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(k=b.alternate.memoizedState.cachePool.pool);var _=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(_=b.memoizedState.cachePool.pool),_!==k&&(b.flags|=2048)}return d!==n&&d&&(i.child.flags|=8192),Tl(i,i.updateQueue),mt(i),null;case 4:return ce(),n===null&&Id(i.stateNode.containerInfo),mt(i),null;case 10:return hi(i.type),mt(i),null;case 19:if(B(Ot),k=i.memoizedState,k===null)return mt(i),null;if(b=(i.flags&128)!==0,_=k.rendering,_===null)if(b)Ca(k,!1);else{if(xt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(_=vl(n),_!==null){for(i.flags|=128,Ca(k,!1),n=_.updateQueue,i.updateQueue=n,Tl(i,n),i.subtreeFlags=0,n=d,d=i.child;d!==null;)Sg(d,n),d=d.sibling;return K(Ot,Ot.current&1|2),i.child}n=n.sibling}k.tail!==null&&de()>Nl&&(i.flags|=128,b=!0,Ca(k,!1),i.lanes=4194304)}else{if(!b)if(n=vl(_),n!==null){if(i.flags|=128,b=!0,n=n.updateQueue,i.updateQueue=n,Tl(i,n),Ca(k,!0),k.tail===null&&k.tailMode==="hidden"&&!_.alternate&&!it)return mt(i),null}else 2*de()-k.renderingStartTime>Nl&&d!==536870912&&(i.flags|=128,b=!0,Ca(k,!1),i.lanes=4194304);k.isBackwards?(_.sibling=i.child,i.child=_):(n=k.last,n!==null?n.sibling=_:i.child=_,k.last=_)}return k.tail!==null?(i=k.tail,k.rendering=i,k.tail=i.sibling,k.renderingStartTime=de(),i.sibling=null,n=Ot.current,K(Ot,b?n&1|2:n&1),i):(mt(i),null);case 22:case 23:return mi(i),Vu(),b=i.memoizedState!==null,n!==null?n.memoizedState!==null!==b&&(i.flags|=8192):b&&(i.flags|=8192),b?(d&536870912)!==0&&(i.flags&128)===0&&(mt(i),i.subtreeFlags&6&&(i.flags|=8192)):mt(i),d=i.updateQueue,d!==null&&Tl(i,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),b=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(b=i.memoizedState.cachePool.pool),b!==d&&(i.flags|=2048),n!==null&&B(vr),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),hi(Mt),mt(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function mC(n,i){switch(_u(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return hi(Mt),ce(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Q(i),null;case 13:if(mi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));oa()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return B(Ot),null;case 4:return ce(),null;case 10:return hi(i.type),null;case 22:case 23:return mi(i),Vu(),n!==null&&B(vr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return hi(Mt),null;case 25:return null;default:return null}}function Wp(n,i){switch(_u(i),i.tag){case 3:hi(Mt),ce();break;case 26:case 27:case 5:Q(i);break;case 4:ce();break;case 13:mi(i);break;case 19:B(Ot);break;case 10:hi(i.type);break;case 22:case 23:mi(i),Vu(),n!==null&&B(vr);break;case 24:hi(Mt)}}function ka(n,i){try{var d=i.updateQueue,b=d!==null?d.lastEffect:null;if(b!==null){var k=b.next;d=k;do{if((d.tag&n)===n){b=void 0;var _=d.create,P=d.inst;b=_(),P.destroy=b}d=d.next}while(d!==k)}}catch(U){ct(i,i.return,U)}}function Ii(n,i,d){try{var b=i.updateQueue,k=b!==null?b.lastEffect:null;if(k!==null){var _=k.next;b=_;do{if((b.tag&n)===n){var P=b.inst,U=P.destroy;if(U!==void 0){P.destroy=void 0,k=i;var se=d,ye=U;try{ye()}catch(Te){ct(k,se,Te)}}}b=b.next}while(b!==_)}}catch(Te){ct(i,i.return,Te)}}function Kp(n){var i=n.updateQueue;if(i!==null){var d=n.stateNode;try{Fg(i,d)}catch(b){ct(n,n.return,b)}}}function Zp(n,i,d){d.props=Sr(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(b){ct(n,i,b)}}function Ta(n,i){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var b=n.stateNode;break;case 30:b=n.stateNode;break;default:b=n.stateNode}typeof d=="function"?n.refCleanup=d(b):d.current=b}}catch(k){ct(n,i,k)}}function Gn(n,i){var d=n.ref,b=n.refCleanup;if(d!==null)if(typeof b=="function")try{b()}catch(k){ct(n,i,k)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(k){ct(n,i,k)}else d.current=null}function Qp(n){var i=n.type,d=n.memoizedProps,b=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":d.autoFocus&&b.focus();break e;case"img":d.src?b.src=d.src:d.srcSet&&(b.srcset=d.srcSet)}}catch(k){ct(n,n.return,k)}}function gd(n,i,d){try{var b=n.stateNode;PC(b,n.type,d,i),b[sn]=i}catch(k){ct(n,n.return,k)}}function Jp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gi(n.type)||n.tag===4}function pd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xd(n,i,d){var b=n.tag;if(b===5||b===6)n=n.stateNode,i?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,i):(i=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,i.appendChild(n),d=d._reactRootContainer,d!=null||i.onclick!==null||(i.onclick=Fl));else if(b!==4&&(b===27&&Gi(n.type)&&(d=n.stateNode,i=null),n=n.child,n!==null))for(xd(n,i,d),n=n.sibling;n!==null;)xd(n,i,d),n=n.sibling}function jl(n,i,d){var b=n.tag;if(b===5||b===6)n=n.stateNode,i?d.insertBefore(n,i):d.appendChild(n);else if(b!==4&&(b===27&&Gi(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(jl(n,i,d),n=n.sibling;n!==null;)jl(n,i,d),n=n.sibling}function ex(n){var i=n.stateNode,d=n.memoizedProps;try{for(var b=n.type,k=i.attributes;k.length;)i.removeAttributeNode(k[0]);Ht(i,b,d),i[qt]=n,i[sn]=d}catch(_){ct(n,n.return,_)}}var xi=!1,wt=!1,yd=!1,tx=typeof WeakSet=="function"?WeakSet:Set,zt=null;function gC(n,i){if(n=n.containerInfo,Ud=$l,n=hg(n),pu(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var b=d.getSelection&&d.getSelection();if(b&&b.rangeCount!==0){d=b.anchorNode;var k=b.anchorOffset,_=b.focusNode;b=b.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var P=0,U=-1,se=-1,ye=0,Te=0,_e=n,be=null;t:for(;;){for(var ve;_e!==d||k!==0&&_e.nodeType!==3||(U=P+k),_e!==_||b!==0&&_e.nodeType!==3||(se=P+b),_e.nodeType===3&&(P+=_e.nodeValue.length),(ve=_e.firstChild)!==null;)be=_e,_e=ve;for(;;){if(_e===n)break t;if(be===d&&++ye===k&&(U=P),be===_&&++Te===b&&(se=P),(ve=_e.nextSibling)!==null)break;_e=be,be=_e.parentNode}_e=ve}d=U===-1||se===-1?null:{start:U,end:se}}else d=null}d=d||{start:0,end:0}}else d=null;for(Hd={focusedElem:n,selectionRange:d},$l=!1,zt=i;zt!==null;)if(i=zt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,zt=n;else for(;zt!==null;){switch(i=zt,_=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&_!==null){n=void 0,d=i,k=_.memoizedProps,_=_.memoizedState,b=d.stateNode;try{var He=Sr(d.type,k,d.elementType===d.type);n=b.getSnapshotBeforeUpdate(He,_),b.__reactInternalSnapshotBeforeUpdate=n}catch(Be){ct(d,d.return,Be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,d=n.nodeType,d===9)Yd(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Yd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,zt=n;break}zt=i.return}}function nx(n,i,d){var b=d.flags;switch(d.tag){case 0:case 11:case 15:Bi(n,d),b&4&&ka(5,d);break;case 1:if(Bi(n,d),b&4)if(n=d.stateNode,i===null)try{n.componentDidMount()}catch(P){ct(d,d.return,P)}else{var k=Sr(d.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(k,i,n.__reactInternalSnapshotBeforeUpdate)}catch(P){ct(d,d.return,P)}}b&64&&Kp(d),b&512&&Ta(d,d.return);break;case 3:if(Bi(n,d),b&64&&(n=d.updateQueue,n!==null)){if(i=null,d.child!==null)switch(d.child.tag){case 27:case 5:i=d.child.stateNode;break;case 1:i=d.child.stateNode}try{Fg(n,i)}catch(P){ct(d,d.return,P)}}break;case 27:i===null&&b&4&&ex(d);case 26:case 5:Bi(n,d),i===null&&b&4&&Qp(d),b&512&&Ta(d,d.return);break;case 12:Bi(n,d);break;case 13:Bi(n,d),b&4&&sx(n,d),b&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=kC.bind(null,d),UC(n,d))));break;case 22:if(b=d.memoizedState!==null||xi,!b){i=i!==null&&i.memoizedState!==null||wt,k=xi;var _=wt;xi=b,(wt=i)&&!_?Vi(n,d,(d.subtreeFlags&8772)!==0):Bi(n,d),xi=k,wt=_}break;case 30:break;default:Bi(n,d)}}function ix(n){var i=n.alternate;i!==null&&(n.alternate=null,ix(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Zc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ht=null,ln=!1;function yi(n,i,d){for(d=d.child;d!==null;)rx(n,i,d),d=d.sibling}function rx(n,i,d){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Ne,d)}catch{}switch(d.tag){case 26:wt||Gn(d,i),yi(n,i,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:wt||Gn(d,i);var b=ht,k=ln;Gi(d.type)&&(ht=d.stateNode,ln=!1),yi(n,i,d),Ra(d.stateNode),ht=b,ln=k;break;case 5:wt||Gn(d,i);case 6:if(b=ht,k=ln,ht=null,yi(n,i,d),ht=b,ln=k,ht!==null)if(ln)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(d.stateNode)}catch(_){ct(d,i,_)}else try{ht.removeChild(d.stateNode)}catch(_){ct(d,i,_)}break;case 18:ht!==null&&(ln?(n=ht,Yx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),Ua(n)):Yx(ht,d.stateNode));break;case 4:b=ht,k=ln,ht=d.stateNode.containerInfo,ln=!0,yi(n,i,d),ht=b,ln=k;break;case 0:case 11:case 14:case 15:wt||Ii(2,d,i),wt||Ii(4,d,i),yi(n,i,d);break;case 1:wt||(Gn(d,i),b=d.stateNode,typeof b.componentWillUnmount=="function"&&Zp(d,i,b)),yi(n,i,d);break;case 21:yi(n,i,d);break;case 22:wt=(b=wt)||d.memoizedState!==null,yi(n,i,d),wt=b;break;default:yi(n,i,d)}}function sx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ua(n)}catch(d){ct(i,i.return,d)}}function pC(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new tx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new tx),i;default:throw Error(o(435,n.tag))}}function bd(n,i){var d=pC(n);i.forEach(function(b){var k=TC.bind(null,n,b);d.has(b)||(d.add(b),b.then(k,k))})}function mn(n,i){var d=i.deletions;if(d!==null)for(var b=0;b<d.length;b++){var k=d[b],_=n,P=i,U=P;e:for(;U!==null;){switch(U.tag){case 27:if(Gi(U.type)){ht=U.stateNode,ln=!1;break e}break;case 5:ht=U.stateNode,ln=!1;break e;case 3:case 4:ht=U.stateNode.containerInfo,ln=!0;break e}U=U.return}if(ht===null)throw Error(o(160));rx(_,P,k),ht=null,ln=!1,_=k.alternate,_!==null&&(_.return=null),k.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ax(i,n),i=i.sibling}var Fn=null;function ax(n,i){var d=n.alternate,b=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(i,n),gn(n),b&4&&(Ii(3,n,n.return),ka(3,n),Ii(5,n,n.return));break;case 1:mn(i,n),gn(n),b&512&&(wt||d===null||Gn(d,d.return)),b&64&&xi&&(n=n.updateQueue,n!==null&&(b=n.callbacks,b!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?b:d.concat(b))));break;case 26:var k=Fn;if(mn(i,n),gn(n),b&512&&(wt||d===null||Gn(d,d.return)),b&4){var _=d!==null?d.memoizedState:null;if(b=n.memoizedState,d===null)if(b===null)if(n.stateNode===null){e:{b=n.type,d=n.memoizedProps,k=k.ownerDocument||k;t:switch(b){case"title":_=k.getElementsByTagName("title")[0],(!_||_[Ws]||_[qt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=k.createElement(b),k.head.insertBefore(_,k.querySelector("head > title"))),Ht(_,b,d),_[qt]=n,Lt(_),b=_;break e;case"link":var P=e0("link","href",k).get(b+(d.href||""));if(P){for(var U=0;U<P.length;U++)if(_=P[U],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){P.splice(U,1);break t}}_=k.createElement(b),Ht(_,b,d),k.head.appendChild(_);break;case"meta":if(P=e0("meta","content",k).get(b+(d.content||""))){for(U=0;U<P.length;U++)if(_=P[U],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){P.splice(U,1);break t}}_=k.createElement(b),Ht(_,b,d),k.head.appendChild(_);break;default:throw Error(o(468,b))}_[qt]=n,Lt(_),b=_}n.stateNode=b}else t0(k,n.type,n.stateNode);else n.stateNode=Jx(k,b,n.memoizedProps);else _!==b?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,b===null?t0(k,n.type,n.stateNode):Jx(k,b,n.memoizedProps)):b===null&&n.stateNode!==null&&gd(n,n.memoizedProps,d.memoizedProps)}break;case 27:mn(i,n),gn(n),b&512&&(wt||d===null||Gn(d,d.return)),d!==null&&b&4&&gd(n,n.memoizedProps,d.memoizedProps);break;case 5:if(mn(i,n),gn(n),b&512&&(wt||d===null||Gn(d,d.return)),n.flags&32){k=n.stateNode;try{qr(k,"")}catch(ve){ct(n,n.return,ve)}}b&4&&n.stateNode!=null&&(k=n.memoizedProps,gd(n,k,d!==null?d.memoizedProps:k)),b&1024&&(yd=!0);break;case 6:if(mn(i,n),gn(n),b&4){if(n.stateNode===null)throw Error(o(162));b=n.memoizedProps,d=n.stateNode;try{d.nodeValue=b}catch(ve){ct(n,n.return,ve)}}break;case 3:if(Vl=null,k=Fn,Fn=Il(i.containerInfo),mn(i,n),Fn=k,gn(n),b&4&&d!==null&&d.memoizedState.isDehydrated)try{Ua(i.containerInfo)}catch(ve){ct(n,n.return,ve)}yd&&(yd=!1,ox(n));break;case 4:b=Fn,Fn=Il(n.stateNode.containerInfo),mn(i,n),gn(n),Fn=b;break;case 12:mn(i,n),gn(n);break;case 13:mn(i,n),gn(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Td=de()),b&4&&(b=n.updateQueue,b!==null&&(n.updateQueue=null,bd(n,b)));break;case 22:k=n.memoizedState!==null;var se=d!==null&&d.memoizedState!==null,ye=xi,Te=wt;if(xi=ye||k,wt=Te||se,mn(i,n),wt=Te,xi=ye,gn(n),b&8192)e:for(i=n.stateNode,i._visibility=k?i._visibility&-2:i._visibility|1,k&&(d===null||se||xi||wt||Cr(n)),d=null,i=n;;){if(i.tag===5||i.tag===26){if(d===null){se=d=i;try{if(_=se.stateNode,k)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{U=se.stateNode;var _e=se.memoizedProps.style,be=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;U.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(ve){ct(se,se.return,ve)}}}else if(i.tag===6){if(d===null){se=i;try{se.stateNode.nodeValue=k?"":se.memoizedProps}catch(ve){ct(se,se.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;d===i&&(d=null),i=i.return}d===i&&(d=null),i.sibling.return=i.return,i=i.sibling}b&4&&(b=n.updateQueue,b!==null&&(d=b.retryQueue,d!==null&&(b.retryQueue=null,bd(n,d))));break;case 19:mn(i,n),gn(n),b&4&&(b=n.updateQueue,b!==null&&(n.updateQueue=null,bd(n,b)));break;case 30:break;case 21:break;default:mn(i,n),gn(n)}}function gn(n){var i=n.flags;if(i&2){try{for(var d,b=n.return;b!==null;){if(Jp(b)){d=b;break}b=b.return}if(d==null)throw Error(o(160));switch(d.tag){case 27:var k=d.stateNode,_=pd(n);jl(n,_,k);break;case 5:var P=d.stateNode;d.flags&32&&(qr(P,""),d.flags&=-33);var U=pd(n);jl(n,U,P);break;case 3:case 4:var se=d.stateNode.containerInfo,ye=pd(n);xd(n,ye,se);break;default:throw Error(o(161))}}catch(Te){ct(n,n.return,Te)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function ox(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;ox(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Bi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)nx(n,i.alternate,i),i=i.sibling}function Cr(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ii(4,i,i.return),Cr(i);break;case 1:Gn(i,i.return);var d=i.stateNode;typeof d.componentWillUnmount=="function"&&Zp(i,i.return,d),Cr(i);break;case 27:Ra(i.stateNode);case 26:case 5:Gn(i,i.return),Cr(i);break;case 22:i.memoizedState===null&&Cr(i);break;case 30:Cr(i);break;default:Cr(i)}n=n.sibling}}function Vi(n,i,d){for(d=d&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var b=i.alternate,k=n,_=i,P=_.flags;switch(_.tag){case 0:case 11:case 15:Vi(k,_,d),ka(4,_);break;case 1:if(Vi(k,_,d),b=_,k=b.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(ye){ct(b,b.return,ye)}if(b=_,k=b.updateQueue,k!==null){var U=b.stateNode;try{var se=k.shared.hiddenCallbacks;if(se!==null)for(k.shared.hiddenCallbacks=null,k=0;k<se.length;k++)Lg(se[k],U)}catch(ye){ct(b,b.return,ye)}}d&&P&64&&Kp(_),Ta(_,_.return);break;case 27:ex(_);case 26:case 5:Vi(k,_,d),d&&b===null&&P&4&&Qp(_),Ta(_,_.return);break;case 12:Vi(k,_,d);break;case 13:Vi(k,_,d),d&&P&4&&sx(k,_);break;case 22:_.memoizedState===null&&Vi(k,_,d),Ta(_,_.return);break;case 30:break;default:Vi(k,_,d)}i=i.sibling}}function vd(n,i){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&ua(d))}function wd(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ua(n))}function qn(n,i,d,b){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)lx(n,i,d,b),i=i.sibling}function lx(n,i,d,b){var k=i.flags;switch(i.tag){case 0:case 11:case 15:qn(n,i,d,b),k&2048&&ka(9,i);break;case 1:qn(n,i,d,b);break;case 3:qn(n,i,d,b),k&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&ua(n)));break;case 12:if(k&2048){qn(n,i,d,b),n=i.stateNode;try{var _=i.memoizedProps,P=_.id,U=_.onPostCommit;typeof U=="function"&&U(P,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(se){ct(i,i.return,se)}}else qn(n,i,d,b);break;case 13:qn(n,i,d,b);break;case 23:break;case 22:_=i.stateNode,P=i.alternate,i.memoizedState!==null?_._visibility&2?qn(n,i,d,b):ja(n,i):_._visibility&2?qn(n,i,d,b):(_._visibility|=2,fs(n,i,d,b,(i.subtreeFlags&10256)!==0)),k&2048&&vd(P,i);break;case 24:qn(n,i,d,b),k&2048&&wd(i.alternate,i);break;default:qn(n,i,d,b)}}function fs(n,i,d,b,k){for(k=k&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var _=n,P=i,U=d,se=b,ye=P.flags;switch(P.tag){case 0:case 11:case 15:fs(_,P,U,se,k),ka(8,P);break;case 23:break;case 22:var Te=P.stateNode;P.memoizedState!==null?Te._visibility&2?fs(_,P,U,se,k):ja(_,P):(Te._visibility|=2,fs(_,P,U,se,k)),k&&ye&2048&&vd(P.alternate,P);break;case 24:fs(_,P,U,se,k),k&&ye&2048&&wd(P.alternate,P);break;default:fs(_,P,U,se,k)}i=i.sibling}}function ja(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var d=n,b=i,k=b.flags;switch(b.tag){case 22:ja(d,b),k&2048&&vd(b.alternate,b);break;case 24:ja(d,b),k&2048&&wd(b.alternate,b);break;default:ja(d,b)}i=i.sibling}}var _a=8192;function ms(n){if(n.subtreeFlags&_a)for(n=n.child;n!==null;)cx(n),n=n.sibling}function cx(n){switch(n.tag){case 26:ms(n),n.flags&_a&&n.memoizedState!==null&&t2(Fn,n.memoizedState,n.memoizedProps);break;case 5:ms(n);break;case 3:case 4:var i=Fn;Fn=Il(n.stateNode.containerInfo),ms(n),Fn=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=_a,_a=16777216,ms(n),_a=i):ms(n));break;default:ms(n)}}function ux(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Na(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var b=i[d];zt=b,hx(b,n)}ux(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dx(n),n=n.sibling}function dx(n){switch(n.tag){case 0:case 11:case 15:Na(n),n.flags&2048&&Ii(9,n,n.return);break;case 3:Na(n);break;case 12:Na(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,_l(n)):Na(n);break;default:Na(n)}}function _l(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var d=0;d<i.length;d++){var b=i[d];zt=b,hx(b,n)}ux(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ii(8,i,i.return),_l(i);break;case 22:d=i.stateNode,d._visibility&2&&(d._visibility&=-3,_l(i));break;default:_l(i)}n=n.sibling}}function hx(n,i){for(;zt!==null;){var d=zt;switch(d.tag){case 0:case 11:case 15:Ii(8,d,i);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var b=d.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:ua(d.memoizedState.cache)}if(b=d.child,b!==null)b.return=d,zt=b;else e:for(d=n;zt!==null;){b=zt;var k=b.sibling,_=b.return;if(ix(b),b===d){zt=null;break e}if(k!==null){k.return=_,zt=k;break e}zt=_}}}var xC={getCacheForType:function(n){var i=Wt(Mt),d=i.data.get(n);return d===void 0&&(d=n(),i.data.set(n,d)),d}},yC=typeof WeakMap=="function"?WeakMap:Map,rt=0,ut=null,Ze=null,et=0,st=0,pn=null,Ui=!1,gs=!1,Sd=!1,bi=0,xt=0,Hi=0,kr=0,Cd=0,Nn=0,ps=0,Ea=null,cn=null,kd=!1,Td=0,Nl=1/0,El=null,$i=null,Ut=0,Xi=null,xs=null,ys=0,jd=0,_d=null,fx=null,Ma=0,Nd=null;function xn(){if((rt&2)!==0&&et!==0)return et&-et;if(z.T!==null){var n=ss;return n!==0?n:Pd()}return Em()}function mx(){Nn===0&&(Nn=(et&536870912)===0||it?Tm():536870912);var n=_n.current;return n!==null&&(n.flags|=32),Nn}function yn(n,i,d){(n===ut&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(bs(n,0),Yi(n,et,Nn,!1)),qs(n,d),((rt&2)===0||n!==ut)&&(n===ut&&((rt&2)===0&&(kr|=d),xt===4&&Yi(n,et,Nn,!1)),Wn(n))}function gx(n,i,d){if((rt&6)!==0)throw Error(o(327));var b=!d&&(i&124)===0&&(i&n.expiredLanes)===0||lr(n,i),k=b?wC(n,i):Od(n,i,!0),_=b;do{if(k===0){gs&&!b&&Yi(n,i,0,!1);break}else{if(d=n.current.alternate,_&&!bC(d)){k=Od(n,i,!1),_=!1;continue}if(k===2){if(_=i,n.errorRecoveryDisabledLanes&_)var P=0;else P=n.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){i=P;e:{var U=n;k=Ea;var se=U.current.memoizedState.isDehydrated;if(se&&(bs(U,P).flags|=256),P=Od(U,P,!1),P!==2){if(Sd&&!se){U.errorRecoveryDisabledLanes|=_,kr|=_,k=4;break e}_=cn,cn=k,_!==null&&(cn===null?cn=_:cn.push.apply(cn,_))}k=P}if(_=!1,k!==2)continue}}if(k===1){bs(n,0),Yi(n,i,0,!0);break}e:{switch(b=n,_=k,_){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Yi(b,i,Nn,!Ui);break e;case 2:cn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(k=Td+300-de(),10<k)){if(Yi(b,i,Nn,!Ui),si(b,0,!0)!==0)break e;b.timeoutHandle=$x(px.bind(null,b,d,cn,El,kd,i,Nn,kr,ps,Ui,_,2,-0,0),k);break e}px(b,d,cn,El,kd,i,Nn,kr,ps,Ui,_,0,-0,0)}}break}while(!0);Wn(n)}function px(n,i,d,b,k,_,P,U,se,ye,Te,_e,be,ve){if(n.timeoutHandle=-1,_e=i.subtreeFlags,(_e&8192||(_e&16785408)===16785408)&&(Fa={stylesheets:null,count:0,unsuspend:e2},cx(i),_e=n2(),_e!==null)){n.cancelPendingCommit=_e(Cx.bind(null,n,i,_,d,b,k,P,U,se,Te,1,be,ve)),Yi(n,_,P,!ye);return}Cx(n,i,_,d,b,k,P,U,se)}function bC(n){for(var i=n;;){var d=i.tag;if((d===0||d===11||d===15)&&i.flags&16384&&(d=i.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var b=0;b<d.length;b++){var k=d[b],_=k.getSnapshot;k=k.value;try{if(!hn(_(),k))return!1}catch{return!1}}if(d=i.child,i.subtreeFlags&16384&&d!==null)d.return=i,i=d;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yi(n,i,d,b){i&=~Cd,i&=~kr,n.suspendedLanes|=i,n.pingedLanes&=~i,b&&(n.warmLanes|=i),b=n.expirationTimes;for(var k=i;0<k;){var _=31-Ue(k),P=1<<_;b[_]=-1,k&=~P}d!==0&&_m(n,d,i)}function Ml(){return(rt&6)===0?(Oa(0),!1):!0}function Ed(){if(Ze!==null){if(st===0)var n=Ze.return;else n=Ze,di=yr=null,Yu(n),ds=null,wa=0,n=Ze;for(;n!==null;)Wp(n.alternate,n),n=n.return;Ze=null}}function bs(n,i){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,FC(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),Ed(),ut=n,Ze=d=li(n.current,null),et=i,st=0,pn=null,Ui=!1,gs=lr(n,i),Sd=!1,ps=Nn=Cd=kr=Hi=xt=0,cn=Ea=null,kd=!1,(i&8)!==0&&(i|=i&32);var b=n.entangledLanes;if(b!==0)for(n=n.entanglements,b&=i;0<b;){var k=31-Ue(b),_=1<<k;i|=n[k],b&=~_}return bi=i,Qo(),d}function xx(n,i){qe=null,z.H=xl,i===ha||i===ol?(i=Rg(),st=3):i===Og?(i=Rg(),st=4):st=i===Pp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,pn=i,Ze===null&&(xt=1,Sl(n,Cn(i,n.current)))}function yx(){var n=z.H;return z.H=xl,n===null?xl:n}function bx(){var n=z.A;return z.A=xC,n}function Md(){xt=4,Ui||(et&4194048)!==et&&_n.current!==null||(gs=!0),(Hi&134217727)===0&&(kr&134217727)===0||ut===null||Yi(ut,et,Nn,!1)}function Od(n,i,d){var b=rt;rt|=2;var k=yx(),_=bx();(ut!==n||et!==i)&&(El=null,bs(n,i)),i=!1;var P=xt;e:do try{if(st!==0&&Ze!==null){var U=Ze,se=pn;switch(st){case 8:Ed(),P=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(i=!0);var ye=st;if(st=0,pn=null,vs(n,U,se,ye),d&&gs){P=0;break e}break;default:ye=st,st=0,pn=null,vs(n,U,se,ye)}}vC(),P=xt;break}catch(Te){xx(n,Te)}while(!0);return i&&n.shellSuspendCounter++,di=yr=null,rt=b,z.H=k,z.A=_,Ze===null&&(ut=null,et=0,Qo()),P}function vC(){for(;Ze!==null;)vx(Ze)}function wC(n,i){var d=rt;rt|=2;var b=yx(),k=bx();ut!==n||et!==i?(El=null,Nl=de()+500,bs(n,i)):gs=lr(n,i);e:do try{if(st!==0&&Ze!==null){i=Ze;var _=pn;t:switch(st){case 1:st=0,pn=null,vs(n,i,_,1);break;case 2:case 9:if(Dg(_)){st=0,pn=null,wx(i);break}i=function(){st!==2&&st!==9||ut!==n||(st=7),Wn(n)},_.then(i,i);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:Dg(_)?(st=0,pn=null,wx(i)):(st=0,pn=null,vs(n,i,_,7));break;case 5:var P=null;switch(Ze.tag){case 26:P=Ze.memoizedState;case 5:case 27:var U=Ze;if(!P||n0(P)){st=0,pn=null;var se=U.sibling;if(se!==null)Ze=se;else{var ye=U.return;ye!==null?(Ze=ye,Ol(ye)):Ze=null}break t}}st=0,pn=null,vs(n,i,_,5);break;case 6:st=0,pn=null,vs(n,i,_,6);break;case 8:Ed(),xt=6;break e;default:throw Error(o(462))}}SC();break}catch(Te){xx(n,Te)}while(!0);return di=yr=null,z.H=b,z.A=k,rt=d,Ze!==null?0:(ut=null,et=0,Qo(),xt)}function SC(){for(;Ze!==null&&!re();)vx(Ze)}function vx(n){var i=Gp(n.alternate,n,bi);n.memoizedProps=n.pendingProps,i===null?Ol(n):Ze=i}function wx(n){var i=n,d=i.alternate;switch(i.tag){case 15:case 0:i=Vp(d,i,i.pendingProps,i.type,void 0,et);break;case 11:i=Vp(d,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:Yu(i);default:Wp(d,i),i=Ze=Sg(i,bi),i=Gp(d,i,bi)}n.memoizedProps=n.pendingProps,i===null?Ol(n):Ze=i}function vs(n,i,d,b){di=yr=null,Yu(i),ds=null,wa=0;var k=i.return;try{if(dC(n,k,i,d,et)){xt=1,Sl(n,Cn(d,n.current)),Ze=null;return}}catch(_){if(k!==null)throw Ze=k,_;xt=1,Sl(n,Cn(d,n.current)),Ze=null;return}i.flags&32768?(it||b===1?n=!0:gs||(et&536870912)!==0?n=!1:(Ui=n=!0,(b===2||b===9||b===3||b===6)&&(b=_n.current,b!==null&&b.tag===13&&(b.flags|=16384))),Sx(i,n)):Ol(i)}function Ol(n){var i=n;do{if((i.flags&32768)!==0){Sx(i,Ui);return}n=i.return;var d=fC(i.alternate,i,bi);if(d!==null){Ze=d;return}if(i=i.sibling,i!==null){Ze=i;return}Ze=i=n}while(i!==null);xt===0&&(xt=5)}function Sx(n,i){do{var d=mC(n.alternate,n);if(d!==null){d.flags&=32767,Ze=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!i&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=d}while(n!==null);xt=6,Ze=null}function Cx(n,i,d,b,k,_,P,U,se){n.cancelPendingCommit=null;do Dl();while(Ut!==0);if((rt&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(_=i.lanes|i.childLanes,_|=wu,eS(n,d,_,P,U,se),n===ut&&(Ze=ut=null,et=0),xs=i,Xi=n,ys=d,jd=_,_d=k,fx=b,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jC(ne,function(){return Nx(),null})):(n.callbackNode=null,n.callbackPriority=0),b=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||b){b=z.T,z.T=null,k=q.p,q.p=2,P=rt,rt|=4;try{gC(n,i,d)}finally{rt=P,q.p=k,z.T=b}}Ut=1,kx(),Tx(),jx()}}function kx(){if(Ut===1){Ut=0;var n=Xi,i=xs,d=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||d){d=z.T,z.T=null;var b=q.p;q.p=2;var k=rt;rt|=4;try{ax(i,n);var _=Hd,P=hg(n.containerInfo),U=_.focusedElem,se=_.selectionRange;if(P!==U&&U&&U.ownerDocument&&dg(U.ownerDocument.documentElement,U)){if(se!==null&&pu(U)){var ye=se.start,Te=se.end;if(Te===void 0&&(Te=ye),"selectionStart"in U)U.selectionStart=ye,U.selectionEnd=Math.min(Te,U.value.length);else{var _e=U.ownerDocument||document,be=_e&&_e.defaultView||window;if(be.getSelection){var ve=be.getSelection(),He=U.textContent.length,Be=Math.min(se.start,He),lt=se.end===void 0?Be:Math.min(se.end,He);!ve.extend&&Be>lt&&(P=lt,lt=Be,Be=P);var pe=ug(U,Be),he=ug(U,lt);if(pe&&he&&(ve.rangeCount!==1||ve.anchorNode!==pe.node||ve.anchorOffset!==pe.offset||ve.focusNode!==he.node||ve.focusOffset!==he.offset)){var xe=_e.createRange();xe.setStart(pe.node,pe.offset),ve.removeAllRanges(),Be>lt?(ve.addRange(xe),ve.extend(he.node,he.offset)):(xe.setEnd(he.node,he.offset),ve.addRange(xe))}}}}for(_e=[],ve=U;ve=ve.parentNode;)ve.nodeType===1&&_e.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<_e.length;U++){var je=_e[U];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}$l=!!Ud,Hd=Ud=null}finally{rt=k,q.p=b,z.T=d}}n.current=i,Ut=2}}function Tx(){if(Ut===2){Ut=0;var n=Xi,i=xs,d=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||d){d=z.T,z.T=null;var b=q.p;q.p=2;var k=rt;rt|=4;try{nx(n,i.alternate,i)}finally{rt=k,q.p=b,z.T=d}}Ut=3}}function jx(){if(Ut===4||Ut===3){Ut=0,ge();var n=Xi,i=xs,d=ys,b=fx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,xs=Xi=null,_x(n,n.pendingLanes));var k=n.pendingLanes;if(k===0&&($i=null),Wc(d),i=i.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Ne,i,void 0,(i.current.flags&128)===128)}catch{}if(b!==null){i=z.T,k=q.p,q.p=2,z.T=null;try{for(var _=n.onRecoverableError,P=0;P<b.length;P++){var U=b[P];_(U.value,{componentStack:U.stack})}}finally{z.T=i,q.p=k}}(ys&3)!==0&&Dl(),Wn(n),k=n.pendingLanes,(d&4194090)!==0&&(k&42)!==0?n===Nd?Ma++:(Ma=0,Nd=n):Ma=0,Oa(0)}}function _x(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,ua(i)))}function Dl(n){return kx(),Tx(),jx(),Nx()}function Nx(){if(Ut!==5)return!1;var n=Xi,i=jd;jd=0;var d=Wc(ys),b=z.T,k=q.p;try{q.p=32>d?32:d,z.T=null,d=_d,_d=null;var _=Xi,P=ys;if(Ut=0,xs=Xi=null,ys=0,(rt&6)!==0)throw Error(o(331));var U=rt;if(rt|=4,dx(_.current),lx(_,_.current,P,d),rt=U,Oa(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Ne,_)}catch{}return!0}finally{q.p=k,z.T=b,_x(n,i)}}function Ex(n,i,d){i=Cn(d,i),i=ad(n.stateNode,i,2),n=Pi(n,i,2),n!==null&&(qs(n,2),Wn(n))}function ct(n,i,d){if(n.tag===3)Ex(n,n,d);else for(;i!==null;){if(i.tag===3){Ex(i,n,d);break}else if(i.tag===1){var b=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&($i===null||!$i.has(b))){n=Cn(d,n),d=Ap(2),b=Pi(i,d,2),b!==null&&(Rp(d,b,i,n),qs(b,2),Wn(b));break}}i=i.return}}function Dd(n,i,d){var b=n.pingCache;if(b===null){b=n.pingCache=new yC;var k=new Set;b.set(i,k)}else k=b.get(i),k===void 0&&(k=new Set,b.set(i,k));k.has(d)||(Sd=!0,k.add(d),n=CC.bind(null,n,i,d),i.then(n,n))}function CC(n,i,d){var b=n.pingCache;b!==null&&b.delete(i),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,ut===n&&(et&d)===d&&(xt===4||xt===3&&(et&62914560)===et&&300>de()-Td?(rt&2)===0&&bs(n,0):Cd|=d,ps===et&&(ps=0)),Wn(n)}function Mx(n,i){i===0&&(i=jm()),n=ts(n,i),n!==null&&(qs(n,i),Wn(n))}function kC(n){var i=n.memoizedState,d=0;i!==null&&(d=i.retryLane),Mx(n,d)}function TC(n,i){var d=0;switch(n.tag){case 13:var b=n.stateNode,k=n.memoizedState;k!==null&&(d=k.retryLane);break;case 19:b=n.stateNode;break;case 22:b=n.stateNode._retryCache;break;default:throw Error(o(314))}b!==null&&b.delete(i),Mx(n,d)}function jC(n,i){return le(n,i)}var Al=null,ws=null,Ad=!1,Rl=!1,Rd=!1,Tr=0;function Wn(n){n!==ws&&n.next===null&&(ws===null?Al=ws=n:ws=ws.next=n),Rl=!0,Ad||(Ad=!0,NC())}function Oa(n,i){if(!Rd&&Rl){Rd=!0;do for(var d=!1,b=Al;b!==null;){if(n!==0){var k=b.pendingLanes;if(k===0)var _=0;else{var P=b.suspendedLanes,U=b.pingedLanes;_=(1<<31-Ue(42|n)+1)-1,_&=k&~(P&~U),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,Rx(b,_))}else _=et,_=si(b,b===ut?_:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(_&3)===0||lr(b,_)||(d=!0,Rx(b,_));b=b.next}while(d);Rd=!1}}function _C(){Ox()}function Ox(){Rl=Ad=!1;var n=0;Tr!==0&&(LC()&&(n=Tr),Tr=0);for(var i=de(),d=null,b=Al;b!==null;){var k=b.next,_=Dx(b,i);_===0?(b.next=null,d===null?Al=k:d.next=k,k===null&&(ws=d)):(d=b,(n!==0||(_&3)!==0)&&(Rl=!0)),b=k}Oa(n)}function Dx(n,i){for(var d=n.suspendedLanes,b=n.pingedLanes,k=n.expirationTimes,_=n.pendingLanes&-62914561;0<_;){var P=31-Ue(_),U=1<<P,se=k[P];se===-1?((U&d)===0||(U&b)!==0)&&(k[P]=Bo(U,i)):se<=i&&(n.expiredLanes|=U),_&=~U}if(i=ut,d=et,d=si(n,n===i?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),b=n.callbackNode,d===0||n===i&&(st===2||st===9)||n.cancelPendingCommit!==null)return b!==null&&b!==null&&H(b),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||lr(n,d)){if(i=d&-d,i===n.callbackPriority)return i;switch(b!==null&&H(b),Wc(d)){case 2:case 8:d=$;break;case 32:d=ne;break;case 268435456:d=we;break;default:d=ne}return b=Ax.bind(null,n),d=le(d,b),n.callbackPriority=i,n.callbackNode=d,i}return b!==null&&b!==null&&H(b),n.callbackPriority=2,n.callbackNode=null,2}function Ax(n,i){if(Ut!==0&&Ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(Dl()&&n.callbackNode!==d)return null;var b=et;return b=si(n,n===ut?b:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),b===0?null:(gx(n,b,i),Dx(n,de()),n.callbackNode!=null&&n.callbackNode===d?Ax.bind(null,n):null)}function Rx(n,i){if(Dl())return null;gx(n,i,!0)}function NC(){zC(function(){(rt&6)!==0?le(Se,_C):Ox()})}function Pd(){return Tr===0&&(Tr=Tm()),Tr}function Px(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xo(""+n)}function Lx(n,i){var d=i.ownerDocument.createElement("input");return d.name=i.name,d.value=i.value,n.id&&d.setAttribute("form",n.id),i.parentNode.insertBefore(d,i),n=new FormData(n),d.parentNode.removeChild(d),n}function EC(n,i,d,b,k){if(i==="submit"&&d&&d.stateNode===k){var _=Px((k[sn]||null).action),P=b.submitter;P&&(i=(i=P[sn]||null)?Px(i.formAction):P.getAttribute("formAction"),i!==null&&(_=i,P=null));var U=new Wo("action","action",null,b,k);n.push({event:U,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Tr!==0){var se=P?Lx(k,P):new FormData(k);td(d,{pending:!0,data:se,method:k.method,action:_},null,se)}}else typeof _=="function"&&(U.preventDefault(),se=P?Lx(k,P):new FormData(k),td(d,{pending:!0,data:se,method:k.method,action:_},_,se))},currentTarget:k}]})}}for(var Ld=0;Ld<vu.length;Ld++){var Fd=vu[Ld],MC=Fd.toLowerCase(),OC=Fd[0].toUpperCase()+Fd.slice(1);Ln(MC,"on"+OC)}Ln(gg,"onAnimationEnd"),Ln(pg,"onAnimationIteration"),Ln(xg,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(qS,"onTransitionRun"),Ln(WS,"onTransitionStart"),Ln(KS,"onTransitionCancel"),Ln(yg,"onTransitionEnd"),Xr("onMouseEnter",["mouseout","mouseover"]),Xr("onMouseLeave",["mouseout","mouseover"]),Xr("onPointerEnter",["pointerout","pointerover"]),Xr("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Da="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Da));function Fx(n,i){i=(i&4)!==0;for(var d=0;d<n.length;d++){var b=n[d],k=b.event;b=b.listeners;e:{var _=void 0;if(i)for(var P=b.length-1;0<=P;P--){var U=b[P],se=U.instance,ye=U.currentTarget;if(U=U.listener,se!==_&&k.isPropagationStopped())break e;_=U,k.currentTarget=ye;try{_(k)}catch(Te){wl(Te)}k.currentTarget=null,_=se}else for(P=0;P<b.length;P++){if(U=b[P],se=U.instance,ye=U.currentTarget,U=U.listener,se!==_&&k.isPropagationStopped())break e;_=U,k.currentTarget=ye;try{_(k)}catch(Te){wl(Te)}k.currentTarget=null,_=se}}}}function Qe(n,i){var d=i[Kc];d===void 0&&(d=i[Kc]=new Set);var b=n+"__bubble";d.has(b)||(zx(i,n,2,!1),d.add(b))}function zd(n,i,d){var b=0;i&&(b|=4),zx(d,n,b,i)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function Id(n){if(!n[Pl]){n[Pl]=!0,Om.forEach(function(d){d!=="selectionchange"&&(DC.has(d)||zd(d,!1,n),zd(d,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Pl]||(i[Pl]=!0,zd("selectionchange",!1,i))}}function zx(n,i,d,b){switch(l0(i)){case 2:var k=s2;break;case 8:k=a2;break;default:k=Jd}d=k.bind(null,i,d,n),k=void 0,!ou||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(k=!0),b?k!==void 0?n.addEventListener(i,d,{capture:!0,passive:k}):n.addEventListener(i,d,!0):k!==void 0?n.addEventListener(i,d,{passive:k}):n.addEventListener(i,d,!1)}function Bd(n,i,d,b,k){var _=b;if((i&1)===0&&(i&2)===0&&b!==null)e:for(;;){if(b===null)return;var P=b.tag;if(P===3||P===4){var U=b.stateNode.containerInfo;if(U===k)break;if(P===4)for(P=b.return;P!==null;){var se=P.tag;if((se===3||se===4)&&P.stateNode.containerInfo===k)return;P=P.return}for(;U!==null;){if(P=Ur(U),P===null)return;if(se=P.tag,se===5||se===6||se===26||se===27){b=_=P;continue e}U=U.parentNode}}b=b.return}Xm(function(){var ye=_,Te=su(d),_e=[];e:{var be=bg.get(n);if(be!==void 0){var ve=Wo,He=n;switch(n){case"keypress":if(Go(d)===0)break e;case"keydown":case"keyup":ve=jS;break;case"focusin":He="focus",ve=du;break;case"focusout":He="blur",ve=du;break;case"beforeblur":case"afterblur":ve=du;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=mS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=ES;break;case gg:case pg:case xg:ve=xS;break;case yg:ve=OS;break;case"scroll":case"scrollend":ve=hS;break;case"wheel":ve=AS;break;case"copy":case"cut":case"paste":ve=bS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Km;break;case"toggle":case"beforetoggle":ve=PS}var Be=(i&4)!==0,lt=!Be&&(n==="scroll"||n==="scrollend"),pe=Be?be!==null?be+"Capture":null:be;Be=[];for(var he=ye,xe;he!==null;){var je=he;if(xe=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||xe===null||pe===null||(je=Zs(he,pe),je!=null&&Be.push(Aa(he,je,xe))),lt)break;he=he.return}0<Be.length&&(be=new ve(be,He,null,d,Te),_e.push({event:be,listeners:Be}))}}if((i&7)===0){e:{if(be=n==="mouseover"||n==="pointerover",ve=n==="mouseout"||n==="pointerout",be&&d!==ru&&(He=d.relatedTarget||d.fromElement)&&(Ur(He)||He[Vr]))break e;if((ve||be)&&(be=Te.window===Te?Te:(be=Te.ownerDocument)?be.defaultView||be.parentWindow:window,ve?(He=d.relatedTarget||d.toElement,ve=ye,He=He?Ur(He):null,He!==null&&(lt=v(He),Be=He.tag,He!==lt||Be!==5&&Be!==27&&Be!==6)&&(He=null)):(ve=null,He=ye),ve!==He)){if(Be=qm,je="onMouseLeave",pe="onMouseEnter",he="mouse",(n==="pointerout"||n==="pointerover")&&(Be=Km,je="onPointerLeave",pe="onPointerEnter",he="pointer"),lt=ve==null?be:Ks(ve),xe=He==null?be:Ks(He),be=new Be(je,he+"leave",ve,d,Te),be.target=lt,be.relatedTarget=xe,je=null,Ur(Te)===ye&&(Be=new Be(pe,he+"enter",He,d,Te),Be.target=xe,Be.relatedTarget=lt,je=Be),lt=je,ve&&He)t:{for(Be=ve,pe=He,he=0,xe=Be;xe;xe=Ss(xe))he++;for(xe=0,je=pe;je;je=Ss(je))xe++;for(;0<he-xe;)Be=Ss(Be),he--;for(;0<xe-he;)pe=Ss(pe),xe--;for(;he--;){if(Be===pe||pe!==null&&Be===pe.alternate)break t;Be=Ss(Be),pe=Ss(pe)}Be=null}else Be=null;ve!==null&&Ix(_e,be,ve,Be,!1),He!==null&&lt!==null&&Ix(_e,lt,He,Be,!0)}}e:{if(be=ye?Ks(ye):window,ve=be.nodeName&&be.nodeName.toLowerCase(),ve==="select"||ve==="input"&&be.type==="file")var Re=rg;else if(ng(be))if(sg)Re=XS;else{Re=HS;var Ke=US}else ve=be.nodeName,!ve||ve.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?ye&&iu(ye.elementType)&&(Re=rg):Re=$S;if(Re&&(Re=Re(n,ye))){ig(_e,Re,d,Te);break e}Ke&&Ke(n,be,ye),n==="focusout"&&ye&&be.type==="number"&&ye.memoizedProps.value!=null&&nu(be,"number",be.value)}switch(Ke=ye?Ks(ye):window,n){case"focusin":(ng(Ke)||Ke.contentEditable==="true")&&(Qr=Ke,xu=ye,sa=null);break;case"focusout":sa=xu=Qr=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,fg(_e,d,Te);break;case"selectionchange":if(GS)break;case"keydown":case"keyup":fg(_e,d,Te)}var Fe;if(fu)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Zr?eg(n,d)&&(Ve="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Ve="onCompositionStart");Ve&&(Zm&&d.locale!=="ko"&&(Zr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Zr&&(Fe=Ym()):(Oi=Te,lu="value"in Oi?Oi.value:Oi.textContent,Zr=!0)),Ke=Ll(ye,Ve),0<Ke.length&&(Ve=new Wm(Ve,n,null,d,Te),_e.push({event:Ve,listeners:Ke}),Fe?Ve.data=Fe:(Fe=tg(d),Fe!==null&&(Ve.data=Fe)))),(Fe=FS?zS(n,d):IS(n,d))&&(Ve=Ll(ye,"onBeforeInput"),0<Ve.length&&(Ke=new Wm("onBeforeInput","beforeinput",null,d,Te),_e.push({event:Ke,listeners:Ve}),Ke.data=Fe)),EC(_e,n,ye,d,Te)}Fx(_e,i)})}function Aa(n,i,d){return{instance:n,listener:i,currentTarget:d}}function Ll(n,i){for(var d=i+"Capture",b=[];n!==null;){var k=n,_=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||_===null||(k=Zs(n,d),k!=null&&b.unshift(Aa(n,k,_)),k=Zs(n,i),k!=null&&b.push(Aa(n,k,_))),n.tag===3)return b;n=n.return}return[]}function Ss(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ix(n,i,d,b,k){for(var _=i._reactName,P=[];d!==null&&d!==b;){var U=d,se=U.alternate,ye=U.stateNode;if(U=U.tag,se!==null&&se===b)break;U!==5&&U!==26&&U!==27||ye===null||(se=ye,k?(ye=Zs(d,_),ye!=null&&P.unshift(Aa(d,ye,se))):k||(ye=Zs(d,_),ye!=null&&P.push(Aa(d,ye,se)))),d=d.return}P.length!==0&&n.push({event:i,listeners:P})}var AC=/\r\n?/g,RC=/\u0000|\uFFFD/g;function Bx(n){return(typeof n=="string"?n:""+n).replace(AC,`
`).replace(RC,"")}function Vx(n,i){return i=Bx(i),Bx(n)===i}function Fl(){}function ot(n,i,d,b,k,_){switch(d){case"children":typeof b=="string"?i==="body"||i==="textarea"&&b===""||qr(n,b):(typeof b=="number"||typeof b=="bigint")&&i!=="body"&&qr(n,""+b);break;case"className":Uo(n,"class",b);break;case"tabIndex":Uo(n,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Uo(n,d,b);break;case"style":Hm(n,b,_);break;case"data":if(i!=="object"){Uo(n,"data",b);break}case"src":case"href":if(b===""&&(i!=="a"||d!=="href")){n.removeAttribute(d);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){n.removeAttribute(d);break}b=Xo(""+b),n.setAttribute(d,b);break;case"action":case"formAction":if(typeof b=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(i!=="input"&&ot(n,i,"name",k.name,k,null),ot(n,i,"formEncType",k.formEncType,k,null),ot(n,i,"formMethod",k.formMethod,k,null),ot(n,i,"formTarget",k.formTarget,k,null)):(ot(n,i,"encType",k.encType,k,null),ot(n,i,"method",k.method,k,null),ot(n,i,"target",k.target,k,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){n.removeAttribute(d);break}b=Xo(""+b),n.setAttribute(d,b);break;case"onClick":b!=null&&(n.onclick=Fl);break;case"onScroll":b!=null&&Qe("scroll",n);break;case"onScrollEnd":b!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(o(61));if(d=b.__html,d!=null){if(k.children!=null)throw Error(o(60));n.innerHTML=d}}break;case"multiple":n.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":n.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){n.removeAttribute("xlink:href");break}d=Xo(""+b),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(d,""+b):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":b===!0?n.setAttribute(d,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?n.setAttribute(d,b):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?n.setAttribute(d,b):n.removeAttribute(d);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?n.removeAttribute(d):n.setAttribute(d,b);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),Vo(n,"popover",b);break;case"xlinkActuate":ai(n,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":ai(n,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":ai(n,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":ai(n,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":ai(n,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":ai(n,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":ai(n,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":ai(n,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":ai(n,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Vo(n,"is",b);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=uS.get(d)||d,Vo(n,d,b))}}function Vd(n,i,d,b,k,_){switch(d){case"style":Hm(n,b,_);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(o(61));if(d=b.__html,d!=null){if(k.children!=null)throw Error(o(60));n.innerHTML=d}}break;case"children":typeof b=="string"?qr(n,b):(typeof b=="number"||typeof b=="bigint")&&qr(n,""+b);break;case"onScroll":b!=null&&Qe("scroll",n);break;case"onScrollEnd":b!=null&&Qe("scrollend",n);break;case"onClick":b!=null&&(n.onclick=Fl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dm.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(k=d.endsWith("Capture"),i=d.slice(2,k?d.length-7:void 0),_=n[sn]||null,_=_!=null?_[d]:null,typeof _=="function"&&n.removeEventListener(i,_,k),typeof b=="function")){typeof _!="function"&&_!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(i,b,k);break e}d in n?n[d]=b:b===!0?n.setAttribute(d,""):Vo(n,d,b)}}}function Ht(n,i,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var b=!1,k=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var P=d[_];if(P!=null)switch(_){case"src":b=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:ot(n,i,_,P,d,null)}}k&&ot(n,i,"srcSet",d.srcSet,d,null),b&&ot(n,i,"src",d.src,d,null);return;case"input":Qe("invalid",n);var U=_=P=k=null,se=null,ye=null;for(b in d)if(d.hasOwnProperty(b)){var Te=d[b];if(Te!=null)switch(b){case"name":k=Te;break;case"type":P=Te;break;case"checked":se=Te;break;case"defaultChecked":ye=Te;break;case"value":_=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(o(137,i));break;default:ot(n,i,b,Te,d,null)}}Im(n,_,U,se,ye,P,k,!1),Ho(n);return;case"select":Qe("invalid",n),b=P=_=null;for(k in d)if(d.hasOwnProperty(k)&&(U=d[k],U!=null))switch(k){case"value":_=U;break;case"defaultValue":P=U;break;case"multiple":b=U;default:ot(n,i,k,U,d,null)}i=_,d=P,n.multiple=!!b,i!=null?Gr(n,!!b,i,!1):d!=null&&Gr(n,!!b,d,!0);return;case"textarea":Qe("invalid",n),_=k=b=null;for(P in d)if(d.hasOwnProperty(P)&&(U=d[P],U!=null))switch(P){case"value":b=U;break;case"defaultValue":k=U;break;case"children":_=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(91));break;default:ot(n,i,P,U,d,null)}Vm(n,b,k,_),Ho(n);return;case"option":for(se in d)if(d.hasOwnProperty(se)&&(b=d[se],b!=null))switch(se){case"selected":n.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:ot(n,i,se,b,d,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(b=0;b<Da.length;b++)Qe(Da[b],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in d)if(d.hasOwnProperty(ye)&&(b=d[ye],b!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:ot(n,i,ye,b,d,null)}return;default:if(iu(i)){for(Te in d)d.hasOwnProperty(Te)&&(b=d[Te],b!==void 0&&Vd(n,i,Te,b,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(b=d[U],b!=null&&ot(n,i,U,b,d,null))}function PC(n,i,d,b){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,_=null,P=null,U=null,se=null,ye=null,Te=null;for(ve in d){var _e=d[ve];if(d.hasOwnProperty(ve)&&_e!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":se=_e;default:b.hasOwnProperty(ve)||ot(n,i,ve,null,b,_e)}}for(var be in b){var ve=b[be];if(_e=d[be],b.hasOwnProperty(be)&&(ve!=null||_e!=null))switch(be){case"type":_=ve;break;case"name":k=ve;break;case"checked":ye=ve;break;case"defaultChecked":Te=ve;break;case"value":P=ve;break;case"defaultValue":U=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,i));break;default:ve!==_e&&ot(n,i,be,ve,b,_e)}}tu(n,P,U,se,ye,Te,_,k);return;case"select":ve=P=U=be=null;for(_ in d)if(se=d[_],d.hasOwnProperty(_)&&se!=null)switch(_){case"value":break;case"multiple":ve=se;default:b.hasOwnProperty(_)||ot(n,i,_,null,b,se)}for(k in b)if(_=b[k],se=d[k],b.hasOwnProperty(k)&&(_!=null||se!=null))switch(k){case"value":be=_;break;case"defaultValue":U=_;break;case"multiple":P=_;default:_!==se&&ot(n,i,k,_,b,se)}i=U,d=P,b=ve,be!=null?Gr(n,!!d,be,!1):!!b!=!!d&&(i!=null?Gr(n,!!d,i,!0):Gr(n,!!d,d?[]:"",!1));return;case"textarea":ve=be=null;for(U in d)if(k=d[U],d.hasOwnProperty(U)&&k!=null&&!b.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:ot(n,i,U,null,b,k)}for(P in b)if(k=b[P],_=d[P],b.hasOwnProperty(P)&&(k!=null||_!=null))switch(P){case"value":be=k;break;case"defaultValue":ve=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:k!==_&&ot(n,i,P,k,b,_)}Bm(n,be,ve);return;case"option":for(var He in d)if(be=d[He],d.hasOwnProperty(He)&&be!=null&&!b.hasOwnProperty(He))switch(He){case"selected":n.selected=!1;break;default:ot(n,i,He,null,b,be)}for(se in b)if(be=b[se],ve=d[se],b.hasOwnProperty(se)&&be!==ve&&(be!=null||ve!=null))switch(se){case"selected":n.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:ot(n,i,se,be,b,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in d)be=d[Be],d.hasOwnProperty(Be)&&be!=null&&!b.hasOwnProperty(Be)&&ot(n,i,Be,null,b,be);for(ye in b)if(be=b[ye],ve=d[ye],b.hasOwnProperty(ye)&&be!==ve&&(be!=null||ve!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,i));break;default:ot(n,i,ye,be,b,ve)}return;default:if(iu(i)){for(var lt in d)be=d[lt],d.hasOwnProperty(lt)&&be!==void 0&&!b.hasOwnProperty(lt)&&Vd(n,i,lt,void 0,b,be);for(Te in b)be=b[Te],ve=d[Te],!b.hasOwnProperty(Te)||be===ve||be===void 0&&ve===void 0||Vd(n,i,Te,be,b,ve);return}}for(var pe in d)be=d[pe],d.hasOwnProperty(pe)&&be!=null&&!b.hasOwnProperty(pe)&&ot(n,i,pe,null,b,be);for(_e in b)be=b[_e],ve=d[_e],!b.hasOwnProperty(_e)||be===ve||be==null&&ve==null||ot(n,i,_e,be,b,ve)}var Ud=null,Hd=null;function zl(n){return n.nodeType===9?n:n.ownerDocument}function Ux(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hx(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function $d(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Xd=null;function LC(){var n=window.event;return n&&n.type==="popstate"?n===Xd?!1:(Xd=n,!0):(Xd=null,!1)}var $x=typeof setTimeout=="function"?setTimeout:void 0,FC=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,zC=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(n){return Xx.resolve(null).then(n).catch(IC)}:$x;function IC(n){setTimeout(function(){throw n})}function Gi(n){return n==="head"}function Yx(n,i){var d=i,b=0,k=0;do{var _=d.nextSibling;if(n.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(0<b&&8>b){d=b;var P=n.ownerDocument;if(d&1&&Ra(P.documentElement),d&2&&Ra(P.body),d&4)for(d=P.head,Ra(d),P=d.firstChild;P;){var U=P.nextSibling,se=P.nodeName;P[Ws]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&P.rel.toLowerCase()==="stylesheet"||d.removeChild(P),P=U}}if(k===0){n.removeChild(_),Ua(i);return}k--}else d==="$"||d==="$?"||d==="$!"?k++:b=d.charCodeAt(0)-48;else b=0;d=_}while(d);Ua(i)}function Yd(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var d=i;switch(i=i.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Yd(d),Zc(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function BC(n,i,d,b){for(;n.nodeType===1;){var k=d;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!b&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(b){if(!n[Ws])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(_=n.getAttribute("rel"),_==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(_!==k.rel||n.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||n.getAttribute("title")!==(k.title==null?null:k.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(_=n.getAttribute("src"),(_!==(k.src==null?null:k.src)||n.getAttribute("type")!==(k.type==null?null:k.type)||n.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&_&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var _=k.name==null?null:""+k.name;if(k.type==="hidden"&&n.getAttribute("name")===_)return n}else return n;if(n=zn(n.nextSibling),n===null)break}return null}function VC(n,i,d){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=zn(n.nextSibling),n===null))return null;return n}function Gd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function UC(n,i){var d=n.ownerDocument;if(n.data!=="$?"||d.readyState==="complete")i();else{var b=function(){i(),d.removeEventListener("DOMContentLoaded",b)};d.addEventListener("DOMContentLoaded",b),n._reactRetry=b}}function zn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var qd=null;function Gx(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"){if(i===0)return n;i--}else d==="/$"&&i++}n=n.previousSibling}return null}function qx(n,i,d){switch(i=zl(d),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Ra(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Zc(n)}var En=new Map,Wx=new Set;function Il(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var vi=q.d;q.d={f:HC,r:$C,D:XC,C:YC,L:GC,m:qC,X:KC,S:WC,M:ZC};function HC(){var n=vi.f(),i=Ml();return n||i}function $C(n){var i=Hr(n);i!==null&&i.tag===5&&i.type==="form"?gp(i):vi.r(n)}var Cs=typeof document>"u"?null:document;function Kx(n,i,d){var b=Cs;if(b&&typeof i=="string"&&i){var k=Sn(i);k='link[rel="'+n+'"][href="'+k+'"]',typeof d=="string"&&(k+='[crossorigin="'+d+'"]'),Wx.has(k)||(Wx.add(k),n={rel:n,crossOrigin:d,href:i},b.querySelector(k)===null&&(i=b.createElement("link"),Ht(i,"link",n),Lt(i),b.head.appendChild(i)))}}function XC(n){vi.D(n),Kx("dns-prefetch",n,null)}function YC(n,i){vi.C(n,i),Kx("preconnect",n,i)}function GC(n,i,d){vi.L(n,i,d);var b=Cs;if(b&&n&&i){var k='link[rel="preload"][as="'+Sn(i)+'"]';i==="image"&&d&&d.imageSrcSet?(k+='[imagesrcset="'+Sn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(k+='[imagesizes="'+Sn(d.imageSizes)+'"]')):k+='[href="'+Sn(n)+'"]';var _=k;switch(i){case"style":_=ks(n);break;case"script":_=Ts(n)}En.has(_)||(n=h({rel:"preload",href:i==="image"&&d&&d.imageSrcSet?void 0:n,as:i},d),En.set(_,n),b.querySelector(k)!==null||i==="style"&&b.querySelector(Pa(_))||i==="script"&&b.querySelector(La(_))||(i=b.createElement("link"),Ht(i,"link",n),Lt(i),b.head.appendChild(i)))}}function qC(n,i){vi.m(n,i);var d=Cs;if(d&&n){var b=i&&typeof i.as=="string"?i.as:"script",k='link[rel="modulepreload"][as="'+Sn(b)+'"][href="'+Sn(n)+'"]',_=k;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ts(n)}if(!En.has(_)&&(n=h({rel:"modulepreload",href:n},i),En.set(_,n),d.querySelector(k)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(La(_)))return}b=d.createElement("link"),Ht(b,"link",n),Lt(b),d.head.appendChild(b)}}}function WC(n,i,d){vi.S(n,i,d);var b=Cs;if(b&&n){var k=$r(b).hoistableStyles,_=ks(n);i=i||"default";var P=k.get(_);if(!P){var U={loading:0,preload:null};if(P=b.querySelector(Pa(_)))U.loading=5;else{n=h({rel:"stylesheet",href:n,"data-precedence":i},d),(d=En.get(_))&&Wd(n,d);var se=P=b.createElement("link");Lt(se),Ht(se,"link",n),se._p=new Promise(function(ye,Te){se.onload=ye,se.onerror=Te}),se.addEventListener("load",function(){U.loading|=1}),se.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Bl(P,i,b)}P={type:"stylesheet",instance:P,count:1,state:U},k.set(_,P)}}}function KC(n,i){vi.X(n,i);var d=Cs;if(d&&n){var b=$r(d).hoistableScripts,k=Ts(n),_=b.get(k);_||(_=d.querySelector(La(k)),_||(n=h({src:n,async:!0},i),(i=En.get(k))&&Kd(n,i),_=d.createElement("script"),Lt(_),Ht(_,"link",n),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},b.set(k,_))}}function ZC(n,i){vi.M(n,i);var d=Cs;if(d&&n){var b=$r(d).hoistableScripts,k=Ts(n),_=b.get(k);_||(_=d.querySelector(La(k)),_||(n=h({src:n,async:!0,type:"module"},i),(i=En.get(k))&&Kd(n,i),_=d.createElement("script"),Lt(_),Ht(_,"link",n),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},b.set(k,_))}}function Zx(n,i,d,b){var k=(k=J.current)?Il(k):null;if(!k)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(i=ks(d.href),d=$r(k).hoistableStyles,b=d.get(i),b||(b={type:"style",instance:null,count:0,state:null},d.set(i,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=ks(d.href);var _=$r(k).hoistableStyles,P=_.get(n);if(P||(k=k.ownerDocument||k,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(n,P),(_=k.querySelector(Pa(n)))&&!_._p&&(P.instance=_,P.state.loading=5),En.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},En.set(n,d),_||QC(k,n,d,P.state))),i&&b===null)throw Error(o(528,""));return P}if(i&&b!==null)throw Error(o(529,""));return null;case"script":return i=d.async,d=d.src,typeof d=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ts(d),d=$r(k).hoistableScripts,b=d.get(i),b||(b={type:"script",instance:null,count:0,state:null},d.set(i,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function ks(n){return'href="'+Sn(n)+'"'}function Pa(n){return'link[rel="stylesheet"]['+n+"]"}function Qx(n){return h({},n,{"data-precedence":n.precedence,precedence:null})}function QC(n,i,d,b){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?b.loading=1:(i=n.createElement("link"),b.preload=i,i.addEventListener("load",function(){return b.loading|=1}),i.addEventListener("error",function(){return b.loading|=2}),Ht(i,"link",d),Lt(i),n.head.appendChild(i))}function Ts(n){return'[src="'+Sn(n)+'"]'}function La(n){return"script[async]"+n}function Jx(n,i,d){if(i.count++,i.instance===null)switch(i.type){case"style":var b=n.querySelector('style[data-href~="'+Sn(d.href)+'"]');if(b)return i.instance=b,Lt(b),b;var k=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return b=(n.ownerDocument||n).createElement("style"),Lt(b),Ht(b,"style",k),Bl(b,d.precedence,n),i.instance=b;case"stylesheet":k=ks(d.href);var _=n.querySelector(Pa(k));if(_)return i.state.loading|=4,i.instance=_,Lt(_),_;b=Qx(d),(k=En.get(k))&&Wd(b,k),_=(n.ownerDocument||n).createElement("link"),Lt(_);var P=_;return P._p=new Promise(function(U,se){P.onload=U,P.onerror=se}),Ht(_,"link",b),i.state.loading|=4,Bl(_,d.precedence,n),i.instance=_;case"script":return _=Ts(d.src),(k=n.querySelector(La(_)))?(i.instance=k,Lt(k),k):(b=d,(k=En.get(_))&&(b=h({},d),Kd(b,k)),n=n.ownerDocument||n,k=n.createElement("script"),Lt(k),Ht(k,"link",b),n.head.appendChild(k),i.instance=k);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(b=i.instance,i.state.loading|=4,Bl(b,d.precedence,n));return i.instance}function Bl(n,i,d){for(var b=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=b.length?b[b.length-1]:null,_=k,P=0;P<b.length;P++){var U=b[P];if(U.dataset.precedence===i)_=U;else if(_!==k)break}_?_.parentNode.insertBefore(n,_.nextSibling):(i=d.nodeType===9?d.head:d,i.insertBefore(n,i.firstChild))}function Wd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Kd(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Vl=null;function e0(n,i,d){if(Vl===null){var b=new Map,k=Vl=new Map;k.set(d,b)}else k=Vl,b=k.get(d),b||(b=new Map,k.set(d,b));if(b.has(n))return b;for(b.set(n,null),d=d.getElementsByTagName(n),k=0;k<d.length;k++){var _=d[k];if(!(_[Ws]||_[qt]||n==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(i)||"";P=n+P;var U=b.get(P);U?U.push(_):b.set(P,[_])}}return b}function t0(n,i,d){n=n.ownerDocument||n,n.head.insertBefore(d,i==="title"?n.querySelector("head > title"):null)}function JC(n,i,d){if(d===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function n0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Fa=null;function e2(){}function t2(n,i,d){if(Fa===null)throw Error(o(475));var b=Fa;if(i.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var k=ks(d.href),_=n.querySelector(Pa(k));if(_){n=_._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(b.count++,b=Ul.bind(b),n.then(b,b)),i.state.loading|=4,i.instance=_,Lt(_);return}_=n.ownerDocument||n,d=Qx(d),(k=En.get(k))&&Wd(d,k),_=_.createElement("link"),Lt(_);var P=_;P._p=new Promise(function(U,se){P.onload=U,P.onerror=se}),Ht(_,"link",d),i.instance=_}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(b.count++,i=Ul.bind(b),n.addEventListener("load",i),n.addEventListener("error",i))}}function n2(){if(Fa===null)throw Error(o(475));var n=Fa;return n.stylesheets&&n.count===0&&Zd(n,n.stylesheets),0<n.count?function(i){var d=setTimeout(function(){if(n.stylesheets&&Zd(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(d)}}:null}function Ul(){if(this.count--,this.count===0){if(this.stylesheets)Zd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Hl=null;function Zd(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Hl=new Map,i.forEach(i2,n),Hl=null,Ul.call(n))}function i2(n,i){if(!(i.state.loading&4)){var d=Hl.get(n);if(d)var b=d.get(null);else{d=new Map,Hl.set(n,d);for(var k=n.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<k.length;_++){var P=k[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(d.set(P.dataset.precedence,P),b=P)}b&&d.set(null,b)}k=i.instance,P=k.getAttribute("data-precedence"),_=d.get(P)||b,_===b&&d.set(null,k),d.set(P,k),this.count++,b=Ul.bind(this),k.addEventListener("load",b),k.addEventListener("error",b),_?_.parentNode.insertBefore(k,_.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(k,n.firstChild)),i.state.loading|=4}}var za={$$typeof:T,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function r2(n,i,d,b,k,_,P,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.hiddenUpdates=Gc(null),this.identifierPrefix=b,this.onUncaughtError=k,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function i0(n,i,d,b,k,_,P,U,se,ye,Te,_e){return n=new r2(n,i,d,P,U,se,ye,_e),i=1,_===!0&&(i|=24),_=fn(3,null,null,i),n.current=_,_.stateNode=n,i=Du(),i.refCount++,n.pooledCache=i,i.refCount++,_.memoizedState={element:b,isDehydrated:d,cache:i},Lu(_),n}function r0(n){return n?(n=ns,n):ns}function s0(n,i,d,b,k,_){k=r0(k),b.context===null?b.context=k:b.pendingContext=k,b=Ri(i),b.payload={element:d},_=_===void 0?null:_,_!==null&&(b.callback=_),d=Pi(n,b,i),d!==null&&(yn(d,n,i),ma(d,n,i))}function a0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<i?d:i}}function Qd(n,i){a0(n,i),(n=n.alternate)&&a0(n,i)}function o0(n){if(n.tag===13){var i=ts(n,67108864);i!==null&&yn(i,n,67108864),Qd(n,67108864)}}var $l=!0;function s2(n,i,d,b){var k=z.T;z.T=null;var _=q.p;try{q.p=2,Jd(n,i,d,b)}finally{q.p=_,z.T=k}}function a2(n,i,d,b){var k=z.T;z.T=null;var _=q.p;try{q.p=8,Jd(n,i,d,b)}finally{q.p=_,z.T=k}}function Jd(n,i,d,b){if($l){var k=eh(b);if(k===null)Bd(n,i,b,Xl,d),c0(n,b);else if(l2(k,n,i,d,b))b.stopPropagation();else if(c0(n,b),i&4&&-1<o2.indexOf(n)){for(;k!==null;){var _=Hr(k);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=Pn(_.pendingLanes);if(P!==0){var U=_;for(U.pendingLanes|=2,U.entangledLanes|=2;P;){var se=1<<31-Ue(P);U.entanglements[1]|=se,P&=~se}Wn(_),(rt&6)===0&&(Nl=de()+500,Oa(0))}}break;case 13:U=ts(_,2),U!==null&&yn(U,_,2),Ml(),Qd(_,2)}if(_=eh(b),_===null&&Bd(n,i,b,Xl,d),_===k)break;k=_}k!==null&&b.stopPropagation()}else Bd(n,i,b,null,d)}}function eh(n){return n=su(n),th(n)}var Xl=null;function th(n){if(Xl=null,n=Ur(n),n!==null){var i=v(n);if(i===null)n=null;else{var d=i.tag;if(d===13){if(n=S(i),n!==null)return n;n=null}else if(d===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Xl=n,null}function l0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case Se:return 2;case $:return 8;case ne:case ee:return 32;case we:return 268435456;default:return 32}default:return 32}}var nh=!1,qi=null,Wi=null,Ki=null,Ia=new Map,Ba=new Map,Zi=[],o2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(n,i){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Ia.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ba.delete(i.pointerId)}}function Va(n,i,d,b,k,_){return n===null||n.nativeEvent!==_?(n={blockedOn:i,domEventName:d,eventSystemFlags:b,nativeEvent:_,targetContainers:[k]},i!==null&&(i=Hr(i),i!==null&&o0(i)),n):(n.eventSystemFlags|=b,i=n.targetContainers,k!==null&&i.indexOf(k)===-1&&i.push(k),n)}function l2(n,i,d,b,k){switch(i){case"focusin":return qi=Va(qi,n,i,d,b,k),!0;case"dragenter":return Wi=Va(Wi,n,i,d,b,k),!0;case"mouseover":return Ki=Va(Ki,n,i,d,b,k),!0;case"pointerover":var _=k.pointerId;return Ia.set(_,Va(Ia.get(_)||null,n,i,d,b,k)),!0;case"gotpointercapture":return _=k.pointerId,Ba.set(_,Va(Ba.get(_)||null,n,i,d,b,k)),!0}return!1}function u0(n){var i=Ur(n.target);if(i!==null){var d=v(i);if(d!==null){if(i=d.tag,i===13){if(i=S(d),i!==null){n.blockedOn=i,tS(n.priority,function(){if(d.tag===13){var b=xn();b=qc(b);var k=ts(d,b);k!==null&&yn(k,d,b),Qd(d,b)}});return}}else if(i===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Yl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var d=eh(n.nativeEvent);if(d===null){d=n.nativeEvent;var b=new d.constructor(d.type,d);ru=b,d.target.dispatchEvent(b),ru=null}else return i=Hr(d),i!==null&&o0(i),n.blockedOn=d,!1;i.shift()}return!0}function d0(n,i,d){Yl(n)&&d.delete(i)}function c2(){nh=!1,qi!==null&&Yl(qi)&&(qi=null),Wi!==null&&Yl(Wi)&&(Wi=null),Ki!==null&&Yl(Ki)&&(Ki=null),Ia.forEach(d0),Ba.forEach(d0)}function Gl(n,i){n.blockedOn===i&&(n.blockedOn=null,nh||(nh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,c2)))}var ql=null;function h0(n){ql!==n&&(ql=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ql===n&&(ql=null);for(var i=0;i<n.length;i+=3){var d=n[i],b=n[i+1],k=n[i+2];if(typeof b!="function"){if(th(b||d)===null)continue;break}var _=Hr(d);_!==null&&(n.splice(i,3),i-=3,td(_,{pending:!0,data:k,method:d.method,action:b},b,k))}}))}function Ua(n){function i(se){return Gl(se,n)}qi!==null&&Gl(qi,n),Wi!==null&&Gl(Wi,n),Ki!==null&&Gl(Ki,n),Ia.forEach(i),Ba.forEach(i);for(var d=0;d<Zi.length;d++){var b=Zi[d];b.blockedOn===n&&(b.blockedOn=null)}for(;0<Zi.length&&(d=Zi[0],d.blockedOn===null);)u0(d),d.blockedOn===null&&Zi.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(b=0;b<d.length;b+=3){var k=d[b],_=d[b+1],P=k[sn]||null;if(typeof _=="function")P||h0(d);else if(P){var U=null;if(_&&_.hasAttribute("formAction")){if(k=_,P=_[sn]||null)U=P.formAction;else if(th(k)!==null)continue}else U=P.action;typeof U=="function"?d[b+1]=U:(d.splice(b,3),b-=3),h0(d)}}}function ih(n){this._internalRoot=n}Wl.prototype.render=ih.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var d=i.current,b=xn();s0(d,b,n,i,null,null)},Wl.prototype.unmount=ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;s0(n.current,2,null,n,null,null),Ml(),i[Vr]=null}};function Wl(n){this._internalRoot=n}Wl.prototype.unstable_scheduleHydration=function(n){if(n){var i=Em();n={blockedOn:null,target:n,priority:i};for(var d=0;d<Zi.length&&i!==0&&i<Zi[d].priority;d++);Zi.splice(d,0,n),d===0&&u0(n)}};var f0=e.version;if(f0!=="19.1.0")throw Error(o(527,f0,"19.1.0"));q.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=s(i),n=n!==null?u(n):null,n=n===null?null:n.stateNode,n};var u2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Ne=Kl.inject(u2),Me=Kl}catch{}}return $a.createRoot=function(n,i){if(!x(n))throw Error(o(299));var d=!1,b="",k=Ep,_=Mp,P=Op,U=null;return i!=null&&(i.unstable_strictMode===!0&&(d=!0),i.identifierPrefix!==void 0&&(b=i.identifierPrefix),i.onUncaughtError!==void 0&&(k=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(U=i.unstable_transitionCallbacks)),i=i0(n,1,!1,null,null,d,b,k,_,P,U,null),n[Vr]=i.current,Id(n),new ih(i)},$a.hydrateRoot=function(n,i,d){if(!x(n))throw Error(o(299));var b=!1,k="",_=Ep,P=Mp,U=Op,se=null,ye=null;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(k=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(se=d.unstable_transitionCallbacks),d.formState!==void 0&&(ye=d.formState)),i=i0(n,1,!0,i,d??null,b,k,_,P,U,se,ye),i.context=r0(null),d=i.current,b=xn(),b=qc(b),k=Ri(b),k.callback=null,Pi(d,k,b),d=b,i.current.lanes=d,qs(i,d),Wn(i),n[Vr]=i.current,Id(n),new Wl(i)},$a.version="19.1.0",$a}var C0;function w2(){if(C0)return ah.exports;C0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ah.exports=v2(),ah.exports}var S2=w2();const C2=Cf(S2);var Xa={},k0;function k2(){if(k0)return Xa;k0=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.parse=S,Xa.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,x=Object.prototype.toString,v=(()=>{const l=function(){};return l.prototype=Object.create(null),l})();function S(l,c){const m=new v,y=l.length;if(y<2)return m;const p=(c==null?void 0:c.decode)||h;let w=0;do{const C=l.indexOf("=",w);if(C===-1)break;const T=l.indexOf(";",w),j=T===-1?y:T;if(C>j){w=l.lastIndexOf(";",C-1)+1;continue}const E=f(l,w,C),M=s(l,C,E),D=l.slice(E,M);if(m[D]===void 0){let A=f(l,C+1,j),I=s(l,j,A);const X=p(l.slice(A,I));m[D]=X}w=j+1}while(w<y);return m}function f(l,c,m){do{const y=l.charCodeAt(c);if(y!==32&&y!==9)return c}while(++c<m);return m}function s(l,c,m){for(;c>m;){const y=l.charCodeAt(--c);if(y!==32&&y!==9)return c+1}return m}function u(l,c,m){const y=(m==null?void 0:m.encode)||encodeURIComponent;if(!t.test(l))throw new TypeError(`argument name is invalid: ${l}`);const p=y(c);if(!e.test(p))throw new TypeError(`argument val is invalid: ${c}`);let w=l+"="+p;if(!m)return w;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);w+="; Max-Age="+m.maxAge}if(m.domain){if(!r.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);w+="; Domain="+m.domain}if(m.path){if(!o.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);w+="; Path="+m.path}if(m.expires){if(!a(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);w+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(w+="; HttpOnly"),m.secure&&(w+="; Secure"),m.partitioned&&(w+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return w}function h(l){if(l.indexOf("%")===-1)return l;try{return decodeURIComponent(l)}catch{return l}}function a(l){return x.call(l)==="[object Date]"}return Xa}k2();var T0="popstate";function T2(t={}){function e(x,v){let{pathname:S="/",search:f="",hash:s=""}=Bs(x.location.hash.substring(1));return!S.startsWith("/")&&!S.startsWith(".")&&(S="/"+S),Ih("",{pathname:S,search:f,hash:s},v.state&&v.state.usr||null,v.state&&v.state.key||"default")}function r(x,v){let S=x.document.querySelector("base"),f="";if(S&&S.getAttribute("href")){let s=x.location.href,u=s.indexOf("#");f=u===-1?s:s.slice(0,u)}return f+"#"+(typeof v=="string"?v:mo(v))}function o(x,v){Hn(x.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(v)})`)}return _2(e,r,o,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Hn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j2(){return Math.random().toString(36).substring(2,10)}function j0(t,e){return{usr:t.state,key:t.key,idx:e}}function Ih(t,e,r=null,o){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Bs(e):e,state:r,key:e&&e.key||o||j2()}}function mo({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Bs(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let o=t.indexOf("?");o>=0&&(e.search=t.substring(o),t=t.substring(0,o)),t&&(e.pathname=t)}return e}function _2(t,e,r,o={}){let{window:x=document.defaultView,v5Compat:v=!1}=o,S=x.history,f="POP",s=null,u=h();u==null&&(u=0,S.replaceState({...S.state,idx:u},""));function h(){return(S.state||{idx:null}).idx}function a(){f="POP";let p=h(),w=p==null?null:p-u;u=p,s&&s({action:f,location:y.location,delta:w})}function l(p,w){f="PUSH";let C=Ih(y.location,p,w);r&&r(C,p),u=h()+1;let T=j0(C,u),j=y.createHref(C);try{S.pushState(T,"",j)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;x.location.assign(j)}v&&s&&s({action:f,location:y.location,delta:1})}function c(p,w){f="REPLACE";let C=Ih(y.location,p,w);r&&r(C,p),u=h();let T=j0(C,u),j=y.createHref(C);S.replaceState(T,"",j),v&&s&&s({action:f,location:y.location,delta:0})}function m(p){let w=x.location.origin!=="null"?x.location.origin:x.location.href,C=typeof p=="string"?p:mo(p);return C=C.replace(/ $/,"%20"),Pt(w,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,w)}let y={get action(){return f},get location(){return t(x,S)},listen(p){if(s)throw new Error("A history only accepts one active listener");return x.addEventListener(T0,a),s=p,()=>{x.removeEventListener(T0,a),s=null}},createHref(p){return e(x,p)},createURL:m,encodeLocation(p){let w=m(p);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:l,replace:c,go(p){return S.go(p)}};return y}function Kb(t,e,r="/"){return N2(t,e,r,!1)}function N2(t,e,r,o){let x=typeof e=="string"?Bs(e):e,v=ji(x.pathname||"/",r);if(v==null)return null;let S=Zb(t);E2(S);let f=null;for(let s=0;f==null&&s<S.length;++s){let u=B2(v);f=z2(S[s],u,o)}return f}function Zb(t,e=[],r=[],o=""){let x=(v,S,f)=>{let s={relativePath:f===void 0?v.path||"":f,caseSensitive:v.caseSensitive===!0,childrenIndex:S,route:v};s.relativePath.startsWith("/")&&(Pt(s.relativePath.startsWith(o),`Absolute route path "${s.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(o.length));let u=Ti([o,s.relativePath]),h=r.concat(s);v.children&&v.children.length>0&&(Pt(v.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Zb(v.children,e,h,u)),!(v.path==null&&!v.index)&&e.push({path:u,score:L2(u,v.index),routesMeta:h})};return t.forEach((v,S)=>{var f;if(v.path===""||!((f=v.path)!=null&&f.includes("?")))x(v,S);else for(let s of Qb(v.path))x(v,S,s)}),e}function Qb(t){let e=t.split("/");if(e.length===0)return[];let[r,...o]=e,x=r.endsWith("?"),v=r.replace(/\?$/,"");if(o.length===0)return x?[v,""]:[v];let S=Qb(o.join("/")),f=[];return f.push(...S.map(s=>s===""?v:[v,s].join("/"))),x&&f.push(...S),f.map(s=>t.startsWith("/")&&s===""?"/":s)}function E2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:F2(e.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}var M2=/^:[\w-]+$/,O2=3,D2=2,A2=1,R2=10,P2=-2,_0=t=>t==="*";function L2(t,e){let r=t.split("/"),o=r.length;return r.some(_0)&&(o+=P2),e&&(o+=D2),r.filter(x=>!_0(x)).reduce((x,v)=>x+(M2.test(v)?O2:v===""?A2:R2),o)}function F2(t,e){return t.length===e.length&&t.slice(0,-1).every((o,x)=>o===e[x])?t[t.length-1]-e[e.length-1]:0}function z2(t,e,r=!1){let{routesMeta:o}=t,x={},v="/",S=[];for(let f=0;f<o.length;++f){let s=o[f],u=f===o.length-1,h=v==="/"?e:e.slice(v.length)||"/",a=gc({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},h),l=s.route;if(!a&&u&&r&&!o[o.length-1].route.index&&(a=gc({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},h)),!a)return null;Object.assign(x,a.params),S.push({params:x,pathname:Ti([v,a.pathname]),pathnameBase:$2(Ti([v,a.pathnameBase])),route:l}),a.pathnameBase!=="/"&&(v=Ti([v,a.pathnameBase]))}return S}function gc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,o]=I2(t.path,t.caseSensitive,t.end),x=e.match(r);if(!x)return null;let v=x[0],S=v.replace(/(.)\/+$/,"$1"),f=x.slice(1);return{params:o.reduce((u,{paramName:h,isOptional:a},l)=>{if(h==="*"){let m=f[l]||"";S=v.slice(0,v.length-m.length).replace(/(.)\/+$/,"$1")}const c=f[l];return a&&!c?u[h]=void 0:u[h]=(c||"").replace(/%2F/g,"/"),u},{}),pathname:v,pathnameBase:S,pattern:t}}function I2(t,e=!1,r=!0){Hn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let o=[],x="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(S,f,s)=>(o.push({paramName:f,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(o.push({paramName:"*"}),x+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?x+="\\/*$":t!==""&&t!=="/"&&(x+="(?:(?=\\/|$))"),[new RegExp(x,e?void 0:"i"),o]}function B2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ji(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,o=t.charAt(r);return o&&o!=="/"?null:t.slice(r)||"/"}function V2(t,e="/"){let{pathname:r,search:o="",hash:x=""}=typeof t=="string"?Bs(t):t;return{pathname:r?r.startsWith("/")?r:U2(r,e):e,search:X2(o),hash:Y2(x)}}function U2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(x=>{x===".."?r.length>1&&r.pop():x!=="."&&r.push(x)}),r.length>1?r.join("/"):"/"}function uh(t,e,r,o){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function H2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Jb(t){let e=H2(t);return e.map((r,o)=>o===e.length-1?r.pathname:r.pathnameBase)}function ev(t,e,r,o=!1){let x;typeof t=="string"?x=Bs(t):(x={...t},Pt(!x.pathname||!x.pathname.includes("?"),uh("?","pathname","search",x)),Pt(!x.pathname||!x.pathname.includes("#"),uh("#","pathname","hash",x)),Pt(!x.search||!x.search.includes("#"),uh("#","search","hash",x)));let v=t===""||x.pathname==="",S=v?"/":x.pathname,f;if(S==null)f=r;else{let a=e.length-1;if(!o&&S.startsWith("..")){let l=S.split("/");for(;l[0]==="..";)l.shift(),a-=1;x.pathname=l.join("/")}f=a>=0?e[a]:"/"}let s=V2(x,f),u=S&&S!=="/"&&S.endsWith("/"),h=(v||S===".")&&r.endsWith("/");return!s.pathname.endsWith("/")&&(u||h)&&(s.pathname+="/"),s}var Ti=t=>t.join("/").replace(/\/\/+/g,"/"),$2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tv=["POST","PUT","PATCH","DELETE"];new Set(tv);var q2=["GET",...tv];new Set(q2);var Vs=N.createContext(null);Vs.displayName="DataRouter";var Dc=N.createContext(null);Dc.displayName="DataRouterState";var nv=N.createContext({isTransitioning:!1});nv.displayName="ViewTransition";var W2=N.createContext(new Map);W2.displayName="Fetchers";var K2=N.createContext(null);K2.displayName="Await";var ii=N.createContext(null);ii.displayName="Navigation";var Ac=N.createContext(null);Ac.displayName="Location";var ri=N.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var Tf=N.createContext(null);Tf.displayName="RouteError";function Z2(t,{relative:e}={}){Pt(_o(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:o}=N.useContext(ii),{hash:x,pathname:v,search:S}=No(t,{relative:e}),f=v;return r!=="/"&&(f=v==="/"?r:Ti([r,v])),o.createHref({pathname:f,search:S,hash:x})}function _o(){return N.useContext(Ac)!=null}function ar(){return Pt(_o(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ac).location}var iv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rv(t){N.useContext(ii).static||N.useLayoutEffect(t)}function Q2(){let{isDataRoute:t}=N.useContext(ri);return t?fk():J2()}function J2(){Pt(_o(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Vs),{basename:e,navigator:r}=N.useContext(ii),{matches:o}=N.useContext(ri),{pathname:x}=ar(),v=JSON.stringify(Jb(o)),S=N.useRef(!1);return rv(()=>{S.current=!0}),N.useCallback((s,u={})=>{if(Hn(S.current,iv),!S.current)return;if(typeof s=="number"){r.go(s);return}let h=ev(s,JSON.parse(v),x,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ti([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,v,x,t])}var ek=N.createContext(null);function tk(t){let e=N.useContext(ri).outlet;return e&&N.createElement(ek.Provider,{value:t},e)}function No(t,{relative:e}={}){let{matches:r}=N.useContext(ri),{pathname:o}=ar(),x=JSON.stringify(Jb(r));return N.useMemo(()=>ev(t,JSON.parse(x),o,e==="path"),[t,x,o,e])}function nk(t,e){return sv(t)}function sv(t,e,r,o){Pt(_o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:x,static:v}=N.useContext(ii),{matches:S}=N.useContext(ri),f=S[S.length-1],s=f?f.params:{},u=f?f.pathname:"/",h=f?f.pathnameBase:"/",a=f&&f.route;{let C=a&&a.path||"";av(u,!a||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let l=ar(),c;c=l;let m=c.pathname||"/",y=m;if(h!=="/"){let C=h.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let p=!v&&r&&r.matches&&r.matches.length>0?r.matches:Kb(t,{pathname:y});return Hn(a||p!=null,`No routes matched location "${c.pathname}${c.search}${c.hash}" `),Hn(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${c.pathname}${c.search}${c.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),ok(p&&p.map(C=>Object.assign({},C,{params:Object.assign({},s,C.params),pathname:Ti([h,x.encodeLocation?x.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:Ti([h,x.encodeLocation?x.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),S,r,o)}function ik(){let t=hk(),e=G2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,o="rgba(200,200,200, 0.5)",x={padding:"0.5rem",backgroundColor:o},v={padding:"2px 4px",backgroundColor:o},S=null;return console.error("Error handled by React Router default ErrorBoundary:",t),S=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:v},"ErrorBoundary")," or"," ",N.createElement("code",{style:v},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:x},r):null,S)}var rk=N.createElement(ik,null),sk=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(ri.Provider,{value:this.props.routeContext},N.createElement(Tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ak({routeContext:t,match:e,children:r}){let o=N.useContext(Vs);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ri.Provider,{value:t},r)}function ok(t,e=[],r=null,o=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let x=t,v=r==null?void 0:r.errors;if(v!=null){let s=x.findIndex(u=>u.route.id&&(v==null?void 0:v[u.route.id])!==void 0);Pt(s>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(v).join(",")}`),x=x.slice(0,Math.min(x.length,s+1))}let S=!1,f=-1;if(r)for(let s=0;s<x.length;s++){let u=x[s];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(f=s),u.route.id){let{loaderData:h,errors:a}=r,l=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!a||a[u.route.id]===void 0);if(u.route.lazy||l){S=!0,f>=0?x=x.slice(0,f+1):x=[x[0]];break}}}return x.reduceRight((s,u,h)=>{let a,l=!1,c=null,m=null;r&&(a=v&&u.route.id?v[u.route.id]:void 0,c=u.route.errorElement||rk,S&&(f<0&&h===0?(av("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),l=!0,m=null):f===h&&(l=!0,m=u.route.hydrateFallbackElement||null)));let y=e.concat(x.slice(0,h+1)),p=()=>{let w;return a?w=c:l?w=m:u.route.Component?w=N.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=s,N.createElement(ak,{match:u,routeContext:{outlet:s,matches:y,isDataRoute:r!=null},children:w})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?N.createElement(sk,{location:r.location,revalidation:r.revalidation,component:c,error:a,children:p(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):p()},null)}function jf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lk(t){let e=N.useContext(Vs);return Pt(e,jf(t)),e}function ck(t){let e=N.useContext(Dc);return Pt(e,jf(t)),e}function uk(t){let e=N.useContext(ri);return Pt(e,jf(t)),e}function _f(t){let e=uk(t),r=e.matches[e.matches.length-1];return Pt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function dk(){return _f("useRouteId")}function hk(){var o;let t=N.useContext(Tf),e=ck("useRouteError"),r=_f("useRouteError");return t!==void 0?t:(o=e.errors)==null?void 0:o[r]}function fk(){let{router:t}=lk("useNavigate"),e=_f("useNavigate"),r=N.useRef(!1);return rv(()=>{r.current=!0}),N.useCallback(async(x,v={})=>{Hn(r.current,iv),r.current&&(typeof x=="number"?t.navigate(x):await t.navigate(x,{fromRouteId:e,...v}))},[t,e])}var N0={};function av(t,e,r){!e&&!N0[t]&&(N0[t]=!0,Hn(!1,r))}N.memo(mk);function mk({routes:t,future:e,state:r}){return sv(t,void 0,r,e)}function gk(t){return tk(t.context)}function pk({basename:t="/",children:e=null,location:r,navigationType:o="POP",navigator:x,static:v=!1}){Pt(!_o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let S=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:S,navigator:x,static:v,future:{}}),[S,x,v]);typeof r=="string"&&(r=Bs(r));let{pathname:s="/",search:u="",hash:h="",state:a=null,key:l="default"}=r,c=N.useMemo(()=>{let m=ji(s,S);return m==null?null:{location:{pathname:m,search:u,hash:h,state:a,key:l},navigationType:o}},[S,s,u,h,a,l,o]);return Hn(c!=null,`<Router basename="${S}"> is not able to match the URL "${s}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),c==null?null:N.createElement(ii.Provider,{value:f},N.createElement(Ac.Provider,{children:e,value:c}))}var oc="get",lc="application/x-www-form-urlencoded";function Rc(t){return t!=null&&typeof t.tagName=="string"}function xk(t){return Rc(t)&&t.tagName.toLowerCase()==="button"}function yk(t){return Rc(t)&&t.tagName.toLowerCase()==="form"}function bk(t){return Rc(t)&&t.tagName.toLowerCase()==="input"}function vk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wk(t,e){return t.button===0&&(!e||e==="_self")&&!vk(t)}var Zl=null;function Sk(){if(Zl===null)try{new FormData(document.createElement("form"),0),Zl=!1}catch{Zl=!0}return Zl}var Ck=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dh(t){return t!=null&&!Ck.has(t)?(Hn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lc}"`),null):t}function kk(t,e){let r,o,x,v,S;if(yk(t)){let f=t.getAttribute("action");o=f?ji(f,e):null,r=t.getAttribute("method")||oc,x=dh(t.getAttribute("enctype"))||lc,v=new FormData(t)}else if(xk(t)||bk(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=t.getAttribute("formaction")||f.getAttribute("action");if(o=s?ji(s,e):null,r=t.getAttribute("formmethod")||f.getAttribute("method")||oc,x=dh(t.getAttribute("formenctype"))||dh(f.getAttribute("enctype"))||lc,v=new FormData(f,t),!Sk()){let{name:u,type:h,value:a}=t;if(h==="image"){let l=u?`${u}.`:"";v.append(`${l}x`,"0"),v.append(`${l}y`,"0")}else u&&v.append(u,a)}}else{if(Rc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=oc,o=null,x=lc,S=t}return v&&x==="text/plain"&&(S=v,v=void 0),{action:o,method:r.toLowerCase(),encType:x,formData:v,body:S}}function Nf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Tk(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _k(t,e,r){let o=await Promise.all(t.map(async x=>{let v=e.routes[x.route.id];if(v){let S=await Tk(v,r);return S.links?S.links():[]}return[]}));return Ok(o.flat(1).filter(jk).filter(x=>x.rel==="stylesheet"||x.rel==="preload").map(x=>x.rel==="stylesheet"?{...x,rel:"prefetch",as:"style"}:{...x,rel:"prefetch"}))}function E0(t,e,r,o,x,v){let S=(s,u)=>r[u]?s.route.id!==r[u].route.id:!0,f=(s,u)=>{var h;return r[u].pathname!==s.pathname||((h=r[u].route.path)==null?void 0:h.endsWith("*"))&&r[u].params["*"]!==s.params["*"]};return v==="assets"?e.filter((s,u)=>S(s,u)||f(s,u)):v==="data"?e.filter((s,u)=>{var a;let h=o.routes[s.route.id];if(!h||!h.hasLoader)return!1;if(S(s,u)||f(s,u))return!0;if(s.route.shouldRevalidate){let l=s.route.shouldRevalidate({currentUrl:new URL(x.pathname+x.search+x.hash,window.origin),currentParams:((a=r[0])==null?void 0:a.params)||{},nextUrl:new URL(t,window.origin),nextParams:s.params,defaultShouldRevalidate:!0});if(typeof l=="boolean")return l}return!0}):[]}function Nk(t,e,{includeHydrateFallback:r}={}){return Ek(t.map(o=>{let x=e.routes[o.route.id];if(!x)return[];let v=[x.module];return x.clientActionModule&&(v=v.concat(x.clientActionModule)),x.clientLoaderModule&&(v=v.concat(x.clientLoaderModule)),r&&x.hydrateFallbackModule&&(v=v.concat(x.hydrateFallbackModule)),x.imports&&(v=v.concat(x.imports)),v}).flat(1))}function Ek(t){return[...new Set(t)]}function Mk(t){let e={},r=Object.keys(t).sort();for(let o of r)e[o]=t[o];return e}function Ok(t,e){let r=new Set;return new Set(e),t.reduce((o,x)=>{let v=JSON.stringify(Mk(x));return r.has(v)||(r.add(v),o.push({key:v,link:x})),o},[])}var Dk=new Set([100,101,204,205]);function Ak(t,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname="_root.data":e&&ji(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function ov(){let t=N.useContext(Vs);return Nf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Rk(){let t=N.useContext(Dc);return Nf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ef=N.createContext(void 0);Ef.displayName="FrameworkContext";function lv(){let t=N.useContext(Ef);return Nf(t,"You must render this element inside a <HydratedRouter> element"),t}function Pk(t,e){let r=N.useContext(Ef),[o,x]=N.useState(!1),[v,S]=N.useState(!1),{onFocus:f,onBlur:s,onMouseEnter:u,onMouseLeave:h,onTouchStart:a}=e,l=N.useRef(null);N.useEffect(()=>{if(t==="render"&&S(!0),t==="viewport"){let y=w=>{w.forEach(C=>{S(C.isIntersecting)})},p=new IntersectionObserver(y,{threshold:.5});return l.current&&p.observe(l.current),()=>{p.disconnect()}}},[t]),N.useEffect(()=>{if(o){let y=setTimeout(()=>{S(!0)},100);return()=>{clearTimeout(y)}}},[o]);let c=()=>{x(!0)},m=()=>{x(!1),S(!1)};return r?t!=="intent"?[v,l,{}]:[v,l,{onFocus:Ya(f,c),onBlur:Ya(s,m),onMouseEnter:Ya(u,c),onMouseLeave:Ya(h,m),onTouchStart:Ya(a,c)}]:[!1,l,{}]}function Ya(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function Lk({page:t,...e}){let{router:r}=ov(),o=N.useMemo(()=>Kb(r.routes,t,r.basename),[r.routes,t,r.basename]);return o?N.createElement(zk,{page:t,matches:o,...e}):null}function Fk(t){let{manifest:e,routeModules:r}=lv(),[o,x]=N.useState([]);return N.useEffect(()=>{let v=!1;return _k(t,e,r).then(S=>{v||x(S)}),()=>{v=!0}},[t,e,r]),o}function zk({page:t,matches:e,...r}){let o=ar(),{manifest:x,routeModules:v}=lv(),{basename:S}=ov(),{loaderData:f,matches:s}=Rk(),u=N.useMemo(()=>E0(t,e,s,x,o,"data"),[t,e,s,x,o]),h=N.useMemo(()=>E0(t,e,s,x,o,"assets"),[t,e,s,x,o]),a=N.useMemo(()=>{if(t===o.pathname+o.search+o.hash)return[];let m=new Set,y=!1;if(e.forEach(w=>{var T;let C=x.routes[w.route.id];!C||!C.hasLoader||(!u.some(j=>j.route.id===w.route.id)&&w.route.id in f&&((T=v[w.route.id])!=null&&T.shouldRevalidate)||C.hasClientLoader?y=!0:m.add(w.route.id))}),m.size===0)return[];let p=Ak(t,S);return y&&m.size>0&&p.searchParams.set("_routes",e.filter(w=>m.has(w.route.id)).map(w=>w.route.id).join(",")),[p.pathname+p.search]},[S,f,o,x,u,e,t,v]),l=N.useMemo(()=>Nk(h,x),[h,x]),c=Fk(h);return N.createElement(N.Fragment,null,a.map(m=>N.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),l.map(m=>N.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),c.map(({key:m,link:y})=>N.createElement("link",{key:m,...y})))}function Ik(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cv&&(window.__reactRouterVersion="7.5.3")}catch{}function Bk({basename:t,children:e,window:r}){let o=N.useRef();o.current==null&&(o.current=T2({window:r,v5Compat:!0}));let x=o.current,[v,S]=N.useState({action:x.action,location:x.location}),f=N.useCallback(s=>{N.startTransition(()=>S(s))},[S]);return N.useLayoutEffect(()=>x.listen(f),[x,f]),N.createElement(pk,{basename:t,children:e,location:v.location,navigationType:v.action,navigator:x})}var uv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mf=N.forwardRef(function({onClick:e,discover:r="render",prefetch:o="none",relative:x,reloadDocument:v,replace:S,state:f,target:s,to:u,preventScrollReset:h,viewTransition:a,...l},c){let{basename:m}=N.useContext(ii),y=typeof u=="string"&&uv.test(u),p,w=!1;if(typeof u=="string"&&y&&(p=u,cv))try{let I=new URL(window.location.href),X=u.startsWith("//")?new URL(I.protocol+u):new URL(u),oe=ji(X.pathname,m);X.origin===I.origin&&oe!=null?u=oe+X.search+X.hash:w=!0}catch{Hn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Z2(u,{relative:x}),[T,j,E]=Pk(o,l),M=Hk(u,{replace:S,state:f,target:s,preventScrollReset:h,relative:x,viewTransition:a});function D(I){e&&e(I),I.defaultPrevented||M(I)}let A=N.createElement("a",{...l,...E,href:p||C,onClick:w||v?e:D,ref:Ik(c,j),target:s,"data-discover":!y&&r==="render"?"true":void 0});return T&&!y?N.createElement(N.Fragment,null,A,N.createElement(Lk,{page:C})):A});Mf.displayName="Link";var dv=N.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:o="",end:x=!1,style:v,to:S,viewTransition:f,children:s,...u},h){let a=No(S,{relative:u.relative}),l=ar(),c=N.useContext(Dc),{navigator:m,basename:y}=N.useContext(ii),p=c!=null&&qk(a)&&f===!0,w=m.encodeLocation?m.encodeLocation(a).pathname:a.pathname,C=l.pathname,T=c&&c.navigation&&c.navigation.location?c.navigation.location.pathname:null;r||(C=C.toLowerCase(),T=T?T.toLowerCase():null,w=w.toLowerCase()),T&&y&&(T=ji(T,y)||T);const j=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let E=C===w||!x&&C.startsWith(w)&&C.charAt(j)==="/",M=T!=null&&(T===w||!x&&T.startsWith(w)&&T.charAt(w.length)==="/"),D={isActive:E,isPending:M,isTransitioning:p},A=E?e:void 0,I;typeof o=="function"?I=o(D):I=[o,E?"active":null,M?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let X=typeof v=="function"?v(D):v;return N.createElement(Mf,{...u,"aria-current":A,className:I,ref:h,style:X,to:S,viewTransition:f},typeof s=="function"?s(D):s)});dv.displayName="NavLink";var Vk=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:o,replace:x,state:v,method:S=oc,action:f,onSubmit:s,relative:u,preventScrollReset:h,viewTransition:a,...l},c)=>{let m=Yk(),y=Gk(f,{relative:u}),p=S.toLowerCase()==="get"?"get":"post",w=typeof f=="string"&&uv.test(f),C=T=>{if(s&&s(T),T.defaultPrevented)return;T.preventDefault();let j=T.nativeEvent.submitter,E=(j==null?void 0:j.getAttribute("formmethod"))||S;m(j||T.currentTarget,{fetcherKey:e,method:E,navigate:r,replace:x,state:v,relative:u,preventScrollReset:h,viewTransition:a})};return N.createElement("form",{ref:c,method:p,action:y,onSubmit:o?s:C,...l,"data-discover":!w&&t==="render"?"true":void 0})});Vk.displayName="Form";function Uk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hv(t){let e=N.useContext(Vs);return Pt(e,Uk(t)),e}function Hk(t,{target:e,replace:r,state:o,preventScrollReset:x,relative:v,viewTransition:S}={}){let f=Q2(),s=ar(),u=No(t,{relative:v});return N.useCallback(h=>{if(wk(h,e)){h.preventDefault();let a=r!==void 0?r:mo(s)===mo(u);f(t,{replace:a,state:o,preventScrollReset:x,relative:v,viewTransition:S})}},[s,f,u,r,o,e,t,x,v,S])}var $k=0,Xk=()=>`__${String(++$k)}__`;function Yk(){let{router:t}=hv("useSubmit"),{basename:e}=N.useContext(ii),r=dk();return N.useCallback(async(o,x={})=>{let{action:v,method:S,encType:f,formData:s,body:u}=kk(o,e);if(x.navigate===!1){let h=x.fetcherKey||Xk();await t.fetch(h,r,x.action||v,{preventScrollReset:x.preventScrollReset,formData:s,body:u,formMethod:x.method||S,formEncType:x.encType||f,flushSync:x.flushSync})}else await t.navigate(x.action||v,{preventScrollReset:x.preventScrollReset,formData:s,body:u,formMethod:x.method||S,formEncType:x.encType||f,replace:x.replace,state:x.state,fromRouteId:r,flushSync:x.flushSync,viewTransition:x.viewTransition})},[t,e,r])}function Gk(t,{relative:e}={}){let{basename:r}=N.useContext(ii),o=N.useContext(ri);Pt(o,"useFormAction must be used inside a RouteContext");let[x]=o.matches.slice(-1),v={...No(t||".",{relative:e})},S=ar();if(t==null){v.search=S.search;let f=new URLSearchParams(v.search),s=f.getAll("index");if(s.some(h=>h==="")){f.delete("index"),s.filter(a=>a).forEach(a=>f.append("index",a));let h=f.toString();v.search=h?`?${h}`:""}}return(!t||t===".")&&x.route.index&&(v.search=v.search?v.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(v.pathname=v.pathname==="/"?r:Ti([r,v.pathname])),mo(v)}function qk(t,e={}){let r=N.useContext(nv);Pt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=hv("useViewTransitionState"),x=No(t,{relative:e.relative});if(!r.isTransitioning)return!1;let v=ji(r.currentLocation.pathname,o)||r.currentLocation.pathname,S=ji(r.nextLocation.pathname,o)||r.nextLocation.pathname;return gc(x.pathname,S)!=null||gc(x.pathname,v)!=null}new TextEncoder;[...Dk];const Wk=(t,e,r,o)=>{var v,S,f,s;const x=[r,{code:e,...o||{}}];if((S=(v=t==null?void 0:t.services)==null?void 0:v.logger)!=null&&S.forward)return t.services.logger.forward(x,"warn","react-i18next::",!0);Ar(x[0])&&(x[0]=`react-i18next:: ${x[0]}`),(s=(f=t==null?void 0:t.services)==null?void 0:f.logger)!=null&&s.warn?t.services.logger.warn(...x):console!=null&&console.warn&&console.warn(...x)},M0={},Bh=(t,e,r,o)=>{Ar(r)&&M0[r]||(Ar(r)&&(M0[r]=new Date),Wk(t,e,r,o))},fv=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},Vh=(t,e,r)=>{t.loadNamespaces(e,fv(t,r))},O0=(t,e,r,o)=>{if(Ar(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Vh(t,r,o);r.forEach(x=>{t.options.ns.indexOf(x)<0&&t.options.ns.push(x)}),t.loadLanguages(e,fv(t,o))},Kk=(t,e,r={})=>!e.languages||!e.languages.length?(Bh(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(o,x)=>{var v;if(((v=r.bindI18n)==null?void 0:v.indexOf("languageChanging"))>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!x(o.isLanguageChangingTo,t))return!1}}),Ar=t=>typeof t=="string",Zk=t=>typeof t=="object"&&t!==null,Qk=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Jk={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},eT=t=>Jk[t],tT=t=>t.replace(Qk,eT);let Uh={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:tT};const nT=(t={})=>{Uh={...Uh,...t}},iT=()=>Uh;let mv;const rT=t=>{mv=t},sT=()=>mv,aT={type:"3rdParty",init(t){nT(t.options.react),rT(t)}},oT=N.createContext();class lT{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const cT=(t,e)=>{const r=N.useRef();return N.useEffect(()=>{r.current=t},[t,e]),r.current},gv=(t,e,r,o)=>t.getFixedT(e,r,o),uT=(t,e,r,o)=>N.useCallback(gv(t,e,r,o),[t,e,r,o]),tt=(t,e={})=>{var j,E,M,D;const{i18n:r}=e,{i18n:o,defaultNS:x}=N.useContext(oT)||{},v=r||o||sT();if(v&&!v.reportNamespaces&&(v.reportNamespaces=new lT),!v){Bh(v,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const A=(X,oe)=>Ar(oe)?oe:Zk(oe)&&Ar(oe.defaultValue)?oe.defaultValue:Array.isArray(X)?X[X.length-1]:X,I=[A,{},!1];return I.t=A,I.i18n={},I.ready=!1,I}(j=v.options.react)!=null&&j.wait&&Bh(v,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const S={...iT(),...v.options.react,...e},{useSuspense:f,keyPrefix:s}=S;let u=x||((E=v.options)==null?void 0:E.defaultNS);u=Ar(u)?[u]:u||["translation"],(D=(M=v.reportNamespaces).addUsedNamespaces)==null||D.call(M,u);const h=(v.isInitialized||v.initializedStoreOnce)&&u.every(A=>Kk(A,v,S)),a=uT(v,e.lng||null,S.nsMode==="fallback"?u:u[0],s),l=()=>a,c=()=>gv(v,e.lng||null,S.nsMode==="fallback"?u:u[0],s),[m,y]=N.useState(l);let p=u.join();e.lng&&(p=`${e.lng}${p}`);const w=cT(p),C=N.useRef(!0);N.useEffect(()=>{const{bindI18n:A,bindI18nStore:I}=S;C.current=!0,!h&&!f&&(e.lng?O0(v,e.lng,u,()=>{C.current&&y(c)}):Vh(v,u,()=>{C.current&&y(c)})),h&&w&&w!==p&&C.current&&y(c);const X=()=>{C.current&&y(c)};return A&&(v==null||v.on(A,X)),I&&(v==null||v.store.on(I,X)),()=>{C.current=!1,v&&(A==null||A.split(" ").forEach(oe=>v.off(oe,X))),I&&v&&I.split(" ").forEach(oe=>v.store.off(oe,X))}},[v,p]),N.useEffect(()=>{C.current&&h&&y(l)},[v,s,h]);const T=[m,v,h];if(T.t=m,T.i18n=v,T.ready=h,h||!h&&!f)return T;throw new Promise(A=>{e.lng?O0(v,e.lng,u,()=>A()):Vh(v,u,()=>A())})};function dT(){const{t}=tt();return g.jsxs("div",{className:"p-4 sm:p-6 text-text",children:[g.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mb-4 sm:mb-6",children:t("homePage")}),g.jsx("p",{className:"text-sm sm:text-base text-text-muted",children:t("welcome")})]})}const Kn={render:"#9C27B0",context:"#2196F3",effect:"#FF9800",websocket:"#4CAF50",performance:"#F44336",info:"#607D8B"};class hT{constructor(){this.renderCounts={},this.startTime=Date.now()}logRender(e,r={},o=""){this.renderCounts[e]=(this.renderCounts[e]||0)+1;const x=this.renderCounts[e],v=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[RENDER #${x}] %c${e} %c(${v}s)`,`color: ${Kn.render}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),o&&console.log(`  └─ Reason: ${o}`),Object.keys(r).length>0&&console.log("  └─ Props:",r),x>10&&x%5===0&&console.warn(`%c⚠️ ${e} rendered ${x} times!`,`color: ${Kn.performance}; font-weight: bold`)}logContext(e,r={}){const o=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[CONTEXT] %c${e} %c(${o}s)`,`color: ${Kn.context}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("  └─ Updates:",r)}logEffect(e,r,o=[]){const x=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[EFFECT] %c${e}.${r} %c(${x}s)`,`color: ${Kn.effect}; font-weight: bold`,"color: #333","color: #999; font-size: 0.9em"),o.length>0&&console.log("  └─ Dependencies:",o)}logWebSocket(e,r={}){const o=((Date.now()-this.startTime)/1e3).toFixed(2);console.log(`%c[WEBSOCKET] %c${e} %c(${o}s)`,`color: ${Kn.websocket}; font-weight: bold`,"color: #333; font-weight: bold","color: #999; font-size: 0.9em"),Object.keys(r).length>0&&console.log("  └─ Data:",r)}logPerformance(e,r){const o=r>100?Kn.performance:Kn.info,x=r>100?"🐌":"⚡";console.log(`%c[PERFORMANCE] ${x} %c${e}: ${r.toFixed(2)}ms`,`color: ${o}; font-weight: bold`,`color: ${o}`),r>100&&console.warn(`⚠️ Slow operation detected: ${e} took ${r.toFixed(2)}ms`)}logStats(){console.group("%c📊 Render Statistics","color: #2196F3; font-weight: bold; font-size: 14px"),Object.entries(this.renderCounts).sort((r,o)=>o[1]-r[1]).forEach(([r,o])=>{const x=o>10?Kn.performance:Kn.info;console.log(`%c${r}: %c${o} renders`,"color: #333; font-weight: bold",`color: ${x}`)}),console.groupEnd()}reset(){this.renderCounts={},this.startTime=Date.now(),console.clear(),console.log("%c🔄 Debug Logger Reset","color: #4CAF50; font-weight: bold; font-size: 14px")}group(e,r=Kn.info){console.group(`%c${e}`,`color: ${r}; font-weight: bold`)}groupEnd(){console.groupEnd()}}const Jn=new hT;typeof window<"u"&&(window.debugLogger=Jn,window.showRenderStats=()=>Jn.logStats(),window.resetDebugLogger=()=>Jn.reset(),console.log("%c🔍 Debug Logger Active","color: #4CAF50; font-weight: bold; font-size: 14px"),console.log("%cCommands available:","color: #2196F3; font-weight: bold"),console.log("  • showRenderStats() - نمایش آمار renders"),console.log("  • resetDebugLogger() - ریست کردن counters"),console.log("  • debugLogger - دسترسی مستقیم به logger"));const pv=N.createContext(),fT=({children:t})=>{Jn.logRender("WebSocketProvider");const[e,r]=N.useState(null),[o,x]=N.useState(!1),[v,S]=N.useState("connecting"),f=N.useRef([]),s=N.useRef(0),u=N.useRef(null),h=N.useRef(!1),a=N.useRef(null),l="ws://localhost:12345",c=10,m=N.useCallback(()=>{if(u.current&&(clearTimeout(u.current),u.current=null),a.current){const M=a.current;(M.readyState===WebSocket.OPEN||M.readyState===WebSocket.CONNECTING)&&M.close(1e3,"Cleanup"),a.current=null}},[]),y=N.useCallback(()=>{if(h.current)return;a.current&&m(),S("connecting");const M=new WebSocket(l);a.current=M,r(M),M.onopen=()=>{if(h.current){M.close(1e3,"Component unmounted");return}Jn.logWebSocket("CONNECTED"),console.log("✅ WebSocket connected"),x(!0),S("connected"),s.current=0},M.onmessage=D=>{if(h.current)return;const A=D.data;f.current.forEach(I=>{try{I(A)}catch(X){console.error("❌ Error in message callback:",X)}})},M.onerror=D=>{h.current||console.error("❌ WebSocket error:",D),S("disconnected")},M.onclose=D=>{h.current||(D.code!==1e3&&console.warn("⚠️ WebSocket disconnected",D.code),x(!1),S("disconnected"),D.code!==1e3&&s.current<c&&p())}},[m]),p=N.useCallback(()=>{if(h.current||s.current>=c){console.error("❌ Max reconnection attempts reached");return}const M=Math.min(1e4,1e3*Math.pow(2,s.current));console.log(`🔄 Reconnecting in ${M/1e3}s... (attempt ${s.current+1})`),S("reconnecting"),u.current=setTimeout(()=>{h.current||(s.current+=1,y())},M)},[y]);N.useEffect(()=>(h.current=!1,y(),()=>{h.current=!0,m()}),[]);const w=N.useCallback(M=>{if(a.current&&a.current.readyState===WebSocket.OPEN)try{return a.current.send(M),!0}catch(D){return console.error("❌ Error sending message:",D),!1}return console.warn("⚠️ WebSocket not ready to send. Current state:",a.current?a.current.readyState:"null"),!1},[]),C=N.useCallback(M=>{if(typeof M=="function")return f.current.push(M),()=>T(M)},[]),T=N.useCallback(M=>{f.current=f.current.filter(D=>D!==M)},[]),j=N.useCallback(()=>{s.current=0,y()},[y]),E=N.useMemo(()=>({isConnected:o,connectionStatus:v,send:w,addMessageCallback:C,removeMessageCallback:T,reconnect:j}),[o,v,w,C,T,j]);return g.jsx(pv.Provider,{value:E,children:t})},Us=()=>{const t=N.useContext(pv);if(!t)throw new Error("useWebSocket must be used within a WebSocketProvider");return t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,o)=>o?o.toUpperCase():r.toLowerCase()),D0=t=>{const e=gT(t);return e.charAt(0).toUpperCase()+e.slice(1)},xv=(...t)=>t.filter((e,r,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===r).join(" ").trim(),pT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:x="",children:v,iconNode:S,...f},s)=>N.createElement("svg",{ref:s,...xT,width:e,height:e,stroke:t,strokeWidth:o?Number(r)*24/Number(e):r,className:xv("lucide",x),...!v&&!pT(f)&&{"aria-hidden":"true"},...f},[...S.map(([u,h])=>N.createElement(u,h)),...Array.isArray(v)?v:[v]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const r=N.forwardRef(({className:o,...x},v)=>N.createElement(yT,{ref:v,iconNode:e,className:xv(`lucide-${mT(D0(t))}`,`lucide-${t}`,o),...x}));return r.displayName=D0(t),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],nr=Ee("activity",bT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m14.31 8 5.74 9.94",key:"1y6ab4"}],["path",{d:"M9.69 8h11.48",key:"1wxppr"}],["path",{d:"m7.38 12 5.74-9.94",key:"1grp0k"}],["path",{d:"M9.69 16 3.95 6.06",key:"libnyf"}],["path",{d:"M14.31 16H2.83",key:"x5fava"}],["path",{d:"m16.62 12-5.74 9.94",key:"1vwawt"}]],wT=Ee("aperture",vT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],A0=Ee("arrow-right-left",ST);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],kT=Ee("battery",CT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"m11 10 3 3",key:"fzmg1i"}],["path",{d:"M6.5 21A3.5 3.5 0 1 0 3 17.5a2.62 2.62 0 0 1-.708 1.792A1 1 0 0 0 3 21z",key:"p4q2r7"}],["path",{d:"M9.969 17.031 21.378 5.624a1 1 0 0 0-3.002-3.002L6.967 14.031",key:"wy6l02"}]],jT=Ee("brush",TT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],go=Ee("camera",_T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],to=Ee("chart-column",NT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],MT=Ee("chart-line",ET);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],DT=Ee("check",OT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pc=Ee("chevron-down",AT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yv=Ee("chevron-left",RT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bv=Ee("chevron-right",PT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Hh=Ee("chevron-up",LT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xc=Ee("circle-alert",FT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Eo=Ee("circle-check-big",zT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],vv=Ee("circle-x",IT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Of=Ee("circle",BT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],UT=Ee("clock",VT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$T=Ee("copy",HT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],Qa=Ee("crop",XT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Ls=Ee("crosshair",YT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ir=Ee("download",GT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],$h=Ee("eraser",qT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],KT=Ee("factory",WT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],R0=Ee("file-text",ZT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]],JT=Ee("flip-horizontal",QT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],wv=Ee("focus",ej);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vn=Ee("funnel",tj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],po=Ee("gauge",nj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rj=Ee("grid-3x3",ij);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],aj=Ee("hand",sj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],P0=Ee("house",oj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],cj=Ee("image-plus",lj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],L0=Ee("image",uj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mo=Ee("info",dj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Sv=Ee("layers",hj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],mj=Ee("layout-dashboard",fj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pj=Ee("lock",gj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yc=Ee("map-pin",xj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],F0=Ee("maximize-2",yj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],xo=Ee("maximize",bj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Rr=Ee("minus",vj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Sj=Ee("monitor",wj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],kj=Ee("moon",Cj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],Df=Ee("move-3d",Tj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],_j=Ee("move-horizontal",jj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],cc=Ee("move",Nj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Cv=Ee("palette",Ej);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Af=Ee("pause",Mj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Rf=Ee("play",Oj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Aj=Ee("plus",Dj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],z0=Ee("power",Rj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],Lj=Ee("rectangle-horizontal",Pj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zj=Ee("refresh-cw",Fj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_i=Ee("rotate-ccw",Ij);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],no=Ee("rotate-cw",Bj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],hh=Ee("route",Vj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],I0=Ee("ruler",Uj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Oo=Ee("save",Hj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],B0=Ee("search",$j);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bt=Ee("settings",Xj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],V0=Ee("shield",Yj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],qj=Ee("sliders-vertical",Gj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Pr=Ee("sparkles",Wj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Zj=Ee("square-pen",Kj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Fs=Ee("square",Qj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],e_=Ee("sun",Jj);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],n_=Ee("target",t_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],kv=Ee("thermometer",i_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Pc=Ee("trash-2",r_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],a_=Ee("trending-down",s_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Lc=Ee("trending-up",o_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bc=Ee("triangle-alert",l_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],U0=Ee("undo-2",c_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Do=Ee("upload",u_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H0=Ee("video-off",d_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],$0=Ee("video",h_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]],X0=Ee("waypoints",f_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yt=Ee("x",m_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],p_=Ee("wrench",g_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Un=Ee("zap",x_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Ja=Ee("zoom-in",y_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Y0=Ee("zoom-out",b_),Ao=({icon:t})=>{const{t:e,i18n:r}=tt(),{isConnected:o}=Us(),x=r.language==="fa"?"text-right":"text-left";return o?g.jsx("div",{className:"panel bg-background-white dark:bg-background-secondary border border-border rounded-lg p-4 mb-6",children:g.jsxs("div",{className:"flex items-center gap-3 text-primary dark:text-primary",children:[g.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),g.jsx("span",{className:`font-medium font-vazir ${x}`,children:e("websocketConnected")})]})}):g.jsx("div",{className:"panel variant-highlight border border-border rounded-lg p-4 mb-6 animate-pulse",children:g.jsxs("div",{className:"flex items-center gap-3 text-white dark:text-white",children:[g.jsxs("div",{className:"relative",children:[g.jsx(t,{className:"w-5 h-5"}),g.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-highlight rounded-full animate-ping"})]}),g.jsx("span",{className:`font-medium font-vazir ${x}`,children:e("websocketConnecting")})]})})},Ct=({label:t,icon:e,children:r,value:o,unit:x,className:v="",showValue:S=!0})=>{const{i18n:f}=tt(),s=f.language==="fa",u=s?"flex-row-reverse":"flex-row",h=s?"text-right":"text-left";return g.jsxs("div",{className:`card p-4 transition-all duration-200 hover:shadow-md ${v}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[g.jsxs("div",{className:`flex items-center gap-2 ${u}`,children:[e&&g.jsx(e,{className:"w-5 h-5 text-primary flex-shrink-0"}),g.jsx("label",{className:`font-medium text-sm text-text dark:text-text ${h}`,children:t})]}),S&&o&&g.jsxs("span",{className:`text-sm text-primary dark:text-primary font-semibold ${h} flex-shrink-0`,children:[o," ",x]})]}),r]})},bt=({type:t="text",name:e,value:r,onChange:o,placeholder:x,min:v,max:S,step:f,disabled:s=!1,className:u="",...h})=>{const{i18n:a}=tt(),l=a.language==="fa"?"text-right":"text-left",c=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    ${s?"cursor-not-allowed opacity-50":""}
    ${l}
    ${t==="number"?"number-input":""}
  `;return g.jsx("input",{type:t,name:e,value:r||"",onChange:o,placeholder:x,min:v,max:S,step:f,disabled:s,className:`${c} ${u}`,...h})},tr=({name:t,value:e,onChange:r,options:o=[],disabled:x=!1,className:v="",...S})=>{const{i18n:f}=tt(),s=f.language==="fa"?"text-right":"text-left",u=`
    w-full px-3 py-2 border border-border rounded-lg
    bg-background-white dark:bg-background-secondary
    text-text dark:text-text outline-none
    focus:border-primary focus:ring-2 focus:ring-primary/20
    transition-all duration-200
    text-sm font-medium
    cursor-pointer
    ${x?"cursor-not-allowed opacity-50":""}
    ${s}
  `;return g.jsx("select",{name:t,value:e,onChange:r,disabled:x,className:`${u} ${v}`,...S,children:o.map(h=>g.jsx("option",{value:h.value,children:h.label},h.value))})},Lr=({active:t,onClick:e,icon:r,label:o,disabled:x=!1,className:v="",showStatus:S=!0})=>{const{t:f,i18n:s}=tt(),u=s.language==="fa"?"text-right":"text-left",h=`
    h-10 px-4 rounded-lg font-medium transition-all duration-200
    ${t?"bg-primary hover:bg-primary-dark text-white shadow-md":"bg-background-secondary hover:bg-accent text-text-muted"}
    ${x?"opacity-50 cursor-not-allowed":""}
    ${v}
  `;return g.jsxs("div",{children:[S&&g.jsx("div",{className:"flex items-center mb-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${t?"bg-primary":"bg-gray-400"}`}),g.jsx("span",{className:`text-sm font-medium transition-colors duration-200 ${t?"text-primary dark:text-primary":"text-text-muted dark:text-text-muted"} ${u}`,children:f(t?"active":"inactive")})]})}),g.jsx("button",{type:"button",onClick:e,disabled:x,className:h,children:g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r&&g.jsx(r,{className:"w-4 h-4"}),g.jsx("span",{children:o||f(t?"active":"inactive")})]})})]})},Ro=({children:t,maxWidth:e="max-w-5xl"})=>g.jsx("div",{className:"h-full bg-background dark:bg-background font-vazir overflow-auto",children:g.jsx("div",{className:`${e} mx-auto p-2 sm:p-3 lg:p-4`,children:t})}),v_=({onStatusChange:t})=>{const{t:e}=tt(),[r,o]=N.useState({interlock:{status:"ok",value:"Closed",message:""},temperature:{status:"ok",value:25.5,message:""},voltage:{status:"ok",value:220,message:""},pressure:{status:"ok",value:1,message:""},cooling:{status:"ok",value:"Active",message:""}});N.useEffect(()=>{const f=setInterval(()=>{const s=25+Math.random()*10,u=215+Math.random()*10,h={interlock:{status:Math.random()>.1?"ok":"warning",value:Math.random()>.1?"Closed":"Open",message:Math.random()>.1?"":"Door is open"},temperature:{status:s<30?"ok":s<35?"warning":"error",value:s.toFixed(1),message:s>30?"Temperature is high":""},voltage:{status:Math.abs(u-220)<5?"ok":Math.abs(u-220)<10?"warning":"error",value:u.toFixed(1),message:Math.abs(u-220)>5?"Voltage unstable":""},pressure:{status:"ok",value:(.95+Math.random()*.1).toFixed(2),message:""},cooling:{status:Math.random()>.05?"ok":"error",value:Math.random()>.05?"Active":"Inactive",message:Math.random()>.05?"":"Cooling system failed"}};o(h);const a=Object.values(h).some(c=>c.status==="error"),l=Object.values(h).some(c=>c.status==="warning");t&&t({overallStatus:a?"error":l?"warning":"ok",details:h})},2e3);return()=>clearInterval(f)},[t]);const x=f=>{switch(f){case"ok":return g.jsx(Eo,{className:"w-5 h-5 text-green-500"});case"warning":return g.jsx(xc,{className:"w-5 h-5 text-yellow-500"});case"error":return g.jsx(vv,{className:"w-5 h-5 text-red-500"});default:return g.jsx(xc,{className:"w-5 h-5 text-gray-400"})}},v=f=>{switch(f){case"ok":return"border-green-500 bg-green-50 dark:bg-green-900/20";case"warning":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"error":return"border-red-500 bg-red-50 dark:bg-red-900/20";default:return"border-gray-300 bg-gray-50 dark:bg-gray-900/20"}},S=[{key:"interlock",label:e("interlock")||"Interlock",icon:pj,unit:""},{key:"temperature",label:e("temperature")||"Temperature",icon:kv,unit:"°C"},{key:"voltage",label:e("voltage"),icon:Un,unit:"V"},{key:"pressure",label:e("pressure")||"Pressure",icon:po,unit:"bar"},{key:"cooling",label:e("coolingSystem")||"Cooling System",icon:V0,unit:""}];return g.jsxs("div",{className:"card p-4 lg:p-6",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx(V0,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("systemStabilityCheck")||"System Stability Check"})]}),g.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:S.map(({key:f,label:s,icon:u,unit:h})=>{const a=r[f];return g.jsxs("div",{className:`panel p-4 rounded-lg border-2 transition-all ${v(a.status)}`,children:[g.jsxs("div",{className:"flex items-start justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(u,{className:"w-4 h-4 text-text-muted dark:text-text-muted"}),g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:s})]}),x(a.status)]}),g.jsxs("div",{className:"mt-2",children:[g.jsxs("div",{className:"text-xl font-bold font-mono text-text dark:text-text",children:[a.value," ",h]}),a.message&&g.jsx("div",{className:"text-xs text-text-muted dark:text-text-muted mt-1",children:a.message})]})]},f)})})]})},w_=({tubeParams:t})=>{const{t:e}=tt(),[r,o]=N.useState([]),[x,v]=N.useState(!1),[S,f]=N.useState(50),s=N.useRef(null);N.useEffect(()=>{if(!x&&t){const l={id:Date.now(),timestamp:new Date().toLocaleTimeString("en-GB"),voltage:t.voltage||0,current:t.current||0,power:t.power||0,exposureTime:t.exposureTime||0,temperature:t.temperature||0};o(c=>[l,...c].slice(0,S))}},[t,x,S]),N.useEffect(()=>{s.current&&!x&&(s.current.scrollTop=0)},[r,x]);const u=()=>{if(r.length===0)return;const c=[["Timestamp","Voltage (kVp)","Current (mA)","Power (W)","Exposure Time (s)","Temperature (°C)"].join(","),...r.map(w=>`${w.timestamp},${w.voltage},${w.current},${w.power},${w.exposureTime},${w.temperature}`)].join(`
`),m=new Blob([c],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),p=URL.createObjectURL(m);y.setAttribute("href",p),y.setAttribute("download",`xray_exposure_log_${new Date().toISOString()}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},h=()=>{o([])},a=()=>{v(!x)};return g.jsxs("div",{className:"card p-4 lg:p-6",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(nr,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("xrayExposureLog")||"X-ray Tube & Exposure Log"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:a,className:"px-3 py-1.5 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-1.5 text-sm",children:x?g.jsxs(g.Fragment,{children:[g.jsx(Rf,{className:"w-4 h-4"}),g.jsx("span",{children:e("resume")||"Resume"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Af,{className:"w-4 h-4"}),g.jsx("span",{children:e("pause")||"Pause"})]})}),g.jsxs("button",{onClick:u,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Ir,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:e("download")||"Download"})]}),g.jsxs("button",{onClick:h,disabled:r.length===0,className:"px-3 py-1.5 rounded-lg bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Pc,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:e("clear")||"Clear"})]})]})]}),g.jsxs("div",{className:"mb-3 text-sm text-text-muted dark:text-text-muted",children:[e("totalLogs")||"Total logs",": ",r.length," / ",S,x&&g.jsxs("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400 font-medium",children:["(",e("paused")||"Paused",")"]})]}),g.jsx("div",{ref:s,className:"overflow-auto max-h-[400px] border border-border rounded-lg",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"bg-background-secondary dark:bg-background-primary sticky top-0",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-3 py-2 text-left font-medium text-text dark:text-text border-b border-border",children:e("time")||"Time"}),g.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("voltage")," (kVp)"]}),g.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("current")," (mA)"]}),g.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("power")," (W)"]}),g.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("exposureTime")," (s)"]}),g.jsxs("th",{className:"px-3 py-2 text-right font-medium text-text dark:text-text border-b border-border",children:[e("temperature")," (°C)"]})]})}),g.jsx("tbody",{children:r.length===0?g.jsx("tr",{children:g.jsx("td",{colSpan:"6",className:"px-3 py-8 text-center text-text-muted dark:text-text-muted",children:e("noLogsYet")||"No logs recorded yet"})}):r.map(l=>g.jsxs("tr",{className:"hover:bg-background-secondary/50 dark:hover:bg-background-primary/50 transition-colors",children:[g.jsx("td",{className:"px-3 py-2 text-text dark:text-text border-b border-border/50 font-mono text-xs",children:l.timestamp}),g.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.voltage}),g.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.current}),g.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.power}),g.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.exposureTime}),g.jsx("td",{className:"px-3 py-2 text-right text-text dark:text-text border-b border-border/50 font-mono",children:l.temperature})]},l.id))})]})})]})},Tv=N.createContext(),S_=({children:t})=>{const{isConnected:e,connectionStatus:r,addMessageCallback:o}=Us();Jn.logRender("CameraProvider",{connectionStatus:r});const x=N.useRef({basler:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0},monitoring:{currentFrame:null,lastUpdate:0,frameCount:0,avgFps:0,lastFpsCalculation:0}}),[v,S]=N.useState({basler:{isConnected:!1},monitoring:{isConnected:!1}}),f=N.useRef({basler:!1,monitoring:!1}),s=N.useRef(new Set),[u,h]=N.useState(null),[a,l]=N.useState([]),[c,m]=N.useState(!1),[y,p]=N.useState([]),[w,C]=N.useState([]),[T,j]=N.useState({brightness:100,contrast:100,saturation:100,zoom:1,grayscale:!1,crop:null,panOffset:{x:0,y:0}}),[E,M]=N.useState({x:0,y:0}),[D,A]=N.useState([]);N.useEffect(()=>{const Q=o(me=>{try{if(typeof me=="string"&&me.startsWith("response:")){console.log("Backend Response:",me.slice(9));return}if(typeof me!="string")return;const le=me.indexOf(":");if(le===-1)return;const H=me.substring(0,le),re=me.substring(le+1);if(!re)return;if(!["basler","monitoring"].includes(H)){console.warn("Unknown channel:",H);return}const ge=`data:image/jpeg;base64,${re}`,de=Date.now(),fe=x.current[H],Se=fe.frameCount+1;let $=fe.avgFps,ne=fe.lastFpsCalculation;if(de-ne>=5e3){if(ne>0){const ee=(de-ne)/1e3,we=Se-(fe.frameCount-Se+1);$=Math.round(we/ee*10)/10}ne=de}x.current[H]={currentFrame:ge,lastUpdate:de,frameCount:Se,avgFps:$,lastFpsCalculation:ne},f.current[H]||(f.current[H]=!0,S(ee=>({...ee,[H]:{isConnected:!0}}))),s.current.forEach(ee=>{try{ee(H)}catch(we){console.error("Frame callback error:",we)}})}catch(le){console.error("❌ Error processing camera message:",le)}});return()=>{Q&&Q()}},[o]),N.useEffect(()=>{e||(x.current.basler.currentFrame=null,x.current.monitoring.currentFrame=null,f.current.basler=!1,f.current.monitoring=!1,S({basler:{isConnected:!1},monitoring:{isConnected:!1}}))},[e]);const I=N.useCallback(ie=>{h(ie),console.log(`ابزار: ${ie}`)},[]),X=N.useCallback(ie=>{ie&&(ie.tool==="eraser"?oe(ie):(C(Q=>[...Q,ie]),A(Q=>[...Q,{type:"tool-drawing",action:"add",drawing:ie}])))},[]),oe=N.useCallback(ie=>{const Q=ie.eraserRadius||15,me=ie.path||[];me.length!==0&&(C(le=>{const H=[];return le.forEach(re=>{if(re.tool==="eraser")return;let ge=!1;if(re.path&&re.path.length>0)for(const de of re.path){for(const fe of me)if(Math.sqrt(Math.pow(de.x-fe.x,2)+Math.pow(de.y-fe.y,2))<=Q){ge=!0;break}if(ge)break}ge||H.push(re)}),H}),l(le=>{const H=[];return le.forEach(re=>{let ge=!1;if(re.path&&re.path.length>0)for(const de of re.path){for(const fe of me)if(Math.sqrt(Math.pow(de.x-fe.x,2)+Math.pow(de.y-fe.y,2))<=Q){ge=!0;break}if(ge)break}ge||H.push(re)}),H}),A(le=>[...le,{type:"eraser",action:"erase",eraserDrawing:ie,eraserRadius:Q}]))},[]),Z=N.useCallback((ie,Q)=>{if(!(!u||u==="pan")){if(u==="crop"&&T.crop){j(me=>({...me,crop:null})),h(null),A(me=>[...me,{type:"crop",action:"remove"}]);return}m(!0),p([{x:ie,y:Q}])}},[u,T.crop]),ae=N.useCallback((ie,Q)=>{M({x:ie,y:Q}),!(!c||!u)&&p(me=>[...me,{x:ie,y:Q}])},[c,u]),te=N.useCallback(()=>{if(!c||y.length<2){m(!1),p([]);return}if(u==="crop"){const ie=y[0],Q=y[y.length-1],me={x:Math.min(ie.x,Q.x),y:Math.min(ie.y,Q.y),width:Math.abs(Q.x-ie.x),height:Math.abs(Q.y-ie.y)};j(le=>({...le,crop:me})),A(le=>[...le,{type:"crop",action:"apply",settings:me}])}else{const ie={id:Date.now(),tool:u,path:y};l(Q=>[...Q,ie]),A(Q=>[...Q,{type:"drawing",action:"add",drawing:ie}])}m(!1),p([])},[c,y,u]),G=N.useCallback(()=>{l([]),C([]),p([]),m(!1),j(ie=>({...ie,crop:null})),A(ie=>[...ie,{type:"clear",action:"all"}]),window.clearFabricCanvas&&window.clearFabricCanvas()},[]),z=N.useCallback(ie=>{j(Q=>({...Q,...ie})),A(Q=>[...Q,{type:"settings",action:"update",settings:ie}])},[]),q=N.useCallback(()=>{j(ie=>{const Q=!ie.grayscale;return A(me=>[...me,{type:"grayscale",action:"toggle",value:Q}]),{...ie,grayscale:Q}})},[]),Y=N.useCallback(ie=>{j(Q=>{const me=ie==="in"?Q.zoom*1.2:Q.zoom/1.2,le=Math.max(.2,Math.min(5,me));return A(H=>[...H,{type:"zoom",action:"change",value:le,prevValue:Q.zoom}]),{...Q,zoom:le}})},[]),R=N.useCallback(()=>{j(ie=>{const Q=ie.zoom*1.2,me=Math.max(.2,Math.min(5,Q));if(A(le=>[...le,{type:"zoom",action:"in",value:me,prevValue:ie.zoom}]),window.fabricCanvas){const le=window.fabricCanvas,H=le.getCenter();le.zoomToPoint({x:H.left,y:H.top},me),le.requestRenderAll()}return{...ie,zoom:me}})},[]),O=N.useCallback(()=>{j(ie=>{const Q=ie.zoom/1.2,me=Math.max(.2,Math.min(5,Q));if(A(le=>[...le,{type:"zoom",action:"out",value:me,prevValue:ie.zoom}]),window.fabricCanvas){const le=window.fabricCanvas,H=le.getCenter();le.zoomToPoint({x:H.left,y:H.top},me),le.requestRenderAll()}return{...ie,zoom:me}})},[]),L=N.useCallback(()=>{j(ie=>{if(A(Q=>[...Q,{type:"zoom",action:"reset",value:1,prevValue:ie.zoom}]),window.fabricCanvas){const Q=window.fabricCanvas;Q.setViewportTransform([1,0,0,1,0,0]),Q.requestRenderAll()}return{...ie,zoom:1}})},[]),B=N.useCallback((ie,Q)=>{j(me=>{const le={x:me.panOffset.x+ie,y:me.panOffset.y+Q};return A(H=>[...H,{type:"pan",action:"move",offset:le,prevOffset:me.panOffset}]),{...me,panOffset:le}})},[]),K=N.useCallback(()=>{if(window.undoLastFabricAction){window.undoLastFabricAction();return}A(ie=>{if(ie.length===0)return ie;const Q=ie[ie.length-1],me=ie.slice(0,-1);switch(Q.type){case"drawing":Q.action==="add"&&l(le=>le.slice(0,-1));break;case"tool-drawing":Q.action==="add"&&C(le=>le.slice(0,-1));break;case"eraser":Q.action==="erase"&&console.log("Undo eraser operation - complex operation");break;case"crop":Q.action==="apply"?j(le=>({...le,crop:null})):Q.action==="remove"&&j(le=>({...le,crop:Q.settings}));break;case"grayscale":j(le=>({...le,grayscale:!Q.value}));break;case"zoom":j(le=>({...le,zoom:Q.prevValue}));break;case"settings":j(le=>({...le,...Q.prevSettings}));break;case"pan":j(le=>({...le,panOffset:Q.prevOffset}));break}return me})},[]),V=N.useCallback(ie=>{var Q;return((Q=x.current[ie])==null?void 0:Q.currentFrame)||null},[]),F=N.useCallback(ie=>{const Q=x.current[ie];return{frameCount:(Q==null?void 0:Q.frameCount)||0,avgFps:(Q==null?void 0:Q.avgFps)||0,lastUpdate:(Q==null?void 0:Q.lastUpdate)||0}},[]),J=N.useCallback(ie=>(s.current.add(ie),()=>s.current.delete(ie)),[]),W=N.useCallback(ie=>{s.current.delete(ie)},[]),ue=N.useMemo(()=>({basler:{get currentFrame(){return x.current.basler.currentFrame},get frameCount(){return x.current.basler.frameCount},get avgFps(){return x.current.basler.avgFps},get lastUpdate(){return x.current.basler.lastUpdate},isConnected:v.basler.isConnected},monitoring:{get currentFrame(){return x.current.monitoring.currentFrame},get frameCount(){return x.current.monitoring.frameCount},get avgFps(){return x.current.monitoring.avgFps},get lastUpdate(){return x.current.monitoring.lastUpdate},isConnected:v.monitoring.isConnected}}),[v]),ce=N.useMemo(()=>({cameras:ue,cameraStatus:v,getCameraFrame:V,getCameraStats:F,addFrameCallback:J,removeFrameCallback:W,activeTool:u,drawings:a,toolDrawings:w,isDrawing:c,currentPath:y,imageSettings:T,cursorPosition:E,wsStatus:r,applyTool:I,startDrawing:Z,continueDrawing:ae,finishDrawing:te,clearDrawings:G,addToolDrawing:X,updateImageSettings:z,toggleGrayscale:q,zoomImage:Y,zoomIn:R,zoomOut:O,resetZoom:L,panImage:B,undoLastChange:K}),[ue,v,u,a,w,c,y,T,E,r,V,F,J,W]);return g.jsx(Tv.Provider,{value:ce,children:t})},Pf=()=>{const t=N.useContext(Tv);if(!t)throw new Error("useCamera must be used within CameraProvider");return t},C_=()=>{Jn.logRender("MonitoringDisplay");const t=N.useRef(null),{cameras:e,wsStatus:r,addFrameCallback:o}=Pf();return N.useEffect(()=>{const v=o(S=>{if(S==="monitoring"&&t.current){const f=e.monitoring.currentFrame;f&&(t.current.src=f)}});return()=>v()},[e,o]),g.jsxs("div",{className:"w-full h-full bg-black rounded-lg overflow-hidden relative",children:[g.jsx("img",{ref:t,className:"w-full h-full object-contain",alt:"Monitoring Camera",style:{display:e.monitoring.currentFrame?"block":"none"}}),!e.monitoring.currentFrame&&g.jsx("div",{className:"w-full h-full flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-white text-sm mb-2",children:[r==="connecting"&&"🔄 اتصال به دوربین RTSP...",r==="connected"&&"⏳ در انتظار تصویر RTSP...",r==="reconnecting"&&"🔄 تلاش برای اتصال مجدد...",r==="error"&&"❌ خطا در اتصال RTSP",r==="failed"&&"❌ اتصال RTSP ناموفق",r==="disconnected"&&"⚠️ قطع ارتباط با دوربین"]}),(r==="error"||r==="failed")&&g.jsx("div",{className:"text-gray-400 text-xs",children:"بررسی تنظیمات RTSP یا بک‌اند"})]})}),g.jsx("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm",children:"Monitoring Camera"}),g.jsx("div",{className:`absolute bottom-2 left-2 w-3 h-3 rounded-full ${e.monitoring.isConnected&&e.monitoring.currentFrame?"bg-green-500":"bg-red-500"}`}),e.monitoring.currentFrame&&g.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs space-y-1",children:[g.jsx("div",{children:"RTSP Live"}),e.monitoring.avgFps>0&&g.jsxs("div",{className:"text-green-400",children:["FPS: ",e.monitoring.avgFps," | Frames: ",e.monitoring.frameCount]})]})]})},jv=Ae.memo(C_),k_=({onTrajectoryChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=N.useState("circular"),[v,S]=N.useState({numberOfSteps:360,anglePerStep:1,startAngle:0,endAngle:360,rotationSpeed:10,helixPitch:10,heightSteps:10,customPoints:[]}),[f,s]=N.useState([]),u=[{value:"stepwise",label:"Stepwise",icon:hh,description:r("stepwiseDesc")||"Discrete angular steps",color:"bg-blue-500"},{value:"circular",label:"Circular",icon:Of,description:r("circularDesc")||"Continuous circular motion",color:"bg-green-500"},{value:"helical",label:"Helical",icon:Lc,description:r("helicalDesc")||"Spiral path for tall objects",color:"bg-purple-500"},{value:"arbitrary",label:"Arbitrary",icon:X0,description:r("arbitraryDesc")||"Custom trajectory path",color:"bg-orange-500"}],h=(w,C)=>{const T={...v,[w]:parseFloat(C)||0};S(T),t&&t({type:o,params:T})},a=w=>{x(w),t&&t({type:w,params:v})},l=()=>{const w=prompt(r("enterTrajectoryName")||"Enter trajectory name:");w&&s([...f,{name:w,type:o,params:{...v}}])},c=w=>{x(w.type),S(w.params),t&&t({type:w.type,params:w.params})},m=w=>{s(f.filter((C,T)=>T!==w))},y=()=>{const w=JSON.stringify({type:o,params:v},null,2),C=new Blob([w],{type:"application/json"}),T=URL.createObjectURL(C),j=document.createElement("a");j.href=T,j.download=`trajectory_${o}_${Date.now()}.json`,j.click(),URL.revokeObjectURL(T)},p=w=>{const C=w.target.files[0];if(C){const T=new FileReader;T.onload=j=>{try{const E=JSON.parse(j.target.result);x(E.type),S(E.params),t&&t(E)}catch{alert("Invalid trajectory file")}},T.readAsText(C)}};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(hh,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("trajectoryDefinition")||"Trajectory Definition"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:l,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Oo,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("save")})]}),g.jsxs("button",{onClick:y,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Ir,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),g.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Do,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("import")||"Import"}),g.jsx("input",{type:"file",accept:".json",onChange:p,className:"hidden",disabled:e})]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("selectTrajectoryType")||"Select Trajectory Type"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:u.map(w=>{const C=w.icon,T=o===w.value;return g.jsx("button",{onClick:()=>a(w.value),disabled:e,className:`
                  p-3 sm:p-4 rounded-lg border-2 transition-all text-left
                  ${T?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50"}
                  ${e?"opacity-50 cursor-not-allowed":""}
                `,children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-2 sm:gap-3",children:[g.jsx("div",{className:`p-2 rounded-lg ${w.color} bg-opacity-20 flex-shrink-0`,children:g.jsx(C,{className:`w-4 h-4 sm:w-5 sm:h-5 ${w.color.replace("bg-","text-")}`})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"font-semibold text-text dark:text-text mb-1 text-sm sm:text-base",children:w.label}),g.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted line-clamp-2",children:w.description})]})]})},w.value)})})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-4 flex items-center gap-2",children:[g.jsx(Bt,{className:"w-4 h-4"}),r("trajectoryParameters")||"Trajectory Parameters"]}),o==="stepwise"&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSteps")||"Number of Steps"}),g.jsx("input",{type:"number",value:v.numberOfSteps,onChange:w=>h("numberOfSteps",w.target.value),disabled:e,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("anglePerStep")||"Angle per Step"," (°)"]}),g.jsx("input",{type:"number",value:v.anglePerStep,onChange:w=>h("anglePerStep",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="circular"&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("startAngle")||"Start Angle"," (°)"]}),g.jsx("input",{type:"number",value:v.startAngle,onChange:w=>h("startAngle",w.target.value),disabled:e,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("endAngle")||"End Angle"," (°)"]}),g.jsx("input",{type:"number",value:v.endAngle,onChange:w=>h("endAngle",w.target.value),disabled:e,step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("rotationSpeed")," (°/s)"]}),g.jsx("input",{type:"number",value:v.rotationSpeed,onChange:w=>h("rotationSpeed",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="helical"&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("helixPitch")||"Helix Pitch"," (mm)"]}),g.jsx("input",{type:"number",value:v.helixPitch,onChange:w=>h("helixPitch",w.target.value),disabled:e,min:"0.1",step:"0.1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("heightSteps")||"Height Steps"}),g.jsx("input",{type:"number",value:v.heightSteps,onChange:w=>h("heightSteps",w.target.value),disabled:e,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),o==="arbitrary"&&g.jsxs("div",{className:"text-center py-8",children:[g.jsx(X0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-50"}),g.jsx("p",{className:"text-sm text-text-muted mb-4",children:r("arbitraryTrajectoryInfo")||"Use trajectory designer or import custom points"}),g.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors",children:r("openDesigner")||"Open Trajectory Designer"})]})]}),f.length>0&&g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("savedTrajectories")||"Saved Trajectories"}),g.jsx("div",{className:"space-y-2",children:f.map((w,C)=>{var T,j;return g.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[g.jsxs("button",{onClick:()=>c(w),disabled:e,className:"flex-1 text-left flex items-center gap-3",children:[g.jsx("div",{className:`p-2 rounded ${((T=u.find(E=>E.value===w.type))==null?void 0:T.color)||"bg-gray-500"} bg-opacity-20`,children:Ae.createElement(((j=u.find(E=>E.value===w.type))==null?void 0:j.icon)||hh,{className:"w-4 h-4"})}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-medium text-text dark:text-text",children:w.name}),g.jsx("div",{className:"text-xs text-text-muted",children:w.type.charAt(0).toUpperCase()+w.type.slice(1)})]})]}),g.jsx("button",{onClick:()=>m(C),className:"ml-2 p-2 rounded hover:bg-red-100 text-red-600 transition-colors",children:g.jsx(Pc,{className:"w-4 h-4"})})]},C)})})]})]})},T_=({onGeometryChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=N.useState({sod:1e3,sdd:1500,detectorWidth:400,detectorHeight:300,pixelPitch:.2,effectivePixelSize:.2,coneBeamAngle:15,magnification:1.5,focalSpotSize:.4,detectorType:"Flat Panel"}),[v,S]=N.useState({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),f=(y,p)=>y>0?(p/y).toFixed(3):0,s=(y,p)=>p>0?(y/p).toFixed(4):y,u=(y,p)=>{const w=parseFloat(p)||0;let C={...o,[y]:w};if(y==="sod"||y==="sdd"){const T=f(y==="sod"?w:o.sod,y==="sdd"?w:o.sdd);C.magnification=parseFloat(T),C.effectivePixelSize=parseFloat(s(o.pixelPitch,T))}y==="pixelPitch"&&(C.effectivePixelSize=parseFloat(s(w,o.magnification))),x(C),t&&t(C)},h=()=>{S({isCalibrated:!1,lastCalibration:null,geometricAccuracy:null}),setTimeout(()=>{const y=.95+Math.random()*.05;S({isCalibrated:!0,lastCalibration:new Date().toISOString(),geometricAccuracy:y.toFixed(4)})},3e3)},a=()=>{const y=JSON.stringify({geometry:o,calibrationStatus:v,timestamp:new Date().toISOString()},null,2),p=new Blob([y],{type:"application/json"}),w=URL.createObjectURL(p),C=document.createElement("a");C.href=w,C.download=`geometry_config_${Date.now()}.json`,C.click(),URL.revokeObjectURL(w)},l=y=>{const p=y.target.files[0];if(p){const w=new FileReader;w.onload=C=>{try{const T=JSON.parse(C.target.result);x(T.geometry),S(T.calibrationStatus||v),t&&t(T.geometry)}catch{alert("Invalid geometry configuration file")}},w.readAsText(p)}},m=(()=>{const y=(o.detectorWidth/o.magnification).toFixed(2),p=(o.detectorHeight/o.magnification).toFixed(2);return{width:y,height:p}})();return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(I0,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("geometryConfiguration")||"Geometry Configuration"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:h,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(zj,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("calibrate")||"Calibrate"})]}),g.jsxs("button",{onClick:a,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Ir,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("export")})]}),g.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-purple-600 text-white hover:bg-purple-700 cursor-pointer transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Do,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("import")}),g.jsx("input",{type:"file",accept:".json",onChange:l,className:"hidden",disabled:e})]})]})]}),v.isCalibrated&&g.jsx("div",{className:"panel p-4 rounded-lg border-2 border-green-500 bg-green-50 dark:bg-green-900/20",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx(Eo,{className:"w-5 h-5 text-green-600 mt-0.5"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("div",{className:"font-medium text-green-800 dark:text-green-300 mb-1",children:r("systemCalibrated")||"System Calibrated"}),g.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("lastCalibration")||"Last calibration",": ",new Date(v.lastCalibration).toLocaleString()]}),g.jsxs("div",{className:"text-sm text-green-700 dark:text-green-400",children:[r("geometricAccuracy")||"Geometric accuracy",": ",(parseFloat(v.geometricAccuracy)*100).toFixed(2),"%"]})]})]})}),g.jsxs("div",{children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[g.jsx(I0,{className:"w-4 h-4"}),r("distanceParameters")||"Distance Parameters"]}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SOD - Source to Object (mm)"}),g.jsx(bt,{type:"number",value:o.sod,onChange:y=>u("sod",y.target.value),disabled:e,min:"1",step:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:"SDD - Source to Detector (mm)"}),g.jsx(bt,{type:"number",value:o.sdd,onChange:y=>u("sdd",y.target.value),disabled:e,min:"1",step:"1"})]})]})]}),g.jsxs("div",{children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[g.jsx(xo,{className:"w-4 h-4"}),r("detectorParameters")||"Detector Parameters"]}),g.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorWidth")||"Detector Width"," (mm)"]}),g.jsx(bt,{type:"number",value:o.detectorWidth,onChange:y=>u("detectorWidth",y.target.value),disabled:e,min:"1",step:"1"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("detectorHeight")||"Detector Height"," (mm)"]}),g.jsx(bt,{type:"number",value:o.detectorHeight,onChange:y=>u("detectorHeight",y.target.value),disabled:e,min:"1",step:"1"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("pixelPitch")||"Pixel Pitch"," (mm)"]}),g.jsx(bt,{type:"number",value:o.pixelPitch,onChange:y=>u("pixelPitch",y.target.value),disabled:e,min:"0.001",step:"0.001"})]})]})]}),g.jsxs("div",{children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[g.jsx(wv,{className:"w-4 h-4"}),r("calculatedValues")||"Calculated Values"]}),g.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[g.jsxs("div",{className:"panel p-3 rounded-lg border-2 border-primary/20 bg-primary/5",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("magnification")||"Magnification"}),g.jsxs("div",{className:"text-xl font-bold text-primary font-mono",children:[o.magnification.toFixed(3),"x"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsxs("div",{className:"text-xs text-text-muted mb-1",children:[r("effectivePixelSize")||"Effective Pixel Size"," (mm)"]}),g.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:o.effectivePixelSize.toFixed(4)})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("width")||"Width"," (mm)"]}),g.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:m.width})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsxs("div",{className:"text-xs text-text-muted mb-1",children:["FOV ",r("height")||"Height"," (mm)"]}),g.jsx("div",{className:"text-xl font-bold text-text dark:text-text font-mono",children:m.height})]})]})]}),g.jsxs("div",{children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3 flex items-center gap-2",children:[g.jsx(wT,{className:"w-4 h-4"}),r("additionalParameters")||"Additional Parameters"]}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("coneBeamAngle")||"Cone Beam Angle"," (°)"]}),g.jsx(bt,{type:"number",value:o.coneBeamAngle,onChange:y=>u("coneBeamAngle",y.target.value),disabled:e,min:"0",step:"0.1"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("focalSpotSize")||"Focal Spot Size"," (mm)"]}),g.jsx(bt,{type:"number",value:o.focalSpotSize,onChange:y=>u("focalSpotSize",y.target.value),disabled:e,min:"0.001",step:"0.001"})]})]})]})]})},_v=N.createContext(),j_=({children:t})=>{const[e,r]=N.useState({initialParameters:{power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1},positionAndOptimization:{manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null},postProcessing:{rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"},projectionAcquisition:{imagingMode:"180°",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"},reconstruction:{algorithm:"FBP",iterationCount:"10",filterType:"Ram-Lak",pixelSize:"0.1",reconstructionMode:"2D",outputFormat:"DICOM"}}),o=N.useCallback((v,S)=>{r(f=>({...f,[v]:S}))},[]),x=N.useCallback(()=>{const v={};return Object.entries(e).forEach(([S,f])=>{if(f&&Object.keys(f).length>0){const s={};Object.entries(f).forEach(([u,h])=>{(h!=null&&h!==""||typeof h=="boolean"||typeof h=="string"&&["mA","Al","8-bit","Medium","None","Low Pass","3x3","Sobel","TIFF","180°","FBP","Ram-Lak","2D","DICOM"].includes(h))&&(s[u]=h)}),Object.keys(s).length>0&&(v[S]=s)}}),v},[e]);return g.jsx(_v.Provider,{value:{formData:e,updateFormData:o,getAllFormData:x},children:t})},Nv=()=>N.useContext(_v),Fc=(t,e)=>{const{formData:r,updateFormData:o}=Nv(),{i18n:x}=tt(),v=N.useMemo(()=>{const h=r[t]||{};return{...e,...h}},[e,r,t]),S=N.useCallback(h=>{const{name:a,value:l,type:c,checked:m}=h.target;o(t,{...v,[a]:c==="checkbox"?m:l})},[v,o,t]),f=x.language==="fa";return{pageData:v,handleChange:S,updateFormData:h=>o(t,h),isRtl:f,flexDir:f?"flex-row-reverse":"flex-row",textAlign:f?"text-right":"text-left"}},__=({disabled:t=!1})=>{const{t:e}=tt(),r=[{id:1,name:"Standard CT",description:"Standard CT scanning protocol",settings:{voltage:120,current:200,rotationMode:"360°",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:"2025-10-01",lastUsed:"2025-10-13"},{id:2,name:"High Resolution",description:"High resolution imaging for small details",settings:{voltage:140,current:250,rotationMode:"360°",exposureTime:150,numberOfProjections:720,imageCount:1},createdDate:"2025-10-05",lastUsed:"2025-10-12"},{id:3,name:"Low Dose",description:"Reduced radiation dose protocol",settings:{voltage:100,current:150,rotationMode:"180°",exposureTime:50,numberOfProjections:180,imageCount:1},createdDate:"2025-10-08",lastUsed:null}],[o,x]=N.useState(r),[v,S]=N.useState(null),[f,s]=N.useState(!1),[u,h]=N.useState(null),a=M=>{s(!0),h({...M})},l=()=>{s(!0),h({id:Date.now(),name:"",description:"",settings:{voltage:120,current:200,rotationMode:"360°",exposureTime:100,numberOfProjections:360,imageCount:1},createdDate:new Date().toISOString().split("T")[0],lastUsed:null})},c=()=>{if(!u.name.trim()){alert(e("enterProtocolName")||"Please enter a protocol name");return}const M=o.findIndex(D=>D.id===u.id);if(M>=0){const D=[...o];D[M]=u,x(D)}else x([...o,u]);s(!1),h(null)},m=()=>{s(!1),h(null)},y=M=>{confirm(e("confirmDeleteProtocol")||"Are you sure you want to delete this protocol?")&&(x(o.filter(D=>D.id!==M)),(v==null?void 0:v.id)===M&&S(null))},p=M=>{const D={...M,id:Date.now(),name:`${M.name} (Copy)`,createdDate:new Date().toISOString().split("T")[0],lastUsed:null};x([...o,D])},w=M=>{S(M);const D=o.map(A=>A.id===M.id?{...A,lastUsed:new Date().toISOString().split("T")[0]}:A);x(D),alert(e("protocolApplied")||`Protocol "${M.name}" has been applied`)},C=()=>{const M=JSON.stringify(o,null,2),D=new Blob([M],{type:"application/json"}),A=URL.createObjectURL(D),I=document.createElement("a");I.href=A,I.download=`scan_protocols_${new Date().getTime()}.json`,I.click(),URL.revokeObjectURL(A)},T=M=>{const D=M.target.files[0];if(D){const A=new FileReader;A.onload=I=>{try{const X=JSON.parse(I.target.result);x([...o,...X]),alert(e("protocolsImported")||"Protocols imported successfully!")}catch{alert(e("importError")||"Error importing protocols")}},A.readAsText(D)}},j=(M,D)=>{h({...u,[M]:D})},E=(M,D)=>{h({...u,settings:{...u.settings,[M]:D}})};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(R0,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("scanProtocolManagement")||"Scan Protocol Management"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:l,disabled:t||f,className:"px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Aj,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:e("new")||"New"})]}),g.jsx("button",{onClick:C,disabled:t||o.length===0,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:g.jsx(Ir,{className:"w-4 h-4"})}),g.jsxs("label",{className:`px-3 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm cursor-pointer ${t?"opacity-50 cursor-not-allowed":""}`,children:[g.jsx(Do,{className:"w-4 h-4"}),g.jsx("input",{type:"file",accept:".json",onChange:T,disabled:t,className:"hidden"})]})]})]}),f&&u&&g.jsxs("div",{className:"panel p-4 rounded-lg border-2 border-primary/50 space-y-4",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:u.name?e("editProtocol")||"Edit Protocol":e("newProtocol")||"New Protocol"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("name")||"Protocol Name"," *"]}),g.jsx("input",{type:"text",value:u.name,onChange:M=>j("name",M.target.value),placeholder:e("enterProtocolName")||"Enter protocol name",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("description")||"Description"}),g.jsx("input",{type:"text",value:u.description,onChange:M=>j("description",M.target.value),placeholder:e("enterDescription")||"Enter description",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("voltage")||"Voltage"," (kVp)"]}),g.jsx("input",{type:"number",value:u.settings.voltage,onChange:M=>E("voltage",parseInt(M.target.value)),min:"40",max:"160",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("current")||"Current"," (mA)"]}),g.jsx("input",{type:"number",value:u.settings.current,onChange:M=>E("current",parseInt(M.target.value)),min:"50",max:"500",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("rotationMode")||"Rotation Mode"}),g.jsxs("select",{value:u.settings.rotationMode,onChange:M=>E("rotationMode",M.target.value),className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"180°",children:"180°"}),g.jsx("option",{value:"360°",children:"360°"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("exposureTime")||"Exposure Time"," (ms)"]}),g.jsx("input",{type:"number",value:u.settings.exposureTime,onChange:M=>E("exposureTime",parseInt(M.target.value)),min:"10",max:"1000",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("numberOfProjections")||"Projections"}),g.jsx("input",{type:"number",value:u.settings.numberOfProjections,onChange:M=>E("numberOfProjections",parseInt(M.target.value)),min:"36",max:"1440",step:"36",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsx("button",{onClick:m,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 transition-colors text-sm",children:e("cancel")||"Cancel"}),g.jsxs("button",{onClick:c,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Oo,{className:"w-4 h-4"}),g.jsx("span",{children:e("save")||"Save"})]})]})]}),g.jsx("div",{className:"space-y-3",children:o.length===0?g.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[g.jsx(R0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),g.jsx("p",{className:"text-text-muted",children:e("noProtocols")||"No protocols available. Create a new protocol to get started."})]}):o.map(M=>g.jsx("div",{className:`panel p-4 rounded-lg border-2 transition-all ${(v==null?void 0:v.id)===M.id?"border-primary bg-primary/5":"border-border hover:border-primary/30"}`,children:g.jsxs("div",{className:"flex items-start justify-between gap-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-semibold text-text dark:text-text mb-1",children:M.name}),g.jsx("p",{className:"text-sm text-text-muted mb-2",children:M.description}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("voltage"),":"]}),g.jsxs("span",{className:"font-semibold text-text ml-1",children:[M.settings.voltage," kVp"]})]}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("current"),":"]}),g.jsxs("span",{className:"font-semibold text-text ml-1",children:[M.settings.current," mA"]})]}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("mode"),":"]}),g.jsx("span",{className:"font-semibold text-text ml-1",children:M.settings.rotationMode})]}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("lastUsed"),":"]}),g.jsx("span",{className:"font-semibold text-text ml-1",children:M.lastUsed||e("never")||"Never"})]})]})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>w(M),disabled:t,className:"px-3 py-1.5 rounded bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-xs font-semibold",children:e("apply")||"Apply"}),g.jsx("button",{onClick:()=>a(M),disabled:t||f,className:"p-1.5 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors",title:e("edit")||"Edit",children:g.jsx(Zj,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>p(M),disabled:t,className:"p-1.5 rounded bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors",title:e("duplicate")||"Duplicate",children:g.jsx($T,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>y(M.id),disabled:t,className:"p-1.5 rounded bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400 transition-colors",title:e("delete")||"Delete",children:g.jsx(Pc,{className:"w-4 h-4"})})]})]})},M.id))})]})},N_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=N.useState({xrayVoltage:0,xrayCurrent:0,xrayPower:0,tubeTemperature:0,detectorTemperature:0,detectorFrameRate:0,detectorExposure:0,cabinetTemperature:0,coolingFlowRate:0,vacuumPressure:0,acquisitionProgress:0,imagesAcquired:0,dataTransferRate:0,systemLoad:0}),[x,v]=N.useState({voltage:[],current:[],temperature:[],power:[]}),[S,f]=N.useState([]);N.useEffect(()=>{const h=setInterval(()=>{const a={xrayVoltage:100+Math.random()*40,xrayCurrent:150+Math.random()*100,xrayPower:15+Math.random()*10,tubeTemperature:45+Math.random()*15,detectorTemperature:-20+Math.random()*2,detectorFrameRate:8+Math.random()*4,detectorExposure:80+Math.random()*40,cabinetTemperature:22+Math.random()*3,coolingFlowRate:18+Math.random()*4,vacuumPressure:1e-6+Math.random()*1e-6,acquisitionProgress:Math.min(100,r.acquisitionProgress+Math.random()*5),imagesAcquired:Math.floor(r.imagesAcquired+Math.random()*3),dataTransferRate:50+Math.random()*50,systemLoad:40+Math.random()*30};o(a),v(c=>({voltage:[...c.voltage.slice(-19),a.xrayVoltage],current:[...c.current.slice(-19),a.xrayCurrent],temperature:[...c.temperature.slice(-19),a.tubeTemperature],power:[...c.power.slice(-19),a.xrayPower]}));const l=[];a.tubeTemperature>55&&l.push({id:Date.now(),severity:"warning",message:e("tubeTempHigh")||"Tube temperature is high",value:`${a.tubeTemperature.toFixed(1)}°C`}),a.xrayPower>23&&l.push({id:Date.now()+1,severity:"warning",message:e("powerHigh")||"X-ray power is high",value:`${a.xrayPower.toFixed(1)} kW`}),a.coolingFlowRate<19&&l.push({id:Date.now()+2,severity:"warning",message:e("coolingFlowLow")||"Cooling flow rate is low",value:`${a.coolingFlowRate.toFixed(1)} L/min`}),f(l)},1e3);return()=>clearInterval(h)},[r.acquisitionProgress,r.imagesAcquired,e]);const s=({icon:h,label:a,value:l,unit:c,color:m,trend:y})=>g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("div",{className:"flex items-start justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(h,{className:`w-5 h-5 text-${m}-600`}),g.jsx("span",{className:"text-xs font-medium text-text-muted",children:a})]}),y&&g.jsxs("div",{className:`flex items-center gap-1 text-xs ${y>0?"text-green-600":"text-red-600"}`,children:[y>0?g.jsx(Lc,{className:"w-3 h-3"}):g.jsx(a_,{className:"w-3 h-3"}),g.jsxs("span",{children:[Math.abs(y).toFixed(1),"%"]})]})]}),g.jsxs("div",{className:"flex items-baseline gap-1",children:[g.jsx("span",{className:`text-2xl font-bold text-${m}-600`,children:typeof l=="number"?l.toFixed(1):l}),g.jsx("span",{className:"text-sm text-text-muted",children:c})]})]}),u=({data:h,color:a})=>{const l=Math.max(...h,1),c=Math.min(...h,0),m=l-c||1;return g.jsx("div",{className:"flex items-end gap-0.5 h-12",children:h.map((y,p)=>g.jsx("div",{className:`flex-1 bg-${a}-500 rounded-t transition-all`,style:{height:`${(y-c)/m*100}%`,opacity:.3+p/h.length*.7}},p))})};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(nr,{className:"w-5 h-5 text-primary animate-pulse"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("realtimeMonitoring")||"Real-time Monitoring Dashboard"})]}),g.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[g.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),g.jsx("span",{className:"font-semibold",children:e("active")||"Active"})]})]}),S.length>0&&g.jsx("div",{className:"space-y-2",children:S.map(h=>g.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${h.severity==="warning"?"bg-yellow-500/10 border-2 border-yellow-500/30":"bg-red-500/10 border-2 border-red-500/30"}`,children:[g.jsx(bc,{className:`w-5 h-5 ${h.severity==="warning"?"text-yellow-600":"text-red-600"}`}),g.jsx("div",{className:"flex-1",children:g.jsx("span",{className:"text-sm font-medium text-text",children:h.message})}),g.jsx("span",{className:"text-sm font-bold text-text",children:h.value})]},h.id))}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[g.jsx(s,{icon:Un,label:e("voltage")||"Voltage",value:r.xrayVoltage,unit:"kVp",color:"blue",trend:x.voltage.length>1?(x.voltage[x.voltage.length-1]-x.voltage[x.voltage.length-2])/x.voltage[x.voltage.length-2]*100:0}),g.jsx(s,{icon:Un,label:e("current")||"Current",value:r.xrayCurrent,unit:"mA",color:"purple",trend:x.current.length>1?(x.current[x.current.length-1]-x.current[x.current.length-2])/x.current[x.current.length-2]*100:0}),g.jsx(s,{icon:po,label:e("power")||"Power",value:r.xrayPower,unit:"kW",color:"green",trend:x.power.length>1?(x.power[x.power.length-1]-x.power[x.power.length-2])/x.power[x.power.length-2]*100:0}),g.jsx(s,{icon:kv,label:e("tubeTemp")||"Tube Temp",value:r.tubeTemperature,unit:"°C",color:"red",trend:x.temperature.length>1?(x.temperature[x.temperature.length-1]-x.temperature[x.temperature.length-2])/x.temperature[x.temperature.length-2]*100:0})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("voltage")||"Voltage"," (",e("last20s")||"Last 20s",")"]}),g.jsx(u,{data:x.voltage,color:"blue"})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("current")||"Current"," (",e("last20s")||"Last 20s",")"]}),g.jsx(u,{data:x.current,color:"purple"})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("power")||"Power"," (",e("last20s")||"Last 20s",")"]}),g.jsx(u,{data:x.power,color:"green"})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:[e("temperature")||"Temperature"," (",e("last20s")||"Last 20s",")"]}),g.jsx(u,{data:x.temperature,color:"red"})]})]}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("detectorTemp")||"Detector Temp"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorTemperature.toFixed(1),"°C"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("frameRate")||"Frame Rate"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorFrameRate.toFixed(1)," fps"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("exposure")||"Exposure"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.detectorExposure.toFixed(0)," ms"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("coolingFlow")||"Cooling Flow"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.coolingFlowRate.toFixed(1)," L/min"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("dataRate")||"Data Rate"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.dataTransferRate.toFixed(0)," MB/s"]})]}),g.jsxs("div",{className:"panel p-3 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:e("systemLoad")||"System Load"}),g.jsxs("div",{className:"text-lg font-bold text-text",children:[r.systemLoad.toFixed(0),"%"]})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:e("acquisitionProgress")||"Acquisition Progress"}),g.jsxs("span",{className:"text-sm font-mono font-bold text-primary",children:[r.acquisitionProgress.toFixed(1),"%"]})]}),g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${r.acquisitionProgress}%`}})}),g.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[g.jsxs("span",{children:[e("imagesAcquired")||"Images Acquired",": ",r.imagesAcquired]}),g.jsxs("span",{children:[e("estimatedTimeRemaining")||"Est. Time",": ",Math.max(0,Math.floor((100-r.acquisitionProgress)*2)),"s"]})]})]})]})},E_=()=>{const{t}=tt(),{isConnected:e}=Us(),r=N.useMemo(()=>({power:"",tubeVoltage:"",anodeCurrent:"",anodeCurrentUnit:"mA",filtrationMaterial:"Al",filtrationThickness:"",bitDepth:"8-bit",tubeStatus:!1,tubeVoltageDisplay:"0",tubeCurrentDisplay:"0",exposureTime:"0",cabinCameraStatus:!1,singleCalibration:"",rotateCalibration:"",fastImaging:!1,rotationSpeed:"10",dualEnergy:!1}),[]),{pageData:o,handleChange:x,updateFormData:v}=Fc("initialParameters",r),[S,f]=N.useState(null),s=[{value:"mA",label:"mA"},{value:"μA",label:"μA"}],u=[{value:"Al",label:t("aluminum")},{value:"Cu",label:t("copper")},{value:"Ag",label:t("silver")}],h=[{value:"8-bit",label:t("8bit")},{value:"16-bit",label:t("16bit")}],a=N.useCallback(()=>{const p=!o.tubeStatus;v({...o,tubeStatus:p,tubeVoltageDisplay:p?"100":"0",tubeCurrentDisplay:p?"10":"0"})},[o,v]),l=N.useCallback(()=>{v({...o,cabinCameraStatus:!o.cabinCameraStatus})},[o,v]),c=N.useCallback(()=>{v({...o,fastImaging:!o.fastImaging})},[o,v]),m=N.useCallback(()=>{v({...o,dualEnergy:!o.dualEnergy})},[o,v]),y={standard:()=>{f("standard"),v({...o,power:"50",tubeVoltage:"120",anodeCurrent:"10"})},highPower:()=>{f("highPower"),v({...o,power:"100",tubeVoltage:"150",anodeCurrent:"20"})},clear:()=>{f("clear"),v({...r})}};return g.jsxs(Ro,{children:[g.jsx(Ao,{icon:Un}),g.jsx(v_,{onStatusChange:p=>{console.log("System Status:",p)}}),g.jsx("div",{className:"card p-4 mb-4",children:g.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries({standard:t("presetStandard"),highPower:t("presetHighPower"),clear:t("clearAll")}).map(([p,w])=>g.jsx("button",{onClick:y[p],className:`h-10 px-4 variant-primary rounded-lg border border-border transition-all duration-200 text-sm font-medium flex-shrink-0 ${S===p?"button-active":""}`,children:w},p))})}),g.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[g.jsx(Ct,{label:t("power"),icon:po,value:o.power,unit:"W",children:g.jsx(bt,{type:"number",name:"power",value:o.power,onChange:x,placeholder:t("enterPower"),min:"0",step:"1"})}),g.jsx(Ct,{label:t("tubeVoltage"),icon:Un,value:o.tubeVoltage,unit:"kVp",children:g.jsx(bt,{type:"number",name:"tubeVoltage",value:o.tubeVoltage,onChange:x,placeholder:t("enterTubeVoltage"),min:"0",step:"0.1"})}),g.jsx(Ct,{label:t("anodeCurrent"),icon:kT,value:o.anodeCurrent,unit:o.anodeCurrentUnit,children:g.jsxs("div",{className:"flex gap-3",children:[g.jsx(bt,{type:"number",name:"anodeCurrent",value:o.anodeCurrent,onChange:x,placeholder:t("enterAnodeCurrent"),min:"0",step:"0.1",className:"flex-1"}),g.jsx(tr,{name:"anodeCurrentUnit",value:o.anodeCurrentUnit,onChange:x,options:s,className:"w-20"})]})}),g.jsx(Ct,{label:t("filtration"),icon:vn,children:g.jsxs("div",{className:"flex gap-3",children:[g.jsx(tr,{name:"filtrationMaterial",value:o.filtrationMaterial,onChange:x,options:u,className:"flex-1"}),g.jsx(bt,{type:"number",name:"filtrationThickness",value:o.filtrationThickness,onChange:x,placeholder:t("enterThickness"),min:"0",step:"0.01",className:"w-28"})]})}),g.jsx(Ct,{label:t("exposureTime"),icon:UT,children:g.jsx(bt,{type:"text",value:o.exposureTime,disabled:!0,className:"bg-background-secondary dark:bg-accent cursor-not-allowed"})}),g.jsx(Ct,{label:t("bitDepth"),icon:Sv,children:g.jsx(tr,{name:"bitDepth",value:o.bitDepth,onChange:x,options:h})}),g.jsx(Ct,{label:t("singleCalibration"),icon:Bt,value:o.singleCalibration,children:g.jsx(bt,{type:"number",name:"singleCalibration",value:o.singleCalibration,onChange:x,placeholder:t("enterSingleCalibration"),min:"0",step:"0.1"})}),g.jsx(Ct,{label:t("rotateCalibration"),icon:Bt,value:o.rotateCalibration,children:g.jsx(bt,{type:"number",name:"rotateCalibration",value:o.rotateCalibration,onChange:x,placeholder:t("enterRotateCalibration"),min:"0",step:"0.1"})}),g.jsx("div",{className:"card p-6 lg:col-span-2",children:g.jsxs(Ct,{label:t("tubeStatus"),icon:z0,showValue:!1,children:[g.jsx(Lr,{active:o.tubeStatus,onClick:a,icon:z0,disabled:!e}),g.jsx("div",{className:"flex gap-2 sm:gap-4 mt-3 sm:mt-4",children:[{label:t("voltage"),value:o.tubeVoltageDisplay,unit:"kVp"},{label:t("current"),value:o.tubeCurrentDisplay,unit:"mA"}].map(({label:p,value:w,unit:C})=>g.jsxs("div",{className:"text-center flex-1",children:[g.jsx("div",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted mb-1 font-vazir",children:p}),g.jsxs("div",{className:"panel px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg border border-border",children:[g.jsx("span",{className:"text-base sm:text-lg font-mono font-bold text-text dark:text-text",children:w}),g.jsx("span",{className:"text-xs sm:text-sm text-text-muted dark:text-text-muted ml-1 font-vazir",children:C})]})]},p))})]})}),g.jsxs(Ct,{label:t("fastImaging"),icon:go,showValue:!1,children:[g.jsx(Lr,{active:o.fastImaging,onClick:c,icon:go,disabled:!e}),g.jsxs("div",{className:"mt-4",children:[g.jsx("label",{className:"font-medium text-text dark:text-text font-vazir mb-2 block",children:t("rotationSpeed")}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(bt,{type:"number",name:"rotationSpeed",value:o.rotationSpeed,onChange:x,placeholder:t("enterRotationSpeed"),min:"0",step:"0.1"}),g.jsx("span",{className:"text-sm text-text-muted dark:text-text-muted font-vazir",children:"rpm"})]})]})]}),g.jsx(Ct,{label:t("dualEnergy"),icon:Un,showValue:!1,children:g.jsx(Lr,{active:o.dualEnergy,onClick:m,icon:Un,disabled:!e})})]}),g.jsxs("div",{className:"card p-4 lg:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx($0,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:t("cabinCameraStatus")}),g.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.cabinCameraStatus?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:o.cabinCameraStatus?t("active"):t("inactive")})]}),g.jsx("button",{onClick:l,disabled:!e,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${o.cabinCameraStatus?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"} disabled:bg-gray-400 disabled:cursor-not-allowed`,children:o.cabinCameraStatus?g.jsxs(g.Fragment,{children:[g.jsx(H0,{className:"w-4 h-4"}),g.jsx("span",{children:t("turnOff")||"Turn Off"})]}):g.jsxs(g.Fragment,{children:[g.jsx($0,{className:"w-4 h-4"}),g.jsx("span",{children:t("turnOn")||"Turn On"})]})})]}),o.cabinCameraStatus?g.jsx("div",{className:"rounded-lg overflow-hidden border-2 border-border",children:g.jsx(jv,{})}):g.jsxs("div",{className:"aspect-video bg-black rounded-lg flex flex-col items-center justify-center text-text-muted border-2 border-border",children:[g.jsx(H0,{className:"w-16 h-16 mb-3 opacity-30"}),g.jsx("p",{className:"text-sm",children:t("cameraOff")||"Camera is turned off"})]})]}),g.jsx(N_,{disabled:!e}),g.jsx(__,{disabled:!e}),g.jsx(k_,{onTrajectoryChange:p=>{console.log("Trajectory:",p)}}),g.jsx(T_,{onGeometryChange:p=>{console.log("Geometry:",p)}}),g.jsx(w_,{tubeParams:{voltage:o.tubeVoltageDisplay,current:o.tubeCurrentDisplay,power:o.power,exposureTime:o.exposureTime,temperature:25.5+Math.random()*5}})]})},M_=({onPositionChange:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),[v,S]=N.useState([]),[f,s]=N.useState(1),u=N.useCallback((p,w)=>{const C={...o,[p]:parseFloat(w)||0};x(C),t&&t(C)},[o,t]),h=N.useCallback((p,w)=>{const C=w*f,T=o[p]+C;u(p,T)},[o,f,u]),a=N.useCallback(()=>{const p={x:0,y:0,z:0,theta:0,gamma:0};x(p),t&&t(p)},[t]),l=N.useCallback(()=>{const p=`Position ${v.length+1}`;S([...v,{name:p,...o}])},[o,v]),c=N.useCallback(p=>{const{name:w,...C}=p;x(C),t&&t(C)},[t]),m=N.useCallback(p=>{S(v.filter((w,C)=>C!==p))},[v]),y=({icon:p,onClick:w,label:C})=>g.jsx("button",{onClick:w,disabled:e,className:"p-2 rounded-lg bg-primary/10 hover:bg-primary/20 disabled:bg-gray-200 disabled:cursor-not-allowed transition-colors flex items-center justify-center",title:C,children:g.jsx(p,{className:"w-5 h-5 text-primary"})});return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Df,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("manipulator")})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:a,disabled:e,className:"px-3 py-1.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(P0,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("home")||"Home"})]}),g.jsxs("button",{onClick:l,disabled:e,className:"px-3 py-1.5 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-1.5 text-sm",children:[g.jsx(Oo,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("save")})]})]})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text whitespace-nowrap",children:[r("stepSize")||"Step Size",":"]}),g.jsx("div",{className:"flex gap-2",children:[.1,1,5,10].map(p=>g.jsx("button",{onClick:()=>s(p),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${f===p?"bg-primary text-white":"bg-background-secondary hover:bg-accent text-text"}`,children:p},p))})]}),g.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(_j,{className:"w-4 h-4"}),r("linearMovement")||"Linear Movement"]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("div",{className:"text-xs text-text-muted mb-2 ",children:["X-Y ",r("control")||"Control"]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2 max-w-[200px] mx-auto",children:[g.jsx("div",{}),g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsx("span",{className:"text-xs font-medium text-text-muted",children:"Y"}),g.jsx(y,{icon:Hh,onClick:()=>h("y",1),label:"Y+"})]}),g.jsx("div",{}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("span",{className:"text-xs font-medium text-text-muted",children:"X"}),g.jsx(y,{icon:yv,onClick:()=>h("x",-1),label:"X-"})]}),g.jsxs("div",{className:"flex flex-col items-center justify-center",children:[g.jsx("button",{onClick:a,disabled:e,className:"p-2 rounded-lg bg-gray-200 hover:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:g.jsx(P0,{className:"w-5 h-5 text-gray-600"})}),g.jsxs("div",{className:"text-xs font-mono font-bold text-text-muted mt-1",children:[o.x.toFixed(1),", ",o.y.toFixed(1)]})]}),g.jsx(y,{icon:bv,onClick:()=>h("x",1),label:"X+"}),g.jsx("div",{}),g.jsx(y,{icon:pc,onClick:()=>h("y",-1),label:"Y-"}),g.jsx("div",{})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsxs("div",{className:"text-xs text-text-muted mb-2",children:["Z ",r("control")||"Control"]}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx(y,{icon:pc,onClick:()=>h("z",-1),label:"Z-"}),g.jsx("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:o.z.toFixed(1)}),g.jsx(y,{icon:Hh,onClick:()=>h("z",1),label:"Z+"})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(no,{className:"w-4 h-4"}),r("rotationalMovement")||"Rotational Movement"]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-2",children:"θ (Theta)"}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx(y,{icon:_i,onClick:()=>h("theta",-1),label:"θ-"}),g.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[o.theta.toFixed(1),"°"]}),g.jsx(y,{icon:no,onClick:()=>h("theta",1),label:"θ+"})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg",children:[g.jsx("div",{className:"text-xs text-text-muted mb-2",children:"γ (Gamma)"}),g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx(y,{icon:_i,onClick:()=>h("gamma",-1),label:"γ-"}),g.jsxs("div",{className:"px-4 py-2 bg-background-secondary rounded-lg min-w-[80px] text-center font-mono font-bold",children:[o.gamma.toFixed(1),"°"]}),g.jsx(y,{icon:no,onClick:()=>h("gamma",1),label:"γ+"})]})]})]})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("manualInput")||"Manual Input"}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:Object.entries(o).map(([p,w])=>g.jsxs("div",{children:[g.jsx("label",{className:"text-xs font-medium text-text-muted mb-1 block uppercase",children:p==="theta"?"θ":p==="gamma"?"γ":p.toUpperCase()}),g.jsx(bt,{type:"number",value:w,onChange:C=>u(p,C.target.value),step:"0.1",disabled:e})]},p))})]}),v.length>0&&g.jsxs("div",{className:"space-y-3",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:r("savedPositions")||"Saved Positions"}),g.jsx("div",{className:"grid gap-2",children:v.map((p,w)=>g.jsxs("div",{className:"panel p-3 rounded-lg flex items-center justify-between hover:bg-accent transition-colors",children:[g.jsxs("button",{onClick:()=>c(p),disabled:e,className:"flex-1 text-left text-sm text-text hover:text-primary transition-colors disabled:cursor-not-allowed",children:[g.jsxs("span",{className:"font-medium",children:[p.name,":"]}),g.jsxs("span",{className:"text-text-muted ml-2 font-mono text-xs",children:["X:",p.x.toFixed(1)," Y:",p.y.toFixed(1)," Z:",p.z.toFixed(1)," θ:",p.theta.toFixed(1),"° γ:",p.gamma.toFixed(1),"°"]})]}),g.jsx("button",{onClick:()=>m(w),className:"ml-2 p-1 rounded hover:bg-red-100 text-red-600 transition-colors",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))})]})]})},O_=({speed:t,onSpeedChange:e,disabled:r=!1})=>{var v;const{t:o}=tt(),x=[{value:"low",label:o("joystickSpeedLow")||"Low",icon:po,color:"bg-green-500",description:o("lowSpeedDesc")||"Precise movements, best for fine-tuning",multiplier:"1x"},{value:"medium",label:o("joystickSpeedMedium")||"Medium",icon:Un,color:"bg-yellow-500",description:o("mediumSpeedDesc")||"Balanced speed for general positioning",multiplier:"5x"},{value:"high",label:o("joystickSpeedHigh")||"High",icon:Lc,color:"bg-red-500",description:o("highSpeedDesc")||"Fast movements for large adjustments",multiplier:"10x"}];return g.jsxs("div",{className:"card p-4 lg:p-6",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[g.jsx(po,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:o("joystickSpeed")})]}),g.jsx("div",{className:"grid gap-3 sm:grid-cols-3",children:x.map(S=>{const f=S.icon,s=(t==null?void 0:t.toLowerCase())===S.value;return g.jsx("button",{onClick:()=>e(S.value),disabled:r,className:`
                p-4 rounded-lg border-2 transition-all text-left
                ${s?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary/50 hover:bg-background-secondary/50"}
                ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              `,children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("div",{className:`p-2 rounded-lg ${S.color} bg-opacity-20`,children:g.jsx(f,{className:`w-5 h-5 ${S.color.replace("bg-","text-")}`})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("span",{className:"font-semibold text-text dark:text-text",children:S.label}),g.jsx("span",{className:"text-xs font-mono font-bold text-primary",children:S.multiplier})]}),g.jsx("p",{className:"text-xs text-text-muted dark:text-text-muted",children:S.description}),s&&g.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[g.jsx("div",{className:`w-2 h-2 rounded-full ${S.color} animate-pulse`}),g.jsx("span",{className:"text-xs font-medium text-primary",children:o("active")||"Active"})]})]})]})},S.value)})}),g.jsx("div",{className:"mt-4 p-3 panel rounded-lg",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("span",{className:"text-sm text-text-muted dark:text-text-muted",children:[o("currentSpeed")||"Current Speed",":"]}),g.jsx("span",{className:"text-sm font-semibold text-text dark:text-text",children:((v=x.find(S=>S.value===(t==null?void 0:t.toLowerCase())))==null?void 0:v.label)||"N/A"})]})})]})},D_=()=>{const{t}=tt(),e=N.useMemo(()=>({manipulatorX:"",manipulatorY:"",manipulatorZ:"",manipulatorTheta:"",manipulatorGamma:"",joystickSpeed:"Medium",uploadedFile:null}),[]),{pageData:r,updateFormData:o}=Fc("positionAndOptimization",e);t("joystickSpeedLow"),t("joystickSpeedMedium"),t("joystickSpeedHigh"),N.useMemo(()=>[{name:"manipulatorX",label:t("manipulatorX"),placeholder:t("enterManipulatorX")},{name:"manipulatorY",label:t("manipulatorY"),placeholder:t("enterManipulatorY")},{name:"manipulatorZ",label:t("manipulatorZ"),placeholder:t("enterManipulatorZ")},{name:"manipulatorTheta",label:t("manipulatorTheta"),placeholder:t("enterManipulatorTheta")},{name:"manipulatorGamma",label:t("manipulatorGamma"),placeholder:t("enterManipulatorGamma")}],[t]);const x=N.useCallback(v=>{const S=v.target.files[0];o({...r,uploadedFile:S?S.name:null})},[r,o]);return g.jsxs(Ro,{children:[g.jsx(Ao,{icon:Df}),g.jsx(M_,{onPositionChange:v=>{console.log("Manipulator Position:",v),o({...r,manipulatorX:v.x,manipulatorY:v.y,manipulatorZ:v.z,manipulatorTheta:v.theta,manipulatorGamma:v.gamma})}}),g.jsx(O_,{speed:r.joystickSpeed,onSpeedChange:v=>{o({...r,joystickSpeed:v})}}),g.jsx("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:g.jsxs(Ct,{label:t("uploadFile"),icon:Do,children:[g.jsx("input",{type:"file",name:"uploadedFile",onChange:x,className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:shadow-sm focus:shadow-primary/50 transition-colors font-vazir text-xs sm:text-sm"}),r.uploadedFile&&g.jsx("div",{className:"mt-2",children:g.jsxs("span",{className:"text-xs sm:text-sm text-primary dark:text-primary font-medium font-vazir",children:[t("selectedFile"),": ",r.uploadedFile]})})]})})]})},io=({children:t,onClick:e,variant:r="primary",size:o="md",disabled:x=!1,loading:v=!1,icon:S,className:f="",...s})=>{const{i18n:u}=tt(),h=u.language==="fa",a="font-vazir rounded-xl font-medium shadow-sm hover:shadow-md",l="transition-all duration-300 ease-out",c={sm:"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm",md:"px-3 sm:px-4 py-1.5 sm:py-2 text-sm sm:text-base",lg:"px-4 sm:px-6 py-2 sm:py-3 text-base sm:text-lg"},m={primary:"bg-primary hover:bg-primary-dark text-white",secondary:"bg-background-secondary hover:bg-accent text-text-muted",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white"},y=`
    ${a}
    ${l}
    ${c[o]}
    ${m[r]}
    ${x?"opacity-50 cursor-not-allowed":""}
    ${f}
  `;return g.jsx("button",{onClick:e,disabled:x||v,className:y,...s,children:g.jsxs("div",{className:`flex items-center gap-1 sm:gap-2 ${h?"flex-row-reverse":""}`,children:[v?g.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):S&&g.jsx(S,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t]})})},A_=({onAcquisitionStart:t,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=N.useState({rotationMode:"360",multiSegmentEnabled:!1,numberOfSegments:3,segmentOverlap:10,totalHeight:300,numberOfProjections:360,exposurePerProjection:100}),[v,S]=N.useState({isRunning:!1,currentSegment:0,currentProjection:0,progress:0}),f=(l,c)=>{x({...o,[l]:l==="multiSegmentEnabled"?c:parseFloat(c)||c})},s=()=>{S({isRunning:!0,currentSegment:0,currentProjection:0,progress:0}),t&&t(o);const l=o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections;let c=0;const m=setInterval(()=>{c++;const y=c/l*100,p=c%o.numberOfProjections,w=Math.floor(c/o.numberOfProjections);S({isRunning:c<l,currentSegment:w,currentProjection:p,progress:Math.min(y,100)}),c>=l&&clearInterval(m)},50)},u=()=>{S({...v,isRunning:!1})},h=()=>{S({isRunning:!1,currentSegment:0,currentProjection:0,progress:0})},a=()=>{const m=(o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections)*o.exposurePerProjection/1e3;return m<60?`${m.toFixed(1)}s`:`${(m/60).toFixed(1)}min`};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(rj,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("acquisitionSettings")||"Acquisition Settings"})]}),g.jsxs("div",{className:"flex gap-2",children:[v.isRunning?g.jsxs("button",{onClick:u,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Af,{className:"w-4 h-4"}),g.jsx("span",{children:r("stop")||"Stop"})]}):g.jsxs("button",{onClick:s,disabled:e,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Rf,{className:"w-4 h-4"}),g.jsx("span",{children:r("start")||"Start"})]}),g.jsxs("button",{onClick:h,disabled:e||v.isRunning,className:"px-4 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",children:[g.jsx(_i,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:r("reset")||"Reset"})]})]})]}),v.progress>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsx("span",{className:"text-text-muted",children:v.isRunning?r("acquiring")||"Acquiring...":r("completed")||"Completed"}),g.jsxs("span",{className:"font-mono font-bold text-primary",children:[v.progress.toFixed(1),"%"]})]}),g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${v.progress}%`}})}),g.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-text-muted",children:[g.jsxs("div",{children:["Segment: ",v.currentSegment+1," / ",o.multiSegmentEnabled?o.numberOfSegments:1]}),g.jsxs("div",{children:["Projection: ",v.currentProjection," / ",o.numberOfProjections]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("rotationMode")||"Rotation Mode"}),g.jsx("div",{className:"grid grid-cols-2 gap-3",children:["180","360"].map(l=>g.jsxs("button",{onClick:()=>f("rotationMode",l),disabled:e||v.isRunning,className:`p-4 rounded-lg border-2 transition-all ${o.rotationMode===l?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${e||v.isRunning?"opacity-50 cursor-not-allowed":""}`,children:[g.jsxs("div",{className:"text-2xl font-bold text-primary mb-1",children:[l,"°"]}),g.jsx("div",{className:"text-xs text-text-muted",children:l==="180"?r("halfRotation")||"Half rotation":r("fullRotation")||"Full rotation"})]},l))})]}),g.jsxs("div",{className:"panel p-4 rounded-lg space-y-4",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(Sv,{className:"w-4 h-4"}),r("multiSegmentImaging")||"Multi-Segment Imaging"]}),g.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:o.multiSegmentEnabled,onChange:l=>f("multiSegmentEnabled",l.target.checked),disabled:e||v.isRunning,className:"sr-only peer"}),g.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),o.multiSegmentEnabled&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4 border-t border-border",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfSegments")||"Number of Segments"}),g.jsx("input",{type:"number",value:o.numberOfSegments,onChange:l=>f("numberOfSegments",l.target.value),disabled:e||v.isRunning,min:"2",max:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("segmentOverlap")||"Overlap"," (%)"]}),g.jsx("input",{type:"number",value:o.segmentOverlap,onChange:l=>f("segmentOverlap",l.target.value),disabled:e||v.isRunning,min:"0",max:"50",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("totalHeight")||"Total Height"," (mm)"]}),g.jsx("input",{type:"number",value:o.totalHeight,onChange:l=>f("totalHeight",l.target.value),disabled:e||v.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("numberOfProjections")||"Number of Projections"}),g.jsx("input",{type:"number",value:o.numberOfProjections,onChange:l=>f("numberOfProjections",l.target.value),disabled:e||v.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[r("exposurePerProjection")||"Exposure per Projection"," (ms)"]}),g.jsx("input",{type:"number",value:o.exposurePerProjection,onChange:l=>f("exposurePerProjection",l.target.value),disabled:e||v.isRunning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("acquisitionSummary")||"Acquisition Summary"}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:r("mode")||"Mode"}),g.jsxs("div",{className:"font-semibold text-text",children:[o.rotationMode,"°"]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:r("segments")||"Segments"}),g.jsx("div",{className:"font-semibold text-text",children:o.multiSegmentEnabled?o.numberOfSegments:1})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:r("totalProjections")||"Total Proj."}),g.jsx("div",{className:"font-semibold text-text",children:o.multiSegmentEnabled?o.numberOfSegments*o.numberOfProjections:o.numberOfProjections})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:r("estimatedTime")||"Est. Time"}),g.jsx("div",{className:"font-semibold text-primary",children:a()})]})]})]})]})},R_=({targetPosition:t=null,disabled:e=!1})=>{const{t:r}=tt(),[o,x]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),[v,S]=N.useState({x:0,y:0,z:0,theta:0,gamma:0});N.useEffect(()=>{if(!t)return;const h=setInterval(()=>{x(a=>{const l={...a};return Object.keys(t).forEach(c=>{const m=t[c],y=a[c],p=m-y;Math.abs(p)<.01?l[c]=m:l[c]=y+p*.1}),l})},50);return()=>clearInterval(h)},[t]),N.useEffect(()=>{if(!t){S({x:0,y:0,z:0,theta:0,gamma:0});return}const h={};Object.keys(t).forEach(a=>{h[a]=t[a]-o[a]}),S(h)},[o,t]);const f=()=>t?Object.keys(t).every(h=>Math.abs(v[h])<.1):!1,s=h=>{const a=Math.abs(h);return a<.1?"text-green-600 dark:text-green-400":a<1?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"},u=[{key:"x",label:"X",unit:"mm"},{key:"y",label:"Y",unit:"mm"},{key:"z",label:"Z",unit:"mm"},{key:"theta",label:"θ",unit:"°"},{key:"gamma",label:"γ",unit:"°"}];return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(yc,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("positionFeedback")||"Position Feedback"})]}),g.jsx("div",{className:"flex items-center gap-2",children:f()?g.jsxs(g.Fragment,{children:[g.jsx(Eo,{className:"w-5 h-5 text-green-600"}),g.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"At Target"})]}):g.jsxs(g.Fragment,{children:[g.jsx(xc,{className:"w-5 h-5 text-yellow-600"}),g.jsx("span",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Moving"})]})})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(({key:h,label:a,unit:l})=>g.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-semibold text-text-muted",children:a}),g.jsx("span",{className:"text-xs text-text-muted",children:l})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("currentPosition")||"Current"}),g.jsx("div",{className:"text-2xl font-bold font-mono text-primary",children:o[h].toFixed(2)})]}),t&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("targetPosition")||"Target"}),g.jsx("div",{className:"text-lg font-semibold font-mono text-text",children:t[h].toFixed(2)})]}),t&&g.jsxs("div",{children:[g.jsx("div",{className:"text-xs text-text-muted mb-1",children:r("positionError")||"Error"}),g.jsxs("div",{className:`text-lg font-bold font-mono ${s(v[h])}`,children:[v[h]>=0?"+":"",v[h].toFixed(2)]})]}),t&&Math.abs(v[h])>.1&&g.jsx("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,(1-Math.abs(v[h])/Math.abs(t[h]))*100))}%`}})})]},h))}),g.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:r("realTimePosition")||"Real-time Position Display"}),g.jsx("div",{className:"flex flex-wrap gap-4 text-sm",children:u.map(({key:h,label:a,unit:l})=>g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("span",{className:"text-text-muted",children:[a,":"]}),g.jsxs("span",{className:"font-mono font-bold text-text",children:[o[h].toFixed(2)," ",l]})]},h))})]})]})},P_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=N.useState({enabled:!1,scanHeight:500,verticalStepSize:10,stitchingOverlap:5,detectorHeight:50}),[x,v]=N.useState({isScanning:!1,currentStep:0,totalSteps:0,progress:0}),S=(l,c)=>{o({...r,[l]:l==="enabled"?c:parseFloat(c)})},f=N.useMemo(()=>{const l=r.detectorHeight*(1-r.stitchingOverlap/100);return Math.ceil(r.scanHeight/l)},[r.scanHeight,r.detectorHeight,r.stitchingOverlap]),s=N.useMemo(()=>{const m=f*2;return m<60?`${m}s`:`${(m/60).toFixed(1)}min`},[f]),u=()=>{const l=f;v({isScanning:!0,currentStep:0,totalSteps:l,progress:0});let c=0;const m=setInterval(()=>{c++;const y=c/l*100;v({isScanning:c<l,currentStep:c,totalSteps:l,progress:Math.min(y,100)}),c>=l&&clearInterval(m)},100)},h=()=>{v({...x,isScanning:!1})},a=()=>{v({isScanning:!1,currentStep:0,totalSteps:0,progress:0})};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(F0,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("linearDetectorImaging")||"Linear Detector Imaging"})]}),g.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:r.enabled,onChange:l=>S("enabled",l.target.checked),disabled:t||x.isScanning,className:"sr-only peer"}),g.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 dark:peer-focus:ring-primary/40 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"})]})]}),r.enabled&&g.jsxs(g.Fragment,{children:[x.progress>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsx("span",{className:"text-text-muted",children:x.isScanning?e("acquiring")||"Scanning...":e("completed")||"Completed"}),g.jsxs("span",{className:"font-mono font-bold text-primary",children:[x.progress.toFixed(1),"%"]})]}),g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-blue-500 transition-all duration-300",style:{width:`${x.progress}%`}})}),g.jsxs("div",{className:"text-xs text-text-muted text-center",children:["Step: ",x.currentStep," / ",x.totalSteps]})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("scanHeight")||"Scan Height"," (mm)"]}),g.jsx("input",{type:"number",value:r.scanHeight,onChange:l=>S("scanHeight",l.target.value),disabled:t||x.isScanning,min:"10",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("verticalStepSize")||"Vertical Step Size"," (mm)"]}),g.jsx("input",{type:"number",value:r.verticalStepSize,onChange:l=>S("verticalStepSize",l.target.value),disabled:t||x.isScanning,min:"1",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("stitchingOverlap")||"Stitching Overlap"," (%)"]}),g.jsx("input",{type:"number",value:r.stitchingOverlap,onChange:l=>S("stitchingOverlap",l.target.value),disabled:t||x.isScanning,min:"0",max:"50",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("detectorHeight")||"Detector Height"," (mm)"]}),g.jsx("input",{type:"number",value:r.detectorHeight,onChange:l=>S("detectorHeight",l.target.value),disabled:t||x.isScanning,min:"10",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("acquisitionSummary")||"Scan Summary"}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("numberOfSteps")||"Steps"}),g.jsx("div",{className:"font-semibold text-text",children:f})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("stitchingOverlap")||"Overlap"}),g.jsxs("div",{className:"font-semibold text-text",children:[r.stitchingOverlap,"%"]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("estimatedScanTime")||"Est. Time"}),g.jsx("div",{className:"font-semibold text-primary",children:s})]})]})]}),g.jsxs("div",{className:"flex gap-2 justify-center",children:[x.isScanning?g.jsxs("button",{onClick:h,className:"px-6 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors flex items-center gap-2",children:[g.jsx(Af,{className:"w-4 h-4"}),g.jsx("span",{children:e("stop")||"Stop"})]}):g.jsxs("button",{onClick:u,disabled:t,className:"px-6 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[g.jsx(Rf,{className:"w-4 h-4"}),g.jsx("span",{children:e("start")||"Start Scan"})]}),g.jsxs("button",{onClick:a,disabled:t||x.isScanning,className:"px-6 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2",children:[g.jsx(_i,{className:"w-4 h-4"}),g.jsx("span",{children:e("reset")||"Reset"})]})]})]}),!r.enabled&&g.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[g.jsx(F0,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),g.jsx("p",{className:"text-text-muted",children:e("linearDetectorMode")||"Enable Linear Detector Mode to configure settings"})]})]})},L_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=N.useState("single"),[x,v]=N.useState({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0}),[S,f]=N.useState({numberOfAngles:36,angleStep:10}),s=()=>{v({...x,status:"calibrating"}),setTimeout(()=>{const m=85+Math.random()*15;v({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(m),singleImageCaptured:!0,rotationalProgress:0,rotationalAngles:0})},2e3)},u=()=>{v({...x,status:"calibrating",rotationalProgress:0});let m=0;const y=S.numberOfAngles,p=setInterval(()=>{m++;const w=m/y*100;if(m>=y){clearInterval(p);const C=90+Math.random()*10;v({status:"calibrated",date:new Date().toLocaleString(),quality:Math.round(C),singleImageCaptured:!1,rotationalProgress:100,rotationalAngles:y})}else v(C=>({...C,status:"calibrating",rotationalProgress:w,rotationalAngles:m}))},100)},h=()=>{v({status:"notCalibrated",date:null,quality:0,singleImageCaptured:!1,rotationalProgress:0,rotationalAngles:0})},l=(()=>{switch(x.status){case"notCalibrated":return{icon:g.jsx(vv,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:e("notCalibrated")||"Not Calibrated"};case"calibrating":return{icon:g.jsx(xc,{className:"w-6 h-6 animate-pulse"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:e("calibrating")||"Calibrating..."};case"calibrated":return{icon:g.jsx(Eo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:e("calibrated")||"Calibrated"};default:return{}}})(),c=m=>m>=95?"text-green-600 dark:text-green-400":m>=85?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsx("div",{className:"flex items-center justify-between",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(n_,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("calibrationSystem")||"Calibration System"})]})}),g.jsxs("div",{className:`panel p-4 rounded-lg border-2 ${l.border} ${l.bg}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text",children:e("calibrationStatus")||"Calibration Status"}),g.jsxs("div",{className:`flex items-center gap-2 ${l.color}`,children:[l.icon,g.jsx("span",{className:"font-semibold",children:l.text})]})]}),x.status==="calibrated"&&g.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mt-3 pt-3 border-t border-border",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("calibrationDate")||"Date"}),g.jsx("div",{className:"font-semibold text-text",children:x.date})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("calibrationQuality")||"Quality"}),g.jsxs("div",{className:`font-semibold text-lg ${c(x.quality)}`,children:[x.quality,"%"]})]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("calibrationType")||"Calibration Type"}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[g.jsxs("button",{onClick:()=>o("single"),disabled:t||x.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="single"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${t||x.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx(go,{className:"w-5 h-5 text-primary"}),g.jsx("span",{className:"font-semibold text-text",children:e("singleImageCalibration")||"Single Image"})]}),g.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using a single phantom image"})]}),g.jsxs("button",{onClick:()=>o("rotational"),disabled:t||x.status==="calibrating",className:`p-4 rounded-lg border-2 transition-all ${r==="rotational"?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${t||x.status==="calibrating"?"opacity-50 cursor-not-allowed":""}`,children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx(no,{className:"w-5 h-5 text-primary"}),g.jsx("span",{className:"font-semibold text-text",children:e("rotationalCalibration")||"Rotational"})]}),g.jsx("div",{className:"text-xs text-text-muted text-left",children:"Calibrate using multiple angles for higher accuracy"})]})]})]}),r==="single"&&g.jsx("div",{className:"space-y-4",children:g.jsxs("button",{onClick:s,disabled:t||x.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[g.jsx(go,{className:"w-5 h-5"}),g.jsx("span",{children:e("captureCalibrationImage")||"Capture Calibration Image"})]})}),r==="rotational"&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("numberOfSteps")||"Number of Angles"}),g.jsx("input",{type:"number",value:S.numberOfAngles,onChange:m=>f({...S,numberOfAngles:parseInt(m.target.value),angleStep:360/parseInt(m.target.value)}),disabled:t||x.status==="calibrating",min:"12",max:"72",step:"6",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("anglePerStep")||"Angle Step"," (°)"]}),g.jsx("input",{type:"number",value:S.angleStep.toFixed(1),disabled:!0,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-gray-100 dark:bg-gray-700 text-text dark:text-text outline-none cursor-not-allowed"})]})]}),x.status==="calibrating"&&x.rotationalProgress>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("span",{className:"text-text-muted",children:["Angle: ",x.rotationalAngles," / ",S.numberOfAngles]}),g.jsxs("span",{className:"font-mono font-bold text-primary",children:[x.rotationalProgress.toFixed(1),"%"]})]}),g.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-300",style:{width:`${x.rotationalProgress}%`}})})]}),g.jsxs("button",{onClick:u,disabled:t||x.status==="calibrating",className:"w-full px-6 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center justify-center gap-2 font-semibold",children:[g.jsx(no,{className:"w-5 h-5"}),g.jsx("span",{children:e("startCalibrationScan")||"Start Calibration Scan"})]})]}),x.status==="calibrated"&&g.jsx("button",{onClick:h,disabled:t,className:"w-full px-6 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 disabled:bg-gray-400 transition-colors font-semibold",children:e("recalibrate")||"Recalibrate System"})]})},F_=()=>{const{t}=tt(),{isConnected:e,send:r}=Us(),o=N.useMemo(()=>({imagingMode:"180°",multiSegmentSize:"",hdrStatus:!1,energyLevel1:"80",energyLevel2:"120",imageCount:"2"}),[]),{pageData:x,handleChange:v,updateFormData:S}=Fc("projectionAcquisition",o),[f,s]=N.useState({x:0,y:0,z:0,theta:0,gamma:0}),u=N.useCallback(c=>{console.log("Acquisition started with settings:",c),e&&r(JSON.stringify({type:"acquisition_start",settings:c}))},[e,r]);t("180degree"),t("360degree");const h=N.useCallback(()=>{S({...x,hdrStatus:!x.hdrStatus})},[x,S]),a=N.useCallback(c=>{if(e){const m=`Action:${c}`;r(m)?console.log(`✅ Action ${c} sent via WebSocket`):console.error(`❌ Failed to send Action ${c}`)}},[e,r]),l=N.useMemo(()=>[{key:"Gain",label:t("gain"),icon:Bt},{key:"Offset",label:t("offset"),icon:Bt},{key:"Preprocess",label:t("preprocess"),icon:Pr}],[t]);return g.jsxs(Ro,{children:[g.jsx(Ao,{icon:go}),g.jsx(A_,{onAcquisitionStart:u,disabled:!e}),g.jsx(R_,{targetPosition:f,disabled:!e}),g.jsx(P_,{disabled:!e}),g.jsx(L_,{disabled:!e}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[g.jsx("div",{className:"card p-6 lg:col-span-2",children:g.jsx(Ct,{label:t("imageAdjustments"),icon:Bt,showValue:!1,children:g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:l.map(({key:c,label:m,icon:y})=>g.jsx(io,{variant:"secondary",icon:y,onClick:()=>a(c),disabled:!e,children:m},c))})})}),g.jsx("div",{className:"card p-6 lg:col-span-2",children:g.jsx(Ct,{label:t("hdr"),icon:L0,showValue:!1,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(Lr,{active:x.hdrStatus,onClick:h,icon:L0,disabled:!e,showStatus:!0}),x.hdrStatus&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("energyLevel1")}),g.jsx(bt,{type:"number",name:"energyLevel1",value:x.energyLevel1,onChange:v,placeholder:t("enterEnergyLevel1"),min:"0",step:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("energyLevel2")}),g.jsx(bt,{type:"number",name:"energyLevel2",value:x.energyLevel2,onChange:v,placeholder:t("enterEnergyLevel2"),min:"0",step:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("imageCount")}),g.jsx(bt,{type:"number",name:"imageCount",value:x.imageCount,onChange:v,placeholder:t("enterImageCount"),min:"1",step:"1"})]})]})]})})})]})]})},z_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=N.useState({snr:0,cnr:0,spatialResolution:0,uniformity:0,artifacts:0,overallQuality:0}),[x,v]=N.useState({isAssessing:!1,lastAssessment:null,assessmentCount:0});N.useEffect(()=>{if(x.isAssessing){const l=setInterval(()=>{o({snr:25+Math.random()*15,cnr:15+Math.random()*10,spatialResolution:8+Math.random()*4,uniformity:90+Math.random()*8,artifacts:Math.floor(Math.random()*5),overallQuality:75+Math.random()*20})},1e3);return()=>clearInterval(l)}},[x.isAssessing]);const S=()=>{v({isAssessing:!0,lastAssessment:new Date().toLocaleString(),assessmentCount:x.assessmentCount+1})},f=()=>{v({...x,isAssessing:!1})},s=(l,c)=>l>=c.excellent?"text-green-600 dark:text-green-400":l>=c.good?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",h=(()=>{const l=r.overallQuality;return l>=90?{icon:g.jsx(Eo,{className:"w-6 h-6"}),color:"text-green-600 dark:text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",text:e("excellent")||"Excellent"}:l>=75?{icon:g.jsx(Lc,{className:"w-6 h-6"}),color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:e("good")||"Good"}:{icon:g.jsx(bc,{className:"w-6 h-6"}),color:"text-red-600 dark:text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",text:e("needsImprovement")||"Needs Improvement"}})(),a=[{key:"snr",label:"SNR",value:r.snr,unit:"dB",thresholds:{excellent:35,good:30},description:"Signal-to-Noise Ratio"},{key:"cnr",label:"CNR",value:r.cnr,unit:"dB",thresholds:{excellent:20,good:17},description:"Contrast-to-Noise Ratio"},{key:"spatialResolution",label:e("spatialResolution")||"Spatial Resolution",value:r.spatialResolution,unit:"lp/mm",thresholds:{excellent:10,good:9},description:"Line pairs per millimeter"},{key:"uniformity",label:e("uniformity")||"Uniformity",value:r.uniformity,unit:"%",thresholds:{excellent:95,good:92},description:"Image uniformity"},{key:"artifacts",label:e("artifacts")||"Artifacts",value:r.artifacts,unit:"",thresholds:{excellent:1,good:2},description:"Number of visible artifacts",inverted:!0}];return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(nr,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("imageQualityAssessment")||"Image Quality Assessment"})]}),x.isAssessing?g.jsx("button",{onClick:f,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors text-sm font-semibold",children:e("stop")||"Stop"}):g.jsx("button",{onClick:S,disabled:t,className:"px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors text-sm font-semibold",children:e("start")||"Start Assessment"})]}),x.isAssessing&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`panel p-4 rounded-lg border-2 ${h.border} ${h.bg}`,children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-text-muted mb-1",children:e("overallQuality")||"Overall Quality"}),g.jsxs("div",{className:`text-3xl font-bold ${h.color}`,children:[r.overallQuality.toFixed(1),"%"]})]}),g.jsxs("div",{className:`flex items-center gap-2 ${h.color}`,children:[h.icon,g.jsx("span",{className:"font-semibold",children:h.text})]})]})}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(l=>{const c=l.inverted?s(l.thresholds.excellent-l.value+l.thresholds.excellent,l.thresholds):s(l.value,l.thresholds);return g.jsxs("div",{className:"panel p-4 rounded-lg space-y-2",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-semibold text-text-muted",children:l.label}),l.unit&&g.jsx("span",{className:"text-xs text-text-muted",children:l.unit})]}),g.jsx("div",{className:`text-2xl font-bold font-mono ${c}`,children:l.value.toFixed(1)}),g.jsx("div",{className:"text-xs text-text-muted",children:l.description}),g.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full transition-all duration-300 ${c.includes("green")?"bg-green-500":c.includes("yellow")?"bg-yellow-500":"bg-red-500"}`,style:{width:l.inverted?`${Math.max(0,Math.min(100,100-l.value/5*100))}%`:`${Math.min(100,l.value/(l.thresholds.excellent*1.2)*100)}%`}})})]},l.key)})}),g.jsx("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:g.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-sm",children:[g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("lastAssessment")||"Last Assessment",":"]}),g.jsx("span",{className:"font-semibold text-text ml-2",children:x.lastAssessment})]}),g.jsxs("div",{children:[g.jsxs("span",{className:"text-text-muted",children:[e("assessments")||"Total Assessments",":"]}),g.jsx("span",{className:"font-semibold text-primary ml-2",children:x.assessmentCount})]})]})})]}),!x.isAssessing&&x.assessmentCount===0&&g.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[g.jsx(nr,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),g.jsx("p",{className:"text-text-muted",children:e("startAssessmentMessage")||'Click "Start Assessment" to begin quality evaluation'})]})]})},I_=({disabled:t=!1})=>{const{t:e}=tt(),[r,o]=N.useState({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"}),[x,v]=N.useState({temperature:-20.5,temperatureStable:!0,readoutNoise:3.2,darkCurrent:.05,lastCalibration:"2025-10-13 14:30"}),S=(a,l)=>{o({...r,[a]:l})},f=()=>{console.log("Saving detector settings:",r),alert(e("settingsSaved")||"Settings saved successfully!")},s=()=>{o({binning:"1x1",readoutMode:"standard",coolingTemperature:-20,gainMode:"auto",exposureTime:100,frameRate:10,triggerMode:"internal",darkFrameCorrection:!0,flatFieldCorrection:!0,badPixelCorrection:!0,lagCorrection:!1,readoutSpeed:1,verticalShift:1,outputAmplifier:"EM"})},u=()=>{const a=JSON.stringify(r,null,2),l=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(l),m=document.createElement("a");m.href=c,m.download=`detector_config_${new Date().getTime()}.json`,m.click(),URL.revokeObjectURL(c)},h=a=>{const l=a.target.files[0];if(l){const c=new FileReader;c.onload=m=>{try{const y=JSON.parse(m.target.result);o(y),alert(e("settingsImported")||"Settings imported successfully!")}catch{alert(e("importError")||"Error importing settings")}},c.readAsText(l)}};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Sj,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:e("detectorConfiguration")||"Detector Configuration"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:u,disabled:t,className:"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:e("export")||"Export",children:g.jsx(Ir,{className:"w-4 h-4"})}),g.jsxs("label",{className:`px-3 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2 text-sm cursor-pointer ${t?"opacity-50 cursor-not-allowed":""}`,children:[g.jsx(Do,{className:"w-4 h-4"}),g.jsx("input",{type:"file",accept:".json",onChange:h,disabled:t,className:"hidden"})]}),g.jsx("button",{onClick:s,disabled:t,className:"px-3 py-2 rounded-lg bg-gray-600 text-white hover:bg-gray-700 disabled:bg-gray-400 transition-colors flex items-center gap-2 text-sm",title:e("reset")||"Reset",children:g.jsx(_i,{className:"w-4 h-4"})})]})]}),g.jsxs("div",{className:"panel p-4 rounded-lg bg-primary/5 border-2 border-primary/20",children:[g.jsx("h4",{className:"text-sm font-semibold text-text dark:text-text mb-3",children:e("detectorStatus")||"Detector Status"}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("temperature")||"Temperature"}),g.jsxs("div",{className:"font-semibold text-text",children:[x.temperature,"°C"]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("readoutNoise")||"Readout Noise"}),g.jsxs("div",{className:"font-semibold text-text",children:[x.readoutNoise," e⁻"]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("darkCurrent")||"Dark Current"}),g.jsxs("div",{className:"font-semibold text-text",children:[x.darkCurrent," e⁻/px/s"]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-text-muted mb-1",children:e("lastCalibration")||"Last Calibration"}),g.jsx("div",{className:"font-semibold text-text text-xs",children:x.lastCalibration})]})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(Bt,{className:"w-4 h-4 text-primary"}),e("hardwareSettings")||"Hardware Settings"]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("binning")||"Pixel Binning"}),g.jsxs("select",{value:r.binning,onChange:a=>S("binning",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[g.jsx("option",{value:"1x1",children:"1×1"}),g.jsx("option",{value:"2x2",children:"2×2"}),g.jsx("option",{value:"4x4",children:"4×4"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("readoutMode")||"Readout Mode"}),g.jsxs("select",{value:r.readoutMode,onChange:a=>S("readoutMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[g.jsx("option",{value:"standard",children:"Standard"}),g.jsx("option",{value:"fast",children:"Fast"}),g.jsx("option",{value:"low-noise",children:"Low Noise"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("coolingTemperature")||"Cooling Temp"," (°C)"]}),g.jsx("input",{type:"number",value:r.coolingTemperature,onChange:a=>S("coolingTemperature",parseFloat(a.target.value)),disabled:t,min:"-40",max:"25",step:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("gainMode")||"Gain Mode"}),g.jsxs("select",{value:r.gainMode,onChange:a=>S("gainMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[g.jsx("option",{value:"auto",children:"Auto"}),g.jsx("option",{value:"low",children:"Low"}),g.jsx("option",{value:"medium",children:"Medium"}),g.jsx("option",{value:"high",children:"High"})]})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(Bt,{className:"w-4 h-4 text-primary"}),e("imagingSettings")||"Imaging Settings"]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("exposureTime")||"Exposure Time"," (ms)"]}),g.jsx("input",{type:"number",value:r.exposureTime,onChange:a=>S("exposureTime",parseFloat(a.target.value)),disabled:t,min:"1",max:"10000",step:"10",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:[e("frameRate")||"Frame Rate"," (fps)"]}),g.jsx("input",{type:"number",value:r.frameRate,onChange:a=>S("frameRate",parseFloat(a.target.value)),disabled:t,min:"1",max:"60",step:"1",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:e("triggerMode")||"Trigger Mode"}),g.jsxs("select",{value:r.triggerMode,onChange:a=>S("triggerMode",a.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all disabled:bg-gray-100 disabled:cursor-not-allowed",children:[g.jsx("option",{value:"internal",children:"Internal"}),g.jsx("option",{value:"external",children:"External"}),g.jsx("option",{value:"software",children:"Software"})]})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("h4",{className:"text-sm font-semibold text-text dark:text-text flex items-center gap-2",children:[g.jsx(Bt,{className:"w-4 h-4 text-primary"}),e("processingSettings")||"Processing Settings"]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{key:"darkFrameCorrection",label:e("darkFrameCorrection")||"Dark Frame Correction"},{key:"flatFieldCorrection",label:e("flatFieldCorrection")||"Flat Field Correction"},{key:"badPixelCorrection",label:e("badPixelCorrection")||"Bad Pixel Correction"},{key:"lagCorrection",label:e("lagCorrection")||"Lag Correction"}].map(({key:a,label:l})=>g.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border-2 border-border hover:border-primary/50 transition-all cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:r[a],onChange:c=>S(a,c.target.checked),disabled:t,className:"w-5 h-5 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2"}),g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:l})]},a))})]})]}),g.jsx("div",{className:"flex justify-center pt-4",children:g.jsxs("button",{onClick:f,disabled:t,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[g.jsx(Oo,{className:"w-5 h-5"}),g.jsx("span",{children:e("save")||"Save Configuration"})]})})]})};class B_{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.originalImageData=null,this.currentImageData=null}async loadImage(e){return new Promise((r,o)=>{const x=new Image;x.crossOrigin="anonymous",x.onload=()=>{try{this.canvas.width=x.width,this.canvas.height=x.height,this.ctx.drawImage(x,0,0),this.originalImageData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.currentImageData=this.cloneImageData(this.originalImageData),r(this.originalImageData)}catch(v){o(v)}},x.onerror=v=>{o(new Error("Failed to load image: "+v))},x.src=e})}cloneImageData(e){return new ImageData(new Uint8ClampedArray(e.data),e.width,e.height)}reset(){this.originalImageData&&(this.currentImageData=this.cloneImageData(this.originalImageData))}getImageDataURL(e=!0){const r=e?this.currentImageData:this.originalImageData;return r?(this.ctx.putImageData(r,0,0),this.canvas.toDataURL("image/png")):null}applyGaussianFilter(e=1){if(!this.currentImageData)return;const r=document.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height;const o=r.getContext("2d");return o.putImageData(this.currentImageData,0,0),o.filter=`blur(${e*2}px)`,o.drawImage(r,0,0),this.currentImageData=o.getImageData(0,0,r.width,r.height),this.getImageDataURL()}applyMedianFilter(e=3){return this.applyGaussianFilter(e/3)}applySobelFilter(){if(!this.currentImageData)return;const e=this.currentImageData.data,r=this.currentImageData.width,o=this.currentImageData.height,x=new ImageData(r,o),v=[[-1,0,1],[-2,0,2],[-1,0,1]],S=[[-1,-2,-1],[0,0,0],[1,2,1]];for(let f=1;f<o-1;f++)for(let s=1;s<r-1;s++){let u=0,h=0;for(let c=-1;c<=1;c++)for(let m=-1;m<=1;m++){const y=((f+c)*r+(s+m))*4,p=(e[y]+e[y+1]+e[y+2])/3;u+=p*v[c+1][m+1],h+=p*S[c+1][m+1]}const a=Math.sqrt(u*u+h*h),l=(f*r+s)*4;x.data[l]=x.data[l+1]=x.data[l+2]=Math.min(255,a),x.data[l+3]=255}return this.currentImageData=x,this.getImageDataURL()}applyGradientFilter(){return this.applySobelFilter()}applySharpen(e=1){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,v=this.cloneImageData(this.currentImageData),S=[[0,-1,0],[-1,5,-1],[0,-1,0]];for(let f=1;f<x-1;f++)for(let s=1;s<o-1;s++){for(let u=0;u<3;u++){let h=0;for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){const m=((f+l)*o+(s+c))*4+u;h+=r[m]*S[l+1][c+1]*e}const a=(f*o+s)*4+u;v.data[a]=Math.max(0,Math.min(255,h))}v.data[(f*o+s)*4+3]=255}return this.currentImageData=v,this.getImageDataURL()}applyHistogramEqualization(){if(!this.currentImageData)return;const e=this.currentImageData.data,r=this.currentImageData.width*this.currentImageData.height,o=new Array(256).fill(0);for(let f=0;f<e.length;f+=4){const s=Math.floor((e[f]+e[f+1]+e[f+2])/3);o[s]++}const x=new Array(256);x[0]=o[0];for(let f=1;f<256;f++)x[f]=x[f-1]+o[f];const v=x.find(f=>f>0),S=x.map(f=>Math.round((f-v)/(r-v)*255));for(let f=0;f<e.length;f+=4){const s=Math.floor((e[f]+e[f+1]+e[f+2])/3),u=S[s];e[f]=e[f+1]=e[f+2]=u}return this.getImageDataURL()}applyInvert(){if(!this.currentImageData)return;const e=this.currentImageData.data;for(let r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2];return this.getImageDataURL()}applyRotation(e){if(!this.currentImageData)return;const r=document.createElement("canvas"),o=r.getContext("2d"),x=e*Math.PI/180,v=Math.abs(Math.cos(x)),S=Math.abs(Math.sin(x)),f=this.canvas.height*S+this.canvas.width*v,s=this.canvas.height*v+this.canvas.width*S;return r.width=f,r.height=s,o.translate(f/2,s/2),o.rotate(x),o.putImageData(this.currentImageData,-this.canvas.width/2,-this.canvas.height/2),this.canvas.width=f,this.canvas.height=s,this.currentImageData=o.getImageData(0,0,f,s),this.getImageDataURL()}adjustBrightness(e){if(!this.currentImageData)return;const r=this.currentImageData.data,o=e/100*128;for(let x=0;x<r.length;x+=4)r[x]=Math.max(0,Math.min(255,r[x]+o)),r[x+1]=Math.max(0,Math.min(255,r[x+1]+o)),r[x+2]=Math.max(0,Math.min(255,r[x+2]+o));return this.getImageDataURL()}adjustContrast(e){if(!this.currentImageData)return;const r=this.currentImageData.data,o=259*(e+255)/(255*(259-e));for(let x=0;x<r.length;x+=4)r[x]=Math.max(0,Math.min(255,o*(r[x]-128)+128)),r[x+1]=Math.max(0,Math.min(255,o*(r[x+1]-128)+128)),r[x+2]=Math.max(0,Math.min(255,o*(r[x+2]-128)+128));return this.getImageDataURL()}convertToGrayscale(){if(!this.currentImageData)return;const e=this.currentImageData.data;for(let r=0;r<e.length;r+=4){const o=.299*e[r]+.587*e[r+1]+.114*e[r+2];e[r]=e[r+1]=e[r+2]=o}return this.getImageDataURL()}applyErosion(e=3){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,v=this.cloneImageData(this.currentImageData),S=Math.floor(e/2);for(let f=S;f<x-S;f++)for(let s=S;s<o-S;s++){let u=255;for(let a=-S;a<=S;a++)for(let l=-S;l<=S;l++){const c=((f+a)*o+(s+l))*4,m=r[c];m<u&&(u=m)}const h=(f*o+s)*4;v.data[h]=v.data[h+1]=v.data[h+2]=u}return this.currentImageData=v,this.getImageDataURL()}applyDilation(e=3){if(!this.currentImageData)return;const r=this.currentImageData.data,o=this.currentImageData.width,x=this.currentImageData.height,v=this.cloneImageData(this.currentImageData),S=Math.floor(e/2);for(let f=S;f<x-S;f++)for(let s=S;s<o-S;s++){let u=0;for(let a=-S;a<=S;a++)for(let l=-S;l<=S;l++){const c=((f+a)*o+(s+l))*4,m=r[c];m>u&&(u=m)}const h=(f*o+s)*4;v.data[h]=v.data[h+1]=v.data[h+2]=u}return this.currentImageData=v,this.getImageDataURL()}applyThreshold(e=128){if(!this.currentImageData)return;const r=this.currentImageData.data;for(let o=0;o<r.length;o+=4){const v=(r[o]+r[o+1]+r[o+2])/3>e?255:0;r[o]=r[o+1]=r[o+2]=v}return this.getImageDataURL()}calculateHistogram(){if(!this.currentImageData)return null;const e=this.currentImageData.data,r=new Array(256).fill(0);for(let o=0;o<e.length;o+=4){const x=Math.floor((e[o]+e[o+1]+e[o+2])/3);r[x]++}return r}}const Ie=new B_,Ev=N.createContext(),Mv=()=>{const t=N.useContext(Ev);if(!t)throw new Error("useImageProcessing must be used within ImageProcessingProvider");return t},V_=({children:t})=>{const{lastMessage:e}=Us(),[r,o]=N.useState(null),[x,v]=N.useState(null),[S,f]=N.useState(!1),[s,u]=N.useState(null),[h,a]=N.useState(null),[l,c]=N.useState([]);N.useEffect(()=>{if(e)try{const A=JSON.parse(e.data);A.type==="image"&&A.imageData?m(A.imageData):A.type==="binary"&&A.buffer&&y(A.buffer)}catch{e.data instanceof ArrayBuffer?y(e.data):typeof e.data=="string"&&e.data.startsWith("data:image")&&m(e.data)}},[e]);const m=N.useCallback(async A=>{f(!0);try{await Ie.loadImage(A);const I=Ie.getImageDataURL(!1);o(I),v(I);const X=Ie.calculateStatistics();u(X);const oe=Ie.calculateHistogram();a(oe),c([])}catch(I){console.error("Error loading image from base64:",I)}finally{f(!1)}},[]),y=N.useCallback(async A=>{f(!0);try{await Ie.loadImage(A);const I=Ie.getImageDataURL(!1);o(I),v(I);const X=Ie.calculateStatistics();u(X);const oe=Ie.calculateHistogram();a(oe),c([])}catch(I){console.error("Error loading image from buffer:",I)}finally{f(!1)}},[]),p=N.useCallback(async A=>{f(!0);try{await Ie.loadImage(A);const I=Ie.getImageDataURL(!1);o(I),v(I);const X=Ie.calculateStatistics();u(X);const oe=Ie.calculateHistogram();a(oe),c([])}catch(I){console.error("Error loading image from URL:",I)}finally{f(!1)}},[]),w=N.useCallback(async A=>{f(!0);try{const I=new FileReader;I.onload=async X=>{await Ie.loadImage(X.target.result);const oe=Ie.getImageDataURL(!1);o(oe),v(oe);const Z=Ie.calculateStatistics();u(Z);const ae=Ie.calculateHistogram();a(ae),c([]),f(!1)},I.readAsDataURL(A)}catch(I){console.error("Error loading image from file:",I),f(!1)}},[]),C=N.useCallback(async(A,I={})=>{if(!r){console.warn("No image loaded");return}f(!0);try{let X;switch(A){case"gaussian":X=Ie.applyGaussianFilter(I.sigma||1);break;case"median":X=Ie.applyMedianFilter(I.kernelSize||3);break;case"mean":X=Ie.applyMeanFilter(I.kernelSize||3);break;case"sobel":X=Ie.applySobelFilter();break;case"gradient":X=Ie.applyGradientFilter();break;case"sharpen":X=Ie.applySharpen(I.factor||1);break;case"histogramEqualization":X=Ie.applyHistogramEqualization();break;case"invert":X=Ie.applyInvert();break;case"rotation":X=Ie.applyRotation(I.angle||0);break;case"flipHorizontal":X=Ie.applyFlipHorizontal();break;case"flipVertical":X=Ie.applyFlipVertical();break;case"brightness":X=Ie.adjustBrightness(I.value||0);break;case"contrast":X=Ie.adjustContrast(I.value||0);break;case"threshold":X=Ie.applyThreshold(I.threshold||128);break;case"grayscale":X=Ie.convertToGrayscale();break;case"erosion":X=Ie.applyErosion(I.kernelSize||3);break;case"dilation":X=Ie.applyDilation(I.kernelSize||3);break;default:console.warn("Unknown filter type:",A),f(!1);return}v(X),c(ae=>[...ae,{filter:A,params:I,timestamp:new Date().toISOString()}]);const oe=Ie.calculateStatistics();u(oe);const Z=Ie.calculateHistogram();a(Z)}catch(X){console.error("Error applying filter:",X)}finally{f(!1)}},[r]),T=N.useCallback(()=>{if(r){Ie.reset(),v(r),c([]);const A=Ie.calculateStatistics();u(A);const I=Ie.calculateHistogram();a(I)}},[r]),j=N.useCallback(async A=>{if(!x){console.warn("No processed image to save");return}try{await Ie.saveImage(A)}catch(I){console.error("Error saving image:",I)}},[x]),E=N.useCallback(async(A,I,X,oe)=>{if(r){f(!0);try{const Z=Ie.cropImage(A,I,X,oe);v(Z),c(ae=>[...ae,{filter:"crop",params:{x:A,y:I,width:X,height:oe},timestamp:new Date().toISOString()}])}catch(Z){console.error("Error cropping image:",Z)}finally{f(!1)}}},[r]),M=N.useCallback(async(A,I)=>{if(r){f(!0);try{const X=Ie.resizeImage(A,I);v(X),c(oe=>[...oe,{filter:"resize",params:{width:A,height:I},timestamp:new Date().toISOString()}])}catch(X){console.error("Error resizing image:",X)}finally{f(!1)}}},[r]),D={originalImage:r,processedImage:x,isProcessing:S,imageStats:s,histogram:h,processingHistory:l,loadImageFromBase64:m,loadImageFromBuffer:y,loadImageFromUrl:p,loadImageFromFile:w,applyFilter:C,resetToOriginal:T,saveImage:j,cropImage:E,resizeImage:M};return g.jsx(Ev.Provider,{value:D,children:t})},U_=({disabled:t=!1,onApplyFilter:e})=>{const{t:r}=tt(),{applyFilter:o}=Mv(),[x,v]=N.useState("none"),[S,f]=N.useState({denoising:{method:"bilateral",strength:50,kernelSize:5,spatialSigma:75,colorSigma:75},sharpening:{method:"unsharp",amount:50,radius:1,threshold:0},edgeEnhancement:{method:"sobel",lowThreshold:50,highThreshold:150,apertureSize:3},histogramEqualization:{method:"clahe",clipLimit:2,tileSize:8},morphology:{operation:"opening",kernelShape:"ellipse",kernelSize:5,iterations:1},wavelet:{waveletType:"db4",level:3,threshold:50}}),s=c=>{v(c)},u=(c,m,y)=>{f({...S,[c]:{...S[c],[m]:y}})},h=async()=>{if(x==="none"){alert(r("selectFilterFirst")||"Please select a filter first");return}const c={type:x,settings:S[x]};console.log("🎨 [POST-PROCESSING] Applying filter:",c),e&&e(c);try{let m=null,y={};switch(x){case"denoising":S.denoising.method==="gaussian"?(m="gaussian",y={sigma:S.denoising.strength/50}):S.denoising.method==="median"?(m="median",y={kernelSize:S.denoising.kernelSize}):(m="gaussian",y={sigma:S.denoising.strength/50});break;case"sharpening":m="sharpen",y={factor:S.sharpening.amount/50};break;case"edgeEnhancement":S.edgeEnhancement.method==="sobel"?m="sobel":m="gradient";break;case"histogramEqualization":m="histogramEqualization";break;case"morphology":(S.morphology.operation==="opening"||S.morphology.operation==="closing")&&(m=S.morphology.operation==="opening"?"erosion":"dilation",y={kernelSize:S.morphology.kernelSize});break;case"wavelet":console.log("⚠️ [POST-PROCESSING] Wavelet filter not yet implemented in frontend"),alert(r("waveletNotSupported")||"Wavelet filter is not supported yet in frontend processing");return;default:console.warn("⚠️ [POST-PROCESSING] Unknown filter type:",x);return}m&&(console.log(`✅ [POST-PROCESSING] Applying ${m} to BaslerDisplay with params:`,y),await o(m,y),console.log(`✅ [POST-PROCESSING] Filter ${m} applied successfully`),alert(r("filterApplied")||`${x} filter applied successfully!`))}catch(m){console.error("❌ [POST-PROCESSING] Error applying filter:",m),alert(r("filterError")||"Error applying filter")}},a=[{key:"none",label:r("none")||"None",icon:vn,color:"gray"},{key:"denoising",label:r("denoising")||"Denoising",icon:Pr,color:"blue"},{key:"sharpening",label:r("sharpening")||"Sharpening",icon:Un,color:"yellow"},{key:"edgeEnhancement",label:r("edgeEnhancement")||"Edge Enhancement",icon:qj,color:"purple"},{key:"histogramEqualization",label:r("histogramEqualization")||"Histogram Eq.",icon:vn,color:"green"},{key:"morphology",label:r("morphology")||"Morphology",icon:vn,color:"red"},{key:"wavelet",label:r("wavelet")||"Wavelet",icon:vn,color:"indigo"}],l=()=>{switch(x){case"denoising":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),g.jsxs("select",{value:S.denoising.method,onChange:c=>u("denoising","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"bilateral",children:"Bilateral"}),g.jsx("option",{value:"nlm",children:"Non-Local Means"}),g.jsx("option",{value:"gaussian",children:"Gaussian"}),g.jsx("option",{value:"median",children:"Median"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("strength")||"Strength"}),g.jsx("span",{className:"font-mono text-primary",children:S.denoising.strength})]}),g.jsx("input",{type:"range",value:S.denoising.strength,onChange:c=>u("denoising","strength",parseInt(c.target.value)),disabled:t,min:"0",max:"100",className:"w-full"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),g.jsx("input",{type:"number",value:S.denoising.kernelSize,onChange:c=>u("denoising","kernelSize",parseInt(c.target.value)),disabled:t,min:"3",max:"15",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"sharpening":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),g.jsxs("select",{value:S.sharpening.method,onChange:c=>u("sharpening","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"unsharp",children:"Unsharp Mask"}),g.jsx("option",{value:"laplacian",children:"Laplacian"}),g.jsx("option",{value:"highboost",children:"High-Boost"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("amount")||"Amount"}),g.jsx("span",{className:"font-mono text-primary",children:S.sharpening.amount})]}),g.jsx("input",{type:"range",value:S.sharpening.amount,onChange:c=>u("sharpening","amount",parseInt(c.target.value)),disabled:t,min:"0",max:"200",className:"w-full"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("radius")||"Radius"}),g.jsx("span",{className:"font-mono text-primary",children:S.sharpening.radius})]}),g.jsx("input",{type:"range",value:S.sharpening.radius*10,onChange:c=>u("sharpening","radius",parseInt(c.target.value)/10),disabled:t,min:"5",max:"50",className:"w-full"})]})]});case"edgeEnhancement":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("edgeMethod")||"Method"}),g.jsxs("select",{value:S.edgeEnhancement.method,onChange:c=>u("edgeEnhancement","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"sobel",children:"Sobel"}),g.jsx("option",{value:"canny",children:"Canny"}),g.jsx("option",{value:"laplacian",children:"Laplacian"}),g.jsx("option",{value:"prewitt",children:"Prewitt"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("lowThreshold")||"Low Threshold"}),g.jsx("span",{className:"font-mono text-primary",children:S.edgeEnhancement.lowThreshold})]}),g.jsx("input",{type:"range",value:S.edgeEnhancement.lowThreshold,onChange:c=>u("edgeEnhancement","lowThreshold",parseInt(c.target.value)),disabled:t,min:"0",max:"255",className:"w-full"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("highThreshold")||"High Threshold"}),g.jsx("span",{className:"font-mono text-primary",children:S.edgeEnhancement.highThreshold})]}),g.jsx("input",{type:"range",value:S.edgeEnhancement.highThreshold,onChange:c=>u("edgeEnhancement","highThreshold",parseInt(c.target.value)),disabled:t,min:"0",max:"255",className:"w-full"})]})]});case"histogramEqualization":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("method")||"Method"}),g.jsxs("select",{value:S.histogramEqualization.method,onChange:c=>u("histogramEqualization","method",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"standard",children:"Standard"}),g.jsx("option",{value:"clahe",children:"CLAHE"}),g.jsx("option",{value:"adaptive",children:"Adaptive"})]})]}),S.histogramEqualization.method==="clahe"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("clipLimit")||"Clip Limit"}),g.jsx("span",{className:"font-mono text-primary",children:S.histogramEqualization.clipLimit})]}),g.jsx("input",{type:"range",value:S.histogramEqualization.clipLimit*10,onChange:c=>u("histogramEqualization","clipLimit",parseInt(c.target.value)/10),disabled:t,min:"10",max:"100",className:"w-full"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("tileSize")||"Tile Size"}),g.jsx("input",{type:"number",value:S.histogramEqualization.tileSize,onChange:c=>u("histogramEqualization","tileSize",parseInt(c.target.value)),disabled:t,min:"4",max:"32",step:"4",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]})]});case"morphology":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("operation")||"Operation"}),g.jsxs("select",{value:S.morphology.operation,onChange:c=>u("morphology","operation",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"opening",children:"Opening"}),g.jsx("option",{value:"closing",children:"Closing"}),g.jsx("option",{value:"gradient",children:"Gradient"}),g.jsx("option",{value:"tophat",children:"Top Hat"}),g.jsx("option",{value:"blackhat",children:"Black Hat"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelShape")||"Kernel Shape"}),g.jsxs("select",{value:S.morphology.kernelShape,onChange:c=>u("morphology","kernelShape",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"rect",children:"Rectangle"}),g.jsx("option",{value:"ellipse",children:"Ellipse"}),g.jsx("option",{value:"cross",children:"Cross"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("kernelSize")||"Kernel Size"}),g.jsx("input",{type:"number",value:S.morphology.kernelSize,onChange:c=>u("morphology","kernelSize",parseInt(c.target.value)),disabled:t,min:"3",max:"21",step:"2",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]})]});case"wavelet":return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("waveletType")||"Wavelet Type"}),g.jsxs("select",{value:S.wavelet.waveletType,onChange:c=>u("wavelet","waveletType",c.target.value),disabled:t,className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all",children:[g.jsx("option",{value:"haar",children:"Haar"}),g.jsx("option",{value:"db4",children:"Daubechies 4"}),g.jsx("option",{value:"db8",children:"Daubechies 8"}),g.jsx("option",{value:"sym4",children:"Symlet 4"}),g.jsx("option",{value:"coif2",children:"Coiflet 2"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:r("decompositionLevel")||"Decomposition Level"}),g.jsx("input",{type:"number",value:S.wavelet.level,onChange:c=>u("wavelet","level",parseInt(c.target.value)),disabled:t,min:"1",max:"5",className:"w-full px-3 py-2 border-2 border-border rounded-lg bg-background-white dark:bg-background-secondary text-text dark:text-text outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:r("threshold")||"Threshold"}),g.jsx("span",{className:"font-mono text-primary",children:S.wavelet.threshold})]}),g.jsx("input",{type:"range",value:S.wavelet.threshold,onChange:c=>u("wavelet","threshold",parseInt(c.target.value)),disabled:t,min:"0",max:"100",className:"w-full"})]})]});default:return g.jsxs("div",{className:"panel p-8 rounded-lg text-center",children:[g.jsx(vn,{className:"w-12 h-12 mx-auto mb-3 text-text-muted opacity-30"}),g.jsx("p",{className:"text-text-muted",children:r("selectFilterType")||"Select a filter type to configure settings"})]})}};return g.jsxs("div",{className:"card p-4 lg:p-6 space-y-6",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(vn,{className:"w-5 h-5 text-primary"}),g.jsx("h3",{className:"text-lg font-semibold text-text dark:text-text",children:r("advancedFiltering")||"Advanced Filtering"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:a.map(({key:c,label:m,icon:y,color:p})=>g.jsxs("button",{onClick:()=>s(c),disabled:t,className:`p-3 rounded-lg border-2 transition-all ${x===c?`border-${p}-500 bg-${p}-500/10`:"border-border hover:border-primary/50"} ${t?"opacity-50 cursor-not-allowed":""}`,children:[g.jsx(y,{className:`w-5 h-5 mx-auto mb-2 ${x===c?`text-${p}-600`:"text-text-muted"}`}),g.jsx("div",{className:"text-xs font-medium text-text dark:text-text text-center",children:m})]},c))}),g.jsx("div",{className:"panel p-4 rounded-lg min-h-[250px]",children:l()}),x!=="none"&&g.jsx("div",{className:"flex justify-center",children:g.jsxs("button",{onClick:h,disabled:t,className:"px-8 py-3 rounded-lg bg-primary text-white hover:bg-primary/90 disabled:bg-gray-400 transition-colors flex items-center gap-2 font-semibold",children:[g.jsx(Pr,{className:"w-5 h-5"}),g.jsx("span",{children:r("applyFilter")||"Apply Filter"})]})})]})},H_=()=>{const{t,i18n:e}=tt(),{isConnected:r,send:o}=Us(),x=N.useMemo(()=>({rotationAngle:"None",mirroring:!1,medianFilter:!1,gaussianFilter:!1,gaussianSigma:"1.0",meanFilter:!1,varianceFilter:!1,pseudoColorFilter:!1,fourierFilter:"Low Pass",sharpening:!1,kernelSize:"3x3",sharpeningStrength:"1.0",edgeDetection:!1,threshold:"100",edgeMethod:"Sobel",exportFormat:"TIFF"}),[]),{pageData:v,handleChange:S,updateFormData:f}=Fc("postProcessing",x),s=N.useMemo(()=>({rotation:[{value:"None",label:t("none")},{value:"90°",label:t("90degree")},{value:"180°",label:t("180degree")},{value:"270°",label:t("270degree")}],fourierFilter:[{value:"Low Pass",label:t("lowPass")},{value:"Band Pass",label:t("bandPass")},{value:"High Pass",label:t("highPass")}],kernelSize:[{value:"3x3",label:"3x3"},{value:"5x5",label:"5x5"},{value:"7x7",label:"7x7"}],edgeMethod:[{value:"Sobel",label:t("sobel")},{value:"Canny",label:t("canny")},{value:"Prewitt",label:t("prewitt")}],exportFormat:[{value:"TIFF",label:t("tiff")},{value:"JPG",label:t("jpg")},{value:"DICOM",label:t("dicom")}]}),[t]),u=N.useMemo(()=>[{name:"medianFilter",label:t("medianFilter")},{name:"meanFilter",label:t("meanFilter")},{name:"varianceFilter",label:t("varianceFilter")},{name:"pseudoColorFilter",label:t("pseudoColorFilter")}],[t]),h=N.useMemo(()=>[{key:"Normalize",label:t("normalize"),icon:Pr},{key:"FFT",label:t("fft"),icon:vn},{key:"FFTInverse",label:t("fftInverse"),icon:vn}],[t]),a={mirroring:N.useCallback(()=>{f({...v,mirroring:!v.mirroring})},[v,f]),sharpening:N.useCallback(()=>{f({...v,sharpening:!v.sharpening})},[v,f]),edgeDetection:N.useCallback(()=>{f({...v,edgeDetection:!v.edgeDetection})},[v,f])},l=N.useCallback((y,p=null)=>{if(r){const w=p?`Action:${y}:${p}`:`Action:${y}`;o(w)?console.log(`✅ Action ${y} sent via WebSocket`):console.error(`❌ Failed to send Action ${y}`)}},[r,o]),m=e.language==="fa"?"text-right":"text-left";return g.jsxs(Ro,{children:[g.jsx(Ao,{icon:Pr}),g.jsx(z_,{disabled:!r}),g.jsx(I_,{disabled:!r}),g.jsx(U_,{disabled:!r,onApplyFilter:y=>{console.log("Filter applied:",y),l("ApplyFilter",JSON.stringify(y))}}),g.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[g.jsx(Ct,{label:t("imageTransform"),icon:_i,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(tr,{name:"rotationAngle",value:v.rotationAngle,onChange:S,options:s.rotation}),g.jsx(Lr,{active:v.mirroring,onClick:a.mirroring,icon:JT,disabled:!r})]})}),g.jsx(Ct,{label:t("basicOperations"),icon:Pr,showValue:!1,children:g.jsx("div",{className:"grid grid-cols-1 gap-3",children:h.map(({key:y,label:p,icon:w})=>g.jsx(io,{variant:"secondary",icon:w,onClick:()=>l(y),disabled:!r,children:p},y))})}),g.jsx(Ct,{label:t("fourierFilter"),icon:vn,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(tr,{name:"fourierFilter",value:v.fourierFilter,onChange:S,options:s.fourierFilter}),g.jsx(io,{variant:"secondary",icon:vn,onClick:()=>l("FourierFilter",v.fourierFilter),disabled:!r,children:t("applyFourierFilter")})]})}),g.jsx(Ct,{label:t("exportImage"),icon:Ir,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(tr,{name:"exportFormat",value:v.exportFormat,onChange:S,options:s.exportFormat}),g.jsx(io,{variant:"primary",icon:Ir,onClick:()=>l("Export",v.exportFormat),disabled:!r,children:t("export")})]})}),g.jsx("div",{className:"card p-6 lg:col-span-2",children:g.jsx(Ct,{label:t("imageFilters"),icon:vn,showValue:!1,children:g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.map(y=>g.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer hover:text-primary transition-colors`,children:[g.jsx("input",{type:"checkbox",name:y.name,checked:v[y.name]||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),y.label]},y.name)),g.jsxs("div",{className:"sm:col-span-2",children:[g.jsxs("label",{className:`flex items-center gap-2 font-vazir text-text ${m} cursor-pointer`,children:[g.jsx("input",{type:"checkbox",name:"gaussianFilter",checked:v.gaussianFilter||!1,onChange:S,className:"w-4 h-4 text-primary border-border rounded focus:ring-primary"}),t("gaussianFilter")]}),v.gaussianFilter&&g.jsx("div",{className:"mt-2 ml-6",children:g.jsx(bt,{type:"number",name:"gaussianSigma",value:v.gaussianSigma,onChange:S,placeholder:t("enterGaussianSigma"),min:"0",step:"0.1"})})]})]})})}),g.jsx(Ct,{label:t("sharpening"),icon:xo,showValue:!1,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(Lr,{active:v.sharpening,onClick:a.sharpening,icon:xo,disabled:!r,showStatus:!0}),v.sharpening&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("kernelSize")}),g.jsx(tr,{name:"kernelSize",value:v.kernelSize,onChange:S,options:s.kernelSize})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("sharpeningStrength")}),g.jsx(bt,{type:"number",name:"sharpeningStrength",value:v.sharpeningStrength,onChange:S,placeholder:t("enterSharpeningStrength"),min:"0",step:"0.1"})]})]})]})}),g.jsx(Ct,{label:t("edgeDetection"),icon:B0,showValue:!1,children:g.jsxs("div",{className:"space-y-4",children:[g.jsx(Lr,{active:v.edgeDetection,onClick:a.edgeDetection,icon:B0,disabled:!r,showStatus:!0}),v.edgeDetection&&g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 p-4 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("threshold")}),g.jsx(bt,{type:"number",name:"threshold",value:v.threshold,onChange:S,placeholder:t("enterThreshold"),min:"0",step:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 font-vazir block",children:t("edgeMethod")}),g.jsx(tr,{name:"edgeMethod",value:v.edgeMethod,onChange:S,options:s.edgeMethod})]})]})]})})]})]})};function $_(){return g.jsxs(g.Fragment,{children:[g.jsx(Ao,{icon:Un}),g.jsx(io,{variant:"secondary"})]})}const Lf="-",X_=t=>{const e=G_(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=t;return{getClassGroupId:S=>{const f=S.split(Lf);return f[0]===""&&f.length!==1&&f.shift(),Ov(f,e)||Y_(S)},getConflictingClassGroupIds:(S,f)=>{const s=r[S]||[];return f&&o[S]?[...s,...o[S]]:s}}},Ov=(t,e)=>{var S;if(t.length===0)return e.classGroupId;const r=t[0],o=e.nextPart.get(r),x=o?Ov(t.slice(1),o):void 0;if(x)return x;if(e.validators.length===0)return;const v=t.join(Lf);return(S=e.validators.find(({validator:f})=>f(v)))==null?void 0:S.classGroupId},G0=/^\[(.+)\]$/,Y_=t=>{if(G0.test(t)){const e=G0.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},G_=t=>{const{theme:e,classGroups:r}=t,o={nextPart:new Map,validators:[]};for(const x in r)Xh(r[x],o,x,e);return o},Xh=(t,e,r,o)=>{t.forEach(x=>{if(typeof x=="string"){const v=x===""?e:q0(e,x);v.classGroupId=r;return}if(typeof x=="function"){if(q_(x)){Xh(x(o),e,r,o);return}e.validators.push({validator:x,classGroupId:r});return}Object.entries(x).forEach(([v,S])=>{Xh(S,q0(e,v),r,o)})})},q0=(t,e)=>{let r=t;return e.split(Lf).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},q_=t=>t.isThemeGetter,W_=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,o=new Map;const x=(v,S)=>{r.set(v,S),e++,e>t&&(e=0,o=r,r=new Map)};return{get(v){let S=r.get(v);if(S!==void 0)return S;if((S=o.get(v))!==void 0)return x(v,S),S},set(v,S){r.has(v)?r.set(v,S):x(v,S)}}},Yh="!",Gh=":",K_=Gh.length,Z_=t=>{const{prefix:e,experimentalParseClassName:r}=t;let o=x=>{const v=[];let S=0,f=0,s=0,u;for(let m=0;m<x.length;m++){let y=x[m];if(S===0&&f===0){if(y===Gh){v.push(x.slice(s,m)),s=m+K_;continue}if(y==="/"){u=m;continue}}y==="["?S++:y==="]"?S--:y==="("?f++:y===")"&&f--}const h=v.length===0?x:x.substring(s),a=Q_(h),l=a!==h,c=u&&u>s?u-s:void 0;return{modifiers:v,hasImportantModifier:l,baseClassName:a,maybePostfixModifierPosition:c}};if(e){const x=e+Gh,v=o;o=S=>S.startsWith(x)?v(S.substring(x.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:S,maybePostfixModifierPosition:void 0}}if(r){const x=o;o=v=>r({className:v,parseClassName:x})}return o},Q_=t=>t.endsWith(Yh)?t.substring(0,t.length-1):t.startsWith(Yh)?t.substring(1):t,J_=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(o=>[o,!0]));return o=>{if(o.length<=1)return o;const x=[];let v=[];return o.forEach(S=>{S[0]==="["||e[S]?(x.push(...v.sort(),S),v=[]):v.push(S)}),x.push(...v.sort()),x}},eN=t=>({cache:W_(t.cacheSize),parseClassName:Z_(t),sortModifiers:J_(t),...X_(t)}),tN=/\s+/,nN=(t,e)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:x,sortModifiers:v}=e,S=[],f=t.trim().split(tN);let s="";for(let u=f.length-1;u>=0;u-=1){const h=f[u],{isExternal:a,modifiers:l,hasImportantModifier:c,baseClassName:m,maybePostfixModifierPosition:y}=r(h);if(a){s=h+(s.length>0?" "+s:s);continue}let p=!!y,w=o(p?m.substring(0,y):m);if(!w){if(!p){s=h+(s.length>0?" "+s:s);continue}if(w=o(m),!w){s=h+(s.length>0?" "+s:s);continue}p=!1}const C=v(l).join(":"),T=c?C+Yh:C,j=T+w;if(S.includes(j))continue;S.push(j);const E=x(w,p);for(let M=0;M<E.length;++M){const D=E[M];S.push(T+D)}s=h+(s.length>0?" "+s:s)}return s};function iN(){let t=0,e,r,o="";for(;t<arguments.length;)(e=arguments[t++])&&(r=Dv(e))&&(o&&(o+=" "),o+=r);return o}const Dv=t=>{if(typeof t=="string")return t;let e,r="";for(let o=0;o<t.length;o++)t[o]&&(e=Dv(t[o]))&&(r&&(r+=" "),r+=e);return r};function rN(t,...e){let r,o,x,v=S;function S(s){const u=e.reduce((h,a)=>a(h),t());return r=eN(u),o=r.cache.get,x=r.cache.set,v=f,f(s)}function f(s){const u=o(s);if(u)return u;const h=nN(s,r);return x(s,h),h}return function(){return v(iN.apply(null,arguments))}}const Dt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},Av=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Rv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sN=/^\d+\/\d+$/,aN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uN=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,js=t=>sN.test(t),We=t=>!!t&&!Number.isNaN(Number(t)),Ji=t=>!!t&&Number.isInteger(Number(t)),fh=t=>t.endsWith("%")&&We(t.slice(0,-1)),wi=t=>aN.test(t),dN=()=>!0,hN=t=>oN.test(t)&&!lN.test(t),Pv=()=>!1,fN=t=>cN.test(t),mN=t=>uN.test(t),gN=t=>!Pe(t)&&!Le(t),pN=t=>Hs(t,zv,Pv),Pe=t=>Av.test(t),jr=t=>Hs(t,Iv,hN),mh=t=>Hs(t,wN,We),W0=t=>Hs(t,Lv,Pv),xN=t=>Hs(t,Fv,mN),Ql=t=>Hs(t,Bv,fN),Le=t=>Rv.test(t),Ga=t=>$s(t,Iv),yN=t=>$s(t,SN),K0=t=>$s(t,Lv),bN=t=>$s(t,zv),vN=t=>$s(t,Fv),Jl=t=>$s(t,Bv,!0),Hs=(t,e,r)=>{const o=Av.exec(t);return o?o[1]?e(o[1]):r(o[2]):!1},$s=(t,e,r=!1)=>{const o=Rv.exec(t);return o?o[1]?e(o[1]):r:!1},Lv=t=>t==="position"||t==="percentage",Fv=t=>t==="image"||t==="url",zv=t=>t==="length"||t==="size"||t==="bg-size",Iv=t=>t==="length",wN=t=>t==="number",SN=t=>t==="family-name",Bv=t=>t==="shadow",CN=()=>{const t=Dt("color"),e=Dt("font"),r=Dt("text"),o=Dt("font-weight"),x=Dt("tracking"),v=Dt("leading"),S=Dt("breakpoint"),f=Dt("container"),s=Dt("spacing"),u=Dt("radius"),h=Dt("shadow"),a=Dt("inset-shadow"),l=Dt("text-shadow"),c=Dt("drop-shadow"),m=Dt("blur"),y=Dt("perspective"),p=Dt("aspect"),w=Dt("ease"),C=Dt("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...j(),Le,Pe],M=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],A=()=>[Le,Pe,s],I=()=>[js,"full","auto",...A()],X=()=>[Ji,"none","subgrid",Le,Pe],oe=()=>["auto",{span:["full",Ji,Le,Pe]},Ji,Le,Pe],Z=()=>[Ji,"auto",Le,Pe],ae=()=>["auto","min","max","fr",Le,Pe],te=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...A()],q=()=>[js,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],Y=()=>[t,Le,Pe],R=()=>[...j(),K0,W0,{position:[Le,Pe]}],O=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",bN,pN,{size:[Le,Pe]}],B=()=>[fh,Ga,jr],K=()=>["","none","full",u,Le,Pe],V=()=>["",We,Ga,jr],F=()=>["solid","dashed","dotted","double"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[We,fh,K0,W0],ue=()=>["","none",m,Le,Pe],ce=()=>["none",We,Le,Pe],ie=()=>["none",We,Le,Pe],Q=()=>[We,Le,Pe],me=()=>[js,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wi],breakpoint:[wi],color:[dN],container:[wi],"drop-shadow":[wi],ease:["in","out","in-out"],font:[gN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wi],shadow:[wi],spacing:["px",We],text:[wi],"text-shadow":[wi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",js,Pe,Le,p]}],container:["container"],columns:[{columns:[We,Pe,Le,f]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Ji,"auto",Le,Pe]}],basis:[{basis:[js,"full","auto",f,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[We,js,"auto","initial","none",Pe]}],grow:[{grow:["",We,Le,Pe]}],shrink:[{shrink:["",We,Le,Pe]}],order:[{order:[Ji,"first","last","none",Le,Pe]}],"grid-cols":[{"grid-cols":X()}],"col-start-end":[{col:oe()}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":X()}],"row-start-end":[{row:oe()}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ae()}],"auto-rows":[{"auto-rows":ae()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...te(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...te()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":te()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[f,"screen",...q()]}],"min-w":[{"min-w":[f,"screen","none",...q()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[S]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",r,Ga,jr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Le,mh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",fh,Pe]}],"font-family":[{font:[yN,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[x,Le,Pe]}],"line-clamp":[{"line-clamp":[We,"none",Le,mh]}],leading:[{leading:[v,...A()]}],"list-image":[{"list-image":["none",Le,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:[We,"from-font","auto",Le,jr]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[We,"auto",Le,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:O()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ji,Le,Pe],radial:["",Le,Pe],conic:[Ji,Le,Pe]},vN,xN]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:B()}],"gradient-via-pos":[{via:B()}],"gradient-to-pos":[{to:B()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...F(),"hidden","none"]}],"divide-style":[{divide:[...F(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...F(),"none","hidden"]}],"outline-offset":[{"outline-offset":[We,Le,Pe]}],"outline-w":[{outline:["",We,Ga,jr]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",h,Jl,Ql]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",a,Jl,Ql]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[We,jr]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",l,Jl,Ql]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[We,Le,Pe]}],"mix-blend":[{"mix-blend":[...J(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":J()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[We]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[Le,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[We]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:O()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Pe]}],filter:[{filter:["","none",Le,Pe]}],blur:[{blur:ue()}],brightness:[{brightness:[We,Le,Pe]}],contrast:[{contrast:[We,Le,Pe]}],"drop-shadow":[{"drop-shadow":["","none",c,Jl,Ql]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",We,Le,Pe]}],"hue-rotate":[{"hue-rotate":[We,Le,Pe]}],invert:[{invert:["",We,Le,Pe]}],saturate:[{saturate:[We,Le,Pe]}],sepia:[{sepia:["",We,Le,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Pe]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[We,Le,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[We,Le,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",We,Le,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[We,Le,Pe]}],"backdrop-invert":[{"backdrop-invert":["",We,Le,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[We,Le,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[We,Le,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",We,Le,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[We,"initial",Le,Pe]}],ease:[{ease:["linear","initial",w,Le,Pe]}],delay:[{delay:[We,Le,Pe]}],animate:[{animate:["none",C,Le,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Le,Pe]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Q()}],"skew-x":[{"skew-x":Q()}],"skew-y":[{"skew-y":Q()}],transform:[{transform:[Le,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Pe]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[We,Ga,jr,mh]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Dn=rN(CN),Ff=N.createContext({});function zc(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const zf=typeof window<"u",Vv=zf?N.useLayoutEffect:N.useEffect,Ic=N.createContext(null);function If(t,e){t.indexOf(e)===-1&&t.push(e)}function Bf(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Ni=(t,e,r)=>r>e?e:r<t?t:r;let Vf=()=>{};const Ei={},Uv=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Hv(t){return typeof t=="object"&&t!==null}const $v=t=>/^0[^.\s]+$/u.test(t);function Uf(t){let e;return()=>(e===void 0&&(e=t()),e)}const An=t=>t,kN=(t,e)=>r=>e(t(r)),Po=(...t)=>t.reduce(kN),yo=(t,e,r)=>{const o=e-t;return o===0?1:(r-t)/o};class Hf{constructor(){this.subscriptions=[]}add(e){return If(this.subscriptions,e),()=>Bf(this.subscriptions,e)}notify(e,r,o){const x=this.subscriptions.length;if(x)if(x===1)this.subscriptions[0](e,r,o);else for(let v=0;v<x;v++){const S=this.subscriptions[v];S&&S(e,r,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ei=t=>t*1e3,ti=t=>t/1e3;function Xv(t,e){return e?t*(1e3/e):0}const Yv=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,TN=1e-7,jN=12;function _N(t,e,r,o,x){let v,S,f=0;do S=e+(r-e)/2,v=Yv(S,o,x)-t,v>0?r=S:e=S;while(Math.abs(v)>TN&&++f<jN);return S}function Lo(t,e,r,o){if(t===e&&r===o)return An;const x=v=>_N(v,0,1,t,r);return v=>v===0||v===1?v:Yv(x(v),e,o)}const Gv=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qv=t=>e=>1-t(1-e),Wv=Lo(.33,1.53,.69,.99),$f=qv(Wv),Kv=Gv($f),Zv=t=>(t*=2)<1?.5*$f(t):.5*(2-Math.pow(2,-10*(t-1))),Xf=t=>1-Math.sin(Math.acos(t)),Qv=qv(Xf),Jv=Gv(Xf),NN=Lo(.42,0,1,1),EN=Lo(0,0,.58,1),e1=Lo(.42,0,.58,1),MN=t=>Array.isArray(t)&&typeof t[0]!="number",t1=t=>Array.isArray(t)&&typeof t[0]=="number",ON={linear:An,easeIn:NN,easeInOut:e1,easeOut:EN,circIn:Xf,circInOut:Jv,circOut:Qv,backIn:$f,backInOut:Kv,backOut:Wv,anticipate:Zv},DN=t=>typeof t=="string",Z0=t=>{if(t1(t)){Vf(t.length===4);const[e,r,o,x]=t;return Lo(e,r,o,x)}else if(DN(t))return ON[t];return t},ec=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function AN(t,e){let r=new Set,o=new Set,x=!1,v=!1;const S=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1};function s(h){S.has(h)&&(u.schedule(h),t()),h(f)}const u={schedule:(h,a=!1,l=!1)=>{const m=l&&x?r:o;return a&&S.add(h),m.has(h)||m.add(h),h},cancel:h=>{o.delete(h),S.delete(h)},process:h=>{if(f=h,x){v=!0;return}x=!0,[r,o]=[o,r],r.forEach(s),r.clear(),x=!1,v&&(v=!1,u.process(h))}};return u}const RN=40;function n1(t,e){let r=!1,o=!0;const x={delta:0,timestamp:0,isProcessing:!1},v=()=>r=!0,S=ec.reduce((T,j)=>(T[j]=AN(v),T),{}),{setup:f,read:s,resolveKeyframes:u,preUpdate:h,update:a,preRender:l,render:c,postRender:m}=S,y=()=>{const T=Ei.useManualTiming?x.timestamp:performance.now();r=!1,Ei.useManualTiming||(x.delta=o?1e3/60:Math.max(Math.min(T-x.timestamp,RN),1)),x.timestamp=T,x.isProcessing=!0,f.process(x),s.process(x),u.process(x),h.process(x),a.process(x),l.process(x),c.process(x),m.process(x),x.isProcessing=!1,r&&e&&(o=!1,t(y))},p=()=>{r=!0,o=!0,x.isProcessing||t(y)};return{schedule:ec.reduce((T,j)=>{const E=S[j];return T[j]=(M,D=!1,A=!1)=>(r||p(),E.schedule(M,D,A)),T},{}),cancel:T=>{for(let j=0;j<ec.length;j++)S[ec[j]].cancel(T)},state:x,steps:S}}const{schedule:ft,cancel:rr,state:$t,steps:gh}=n1(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0);let uc;function PN(){uc=void 0}const dn={now:()=>(uc===void 0&&dn.set($t.isProcessing||Ei.useManualTiming?$t.timestamp:performance.now()),uc),set:t=>{uc=t,queueMicrotask(PN)}},i1=t=>e=>typeof e=="string"&&e.startsWith(t),Yf=i1("--"),LN=i1("var(--"),Gf=t=>LN(t)?FN.test(t.split("/*")[0].trim()):!1,FN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bo={...Xs,transform:t=>Ni(0,1,t)},tc={...Xs,default:1},ro=t=>Math.round(t*1e5)/1e5,qf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zN(t){return t==null}const IN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wf=(t,e)=>r=>!!(typeof r=="string"&&IN.test(r)&&r.startsWith(t)||e&&!zN(r)&&Object.prototype.hasOwnProperty.call(r,e)),r1=(t,e,r)=>o=>{if(typeof o!="string")return o;const[x,v,S,f]=o.match(qf);return{[t]:parseFloat(x),[e]:parseFloat(v),[r]:parseFloat(S),alpha:f!==void 0?parseFloat(f):1}},BN=t=>Ni(0,255,t),ph={...Xs,transform:t=>Math.round(BN(t))},Mr={test:Wf("rgb","red"),parse:r1("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:o=1})=>"rgba("+ph.transform(t)+", "+ph.transform(e)+", "+ph.transform(r)+", "+ro(bo.transform(o))+")"};function VN(t){let e="",r="",o="",x="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),o=t.substring(5,7),x=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),o=t.substring(3,4),x=t.substring(4,5),e+=e,r+=r,o+=o,x+=x),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:x?parseInt(x,16)/255:1}}const qh={test:Wf("#"),parse:VN,transform:Mr.transform},Fo=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),er=Fo("deg"),ni=Fo("%"),$e=Fo("px"),UN=Fo("vh"),HN=Fo("vw"),Q0={...ni,parse:t=>ni.parse(t)/100,transform:t=>ni.transform(t*100)},Os={test:Wf("hsl","hue"),parse:r1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:o=1})=>"hsla("+Math.round(t)+", "+ni.transform(ro(e))+", "+ni.transform(ro(r))+", "+ro(bo.transform(o))+")"},Et={test:t=>Mr.test(t)||qh.test(t)||Os.test(t),parse:t=>Mr.test(t)?Mr.parse(t):Os.test(t)?Os.parse(t):qh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Mr.transform(t):Os.transform(t),getAnimatableNone:t=>{const e=Et.parse(t);return e.alpha=0,Et.transform(e)}},$N=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XN(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qf))==null?void 0:e.length)||0)+(((r=t.match($N))==null?void 0:r.length)||0)>0}const s1="number",a1="color",YN="var",GN="var(",J0="${}",qN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vo(t){const e=t.toString(),r=[],o={color:[],number:[],var:[]},x=[];let v=0;const f=e.replace(qN,s=>(Et.test(s)?(o.color.push(v),x.push(a1),r.push(Et.parse(s))):s.startsWith(GN)?(o.var.push(v),x.push(YN),r.push(s)):(o.number.push(v),x.push(s1),r.push(parseFloat(s))),++v,J0)).split(J0);return{values:r,split:f,indexes:o,types:x}}function o1(t){return vo(t).values}function l1(t){const{split:e,types:r}=vo(t),o=e.length;return x=>{let v="";for(let S=0;S<o;S++)if(v+=e[S],x[S]!==void 0){const f=r[S];f===s1?v+=ro(x[S]):f===a1?v+=Et.transform(x[S]):v+=x[S]}return v}}const WN=t=>typeof t=="number"?0:Et.test(t)?Et.getAnimatableNone(t):t;function KN(t){const e=o1(t);return l1(t)(e.map(WN))}const sr={test:XN,parse:o1,createTransformer:l1,getAnimatableNone:KN};function xh(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function ZN({hue:t,saturation:e,lightness:r,alpha:o}){t/=360,e/=100,r/=100;let x=0,v=0,S=0;if(!e)x=v=S=r;else{const f=r<.5?r*(1+e):r+e-r*e,s=2*r-f;x=xh(s,f,t+1/3),v=xh(s,f,t),S=xh(s,f,t-1/3)}return{red:Math.round(x*255),green:Math.round(v*255),blue:Math.round(S*255),alpha:o}}function vc(t,e){return r=>r>0?e:t}const gt=(t,e,r)=>t+(e-t)*r,yh=(t,e,r)=>{const o=t*t,x=r*(e*e-o)+o;return x<0?0:Math.sqrt(x)},QN=[qh,Mr,Os],JN=t=>QN.find(e=>e.test(t));function ey(t){const e=JN(t);if(!e)return!1;let r=e.parse(t);return e===Os&&(r=ZN(r)),r}const ty=(t,e)=>{const r=ey(t),o=ey(e);if(!r||!o)return vc(t,e);const x={...r};return v=>(x.red=yh(r.red,o.red,v),x.green=yh(r.green,o.green,v),x.blue=yh(r.blue,o.blue,v),x.alpha=gt(r.alpha,o.alpha,v),Mr.transform(x))},Wh=new Set(["none","hidden"]);function eE(t,e){return Wh.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function tE(t,e){return r=>gt(t,e,r)}function Kf(t){return typeof t=="number"?tE:typeof t=="string"?Gf(t)?vc:Et.test(t)?ty:rE:Array.isArray(t)?c1:typeof t=="object"?Et.test(t)?ty:nE:vc}function c1(t,e){const r=[...t],o=r.length,x=t.map((v,S)=>Kf(v)(v,e[S]));return v=>{for(let S=0;S<o;S++)r[S]=x[S](v);return r}}function nE(t,e){const r={...t,...e},o={};for(const x in r)t[x]!==void 0&&e[x]!==void 0&&(o[x]=Kf(t[x])(t[x],e[x]));return x=>{for(const v in o)r[v]=o[v](x);return r}}function iE(t,e){const r=[],o={color:0,var:0,number:0};for(let x=0;x<e.values.length;x++){const v=e.types[x],S=t.indexes[v][o[v]],f=t.values[S]??0;r[x]=f,o[v]++}return r}const rE=(t,e)=>{const r=sr.createTransformer(e),o=vo(t),x=vo(e);return o.indexes.var.length===x.indexes.var.length&&o.indexes.color.length===x.indexes.color.length&&o.indexes.number.length>=x.indexes.number.length?Wh.has(t)&&!x.values.length||Wh.has(e)&&!o.values.length?eE(t,e):Po(c1(iE(o,x),x.values),r):vc(t,e)};function u1(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?gt(t,e,r):Kf(t)(t,e)}const sE=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ft.update(e,r),stop:()=>rr(e),now:()=>$t.isProcessing?$t.timestamp:dn.now()}},d1=(t,e,r=10)=>{let o="";const x=Math.max(Math.round(e/r),2);for(let v=0;v<x;v++)o+=Math.round(t(v/(x-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},wc=2e4;function Zf(t){let e=0;const r=50;let o=t.next(e);for(;!o.done&&e<wc;)e+=r,o=t.next(e);return e>=wc?1/0:e}function aE(t,e=100,r){const o=r({...t,keyframes:[0,e]}),x=Math.min(Zf(o),wc);return{type:"keyframes",ease:v=>o.next(x*v).value/e,duration:ti(x)}}const oE=5;function h1(t,e,r){const o=Math.max(e-oE,0);return Xv(r-t(o),e-o)}const yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ny=.001;function lE({duration:t=yt.duration,bounce:e=yt.bounce,velocity:r=yt.velocity,mass:o=yt.mass}){let x,v,S=1-e;S=Ni(yt.minDamping,yt.maxDamping,S),t=Ni(yt.minDuration,yt.maxDuration,ti(t)),S<1?(x=u=>{const h=u*S,a=h*t,l=h-r,c=Kh(u,S),m=Math.exp(-a);return ny-l/c*m},v=u=>{const a=u*S*t,l=a*r+r,c=Math.pow(S,2)*Math.pow(u,2)*t,m=Math.exp(-a),y=Kh(Math.pow(u,2),S);return(-x(u)+ny>0?-1:1)*((l-c)*m)/y}):(x=u=>{const h=Math.exp(-u*t),a=(u-r)*t+1;return-.001+h*a},v=u=>{const h=Math.exp(-u*t),a=(r-u)*(t*t);return h*a});const f=5/t,s=uE(x,v,f);if(t=ei(t),isNaN(s))return{stiffness:yt.stiffness,damping:yt.damping,duration:t};{const u=Math.pow(s,2)*o;return{stiffness:u,damping:S*2*Math.sqrt(o*u),duration:t}}}const cE=12;function uE(t,e,r){let o=r;for(let x=1;x<cE;x++)o=o-t(o)/e(o);return o}function Kh(t,e){return t*Math.sqrt(1-e*e)}const dE=["duration","bounce"],hE=["stiffness","damping","mass"];function iy(t,e){return e.some(r=>t[r]!==void 0)}function fE(t){let e={velocity:yt.velocity,stiffness:yt.stiffness,damping:yt.damping,mass:yt.mass,isResolvedFromDuration:!1,...t};if(!iy(t,hE)&&iy(t,dE))if(t.visualDuration){const r=t.visualDuration,o=2*Math.PI/(r*1.2),x=o*o,v=2*Ni(.05,1,1-(t.bounce||0))*Math.sqrt(x);e={...e,mass:yt.mass,stiffness:x,damping:v}}else{const r=lE(t);e={...e,...r,mass:yt.mass},e.isResolvedFromDuration=!0}return e}function Sc(t=yt.visualDuration,e=yt.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:o,restDelta:x}=r;const v=r.keyframes[0],S=r.keyframes[r.keyframes.length-1],f={done:!1,value:v},{stiffness:s,damping:u,mass:h,duration:a,velocity:l,isResolvedFromDuration:c}=fE({...r,velocity:-ti(r.velocity||0)}),m=l||0,y=u/(2*Math.sqrt(s*h)),p=S-v,w=ti(Math.sqrt(s/h)),C=Math.abs(p)<5;o||(o=C?yt.restSpeed.granular:yt.restSpeed.default),x||(x=C?yt.restDelta.granular:yt.restDelta.default);let T;if(y<1){const E=Kh(w,y);T=M=>{const D=Math.exp(-y*w*M);return S-D*((m+y*w*p)/E*Math.sin(E*M)+p*Math.cos(E*M))}}else if(y===1)T=E=>S-Math.exp(-w*E)*(p+(m+w*p)*E);else{const E=w*Math.sqrt(y*y-1);T=M=>{const D=Math.exp(-y*w*M),A=Math.min(E*M,300);return S-D*((m+y*w*p)*Math.sinh(A)+E*p*Math.cosh(A))/E}}const j={calculatedDuration:c&&a||null,next:E=>{const M=T(E);if(c)f.done=E>=a;else{let D=E===0?m:0;y<1&&(D=E===0?ei(m):h1(T,E,M));const A=Math.abs(D)<=o,I=Math.abs(S-M)<=x;f.done=A&&I}return f.value=f.done?S:M,f},toString:()=>{const E=Math.min(Zf(j),wc),M=d1(D=>j.next(E*D).value,E,30);return E+"ms "+M},toTransition:()=>{}};return j}Sc.applyToOptions=t=>{const e=aE(t,100,Sc);return t.ease=e.ease,t.duration=ei(e.duration),t.type="keyframes",t};function Zh({keyframes:t,velocity:e=0,power:r=.8,timeConstant:o=325,bounceDamping:x=10,bounceStiffness:v=500,modifyTarget:S,min:f,max:s,restDelta:u=.5,restSpeed:h}){const a=t[0],l={done:!1,value:a},c=A=>f!==void 0&&A<f||s!==void 0&&A>s,m=A=>f===void 0?s:s===void 0||Math.abs(f-A)<Math.abs(s-A)?f:s;let y=r*e;const p=a+y,w=S===void 0?p:S(p);w!==p&&(y=w-a);const C=A=>-y*Math.exp(-A/o),T=A=>w+C(A),j=A=>{const I=C(A),X=T(A);l.done=Math.abs(I)<=u,l.value=l.done?w:X};let E,M;const D=A=>{c(l.value)&&(E=A,M=Sc({keyframes:[l.value,m(l.value)],velocity:h1(T,A,l.value),damping:x,stiffness:v,restDelta:u,restSpeed:h}))};return D(0),{calculatedDuration:null,next:A=>{let I=!1;return!M&&E===void 0&&(I=!0,j(A),D(A)),E!==void 0&&A>=E?M.next(A-E):(!I&&j(A),l)}}}function mE(t,e,r){const o=[],x=r||Ei.mix||u1,v=t.length-1;for(let S=0;S<v;S++){let f=x(t[S],t[S+1]);if(e){const s=Array.isArray(e)?e[S]||An:e;f=Po(s,f)}o.push(f)}return o}function gE(t,e,{clamp:r=!0,ease:o,mixer:x}={}){const v=t.length;if(Vf(v===e.length),v===1)return()=>e[0];if(v===2&&e[0]===e[1])return()=>e[1];const S=t[0]===t[1];t[0]>t[v-1]&&(t=[...t].reverse(),e=[...e].reverse());const f=mE(e,o,x),s=f.length,u=h=>{if(S&&h<t[0])return e[0];let a=0;if(s>1)for(;a<t.length-2&&!(h<t[a+1]);a++);const l=yo(t[a],t[a+1],h);return f[a](l)};return r?h=>u(Ni(t[0],t[v-1],h)):u}function pE(t,e){const r=t[t.length-1];for(let o=1;o<=e;o++){const x=yo(0,e,o);t.push(gt(r,1,x))}}function xE(t){const e=[0];return pE(e,t.length-1),e}function yE(t,e){return t.map(r=>r*e)}function bE(t,e){return t.map(()=>e||e1).splice(0,t.length-1)}function so({duration:t=300,keyframes:e,times:r,ease:o="easeInOut"}){const x=MN(o)?o.map(Z0):Z0(o),v={done:!1,value:e[0]},S=yE(r&&r.length===e.length?r:xE(e),t),f=gE(S,e,{ease:Array.isArray(x)?x:bE(e,x)});return{calculatedDuration:t,next:s=>(v.value=f(s),v.done=s>=t,v)}}const vE=t=>t!==null;function Qf(t,{repeat:e,repeatType:r="loop"},o,x=1){const v=t.filter(vE),f=x<0||e&&r!=="loop"&&e%2===1?0:v.length-1;return!f||o===void 0?v[f]:o}const wE={decay:Zh,inertia:Zh,tween:so,keyframes:so,spring:Sc};function f1(t){typeof t.type=="string"&&(t.type=wE[t.type])}class Jf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const SE=t=>t/100;class em extends Jf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var o,x;const{motionValue:r}=this.options;r&&r.updatedAt!==dn.now()&&this.tick(dn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(x=(o=this.options).onStop)==null||x.call(o))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;f1(e);const{type:r=so,repeat:o=0,repeatDelay:x=0,repeatType:v,velocity:S=0}=e;let{keyframes:f}=e;const s=r||so;s!==so&&typeof f[0]!="number"&&(this.mixKeyframes=Po(SE,u1(f[0],f[1])),f=[0,100]);const u=s({...e,keyframes:f});v==="mirror"&&(this.mirroredGenerator=s({...e,keyframes:[...f].reverse(),velocity:-S})),u.calculatedDuration===null&&(u.calculatedDuration=Zf(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+x,this.totalDuration=this.resolvedDuration*(o+1)-x,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:o,totalDuration:x,mixKeyframes:v,mirroredGenerator:S,resolvedDuration:f,calculatedDuration:s}=this;if(this.startTime===null)return o.next(0);const{delay:u=0,keyframes:h,repeat:a,repeatType:l,repeatDelay:c,type:m,onUpdate:y,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-x/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?w<0:w>x;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let T=this.currentTime,j=o;if(a){const A=Math.min(this.currentTime,x)/f;let I=Math.floor(A),X=A%1;!X&&A>=1&&(X=1),X===1&&I--,I=Math.min(I,a+1),!!(I%2)&&(l==="reverse"?(X=1-X,c&&(X-=c/f)):l==="mirror"&&(j=S)),T=Ni(0,1,X)*f}const E=C?{done:!1,value:h[0]}:j.next(T);v&&(E.value=v(E.value));let{done:M}=E;!C&&s!==null&&(M=this.playbackSpeed>=0?this.currentTime>=x:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return D&&m!==Zh&&(E.value=Qf(h,this.options,p,this.speed)),y&&y(E.value),D&&this.finish(),E}then(e,r){return this.finished.then(e,r)}get duration(){return ti(this.calculatedDuration)}get time(){return ti(this.currentTime)}set time(e){var r;e=ei(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(dn.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=ti(this.currentTime))}play(){var x,v;if(this.isStopped)return;const{driver:e=sE,startTime:r}=this.options;this.driver||(this.driver=e(S=>this.tick(S))),(v=(x=this.options).onPlay)==null||v.call(x);const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=r??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function CE(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Or=t=>t*180/Math.PI,Qh=t=>{const e=Or(Math.atan2(t[1],t[0]));return Jh(e)},kE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Qh,rotateZ:Qh,skewX:t=>Or(Math.atan(t[1])),skewY:t=>Or(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Jh=t=>(t=t%360,t<0&&(t+=360),t),ry=Qh,sy=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ay=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),TE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sy,scaleY:ay,scale:t=>(sy(t)+ay(t))/2,rotateX:t=>Jh(Or(Math.atan2(t[6],t[5]))),rotateY:t=>Jh(Or(Math.atan2(-t[2],t[0]))),rotateZ:ry,rotate:ry,skewX:t=>Or(Math.atan(t[4])),skewY:t=>Or(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ef(t){return t.includes("scale")?1:0}function tf(t,e){if(!t||t==="none")return ef(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,x;if(r)o=TE,x=r;else{const f=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=kE,x=f}if(!x)return ef(e);const v=o[e],S=x[1].split(",").map(_E);return typeof v=="function"?v(S):S[v]}const jE=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return tf(r,e)};function _E(t){return parseFloat(t.trim())}const Ys=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gs=new Set(Ys),oy=t=>t===Xs||t===$e,NE=new Set(["x","y","z"]),EE=Ys.filter(t=>!NE.has(t));function ME(t){const e=[];return EE.forEach(r=>{const o=t.getValue(r);o!==void 0&&(e.push([r,o.get()]),o.set(r.startsWith("scale")?1:0))}),e}const Fr={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>tf(e,"x"),y:(t,{transform:e})=>tf(e,"y")};Fr.translateX=Fr.x;Fr.translateY=Fr.y;const zr=new Set;let nf=!1,rf=!1,sf=!1;function m1(){if(rf){const t=Array.from(zr).filter(o=>o.needsMeasurement),e=new Set(t.map(o=>o.element)),r=new Map;e.forEach(o=>{const x=ME(o);x.length&&(r.set(o,x),o.render())}),t.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const x=r.get(o);x&&x.forEach(([v,S])=>{var f;(f=o.getValue(v))==null||f.set(S)})}),t.forEach(o=>o.measureEndState()),t.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}rf=!1,nf=!1,zr.forEach(t=>t.complete(sf)),zr.clear()}function g1(){zr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(rf=!0)})}function OE(){sf=!0,g1(),m1(),sf=!1}class tm{constructor(e,r,o,x,v,S=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=o,this.motionValue=x,this.element=v,this.isAsync=S}scheduleResolve(){this.state="scheduled",this.isAsync?(zr.add(this),nf||(nf=!0,ft.read(g1),ft.resolveKeyframes(m1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:o,motionValue:x}=this;if(e[0]===null){const v=x==null?void 0:x.get(),S=e[e.length-1];if(v!==void 0)e[0]=v;else if(o&&r){const f=o.readValue(r,S);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=S),x&&v===void 0&&x.set(e[0])}CE(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),zr.delete(this)}cancel(){this.state==="scheduled"&&(zr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DE=t=>t.startsWith("--");function AE(t,e,r){DE(e)?t.style.setProperty(e,r):t.style[e]=r}const RE=Uf(()=>window.ScrollTimeline!==void 0),PE={};function LE(t,e){const r=Uf(t);return()=>PE[e]??r()}const p1=LE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eo=([t,e,r,o])=>`cubic-bezier(${t}, ${e}, ${r}, ${o})`,ly={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eo([0,.65,.55,1]),circOut:eo([.55,0,1,.45]),backIn:eo([.31,.01,.66,-.59]),backOut:eo([.33,1.53,.69,.99])};function x1(t,e){if(t)return typeof t=="function"?p1()?d1(t,e):"ease-out":t1(t)?eo(t):Array.isArray(t)?t.map(r=>x1(r,e)||ly.easeOut):ly[t]}function FE(t,e,r,{delay:o=0,duration:x=300,repeat:v=0,repeatType:S="loop",ease:f="easeOut",times:s}={},u=void 0){const h={[e]:r};s&&(h.offset=s);const a=x1(f,x);Array.isArray(a)&&(h.easing=a);const l={delay:o,duration:x,easing:Array.isArray(a)?"linear":a,fill:"both",iterations:v+1,direction:S==="reverse"?"alternate":"normal"};return u&&(l.pseudoElement=u),t.animate(h,l)}function y1(t){return typeof t=="function"&&"applyToOptions"in t}function zE({type:t,...e}){return y1(t)&&p1()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class IE extends Jf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:o,keyframes:x,pseudoElement:v,allowFlatten:S=!1,finalKeyframe:f,onComplete:s}=e;this.isPseudoElement=!!v,this.allowFlatten=S,this.options=e,Vf(typeof e.type!="string");const u=zE(e);this.animation=FE(r,o,x,u,v),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!v){const h=Qf(x,this.options,f,this.speed);this.updateMotionValue?this.updateMotionValue(h):AE(r,o,h),this.animation.cancel()}s==null||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,o;const e=((o=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:o.call(r).duration)||0;return ti(Number(e))}get time(){return ti(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ei(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&RE()?(this.animation.timeline=e,An):r(this)}}const b1={anticipate:Zv,backInOut:Kv,circInOut:Jv};function BE(t){return t in b1}function VE(t){typeof t.ease=="string"&&BE(t.ease)&&(t.ease=b1[t.ease])}const cy=10;class UE extends IE{constructor(e){VE(e),f1(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:o,onComplete:x,element:v,...S}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const f=new em({...S,autoplay:!1}),s=ei(this.finishedTime??this.time);r.setWithVelocity(f.sample(s-cy).value,f.sample(s).value,cy),f.stop()}}const uy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sr.test(t)||t==="0")&&!t.startsWith("url("));function HE(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function $E(t,e,r,o){const x=t[0];if(x===null)return!1;if(e==="display"||e==="visibility")return!0;const v=t[t.length-1],S=uy(x,e),f=uy(v,e);return!S||!f?!1:HE(t)||(r==="spring"||y1(r))&&o}function af(t){t.duration=0,t.type}const XE=new Set(["opacity","clipPath","filter","transform"]),YE=Uf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GE(t){var h;const{motionValue:e,name:r,repeatDelay:o,repeatType:x,damping:v,type:S}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:s,transformTemplate:u}=e.owner.getProps();return YE()&&r&&XE.has(r)&&(r!=="transform"||!u)&&!s&&!o&&x!=="mirror"&&v!==0&&S!=="inertia"}const qE=40;class WE extends Jf{constructor({autoplay:e=!0,delay:r=0,type:o="keyframes",repeat:x=0,repeatDelay:v=0,repeatType:S="loop",keyframes:f,name:s,motionValue:u,element:h,...a}){var m;super(),this.stop=()=>{var y,p;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(p=this.keyframeResolver)==null||p.cancel()},this.createdAt=dn.now();const l={autoplay:e,delay:r,type:o,repeat:x,repeatDelay:v,repeatType:S,name:s,motionValue:u,element:h,...a},c=(h==null?void 0:h.KeyframeResolver)||tm;this.keyframeResolver=new c(f,(y,p,w)=>this.onKeyframesResolved(y,p,l,!w),s,u,h),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,r,o,x){this.keyframeResolver=void 0;const{name:v,type:S,velocity:f,delay:s,isHandoff:u,onUpdate:h}=o;this.resolvedAt=dn.now(),$E(e,v,S,f)||((Ei.instantAnimations||!s)&&(h==null||h(Qf(e,o,r))),e[0]=e[e.length-1],af(o),o.repeat=0);const l={startTime:x?this.resolvedAt?this.resolvedAt-this.createdAt>qE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...o,keyframes:e},c=!u&&GE(l)?new UE({...l,element:l.motionValue.owner.current}):new em(l);c.finished.then(()=>this.notifyFinished()).catch(An),this.pendingTimeline&&(this.stopTimeline=c.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=c}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),OE()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const KE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZE(t){const e=KE.exec(t);if(!e)return[,];const[,r,o,x]=e;return[`--${r??o}`,x]}function v1(t,e,r=1){const[o,x]=ZE(t);if(!o)return;const v=window.getComputedStyle(e).getPropertyValue(o);if(v){const S=v.trim();return Uv(S)?parseFloat(S):S}return Gf(x)?v1(x,e,r+1):x}function nm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const w1=new Set(["width","height","top","left","right","bottom",...Ys]),QE={test:t=>t==="auto",parse:t=>t},S1=t=>e=>e.test(t),C1=[Xs,$e,ni,er,HN,UN,QE],dy=t=>C1.find(S1(t));function JE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$v(t):!0}const eM=new Set(["brightness","contrast","saturate","opacity"]);function tM(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[o]=r.match(qf)||[];if(!o)return t;const x=r.replace(o,"");let v=eM.has(e)?1:0;return o!==r&&(v*=100),e+"("+v+x+")"}const nM=/\b([a-z-]*)\(.*?\)/gu,of={...sr,getAnimatableNone:t=>{const e=t.match(nM);return e?e.map(tM).join(" "):t}},hy={...Xs,transform:Math.round},iM={rotate:er,rotateX:er,rotateY:er,rotateZ:er,scale:tc,scaleX:tc,scaleY:tc,scaleZ:tc,skew:er,skewX:er,skewY:er,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:bo,originX:Q0,originY:Q0,originZ:$e},im={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,backgroundPositionX:$e,backgroundPositionY:$e,...iM,zIndex:hy,fillOpacity:bo,strokeOpacity:bo,numOctaves:hy},rM={...im,color:Et,backgroundColor:Et,outlineColor:Et,fill:Et,stroke:Et,borderColor:Et,borderTopColor:Et,borderRightColor:Et,borderBottomColor:Et,borderLeftColor:Et,filter:of,WebkitFilter:of},k1=t=>rM[t];function T1(t,e){let r=k1(t);return r!==of&&(r=sr),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const sM=new Set(["auto","none","0"]);function aM(t,e,r){let o=0,x;for(;o<t.length&&!x;){const v=t[o];typeof v=="string"&&!sM.has(v)&&vo(v).values.length&&(x=t[o]),o++}if(x&&r)for(const v of e)t[v]=T1(r,x)}class oM extends tm{constructor(e,r,o,x,v){super(e,r,o,x,v,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:o}=this;if(!r||!r.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let u=e[s];if(typeof u=="string"&&(u=u.trim(),Gf(u))){const h=v1(u,r.current);h!==void 0&&(e[s]=h),s===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!w1.has(o)||e.length!==2)return;const[x,v]=e,S=dy(x),f=dy(v);if(S!==f)if(oy(S)&&oy(f))for(let s=0;s<e.length;s++){const u=e[s];typeof u=="string"&&(e[s]=parseFloat(u))}else Fr[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,o=[];for(let x=0;x<e.length;x++)(e[x]===null||JE(e[x]))&&o.push(x);o.length&&aM(e,o,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fr[o](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const x=r[r.length-1];x!==void 0&&e.getValue(o,x).jump(x,!1)}measureEndState(){var f;const{element:e,name:r,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const x=e.getValue(r);x&&x.jump(this.measuredOrigin,!1);const v=o.length-1,S=o[v];o[v]=Fr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),S!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=S),(f=this.removedTransforms)!=null&&f.length&&this.removedTransforms.forEach(([s,u])=>{e.getValue(s).set(u)}),this.resolveNoneKeyframes()}}function lM(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let o=document;const x=(r==null?void 0:r[t])??o.querySelectorAll(t);return x?Array.from(x):[]}return Array.from(t)}const j1=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function _1(t){return Hv(t)&&"offsetHeight"in t}const fy=30,cM=t=>!isNaN(parseFloat(t));class uM{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{var v;const x=dn.now();if(this.updatedAt!==x&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((v=this.events.change)==null||v.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=dn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Hf);const o=this.events[e].add(r);return e==="change"?()=>{o(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,o){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=dn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fy)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,fy);return Xv(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Br(t,e){return new uM(t,e)}const{schedule:rm}=n1(queueMicrotask,!1),In={x:!1,y:!1};function N1(){return In.x||In.y}function dM(t){return t==="x"||t==="y"?In[t]?null:(In[t]=!0,()=>{In[t]=!1}):In.x||In.y?null:(In.x=In.y=!0,()=>{In.x=In.y=!1})}function E1(t,e){const r=lM(t),o=new AbortController,x={passive:!0,...e,signal:o.signal};return[r,x,()=>o.abort()]}function my(t){return!(t.pointerType==="touch"||N1())}function hM(t,e,r={}){const[o,x,v]=E1(t,r),S=f=>{if(!my(f))return;const{target:s}=f,u=e(s,f);if(typeof u!="function"||!s)return;const h=a=>{my(a)&&(u(a),s.removeEventListener("pointerleave",h))};s.addEventListener("pointerleave",h,x)};return o.forEach(f=>{f.addEventListener("pointerenter",S,x)}),v}const M1=(t,e)=>e?t===e?!0:M1(t,e.parentElement):!1,sm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mM(t){return fM.has(t.tagName)||t.tabIndex!==-1}const dc=new WeakSet;function gy(t){return e=>{e.key==="Enter"&&t(e)}}function bh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const gM=(t,e)=>{const r=t.currentTarget;if(!r)return;const o=gy(()=>{if(dc.has(r))return;bh(r,"down");const x=gy(()=>{bh(r,"up")}),v=()=>bh(r,"cancel");r.addEventListener("keyup",x,e),r.addEventListener("blur",v,e)});r.addEventListener("keydown",o,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",o),e)};function py(t){return sm(t)&&!N1()}function pM(t,e,r={}){const[o,x,v]=E1(t,r),S=f=>{const s=f.currentTarget;if(!py(f))return;dc.add(s);const u=e(s,f),h=(c,m)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),dc.has(s)&&dc.delete(s),py(c)&&typeof u=="function"&&u(c,{success:m})},a=c=>{h(c,s===window||s===document||r.useGlobalTarget||M1(s,c.target))},l=c=>{h(c,!1)};window.addEventListener("pointerup",a,x),window.addEventListener("pointercancel",l,x)};return o.forEach(f=>{(r.useGlobalTarget?window:f).addEventListener("pointerdown",S,x),_1(f)&&(f.addEventListener("focus",u=>gM(u,x)),!mM(f)&&!f.hasAttribute("tabindex")&&(f.tabIndex=0))}),v}function O1(t){return Hv(t)&&"ownerSVGElement"in t}function xM(t){return O1(t)&&t.tagName==="svg"}const Zt=t=>!!(t&&t.getVelocity),yM=[...C1,Et,sr],bM=t=>yM.find(S1(t)),Bc=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class vM extends N.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const o=r.offsetParent,x=_1(o)&&o.offsetWidth||0,v=this.props.sizeRef.current;v.height=r.offsetHeight||0,v.width=r.offsetWidth||0,v.top=r.offsetTop,v.left=r.offsetLeft,v.right=x-v.width-v.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wM({children:t,isPresent:e,anchorX:r,root:o}){const x=N.useId(),v=N.useRef(null),S=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=N.useContext(Bc);return N.useInsertionEffect(()=>{const{width:s,height:u,top:h,left:a,right:l}=S.current;if(e||!v.current||!s||!u)return;const c=r==="left"?`left: ${a}`:`right: ${l}`;v.current.dataset.motionPopId=x;const m=document.createElement("style");f&&(m.nonce=f);const y=o??document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${u}px !important;
            ${c}px !important;
            top: ${h}px !important;
          }
        `),()=>{y.contains(m)&&y.removeChild(m)}},[e]),g.jsx(vM,{isPresent:e,childRef:v,sizeRef:S,children:N.cloneElement(t,{ref:v})})}const SM=({children:t,initial:e,isPresent:r,onExitComplete:o,custom:x,presenceAffectsLayout:v,mode:S,anchorX:f,root:s})=>{const u=zc(CM),h=N.useId();let a=!0,l=N.useMemo(()=>(a=!1,{id:h,initial:e,isPresent:r,custom:x,onExitComplete:c=>{u.set(c,!0);for(const m of u.values())if(!m)return;o&&o()},register:c=>(u.set(c,!1),()=>u.delete(c))}),[r,u,o]);return v&&a&&(l={...l}),N.useMemo(()=>{u.forEach((c,m)=>u.set(m,!1))},[r]),N.useEffect(()=>{!r&&!u.size&&o&&o()},[r]),S==="popLayout"&&(t=g.jsx(wM,{isPresent:r,anchorX:f,root:s,children:t})),g.jsx(Ic.Provider,{value:l,children:t})};function CM(){return new Map}function D1(t=!0){const e=N.useContext(Ic);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:o,register:x}=e,v=N.useId();N.useEffect(()=>{if(t)return x(v)},[t]);const S=N.useCallback(()=>t&&o&&o(v),[v,o,t]);return!r&&o?[!1,S]:[!0]}const nc=t=>t.key||"";function xy(t){const e=[];return N.Children.forEach(t,r=>{N.isValidElement(r)&&e.push(r)}),e}const Er=({children:t,custom:e,initial:r=!0,onExitComplete:o,presenceAffectsLayout:x=!0,mode:v="sync",propagate:S=!1,anchorX:f="left",root:s})=>{const[u,h]=D1(S),a=N.useMemo(()=>xy(t),[t]),l=S&&!u?[]:a.map(nc),c=N.useRef(!0),m=N.useRef(a),y=zc(()=>new Map),[p,w]=N.useState(a),[C,T]=N.useState(a);Vv(()=>{c.current=!1,m.current=a;for(let M=0;M<C.length;M++){const D=nc(C[M]);l.includes(D)?y.delete(D):y.get(D)!==!0&&y.set(D,!1)}},[C,l.length,l.join("-")]);const j=[];if(a!==p){let M=[...a];for(let D=0;D<C.length;D++){const A=C[D],I=nc(A);l.includes(I)||(M.splice(D,0,A),j.push(A))}return v==="wait"&&j.length&&(M=j),T(xy(M)),w(a),null}const{forceRender:E}=N.useContext(Ff);return g.jsx(g.Fragment,{children:C.map(M=>{const D=nc(M),A=S&&!u?!1:a===C||l.includes(D),I=()=>{if(y.has(D))y.set(D,!0);else return;let X=!0;y.forEach(oe=>{oe||(X=!1)}),X&&(E==null||E(),T(m.current),S&&(h==null||h()),o&&o())};return g.jsx(SM,{isPresent:A,initial:!c.current||r?void 0:!1,custom:e,presenceAffectsLayout:x,mode:v,root:s,onExitComplete:A?void 0:I,anchorX:f,children:M},D)})})},A1=N.createContext({strict:!1}),yy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Is={};for(const t in yy)Is[t]={isEnabled:e=>yy[t].some(r=>!!e[r])};function kM(t){for(const e in t)Is[e]={...Is[e],...t[e]}}const TM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||TM.has(t)}let R1=t=>!Cc(t);function jM(t){typeof t=="function"&&(R1=e=>e.startsWith("on")?!Cc(e):t(e))}try{jM(require("@emotion/is-prop-valid").default)}catch{}function _M(t,e,r){const o={};for(const x in t)x==="values"&&typeof t.values=="object"||(R1(x)||r===!0&&Cc(x)||!e&&!Cc(x)||t.draggable&&x.startsWith("onDrag"))&&(o[x]=t[x]);return o}const Vc=N.createContext({});function Uc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function wo(t){return typeof t=="string"||Array.isArray(t)}const am=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],om=["initial",...am];function Hc(t){return Uc(t.animate)||om.some(e=>wo(t[e]))}function P1(t){return!!(Hc(t)||t.variants)}function NM(t,e){if(Hc(t)){const{initial:r,animate:o}=t;return{initial:r===!1||wo(r)?r:void 0,animate:wo(o)?o:void 0}}return t.inherit!==!1?e:{}}function EM(t){const{initial:e,animate:r}=NM(t,N.useContext(Vc));return N.useMemo(()=>({initial:e,animate:r}),[by(e),by(r)])}function by(t){return Array.isArray(t)?t.join(" "):t}const So={};function MM(t){for(const e in t)So[e]=t[e],Yf(e)&&(So[e].isCSSVariable=!0)}function L1(t,{layout:e,layoutId:r}){return Gs.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!So[t]||t==="opacity")}const OM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DM=Ys.length;function AM(t,e,r){let o="",x=!0;for(let v=0;v<DM;v++){const S=Ys[v],f=t[S];if(f===void 0)continue;let s=!0;if(typeof f=="number"?s=f===(S.startsWith("scale")?1:0):s=parseFloat(f)===0,!s||r){const u=j1(f,im[S]);if(!s){x=!1;const h=OM[S]||S;o+=`${h}(${u}) `}r&&(e[S]=u)}}return o=o.trim(),r?o=r(e,x?"":o):x&&(o="none"),o}function lm(t,e,r){const{style:o,vars:x,transformOrigin:v}=t;let S=!1,f=!1;for(const s in e){const u=e[s];if(Gs.has(s)){S=!0;continue}else if(Yf(s)){x[s]=u;continue}else{const h=j1(u,im[s]);s.startsWith("origin")?(f=!0,v[s]=h):o[s]=h}}if(e.transform||(S||r?o.transform=AM(e,t.transform,r):o.transform&&(o.transform="none")),f){const{originX:s="50%",originY:u="50%",originZ:h=0}=v;o.transformOrigin=`${s} ${u} ${h}`}}const cm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function F1(t,e,r){for(const o in e)!Zt(e[o])&&!L1(o,r)&&(t[o]=e[o])}function RM({transformTemplate:t},e){return N.useMemo(()=>{const r=cm();return lm(r,e,t),Object.assign({},r.vars,r.style)},[e])}function PM(t,e){const r=t.style||{},o={};return F1(o,r,t),Object.assign(o,RM(t,e)),o}function LM(t,e){const r={},o=PM(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const FM={offset:"stroke-dashoffset",array:"stroke-dasharray"},zM={offset:"strokeDashoffset",array:"strokeDasharray"};function IM(t,e,r=1,o=0,x=!0){t.pathLength=1;const v=x?FM:zM;t[v.offset]=$e.transform(-o);const S=$e.transform(e),f=$e.transform(r);t[v.array]=`${S} ${f}`}function z1(t,{attrX:e,attrY:r,attrScale:o,pathLength:x,pathSpacing:v=1,pathOffset:S=0,...f},s,u,h){if(lm(t,f,u),s){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:a,style:l}=t;a.transform&&(l.transform=a.transform,delete a.transform),(l.transform||a.transformOrigin)&&(l.transformOrigin=a.transformOrigin??"50% 50%",delete a.transformOrigin),l.transform&&(l.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete a.transformBox),e!==void 0&&(a.x=e),r!==void 0&&(a.y=r),o!==void 0&&(a.scale=o),x!==void 0&&IM(a,x,v,S,!1)}const I1=()=>({...cm(),attrs:{}}),B1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function BM(t,e,r,o){const x=N.useMemo(()=>{const v=I1();return z1(v,e,B1(o),t.transformTemplate,t.style),{...v.attrs,style:{...v.style}}},[e]);if(t.style){const v={};F1(v,t.style,t),x.style={...v,...x.style}}return x}const VM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function um(t){return typeof t!="string"||t.includes("-")?!1:!!(VM.indexOf(t)>-1||/[A-Z]/u.test(t))}function UM(t,e,r,{latestValues:o},x,v=!1){const f=(um(t)?BM:LM)(e,o,x,t),s=_M(e,typeof t=="string",v),u=t!==N.Fragment?{...s,...f,ref:r}:{},{children:h}=e,a=N.useMemo(()=>Zt(h)?h.get():h,[h]);return N.createElement(t,{...u,children:a})}function vy(t){const e=[{},{}];return t==null||t.values.forEach((r,o)=>{e[0][o]=r.get(),e[1][o]=r.getVelocity()}),e}function dm(t,e,r,o){if(typeof e=="function"){const[x,v]=vy(o);e=e(r!==void 0?r:t.custom,x,v)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[x,v]=vy(o);e=e(r!==void 0?r:t.custom,x,v)}return e}function hc(t){return Zt(t)?t.get():t}function HM({scrapeMotionValuesFromProps:t,createRenderState:e},r,o,x){return{latestValues:$M(r,o,x,t),renderState:e()}}function $M(t,e,r,o){const x={},v=o(t,{});for(const l in v)x[l]=hc(v[l]);let{initial:S,animate:f}=t;const s=Hc(t),u=P1(t);e&&u&&!s&&t.inherit!==!1&&(S===void 0&&(S=e.initial),f===void 0&&(f=e.animate));let h=r?r.initial===!1:!1;h=h||S===!1;const a=h?f:S;if(a&&typeof a!="boolean"&&!Uc(a)){const l=Array.isArray(a)?a:[a];for(let c=0;c<l.length;c++){const m=dm(t,l[c]);if(m){const{transitionEnd:y,transition:p,...w}=m;for(const C in w){let T=w[C];if(Array.isArray(T)){const j=h?T.length-1:0;T=T[j]}T!==null&&(x[C]=T)}for(const C in y)x[C]=y[C]}}}return x}const V1=t=>(e,r)=>{const o=N.useContext(Vc),x=N.useContext(Ic),v=()=>HM(t,e,o,x);return r?v():zc(v)};function hm(t,e,r){var v;const{style:o}=t,x={};for(const S in o)(Zt(o[S])||e.style&&Zt(e.style[S])||L1(S,t)||((v=r==null?void 0:r.getValue(S))==null?void 0:v.liveStyle)!==void 0)&&(x[S]=o[S]);return x}const XM=V1({scrapeMotionValuesFromProps:hm,createRenderState:cm});function U1(t,e,r){const o=hm(t,e,r);for(const x in t)if(Zt(t[x])||Zt(e[x])){const v=Ys.indexOf(x)!==-1?"attr"+x.charAt(0).toUpperCase()+x.substring(1):x;o[v]=t[x]}return o}const YM=V1({scrapeMotionValuesFromProps:U1,createRenderState:I1}),GM=Symbol.for("motionComponentSymbol");function Ds(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qM(t,e,r){return N.useCallback(o=>{o&&t.onMount&&t.onMount(o),e&&(o?e.mount(o):e.unmount()),r&&(typeof r=="function"?r(o):Ds(r)&&(r.current=o))},[e])}const fm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WM="framerAppearId",H1="data-"+fm(WM),$1=N.createContext({});function KM(t,e,r,o,x){var y,p;const{visualElement:v}=N.useContext(Vc),S=N.useContext(A1),f=N.useContext(Ic),s=N.useContext(Bc).reducedMotion,u=N.useRef(null);o=o||S.renderer,!u.current&&o&&(u.current=o(t,{visualState:e,parent:v,props:r,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:s}));const h=u.current,a=N.useContext($1);h&&!h.projection&&x&&(h.type==="html"||h.type==="svg")&&ZM(u.current,r,x,a);const l=N.useRef(!1);N.useInsertionEffect(()=>{h&&l.current&&h.update(r,f)});const c=r[H1],m=N.useRef(!!c&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,c))&&((p=window.MotionHasOptimisedAnimation)==null?void 0:p.call(window,c)));return Vv(()=>{h&&(l.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,c)}),m.current=!1),h.enteringChildren=void 0)}),h}function ZM(t,e,r,o){const{layoutId:x,layout:v,drag:S,dragConstraints:f,layoutScroll:s,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:X1(t.parent)),t.projection.setOptions({layoutId:x,layout:v,alwaysMeasureLayout:!!S||f&&Ds(f),visualElement:t,animationType:typeof v=="string"?v:"both",initialPromotionConfig:o,crossfade:h,layoutScroll:s,layoutRoot:u})}function X1(t){if(t)return t.options.allowProjection!==!1?t.projection:X1(t.parent)}function vh(t,{forwardMotionProps:e=!1}={},r,o){r&&kM(r);const x=um(t)?YM:XM;function v(f,s){let u;const h={...N.useContext(Bc),...f,layoutId:QM(f)},{isStatic:a}=h,l=EM(f),c=x(f,a);if(!a&&zf){JM();const m=eO(h);u=m.MeasureLayout,l.visualElement=KM(t,c,h,o,m.ProjectionNode)}return g.jsxs(Vc.Provider,{value:l,children:[u&&l.visualElement?g.jsx(u,{visualElement:l.visualElement,...h}):null,UM(t,f,qM(c,l.visualElement,s),c,a,e)]})}v.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const S=N.forwardRef(v);return S[GM]=t,S}function QM({layoutId:t}){const e=N.useContext(Ff).id;return e&&t!==void 0?e+"-"+t:t}function JM(t,e){N.useContext(A1).strict}function eO(t){const{drag:e,layout:r}=Is;if(!e&&!r)return{};const o={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function tO(t,e){if(typeof Proxy>"u")return vh;const r=new Map,o=(v,S)=>vh(v,S,t,e),x=(v,S)=>o(v,S);return new Proxy(x,{get:(v,S)=>S==="create"?o:(r.has(S)||r.set(S,vh(S,void 0,t,e)),r.get(S))})}function Y1({top:t,left:e,right:r,bottom:o}){return{x:{min:e,max:r},y:{min:t,max:o}}}function nO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iO(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),o=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:o.y,right:o.x}}function wh(t){return t===void 0||t===1}function lf({scale:t,scaleX:e,scaleY:r}){return!wh(t)||!wh(e)||!wh(r)}function Nr(t){return lf(t)||G1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function G1(t){return wy(t.x)||wy(t.y)}function wy(t){return t&&t!=="0%"}function kc(t,e,r){const o=t-r,x=e*o;return r+x}function Sy(t,e,r,o,x){return x!==void 0&&(t=kc(t,x,o)),kc(t,r,o)+e}function cf(t,e=0,r=1,o,x){t.min=Sy(t.min,e,r,o,x),t.max=Sy(t.max,e,r,o,x)}function q1(t,{x:e,y:r}){cf(t.x,e.translate,e.scale,e.originPoint),cf(t.y,r.translate,r.scale,r.originPoint)}const Cy=.999999999999,ky=1.0000000000001;function rO(t,e,r,o=!1){const x=r.length;if(!x)return;e.x=e.y=1;let v,S;for(let f=0;f<x;f++){v=r[f],S=v.projectionDelta;const{visualElement:s}=v.options;s&&s.props.style&&s.props.style.display==="contents"||(o&&v.options.layoutScroll&&v.scroll&&v!==v.root&&Rs(t,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),S&&(e.x*=S.x.scale,e.y*=S.y.scale,q1(t,S)),o&&Nr(v.latestValues)&&Rs(t,v.latestValues))}e.x<ky&&e.x>Cy&&(e.x=1),e.y<ky&&e.y>Cy&&(e.y=1)}function As(t,e){t.min=t.min+e,t.max=t.max+e}function Ty(t,e,r,o,x=.5){const v=gt(t.min,t.max,x);cf(t,e,r,v,o)}function Rs(t,e){Ty(t.x,e.x,e.scaleX,e.scale,e.originX),Ty(t.y,e.y,e.scaleY,e.scale,e.originY)}function W1(t,e){return Y1(iO(t.getBoundingClientRect(),e))}function sO(t,e,r){const o=W1(t,r),{scroll:x}=e;return x&&(As(o.x,x.offset.x),As(o.y,x.offset.y)),o}const jy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ps=()=>({x:jy(),y:jy()}),_y=()=>({min:0,max:0}),St=()=>({x:_y(),y:_y()}),uf={current:null},K1={current:!1};function aO(){if(K1.current=!0,!!zf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>uf.current=t.matches;t.addEventListener("change",e),e()}else uf.current=!1}const oO=new WeakMap;function lO(t,e,r){for(const o in e){const x=e[o],v=r[o];if(Zt(x))t.addValue(o,x);else if(Zt(v))t.addValue(o,Br(x,{owner:t}));else if(v!==x)if(t.hasValue(o)){const S=t.getValue(o);S.liveStyle===!0?S.jump(x):S.hasAnimated||S.set(x)}else{const S=t.getStaticValue(o);t.addValue(o,Br(S!==void 0?S:x,{owner:t}))}}for(const o in r)e[o]===void 0&&t.removeValue(o);return e}const Ny=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cO{scrapeMotionValuesFromProps(e,r,o){return{}}constructor({parent:e,props:r,presenceContext:o,reducedMotionConfig:x,blockInitialAnimation:v,visualState:S},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const l=dn.now();this.renderScheduledAt<l&&(this.renderScheduledAt=l,ft.render(this.render,!1,!0))};const{latestValues:s,renderState:u}=S;this.latestValues=s,this.baseTarget={...s},this.initialValues=r.initial?{...s}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=x,this.options=f,this.blockInitialAnimation=!!v,this.isControllingVariants=Hc(r),this.isVariantNode=P1(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...a}=this.scrapeMotionValuesFromProps(r,{},this);for(const l in a){const c=a[l];s[l]!==void 0&&Zt(c)&&c.set(s[l])}}mount(e){var r;this.current=e,oO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((o,x)=>this.bindToMotionValue(x,o)),K1.current||aO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uf.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),rr(this.notifyUpdate),rr(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const o=this.features[r];o&&(o.unmount(),o.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=Gs.has(e);o&&this.onBindTransform&&this.onBindTransform();const x=r.on("change",S=>{this.latestValues[e]=S,this.props.onUpdate&&ft.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let v;window.MotionCheckAppearSync&&(v=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{x(),v&&v(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Is){const r=Is[e];if(!r)continue;const{isEnabled:o,Feature:x}=r;if(!this.features[e]&&x&&o(this.props)&&(this.features[e]=new x(this)),this.features[e]){const v=this.features[e];v.isMounted?v.update():(v.mount(),v.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let o=0;o<Ny.length;o++){const x=Ny[o];this.propEventSubscriptions[x]&&(this.propEventSubscriptions[x](),delete this.propEventSubscriptions[x]);const v="on"+x,S=e[v];S&&(this.propEventSubscriptions[x]=this.on(x,S))}this.prevMotionValues=lO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const o=this.values.get(e);r!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&r!==void 0&&(o=Br(r===null?void 0:r,{owner:this}),this.addValue(e,o)),o}readValue(e,r){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(Uv(o)||$v(o))?o=parseFloat(o):!bM(o)&&sr.test(r)&&(o=T1(e,r)),this.setBaseTarget(e,Zt(o)?o.get():o)),Zt(o)?o.get():o}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var v;const{initial:r}=this.props;let o;if(typeof r=="string"||typeof r=="object"){const S=dm(this.props,r,(v=this.presenceContext)==null?void 0:v.custom);S&&(o=S[e])}if(r&&o!==void 0)return o;const x=this.getBaseTargetFromProps(this.props,e);return x!==void 0&&!Zt(x)?x:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Hf),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){rm.render(this.render)}}class Z1 extends cO{constructor(){super(...arguments),this.KeyframeResolver=oM}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:o}){delete r[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Q1(t,{style:e,vars:r},o,x){const v=t.style;let S;for(S in e)v[S]=e[S];x==null||x.applyProjectionStyles(v,o);for(S in r)v.setProperty(S,r[S])}function uO(t){return window.getComputedStyle(t)}class dO extends Z1{constructor(){super(...arguments),this.type="html",this.renderInstance=Q1}readValueFromInstance(e,r){var o;if(Gs.has(r))return(o=this.projection)!=null&&o.isProjecting?ef(r):jE(e,r);{const x=uO(e),v=(Yf(r)?x.getPropertyValue(r):x[r])||0;return typeof v=="string"?v.trim():v}}measureInstanceViewportBox(e,{transformPagePoint:r}){return W1(e,r)}build(e,r,o){lm(e,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,r,o){return hm(e,r,o)}}const J1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hO(t,e,r,o){Q1(t,e,void 0,o);for(const x in e.attrs)t.setAttribute(J1.has(x)?x:fm(x),e.attrs[x])}class fO extends Z1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Gs.has(r)){const o=k1(r);return o&&o.default||0}return r=J1.has(r)?r:fm(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,o){return U1(e,r,o)}build(e,r,o){z1(e,r,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(e,r,o,x){hO(e,r,o,x)}mount(e){this.isSVGTag=B1(e.tagName),super.mount(e)}}const mO=(t,e)=>um(t)?new fO(e):new dO(e,{allowProjection:t!==N.Fragment});function zs(t,e,r){const o=t.getProps();return dm(o,e,r!==void 0?r:o.custom,t)}const df=t=>Array.isArray(t);function gO(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Br(r))}function pO(t){return df(t)?t[t.length-1]||0:t}function xO(t,e){const r=zs(t,e);let{transitionEnd:o={},transition:x={},...v}=r||{};v={...v,...o};for(const S in v){const f=pO(v[S]);gO(t,S,f)}}function yO(t){return!!(Zt(t)&&t.add)}function hf(t,e){const r=t.getValue("willChange");if(yO(r))return r.add(e);if(!r&&Ei.WillChange){const o=new Ei.WillChange("auto");t.addValue("willChange",o),o.add(e)}}function ew(t){return t.props[H1]}const bO=t=>t!==null;function vO(t,{repeat:e,repeatType:r="loop"},o){const x=t.filter(bO),v=e&&r!=="loop"&&e%2===1?0:x.length-1;return x[v]}const wO={type:"spring",stiffness:500,damping:25,restSpeed:10},SO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CO={type:"keyframes",duration:.8},kO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TO=(t,{keyframes:e})=>e.length>2?CO:Gs.has(t)?t.startsWith("scale")?SO(e[1]):wO:kO;function jO({when:t,delay:e,delayChildren:r,staggerChildren:o,staggerDirection:x,repeat:v,repeatType:S,repeatDelay:f,from:s,elapsed:u,...h}){return!!Object.keys(h).length}const mm=(t,e,r,o={},x,v)=>S=>{const f=nm(o,t)||{},s=f.delay||o.delay||0;let{elapsed:u=0}=o;u=u-ei(s);const h={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...f,delay:-u,onUpdate:l=>{e.set(l),f.onUpdate&&f.onUpdate(l)},onComplete:()=>{S(),f.onComplete&&f.onComplete()},name:t,motionValue:e,element:v?void 0:x};jO(f)||Object.assign(h,TO(t,h)),h.duration&&(h.duration=ei(h.duration)),h.repeatDelay&&(h.repeatDelay=ei(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let a=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(af(h),h.delay===0&&(a=!0)),(Ei.instantAnimations||Ei.skipAnimations)&&(a=!0,af(h),h.delay=0),h.allowFlatten=!f.type&&!f.ease,a&&!v&&e.get()!==void 0){const l=vO(h.keyframes,f);if(l!==void 0){ft.update(()=>{h.onUpdate(l),h.onComplete()});return}}return f.isSync?new em(h):new WE(h)};function _O({protectedKeys:t,needsAnimating:e},r){const o=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,o}function tw(t,e,{delay:r=0,transitionOverride:o,type:x}={}){let{transition:v=t.getDefaultTransition(),transitionEnd:S,...f}=e;o&&(v=o);const s=[],u=x&&t.animationState&&t.animationState.getState()[x];for(const h in f){const a=t.getValue(h,t.latestValues[h]??null),l=f[h];if(l===void 0||u&&_O(u,h))continue;const c={delay:r,...nm(v||{},h)},m=a.get();if(m!==void 0&&!a.isAnimating&&!Array.isArray(l)&&l===m&&!c.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const w=ew(t);if(w){const C=window.MotionHandoffAnimation(w,h,ft);C!==null&&(c.startTime=C,y=!0)}}hf(t,h),a.start(mm(h,a,l,t.shouldReduceMotion&&w1.has(h)?{type:!1}:c,t,y));const p=a.animation;p&&s.push(p)}return S&&Promise.all(s).then(()=>{ft.update(()=>{S&&xO(t,S)})}),s}function nw(t,e,r,o=0,x=1){const v=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),S=t.size,f=(S-1)*o;return typeof r=="function"?r(v,S):x===1?v*o:f-v*o}function ff(t,e,r={}){var s;const o=zs(t,e,r.type==="exit"?(s=t.presenceContext)==null?void 0:s.custom:void 0);let{transition:x=t.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(x=r.transitionOverride);const v=o?()=>Promise.all(tw(t,o,r)):()=>Promise.resolve(),S=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:a,staggerDirection:l}=x;return NO(t,e,u,h,a,l,r)}:()=>Promise.resolve(),{when:f}=x;if(f){const[u,h]=f==="beforeChildren"?[v,S]:[S,v];return u().then(()=>h())}else return Promise.all([v(),S(r.delay)])}function NO(t,e,r=0,o=0,x=0,v=1,S){const f=[];for(const s of t.variantChildren)s.notify("AnimationStart",e),f.push(ff(s,e,{...S,delay:r+(typeof o=="function"?0:o)+nw(t.variantChildren,s,o,x,v)}).then(()=>s.notify("AnimationComplete",e)));return Promise.all(f)}function EO(t,e,r={}){t.notify("AnimationStart",e);let o;if(Array.isArray(e)){const x=e.map(v=>ff(t,v,r));o=Promise.all(x)}else if(typeof e=="string")o=ff(t,e,r);else{const x=typeof e=="function"?zs(t,e,r.custom):e;o=Promise.all(tw(t,x,r))}return o.then(()=>{t.notify("AnimationComplete",e)})}function iw(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let o=0;o<r;o++)if(e[o]!==t[o])return!1;return!0}const MO=om.length;function rw(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?rw(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<MO;r++){const o=om[r],x=t.props[o];(wo(x)||x===!1)&&(e[o]=x)}return e}const OO=[...am].reverse(),DO=am.length;function AO(t){return e=>Promise.all(e.map(({animation:r,options:o})=>EO(t,r,o)))}function RO(t){let e=AO(t),r=Ey(),o=!0;const x=s=>(u,h)=>{var l;const a=zs(t,h,s==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);if(a){const{transition:c,transitionEnd:m,...y}=a;u={...u,...y,...m}}return u};function v(s){e=s(t)}function S(s){const{props:u}=t,h=rw(t.parent)||{},a=[],l=new Set;let c={},m=1/0;for(let p=0;p<DO;p++){const w=OO[p],C=r[w],T=u[w]!==void 0?u[w]:h[w],j=wo(T),E=w===s?C.isActive:null;E===!1&&(m=p);let M=T===h[w]&&T!==u[w]&&j;if(M&&o&&t.manuallyAnimateOnMount&&(M=!1),C.protectedKeys={...c},!C.isActive&&E===null||!T&&!C.prevProp||Uc(T)||typeof T=="boolean")continue;const D=PO(C.prevProp,T);let A=D||w===s&&C.isActive&&!M&&j||p>m&&j,I=!1;const X=Array.isArray(T)?T:[T];let oe=X.reduce(x(w),{});E===!1&&(oe={});const{prevResolvedValues:Z={}}=C,ae={...Z,...oe},te=q=>{A=!0,l.has(q)&&(I=!0,l.delete(q)),C.needsAnimating[q]=!0;const Y=t.getValue(q);Y&&(Y.liveStyle=!1)};for(const q in ae){const Y=oe[q],R=Z[q];if(c.hasOwnProperty(q))continue;let O=!1;df(Y)&&df(R)?O=!iw(Y,R):O=Y!==R,O?Y!=null?te(q):l.add(q):Y!==void 0&&l.has(q)?te(q):C.protectedKeys[q]=!0}C.prevProp=T,C.prevResolvedValues=oe,C.isActive&&(c={...c,...oe}),o&&t.blockInitialAnimation&&(A=!1);const G=M&&D;A&&(!G||I)&&a.push(...X.map(q=>{const Y={type:w};if(typeof q=="string"&&o&&!G&&t.manuallyAnimateOnMount&&t.parent){const{parent:R}=t,O=zs(R,q);if(R.enteringChildren&&O){const{delayChildren:L}=O.transition||{};Y.delay=nw(R.enteringChildren,t,L)}}return{animation:q,options:Y}}))}if(l.size){const p={};if(typeof u.initial!="boolean"){const w=zs(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(p.transition=w.transition)}l.forEach(w=>{const C=t.getBaseTarget(w),T=t.getValue(w);T&&(T.liveStyle=!0),p[w]=C??null}),a.push({animation:p})}let y=!!a.length;return o&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),o=!1,y?e(a):Promise.resolve()}function f(s,u){var a;if(r[s].isActive===u)return Promise.resolve();(a=t.variantChildren)==null||a.forEach(l=>{var c;return(c=l.animationState)==null?void 0:c.setActive(s,u)}),r[s].isActive=u;const h=S(s);for(const l in r)r[l].protectedKeys={};return h}return{animateChanges:S,setActive:f,setAnimateFunction:v,getState:()=>r,reset:()=>{r=Ey(),o=!0}}}function PO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iw(e,t):!1}function _r(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ey(){return{animate:_r(!0),whileInView:_r(),whileHover:_r(),whileTap:_r(),whileDrag:_r(),whileFocus:_r(),exit:_r()}}class or{constructor(e){this.isMounted=!1,this.node=e}update(){}}class LO extends or{constructor(e){super(e),e.animationState||(e.animationState=RO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Uc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let FO=0;class zO extends or{constructor(){super(...arguments),this.id=FO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const x=this.node.animationState.setActive("exit",!e);r&&!e&&x.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const IO={animation:{Feature:LO},exit:{Feature:zO}};function Co(t,e,r,o={passive:!0}){return t.addEventListener(e,r,o),()=>t.removeEventListener(e,r)}function zo(t){return{point:{x:t.pageX,y:t.pageY}}}const BO=t=>e=>sm(e)&&t(e,zo(e));function ao(t,e,r,o){return Co(t,e,BO(r),o)}const sw=1e-4,VO=1-sw,UO=1+sw,aw=.01,HO=0-aw,$O=0+aw;function tn(t){return t.max-t.min}function XO(t,e,r){return Math.abs(t-e)<=r}function My(t,e,r,o=.5){t.origin=o,t.originPoint=gt(e.min,e.max,t.origin),t.scale=tn(r)/tn(e),t.translate=gt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=VO&&t.scale<=UO||isNaN(t.scale))&&(t.scale=1),(t.translate>=HO&&t.translate<=$O||isNaN(t.translate))&&(t.translate=0)}function oo(t,e,r,o){My(t.x,e.x,r.x,o?o.originX:void 0),My(t.y,e.y,r.y,o?o.originY:void 0)}function Oy(t,e,r){t.min=r.min+e.min,t.max=t.min+tn(e)}function YO(t,e,r){Oy(t.x,e.x,r.x),Oy(t.y,e.y,r.y)}function Dy(t,e,r){t.min=e.min-r.min,t.max=t.min+tn(e)}function lo(t,e,r){Dy(t.x,e.x,r.x),Dy(t.y,e.y,r.y)}function On(t){return[t("x"),t("y")]}const ow=({current:t})=>t?t.ownerDocument.defaultView:null,Ay=(t,e)=>Math.abs(t-e);function GO(t,e){const r=Ay(t.x,e.x),o=Ay(t.y,e.y);return Math.sqrt(r**2+o**2)}class lw{constructor(e,r,{transformPagePoint:o,contextWindow:x=window,dragSnapToOrigin:v=!1,distanceThreshold:S=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=Ch(this.lastMoveEventInfo,this.history),c=this.startEvent!==null,m=GO(l.offset,{x:0,y:0})>=this.distanceThreshold;if(!c&&!m)return;const{point:y}=l,{timestamp:p}=$t;this.history.push({...y,timestamp:p});const{onStart:w,onMove:C}=this.handlers;c||(w&&w(this.lastMoveEvent,l),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,l)},this.handlePointerMove=(l,c)=>{this.lastMoveEvent=l,this.lastMoveEventInfo=Sh(c,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(l,c)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Ch(l.type==="pointercancel"?this.lastMoveEventInfo:Sh(c,this.transformPagePoint),this.history);this.startEvent&&m&&m(l,w),y&&y(l,w)},!sm(e))return;this.dragSnapToOrigin=v,this.handlers=r,this.transformPagePoint=o,this.distanceThreshold=S,this.contextWindow=x||window;const f=zo(e),s=Sh(f,this.transformPagePoint),{point:u}=s,{timestamp:h}=$t;this.history=[{...u,timestamp:h}];const{onSessionStart:a}=r;a&&a(e,Ch(s,this.history)),this.removeListeners=Po(ao(this.contextWindow,"pointermove",this.handlePointerMove),ao(this.contextWindow,"pointerup",this.handlePointerUp),ao(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),rr(this.updatePoint)}}function Sh(t,e){return e?{point:e(t.point)}:t}function Ry(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ch({point:t},e){return{point:t,delta:Ry(t,cw(e)),offset:Ry(t,qO(e)),velocity:WO(e,.1)}}function qO(t){return t[0]}function cw(t){return t[t.length-1]}function WO(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,o=null;const x=cw(t);for(;r>=0&&(o=t[r],!(x.timestamp-o.timestamp>ei(e)));)r--;if(!o)return{x:0,y:0};const v=ti(x.timestamp-o.timestamp);if(v===0)return{x:0,y:0};const S={x:(x.x-o.x)/v,y:(x.y-o.y)/v};return S.x===1/0&&(S.x=0),S.y===1/0&&(S.y=0),S}function KO(t,{min:e,max:r},o){return e!==void 0&&t<e?t=o?gt(e,t,o.min):Math.max(t,e):r!==void 0&&t>r&&(t=o?gt(r,t,o.max):Math.min(t,r)),t}function Py(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function ZO(t,{top:e,left:r,bottom:o,right:x}){return{x:Py(t.x,r,x),y:Py(t.y,e,o)}}function Ly(t,e){let r=e.min-t.min,o=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,o]=[o,r]),{min:r,max:o}}function QO(t,e){return{x:Ly(t.x,e.x),y:Ly(t.y,e.y)}}function JO(t,e){let r=.5;const o=tn(t),x=tn(e);return x>o?r=yo(e.min,e.max-o,t.min):o>x&&(r=yo(t.min,t.max-x,e.min)),Ni(0,1,r)}function eD(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const mf=.35;function tD(t=mf){return t===!1?t=0:t===!0&&(t=mf),{x:Fy(t,"left","right"),y:Fy(t,"top","bottom")}}function Fy(t,e,r){return{min:zy(t,e),max:zy(t,r)}}function zy(t,e){return typeof t=="number"?t:t[e]||0}const nD=new WeakMap;class iD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:o}={}){const{presenceContext:x}=this.visualElement;if(x&&x.isPresent===!1)return;const v=a=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(zo(a).point)},S=(a,l)=>{const{drag:c,dragPropagation:m,onDragStart:y}=this.getProps();if(c&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dM(c),!this.openDragLock))return;this.latestPointerEvent=a,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),On(w=>{let C=this.getAxisMotionValue(w).get()||0;if(ni.test(C)){const{projection:T}=this.visualElement;if(T&&T.layout){const j=T.layout.layoutBox[w];j&&(C=tn(j)*(parseFloat(C)/100))}}this.originPoint[w]=C}),y&&ft.postRender(()=>y(a,l)),hf(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},f=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l;const{dragPropagation:c,dragDirectionLock:m,onDirectionLock:y,onDrag:p}=this.getProps();if(!c&&!this.openDragLock)return;const{offset:w}=l;if(m&&this.currentDirection===null){this.currentDirection=rD(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",l.point,w),this.updateAxis("y",l.point,w),this.visualElement.render(),p&&p(a,l)},s=(a,l)=>{this.latestPointerEvent=a,this.latestPanInfo=l,this.stop(a,l),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>On(a=>{var l;return this.getAnimationState(a)==="paused"&&((l=this.getAxisMotionValue(a).animation)==null?void 0:l.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new lw(e,{onSessionStart:v,onStart:S,onMove:f,onSessionEnd:s,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:o,contextWindow:ow(this.visualElement)})}stop(e,r){const o=e||this.latestPointerEvent,x=r||this.latestPanInfo,v=this.isDragging;if(this.cancel(),!v||!x||!o)return;const{velocity:S}=x;this.startAnimation(S);const{onDragEnd:f}=this.getProps();f&&ft.postRender(()=>f(o,x))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,o){const{drag:x}=this.getProps();if(!o||!ic(e,x,this.currentDirection))return;const v=this.getAxisMotionValue(e);let S=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(S=KO(S,this.constraints[e],this.elastic[e])),v.set(S)}resolveConstraints(){var v;const{dragConstraints:e,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(v=this.visualElement.projection)==null?void 0:v.layout,x=this.constraints;e&&Ds(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=ZO(o.layoutBox,e):this.constraints=!1,this.elastic=tD(r),x!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&On(S=>{this.constraints!==!1&&this.getAxisMotionValue(S)&&(this.constraints[S]=eD(o.layoutBox[S],this.constraints[S]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ds(e))return!1;const o=e.current,{projection:x}=this.visualElement;if(!x||!x.layout)return!1;const v=sO(o,x.root,this.visualElement.getTransformPagePoint());let S=QO(x.layout.layoutBox,v);if(r){const f=r(nO(S));this.hasMutatedConstraints=!!f,f&&(S=Y1(f))}return S}startAnimation(e){const{drag:r,dragMomentum:o,dragElastic:x,dragTransition:v,dragSnapToOrigin:S,onDragTransitionEnd:f}=this.getProps(),s=this.constraints||{},u=On(h=>{if(!ic(h,r,this.currentDirection))return;let a=s&&s[h]||{};S&&(a={min:0,max:0});const l=x?200:1e6,c=x?40:1e7,m={type:"inertia",velocity:o?e[h]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...v,...a};return this.startAxisValueAnimation(h,m)});return Promise.all(u).then(f)}startAxisValueAnimation(e,r){const o=this.getAxisMotionValue(e);return hf(this.visualElement,e),o.start(mm(e,o,0,r,this.visualElement,!1))}stopAnimation(){On(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){On(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),x=o[r];return x||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){On(r=>{const{drag:o}=this.getProps();if(!ic(r,o,this.currentDirection))return;const{projection:x}=this.visualElement,v=this.getAxisMotionValue(r);if(x&&x.layout){const{min:S,max:f}=x.layout.layoutBox[r];v.set(e[r]-gt(S,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:o}=this.visualElement;if(!Ds(r)||!o||!this.constraints)return;this.stopAnimation();const x={x:0,y:0};On(S=>{const f=this.getAxisMotionValue(S);if(f&&this.constraints!==!1){const s=f.get();x[S]=JO({min:s,max:s},this.constraints[S])}});const{transformTemplate:v}=this.visualElement.getProps();this.visualElement.current.style.transform=v?v({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),On(S=>{if(!ic(S,e,null))return;const f=this.getAxisMotionValue(S),{min:s,max:u}=this.constraints[S];f.set(gt(s,u,x[S]))})}addListeners(){if(!this.visualElement.current)return;nD.set(this.visualElement,this);const e=this.visualElement.current,r=ao(e,"pointerdown",s=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(s)}),o=()=>{const{dragConstraints:s}=this.getProps();Ds(s)&&s.current&&(this.constraints=this.resolveRefConstraints())},{projection:x}=this.visualElement,v=x.addEventListener("measure",o);x&&!x.layout&&(x.root&&x.root.updateScroll(),x.updateLayout()),ft.read(o);const S=Co(window,"resize",()=>this.scalePositionWithinConstraints()),f=x.addEventListener("didUpdate",({delta:s,hasLayoutChanged:u})=>{this.isDragging&&u&&(On(h=>{const a=this.getAxisMotionValue(h);a&&(this.originPoint[h]+=s[h].translate,a.set(a.get()+s[h].translate))}),this.visualElement.render())});return()=>{S(),r(),v(),f&&f()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:o=!1,dragPropagation:x=!1,dragConstraints:v=!1,dragElastic:S=mf,dragMomentum:f=!0}=e;return{...e,drag:r,dragDirectionLock:o,dragPropagation:x,dragConstraints:v,dragElastic:S,dragMomentum:f}}}function ic(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function rD(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class sD extends or{constructor(e){super(e),this.removeGroupControls=An,this.removeListeners=An,this.controls=new iD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iy=t=>(e,r)=>{t&&ft.postRender(()=>t(e,r))};class aD extends or{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(e){this.session=new lw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:o,onPanEnd:x}=this.node.getProps();return{onSessionStart:Iy(e),onStart:Iy(r),onMove:o,onEnd:(v,S)=>{delete this.session,x&&ft.postRender(()=>x(v,S))}}}mount(){this.removePointerDownListener=ao(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function By(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if($e.test(t))t=parseFloat(t);else return t;const r=By(t,e.target.x),o=By(t,e.target.y);return`${r}% ${o}%`}},oD={correct:(t,{treeScale:e,projectionDelta:r})=>{const o=t,x=sr.parse(t);if(x.length>5)return o;const v=sr.createTransformer(t),S=typeof x[0]!="number"?1:0,f=r.x.scale*e.x,s=r.y.scale*e.y;x[0+S]/=f,x[1+S]/=s;const u=gt(f,s,.5);return typeof x[2+S]=="number"&&(x[2+S]/=u),typeof x[3+S]=="number"&&(x[3+S]/=u),v(x)}};let kh=!1;class lD extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o,layoutId:x}=this.props,{projection:v}=e;MM(cD),v&&(r.group&&r.group.add(v),o&&o.register&&x&&o.register(v),kh&&v.root.didUpdate(),v.addEventListener("animationComplete",()=>{this.safeToRemove()}),v.setOptions({...v.options,onExitComplete:()=>this.safeToRemove()})),fc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:o,drag:x,isPresent:v}=this.props,{projection:S}=o;return S&&(S.isPresent=v,kh=!0,x||e.layoutDependency!==r||r===void 0||e.isPresent!==v?S.willUpdate():this.safeToRemove(),e.isPresent!==v&&(v?S.promote():S.relegate()||ft.postRender(()=>{const f=S.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:o}=this.props,{projection:x}=e;kh=!0,x&&(x.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(x),o&&o.deregister&&o.deregister(x))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uw(t){const[e,r]=D1(),o=N.useContext(Ff);return g.jsx(lD,{...t,layoutGroup:o,switchLayoutGroup:N.useContext($1),isPresent:e,safeToRemove:r})}const cD={borderRadius:{...qa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qa,borderTopRightRadius:qa,borderBottomLeftRadius:qa,borderBottomRightRadius:qa,boxShadow:oD};function uD(t,e,r){const o=Zt(t)?t:Br(t);return o.start(mm("",o,e,r)),o.animation}const dD=(t,e)=>t.depth-e.depth;class hD{constructor(){this.children=[],this.isDirty=!1}add(e){If(this.children,e),this.isDirty=!0}remove(e){Bf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dD),this.isDirty=!1,this.children.forEach(e)}}function fD(t,e){const r=dn.now(),o=({timestamp:x})=>{const v=x-r;v>=e&&(rr(o),t(v-e))};return ft.setup(o,!0),()=>rr(o)}const dw=["TopLeft","TopRight","BottomLeft","BottomRight"],mD=dw.length,Vy=t=>typeof t=="string"?parseFloat(t):t,Uy=t=>typeof t=="number"||$e.test(t);function gD(t,e,r,o,x,v){x?(t.opacity=gt(0,r.opacity??1,pD(o)),t.opacityExit=gt(e.opacity??1,0,xD(o))):v&&(t.opacity=gt(e.opacity??1,r.opacity??1,o));for(let S=0;S<mD;S++){const f=`border${dw[S]}Radius`;let s=Hy(e,f),u=Hy(r,f);if(s===void 0&&u===void 0)continue;s||(s=0),u||(u=0),s===0||u===0||Uy(s)===Uy(u)?(t[f]=Math.max(gt(Vy(s),Vy(u),o),0),(ni.test(u)||ni.test(s))&&(t[f]+="%")):t[f]=u}(e.rotate||r.rotate)&&(t.rotate=gt(e.rotate||0,r.rotate||0,o))}function Hy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const pD=hw(0,.5,Qv),xD=hw(.5,.95,An);function hw(t,e,r){return o=>o<t?0:o>e?1:r(yo(t,e,o))}function $y(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){$y(t.x,e.x),$y(t.y,e.y)}function Xy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Yy(t,e,r,o,x){return t-=e,t=kc(t,1/r,o),x!==void 0&&(t=kc(t,1/x,o)),t}function yD(t,e=0,r=1,o=.5,x,v=t,S=t){if(ni.test(e)&&(e=parseFloat(e),e=gt(S.min,S.max,e/100)-S.min),typeof e!="number")return;let f=gt(v.min,v.max,o);t===v&&(f-=e),t.min=Yy(t.min,e,r,f,x),t.max=Yy(t.max,e,r,f,x)}function Gy(t,e,[r,o,x],v,S){yD(t,e[r],e[o],e[x],e.scale,v,S)}const bD=["x","scaleX","originX"],vD=["y","scaleY","originY"];function qy(t,e,r,o){Gy(t.x,e,bD,r?r.x:void 0,o?o.x:void 0),Gy(t.y,e,vD,r?r.y:void 0,o?o.y:void 0)}function Wy(t){return t.translate===0&&t.scale===1}function fw(t){return Wy(t.x)&&Wy(t.y)}function Ky(t,e){return t.min===e.min&&t.max===e.max}function wD(t,e){return Ky(t.x,e.x)&&Ky(t.y,e.y)}function Zy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function mw(t,e){return Zy(t.x,e.x)&&Zy(t.y,e.y)}function Qy(t){return tn(t.x)/tn(t.y)}function Jy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class SD{constructor(){this.members=[]}add(e){If(this.members,e),e.scheduleRender()}remove(e){if(Bf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(x=>e===x);if(r===0)return!1;let o;for(let x=r;x>=0;x--){const v=this.members[x];if(v.isPresent!==!1){o=v;break}}return o?(this.promote(o),!0):!1}promote(e,r){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,r&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:x}=e.options;x===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:o}=e;r.onExitComplete&&r.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function CD(t,e,r){let o="";const x=t.x.translate/e.x,v=t.y.translate/e.y,S=(r==null?void 0:r.z)||0;if((x||v||S)&&(o=`translate3d(${x}px, ${v}px, ${S}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:h,rotateX:a,rotateY:l,skewX:c,skewY:m}=r;u&&(o=`perspective(${u}px) ${o}`),h&&(o+=`rotate(${h}deg) `),a&&(o+=`rotateX(${a}deg) `),l&&(o+=`rotateY(${l}deg) `),c&&(o+=`skewX(${c}deg) `),m&&(o+=`skewY(${m}deg) `)}const f=t.x.scale*e.x,s=t.y.scale*e.y;return(f!==1||s!==1)&&(o+=`scale(${f}, ${s})`),o||"none"}const Th=["","X","Y","Z"],kD=1e3;let TD=0;function jh(t,e,r,o){const{latestValues:x}=e;x[t]&&(r[t]=x[t],e.setStaticValue(t,0),o&&(o[t]=0))}function gw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=ew(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:x,layoutId:v}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ft,!(x||v))}const{parent:o}=t;o&&!o.hasCheckedOptimisedAppear&&gw(o)}function pw({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:o,resetTransform:x}){return class{constructor(S={},f=e==null?void 0:e()){this.id=TD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ND),this.nodes.forEach(DD),this.nodes.forEach(AD),this.nodes.forEach(ED)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=S,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new hD)}addEventListener(S,f){return this.eventHandlers.has(S)||this.eventHandlers.set(S,new Hf),this.eventHandlers.get(S).add(f)}notifyListeners(S,...f){const s=this.eventHandlers.get(S);s&&s.notify(...f)}hasListeners(S){return this.eventHandlers.has(S)}mount(S){if(this.instance)return;this.isSVG=O1(S)&&!xM(S),this.instance=S;const{layoutId:f,layout:s,visualElement:u}=this.options;if(u&&!u.current&&u.mount(S),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||f)&&(this.isLayoutDirty=!0),t){let h,a=0;const l=()=>this.root.updateBlockedByResize=!1;ft.read(()=>{a=window.innerWidth}),t(S,()=>{const c=window.innerWidth;c!==a&&(a=c,this.root.updateBlockedByResize=!0,h&&h(),h=fD(l,250),fc.hasAnimatedSinceResize&&(fc.hasAnimatedSinceResize=!1,this.nodes.forEach(nb)))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&u&&(f||s)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:a,hasRelativeLayoutChanged:l,layout:c})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||zD,{onLayoutAnimationStart:y,onLayoutAnimationComplete:p}=u.getProps(),w=!this.targetLayout||!mw(this.targetLayout,c),C=!a&&l;if(this.options.layoutRoot||this.resumeFrom||C||a&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...nm(m,"layout"),onPlay:y,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(h,C)}else a||nb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=c})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const S=this.getStack();S&&S.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),rr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RD),this.animationId++)}getTransformTemplate(){const{visualElement:S}=this.options;return S&&S.getProps().transformTemplate}willUpdate(S=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const a=this.path[h];a.shouldResetTransform=!0,a.updateScroll("snapshot"),a.options.layoutRoot&&a.willUpdate(!1)}const{layoutId:f,layout:s}=this.options;if(f===void 0&&!s)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),S&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(tb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OD),this.nodes.forEach(jD),this.nodes.forEach(_D)):this.nodes.forEach(tb),this.clearAllSnapshots();const f=dn.now();$t.delta=Ni(0,1e3/60,f-$t.timestamp),$t.timestamp=f,$t.isProcessing=!0,gh.update.process($t),gh.preRender.process($t),gh.render.process($t),$t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MD),this.sharedNodes.forEach(PD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tn(this.snapshot.measuredBox.x)&&!tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++)this.path[s].updateScroll();const S=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,S?S.layoutBox:void 0)}updateScroll(S="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===S&&(f=!1),f&&this.instance){const s=o(this.instance);this.scroll={animationId:this.root.animationId,phase:S,isRoot:s,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:s}}}resetTransform(){if(!x)return;const S=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!fw(this.projectionDelta),s=this.getTransformTemplate(),u=s?s(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;S&&this.instance&&(f||Nr(this.latestValues)||h)&&(x(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(S=!0){const f=this.measurePageBox();let s=this.removeElementScroll(f);return S&&(s=this.removeTransform(s)),ID(s),{animationId:this.root.animationId,measuredBox:f,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:S}=this.options;if(!S)return St();const f=S.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(BD))){const{scroll:h}=this.root;h&&(As(f.x,h.offset.x),As(f.y,h.offset.y))}return f}removeElementScroll(S){var s;const f=St();if(Mn(f,S),(s=this.scroll)!=null&&s.wasRoot)return f;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:a,options:l}=h;h!==this.root&&a&&l.layoutScroll&&(a.wasRoot&&Mn(f,S),As(f.x,a.offset.x),As(f.y,a.offset.y))}return f}applyTransform(S,f=!1){const s=St();Mn(s,S);for(let u=0;u<this.path.length;u++){const h=this.path[u];!f&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Rs(s,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Nr(h.latestValues)&&Rs(s,h.latestValues)}return Nr(this.latestValues)&&Rs(s,this.latestValues),s}removeTransform(S){const f=St();Mn(f,S);for(let s=0;s<this.path.length;s++){const u=this.path[s];if(!u.instance||!Nr(u.latestValues))continue;lf(u.latestValues)&&u.updateSnapshot();const h=St(),a=u.measurePageBox();Mn(h,a),qy(f,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Nr(this.latestValues)&&qy(f,this.latestValues),f}setTargetDelta(S){this.targetDelta=S,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(S){this.options={...this.options,...S,crossfade:S.crossfade!==void 0?S.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(S=!1){var l;const f=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=f.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=f.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=f.isSharedProjectionDirty);const s=!!this.resumingFrom||this!==f;if(!(S||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(l=this.parent)!=null&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:a}=this.options;if(!(!this.layout||!(h||a))){if(this.resolvedRelativeTargetAt=$t.timestamp,!this.targetDelta&&!this.relativeTarget){const c=this.getClosestProjectingParent();c&&c.layout&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),lo(this.relativeTargetOrigin,this.layout.layoutBox,c.layout.layoutBox),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),q1(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const c=this.getClosestProjectingParent();c&&!!c.resumingFrom==!!this.resumingFrom&&!c.options.layoutScroll&&c.target&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),lo(this.relativeTargetOrigin,this.target,c.target),Mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||lf(this.parent.latestValues)||G1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const S=this.getLead(),f=!!this.resumingFrom||this!==S;let s=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(s=!1),f&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===$t.timestamp&&(s=!1),s)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Mn(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,l=this.treeScale.y;rO(this.layoutCorrected,this.treeScale,this.path,f),S.layout&&!S.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(S.target=S.layout.layoutBox,S.targetWithTransforms=St());const{target:c}=S;if(!c){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xy(this.prevProjectionDelta.x,this.projectionDelta.x),Xy(this.prevProjectionDelta.y,this.projectionDelta.y)),oo(this.projectionDelta,this.layoutCorrected,c,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==l||!Jy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(S=!0){var f;if((f=this.options.visualElement)==null||f.scheduleRender(),S){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ps(),this.projectionDelta=Ps(),this.projectionDeltaWithTransform=Ps()}setAnimationOrigin(S,f=!1){const s=this.snapshot,u=s?s.latestValues:{},h={...this.latestValues},a=Ps();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const l=St(),c=s?s.source:void 0,m=this.layout?this.layout.source:void 0,y=c!==m,p=this.getStack(),w=!p||p.members.length<=1,C=!!(y&&!w&&this.options.crossfade===!0&&!this.path.some(FD));this.animationProgress=0;let T;this.mixTargetDelta=j=>{const E=j/1e3;ib(a.x,S.x,E),ib(a.y,S.y,E),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lo(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LD(this.relativeTarget,this.relativeTargetOrigin,l,E),T&&wD(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=St()),Mn(T,this.relativeTarget)),y&&(this.animationValues=h,gD(h,u,this.latestValues,E,C,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(S){var f,s,u;this.notifyListeners("animationStart"),(f=this.currentAnimation)==null||f.stop(),(u=(s=this.resumingFrom)==null?void 0:s.currentAnimation)==null||u.stop(),this.pendingAnimation&&(rr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{fc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Br(0)),this.currentAnimation=uD(this.motionValue,[0,1e3],{...S,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),S.onUpdate&&S.onUpdate(h)},onStop:()=>{},onComplete:()=>{S.onComplete&&S.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const S=this.getStack();S&&S.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const S=this.getLead();let{targetWithTransforms:f,target:s,layout:u,latestValues:h}=S;if(!(!f||!s||!u)){if(this!==S&&this.layout&&u&&xw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){s=this.target||St();const a=tn(this.layout.layoutBox.x);s.x.min=S.target.x.min,s.x.max=s.x.min+a;const l=tn(this.layout.layoutBox.y);s.y.min=S.target.y.min,s.y.max=s.y.min+l}Mn(f,s),Rs(f,h),oo(this.projectionDeltaWithTransform,this.layoutCorrected,f,h)}}registerSharedNode(S,f){this.sharedNodes.has(S)||this.sharedNodes.set(S,new SD),this.sharedNodes.get(S).add(f);const u=f.options.initialPromotionConfig;f.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(f):void 0})}isLead(){const S=this.getStack();return S?S.lead===this:!0}getLead(){var f;const{layoutId:S}=this.options;return S?((f=this.getStack())==null?void 0:f.lead)||this:this}getPrevLead(){var f;const{layoutId:S}=this.options;return S?(f=this.getStack())==null?void 0:f.prevLead:void 0}getStack(){const{layoutId:S}=this.options;if(S)return this.root.sharedNodes.get(S)}promote({needsReset:S,transition:f,preserveFollowOpacity:s}={}){const u=this.getStack();u&&u.promote(this,s),S&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const S=this.getStack();return S?S.relegate(this):!1}resetSkewAndRotation(){const{visualElement:S}=this.options;if(!S)return;let f=!1;const{latestValues:s}=S;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(f=!0),!f)return;const u={};s.z&&jh("z",S,u,this.animationValues);for(let h=0;h<Th.length;h++)jh(`rotate${Th[h]}`,S,u,this.animationValues),jh(`skew${Th[h]}`,S,u,this.animationValues);S.render();for(const h in u)S.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);S.scheduleRender()}applyProjectionStyles(S,f){if(!this.instance||this.isSVG)return;if(!this.isVisible){S.visibility="hidden";return}const s=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,S.visibility="",S.opacity="",S.pointerEvents=hc(f==null?void 0:f.pointerEvents)||"",S.transform=s?s(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=hc(f==null?void 0:f.pointerEvents)||""),this.hasProjected&&!Nr(this.latestValues)&&(S.transform=s?s({},""):"none",this.hasProjected=!1);return}S.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let a=CD(this.projectionDeltaWithTransform,this.treeScale,h);s&&(a=s(h,a)),S.transform=a;const{x:l,y:c}=this.projectionDelta;S.transformOrigin=`${l.origin*100}% ${c.origin*100}% 0`,u.animationValues?S.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:S.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in So){if(h[m]===void 0)continue;const{correct:y,applyTo:p,isCSSVariable:w}=So[m],C=a==="none"?h[m]:y(h[m],u);if(p){const T=p.length;for(let j=0;j<T;j++)S[p[j]]=C}else w?this.options.visualElement.renderState.vars[m]=C:S[m]=C}this.options.layoutId&&(S.pointerEvents=u===this?hc(f==null?void 0:f.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(S=>{var f;return(f=S.currentAnimation)==null?void 0:f.stop()}),this.root.nodes.forEach(eb),this.root.sharedNodes.clear()}}}function jD(t){t.updateLayout()}function _D(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:x}=t.layout,{animationType:v}=t.options,S=e.source!==t.layout.source;v==="size"?On(a=>{const l=S?e.measuredBox[a]:e.layoutBox[a],c=tn(l);l.min=o[a].min,l.max=l.min+c}):xw(v,e.layoutBox,o)&&On(a=>{const l=S?e.measuredBox[a]:e.layoutBox[a],c=tn(o[a]);l.max=l.min+c,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[a].max=t.relativeTarget[a].min+c)});const f=Ps();oo(f,o,e.layoutBox);const s=Ps();S?oo(s,t.applyTransform(x,!0),e.measuredBox):oo(s,o,e.layoutBox);const u=!fw(f);let h=!1;if(!t.resumeFrom){const a=t.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:l,layout:c}=a;if(l&&c){const m=St();lo(m,e.layoutBox,l.layoutBox);const y=St();lo(y,o,c.layoutBox),mw(m,y)||(h=!0),a.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=a)}}}t.notifyListeners("didUpdate",{layout:o,snapshot:e,delta:s,layoutDelta:f,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:o}=t.options;o&&o()}t.options.transition=void 0}function ND(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ED(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MD(t){t.clearSnapshot()}function eb(t){t.clearMeasurements()}function tb(t){t.isLayoutDirty=!1}function OD(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DD(t){t.resolveTargetDelta()}function AD(t){t.calcProjection()}function RD(t){t.resetSkewAndRotation()}function PD(t){t.removeLeadSnapshot()}function ib(t,e,r){t.translate=gt(e.translate,0,r),t.scale=gt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function rb(t,e,r,o){t.min=gt(e.min,r.min,o),t.max=gt(e.max,r.max,o)}function LD(t,e,r,o){rb(t.x,e.x,r.x,o),rb(t.y,e.y,r.y,o)}function FD(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zD={duration:.45,ease:[.4,0,.1,1]},sb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ab=sb("applewebkit/")&&!sb("chrome/")?Math.round:An;function ob(t){t.min=ab(t.min),t.max=ab(t.max)}function ID(t){ob(t.x),ob(t.y)}function xw(t,e,r){return t==="position"||t==="preserve-aspect"&&!XO(Qy(e),Qy(r),.2)}function BD(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const VD=pw({attachResizeListener:(t,e)=>Co(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_h={current:void 0},yw=pw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_h.current){const t=new VD({});t.mount(window),t.setOptions({layoutScroll:!0}),_h.current=t}return _h.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UD={pan:{Feature:aD},drag:{Feature:sD,ProjectionNode:yw,MeasureLayout:uw}};function lb(t,e,r){const{props:o}=t;t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",r==="Start");const x="onHover"+r,v=o[x];v&&ft.postRender(()=>v(e,zo(e)))}class HD extends or{mount(){const{current:e}=this.node;e&&(this.unmount=hM(e,(r,o)=>(lb(this.node,o,"Start"),x=>lb(this.node,x,"End"))))}unmount(){}}class $D extends or{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Po(Co(this.node.current,"focus",()=>this.onFocus()),Co(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cb(t,e,r){const{props:o}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&o.whileTap&&t.animationState.setActive("whileTap",r==="Start");const x="onTap"+(r==="End"?"":r),v=o[x];v&&ft.postRender(()=>v(e,zo(e)))}class XD extends or{mount(){const{current:e}=this.node;e&&(this.unmount=pM(e,(r,o)=>(cb(this.node,o,"Start"),(x,{success:v})=>cb(this.node,x,v?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gf=new WeakMap,Nh=new WeakMap,YD=t=>{const e=gf.get(t.target);e&&e(t)},GD=t=>{t.forEach(YD)};function qD({root:t,...e}){const r=t||document;Nh.has(r)||Nh.set(r,{});const o=Nh.get(r),x=JSON.stringify(e);return o[x]||(o[x]=new IntersectionObserver(GD,{root:t,...e})),o[x]}function WD(t,e,r){const o=qD(e);return gf.set(t,r),o.observe(t),()=>{gf.delete(t),o.unobserve(t)}}const KD={some:0,all:1};class ZD extends or{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:o,amount:x="some",once:v}=e,S={root:r?r.current:void 0,rootMargin:o,threshold:typeof x=="number"?x:KD[x]},f=s=>{const{isIntersecting:u}=s;if(this.isInView===u||(this.isInView=u,v&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:a}=this.node.getProps(),l=u?h:a;l&&l(s)};return WD(this.node.current,S,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(QD(e,r))&&this.startObserver()}unmount(){}}function QD({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const JD={inView:{Feature:ZD},tap:{Feature:XD},focus:{Feature:$D},hover:{Feature:HD}},eA={layout:{ProjectionNode:yw,MeasureLayout:uw}},tA={...IO,...JD,...UD,...eA},Oe=tO(tA,mO);function ub(t){const e=zc(()=>Br(t)),{isStatic:r}=N.useContext(Bc);if(r){const[,o]=N.useState(t);N.useEffect(()=>e.on("change",o),[])}return e}function $c(){return($c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function bw(t,e){if(t==null)return{};var r,o,x={},v=Object.keys(t);for(o=0;o<v.length;o++)e.indexOf(r=v[o])>=0||(x[r]=t[r]);return x}function pf(t){var e=N.useRef(t),r=N.useRef(function(o){e.current&&e.current(o)});return e.current=t,r.current}var ko=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t<e?e:t},co=function(t){return"touches"in t},xf=function(t){return t&&t.ownerDocument.defaultView||self},db=function(t,e,r){var o=t.getBoundingClientRect(),x=co(e)?function(v,S){for(var f=0;f<v.length;f++)if(v[f].identifier===S)return v[f];return v[0]}(e.touches,r):e;return{left:ko((x.pageX-(o.left+xf(t).pageXOffset))/o.width),top:ko((x.pageY-(o.top+xf(t).pageYOffset))/o.height)}},hb=function(t){!co(t)&&t.preventDefault()},vw=Ae.memo(function(t){var e=t.onMove,r=t.onKey,o=bw(t,["onMove","onKey"]),x=N.useRef(null),v=pf(e),S=pf(r),f=N.useRef(null),s=N.useRef(!1),u=N.useMemo(function(){var c=function(p){hb(p),(co(p)?p.touches.length>0:p.buttons>0)&&x.current?v(db(x.current,p,f.current)):y(!1)},m=function(){return y(!1)};function y(p){var w=s.current,C=xf(x.current),T=p?C.addEventListener:C.removeEventListener;T(w?"touchmove":"mousemove",c),T(w?"touchend":"mouseup",m)}return[function(p){var w=p.nativeEvent,C=x.current;if(C&&(hb(w),!function(j,E){return E&&!co(j)}(w,s.current)&&C)){if(co(w)){s.current=!0;var T=w.changedTouches||[];T.length&&(f.current=T[0].identifier)}C.focus(),v(db(C,w,f.current)),y(!0)}},function(p){var w=p.which||p.keyCode;w<37||w>40||(p.preventDefault(),S({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},y]},[S,v]),h=u[0],a=u[1],l=u[2];return N.useEffect(function(){return l},[l]),Ae.createElement("div",$c({},o,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:x,onKeyDown:a,tabIndex:0,role:"slider"}))}),gm=function(t){return t.filter(Boolean).join(" ")},ww=function(t){var e=t.color,r=t.left,o=t.top,x=o===void 0?.5:o,v=gm(["react-colorful__pointer",t.className]);return Ae.createElement("div",{className:v,style:{top:100*x+"%",left:100*r+"%"}},Ae.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},Xt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r},nA=function(t){return oA(yf(t))},yf=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Xt(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?Xt(parseInt(t.substring(6,8),16)/255,2):1}},iA=function(t){return aA(sA(t))},rA=function(t){var e=t.s,r=t.v,o=t.a,x=(200-e)*r/100;return{h:Xt(t.h),s:Xt(x>0&&x<200?e*r/100/(x<=100?x:200-x)*100:0),l:Xt(x/2),a:Xt(o,2)}},bf=function(t){var e=rA(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},sA=function(t){var e=t.h,r=t.s,o=t.v,x=t.a;e=e/360*6,r/=100,o/=100;var v=Math.floor(e),S=o*(1-r),f=o*(1-(e-v)*r),s=o*(1-(1-e+v)*r),u=v%6;return{r:Xt(255*[o,f,S,S,s,o][u]),g:Xt(255*[s,o,o,f,S,S][u]),b:Xt(255*[S,S,s,o,o,f][u]),a:Xt(x,2)}},rc=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},aA=function(t){var e=t.r,r=t.g,o=t.b,x=t.a,v=x<1?rc(Xt(255*x)):"";return"#"+rc(e)+rc(r)+rc(o)+v},oA=function(t){var e=t.r,r=t.g,o=t.b,x=t.a,v=Math.max(e,r,o),S=v-Math.min(e,r,o),f=S?v===e?(r-o)/S:v===r?2+(o-e)/S:4+(e-r)/S:0;return{h:Xt(60*(f<0?f+6:f)),s:Xt(v?S/v*100:0),v:Xt(v/255*100),a:x}},lA=Ae.memo(function(t){var e=t.hue,r=t.onChange,o=gm(["react-colorful__hue",t.className]);return Ae.createElement("div",{className:o},Ae.createElement(vw,{onMove:function(x){r({h:360*x.left})},onKey:function(x){r({h:ko(e+360*x.left,0,360)})},"aria-label":"Hue","aria-valuenow":Xt(e),"aria-valuemax":"360","aria-valuemin":"0"},Ae.createElement(ww,{className:"react-colorful__hue-pointer",left:e/360,color:bf({h:e,s:100,v:100,a:1})})))}),cA=Ae.memo(function(t){var e=t.hsva,r=t.onChange,o={backgroundColor:bf({h:e.h,s:100,v:100,a:1})};return Ae.createElement("div",{className:"react-colorful__saturation",style:o},Ae.createElement(vw,{onMove:function(x){r({s:100*x.left,v:100-100*x.top})},onKey:function(x){r({s:ko(e.s+100*x.left,0,100),v:ko(e.v-100*x.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Xt(e.s)+"%, Brightness "+Xt(e.v)+"%"},Ae.createElement(ww,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:bf(e)})))}),Sw=function(t,e){if(t===e)return!0;for(var r in t)if(t[r]!==e[r])return!1;return!0},uA=function(t,e){return t.toLowerCase()===e.toLowerCase()||Sw(yf(t),yf(e))};function dA(t,e,r){var o=pf(r),x=N.useState(function(){return t.toHsva(e)}),v=x[0],S=x[1],f=N.useRef({color:e,hsva:v});N.useEffect(function(){if(!t.equal(e,f.current.color)){var u=t.toHsva(e);f.current={hsva:u,color:e},S(u)}},[e,t]),N.useEffect(function(){var u;Sw(v,f.current.hsva)||t.equal(u=t.fromHsva(v),f.current.color)||(f.current={hsva:v,color:u},o(u))},[v,t,o]);var s=N.useCallback(function(u){S(function(h){return Object.assign({},h,u)})},[]);return[v,s]}var hA=typeof window<"u"?N.useLayoutEffect:N.useEffect,fA=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},fb=new Map,mA=function(t){hA(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!fb.has(e)){var r=e.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,fb.set(e,r);var o=fA();o&&r.setAttribute("nonce",o),e.head.appendChild(r)}},[])},gA=function(t){var e=t.className,r=t.colorModel,o=t.color,x=o===void 0?r.defaultColor:o,v=t.onChange,S=bw(t,["className","colorModel","color","onChange"]),f=N.useRef(null);mA(f);var s=dA(r,x,v),u=s[0],h=s[1],a=gm(["react-colorful",e]);return Ae.createElement("div",$c({},S,{ref:f,className:a}),Ae.createElement(cA,{hsva:u,onChange:h}),Ae.createElement(lA,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},pA={defaultColor:"000",toHsva:nA,fromHsva:function(t){return iA({h:t.h,s:t.s,v:t.v,a:1})},equal:uA},xA=function(t){return Ae.createElement(gA,$c({},t,{colorModel:pA}))};const Cw=["shift","alt","meta","mod","ctrl","control"],yA={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function ir(t){return(yA[t.trim()]||t.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function kw(t){return Cw.includes(t)}function Eh(t,e=","){return t.toLowerCase().split(e)}function Mh(t,e="+",r=">",o=!1,x){let v=[],S=!1;t.includes(r)?(S=!0,v=t.toLocaleLowerCase().split(r).map(u=>ir(u))):v=t.toLocaleLowerCase().split(e).map(u=>ir(u));const f={alt:v.includes("alt"),ctrl:v.includes("ctrl")||v.includes("control"),shift:v.includes("shift"),meta:v.includes("meta"),mod:v.includes("mod"),useKey:o},s=v.filter(u=>!Cw.includes(u));return{...f,keys:s,description:x,isSequence:S}}typeof document<"u"&&(document.addEventListener("keydown",t=>{t.code!==void 0&&Tw([ir(t.code)])}),document.addEventListener("keyup",t=>{t.code!==void 0&&jw([ir(t.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{ki.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{ki.clear()},0)}));const ki=new Set;function pm(t){return Array.isArray(t)}function bA(t,e=","){return(pm(t)?t:t.split(e)).every(r=>ki.has(r.trim().toLowerCase()))}function Tw(t){const e=Array.isArray(t)?t:[t];ki.has("meta")&&ki.forEach(r=>!kw(r)&&ki.delete(r.toLowerCase())),e.forEach(r=>ki.add(r.toLowerCase()))}function jw(t){const e=Array.isArray(t)?t:[t];t==="meta"?ki.clear():e.forEach(r=>ki.delete(r.toLowerCase()))}function vA(t,e,r){(typeof r=="function"&&r(t,e)||r===!0)&&t.preventDefault()}function wA(t,e,r){return typeof r=="function"?r(t,e):r===!0||r===void 0}function SA(t){return _w(t,["input","textarea","select"])}function _w(t,e=!1){const{target:r,composed:o}=t;let x;return CA(r)&&o?x=t.composedPath()[0]&&t.composedPath()[0].tagName:x=r&&r.tagName,pm(e)?!!(x&&e&&e.some(v=>v.toLowerCase()===x.toLowerCase())):!!(x&&e&&e)}function CA(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function kA(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(r=>e.includes(r))||t.includes("*"):!0}const TA=(t,e,r=!1)=>{const{alt:o,meta:x,mod:v,shift:S,ctrl:f,keys:s,useKey:u}=e,{code:h,key:a,ctrlKey:l,metaKey:c,shiftKey:m,altKey:y}=t,p=ir(h);if(u&&(s==null?void 0:s.length)===1&&s.includes(a))return!0;if(!(s!=null&&s.includes(p))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(p))return!1;if(!r){if(o!==y&&p!=="alt"||S!==m&&p!=="shift")return!1;if(v){if(!c&&!l)return!1}else if(x!==c&&p!=="meta"&&p!=="os"||f!==l&&p!=="ctrl"&&p!=="control")return!1}return s&&s.length===1&&s.includes(p)?!0:s?bA(s):!s},jA=N.createContext(void 0),_A=()=>N.useContext(jA);function Nw(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce((r,o)=>r&&Nw(t[o],e[o]),!0):t===e}const NA=N.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),EA=()=>N.useContext(NA);function MA(t){const e=N.useRef(void 0);return Nw(e.current,t)||(e.current=t),e.current}const mb=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},OA=typeof window<"u"?N.useLayoutEffect:N.useEffect;function At(t,e,r,o){const x=N.useRef(null),v=N.useRef(!1),S=r instanceof Array?o instanceof Array?void 0:o:r,f=pm(t)?t.join(S==null?void 0:S.delimiter):t,s=r instanceof Array?r:o instanceof Array?o:void 0,u=N.useCallback(e,s??[]),h=N.useRef(u);s?h.current=u:h.current=e;const a=MA(S),{activeScopes:l}=EA(),c=_A();return OA(()=>{if((a==null?void 0:a.enabled)===!1||!kA(l,a==null?void 0:a.scopes))return;let m=[],y;const p=(j,E=!1)=>{var M;if(!(SA(j)&&!_w(j,a==null?void 0:a.enableOnFormTags))){if(x.current!==null){const D=x.current.getRootNode();if((D instanceof Document||D instanceof ShadowRoot)&&D.activeElement!==x.current&&!x.current.contains(D.activeElement)){mb(j);return}}(M=j.target)!=null&&M.isContentEditable&&!(a!=null&&a.enableOnContentEditable)||Eh(f,a==null?void 0:a.delimiter).forEach(D=>{var A,I,X,oe;if(D.includes((a==null?void 0:a.splitKey)??"+")&&D.includes((a==null?void 0:a.sequenceSplitKey)??">")){console.warn(`Hotkey ${D} contains both ${(a==null?void 0:a.splitKey)??"+"} and ${(a==null?void 0:a.sequenceSplitKey)??">"} which is not supported.`);return}const Z=Mh(D,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description);if(Z.isSequence){y=setTimeout(()=>{m=[]},(a==null?void 0:a.sequenceTimeoutMs)??1e3);const ae=Z.useKey?j.key:ir(j.code);if(kw(ae.toLowerCase()))return;m.push(ae);const te=(A=Z.keys)==null?void 0:A[m.length-1];if(ae!==te){m=[],y&&clearTimeout(y);return}m.length===((I=Z.keys)==null?void 0:I.length)&&(h.current(j,Z),y&&clearTimeout(y),m=[])}else if(TA(j,Z,a==null?void 0:a.ignoreModifiers)||(X=Z.keys)!=null&&X.includes("*")){if((oe=a==null?void 0:a.ignoreEventWhen)!=null&&oe.call(a,j)||E&&v.current)return;if(vA(j,Z,a==null?void 0:a.preventDefault),!wA(j,Z,a==null?void 0:a.enabled)){mb(j);return}h.current(j,Z),E||(v.current=!0)}})}},w=j=>{j.code!==void 0&&(Tw(ir(j.code)),((a==null?void 0:a.keydown)===void 0&&(a==null?void 0:a.keyup)!==!0||a!=null&&a.keydown)&&p(j))},C=j=>{j.code!==void 0&&(jw(ir(j.code)),v.current=!1,a!=null&&a.keyup&&p(j,!0))},T=x.current||(S==null?void 0:S.document)||document;return T.addEventListener("keyup",C,S==null?void 0:S.eventListenerOptions),T.addEventListener("keydown",w,S==null?void 0:S.eventListenerOptions),c&&Eh(f,a==null?void 0:a.delimiter).forEach(j=>c.addHotkey(Mh(j,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),()=>{T.removeEventListener("keyup",C,S==null?void 0:S.eventListenerOptions),T.removeEventListener("keydown",w,S==null?void 0:S.eventListenerOptions),c&&Eh(f,a==null?void 0:a.delimiter).forEach(j=>c.removeHotkey(Mh(j,a==null?void 0:a.splitKey,a==null?void 0:a.sequenceSplitKey,a==null?void 0:a.useKey,a==null?void 0:a.description))),m=[],y&&clearTimeout(y)}},[f,a,l]),x}var Io=t=>t.type==="checkbox",Dr=t=>t instanceof Date,en=t=>t==null;const Ew=t=>typeof t=="object";var Tt=t=>!en(t)&&!Array.isArray(t)&&Ew(t)&&!Dr(t),Mw=t=>Tt(t)&&t.target?Io(t.target)?t.target.checked:t.target.value:t,DA=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Ow=(t,e)=>t.has(DA(e)),AA=t=>{const e=t.constructor&&t.constructor.prototype;return Tt(e)&&e.hasOwnProperty("isPrototypeOf")},xm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Rt(t){let e;const r=Array.isArray(t),o=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(xm&&(t instanceof Blob||o))&&(r||Tt(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!AA(t))e=t;else for(const x in t)t.hasOwnProperty(x)&&(e[x]=Rt(t[x]));else return t;return e}var Xc=t=>/^\w*$/.test(t),kt=t=>t===void 0,ym=t=>Array.isArray(t)?t.filter(Boolean):[],bm=t=>ym(t.replace(/["|']|\]/g,"").split(/\.|\[/)),De=(t,e,r)=>{if(!e||!Tt(t))return r;const o=(Xc(e)?[e]:bm(e)).reduce((x,v)=>en(x)?x:x[v],t);return kt(o)||o===t?kt(t[e])?r:t[e]:o},bn=t=>typeof t=="boolean",dt=(t,e,r)=>{let o=-1;const x=Xc(e)?[e]:bm(e),v=x.length,S=v-1;for(;++o<v;){const f=x[o];let s=r;if(o!==S){const u=t[f];s=Tt(u)||Array.isArray(u)?u:isNaN(+x[o+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;t[f]=s,t=t[f]}};const Tc={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Si={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Dw=Ae.createContext(null);Dw.displayName="HookFormContext";const vm=()=>Ae.useContext(Dw);var Aw=(t,e,r,o=!0)=>{const x={defaultValues:e._defaultValues};for(const v in t)Object.defineProperty(x,v,{get:()=>{const S=v;return e._proxyFormState[S]!==Bn.all&&(e._proxyFormState[S]=!o||Bn.all),r&&(r[S]=!0),t[S]}});return x};const wm=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function RA(t){const e=vm(),{control:r=e.control,disabled:o,name:x,exact:v}=t||{},[S,f]=Ae.useState(r._formState),s=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return wm(()=>r._subscribe({name:x,formState:s.current,exact:v,callback:u=>{!o&&f({...r._formState,...u})}}),[x,o,v]),Ae.useEffect(()=>{s.current.isValid&&r._setValid(!0)},[r]),Ae.useMemo(()=>Aw(S,r,s.current,!1),[S,r])}var Zn=t=>typeof t=="string",Rw=(t,e,r,o,x)=>Zn(t)?(o&&e.watch.add(t),De(r,t,x)):Array.isArray(t)?t.map(v=>(o&&e.watch.add(v),De(r,v))):(o&&(e.watchAll=!0),r),vf=t=>en(t)||!Ew(t);function Ci(t,e,r=new WeakSet){if(vf(t)||vf(e))return t===e;if(Dr(t)&&Dr(e))return t.getTime()===e.getTime();const o=Object.keys(t),x=Object.keys(e);if(o.length!==x.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const v of o){const S=t[v];if(!x.includes(v))return!1;if(v!=="ref"){const f=e[v];if(Dr(S)&&Dr(f)||Tt(S)&&Tt(f)||Array.isArray(S)&&Array.isArray(f)?!Ci(S,f,r):S!==f)return!1}}return!0}function PA(t){const e=vm(),{control:r=e.control,name:o,defaultValue:x,disabled:v,exact:S,compute:f}=t||{},s=Ae.useRef(x),u=Ae.useRef(f),h=Ae.useRef(void 0);u.current=f;const a=Ae.useMemo(()=>r._getWatch(o,s.current),[r,o]),[l,c]=Ae.useState(u.current?u.current(a):a);return wm(()=>r._subscribe({name:o,formState:{values:!0},exact:S,callback:m=>{if(!v){const y=Rw(o,r._names,m.values||r._formValues,!1,s.current);if(u.current){const p=u.current(y);Ci(p,h.current)||(c(p),h.current=p)}else c(y)}}}),[r,v,o,S]),Ae.useEffect(()=>r._removeUnmounted()),l}function LA(t){const e=vm(),{name:r,disabled:o,control:x=e.control,shouldUnregister:v,defaultValue:S}=t,f=Ow(x._names.array,r),s=Ae.useMemo(()=>De(x._formValues,r,De(x._defaultValues,r,S)),[x,r,S]),u=PA({control:x,name:r,defaultValue:s,exact:!0}),h=RA({control:x,name:r,exact:!0}),a=Ae.useRef(t),l=Ae.useRef(x.register(r,{...t.rules,value:u,...bn(t.disabled)?{disabled:t.disabled}:{}}));a.current=t;const c=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!De(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!De(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!De(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!De(h.validatingFields,r)},error:{enumerable:!0,get:()=>De(h.errors,r)}}),[h,r]),m=Ae.useCallback(C=>l.current.onChange({target:{value:Mw(C),name:r},type:Tc.CHANGE}),[r]),y=Ae.useCallback(()=>l.current.onBlur({target:{value:De(x._formValues,r),name:r},type:Tc.BLUR}),[r,x._formValues]),p=Ae.useCallback(C=>{const T=De(x._fields,r);T&&C&&(T._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:j=>C.setCustomValidity(j),reportValidity:()=>C.reportValidity()})},[x._fields,r]),w=Ae.useMemo(()=>({name:r,value:u,...bn(o)||h.disabled?{disabled:h.disabled||o}:{},onChange:m,onBlur:y,ref:p}),[r,o,h.disabled,m,y,p,u]);return Ae.useEffect(()=>{const C=x._options.shouldUnregister||v;x.register(r,{...a.current.rules,...bn(a.current.disabled)?{disabled:a.current.disabled}:{}});const T=(j,E)=>{const M=De(x._fields,j);M&&M._f&&(M._f.mount=E)};if(T(r,!0),C){const j=Rt(De(x._options.defaultValues,r));dt(x._defaultValues,r,j),kt(De(x._formValues,r))&&dt(x._formValues,r,j)}return!f&&x.register(r),()=>{(f?C&&!x._state.action:C)?x.unregister(r):T(r,!1)}},[r,x,f,v]),Ae.useEffect(()=>{x._setDisabledField({disabled:o,name:r})},[o,r,x]),Ae.useMemo(()=>({field:w,formState:h,fieldState:c}),[w,h,c])}const Oh=t=>t.render(LA(t));var FA=(t,e,r,o,x)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[o]:x||!0}}:{},uo=t=>Array.isArray(t)?t:[t],gb=()=>{let t=[];return{get observers(){return t},next:x=>{for(const v of t)v.next&&v.next(x)},subscribe:x=>(t.push(x),{unsubscribe:()=>{t=t.filter(v=>v!==x)}}),unsubscribe:()=>{t=[]}}},un=t=>Tt(t)&&!Object.keys(t).length,Sm=t=>t.type==="file",Vn=t=>typeof t=="function",jc=t=>{if(!xm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Pw=t=>t.type==="select-multiple",Cm=t=>t.type==="radio",zA=t=>Cm(t)||Io(t),Dh=t=>jc(t)&&t.isConnected;function IA(t,e){const r=e.slice(0,-1).length;let o=0;for(;o<r;)t=kt(t)?o++:t[e[o++]];return t}function BA(t){for(const e in t)if(t.hasOwnProperty(e)&&!kt(t[e]))return!1;return!0}function Nt(t,e){const r=Array.isArray(e)?e:Xc(e)?[e]:bm(e),o=r.length===1?t:IA(t,r),x=r.length-1,v=r[x];return o&&delete o[v],x!==0&&(Tt(o)&&un(o)||Array.isArray(o)&&BA(o))&&Nt(t,r.slice(0,-1)),t}var Lw=t=>{for(const e in t)if(Vn(t[e]))return!0;return!1};function _c(t,e={}){const r=Array.isArray(t);if(Tt(t)||r)for(const o in t)Array.isArray(t[o])||Tt(t[o])&&!Lw(t[o])?(e[o]=Array.isArray(t[o])?[]:{},_c(t[o],e[o])):en(t[o])||(e[o]=!0);return e}function Fw(t,e,r){const o=Array.isArray(t);if(Tt(t)||o)for(const x in t)Array.isArray(t[x])||Tt(t[x])&&!Lw(t[x])?kt(e)||vf(r[x])?r[x]=Array.isArray(t[x])?_c(t[x],[]):{..._c(t[x])}:Fw(t[x],en(e)?{}:e[x],r[x]):r[x]=!Ci(t[x],e[x]);return r}var Wa=(t,e)=>Fw(t,e,_c(e));const pb={value:!1,isValid:!1},xb={value:!0,isValid:!0};var zw=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!kt(t[0].attributes.value)?kt(t[0].value)||t[0].value===""?xb:{value:t[0].value,isValid:!0}:xb:pb}return pb},Iw=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:o})=>kt(t)?t:e?t===""?NaN:t&&+t:r&&Zn(t)?new Date(t):o?o(t):t;const yb={isValid:!1,value:null};var Bw=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,yb):yb;function bb(t){const e=t.ref;return Sm(e)?e.files:Cm(e)?Bw(t.refs).value:Pw(e)?[...e.selectedOptions].map(({value:r})=>r):Io(e)?zw(t.refs).value:Iw(kt(e.value)?t.ref.value:e.value,t)}var VA=(t,e,r,o)=>{const x={};for(const v of t){const S=De(e,v);S&&dt(x,v,S._f)}return{criteriaMode:r,names:[...t],fields:x,shouldUseNativeValidation:o}},Nc=t=>t instanceof RegExp,Ka=t=>kt(t)?t:Nc(t)?t.source:Tt(t)?Nc(t.value)?t.value.source:t.value:t,vb=t=>({isOnSubmit:!t||t===Bn.onSubmit,isOnBlur:t===Bn.onBlur,isOnChange:t===Bn.onChange,isOnAll:t===Bn.all,isOnTouch:t===Bn.onTouched});const wb="AsyncFunction";var UA=t=>!!t&&!!t.validate&&!!(Vn(t.validate)&&t.validate.constructor.name===wb||Tt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===wb)),HA=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Sb=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(o=>t.startsWith(o)&&/^\.\w+/.test(t.slice(o.length))));const ho=(t,e,r,o)=>{for(const x of r||Object.keys(t)){const v=De(t,x);if(v){const{_f:S,...f}=v;if(S){if(S.refs&&S.refs[0]&&e(S.refs[0],x)&&!o)return!0;if(S.ref&&e(S.ref,S.name)&&!o)return!0;if(ho(f,e))break}else if(Tt(f)&&ho(f,e))break}}};function Cb(t,e,r){const o=De(t,r);if(o||Xc(r))return{error:o,name:r};const x=r.split(".");for(;x.length;){const v=x.join("."),S=De(e,v),f=De(t,v);if(S&&!Array.isArray(S)&&r!==v)return{name:r};if(f&&f.type)return{name:v,error:f};if(f&&f.root&&f.root.type)return{name:`${v}.root`,error:f.root};x.pop()}return{name:r}}var $A=(t,e,r,o)=>{r(t);const{name:x,...v}=t;return un(v)||Object.keys(v).length>=Object.keys(e).length||Object.keys(v).find(S=>e[S]===(!o||Bn.all))},XA=(t,e,r)=>!t||!e||t===e||uo(t).some(o=>o&&(r?o===e:o.startsWith(e)||e.startsWith(o))),YA=(t,e,r,o,x)=>x.isOnAll?!1:!r&&x.isOnTouch?!(e||t):(r?o.isOnBlur:x.isOnBlur)?!t:(r?o.isOnChange:x.isOnChange)?t:!0,GA=(t,e)=>!ym(De(t,e)).length&&Nt(t,e),qA=(t,e,r)=>{const o=uo(De(t,r));return dt(o,"root",e[r]),dt(t,r,o),t},mc=t=>Zn(t);function kb(t,e,r="validate"){if(mc(t)||Array.isArray(t)&&t.every(mc)||bn(t)&&!t)return{type:r,message:mc(t)?t:"",ref:e}}var _s=t=>Tt(t)&&!Nc(t)?t:{value:t,message:""},Tb=async(t,e,r,o,x,v)=>{const{ref:S,refs:f,required:s,maxLength:u,minLength:h,min:a,max:l,pattern:c,validate:m,name:y,valueAsNumber:p,mount:w}=t._f,C=De(r,y);if(!w||e.has(y))return{};const T=f?f[0]:S,j=Z=>{x&&T.reportValidity&&(T.setCustomValidity(bn(Z)?"":Z||""),T.reportValidity())},E={},M=Cm(S),D=Io(S),A=M||D,I=(p||Sm(S))&&kt(S.value)&&kt(C)||jc(S)&&S.value===""||C===""||Array.isArray(C)&&!C.length,X=FA.bind(null,y,o,E),oe=(Z,ae,te,G=Si.maxLength,z=Si.minLength)=>{const q=Z?ae:te;E[y]={type:Z?G:z,message:q,ref:S,...X(Z?G:z,q)}};if(v?!Array.isArray(C)||!C.length:s&&(!A&&(I||en(C))||bn(C)&&!C||D&&!zw(f).isValid||M&&!Bw(f).isValid)){const{value:Z,message:ae}=mc(s)?{value:!!s,message:s}:_s(s);if(Z&&(E[y]={type:Si.required,message:ae,ref:T,...X(Si.required,ae)},!o))return j(ae),E}if(!I&&(!en(a)||!en(l))){let Z,ae;const te=_s(l),G=_s(a);if(!en(C)&&!isNaN(C)){const z=S.valueAsNumber||C&&+C;en(te.value)||(Z=z>te.value),en(G.value)||(ae=z<G.value)}else{const z=S.valueAsDate||new Date(C),q=O=>new Date(new Date().toDateString()+" "+O),Y=S.type=="time",R=S.type=="week";Zn(te.value)&&C&&(Z=Y?q(C)>q(te.value):R?C>te.value:z>new Date(te.value)),Zn(G.value)&&C&&(ae=Y?q(C)<q(G.value):R?C<G.value:z<new Date(G.value))}if((Z||ae)&&(oe(!!Z,te.message,G.message,Si.max,Si.min),!o))return j(E[y].message),E}if((u||h)&&!I&&(Zn(C)||v&&Array.isArray(C))){const Z=_s(u),ae=_s(h),te=!en(Z.value)&&C.length>+Z.value,G=!en(ae.value)&&C.length<+ae.value;if((te||G)&&(oe(te,Z.message,ae.message),!o))return j(E[y].message),E}if(c&&!I&&Zn(C)){const{value:Z,message:ae}=_s(c);if(Nc(Z)&&!C.match(Z)&&(E[y]={type:Si.pattern,message:ae,ref:S,...X(Si.pattern,ae)},!o))return j(ae),E}if(m){if(Vn(m)){const Z=await m(C,r),ae=kb(Z,T);if(ae&&(E[y]={...ae,...X(Si.validate,ae.message)},!o))return j(ae.message),E}else if(Tt(m)){let Z={};for(const ae in m){if(!un(Z)&&!o)break;const te=kb(await m[ae](C,r),T,ae);te&&(Z={...te,...X(ae,te.message)},j(te.message),o&&(E[y]=Z))}if(!un(Z)&&(E[y]={ref:T,...Z},!o))return E}}return j(!0),E};const WA={mode:Bn.onSubmit,reValidateMode:Bn.onChange,shouldFocusError:!0};function KA(t={}){let e={...WA,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},o={},x=Tt(e.defaultValues)||Tt(e.values)?Rt(e.defaultValues||e.values)||{}:{},v=e.shouldUnregister?{}:Rt(x),S={action:!1,mount:!1,watch:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},s,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let a={...h};const l={array:gb(),state:gb()},c=e.criteriaMode===Bn.all,m=$=>ne=>{clearTimeout(u),u=setTimeout($,ne)},y=async $=>{if(!e.disabled&&(h.isValid||a.isValid||$)){const ne=e.resolver?un((await D()).errors):await I(o,!0);ne!==r.isValid&&l.state.next({isValid:ne})}},p=($,ne)=>{!e.disabled&&(h.isValidating||h.validatingFields||a.isValidating||a.validatingFields)&&(($||Array.from(f.mount)).forEach(ee=>{ee&&(ne?dt(r.validatingFields,ee,ne):Nt(r.validatingFields,ee))}),l.state.next({validatingFields:r.validatingFields,isValidating:!un(r.validatingFields)}))},w=($,ne=[],ee,we,Ce=!0,ke=!0)=>{if(we&&ee&&!e.disabled){if(S.action=!0,ke&&Array.isArray(De(o,$))){const Ne=ee(De(o,$),we.argA,we.argB);Ce&&dt(o,$,Ne)}if(ke&&Array.isArray(De(r.errors,$))){const Ne=ee(De(r.errors,$),we.argA,we.argB);Ce&&dt(r.errors,$,Ne),GA(r.errors,$)}if((h.touchedFields||a.touchedFields)&&ke&&Array.isArray(De(r.touchedFields,$))){const Ne=ee(De(r.touchedFields,$),we.argA,we.argB);Ce&&dt(r.touchedFields,$,Ne)}(h.dirtyFields||a.dirtyFields)&&(r.dirtyFields=Wa(x,v)),l.state.next({name:$,isDirty:oe($,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else dt(v,$,ne)},C=($,ne)=>{dt(r.errors,$,ne),l.state.next({errors:r.errors})},T=$=>{r.errors=$,l.state.next({errors:r.errors,isValid:!1})},j=($,ne,ee,we)=>{const Ce=De(o,$);if(Ce){const ke=De(v,$,kt(ee)?De(x,$):ee);kt(ke)||we&&we.defaultChecked||ne?dt(v,$,ne?ke:bb(Ce._f)):te($,ke),S.mount&&y()}},E=($,ne,ee,we,Ce)=>{let ke=!1,Ne=!1;const Me={name:$};if(!e.disabled){if(!ee||we){(h.isDirty||a.isDirty)&&(Ne=r.isDirty,r.isDirty=Me.isDirty=oe(),ke=Ne!==Me.isDirty);const ze=Ci(De(x,$),ne);Ne=!!De(r.dirtyFields,$),ze?Nt(r.dirtyFields,$):dt(r.dirtyFields,$,!0),Me.dirtyFields=r.dirtyFields,ke=ke||(h.dirtyFields||a.dirtyFields)&&Ne!==!ze}if(ee){const ze=De(r.touchedFields,$);ze||(dt(r.touchedFields,$,ee),Me.touchedFields=r.touchedFields,ke=ke||(h.touchedFields||a.touchedFields)&&ze!==ee)}ke&&Ce&&l.state.next(Me)}return ke?Me:{}},M=($,ne,ee,we)=>{const Ce=De(r.errors,$),ke=(h.isValid||a.isValid)&&bn(ne)&&r.isValid!==ne;if(e.delayError&&ee?(s=m(()=>C($,ee)),s(e.delayError)):(clearTimeout(u),s=null,ee?dt(r.errors,$,ee):Nt(r.errors,$)),(ee?!Ci(Ce,ee):Ce)||!un(we)||ke){const Ne={...we,...ke&&bn(ne)?{isValid:ne}:{},errors:r.errors,name:$};r={...r,...Ne},l.state.next(Ne)}},D=async $=>{p($,!0);const ne=await e.resolver(v,e.context,VA($||f.mount,o,e.criteriaMode,e.shouldUseNativeValidation));return p($),ne},A=async $=>{const{errors:ne}=await D($);if($)for(const ee of $){const we=De(ne,ee);we?dt(r.errors,ee,we):Nt(r.errors,ee)}else r.errors=ne;return ne},I=async($,ne,ee={valid:!0})=>{for(const we in $){const Ce=$[we];if(Ce){const{_f:ke,...Ne}=Ce;if(ke){const Me=f.array.has(ke.name),ze=Ce._f&&UA(Ce._f);ze&&h.validatingFields&&p([we],!0);const Ue=await Tb(Ce,f.disabled,v,c,e.shouldUseNativeValidation&&!ne,Me);if(ze&&h.validatingFields&&p([we]),Ue[ke.name]&&(ee.valid=!1,ne))break;!ne&&(De(Ue,ke.name)?Me?qA(r.errors,Ue,ke.name):dt(r.errors,ke.name,Ue[ke.name]):Nt(r.errors,ke.name))}!un(Ne)&&await I(Ne,ne,ee)}}return ee.valid},X=()=>{for(const $ of f.unMount){const ne=De(o,$);ne&&(ne._f.refs?ne._f.refs.every(ee=>!Dh(ee)):!Dh(ne._f.ref))&&W($)}f.unMount=new Set},oe=($,ne)=>!e.disabled&&($&&ne&&dt(v,$,ne),!Ci(O(),x)),Z=($,ne,ee)=>Rw($,f,{...S.mount?v:kt(ne)?x:Zn($)?{[$]:ne}:ne},ee,ne),ae=$=>ym(De(S.mount?v:x,$,e.shouldUnregister?De(x,$,[]):[])),te=($,ne,ee={})=>{const we=De(o,$);let Ce=ne;if(we){const ke=we._f;ke&&(!ke.disabled&&dt(v,$,Iw(ne,ke)),Ce=jc(ke.ref)&&en(ne)?"":ne,Pw(ke.ref)?[...ke.ref.options].forEach(Ne=>Ne.selected=Ce.includes(Ne.value)):ke.refs?Io(ke.ref)?ke.refs.forEach(Ne=>{(!Ne.defaultChecked||!Ne.disabled)&&(Array.isArray(Ce)?Ne.checked=!!Ce.find(Me=>Me===Ne.value):Ne.checked=Ce===Ne.value||!!Ce)}):ke.refs.forEach(Ne=>Ne.checked=Ne.value===Ce):Sm(ke.ref)?ke.ref.value="":(ke.ref.value=Ce,ke.ref.type||l.state.next({name:$,values:Rt(v)})))}(ee.shouldDirty||ee.shouldTouch)&&E($,Ce,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&R($)},G=($,ne,ee)=>{for(const we in ne){if(!ne.hasOwnProperty(we))return;const Ce=ne[we],ke=$+"."+we,Ne=De(o,ke);(f.array.has($)||Tt(Ce)||Ne&&!Ne._f)&&!Dr(Ce)?G(ke,Ce,ee):te(ke,Ce,ee)}},z=($,ne,ee={})=>{const we=De(o,$),Ce=f.array.has($),ke=Rt(ne);dt(v,$,ke),Ce?(l.array.next({name:$,values:Rt(v)}),(h.isDirty||h.dirtyFields||a.isDirty||a.dirtyFields)&&ee.shouldDirty&&l.state.next({name:$,dirtyFields:Wa(x,v),isDirty:oe($,ke)})):we&&!we._f&&!en(ke)?G($,ke,ee):te($,ke,ee),Sb($,f)&&l.state.next({...r,name:$}),l.state.next({name:S.mount?$:void 0,values:Rt(v)})},q=async $=>{S.mount=!0;const ne=$.target;let ee=ne.name,we=!0;const Ce=De(o,ee),ke=ze=>{we=Number.isNaN(ze)||Dr(ze)&&isNaN(ze.getTime())||Ci(ze,De(v,ee,ze))},Ne=vb(e.mode),Me=vb(e.reValidateMode);if(Ce){let ze,Ue;const nn=ne.type?bb(Ce._f):Mw($),Gt=$.type===Tc.BLUR||$.type===Tc.FOCUS_OUT,rn=!HA(Ce._f)&&!e.resolver&&!De(r.errors,ee)&&!Ce._f.deps||YA(Gt,De(r.touchedFields,ee),r.isSubmitted,Me,Ne),$n=Sb(ee,f,Gt);dt(v,ee,nn),Gt?(!ne||!ne.readOnly)&&(Ce._f.onBlur&&Ce._f.onBlur($),s&&s(0)):Ce._f.onChange&&Ce._f.onChange($);const Rn=E(ee,nn,Gt),Pn=!un(Rn)||$n;if(!Gt&&l.state.next({name:ee,type:$.type,values:Rt(v)}),rn)return(h.isValid||a.isValid)&&(e.mode==="onBlur"?Gt&&y():Gt||y()),Pn&&l.state.next({name:ee,...$n?{}:Rn});if(!Gt&&$n&&l.state.next({...r}),e.resolver){const{errors:si}=await D([ee]);if(ke(nn),we){const lr=Cb(r.errors,o,ee),Bo=Cb(si,o,lr.name||ee);ze=Bo.error,ee=Bo.name,Ue=un(si)}}else p([ee],!0),ze=(await Tb(Ce,f.disabled,v,c,e.shouldUseNativeValidation))[ee],p([ee]),ke(nn),we&&(ze?Ue=!1:(h.isValid||a.isValid)&&(Ue=await I(o,!0)));we&&(Ce._f.deps&&R(Ce._f.deps),M(ee,Ue,ze,Rn))}},Y=($,ne)=>{if(De(r.errors,ne)&&$.focus)return $.focus(),1},R=async($,ne={})=>{let ee,we;const Ce=uo($);if(e.resolver){const ke=await A(kt($)?$:Ce);ee=un(ke),we=$?!Ce.some(Ne=>De(ke,Ne)):ee}else $?(we=(await Promise.all(Ce.map(async ke=>{const Ne=De(o,ke);return await I(Ne&&Ne._f?{[ke]:Ne}:Ne)}))).every(Boolean),!(!we&&!r.isValid)&&y()):we=ee=await I(o);return l.state.next({...!Zn($)||(h.isValid||a.isValid)&&ee!==r.isValid?{}:{name:$},...e.resolver||!$?{isValid:ee}:{},errors:r.errors}),ne.shouldFocus&&!we&&ho(o,Y,$?Ce:f.mount),we},O=$=>{const ne={...S.mount?v:x};return kt($)?ne:Zn($)?De(ne,$):$.map(ee=>De(ne,ee))},L=($,ne)=>({invalid:!!De((ne||r).errors,$),isDirty:!!De((ne||r).dirtyFields,$),error:De((ne||r).errors,$),isValidating:!!De(r.validatingFields,$),isTouched:!!De((ne||r).touchedFields,$)}),B=$=>{$&&uo($).forEach(ne=>Nt(r.errors,ne)),l.state.next({errors:$?r.errors:{}})},K=($,ne,ee)=>{const we=(De(o,$,{_f:{}})._f||{}).ref,Ce=De(r.errors,$)||{},{ref:ke,message:Ne,type:Me,...ze}=Ce;dt(r.errors,$,{...ze,...ne,ref:we}),l.state.next({name:$,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&we&&we.focus&&we.focus()},V=($,ne)=>Vn($)?l.state.subscribe({next:ee=>"values"in ee&&$(Z(void 0,ne),ee)}):Z($,ne,!0),F=$=>l.state.subscribe({next:ne=>{XA($.name,ne.name,$.exact)&&$A(ne,$.formState||h,de,$.reRenderRoot)&&$.callback({values:{...v},...r,...ne,defaultValues:x})}}).unsubscribe,J=$=>(S.mount=!0,a={...a,...$.formState},F({...$,formState:a})),W=($,ne={})=>{for(const ee of $?uo($):f.mount)f.mount.delete(ee),f.array.delete(ee),ne.keepValue||(Nt(o,ee),Nt(v,ee)),!ne.keepError&&Nt(r.errors,ee),!ne.keepDirty&&Nt(r.dirtyFields,ee),!ne.keepTouched&&Nt(r.touchedFields,ee),!ne.keepIsValidating&&Nt(r.validatingFields,ee),!e.shouldUnregister&&!ne.keepDefaultValue&&Nt(x,ee);l.state.next({values:Rt(v)}),l.state.next({...r,...ne.keepDirty?{isDirty:oe()}:{}}),!ne.keepIsValid&&y()},ue=({disabled:$,name:ne})=>{(bn($)&&S.mount||$||f.disabled.has(ne))&&($?f.disabled.add(ne):f.disabled.delete(ne))},ce=($,ne={})=>{let ee=De(o,$);const we=bn(ne.disabled)||bn(e.disabled);return dt(o,$,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:$}},name:$,mount:!0,...ne}}),f.mount.add($),ee?ue({disabled:bn(ne.disabled)?ne.disabled:e.disabled,name:$}):j($,!0,ne.value),{...we?{disabled:ne.disabled||e.disabled}:{},...e.progressive?{required:!!ne.required,min:Ka(ne.min),max:Ka(ne.max),minLength:Ka(ne.minLength),maxLength:Ka(ne.maxLength),pattern:Ka(ne.pattern)}:{},name:$,onChange:q,onBlur:q,ref:Ce=>{if(Ce){ce($,ne),ee=De(o,$);const ke=kt(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,Ne=zA(ke),Me=ee._f.refs||[];if(Ne?Me.find(ze=>ze===ke):ke===ee._f.ref)return;dt(o,$,{_f:{...ee._f,...Ne?{refs:[...Me.filter(Dh),ke,...Array.isArray(De(x,$))?[{}]:[]],ref:{type:ke.type,name:$}}:{ref:ke}}}),j($,!1,void 0,ke)}else ee=De(o,$,{}),ee._f&&(ee._f.mount=!1),(e.shouldUnregister||ne.shouldUnregister)&&!(Ow(f.array,$)&&S.action)&&f.unMount.add($)}}},ie=()=>e.shouldFocusError&&ho(o,Y,f.mount),Q=$=>{bn($)&&(l.state.next({disabled:$}),ho(o,(ne,ee)=>{const we=De(o,ee);we&&(ne.disabled=we._f.disabled||$,Array.isArray(we._f.refs)&&we._f.refs.forEach(Ce=>{Ce.disabled=we._f.disabled||$}))},0,!1))},me=($,ne)=>async ee=>{let we;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let Ce=Rt(v);if(l.state.next({isSubmitting:!0}),e.resolver){const{errors:ke,values:Ne}=await D();r.errors=ke,Ce=Rt(Ne)}else await I(o);if(f.disabled.size)for(const ke of f.disabled)Nt(Ce,ke);if(Nt(r.errors,"root"),un(r.errors)){l.state.next({errors:{}});try{await $(Ce,ee)}catch(ke){we=ke}}else ne&&await ne({...r.errors},ee),ie(),setTimeout(ie);if(l.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:un(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},le=($,ne={})=>{De(o,$)&&(kt(ne.defaultValue)?z($,Rt(De(x,$))):(z($,ne.defaultValue),dt(x,$,Rt(ne.defaultValue))),ne.keepTouched||Nt(r.touchedFields,$),ne.keepDirty||(Nt(r.dirtyFields,$),r.isDirty=ne.defaultValue?oe($,Rt(De(x,$))):oe()),ne.keepError||(Nt(r.errors,$),h.isValid&&y()),l.state.next({...r}))},H=($,ne={})=>{const ee=$?Rt($):x,we=Rt(ee),Ce=un($),ke=Ce?x:we;if(ne.keepDefaultValues||(x=ee),!ne.keepValues){if(ne.keepDirtyValues){const Ne=new Set([...f.mount,...Object.keys(Wa(x,v))]);for(const Me of Array.from(Ne))De(r.dirtyFields,Me)?dt(ke,Me,De(v,Me)):z(Me,De(ke,Me))}else{if(xm&&kt($))for(const Ne of f.mount){const Me=De(o,Ne);if(Me&&Me._f){const ze=Array.isArray(Me._f.refs)?Me._f.refs[0]:Me._f.ref;if(jc(ze)){const Ue=ze.closest("form");if(Ue){Ue.reset();break}}}}if(ne.keepFieldsRef)for(const Ne of f.mount)z(Ne,De(ke,Ne));else o={}}v=e.shouldUnregister?ne.keepDefaultValues?Rt(x):{}:Rt(ke),l.array.next({values:{...ke}}),l.state.next({values:{...ke}})}f={mount:ne.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},S.mount=!h.isValid||!!ne.keepIsValid||!!ne.keepDirtyValues,S.watch=!!e.shouldUnregister,l.state.next({submitCount:ne.keepSubmitCount?r.submitCount:0,isDirty:Ce?!1:ne.keepDirty?r.isDirty:!!(ne.keepDefaultValues&&!Ci($,x)),isSubmitted:ne.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ce?{}:ne.keepDirtyValues?ne.keepDefaultValues&&v?Wa(x,v):r.dirtyFields:ne.keepDefaultValues&&$?Wa(x,$):ne.keepDirty?r.dirtyFields:{},touchedFields:ne.keepTouched?r.touchedFields:{},errors:ne.keepErrors?r.errors:{},isSubmitSuccessful:ne.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:x})},re=($,ne)=>H(Vn($)?$(v):$,ne),ge=($,ne={})=>{const ee=De(o,$),we=ee&&ee._f;if(we){const Ce=we.refs?we.refs[0]:we.ref;Ce.focus&&(Ce.focus(),ne.shouldSelect&&Vn(Ce.select)&&Ce.select())}},de=$=>{r={...r,...$}},Se={control:{register:ce,unregister:W,getFieldState:L,handleSubmit:me,setError:K,_subscribe:F,_runSchema:D,_focusError:ie,_getWatch:Z,_getDirty:oe,_setValid:y,_setFieldArray:w,_setDisabledField:ue,_setErrors:T,_getFieldArray:ae,_reset:H,_resetDefaultValues:()=>Vn(e.defaultValues)&&e.defaultValues().then($=>{re($,e.resetOptions),l.state.next({isLoading:!1})}),_removeUnmounted:X,_disableForm:Q,_subjects:l,_proxyFormState:h,get _fields(){return o},get _formValues(){return v},get _state(){return S},set _state($){S=$},get _defaultValues(){return x},get _names(){return f},set _names($){f=$},get _formState(){return r},get _options(){return e},set _options($){e={...e,...$}}},subscribe:J,trigger:R,register:ce,handleSubmit:me,watch:V,setValue:z,getValues:O,reset:re,resetField:le,clearErrors:B,unregister:W,setError:K,setFocus:ge,getFieldState:L};return{...Se,formControl:Se}}function ZA(t={}){const e=Ae.useRef(void 0),r=Ae.useRef(void 0),[o,x]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Vn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Vn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:o},t.defaultValues&&!Vn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:S,...f}=KA(t);e.current={...f,formState:o}}const v=e.current.control;return v._options=t,wm(()=>{const S=v._subscribe({formState:v._proxyFormState,callback:()=>x({...v._formState}),reRenderRoot:!0});return x(f=>({...f,isReady:!0})),v._formState.isReady=!0,S},[v]),Ae.useEffect(()=>v._disableForm(t.disabled),[v,t.disabled]),Ae.useEffect(()=>{t.mode&&(v._options.mode=t.mode),t.reValidateMode&&(v._options.reValidateMode=t.reValidateMode)},[v,t.mode,t.reValidateMode]),Ae.useEffect(()=>{t.errors&&(v._setErrors(t.errors),v._focusError())},[v,t.errors]),Ae.useEffect(()=>{t.shouldUnregister&&v._subjects.state.next({values:v._getWatch()})},[v,t.shouldUnregister]),Ae.useEffect(()=>{if(v._proxyFormState.isDirty){const S=v._getDirty();S!==o.isDirty&&v._subjects.state.next({isDirty:S})}},[v,o.isDirty]),Ae.useEffect(()=>{t.values&&!Ci(t.values,r.current)?(v._reset(t.values,{keepFieldsRef:!0,...v._options.resetOptions}),r.current=t.values,x(S=>({...S}))):v._resetDefaultValues()},[v,t.values]),Ae.useEffect(()=>{v._state.mount||(v._setValid(),v._state.mount=!0),v._state.watch&&(v._state.watch=!1,v._subjects.state.next({...v._formState})),v._removeUnmounted()}),e.current.formState=Aw(o,v),e.current}var Ah={exports:{}},Rh,jb;function QA(){if(jb)return Rh;jb=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Rh=t,Rh}var Ph,_b;function JA(){if(_b)return Ph;_b=1;var t=QA();function e(){}function r(){}return r.resetWarningCache=e,Ph=function(){function o(S,f,s,u,h,a){if(a!==t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}o.isRequired=o;function x(){return o}var v={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:x,element:o,elementType:o,instanceOf:x,node:o,objectOf:x,oneOf:x,oneOfType:x,shape:x,exact:x,checkPropTypes:r,resetWarningCache:e};return v.PropTypes=v,v},Ph}var Nb;function eR(){return Nb||(Nb=1,Ah.exports=JA()()),Ah.exports}var tR=eR();const Je=Cf(tR);Je.elementType.isRequired,Je.string,Je.func,Je.string,Je.oneOf(["sm","md","lg"]),Je.oneOf(["default","primary","highlight"]),Je.string,Je.bool,Je.string;var Lh={};const nR={},iR=Object.freeze(Object.defineProperty({__proto__:null,default:nR},Symbol.toStringTag,{value:"Module"})),Fh=h2(iR);var Eb;function rR(){return Eb||(Eb=1,function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var r=Fh,o=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=o.document,e.jsdomImplForWrapper=Fh.implForWrapper,e.nodeCanvas=Fh.Canvas,e.window=o,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function f(c,m){if(this.__eventListeners[c]){var y=this.__eventListeners[c];m?y[y.indexOf(m)]=!1:e.util.array.fill(y,!1)}}function s(c,m){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var y in c)this.on(y,c[y]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(m);return this}function u(c,m){var y=(function(){m.apply(this,arguments),this.off(c,y)}).bind(this);this.on(c,y)}function h(c,m){if(arguments.length===1)for(var y in c)u.call(this,y,c[y]);else u.call(this,c,m);return this}function a(c,m){if(!this.__eventListeners)return this;if(arguments.length===0)for(c in this.__eventListeners)f.call(this,c);else if(arguments.length===1&&typeof arguments[0]=="object")for(var y in c)f.call(this,y,c[y]);else f.call(this,c,m);return this}function l(c,m){if(!this.__eventListeners)return this;var y=this.__eventListeners[c];if(!y)return this;for(var p=0,w=y.length;p<w;p++)y[p]&&y[p].call(this,m||{});return this.__eventListeners[c]=y.filter(function(C){return C!==!1}),this}e.Observable={fire:l,on:s,once:h,off:a}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,s=arguments.length;f<s;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,s,u){var h=this._objects;return u?h[s]=f:h.splice(s,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,s,u=!1,h=0,a=arguments.length;h<a;h++)s=f.indexOf(arguments[h]),s!==-1&&(u=!0,f.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(f,s){for(var u=this.getObjects(),h=0,a=u.length;h<a;h++)f.call(s,u[h],h,u);return this},getObjects:function(f){return typeof f>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f,s){return this._objects.indexOf(f)>-1?!0:s?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(f,!0)}):!1},complexity:function(){return this._objects.reduce(function(f,s){return f+=s.complexity?s.complexity():0,f},0)}},e.CommonMethods={_setOptions:function(f){for(var s in f)this.set(s,f[s])},_initGradient:function(f,s){f&&f.colorStops&&!(f instanceof e.Gradient)&&this.set(s,new e.Gradient(f))},_initPattern:function(f,s,u){f&&f.source&&!(f instanceof e.Pattern)?this.set(s,new e.Pattern(f,u)):u&&u()},_setObject:function(f){for(var s in f)this._set(s,f[s])},set:function(f,s){return typeof f=="object"?this._setObject(f):this._set(f,s),this},_set:function(f,s){this[f]=s},toggle:function(f){var s=this.get(f);return typeof s=="boolean"&&this.set(f,!s),this},get:function(f){return this[f]}},function(f){var s=Math.sqrt,u=Math.atan2,h=Math.pow,a=Math.PI/180,l=Math.PI/2;e.util={cos:function(c){if(c===0)return 1;c<0&&(c=-c);var m=c/l;switch(m){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(c===0)return 0;var m=c/l,y=1;switch(c<0&&(y=-1),m){case 1:return y;case 2:return 0;case 3:return-y}return Math.sin(c)},removeFromArray:function(c,m){var y=c.indexOf(m);return y!==-1&&c.splice(y,1),c},getRandomInt:function(c,m){return Math.floor(Math.random()*(m-c+1))+c},degreesToRadians:function(c){return c*a},radiansToDegrees:function(c){return c/a},rotatePoint:function(c,m,y){var p=new e.Point(c.x-m.x,c.y-m.y),w=e.util.rotateVector(p,y);return new e.Point(w.x,w.y).addEquals(m)},rotateVector:function(c,m){var y=e.util.sin(m),p=e.util.cos(m),w=c.x*p-c.y*y,C=c.x*y+c.y*p;return{x:w,y:C}},createVector:function(c,m){return new e.Point(m.x-c.x,m.y-c.y)},calcAngleBetweenVectors:function(c,m){return Math.acos((c.x*m.x+c.y*m.y)/(Math.hypot(c.x,c.y)*Math.hypot(m.x,m.y)))},getHatVector:function(c){return new e.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,m,y){var p=e.util.createVector(c,m),w=e.util.createVector(c,y),C=e.util.calcAngleBetweenVectors(p,w),T=e.util.calcAngleBetweenVectors(e.util.rotateVector(p,C),w),j=C*(T===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(p,j)),angle:C}},projectStrokeOnPoints:function(c,m,y){var p=[],w=m.strokeWidth/2,C=m.strokeUniform?new e.Point(1/m.scaleX,1/m.scaleY):new e.Point(1,1),T=function(j){var E=w/Math.hypot(j.x,j.y);return new e.Point(j.x*E*C.x,j.y*E*C.y)};return c.length<=1||c.forEach(function(j,E){var M=new e.Point(j.x,j.y),D,A;E===0?(A=c[E+1],D=y?T(e.util.createVector(A,M)).addEquals(M):c[c.length-1]):E===c.length-1?(D=c[E-1],A=y?T(e.util.createVector(D,M)).addEquals(M):c[0]):(D=c[E-1],A=c[E+1]);var I=e.util.getBisector(M,D,A),X=I.vector,oe=I.angle,Z,ae;if(m.strokeLineJoin==="miter"&&(Z=-w/Math.sin(oe/2),ae=new e.Point(X.x*Z*C.x,X.y*Z*C.y),Math.hypot(ae.x,ae.y)/w<=m.strokeMiterLimit)){p.push(M.add(ae)),p.push(M.subtract(ae));return}Z=-w*Math.SQRT2,ae=new e.Point(X.x*Z*C.x,X.y*Z*C.y),p.push(M.add(ae)),p.push(M.subtract(ae))}),p},transformPoint:function(c,m,y){return y?new e.Point(m[0]*c.x+m[2]*c.y,m[1]*c.x+m[3]*c.y):new e.Point(m[0]*c.x+m[2]*c.y+m[4],m[1]*c.x+m[3]*c.y+m[5])},makeBoundingBoxFromPoints:function(c,m){if(m)for(var y=0;y<c.length;y++)c[y]=e.util.transformPoint(c[y],m);var p=[c[0].x,c[1].x,c[2].x,c[3].x],w=e.util.array.min(p),C=e.util.array.max(p),T=C-w,j=[c[0].y,c[1].y,c[2].y,c[3].y],E=e.util.array.min(j),M=e.util.array.max(j),D=M-E;return{left:w,top:E,width:T,height:D}},invertTransform:function(c){var m=1/(c[0]*c[3]-c[1]*c[2]),y=[m*c[3],-m*c[1],-m*c[2],m*c[0]],p=e.util.transformPoint({x:c[4],y:c[5]},y,!0);return y[4]=-p.x,y[5]=-p.y,y},toFixed:function(c,m){return parseFloat(Number(c).toFixed(m))},parseUnit:function(c,m){var y=/\D{0,2}$/.exec(c),p=parseFloat(c);switch(m||(m=e.Text.DEFAULT_SVG_FONT_SIZE),y[0]){case"mm":return p*e.DPI/25.4;case"cm":return p*e.DPI/2.54;case"in":return p*e.DPI;case"pt":return p*e.DPI/72;case"pc":return p*e.DPI/72*12;case"em":return p*m;default:return p}},falseFunction:function(){return!1},getKlass:function(c,m){return c=e.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),e.util.resolveNamespace(m)[c]},getSvgAttributes:function(c){var m=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":m=m.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":m=m.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":m=m.concat(["offset","stop-color","stop-opacity"]);break}return m},resolveNamespace:function(c){if(!c)return e;var m=c.split("."),y=m.length,p,w=f||e.window;for(p=0;p<y;++p)w=w[m[p]];return w},loadImage:function(c,m,y,p){if(!c){m&&m.call(y,c);return}var w=e.util.createImage(),C=function(){m&&m.call(y,w,!1),w=w.onload=w.onerror=null};w.onload=C,w.onerror=function(){e.log("Error loading "+w.src),m&&m.call(y,null,!0),w=w.onload=w.onerror=null},c.indexOf("data")!==0&&p!==void 0&&p!==null&&(w.crossOrigin=p),c.substring(0,14)==="data:image/svg"&&(w.onload=null,e.util.loadImageInDom(w,C)),w.src=c},loadImageInDom:function(c,m){var y=e.document.createElement("div");y.style.width=y.style.height="1px",y.style.left=y.style.top="-100%",y.style.position="absolute",y.appendChild(c),e.document.querySelector("body").appendChild(y),c.onload=function(){m(),y.parentNode.removeChild(y),y=null}},enlivenObjects:function(c,m,y,p){c=c||[];var w=[],C=0,T=c.length;function j(){++C===T&&m&&m(w.filter(function(E){return E}))}if(!T){m&&m(w);return}c.forEach(function(E,M){if(!E||!E.type){j();return}var D=e.util.getKlass(E.type,y);D.fromObject(E,function(A,I){I||(w[M]=A),p&&p(E,A,I),j()})})},enlivenObjectEnlivables:function(c,m,y){var p=e.Object.ENLIVEN_PROPS.filter(function(w){return!!c[w]});e.util.enlivenObjects(p.map(function(w){return c[w]}),function(w){var C={};p.forEach(function(T,j){C[T]=w[j],m&&(m[T]=w[j])}),y&&y(C)})},enlivenPatterns:function(c,m){c=c||[];function y(){++w===C&&m&&m(p)}var p=[],w=0,C=c.length;if(!C){m&&m(p);return}c.forEach(function(T,j){T&&T.source?new e.Pattern(T,function(E){p[j]=E,y()}):(p[j]=T,y())})},groupSVGElements:function(c,m,y){var p;return c&&c.length===1?(typeof y<"u"&&(c[0].sourcePath=y),c[0]):(m&&(m.width&&m.height?m.centerPoint={x:m.width/2,y:m.height/2}:(delete m.width,delete m.height)),p=new e.Group(c,m),typeof y<"u"&&(p.sourcePath=y),p)},populateWithProperties:function(c,m,y){if(y&&Array.isArray(y))for(var p=0,w=y.length;p<w;p++)y[p]in c&&(m[y[p]]=c[y[p]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(c){var m=e.util.createCanvasElement();return m.width=c.width,m.height=c.height,m.getContext("2d").drawImage(c,0,0),m},toDataURL:function(c,m,y){return c.toDataURL("image/"+m,y)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(c,m,y){return[c[0]*m[0]+c[2]*m[1],c[1]*m[0]+c[3]*m[1],c[0]*m[2]+c[2]*m[3],c[1]*m[2]+c[3]*m[3],y?0:c[0]*m[4]+c[2]*m[5]+c[4],y?0:c[1]*m[4]+c[3]*m[5]+c[5]]},qrDecompose:function(c){var m=u(c[1],c[0]),y=h(c[0],2)+h(c[1],2),p=s(y),w=(c[0]*c[3]-c[2]*c[1])/p,C=u(c[0]*c[2]+c[1]*c[3],y);return{angle:m/a,scaleX:p,scaleY:w,skewX:C/a,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return e.iMatrix.concat();var m=e.util.degreesToRadians(c.angle),y=e.util.cos(m),p=e.util.sin(m);return[y,p,-p,y,0,0]},calcDimensionsMatrix:function(c){var m=typeof c.scaleX>"u"?1:c.scaleX,y=typeof c.scaleY>"u"?1:c.scaleY,p=[c.flipX?-m:m,0,0,c.flipY?-y:y,0,0],w=e.util.multiplyTransformMatrices,C=e.util.degreesToRadians;return c.skewX&&(p=w(p,[1,0,Math.tan(C(c.skewX)),1],!0)),c.skewY&&(p=w(p,[1,Math.tan(C(c.skewY)),0,1],!0)),p},composeMatrix:function(c){var m=[1,0,0,1,c.translateX||0,c.translateY||0],y=e.util.multiplyTransformMatrices;return c.angle&&(m=y(m,e.util.calcRotateMatrix(c))),(c.scaleX!==1||c.scaleY!==1||c.skewX||c.skewY||c.flipX||c.flipY)&&(m=y(m,e.util.calcDimensionsMatrix(c))),m},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,m,y,p){p>0&&(m>p?m-=p:m=0,y>p?y-=p:y=0);var w=!0,C,T,j=c.getImageData(m,y,p*2||1,p*2||1),E=j.data.length;for(C=3;C<E&&(T=j.data[C],w=T<=0,w!==!1);C+=4);return j=null,w},parsePreserveAspectRatioAttribute:function(c){var m="meet",y="Mid",p="Mid",w=c.split(" "),C;return w&&w.length&&(m=w.pop(),m!=="meet"&&m!=="slice"?(C=m,m="meet"):w.length&&(C=w.pop())),y=C!=="none"?C.slice(1,4):"none",p=C!=="none"?C.slice(5,8):"none",{meetOrSlice:m,alignX:y,alignY:p}},clearFabricFontCache:function(c){c=(c||"").toLowerCase(),c?e.charWidthsCache[c]&&delete e.charWidthsCache[c]:e.charWidthsCache={}},limitDimsByArea:function(c,m){var y=Math.sqrt(m*c),p=Math.floor(m/y);return{x:Math.floor(y),y:p}},capValue:function(c,m,y){return Math.max(c,Math.min(m,y))},findScaleToFit:function(c,m){return Math.min(m.width/c.width,m.height/c.height)},findScaleToCover:function(c,m){return Math.max(m.width/c.width,m.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(m){return e.util.toFixed(m,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,m){var y=e.util.invertTransform(m),p=e.util.multiplyTransformMatrices(y,c.calcOwnMatrix());e.util.applyTransformToObject(c,p)},addTransformToObject:function(c,m){e.util.applyTransformToObject(c,e.util.multiplyTransformMatrices(m,c.calcOwnMatrix()))},applyTransformToObject:function(c,m){var y=e.util.qrDecompose(m),p=new e.Point(y.translateX,y.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",y.scaleX),c.set("scaleY",y.scaleY),c.skewX=y.skewX,c.skewY=y.skewY,c.angle=y.angle,c.setPositionByOrigin(p,"center","center")},sizeAfterTransform:function(c,m,y){var p=c/2,w=m/2,C=[{x:-p,y:-w},{x:p,y:-w},{x:-p,y:w},{x:p,y:w}],T=e.util.calcDimensionsMatrix(y),j=e.util.makeBoundingBoxFromPoints(C,T);return{x:j.width,y:j.height}},mergeClipPaths:function(c,m){var y=c,p=m;y.inverted&&!p.inverted&&(y=m,p=c),e.util.applyTransformToObject(p,e.util.multiplyTransformMatrices(e.util.invertTransform(y.calcTransformMatrix()),p.calcTransformMatrix()));var w=y.inverted&&p.inverted;return w&&(y.inverted=p.inverted=!1),new e.Group([y],{clipPath:p,inverted:w})},hasStyleChanged:function(c,m,y){return y=y||!1,c.fill!==m.fill||c.stroke!==m.stroke||c.strokeWidth!==m.strokeWidth||c.fontSize!==m.fontSize||c.fontFamily!==m.fontFamily||c.fontWeight!==m.fontWeight||c.fontStyle!==m.fontStyle||c.textBackgroundColor!==m.textBackgroundColor||c.deltaY!==m.deltaY||y&&(c.overline!==m.overline||c.underline!==m.underline||c.linethrough!==m.linethrough)},stylesToArray:function(y,m){for(var y=e.util.object.clone(y,!0),p=m.split(`
`),w=-1,C={},T=[],j=0;j<p.length;j++){if(!y[j]){w+=p[j].length;continue}for(var E=0;E<p[j].length;E++){w++;var M=y[j][E];if(M&&Object.keys(M).length>0){var D=e.util.hasStyleChanged(C,M,!0);D?T.push({start:w,end:w+1,style:M}):T[T.length-1].end++}C=M||{}}}return T},stylesFromArray:function(c,m){if(!Array.isArray(c))return c;for(var y=m.split(`
`),p=-1,w=0,C={},T=0;T<y.length;T++)for(var j=0;j<y[T].length;j++)p++,c[w]&&c[w].start<=p&&p<c[w].end&&(C[T]=C[T]||{},C[T][j]=Object.assign({},c[w].style),p===c[w].end-1&&w++);return C}}}(t),function(){var f=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function h(R,O,L,B,K,V,F,J,W,ue,ce){var ie=e.util.cos(R),Q=e.util.sin(R),me=e.util.cos(O),le=e.util.sin(O),H=L*K*me-B*V*le+F,re=B*K*me+L*V*le+J,ge=ue+W*(-L*K*Q-B*V*ie),de=ce+W*(-B*K*Q+L*V*ie),fe=H+W*(L*K*le+B*V*me),Se=re+W*(B*K*le-L*V*me);return["C",ge,de,fe,Se,H,re]}function a(R,O,L,B,K,V,F){var J=Math.PI,W=F*J/180,ue=e.util.sin(W),ce=e.util.cos(W),ie=0,Q=0;L=Math.abs(L),B=Math.abs(B);var me=-ce*R*.5-ue*O*.5,le=-ce*O*.5+ue*R*.5,H=L*L,re=B*B,ge=le*le,de=me*me,fe=H*re-H*ge-re*de,Se=0;if(fe<0){var $=Math.sqrt(1-fe/(H*re));L*=$,B*=$}else Se=(K===V?-1:1)*Math.sqrt(fe/(H*ge+re*de));var ne=Se*L*le/B,ee=-Se*B*me/L,we=ce*ne-ue*ee+R*.5,Ce=ue*ne+ce*ee+O*.5,ke=l(1,0,(me-ne)/L,(le-ee)/B),Ne=l((me-ne)/L,(le-ee)/B,(-me-ne)/L,(-le-ee)/B);V===0&&Ne>0?Ne-=2*J:V===1&&Ne<0&&(Ne+=2*J);for(var Me=Math.ceil(Math.abs(Ne/J*2)),ze=[],Ue=Ne/Me,nn=8/3*Math.sin(Ue/4)*Math.sin(Ue/4)/Math.sin(Ue/2),Gt=ke+Ue,rn=0;rn<Me;rn++)ze[rn]=h(ke,Gt,ce,ue,L,B,we,Ce,nn,ie,Q),ie=ze[rn][5],Q=ze[rn][6],ke=Gt,Gt+=Ue;return ze}function l(R,O,L,B){var K=Math.atan2(O,R),V=Math.atan2(B,L);return V>=K?V-K:2*Math.PI-(K-V)}function c(R,O,L,B,K,V,F,J){var W;if(e.cachesBoundsOfCurve&&(W=f.call(arguments),e.boundsOfCurveCache[W]))return e.boundsOfCurveCache[W];var ue=Math.sqrt,ce=Math.min,ie=Math.max,Q=Math.abs,me=[],le=[[],[]],H,re,ge,de,fe,Se,$,ne;re=6*R-12*L+6*K,H=-3*R+9*L-9*K+3*F,ge=3*L-3*R;for(var ee=0;ee<2;++ee){if(ee>0&&(re=6*O-12*B+6*V,H=-3*O+9*B-9*V+3*J,ge=3*B-3*O),Q(H)<1e-12){if(Q(re)<1e-12)continue;de=-ge/re,0<de&&de<1&&me.push(de);continue}$=re*re-4*ge*H,!($<0)&&(ne=ue($),fe=(-re+ne)/(2*H),0<fe&&fe<1&&me.push(fe),Se=(-re-ne)/(2*H),0<Se&&Se<1&&me.push(Se))}for(var we,Ce,ke=me.length,Ne=ke,Me;ke--;)de=me[ke],Me=1-de,we=Me*Me*Me*R+3*Me*Me*de*L+3*Me*de*de*K+de*de*de*F,le[0][ke]=we,Ce=Me*Me*Me*O+3*Me*Me*de*B+3*Me*de*de*V+de*de*de*J,le[1][ke]=Ce;le[0][Ne]=R,le[1][Ne]=O,le[0][Ne+1]=F,le[1][Ne+1]=J;var ze=[{x:ce.apply(null,le[0]),y:ce.apply(null,le[1])},{x:ie.apply(null,le[0]),y:ie.apply(null,le[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[W]=ze),ze}function m(R,O,L){for(var B=L[1],K=L[2],V=L[3],F=L[4],J=L[5],W=L[6],ue=L[7],ce=a(W-R,ue-O,B,K,F,J,V),ie=0,Q=ce.length;ie<Q;ie++)ce[ie][1]+=R,ce[ie][2]+=O,ce[ie][3]+=R,ce[ie][4]+=O,ce[ie][5]+=R,ce[ie][6]+=O;return ce}function y(R){var O=0,L=0,B=R.length,K=0,V=0,F,J,W,ue=[],ce,ie,Q;for(J=0;J<B;++J){switch(W=!1,F=R[J].slice(0),F[0]){case"l":F[0]="L",F[1]+=O,F[2]+=L;case"L":O=F[1],L=F[2];break;case"h":F[1]+=O;case"H":F[0]="L",F[2]=L,O=F[1];break;case"v":F[1]+=L;case"V":F[0]="L",L=F[1],F[1]=O,F[2]=L;break;case"m":F[0]="M",F[1]+=O,F[2]+=L;case"M":O=F[1],L=F[2],K=F[1],V=F[2];break;case"c":F[0]="C",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L,F[5]+=O,F[6]+=L;case"C":ie=F[3],Q=F[4],O=F[5],L=F[6];break;case"s":F[0]="S",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L;case"S":ce==="C"?(ie=2*O-ie,Q=2*L-Q):(ie=O,Q=L),O=F[3],L=F[4],F[0]="C",F[5]=F[3],F[6]=F[4],F[3]=F[1],F[4]=F[2],F[1]=ie,F[2]=Q,ie=F[3],Q=F[4];break;case"q":F[0]="Q",F[1]+=O,F[2]+=L,F[3]+=O,F[4]+=L;case"Q":ie=F[1],Q=F[2],O=F[3],L=F[4];break;case"t":F[0]="T",F[1]+=O,F[2]+=L;case"T":ce==="Q"?(ie=2*O-ie,Q=2*L-Q):(ie=O,Q=L),F[0]="Q",O=F[1],L=F[2],F[1]=ie,F[2]=Q,F[3]=O,F[4]=L;break;case"a":F[0]="A",F[6]+=O,F[7]+=L;case"A":W=!0,ue=ue.concat(m(O,L,F)),O=F[6],L=F[7];break;case"z":case"Z":O=K,L=V;break}W||ue.push(F),ce=F[0]}return ue}function p(R,O,L,B){return Math.sqrt((L-R)*(L-R)+(B-O)*(B-O))}function w(R){return R*R*R}function C(R){return 3*R*R*(1-R)}function T(R){return 3*R*(1-R)*(1-R)}function j(R){return(1-R)*(1-R)*(1-R)}function E(R,O,L,B,K,V,F,J){return function(W){var ue=w(W),ce=C(W),ie=T(W),Q=j(W);return{x:F*ue+K*ce+L*ie+R*Q,y:J*ue+V*ce+B*ie+O*Q}}}function M(R,O,L,B,K,V,F,J){return function(W){var ue=1-W,ce=3*ue*ue*(L-R)+6*ue*W*(K-L)+3*W*W*(F-K),ie=3*ue*ue*(B-O)+6*ue*W*(V-B)+3*W*W*(J-V);return Math.atan2(ie,ce)}}function D(R){return R*R}function A(R){return 2*R*(1-R)}function I(R){return(1-R)*(1-R)}function X(R,O,L,B,K,V){return function(F){var J=D(F),W=A(F),ue=I(F);return{x:K*J+L*W+R*ue,y:V*J+B*W+O*ue}}}function oe(R,O,L,B,K,V){return function(F){var J=1-F,W=2*J*(L-R)+2*F*(K-L),ue=2*J*(B-O)+2*F*(V-B);return Math.atan2(ue,W)}}function Z(R,O,L){var B={x:O,y:L},K,V=0,F;for(F=1;F<=100;F+=1)K=R(F/100),V+=p(B.x,B.y,K.x,K.y),B=K;return V}function ae(R,O){for(var L=0,B=0,K=R.iterator,V={x:R.x,y:R.y},F,J,W=.01,ue=R.angleFinder,ce;B<O&&W>1e-4;)F=K(L),ce=L,J=p(V.x,V.y,F.x,F.y),J+B>O?(L-=W,W/=2):(V=F,L+=W,B+=J);return F.angle=ue(ce),F}function te(R){for(var O=0,L=R.length,B,K=0,V=0,F=0,J=0,W=[],ue,ce,ie,Q=0;Q<L;Q++){switch(B=R[Q],ce={x:K,y:V,command:B[0]},B[0]){case"M":ce.length=0,F=K=B[1],J=V=B[2];break;case"L":ce.length=p(K,V,B[1],B[2]),K=B[1],V=B[2];break;case"C":ue=E(K,V,B[1],B[2],B[3],B[4],B[5],B[6]),ie=M(K,V,B[1],B[2],B[3],B[4],B[5],B[6]),ce.iterator=ue,ce.angleFinder=ie,ce.length=Z(ue,K,V),K=B[5],V=B[6];break;case"Q":ue=X(K,V,B[1],B[2],B[3],B[4]),ie=oe(K,V,B[1],B[2],B[3],B[4]),ce.iterator=ue,ce.angleFinder=ie,ce.length=Z(ue,K,V),K=B[3],V=B[4];break;case"Z":case"z":ce.destX=F,ce.destY=J,ce.length=p(K,V,F,J),K=F,V=J;break}O+=ce.length,W.push(ce)}return W.push({length:O,x:K,y:V}),W}function G(R,O,L){L||(L=te(R));for(var B=0;O-L[B].length>0&&B<L.length-2;)O-=L[B].length,B++;var K=L[B],V=O/K.length,F=K.command,J=R[B],W;switch(F){case"M":return{x:K.x,y:K.y,angle:0};case"Z":case"z":return W=new e.Point(K.x,K.y).lerp(new e.Point(K.destX,K.destY),V),W.angle=Math.atan2(K.destY-K.y,K.destX-K.x),W;case"L":return W=new e.Point(K.x,K.y).lerp(new e.Point(J[1],J[2]),V),W.angle=Math.atan2(J[2]-K.y,J[1]-K.x),W;case"C":return ae(K,O);case"Q":return ae(K,O)}}function z(R){var O=[],L=[],B,K,V=e.rePathCommand,F="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",J="("+F+")"+e.commaWsp,W="([01])"+e.commaWsp+"?",ue=J+"?"+J+"?"+J+W+W+J+"?("+F+")",ce=new RegExp(ue,"g"),ie,Q,me;if(!R||!R.match)return O;me=R.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var le=0,H,re=me.length;le<re;le++){B=me[le],Q=B.slice(1).trim(),L.length=0;var ge=B.charAt(0);if(H=[ge],ge.toLowerCase()==="a")for(var de;de=ce.exec(Q);)for(var fe=1;fe<de.length;fe++)L.push(de[fe]);else for(;ie=V.exec(Q);)L.push(ie[0]);for(var fe=0,Se=L.length;fe<Se;fe++)K=parseFloat(L[fe]),isNaN(K)||H.push(K);var $=s[ge.toLowerCase()],ne=u[ge]||ge;if(H.length-1>$)for(var ee=1,we=H.length;ee<we;ee+=$)O.push([ge].concat(H.slice(ee,ee+$))),ge=ne;else O.push(H)}return O}function q(R,O){var L=[],B,K=new e.Point(R[0].x,R[0].y),V=new e.Point(R[1].x,R[1].y),F=R.length,J=1,W=0,ue=F>2;for(O=O||0,ue&&(J=R[2].x<V.x?-1:R[2].x===V.x?0:1,W=R[2].y<V.y?-1:R[2].y===V.y?0:1),L.push(["M",K.x-J*O,K.y-W*O]),B=1;B<F;B++){if(!K.eq(V)){var ce=K.midPointFrom(V);L.push(["Q",K.x,K.y,ce.x,ce.y])}K=R[B],B+1<R.length&&(V=R[B+1])}return ue&&(J=K.x>R[B-2].x?1:K.x===R[B-2].x?0:-1,W=K.y>R[B-2].y?1:K.y===R[B-2].y?0:-1),L.push(["L",K.x+J*O,K.y+W*O]),L}function Y(R,O,L){return L&&(O=e.util.multiplyTransformMatrices(O,[1,0,0,1,-L.x,-L.y])),R.map(function(B){for(var K=B.slice(0),V={},F=1;F<B.length-1;F+=2)V.x=B[F],V.y=B[F+1],V=e.util.transformPoint(V,O),K[F]=V.x,K[F+1]=V.y;return K})}e.util.joinPath=function(R){return R.map(function(O){return O.join(" ")}).join(" ")},e.util.parsePath=z,e.util.makePathSimpler=y,e.util.getSmoothPathFromPoints=q,e.util.getPathSegmentsInfo=te,e.util.getBoundsOfCurve=c,e.util.getPointOnPath=G,e.util.transformPath=Y}(),function(){var f=Array.prototype.slice;function s(c,m){for(var y=f.call(arguments,2),p=[],w=0,C=c.length;w<C;w++)p[w]=y.length?c[w][m].apply(c[w],y):c[w][m].call(c[w]);return p}function u(c,m){return l(c,m,function(y,p){return y>=p})}function h(c,m){return l(c,m,function(y,p){return y<p})}function a(c,m){for(var y=c.length;y--;)c[y]=m;return c}function l(c,m,y){if(!(!c||c.length===0)){var p=c.length-1,w=m?c[p][m]:c[p];if(m)for(;p--;)y(c[p][m],w)&&(w=c[p][m]);else for(;p--;)y(c[p],w)&&(w=c[p]);return w}}e.util.array={fill:a,invoke:s,min:h,max:u}}(),function(){function f(u,h,a){if(a)if(!e.isLikelyNode&&h instanceof Element)u=h;else if(h instanceof Array){u=[];for(var l=0,c=h.length;l<c;l++)u[l]=f({},h[l],a)}else if(h&&typeof h=="object")for(var m in h)m==="canvas"||m==="group"?u[m]=null:h.hasOwnProperty(m)&&(u[m]=f({},h[m],a));else u=h;else for(var m in h)u[m]=h[m];return u}function s(u,h){return f({},u,h)}e.util.object={extend:f,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function f(l){return l.replace(/-+(.)?/g,function(c,m){return m?m.toUpperCase():""})}function s(l,c){return l.charAt(0).toUpperCase()+(c?l.slice(1):l.slice(1).toLowerCase())}function u(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(l){var c=0,m,y=[];for(c=0,m;c<l.length;c++)(m=a(l,c))!==!1&&y.push(m);return y}function a(l,c){var m=l.charCodeAt(c);if(isNaN(m))return"";if(m<55296||m>57343)return l.charAt(c);if(55296<=m&&m<=56319){if(l.length<=c+1)throw"High surrogate without following low surrogate";var y=l.charCodeAt(c+1);if(56320>y||y>57343)throw"High surrogate without following low surrogate";return l.charAt(c)+l.charAt(c+1)}if(c===0)throw"Low surrogate without preceding high surrogate";var p=l.charCodeAt(c-1);if(55296>p||p>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:f,capitalize:s,escapeXml:u,graphemeSplit:h}}(),function(){var f=Array.prototype.slice,s=function(){},u=function(){for(var m in{toString:1})if(m==="toString")return!1;return!0}(),h=function(m,y,p){for(var w in y)w in m.prototype&&typeof m.prototype[w]=="function"&&(y[w]+"").indexOf("callSuper")>-1?m.prototype[w]=function(C){return function(){var T=this.constructor.superclass;this.constructor.superclass=p;var j=y[C].apply(this,arguments);if(this.constructor.superclass=T,C!=="initialize")return j}}(w):m.prototype[w]=y[w],u&&(y.toString!==Object.prototype.toString&&(m.prototype.toString=y.toString),y.valueOf!==Object.prototype.valueOf&&(m.prototype.valueOf=y.valueOf))};function a(){}function l(m){for(var y=null,p=this;p.constructor.superclass;){var w=p.constructor.superclass.prototype[m];if(p[m]!==w){y=w;break}p=p.constructor.superclass.prototype}return y?arguments.length>1?y.apply(this,f.call(arguments,1)):y.call(this):console.log("tried to callSuper "+m+", method not found in prototype chain",this)}function c(){var m=null,y=f.call(arguments,0);typeof y[0]=="function"&&(m=y.shift());function p(){this.initialize.apply(this,arguments)}p.superclass=m,p.subclasses=[],m&&(a.prototype=m.prototype,p.prototype=new a,m.subclasses.push(p));for(var w=0,C=y.length;w<C;w++)h(p,y[w],m);return p.prototype.initialize||(p.prototype.initialize=s),p.prototype.constructor=p,p.prototype.callSuper=l,p}e.util.createClass=c}(),function(){var f=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(h,a,l,c){h&&h.addEventListener(a,l,f?!1:c)},e.util.removeListener=function(h,a,l,c){h&&h.removeEventListener(a,l,f?!1:c)};function u(h){var a=h.changedTouches;return a&&a[0]?a[0]:h}e.util.getPointer=function(h){var a=h.target,l=e.util.getScrollLeftTop(a),c=u(h);return{x:c.clientX+l.left,y:c.clientY+l.top}},e.util.isTouchEvent=function(h){return s.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function f(c,m){var y=c.style;if(!y)return c;if(typeof m=="string")return c.style.cssText+=";"+m,m.indexOf("opacity")>-1?l(c,m.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var p in m)if(p==="opacity")l(c,m[p]);else{var w=p==="float"||p==="cssFloat"?typeof y.styleFloat>"u"?"cssFloat":"styleFloat":p;y.setProperty(w,m[p])}return c}var s=e.document.createElement("div"),u=typeof s.style.opacity=="string",h=typeof s.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(c){return c};u?l=function(c,m){return c.style.opacity=m,c}:h&&(l=function(c,m){var y=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(y.zoom=1),a.test(y.filter)?(m=m>=.9999?"":"alpha(opacity="+m*100+")",y.filter=y.filter.replace(a,m)):y.filter+=" alpha(opacity="+m*100+")",c}),e.util.setStyle=f}(),function(){var f=Array.prototype.slice;function s(j){return typeof j=="string"?e.document.getElementById(j):j}var u,h=function(j){return f.call(j,0)};try{u=h(e.document.childNodes)instanceof Array}catch{}u||(h=function(j){for(var E=new Array(j.length),M=j.length;M--;)E[M]=j[M];return E});function a(j,E){var M=e.document.createElement(j);for(var D in E)D==="class"?M.className=E[D]:D==="for"?M.htmlFor=E[D]:M.setAttribute(D,E[D]);return M}function l(j,E){j&&(" "+j.className+" ").indexOf(" "+E+" ")===-1&&(j.className+=(j.className?" ":"")+E)}function c(j,E,M){return typeof E=="string"&&(E=a(E,M)),j.parentNode&&j.parentNode.replaceChild(E,j),E.appendChild(j),E}function m(j){for(var E=0,M=0,D=e.document.documentElement,A=e.document.body||{scrollLeft:0,scrollTop:0};j&&(j.parentNode||j.host)&&(j=j.parentNode||j.host,j===e.document?(E=A.scrollLeft||D.scrollLeft||0,M=A.scrollTop||D.scrollTop||0):(E+=j.scrollLeft||0,M+=j.scrollTop||0),!(j.nodeType===1&&j.style.position==="fixed")););return{left:E,top:M}}function y(j){var E,M=j&&j.ownerDocument,D={left:0,top:0},A={left:0,top:0},I,X={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!M)return A;for(var oe in X)A[X[oe]]+=parseInt(p(j,oe),10)||0;return E=M.documentElement,typeof j.getBoundingClientRect<"u"&&(D=j.getBoundingClientRect()),I=m(j),{left:D.left+I.left-(E.clientLeft||0)+A.left,top:D.top+I.top-(E.clientTop||0)+A.top}}var p;e.document.defaultView&&e.document.defaultView.getComputedStyle?p=function(j,E){var M=e.document.defaultView.getComputedStyle(j,null);return M?M[E]:void 0}:p=function(j,E){var M=j.style[E];return!M&&j.currentStyle&&(M=j.currentStyle[E]),M},function(){var j=e.document.documentElement.style,E="userSelect"in j?"userSelect":"MozUserSelect"in j?"MozUserSelect":"WebkitUserSelect"in j?"WebkitUserSelect":"KhtmlUserSelect"in j?"KhtmlUserSelect":"";function M(A){return typeof A.onselectstart<"u"&&(A.onselectstart=e.util.falseFunction),E?A.style[E]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function D(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),E?A.style[E]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}e.util.makeElementUnselectable=M,e.util.makeElementSelectable=D}();function w(j){var E=e.jsdomImplForWrapper(j);return E._canvas||E._image}function C(j){if(e.isLikelyNode){var E=e.jsdomImplForWrapper(j);E&&(E._image=null,E._canvas=null,E._currentSrc=null,E._attributes=null,E._classList=null)}}function T(j,E){j.imageSmoothingEnabled=j.imageSmoothingEnabled||j.webkitImageSmoothingEnabled||j.mozImageSmoothingEnabled||j.msImageSmoothingEnabled||j.oImageSmoothingEnabled,j.imageSmoothingEnabled=E}e.util.setImageSmoothing=T,e.util.getById=s,e.util.toArray=h,e.util.addClass=l,e.util.makeElement=a,e.util.wrapElement=c,e.util.getScrollLeftTop=m,e.util.getElementOffset=y,e.util.getNodeCanvas=w,e.util.cleanUpJsdomNode=C}(),function(){function f(h,a){return h+(/\?/.test(h)?"&":"?")+a}function s(){}function u(h,a){a||(a={});var l=a.method?a.method.toUpperCase():"GET",c=a.onComplete||function(){},m=new e.window.XMLHttpRequest,y=a.body||a.parameters;return m.onreadystatechange=function(){m.readyState===4&&(c(m),m.onreadystatechange=s)},l==="GET"&&(y=null,typeof a.parameters=="string"&&(h=f(h,a.parameters))),m.open(l,h,!0),(l==="POST"||l==="PUT")&&m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(y),m}e.util.request=u}(),e.log=console.log,e.warn=console.warn,function(){var f=e.util.object.extend,s=e.util.object.clone,u=[];e.util.object.extend(u,{cancelAll:function(){var w=this.splice(0);return w.forEach(function(C){C.cancel()}),w},cancelByCanvas:function(w){if(!w)return[];var C=this.filter(function(T){return typeof T.target=="object"&&T.target.canvas===w});return C.forEach(function(T){T.cancel()}),C},cancelByTarget:function(w){var C=this.findAnimationsByTarget(w);return C.forEach(function(T){T.cancel()}),C},findAnimationIndex:function(w){return this.indexOf(this.findAnimation(w))},findAnimation:function(w){return this.find(function(C){return C.cancel===w})},findAnimationsByTarget:function(w){return w?this.filter(function(C){return C.target===w}):[]}});function h(){return!1}function a(w,C,T,j){return-T*Math.cos(w/j*(Math.PI/2))+T+C}function l(w){w||(w={});var C=!1,T,j=function(){var E=e.runningAnimations.indexOf(T);return E>-1&&e.runningAnimations.splice(E,1)[0]};return T=f(s(w),{cancel:function(){return C=!0,j()},currentValue:"startValue"in w?w.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(T),y(function(E){var M=E||+new Date,D=w.duration||500,A=M+D,I,X=w.onChange||h,oe=w.abort||h,Z=w.onComplete||h,ae=w.easing||a,te="startValue"in w?w.startValue.length>0:!1,G="startValue"in w?w.startValue:0,z="endValue"in w?w.endValue:100,q=w.byValue||(te?G.map(function(Y,R){return z[R]-G[R]}):z-G);w.onStart&&w.onStart(),function Y(R){I=R||+new Date;var O=I>A?D:I-M,L=O/D,B=te?G.map(function(V,F){return ae(O,G[F],q[F],D)}):ae(O,G,q,D),K=Math.abs(te?(B[0]-G[0])/q[0]:(B-G)/q);if(T.currentValue=te?B.slice():B,T.completionRate=K,T.durationRate=L,!C){if(oe(B,K,L)){j();return}if(I>A){T.currentValue=te?z.slice():z,T.completionRate=1,T.durationRate=1,X(te?z.slice():z,1,1),Z(z,1,1),j();return}else X(B,K,L),y(Y)}}(M)}),T.cancel}var c=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(w){return e.window.setTimeout(w,1e3/60)},m=e.window.cancelAnimationFrame||e.window.clearTimeout;function y(){return c.apply(e.window,arguments)}function p(){return m.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=y,e.util.cancelAnimFrame=p,e.runningAnimations=u}(),function(){function f(u,h,a){var l="rgba("+parseInt(u[0]+a*(h[0]-u[0]),10)+","+parseInt(u[1]+a*(h[1]-u[1]),10)+","+parseInt(u[2]+a*(h[2]-u[2]),10);return l+=","+(u&&h?parseFloat(u[3]+a*(h[3]-u[3])):1),l+=")",l}function s(u,h,a,l){var c=new e.Color(u).getSource(),m=new e.Color(h).getSource(),y=l.onComplete,p=l.onChange;return l=l||{},e.util.animate(e.util.object.extend(l,{duration:a||500,startValue:c,endValue:m,byValue:m,easing:function(w,C,T,j){var E=l.colorEasing?l.colorEasing(w,j):1-Math.cos(w/j*(Math.PI/2));return f(C,T,E)},onComplete:function(w,C,T){if(y)return y(f(m,m,0),C,T)},onChange:function(w,C,T){if(p){if(Array.isArray(w))return p(f(w,w,0),C,T);p(w,C,T)}}}))}e.util.animateColor=s}(),function(){function f(R,O,L,B){return R<Math.abs(O)?(R=O,B=L/4):O===0&&R===0?B=L/(2*Math.PI)*Math.asin(1):B=L/(2*Math.PI)*Math.asin(O/R),{a:R,c:O,p:L,s:B}}function s(R,O,L){return R.a*Math.pow(2,10*(O-=1))*Math.sin((O*L-R.s)*(2*Math.PI)/R.p)}function u(R,O,L,B){return L*((R=R/B-1)*R*R+1)+O}function h(R,O,L,B){return R/=B/2,R<1?L/2*R*R*R+O:L/2*((R-=2)*R*R+2)+O}function a(R,O,L,B){return L*(R/=B)*R*R*R+O}function l(R,O,L,B){return-L*((R=R/B-1)*R*R*R-1)+O}function c(R,O,L,B){return R/=B/2,R<1?L/2*R*R*R*R+O:-L/2*((R-=2)*R*R*R-2)+O}function m(R,O,L,B){return L*(R/=B)*R*R*R*R+O}function y(R,O,L,B){return L*((R=R/B-1)*R*R*R*R+1)+O}function p(R,O,L,B){return R/=B/2,R<1?L/2*R*R*R*R*R+O:L/2*((R-=2)*R*R*R*R+2)+O}function w(R,O,L,B){return-L*Math.cos(R/B*(Math.PI/2))+L+O}function C(R,O,L,B){return L*Math.sin(R/B*(Math.PI/2))+O}function T(R,O,L,B){return-L/2*(Math.cos(Math.PI*R/B)-1)+O}function j(R,O,L,B){return R===0?O:L*Math.pow(2,10*(R/B-1))+O}function E(R,O,L,B){return R===B?O+L:L*(-Math.pow(2,-10*R/B)+1)+O}function M(R,O,L,B){return R===0?O:R===B?O+L:(R/=B/2,R<1?L/2*Math.pow(2,10*(R-1))+O:L/2*(-Math.pow(2,-10*--R)+2)+O)}function D(R,O,L,B){return-L*(Math.sqrt(1-(R/=B)*R)-1)+O}function A(R,O,L,B){return L*Math.sqrt(1-(R=R/B-1)*R)+O}function I(R,O,L,B){return R/=B/2,R<1?-L/2*(Math.sqrt(1-R*R)-1)+O:L/2*(Math.sqrt(1-(R-=2)*R)+1)+O}function X(R,O,L,B){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=B,R===1)return O+L;V||(V=B*.3);var J=f(F,L,V,K);return-s(J,R,B)+O}function oe(R,O,L,B){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=B,R===1)return O+L;V||(V=B*.3);var J=f(F,L,V,K);return J.a*Math.pow(2,-10*R)*Math.sin((R*B-J.s)*(2*Math.PI)/J.p)+J.c+O}function Z(R,O,L,B){var K=1.70158,V=0,F=L;if(R===0)return O;if(R/=B/2,R===2)return O+L;V||(V=B*(.3*1.5));var J=f(F,L,V,K);return R<1?-.5*s(J,R,B)+O:J.a*Math.pow(2,-10*(R-=1))*Math.sin((R*B-J.s)*(2*Math.PI)/J.p)*.5+J.c+O}function ae(R,O,L,B,K){return K===void 0&&(K=1.70158),L*(R/=B)*R*((K+1)*R-K)+O}function te(R,O,L,B,K){return K===void 0&&(K=1.70158),L*((R=R/B-1)*R*((K+1)*R+K)+1)+O}function G(R,O,L,B,K){return K===void 0&&(K=1.70158),R/=B/2,R<1?L/2*(R*R*(((K*=1.525)+1)*R-K))+O:L/2*((R-=2)*R*(((K*=1.525)+1)*R+K)+2)+O}function z(R,O,L,B){return L-q(B-R,0,L,B)+O}function q(R,O,L,B){return(R/=B)<1/2.75?L*(7.5625*R*R)+O:R<2/2.75?L*(7.5625*(R-=1.5/2.75)*R+.75)+O:R<2.5/2.75?L*(7.5625*(R-=2.25/2.75)*R+.9375)+O:L*(7.5625*(R-=2.625/2.75)*R+.984375)+O}function Y(R,O,L,B){return R<B/2?z(R*2,0,L,B)*.5+O:q(R*2-B,0,L,B)*.5+L*.5+O}e.util.ease={easeInQuad:function(R,O,L,B){return L*(R/=B)*R+O},easeOutQuad:function(R,O,L,B){return-L*(R/=B)*(R-2)+O},easeInOutQuad:function(R,O,L,B){return R/=B/2,R<1?L/2*R*R+O:-L/2*(--R*(R-2)-1)+O},easeInCubic:function(R,O,L,B){return L*(R/=B)*R*R+O},easeOutCubic:u,easeInOutCubic:h,easeInQuart:a,easeOutQuart:l,easeInOutQuart:c,easeInQuint:m,easeOutQuint:y,easeInOutQuint:p,easeInSine:w,easeOutSine:C,easeInOutSine:T,easeInExpo:j,easeOutExpo:E,easeInOutExpo:M,easeInCirc:D,easeOutCirc:A,easeInOutCirc:I,easeInElastic:X,easeOutElastic:oe,easeInOutElastic:Z,easeInBack:ae,easeOutBack:te,easeInOutBack:G,easeInBounce:z,easeOutBounce:q,easeInOutBounce:Y}}(),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.util.object.clone,a=s.util.toFixed,l=s.util.parseUnit,c=s.util.multiplyTransformMatrices,m=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],y=["symbol","image","marker","pattern","view","svg"],p=["pattern","defs","symbol","metadata","clipPath","mask","desc"],w=["symbol","g","a","svg","clipPath","defs"],C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},T={stroke:"strokeOpacity",fill:"fillOpacity"},j="font-size",E="clip-path";s.svgValidTagNamesRegEx=A(m),s.svgViewBoxElementsRegEx=A(y),s.svgInvalidAncestorsRegEx=A(p),s.svgValidParentsRegEx=A(w),s.cssRules={},s.gradientDefs={},s.clipPaths={};function M(V){return V in C?C[V]:V}function D(V,F,J,W){var ue=Array.isArray(F),ce;if((V==="fill"||V==="stroke")&&F==="none")F="";else{if(V==="strokeUniform")return F==="non-scaling-stroke";if(V==="strokeDashArray")F==="none"?F=null:F=F.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(V==="transformMatrix")J&&J.transformMatrix?F=c(J.transformMatrix,s.parseTransformAttribute(F)):F=s.parseTransformAttribute(F);else if(V==="visible")F=F!=="none"&&F!=="hidden",J&&J.visible===!1&&(F=!1);else if(V==="opacity")F=parseFloat(F),J&&typeof J.opacity<"u"&&(F*=J.opacity);else if(V==="textAnchor")F=F==="start"?"left":F==="end"?"right":"center";else if(V==="charSpacing")ce=l(F,W)/W*1e3;else if(V==="paintFirst"){var ie=F.indexOf("fill"),Q=F.indexOf("stroke"),F="fill";(ie>-1&&Q>-1&&Q<ie||ie===-1&&Q>-1)&&(F="stroke")}else{if(V==="href"||V==="xlink:href"||V==="font")return F;if(V==="imageSmoothing")return F==="optimizeQuality";ce=ue?F.map(l):l(F,W)}}return!ue&&isNaN(ce)?F:ce}function A(V){return new RegExp("^("+V.join("|")+")\\b","i")}function I(V){for(var F in T)if(!(typeof V[T[F]]>"u"||V[F]==="")){if(typeof V[F]>"u"){if(!s.Object.prototype[F])continue;V[F]=s.Object.prototype[F]}if(V[F].indexOf("url(")!==0){var J=new s.Color(V[F]);V[F]=J.setAlpha(a(J.getAlpha()*V[T[F]],2)).toRgba()}}return V}function X(V,F){var J,W=[],ue,ce,ie;for(ce=0,ie=F.length;ce<ie;ce++)J=F[ce],ue=V.getElementsByTagName(J),W=W.concat(Array.prototype.slice.call(ue));return W}s.parseTransformAttribute=function(){function V(ee,we){var Ce=s.util.cos(we[0]),ke=s.util.sin(we[0]),Ne=0,Me=0;we.length===3&&(Ne=we[1],Me=we[2]),ee[0]=Ce,ee[1]=ke,ee[2]=-ke,ee[3]=Ce,ee[4]=Ne-(Ce*Ne-ke*Me),ee[5]=Me-(ke*Ne+Ce*Me)}function F(ee,we){var Ce=we[0],ke=we.length===2?we[1]:we[0];ee[0]=Ce,ee[3]=ke}function J(ee,we,Ce){ee[Ce]=Math.tan(s.util.degreesToRadians(we[0]))}function W(ee,we){ee[4]=we[0],we.length===2&&(ee[5]=we[1])}var ue=s.iMatrix,ce=s.reNum,ie=s.commaWsp,Q="(?:(skewX)\\s*\\(\\s*("+ce+")\\s*\\))",me="(?:(skewY)\\s*\\(\\s*("+ce+")\\s*\\))",le="(?:(rotate)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+")"+ie+"("+ce+"))?\\s*\\))",H="(?:(scale)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+"))?\\s*\\))",re="(?:(translate)\\s*\\(\\s*("+ce+")(?:"+ie+"("+ce+"))?\\s*\\))",ge="(?:(matrix)\\s*\\(\\s*("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")"+ie+"("+ce+")\\s*\\))",de="(?:"+ge+"|"+re+"|"+H+"|"+le+"|"+Q+"|"+me+")",fe="(?:"+de+"(?:"+ie+"*"+de+")*)",Se="^\\s*(?:"+fe+"?)\\s*$",$=new RegExp(Se),ne=new RegExp(de,"g");return function(ee){var we=ue.concat(),Ce=[];if(!ee||ee&&!$.test(ee))return we;ee.replace(ne,function(Ne){var Me=new RegExp(de).exec(Ne).filter(function(nn){return!!nn}),ze=Me[1],Ue=Me.slice(2).map(parseFloat);switch(ze){case"translate":W(we,Ue);break;case"rotate":Ue[0]=s.util.degreesToRadians(Ue[0]),V(we,Ue);break;case"scale":F(we,Ue);break;case"skewX":J(we,Ue,2);break;case"skewY":J(we,Ue,1);break;case"matrix":we=Ue;break}Ce.push(we.concat()),we=ue.concat()});for(var ke=Ce[0];Ce.length>1;)Ce.shift(),ke=s.util.multiplyTransformMatrices(ke,Ce[0]);return ke}}();function oe(V,F){var J,W;V.replace(/;\s*$/,"").split(";").forEach(function(ue){var ce=ue.split(":");J=ce[0].trim().toLowerCase(),W=ce[1].trim(),F[J]=W})}function Z(V,F){var J,W;for(var ue in V)typeof V[ue]>"u"||(J=ue.toLowerCase(),W=V[ue],F[J]=W)}function ae(V,F){var J={};for(var W in s.cssRules[F])if(te(V,W.split(" ")))for(var ue in s.cssRules[F][W])J[ue]=s.cssRules[F][W][ue];return J}function te(V,F){var J,W=!0;return J=z(V,F.pop()),J&&F.length&&(W=G(V,F)),J&&W&&F.length===0}function G(V,F){for(var J,W=!0;V.parentNode&&V.parentNode.nodeType===1&&F.length;)W&&(J=F.pop()),V=V.parentNode,W=z(V,J);return F.length===0}function z(V,F){var J=V.nodeName,W=V.getAttribute("class"),ue=V.getAttribute("id"),ce,ie;if(ce=new RegExp("^"+J,"i"),F=F.replace(ce,""),ue&&F.length&&(ce=new RegExp("#"+ue+"(?![a-zA-Z\\-]+)","i"),F=F.replace(ce,"")),W&&F.length)for(W=W.split(" "),ie=W.length;ie--;)ce=new RegExp("\\."+W[ie]+"(?![a-zA-Z\\-]+)","i"),F=F.replace(ce,"");return F.length===0}function q(V,F){var J;if(V.getElementById&&(J=V.getElementById(F)),J)return J;var W,ue,ce,ie=V.getElementsByTagName("*");for(ue=0,ce=ie.length;ue<ce;ue++)if(W=ie[ue],F===W.getAttribute("id"))return W}function Y(V){for(var F=X(V,["use","svg:use"]),J=0;F.length&&J<F.length;){var W=F[J],ue=W.getAttribute("xlink:href")||W.getAttribute("href");if(ue===null)return;var ce=ue.slice(1),ie=W.getAttribute("x")||0,Q=W.getAttribute("y")||0,me=q(V,ce).cloneNode(!0),le=(me.getAttribute("transform")||"")+" translate("+ie+", "+Q+")",H,re=F.length,ge,de,fe,Se,$=s.svgNS;if(O(me),/^svg$/i.test(me.nodeName)){var ne=me.ownerDocument.createElementNS($,"g");for(de=0,fe=me.attributes,Se=fe.length;de<Se;de++)ge=fe.item(de),ne.setAttributeNS($,ge.nodeName,ge.nodeValue);for(;me.firstChild;)ne.appendChild(me.firstChild);me=ne}for(de=0,fe=W.attributes,Se=fe.length;de<Se;de++)ge=fe.item(de),!(ge.nodeName==="x"||ge.nodeName==="y"||ge.nodeName==="xlink:href"||ge.nodeName==="href")&&(ge.nodeName==="transform"?le=ge.nodeValue+" "+le:me.setAttribute(ge.nodeName,ge.nodeValue));me.setAttribute("transform",le),me.setAttribute("instantiated_by_use","1"),me.removeAttribute("id"),H=W.parentNode,H.replaceChild(me,W),F.length===re&&J++}}var R=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function O(V){if(!s.svgViewBoxElementsRegEx.test(V.nodeName))return{};var F=V.getAttribute("viewBox"),J=1,W=1,ue=0,ce=0,ie,Q,me,le,H=V.getAttribute("width"),re=V.getAttribute("height"),ge=V.getAttribute("x")||0,de=V.getAttribute("y")||0,fe=V.getAttribute("preserveAspectRatio")||"",Se=!F||!(F=F.match(R)),$=!H||!re||H==="100%"||re==="100%",ne=Se&&$,ee={},we="",Ce=0,ke=0;if(ee.width=0,ee.height=0,ee.toBeParsed=ne,Se&&(ge||de)&&V.parentNode&&V.parentNode.nodeName!=="#document"&&(we=" translate("+l(ge)+" "+l(de)+") ",me=(V.getAttribute("transform")||"")+we,V.setAttribute("transform",me),V.removeAttribute("x"),V.removeAttribute("y")),ne)return ee;if(Se)return ee.width=l(H),ee.height=l(re),ee;if(ue=-parseFloat(F[1]),ce=-parseFloat(F[2]),ie=parseFloat(F[3]),Q=parseFloat(F[4]),ee.minX=ue,ee.minY=ce,ee.viewBoxWidth=ie,ee.viewBoxHeight=Q,$?(ee.width=ie,ee.height=Q):(ee.width=l(H),ee.height=l(re),J=ee.width/ie,W=ee.height/Q),fe=s.util.parsePreserveAspectRatioAttribute(fe),fe.alignX!=="none"&&(fe.meetOrSlice==="meet"&&(W=J=J>W?W:J),fe.meetOrSlice==="slice"&&(W=J=J>W?J:W),Ce=ee.width-ie*J,ke=ee.height-Q*J,fe.alignX==="Mid"&&(Ce/=2),fe.alignY==="Mid"&&(ke/=2),fe.alignX==="Min"&&(Ce=0),fe.alignY==="Min"&&(ke=0)),J===1&&W===1&&ue===0&&ce===0&&ge===0&&de===0)return ee;if((ge||de)&&V.parentNode.nodeName!=="#document"&&(we=" translate("+l(ge)+" "+l(de)+") "),me=we+" matrix("+J+" 0 0 "+W+" "+(ue*J+Ce)+" "+(ce*W+ke)+") ",V.nodeName==="svg"){for(le=V.ownerDocument.createElementNS(s.svgNS,"g");V.firstChild;)le.appendChild(V.firstChild);V.appendChild(le)}else le=V,le.removeAttribute("x"),le.removeAttribute("y"),me=le.getAttribute("transform")+me;return le.setAttribute("transform",me),ee}function L(V,F){for(;V&&(V=V.parentNode);)if(V.nodeName&&F.test(V.nodeName.replace("svg:",""))&&!V.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(V,F,J,W){if(V){Y(V);var ue=s.Object.__uid++,ce,ie,Q=O(V),me=s.util.toArray(V.getElementsByTagName("*"));if(Q.crossOrigin=W&&W.crossOrigin,Q.svgUid=ue,me.length===0&&s.isLikelyNode){me=V.selectNodes('//*[name(.)!="svg"]');var le=[];for(ce=0,ie=me.length;ce<ie;ce++)le[ce]=me[ce];me=le}var H=me.filter(function(ge){return O(ge),s.svgValidTagNamesRegEx.test(ge.nodeName.replace("svg:",""))&&!L(ge,s.svgInvalidAncestorsRegEx)});if(!H||H&&!H.length){F&&F([],{});return}var re={};me.filter(function(ge){return ge.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ge){var de=ge.getAttribute("id");re[de]=s.util.toArray(ge.getElementsByTagName("*")).filter(function(fe){return s.svgValidTagNamesRegEx.test(fe.nodeName.replace("svg:",""))})}),s.gradientDefs[ue]=s.getGradientDefs(V),s.cssRules[ue]=s.getCSSRules(V),s.clipPaths[ue]=re,s.parseElements(H,function(ge,de){F&&(F(ge,Q,de,me),delete s.gradientDefs[ue],delete s.cssRules[ue],delete s.clipPaths[ue])},h(Q),J,W)}};function B(V,F){var J=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],W="xlink:href",ue=F.getAttribute(W).slice(1),ce=q(V,ue);if(ce&&ce.getAttribute(W)&&B(V,ce),J.forEach(function(Q){ce&&!F.hasAttribute(Q)&&ce.hasAttribute(Q)&&F.setAttribute(Q,ce.getAttribute(Q))}),!F.children.length)for(var ie=ce.cloneNode(!0);ie.firstChild;)F.appendChild(ie.firstChild);F.removeAttribute(W)}var K=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");u(s,{parseFontDeclaration:function(V,F){var J=V.match(K);if(J){var W=J[1],ue=J[3],ce=J[4],ie=J[5],Q=J[6];W&&(F.fontStyle=W),ue&&(F.fontWeight=isNaN(parseFloat(ue))?ue:parseFloat(ue)),ce&&(F.fontSize=l(ce)),Q&&(F.fontFamily=Q),ie&&(F.lineHeight=ie==="normal"?1:ie)}},getGradientDefs:function(V){var F=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],J=X(V,F),W,ue=0,ce={};for(ue=J.length;ue--;)W=J[ue],W.getAttribute("xlink:href")&&B(V,W),ce[W.getAttribute("id")]=W;return ce},parseAttributes:function(V,F,J){if(V){var W,ue={},ce,ie;typeof J>"u"&&(J=V.getAttribute("svgUid")),V.parentNode&&s.svgValidParentsRegEx.test(V.parentNode.nodeName)&&(ue=s.parseAttributes(V.parentNode,F,J));var Q=F.reduce(function(fe,Se){return W=V.getAttribute(Se),W&&(fe[Se]=W),fe},{}),me=u(ae(V,J),s.parseStyleAttribute(V));Q=u(Q,me),me[E]&&V.setAttribute(E,me[E]),ce=ie=ue.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,Q[j]&&(Q[j]=ce=l(Q[j],ie));var le,H,re={};for(var ge in Q)le=M(ge),H=D(le,Q[ge],ue,ce),re[le]=H;re&&re.font&&s.parseFontDeclaration(re.font,re);var de=u(ue,re);return s.svgValidParentsRegEx.test(V.nodeName)?de:I(de)}},parseElements:function(V,F,J,W,ue){new s.ElementsParser(V,F,J,W,ue).parse()},parseStyleAttribute:function(V){var F={},J=V.getAttribute("style");return J&&(typeof J=="string"?oe(J,F):Z(J,F)),F},parsePointsAttribute:function(V){if(!V)return null;V=V.replace(/,/g," ").trim(),V=V.split(/\s+/);var F=[],J,W;for(J=0,W=V.length;J<W;J+=2)F.push({x:parseFloat(V[J]),y:parseFloat(V[J+1])});return F},getCSSRules:function(V){var F=V.getElementsByTagName("style"),J,W,ue={},ce;for(J=0,W=F.length;J<W;J++){var ie=F[J].textContent;ie=ie.replace(/\/\*[\s\S]*?\*\//g,""),ie.trim()!==""&&(ce=ie.split("}"),ce=ce.filter(function(Q){return Q.trim()}),ce.forEach(function(Q){var me=Q.split("{"),le={},H=me[1].trim(),re=H.split(";").filter(function(Se){return Se.trim()});for(J=0,W=re.length;J<W;J++){var ge=re[J].split(":"),de=ge[0].trim(),fe=ge[1].trim();le[de]=fe}Q=me[0].trim(),Q.split(",").forEach(function(Se){Se=Se.replace(/^svg/i,"").trim(),Se!==""&&(ue[Se]?s.util.object.extend(ue[Se],le):ue[Se]=s.util.object.clone(le))})}))}return ue},loadSVGFromURL:function(V,F,J,W){V=V.replace(/^\n\s*/,"").trim(),new s.util.request(V,{method:"get",onComplete:ue});function ue(ce){var ie=ce.responseXML;if(!ie||!ie.documentElement)return F&&F(null),!1;s.parseSVGDocument(ie.documentElement,function(Q,me,le,H){F&&F(Q,me,le,H)},J,W)}},loadSVGFromString:function(V,F,J,W){var ue=new s.window.DOMParser,ce=ue.parseFromString(V.trim(),"text/xml");s.parseSVGDocument(ce.documentElement,function(ie,Q,me,le){F(ie,Q,me,le)},J,W)}})}(t),e.ElementsParser=function(f,s,u,h,a,l){this.elements=f,this.callback=s,this.options=u,this.reviver=h,this.svgUid=u&&u.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var s=this;this.elements.forEach(function(u,h){u.setAttribute("svgUid",s.svgUid),s.createObject(u,h)})},f.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},f.createObject=function(s,u){var h=this.findTag(s);if(h&&h.fromElement)try{h.fromElement(s,this.createCallback(u,s),this.options)}catch(a){e.log(a)}else this.checkIfDone()},f.createCallback=function(s,u){var h=this;return function(a){var l;h.resolveGradient(a,u,"fill"),h.resolveGradient(a,u,"stroke"),a instanceof e.Image&&a._originalElement&&(l=a.parsePreserveAspectRatioAttribute(u)),a._removeTransformMatrix(l),h.resolveClipPath(a,u),h.reviver&&h.reviver(u,a),h.instances[s]=a,h.checkIfDone()}},f.extractPropertyDefinition=function(s,u,h){var a=s[u],l=this.regexUrl;if(l.test(a)){l.lastIndex=0;var c=l.exec(a)[1];return l.lastIndex=0,e[h][this.svgUid][c]}},f.resolveGradient=function(s,u,h){var a=this.extractPropertyDefinition(s,h,"gradientDefs");if(a){var l=u.getAttribute(h+"-opacity"),c=e.Gradient.fromElement(a,s,l,this.options);s.set(h,c)}},f.createClipPathCallback=function(s,u){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,u.push(h)}},f.resolveClipPath=function(s,u){var h=this.extractPropertyDefinition(s,"clipPath","clipPaths"),a,l,c,m,y,p;if(h){m=[],c=e.util.invertTransform(s.calcTransformMatrix());for(var w=h[0].parentNode,C=u;C.parentNode&&C.getAttribute("clip-path")!==s.clipPath;)C=C.parentNode;C.parentNode.appendChild(w);for(var T=0;T<h.length;T++)a=h[T],l=this.findTag(a),l.fromElement(a,this.createClipPathCallback(s,m),this.options);m.length===1?h=m[0]:h=new e.Group(m),y=e.util.multiplyTransformMatrices(c,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,C);var p=e.util.qrDecompose(y);h.flipX=!1,h.flipY=!1,h.set("scaleX",p.scaleX),h.set("scaleY",p.scaleY),h.angle=p.angle,h.skewX=p.skewX,h.skewY=0,h.setPositionByOrigin({x:p.translateX,y:p.translateY},"center","center"),s.clipPath=h}else delete s.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(f){var s=f.fabric||(f.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=u;function u(h,a){this.x=h,this.y=a}u.prototype={type:"point",constructor:u,add:function(h){return new u(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new u(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new u(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new u(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new u(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new u(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new u(this.x+(h.x-this.x)*a,this.y+(h.y-this.y)*a)},distanceFrom:function(h){var a=this.x-h.x,l=this.y-h.y;return Math.sqrt(a*a+l*l)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new u(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new u(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,a){return this.x=h,this.y=a,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var a=this.x,l=this.y;this.x=h.x,this.y=h.y,h.x=a,h.y=l},clone:function(){return new u(this.x,this.y)}}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function u(h){this.status=h,this.points=[]}s.Intersection=u,s.Intersection.prototype={constructor:u,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},s.Intersection.intersectLineLine=function(h,a,l,c){var m,y=(c.x-l.x)*(h.y-l.y)-(c.y-l.y)*(h.x-l.x),p=(a.x-h.x)*(h.y-l.y)-(a.y-h.y)*(h.x-l.x),w=(c.y-l.y)*(a.x-h.x)-(c.x-l.x)*(a.y-h.y);if(w!==0){var C=y/w,T=p/w;0<=C&&C<=1&&0<=T&&T<=1?(m=new u("Intersection"),m.appendPoint(new s.Point(h.x+C*(a.x-h.x),h.y+C*(a.y-h.y)))):m=new u}else y===0||p===0?m=new u("Coincident"):m=new u("Parallel");return m},s.Intersection.intersectLinePolygon=function(h,a,l){var c=new u,m=l.length,y,p,w,C;for(C=0;C<m;C++)y=l[C],p=l[(C+1)%m],w=u.intersectLineLine(h,a,y,p),c.appendPoints(w.points);return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonPolygon=function(h,a){var l=new u,c=h.length,m;for(m=0;m<c;m++){var y=h[m],p=h[(m+1)%c],w=u.intersectLinePolygon(y,p,a);l.appendPoints(w.points)}return l.points.length>0&&(l.status="Intersection"),l},s.Intersection.intersectPolygonRectangle=function(h,a,l){var c=a.min(l),m=a.max(l),y=new s.Point(m.x,c.y),p=new s.Point(c.x,m.y),w=u.intersectLinePolygon(c,y,h),C=u.intersectLinePolygon(y,m,h),T=u.intersectLinePolygon(m,p,h),j=u.intersectLinePolygon(p,c,h),E=new u;return E.appendPoints(w.points),E.appendPoints(C.points),E.appendPoints(T.points),E.appendPoints(j.points),E.points.length>0&&(E.status="Intersection"),E}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function u(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}s.Color=u,s.Color.prototype={_tryParsingColor:function(a){var l;a in u.colorNameMap&&(a=u.colorNameMap[a]),a==="transparent"&&(l=[255,255,255,0]),l||(l=u.sourceFromHex(a)),l||(l=u.sourceFromRgb(a)),l||(l=u.sourceFromHsl(a)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(a,l,c){a/=255,l/=255,c/=255;var m,y,p,w=s.util.array.max([a,l,c]),C=s.util.array.min([a,l,c]);if(p=(w+C)/2,w===C)m=y=0;else{var T=w-C;switch(y=p>.5?T/(2-w-C):T/(w+C),w){case a:m=(l-c)/T+(l<c?6:0);break;case l:m=(c-a)/T+2;break;case c:m=(a-l)/T+4;break}m/=6}return[Math.round(m*360),Math.round(y*100),Math.round(p*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),l,c,m;return l=a[0].toString(16),l=l.length===1?"0"+l:l,c=a[1].toString(16),c=c.length===1?"0"+c:c,m=a[2].toString(16),m=m.length===1?"0"+m:m,l.toUpperCase()+c.toUpperCase()+m.toUpperCase()},toHexa:function(){var a=this.getSource(),l;return l=Math.round(a[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var l=this.getSource();return l[3]=a,this.setSource(l),this},toGrayscale:function(){var a=this.getSource(),l=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),c=a[3];return this.setSource([l,l,l,c]),this},toBlackWhite:function(a){var l=this.getSource(),c=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),m=l[3];return a=a||127,c=Number(c)<Number(a)?0:255,this.setSource([c,c,c,m]),this},overlayWith:function(a){a instanceof u||(a=new u(a));var l=[],c=this.getAlpha(),m=.5,y=this.getSource(),p=a.getSource(),w;for(w=0;w<3;w++)l.push(Math.round(y[w]*(1-m)+p[w]*m));return l[3]=c,this.setSource(l),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(a,l,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(l-a)*6*c:c<1/2?l:c<2/3?a+(l-a)*(2/3-c)*6:a}s.Color.fromRgb=function(a){return u.fromSource(u.sourceFromRgb(a))},s.Color.sourceFromRgb=function(a){var l=a.match(u.reRGBa);if(l){var c=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),m=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),y=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(c,10),parseInt(m,10),parseInt(y,10),l[4]?parseFloat(l[4]):1]}},s.Color.fromRgba=u.fromRgb,s.Color.fromHsl=function(a){return u.fromSource(u.sourceFromHsl(a))},s.Color.sourceFromHsl=function(a){var l=a.match(u.reHSLa);if(l){var c=(parseFloat(l[1])%360+360)%360/360,m=parseFloat(l[2])/(/%$/.test(l[2])?100:1),y=parseFloat(l[3])/(/%$/.test(l[3])?100:1),p,w,C;if(m===0)p=w=C=y;else{var T=y<=.5?y*(m+1):y+m-y*m,j=y*2-T;p=h(j,T,c+1/3),w=h(j,T,c),C=h(j,T,c-1/3)}return[Math.round(p*255),Math.round(w*255),Math.round(C*255),l[4]?parseFloat(l[4]):1]}},s.Color.fromHsla=u.fromHsl,s.Color.fromHex=function(a){return u.fromSource(u.sourceFromHex(a))},s.Color.sourceFromHex=function(a){if(a.match(u.reHex)){var l=a.slice(a.indexOf("#")+1),c=l.length===3||l.length===4,m=l.length===8||l.length===4,y=c?l.charAt(0)+l.charAt(0):l.substring(0,2),p=c?l.charAt(1)+l.charAt(1):l.substring(2,4),w=c?l.charAt(2)+l.charAt(2):l.substring(4,6),C=m?c?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(y,16),parseInt(p,16),parseInt(w,16),parseFloat((parseInt(C,16)/255).toFixed(2))]}},s.Color.fromSource=function(a){var l=new u;return l.setSource(a),l}}(t),function(f){var s=f.fabric||(f.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],a={},l="left",c="top",m="right",y="bottom",p="center",w={top:y,bottom:c,left:m,right:l,center:p},C=s.util.radiansToDegrees,T=Math.sign||function(le){return(le>0)-(le<0)||+le};function j(le,H){var re=le.angle+C(Math.atan2(H.y,H.x))+360;return Math.round(re%360/45)}function E(le,H){var re=H.transform.target,ge=re.canvas,de=s.util.object.clone(H);de.target=re,ge&&ge.fire("object:"+le,de),re.fire(le,H)}function M(le,H){var re=H.canvas,ge=re.uniScaleKey,de=le[ge];return re.uniformScaling&&!de||!re.uniformScaling&&de}function D(le){return le.originX===p&&le.originY===p}function A(le,H,re){var ge=le.lockScalingX,de=le.lockScalingY;return!!(ge&&de||!H&&(ge||de)&&re||ge&&H==="x"||de&&H==="y")}function I(le,H,re){var ge="not-allowed",de=M(le,re),fe="";if(H.x!==0&&H.y===0?fe="x":H.x===0&&H.y!==0&&(fe="y"),A(re,fe,de))return ge;var Se=j(re,H);return u[Se]+"-resize"}function X(le,H,re){var ge="not-allowed";if(H.x!==0&&re.lockSkewingY||H.y!==0&&re.lockSkewingX)return ge;var de=j(re,H)%4;return h[de]+"-resize"}function oe(le,H,re){return le[re.canvas.altActionKey]?a.skewCursorStyleHandler(le,H,re):a.scaleCursorStyleHandler(le,H,re)}function Z(le,H,re){var ge=le[re.canvas.altActionKey];if(H.x===0)return ge?"skewX":"scaleY";if(H.y===0)return ge?"skewY":"scaleX"}function ae(le,H,re){return re.lockRotation?"not-allowed":H.cursorStyle}function te(le,H,re,ge){return{e:le,transform:H,pointer:{x:re,y:ge}}}function G(le){return function(H,re,ge,de){var fe=re.target,Se=fe.getCenterPoint(),$=fe.translateToOriginPoint(Se,re.originX,re.originY),ne=le(H,re,ge,de);return fe.setPositionByOrigin($,re.originX,re.originY),ne}}function z(le,H){return function(re,ge,de,fe){var Se=H(re,ge,de,fe);return Se&&E(le,te(re,ge,de,fe)),Se}}function q(le,H,re,ge,de){var fe=le.target,Se=fe.controls[le.corner],$=fe.canvas.getZoom(),ne=fe.padding/$,ee=fe.toLocalPoint(new s.Point(ge,de),H,re);return ee.x>=ne&&(ee.x-=ne),ee.x<=-ne&&(ee.x+=ne),ee.y>=ne&&(ee.y-=ne),ee.y<=ne&&(ee.y+=ne),ee.x-=Se.offsetX,ee.y-=Se.offsetY,ee}function Y(le){return le.flipX!==le.flipY}function R(le,H,re,ge,de){if(le[H]!==0){var fe=le._getTransformedDimensions()[ge],Se=de/fe*le[re];le.set(re,Se)}}function O(le,H,re,ge){var de=H.target,fe=de._getTransformedDimensions(0,de.skewY),Se=q(H,H.originX,H.originY,re,ge),$=Math.abs(Se.x*2)-fe.x,ne=de.skewX,ee;$<2?ee=0:(ee=C(Math.atan2($/de.scaleX,fe.y/de.scaleY)),H.originX===l&&H.originY===y&&(ee=-ee),H.originX===m&&H.originY===c&&(ee=-ee),Y(de)&&(ee=-ee));var we=ne!==ee;if(we){var Ce=de._getTransformedDimensions().y;de.set("skewX",ee),R(de,"skewY","scaleY","y",Ce)}return we}function L(le,H,re,ge){var de=H.target,fe=de._getTransformedDimensions(de.skewX,0),Se=q(H,H.originX,H.originY,re,ge),$=Math.abs(Se.y*2)-fe.y,ne=de.skewY,ee;$<2?ee=0:(ee=C(Math.atan2($/de.scaleY,fe.x/de.scaleX)),H.originX===l&&H.originY===y&&(ee=-ee),H.originX===m&&H.originY===c&&(ee=-ee),Y(de)&&(ee=-ee));var we=ne!==ee;if(we){var Ce=de._getTransformedDimensions().x;de.set("skewY",ee),R(de,"skewX","scaleX","x",Ce)}return we}function B(le,H,re,ge){var de=H.target,fe=de.skewX,Se,$=H.originY;if(de.lockSkewingX)return!1;if(fe===0){var ne=q(H,p,p,re,ge);ne.x>0?Se=l:Se=m}else fe>0&&(Se=$===c?l:m),fe<0&&(Se=$===c?m:l),Y(de)&&(Se=Se===l?m:l);H.originX=Se;var ee=z("skewing",G(O));return ee(le,H,re,ge)}function K(le,H,re,ge){var de=H.target,fe=de.skewY,Se,$=H.originX;if(de.lockSkewingY)return!1;if(fe===0){var ne=q(H,p,p,re,ge);ne.y>0?Se=c:Se=y}else fe>0&&(Se=$===l?c:y),fe<0&&(Se=$===l?y:c),Y(de)&&(Se=Se===c?y:c);H.originY=Se;var ee=z("skewing",G(L));return ee(le,H,re,ge)}function V(le,H,re,ge){var de=H,fe=de.target,Se=fe.translateToOriginPoint(fe.getCenterPoint(),de.originX,de.originY);if(fe.lockRotation)return!1;var $=Math.atan2(de.ey-Se.y,de.ex-Se.x),ne=Math.atan2(ge-Se.y,re-Se.x),ee=C(ne-$+de.theta),we=!0;if(fe.snapAngle>0){var Ce=fe.snapAngle,ke=fe.snapThreshold||Ce,Ne=Math.ceil(ee/Ce)*Ce,Me=Math.floor(ee/Ce)*Ce;Math.abs(ee-Me)<ke?ee=Me:Math.abs(ee-Ne)<ke&&(ee=Ne)}return ee<0&&(ee=360+ee),ee%=360,we=fe.angle!==ee,fe.angle=ee,we}function F(le,H,re,ge,de){de=de||{};var fe=H.target,Se=fe.lockScalingX,$=fe.lockScalingY,ne=de.by,ee,we,Ce,ke,Ne=M(le,fe),Me=A(fe,ne,Ne),ze,Ue,nn=H.gestureScale;if(Me)return!1;if(nn)we=H.scaleX*nn,Ce=H.scaleY*nn;else{if(ee=q(H,H.originX,H.originY,re,ge),ze=ne!=="y"?T(ee.x):1,Ue=ne!=="x"?T(ee.y):1,H.signX||(H.signX=ze),H.signY||(H.signY=Ue),fe.lockScalingFlip&&(H.signX!==ze||H.signY!==Ue))return!1;if(ke=fe._getTransformedDimensions(),Ne&&!ne){var Gt=Math.abs(ee.x)+Math.abs(ee.y),rn=H.original,$n=Math.abs(ke.x*rn.scaleX/fe.scaleX)+Math.abs(ke.y*rn.scaleY/fe.scaleY),Rn=Gt/$n;we=rn.scaleX*Rn,Ce=rn.scaleY*Rn}else we=Math.abs(ee.x*fe.scaleX/ke.x),Ce=Math.abs(ee.y*fe.scaleY/ke.y);D(H)&&(we*=2,Ce*=2),H.signX!==ze&&ne!=="y"&&(H.originX=w[H.originX],we*=-1,H.signX=ze),H.signY!==Ue&&ne!=="x"&&(H.originY=w[H.originY],Ce*=-1,H.signY=Ue)}var Pn=fe.scaleX,si=fe.scaleY;return ne?(ne==="x"&&fe.set("scaleX",we),ne==="y"&&fe.set("scaleY",Ce)):(!Se&&fe.set("scaleX",we),!$&&fe.set("scaleY",Ce)),Pn!==fe.scaleX||si!==fe.scaleY}function J(le,H,re,ge){return F(le,H,re,ge)}function W(le,H,re,ge){return F(le,H,re,ge,{by:"x"})}function ue(le,H,re,ge){return F(le,H,re,ge,{by:"y"})}function ce(le,H,re,ge){return le[H.target.canvas.altActionKey]?a.skewHandlerX(le,H,re,ge):a.scalingY(le,H,re,ge)}function ie(le,H,re,ge){return le[H.target.canvas.altActionKey]?a.skewHandlerY(le,H,re,ge):a.scalingX(le,H,re,ge)}function Q(le,H,re,ge){var de=H.target,fe=q(H,H.originX,H.originY,re,ge),Se=de.strokeWidth/(de.strokeUniform?de.scaleX:1),$=D(H)?2:1,ne=de.width,ee=Math.abs(fe.x*$/de.scaleX)-Se;return de.set("width",Math.max(ee,0)),ne!==ee}function me(le,H,re,ge){var de=H.target,fe=re-H.offsetX,Se=ge-H.offsetY,$=!de.get("lockMovementX")&&de.left!==fe,ne=!de.get("lockMovementY")&&de.top!==Se;return $&&de.set("left",fe),ne&&de.set("top",Se),($||ne)&&E("moving",te(le,H,re,ge)),$||ne}a.scaleCursorStyleHandler=I,a.skewCursorStyleHandler=X,a.scaleSkewCursorStyleHandler=oe,a.rotationWithSnapping=z("rotating",G(V)),a.scalingEqually=z("scaling",G(J)),a.scalingX=z("scaling",G(W)),a.scalingY=z("scaling",G(ue)),a.scalingYOrSkewingX=ce,a.scalingXOrSkewingY=ie,a.changeWidth=z("resizing",G(Q)),a.skewHandlerX=B,a.skewHandlerY=K,a.dragHandler=me,a.scaleOrSkewActionName=Z,a.rotationStyleHandler=ae,a.fireEvent=E,a.wrapWithFixedAnchor=G,a.wrapWithFireEvent=z,a.getLocalPoint=q,s.controlsUtils=a}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.degreesToRadians,h=s.controlsUtils;function a(c,m,y,p,w){p=p||{};var C=this.sizeX||p.cornerSize||w.cornerSize,T=this.sizeY||p.cornerSize||w.cornerSize,j=typeof p.transparentCorners<"u"?p.transparentCorners:w.transparentCorners,E=j?"stroke":"fill",M=!j&&(p.cornerStrokeColor||w.cornerStrokeColor),D=m,A=y,I;c.save(),c.fillStyle=p.cornerColor||w.cornerColor,c.strokeStyle=p.cornerStrokeColor||w.cornerStrokeColor,C>T?(I=C,c.scale(1,T/C),A=y*C/T):T>C?(I=T,c.scale(C/T,1),D=m*T/C):I=C,c.lineWidth=1,c.beginPath(),c.arc(D,A,I/2,0,2*Math.PI,!1),c[E](),M&&c.stroke(),c.restore()}function l(c,m,y,p,w){p=p||{};var C=this.sizeX||p.cornerSize||w.cornerSize,T=this.sizeY||p.cornerSize||w.cornerSize,j=typeof p.transparentCorners<"u"?p.transparentCorners:w.transparentCorners,E=j?"stroke":"fill",M=!j&&(p.cornerStrokeColor||w.cornerStrokeColor),D=C/2,A=T/2;c.save(),c.fillStyle=p.cornerColor||w.cornerColor,c.strokeStyle=p.cornerStrokeColor||w.cornerStrokeColor,c.lineWidth=1,c.translate(m,y),c.rotate(u(w.angle)),c[E+"Rect"](-D,-A,C,T),M&&c.strokeRect(-D,-A,C,T),c.restore()}h.renderCircleControl=a,h.renderSquareControl=l}(t),function(f){var s=f.fabric||(f.fabric={});function u(h){for(var a in h)this[a]=h[a]}s.Control=u,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,a){return a.cursorStyle},getActionName:function(h,a){return a.actionName},getVisibility:function(h,a){var l=h._controlsVisibility;return l&&typeof l[a]<"u"?l[a]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,a){var l=s.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},a);return l},calcCornerCoords:function(h,a,l,c,m){var y,p,w,C,T=m?this.touchSizeX:this.sizeX,j=m?this.touchSizeY:this.sizeY;if(T&&j&&T!==j){var E=Math.atan2(j,T),M=Math.sqrt(T*T+j*j)/2,D=E-s.util.degreesToRadians(h),A=Math.PI/2-E-s.util.degreesToRadians(h);y=M*s.util.cos(D),p=M*s.util.sin(D),w=M*s.util.cos(A),C=M*s.util.sin(A)}else{var I=T&&j?T:a;M=I*.7071067812;var D=s.util.degreesToRadians(45-h);y=w=M*s.util.cos(D),p=C=M*s.util.sin(D)}return{tl:{x:l-C,y:c-w},tr:{x:l+y,y:c-p},bl:{x:l-y,y:c+p},br:{x:l+C,y:c+w}}},render:function(h,a,l,c,m){switch(c=c||{},c.cornerStyle||m.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,h,a,l,c,m);break;default:s.controlsUtils.renderSquareControl.call(this,h,a,l,c,m)}}}}(t),function(){function f(l,c){var m=l.getAttribute("style"),y=l.getAttribute("offset")||0,p,w,C,T;if(y=parseFloat(y)/(/%$/.test(y)?100:1),y=y<0?0:y>1?1:y,m){var j=m.split(/\s*;\s*/);for(j[j.length-1]===""&&j.pop(),T=j.length;T--;){var E=j[T].split(/\s*:\s*/),M=E[0].trim(),D=E[1].trim();M==="stop-color"?p=D:M==="stop-opacity"&&(C=D)}}return p||(p=l.getAttribute("stop-color")||"rgb(0,0,0)"),C||(C=l.getAttribute("stop-opacity")),p=new e.Color(p),w=p.getAlpha(),C=isNaN(parseFloat(C))?1:parseFloat(C),C*=w*c,{offset:y,color:p.toRgb(),opacity:C}}function s(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function u(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var h=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var c,m=this;Object.keys(l).forEach(function(y){m[y]=l[y]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,c={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(c.r1=l.coords.r1||0,c.r2=l.coords.r2||0),this.coords=c,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var c in l){var m=new e.Color(l[c]);this.colorStops.push({offset:parseFloat(c),color:m.toRgb(),opacity:m.getAlpha()})}return this},toObject:function(l){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,c,l),c},toSVG:function(l,w){var m=h(this.coords,!0),y,p,w=w||{},C,T,j=h(this.colorStops,!0),E=m.r1>m.r2,M=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),D=-this.offsetX,A=-this.offsetY,I=!!w.additionalTransform,X=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(j.sort(function(G,z){return G.offset-z.offset}),X==="objectBoundingBox"?(D/=l.width,A/=l.height):(D+=l.width/2,A+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(D-=l.pathOffset.x,A-=l.pathOffset.y),M[4]-=D,M[5]-=A,T='id="SVGID_'+this.id+'" gradientUnits="'+X+'"',T+=' gradientTransform="'+(I?w.additionalTransform+" ":"")+e.util.matrixToSVG(M)+'" ',this.type==="linear"?C=["<linearGradient ",T,' x1="',m.x1,'" y1="',m.y1,'" x2="',m.x2,'" y2="',m.y2,`">
`]:this.type==="radial"&&(C=["<radialGradient ",T,' cx="',E?m.x1:m.x2,'" cy="',E?m.y1:m.y2,'" r="',E?m.r1:m.r2,'" fx="',E?m.x2:m.x1,'" fy="',E?m.y2:m.y1,`">
`]),this.type==="radial"){if(E)for(j=j.concat(),j.reverse(),y=0,p=j.length;y<p;y++)j[y].offset=1-j[y].offset;var oe=Math.min(m.r1,m.r2);if(oe>0){var Z=Math.max(m.r1,m.r2),ae=oe/Z;for(y=0,p=j.length;y<p;y++)j[y].offset+=ae*(1-j[y].offset)}}for(y=0,p=j.length;y<p;y++){var te=j[y];C.push("<stop ",'offset="',te.offset*100+"%",'" style="stop-color:',te.color,typeof te.opacity<"u"?";stop-opacity: "+te.opacity:";",`"/>
`)}return C.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),C.join("")},toLive:function(l){var c,m=e.util.object.clone(this.coords),y,p;if(this.type){for(this.type==="linear"?c=l.createLinearGradient(m.x1,m.y1,m.x2,m.y2):this.type==="radial"&&(c=l.createRadialGradient(m.x1,m.y1,m.r1,m.x2,m.y2,m.r2)),y=0,p=this.colorStops.length;y<p;y++){var w=this.colorStops[y].color,C=this.colorStops[y].opacity,T=this.colorStops[y].offset;typeof C<"u"&&(w=new e.Color(w).setAlpha(C).toRgba()),c.addColorStop(T,w)}return c}}}),e.util.object.extend(e.Gradient,{fromElement:function(l,c,m,y){var p=parseFloat(m)/(/%$/.test(m)?100:1);p=p<0?0:p>1?1:p,isNaN(p)&&(p=1);var w=l.getElementsByTagName("stop"),C,T=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",j=l.getAttribute("gradientTransform")||"",E=[],M,D,A=0,I=0,X;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(C="linear",M=s(l)):(C="radial",M=u(l)),D=w.length;D--;)E.push(f(w[D],p));X=e.parseTransformAttribute(j),a(c,M,y,T),T==="pixels"&&(A=-c.left,I=-c.top);var oe=new e.Gradient({id:l.getAttribute("id"),type:C,coords:M,colorStops:E,gradientUnits:T,gradientTransform:X,offsetX:A,offsetY:I});return oe}});function a(l,c,m,y){var p,w;Object.keys(c).forEach(function(C){p=c[C],p==="Infinity"?w=1:p==="-Infinity"?w=0:(w=parseFloat(c[C],10),typeof p=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(p)&&(w*=.01,y==="pixels"&&((C==="x1"||C==="x2"||C==="r2")&&(w*=m.viewBoxWidth||m.width),(C==="y1"||C==="y2")&&(w*=m.viewBoxHeight||m.height)))),c[C]=w})}}(),function(){var f=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,u){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){u&&u(this);return}else{var h=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(a,l){h.source=a,u&&u(h,l)},null,this.crossOrigin)}},toObject:function(s){var u=e.Object.NUM_FRACTION_DIGITS,h,a;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),a={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,u),offsetY:f(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,a,s),a},toSVG:function(s){var u=typeof this.source=="function"?this.source():this.source,h=u.width/s.width,a=u.height/s.height,l=this.offsetX/s.width,c=this.offsetY/s.height,m="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,c&&(a+=Math.abs(c))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,l&&(h+=Math.abs(l))),u.src?m=u.src:u.toDataURL&&(m=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+c+'" width="'+h+'" height="'+a+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+m+`"></image>
</pattern>
`},setOptions:function(s){for(var u in s)this[u]=s[u]},toLive:function(s){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":s.createPattern(u,this.repeat)}})}(),function(f){var s=f.fabric||(f.fabric={}),u=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var a in h)this[a]=h[a];this.id=s.Object.__uid++},_parseShadow:function(h){var a=h.trim(),l=s.Shadow.reOffsetsAndBlur.exec(a)||[],c=a.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:c.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var a=40,l=40,c=s.Object.NUM_FRACTION_DIGITS,m=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-h.angle)),y=20,p=new s.Color(this.color);return h.width&&h.height&&(a=u((Math.abs(m.x)+this.blur)/h.width,c)*100+y,l=u((Math.abs(m.y)+this.blur)/h.height,c)*100+y),h.flipX&&(m.x*=-1),h.flipY&&(m.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,c)+`"></feGaussianBlur>
	<feOffset dx="`+u(m.x,c)+'" dy="'+u(m.y,c)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+p.toRgb()+'" flood-opacity="'+p.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},a=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==a[l]&&(h[l]=this[l])},this),h}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var f=e.util.object.extend,s=e.util.getElementOffset,u=e.util.removeFromArray,h=e.util.toFixed,a=e.util.transformPoint,l=e.util.invertTransform,c=e.util.getNodeCanvas,m=e.util.createCanvasElement,y=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(p,w){w||(w={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(p,w)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(p,w){var C=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(p),this._initOptions(w),this.interactive||this._initRetinaScaling(),w.overlayImage&&this.setOverlayImage(w.overlayImage,C),w.backgroundImage&&this.setBackgroundImage(w.backgroundImage,C),w.backgroundColor&&this.setBackgroundColor(w.backgroundColor,C),w.overlayColor&&this.setOverlayColor(w.overlayColor,C),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var p=e.devicePixelRatio;this.__initRetinaScaling(p,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(p,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(p,w,C){w.setAttribute("width",this.width*p),w.setAttribute("height",this.height*p),C.scale(p,p)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(p,w,C){return this.__setBgOverlayImage("overlayImage",p,w,C)},setBackgroundImage:function(p,w,C){return this.__setBgOverlayImage("backgroundImage",p,w,C)},setOverlayColor:function(p,w){return this.__setBgOverlayColor("overlayColor",p,w)},setBackgroundColor:function(p,w){return this.__setBgOverlayColor("backgroundColor",p,w)},__setBgOverlayImage:function(p,w,C,T){return typeof w=="string"?e.util.loadImage(w,function(j,E){if(j){var M=new e.Image(j,T);this[p]=M,M.canvas=this}C&&C(j,E)},this,T&&T.crossOrigin):(T&&w.setOptions(T),this[p]=w,w&&(w.canvas=this),C&&C(w,!1)),this},__setBgOverlayColor:function(p,w,C){return this[p]=w,this._initGradient(w,p),this._initPattern(w,p,C),this},_createCanvasElement:function(){var p=m();if(!p||(p.style||(p.style={}),typeof p.getContext>"u"))throw y;return p},_initOptions:function(p){var w=this.lowerCanvasEl;this._setOptions(p),this.width=this.width||parseInt(w.width,10)||0,this.height=this.height||parseInt(w.height,10)||0,this.lowerCanvasEl.style&&(w.width=this.width,w.height=this.height,w.style.width=this.width+"px",w.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(p){p&&p.getContext?this.lowerCanvasEl=p:this.lowerCanvasEl=e.util.getById(p)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(p,w){return this.setDimensions({width:p},w)},setHeight:function(p,w){return this.setDimensions({height:p},w)},setDimensions:function(p,w){var C;w=w||{};for(var T in p)C=p[T],w.cssOnly||(this._setBackstoreDimension(T,p[T]),C+="px",this.hasLostContext=!0),w.backstoreOnly||this._setCssDimension(T,C);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),w.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(p,w){return this.lowerCanvasEl[p]=w,this.upperCanvasEl&&(this.upperCanvasEl[p]=w),this.cacheCanvasEl&&(this.cacheCanvasEl[p]=w),this[p]=w,this},_setCssDimension:function(p,w){return this.lowerCanvasEl.style[p]=w,this.upperCanvasEl&&(this.upperCanvasEl.style[p]=w),this.wrapperEl&&(this.wrapperEl.style[p]=w),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(p){var w=this._activeObject,C=this.backgroundImage,T=this.overlayImage,j,E,M;for(this.viewportTransform=p,E=0,M=this._objects.length;E<M;E++)j=this._objects[E],j.group||j.setCoords(!0);return w&&w.setCoords(),C&&C.setCoords(!0),T&&T.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(p,w){var C=p,T=this.viewportTransform.slice(0);p=a(p,l(this.viewportTransform)),T[0]=w,T[3]=w;var j=a(p,T);return T[4]+=C.x-j.x,T[5]+=C.y-j.y,this.setViewportTransform(T)},setZoom:function(p){return this.zoomToPoint(new e.Point(0,0),p),this},absolutePan:function(p){var w=this.viewportTransform.slice(0);return w[4]=-p.x,w[5]=-p.y,this.setViewportTransform(w)},relativePan:function(p){return this.absolutePan(new e.Point(-p.x-this.viewportTransform[4],-p.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(p){this.stateful&&p.setupState(),p._set("canvas",this),p.setCoords(),this.fire("object:added",{target:p}),p.fire("added")},_onObjectRemoved:function(p){this.fire("object:removed",{target:p}),p.fire("removed"),delete p.canvas},clearContext:function(p){return p.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var p=this.contextContainer;return this.renderCanvas(p,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var p={},w=this.width,C=this.height,T=l(this.viewportTransform);return p.tl=a({x:0,y:0},T),p.br=a({x:w,y:C},T),p.tr=new e.Point(p.br.x,p.tl.y),p.bl=new e.Point(p.tl.x,p.br.y),this.vptCoords=p,p},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(p,w){var C=this.viewportTransform,T=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(p),e.util.setImageSmoothing(p,this.imageSmoothingEnabled),this.fire("before:render",{ctx:p}),this._renderBackground(p),p.save(),p.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._renderObjects(p,w),p.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),T&&(T.canvas=this,T.shouldCache(),T._transformDone=!0,T.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(p)),this._renderOverlay(p),this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),this.fire("after:render",{ctx:p})},drawClipPathOnCanvas:function(p){var w=this.viewportTransform,C=this.clipPath;p.save(),p.transform(w[0],w[1],w[2],w[3],w[4],w[5]),p.globalCompositeOperation="destination-in",C.transform(p),p.scale(1/C.zoomX,1/C.zoomY),p.drawImage(C._cacheCanvas,-C.cacheTranslationX,-C.cacheTranslationY),p.restore()},_renderObjects:function(p,w){var C,T;for(C=0,T=w.length;C<T;++C)w[C]&&w[C].render(p)},_renderBackgroundOrOverlay:function(p,w){var C=this[w+"Color"],T=this[w+"Image"],j=this.viewportTransform,E=this[w+"Vpt"];if(!(!C&&!T)){if(C){p.save(),p.beginPath(),p.moveTo(0,0),p.lineTo(this.width,0),p.lineTo(this.width,this.height),p.lineTo(0,this.height),p.closePath(),p.fillStyle=C.toLive?C.toLive(p,this):C,E&&p.transform(j[0],j[1],j[2],j[3],j[4],j[5]),p.transform(1,0,0,1,C.offsetX||0,C.offsetY||0);var M=C.gradientTransform||C.patternTransform;M&&p.transform(M[0],M[1],M[2],M[3],M[4],M[5]),p.fill(),p.restore()}T&&(p.save(),E&&p.transform(j[0],j[1],j[2],j[3],j[4],j[5]),T.render(p),p.restore())}},_renderBackground:function(p){this._renderBackgroundOrOverlay(p,"background")},_renderOverlay:function(p){this._renderBackgroundOrOverlay(p,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(p){return this._centerObject(p,new e.Point(this.getCenterPoint().x,p.getCenterPoint().y))},centerObjectV:function(p){return this._centerObject(p,new e.Point(p.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(p){var w=this.getCenterPoint();return this._centerObject(p,w)},viewportCenterObject:function(p){var w=this.getVpCenter();return this._centerObject(p,w)},viewportCenterObjectH:function(p){var w=this.getVpCenter();return this._centerObject(p,new e.Point(w.x,p.getCenterPoint().y)),this},viewportCenterObjectV:function(p){var w=this.getVpCenter();return this._centerObject(p,new e.Point(p.getCenterPoint().x,w.y))},getVpCenter:function(){var p=this.getCenterPoint(),w=l(this.viewportTransform);return a(p,w)},_centerObject:function(p,w){return p.setPositionByOrigin(w,"center","center"),p.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(p){return this.toDatalessObject(p)},toObject:function(p){return this._toObjectMethod("toObject",p)},toDatalessObject:function(p){return this._toObjectMethod("toDatalessObject",p)},_toObjectMethod:function(p,w){var C=this.clipPath,T={version:e.version,objects:this._toObjects(p,w)};return C&&!C.excludeFromExport&&(T.clipPath=this._toObject(this.clipPath,p,w)),f(T,this.__serializeBgOverlay(p,w)),e.util.populateWithProperties(this,T,w),T},_toObjects:function(p,w){return this._objects.filter(function(C){return!C.excludeFromExport}).map(function(C){return this._toObject(C,p,w)},this)},_toObject:function(p,w,C){var T;this.includeDefaultValues||(T=p.includeDefaultValues,p.includeDefaultValues=!1);var j=p[w](C);return this.includeDefaultValues||(p.includeDefaultValues=T),j},__serializeBgOverlay:function(p,w){var C={},T=this.backgroundImage,j=this.overlayImage,E=this.backgroundColor,M=this.overlayColor;return E&&E.toObject?E.excludeFromExport||(C.background=E.toObject(w)):E&&(C.background=E),M&&M.toObject?M.excludeFromExport||(C.overlay=M.toObject(w)):M&&(C.overlay=M),T&&!T.excludeFromExport&&(C.backgroundImage=this._toObject(T,p,w)),j&&!j.excludeFromExport&&(C.overlayImage=this._toObject(j,p,w)),C},svgViewportTransformation:!0,toSVG:function(p,w){p||(p={}),p.reviver=w;var C=[];return this._setSVGPreamble(C,p),this._setSVGHeader(C,p),this.clipPath&&C.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(C,"background"),this._setSVGBgOverlayImage(C,"backgroundImage",w),this._setSVGObjects(C,w),this.clipPath&&C.push(`</g>
`),this._setSVGBgOverlayColor(C,"overlay"),this._setSVGBgOverlayImage(C,"overlayImage",w),C.push("</svg>"),C.join("")},_setSVGPreamble:function(p,w){w.suppressPreamble||p.push('<?xml version="1.0" encoding="',w.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(p,w){var C=w.width||this.width,T=w.height||this.height,j,E='viewBox="0 0 '+this.width+" "+this.height+'" ',M=e.Object.NUM_FRACTION_DIGITS;w.viewBox?E='viewBox="'+w.viewBox.x+" "+w.viewBox.y+" "+w.viewBox.width+" "+w.viewBox.height+'" ':this.svgViewportTransformation&&(j=this.viewportTransform,E='viewBox="'+h(-j[4]/j[0],M)+" "+h(-j[5]/j[3],M)+" "+h(this.width/j[0],M)+" "+h(this.height/j[3],M)+'" '),p.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',C,'" ','height="',T,'" ',E,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(w),`</defs>
`)},createSVGClipPathMarkup:function(p){var w=this.clipPath;return w?(w.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+w.clipPathId+`" >
`+this.clipPath.toClipPathSVG(p.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var p=this,w=["background","overlay"].map(function(C){var T=p[C+"Color"];if(T&&T.toLive){var j=p[C+"Vpt"],E=p.viewportTransform,M={width:p.width/(j?E[0]:1),height:p.height/(j?E[3]:1)};return T.toSVG(M,{additionalTransform:j?e.util.matrixToSVG(E):""})}});return w.join("")},createSVGFontFacesMarkup:function(){var p="",w={},C,T,j,E,M,D,A,I,X,oe=e.fontPaths,Z=[];for(this._objects.forEach(function te(G){Z.push(G),G._objects&&G._objects.forEach(te)}),I=0,X=Z.length;I<X;I++)if(C=Z[I],T=C.fontFamily,!(C.type.indexOf("text")===-1||w[T]||!oe[T])&&(w[T]=!0,!!C.styles)){j=C.styles;for(M in j){E=j[M];for(A in E)D=E[A],T=D.fontFamily,!w[T]&&oe[T]&&(w[T]=!0)}}for(var ae in w)p+=[`		@font-face {
`,"			font-family: '",ae,`';
`,"			src: url('",oe[ae],`');
`,`		}
`].join("");return p&&(p=['	<style type="text/css">',`<![CDATA[
`,p,"]]>",`</style>
`].join("")),p},_setSVGObjects:function(p,w){var C,T,j,E=this._objects;for(T=0,j=E.length;T<j;T++)C=E[T],!C.excludeFromExport&&this._setSVGObject(p,C,w)},_setSVGObject:function(p,w,C){p.push(w.toSVG(C))},_setSVGBgOverlayImage:function(p,w,C){this[w]&&!this[w].excludeFromExport&&this[w].toSVG&&p.push(this[w].toSVG(C))},_setSVGBgOverlayColor:function(p,w){var C=this[w+"Color"],T=this.viewportTransform,j=this.width,E=this.height;if(C)if(C.toLive){var M=C.repeat,D=e.util.invertTransform(T),A=this[w+"Vpt"],I=A?e.util.matrixToSVG(D):"";p.push('<rect transform="'+I+" translate(",j/2,",",E/2,')"',' x="',C.offsetX-j/2,'" y="',C.offsetY-E/2,'" ','width="',M==="repeat-y"||M==="no-repeat"?C.source.width:j,'" height="',M==="repeat-x"||M==="no-repeat"?C.source.height:E,'" fill="url(#SVGID_'+C.id+')"',`></rect>
`)}else p.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',C,'"',`></rect>
`)},sendToBack:function(p){if(!p)return this;var w=this._activeObject,C,T,j;if(p===w&&p.type==="activeSelection")for(j=w._objects,C=j.length;C--;)T=j[C],u(this._objects,T),this._objects.unshift(T);else u(this._objects,p),this._objects.unshift(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(p){if(!p)return this;var w=this._activeObject,C,T,j;if(p===w&&p.type==="activeSelection")for(j=w._objects,C=0;C<j.length;C++)T=j[C],u(this._objects,T),this._objects.push(T);else u(this._objects,p),this._objects.push(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(p,w){if(!p)return this;var C=this._activeObject,T,j,E,M,D,A=0;if(p===C&&p.type==="activeSelection")for(D=C._objects,T=0;T<D.length;T++)j=D[T],E=this._objects.indexOf(j),E>0+A&&(M=E-1,u(this._objects,j),this._objects.splice(M,0,j)),A++;else E=this._objects.indexOf(p),E!==0&&(M=this._findNewLowerIndex(p,E,w),u(this._objects,p),this._objects.splice(M,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(p,w,C){var T,j;if(C)for(T=w,j=w-1;j>=0;--j){var E=p.intersectsWithObject(this._objects[j])||p.isContainedWithinObject(this._objects[j])||this._objects[j].isContainedWithinObject(p);if(E){T=j;break}}else T=w-1;return T},bringForward:function(p,w){if(!p)return this;var C=this._activeObject,T,j,E,M,D,A=0;if(p===C&&p.type==="activeSelection")for(D=C._objects,T=D.length;T--;)j=D[T],E=this._objects.indexOf(j),E<this._objects.length-1-A&&(M=E+1,u(this._objects,j),this._objects.splice(M,0,j)),A++;else E=this._objects.indexOf(p),E!==this._objects.length-1&&(M=this._findNewUpperIndex(p,E,w),u(this._objects,p),this._objects.splice(M,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(p,w,C){var T,j,E;if(C)for(T=w,j=w+1,E=this._objects.length;j<E;++j){var M=p.intersectsWithObject(this._objects[j])||p.isContainedWithinObject(this._objects[j])||this._objects[j].isContainedWithinObject(p);if(M){T=j;break}}else T=w+1;return T},moveTo:function(p,w){return u(this._objects,p),this._objects.splice(w,0,p),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(p){p.dispose&&p.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(e.StaticCanvas.prototype,e.Observable),f(e.StaticCanvas.prototype,e.Collection),f(e.StaticCanvas.prototype,e.DataURLExporter),f(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(p){var w=m();if(!w||!w.getContext)return null;var C=w.getContext("2d");if(!C)return null;switch(p){case"setLineDash":return typeof C.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var p=c(this.lowerCanvasEl);return p&&p.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(p){var w=c(this.lowerCanvasEl);return w&&w.createJPEGStream(p)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(f){f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var s=this.canvas.viewportTransform;f.save(),f.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var f=this.canvas,s=this.shadow,u=f.contextTop,h=f.getZoom();f&&f._isRetinaScaling()&&(h*=e.devicePixelRatio),u.shadowColor=s.color,u.shadowBlur=s.blur*h,u.shadowOffsetX=s.offsetX*h,u.shadowOffsetY=s.offsetY*h}},needsFullRender:function(){var f=new e.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0},_isOutSideCanvas:function(f){return f.x<0||f.x>this.canvas.getWidth()||f.y<0||f.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(f){this.canvas=f,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(f,s,u){var h=s.midPointFrom(u);return f.quadraticCurveTo(s.x,s.y,h.x,h.y),h},onMouseDown:function(f,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f))&&this._captureDrawingPath(f)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,h=u.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,u[h-2],u[h-1],!0),a.stroke(),a.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var s=new e.Point(f.x,f.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(f){var s=new e.Point(f.x,f.y);return this._addPoint(s)},_render:function(f){var s,u,h=this._points[0],a=this._points[1];if(f=f||this.canvas.contextTop,this._saveAndTransform(f),f.beginPath(),this._points.length===2&&h.x===a.x&&h.y===a.y){var l=this.width/1e3;h=new e.Point(h.x,h.y),a=new e.Point(a.x,a.y),h.x-=l,a.x+=l}for(f.moveTo(h.x,h.y),s=1,u=this._points.length;s<u;s++)this._drawSegment(f,h,a),h=this._points[s],a=this._points[s+1];f.lineTo(h.x,h.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(f,s)},_isEmptySVGPath:function(f){var s=e.util.joinPath(f);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(f){var s=new e.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(f,s){if(f.length<=2)return f;var u=this.canvas.getZoom(),h=Math.pow(s/u,2),a,l=f.length-1,c=f[0],m=[c],y;for(a=1;a<l-1;a++)y=Math.pow(c.x-f[a].x,2)+Math.pow(c.y-f[a].y,2),y>=h&&(c=f[a],m.push(c));return m.push(f[l]),m},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var u=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var s=this.addPoint(f),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,s),u.restore()},dot:function(f,s){f.fillStyle=s.fill,f.beginPath(),f.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,s,u,h=this.points;for(this._saveAndTransform(f),s=0,u=h.length;s<u;s++)this.dot(f,h[s]);f.restore()},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,s,u;this.canvas.renderOnAddRemove=!1;var h=[];for(s=0,u=this.points.length;s<u;s++){var a=this.points[s],l=new e.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(l.shadow=new e.Shadow(this.shadow)),h.push(l)}var c=new e.Group(h);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var s=new e.Point(f.x,f.y),u=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=u,s.fill=h,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(f)||(this.addSprayChunk(f),this.render(this.sprayChunkPoints))},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],u=0,h=this.sprayChunks.length;u<h;u++)for(var a=this.sprayChunks[u],l=0,c=a.length;l<c;l++){var m=new e.Rect({width:a[l].width,height:a[l].width,left:a[l].x+1,top:a[l].y+1,originX:"center",originY:"center",fill:this.color});s.push(m)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var y=new e.Group(s);this.shadow&&y.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.fire("path:created",{path:y}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var s={},u,h,a;for(h=0,a=f.length;h<a;h++)u=f[h].left+""+f[h].top,s[u]||(s[u]=f[h]);var l=[];for(u in s)l.push(s[u]);return l},render:function(f){var s=this.canvas.contextTop,u,h;for(s.fillStyle=this.color,this._saveAndTransform(s),u=0,h=f.length;u<h;u++){var a=f[u];typeof a.opacity<"u"&&(s.globalAlpha=a.opacity),s.fillRect(a.x,a.y,a.width,a.width)}s.restore()},_render:function(){var f=this.canvas.contextTop,s,u;for(f.fillStyle=this.color,this._saveAndTransform(f),s=0,u=this.sprayChunks.length;s<u;s++)this.render(this.sprayChunks[s]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var s,u,h,a=this.width/2,l;for(l=0;l<this.density;l++){s=e.util.getRandomInt(f.x-a,f.x+a),u=e.util.getRandomInt(f.y-a,f.y+a),this.dotWidthVariance?h=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var c=new e.Point(s,u);c.width=h,this.randomOpacity&&(c.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var f=20,s=5,u=e.util.createCanvasElement(),h=u.getContext("2d");return u.width=u.height=f+s,h.fillStyle=this.color,h.beginPath(),h.arc(f/2,f/2,f/2,0,Math.PI*2,!1),h.closePath(),h.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(f){return f.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(f){this.callSuper("_setBrushStyles",f),f.strokeStyle=this.getPattern(f)},createPath:function(f){var s=this.callSuper("createPath",f),u=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),s}}),function(){var f=e.util.getPointer,s=e.util.degreesToRadians,u=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(a,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),l,c,m;if(a.length>0&&!this.preserveObjectStacking){c=[],m=[];for(var y=0,p=this._objects.length;y<p;y++)l=this._objects[y],a.indexOf(l)===-1?c.push(l):m.push(l);a.length>1&&(this._activeObject._objects=m),c.push.apply(c,m)}else c=this._objects;return c},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,l){var c=a.calcTransformMatrix(),m=e.util.invertTransform(c),y=this.restorePointerVpt(l);return e.util.transformPoint(y,m)},isTargetTransparent:function(a,l,c){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var m=this._normalizePointer(a,{x:l,y:c}),y=Math.max(a.cacheTranslationX+m.x*a.zoomX,0),p=Math.max(a.cacheTranslationY+m.y*a.zoomY,0),j=e.util.isTransparent(a._cacheContext,Math.round(y),Math.round(p),this.targetFindTolerance);return j}var w=this.contextCache,C=a.selectionBackgroundColor,T=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(w),w.save(),w.transform(T[0],T[1],T[2],T[3],T[4],T[5]),a.render(w),w.restore(),a.selectionBackgroundColor=C;var j=e.util.isTransparent(w,l,c,this.targetFindTolerance);return j},_isSelectionKeyPressed:function(a){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(c){return a[c]===!0}):l=a[this.selectionKey],l},_shouldClearSelection:function(a,l){var c=this.getActiveObjects(),m=this._activeObject;return!l||l&&m&&c.length>1&&c.indexOf(l)===-1&&m!==l&&!this._isSelectionKeyPressed(a)||l&&!l.evented||l&&!l.selectable&&m&&m!==l},_shouldCenterTransform:function(a,l,c){if(a){var m;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?m=this.centeredScaling||a.centeredScaling:l==="rotate"&&(m=this.centeredRotation||a.centeredRotation),m?!c:c}},_getOriginFromCorner:function(a,l){var c={x:a.originX,y:a.originY};return l==="ml"||l==="tl"||l==="bl"?c.x="right":(l==="mr"||l==="tr"||l==="br")&&(c.x="left"),l==="tl"||l==="mt"||l==="tr"?c.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(c.y="top"),c},_getActionFromCorner:function(a,l,c,m){if(!l||!a)return"drag";var y=m.controls[l];return y.getActionName(c,y,m)},_setupCurrentTransform:function(a,l,c){if(l){var m=this.getPointer(a),y=l.__corner,p=l.controls[y],w=c&&y?p.getActionHandler(a,l,p):e.controlsUtils.dragHandler,C=this._getActionFromCorner(c,y,a,l),T=this._getOriginFromCorner(l,y),j=a[this.centeredKey],E={target:l,action:C,actionHandler:w,corner:y,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:m.x-l.left,offsetY:m.y-l.top,originX:T.x,originY:T.y,ex:m.x,ey:m.y,lastX:m.x,lastY:m.y,theta:s(l.angle),width:l.width*l.scaleX,shiftKey:a.shiftKey,altKey:j,original:e.util.saveObjectTransform(l)};this._shouldCenterTransform(l,C,j)&&(E.originX="center",E.originY="center"),E.original.originX=T.x,E.original.originY=T.y,this._currentTransform=E,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var l=this._groupSelector,c=new e.Point(l.ex,l.ey),m=e.util.transformPoint(c,this.viewportTransform),y=new e.Point(l.ex+l.left,l.ey+l.top),p=e.util.transformPoint(y,this.viewportTransform),w=Math.min(m.x,p.x),C=Math.min(m.y,p.y),T=Math.max(m.x,p.x),j=Math.max(m.y,p.y),E=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(w,C,T-w,j-C)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,w+=E,C+=E,T-=E,j-=E,e.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(w,C,T-w,j-C))},findTarget:function(a,l){if(!this.skipTargetFind){var c=!0,m=this.getPointer(a,c),y=this._activeObject,p=this.getActiveObjects(),w,C,T=u(a),j=p.length>1&&!l||p.length===1;if(this.targets=[],j&&y._findTargetCorner(m,T)||p.length>1&&!l&&y===this._searchPossibleTargets([y],m))return y;if(p.length===1&&y===this._searchPossibleTargets([y],m))if(this.preserveObjectStacking)w=y,C=this.targets,this.targets=[];else return y;var E=this._searchPossibleTargets(this._objects,m);return a[this.altSelectionKey]&&E&&w&&E!==w&&(E=w,this.targets=C),E}},_checkTarget:function(a,l,c){if(l&&l.visible&&l.evented&&l.containsPoint(a))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var m=this.isTargetTransparent(l,c.x,c.y);if(!m)return!0}else return!0},_searchPossibleTargets:function(a,l){for(var c,m=a.length,y;m--;){var p=a[m],w=p.group?this._normalizePointer(p.group,l):l;if(this._checkTarget(w,p,l)){c=a[m],c.subTargetCheck&&c instanceof e.Group&&(y=this._searchPossibleTargets(c._objects,l),y&&this.targets.push(y));break}}return c},restorePointerVpt:function(a){return e.util.transformPoint(a,e.util.invertTransform(this.viewportTransform))},getPointer:function(a,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var c=f(a),m=this.upperCanvasEl,y=m.getBoundingClientRect(),p=y.width||0,w=y.height||0,C;(!p||!w)&&("top"in y&&"bottom"in y&&(w=Math.abs(y.top-y.bottom)),"right"in y&&"left"in y&&(p=Math.abs(y.right-y.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,l||(c=this.restorePointerVpt(c));var T=this.getRetinaScaling();return T!==1&&(c.x/=T,c.y/=T),p===0||w===0?C={width:1,height:1}:C={width:m.width/p,height:m.height/w},{x:c.x*C.width,y:c.y*C.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),e.util.addClass(c,"upper-canvas "+a),this.wrapperEl.appendChild(c),this._copyCanvasStyle(l,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var l=this.width||a.width,c=this.height||a.height;e.util.setStyle(a,{position:"absolute",width:l+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=l,a.height=c,e.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,l){l.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,l){var c=!1,m=this.getActiveObjects(),y=[],p=[];a.forEach(function(w){m.indexOf(w)===-1&&(c=!0,w.fire("deselected",{e:l,target:w}),p.push(w))}),m.forEach(function(w){a.indexOf(w)===-1&&(c=!0,w.fire("selected",{e:l,target:w}),y.push(w))}),a.length>0&&m.length>0?c&&this.fire("selection:updated",{e:l,selected:y,deselected:p}):m.length>0?this.fire("selection:created",{e:l,selected:y}):a.length>0&&this.fire("selection:cleared",{e:l,deselected:p})},setActiveObject:function(a,l){var c=this.getActiveObjects();return this._setActiveObject(a,l),this._fireSelectionEvents(c,l),this},_setActiveObject:function(a,l){return this._activeObject===a||!this._discardActiveObject(l,a)||a.onSelect({e:l})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,l){var c=this._activeObject;if(c){if(c.onDeselect({e:a,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var l=this.getActiveObjects(),c=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:c,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(l,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var l=this._activeObject;l&&l._renderControls(a)},_toObject:function(a,l,c){var m=this._realizeGroupTransformOnObject(a),y=this.callSuper("_toObject",a,l,c);return this._unwindGroupTransformOnObject(a,m),y},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],c={};return l.forEach(function(m){c[m]=a[m]}),e.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),c}else return null},_unwindGroupTransformOnObject:function(a,l){l&&a.set(l)},_setSVGObject:function(a,l,c){var m=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",a,l,c),this._unwindGroupTransformOnObject(l,m)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var h in e.StaticCanvas)h!=="prototype"&&(e.Canvas[h]=e.StaticCanvas[h])}(),function(){var f=e.util.addListener,s=e.util.removeListener,u=3,h=2,a=1,l={passive:!1};function c(m,y){return m.button&&m.button===y-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(f,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(m,y){var p=this.upperCanvasEl,w=this._getEventPrefix();m(e.window,"resize",this._onResize),m(p,w+"down",this._onMouseDown),m(p,w+"move",this._onMouseMove,l),m(p,w+"out",this._onMouseOut),m(p,w+"enter",this._onMouseEnter),m(p,"wheel",this._onMouseWheel),m(p,"contextmenu",this._onContextMenu),m(p,"dblclick",this._onDoubleClick),m(p,"dragover",this._onDragOver),m(p,"dragenter",this._onDragEnter),m(p,"dragleave",this._onDragLeave),m(p,"drop",this._onDrop),this.enablePointerEvents||m(p,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&y in eventjs&&(eventjs[y](p,"gesture",this._onGesture),eventjs[y](p,"drag",this._onDrag),eventjs[y](p,"orientation",this._onOrientationChange),eventjs[y](p,"shake",this._onShake),eventjs[y](p,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var m=this._getEventPrefix();s(e.document,m+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,l),s(e.document,m+"move",this._onMouseMove,l),s(e.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(m,y){this.__onTransformGesture&&this.__onTransformGesture(m,y)},_onDrag:function(m,y){this.__onDrag&&this.__onDrag(m,y)},_onMouseWheel:function(m){this.__onMouseWheel(m)},_onMouseOut:function(m){var y=this._hoveredTarget;this.fire("mouse:out",{target:y,e:m}),this._hoveredTarget=null,y&&y.fire("mouseout",{e:m});var p=this;this._hoveredTargets.forEach(function(w){p.fire("mouse:out",{target:y,e:m}),w&&y.fire("mouseout",{e:m})}),this._hoveredTargets=[]},_onMouseEnter:function(m){!this._currentTransform&&!this.findTarget(m)&&(this.fire("mouse:over",{target:null,e:m}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(m,y){this.__onOrientationChange&&this.__onOrientationChange(m,y)},_onShake:function(m,y){this.__onShake&&this.__onShake(m,y)},_onLongPress:function(m,y){this.__onLongPress&&this.__onLongPress(m,y)},_onDragOver:function(m){m.preventDefault();var y=this._simpleEventHandler("dragover",m);this._fireEnterLeaveEvents(y,m)},_onDrop:function(m){return this._simpleEventHandler("drop:before",m),this._simpleEventHandler("drop",m)},_onContextMenu:function(m){return this.stopContextMenu&&(m.stopPropagation(),m.preventDefault()),!1},_onDoubleClick:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"dblclick"),this._resetTransformEventData(m)},getPointerId:function(m){var y=m.changedTouches;return y?y[0]&&y[0].identifier:this.enablePointerEvents?m.pointerId:-1},_isMainEvent:function(m){return m.isPrimary===!0?!0:m.isPrimary===!1?!1:m.type==="touchend"&&m.touches.length===0?!0:m.changedTouches?m.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(m){m.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(m)),this.__onMouseDown(m),this._resetTransformEventData();var y=this.upperCanvasEl,p=this._getEventPrefix();f(e.document,"touchend",this._onTouchEnd,l),f(e.document,"touchmove",this._onMouseMove,l),s(y,p+"down",this._onMouseDown)},_onMouseDown:function(m){this.__onMouseDown(m),this._resetTransformEventData();var y=this.upperCanvasEl,p=this._getEventPrefix();s(y,p+"move",this._onMouseMove,l),f(e.document,p+"up",this._onMouseUp),f(e.document,p+"move",this._onMouseMove,l)},_onTouchEnd:function(m){if(!(m.touches.length>0)){this.__onMouseUp(m),this._resetTransformEventData(),this.mainTouchId=null;var y=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,l),s(e.document,"touchmove",this._onMouseMove,l);var p=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){f(p.upperCanvasEl,y+"down",p._onMouseDown),p._willAddMouseDown=0},400)}},_onMouseUp:function(m){this.__onMouseUp(m),this._resetTransformEventData();var y=this.upperCanvasEl,p=this._getEventPrefix();this._isMainEvent(m)&&(s(e.document,p+"up",this._onMouseUp),s(e.document,p+"move",this._onMouseMove,l),f(y,p+"move",this._onMouseMove,l))},_onMouseMove:function(m){!this.allowTouchScrolling&&m.preventDefault&&m.preventDefault(),this.__onMouseMove(m)},_onResize:function(){this.calcOffset()},_shouldRender:function(m){var y=this._activeObject;return!!y!=!!m||y&&m&&y!==m?!0:(y&&y.isEditing,!1)},__onMouseUp:function(m){var y,p=this._currentTransform,w=this._groupSelector,C=!1,T=!w||w.left===0&&w.top===0;if(this._cacheTransformEventData(m),y=this._target,this._handleEvent(m,"up:before"),c(m,u)){this.fireRightClick&&this._handleEvent(m,"up",u,T);return}if(c(m,h)){this.fireMiddleClick&&this._handleEvent(m,"up",h,T),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(m);return}if(this._isMainEvent(m)){if(p&&(this._finalizeCurrentTransform(m),C=p.actionPerformed),!T){var j=y===this._activeObject;this._maybeGroupObjects(m),C||(C=this._shouldRender(y)||!j&&y===this._activeObject)}var E,M;if(y){if(E=y._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m)),y.selectable&&y!==this._activeObject&&y.activeOn==="up")this.setActiveObject(y,m),C=!0;else{var D=y.controls[E],A=D&&D.getMouseUpHandler(m,y,D);A&&(M=this.getPointer(m),A(m,p,M.x,M.y))}y.isMoving=!1}if(p&&(p.target!==y||p.corner!==E)){var I=p.target&&p.target.controls[p.corner],X=I&&I.getMouseUpHandler(m,y,D);M=M||this.getPointer(m),X&&X(m,p,M.x,M.y)}this._setCursorFromEvent(m,y),this._handleEvent(m,"up",a,T),this._groupSelector=null,this._currentTransform=null,y&&(y.__corner=0),C?this.requestRenderAll():T||this.renderTop()}},_simpleEventHandler:function(m,y){var p=this.findTarget(y),w=this.targets,C={e:y,target:p,subTargets:w};if(this.fire(m,C),p&&p.fire(m,C),!w)return p;for(var T=0;T<w.length;T++)w[T].fire(m,C);return p},_handleEvent:function(m,y,p,w){var C=this._target,T=this.targets||[],j={e:m,target:C,subTargets:T,button:p||a,isClick:w||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};y==="up"&&(j.currentTarget=this.findTarget(m),j.currentSubTargets=this.targets),this.fire("mouse:"+y,j),C&&C.fire("mouse"+y,j);for(var E=0;E<T.length;E++)T[E].fire("mouse"+y,j)},_finalizeCurrentTransform:function(m){var y=this._currentTransform,p=y.target,w={e:m,target:p,transform:y,action:y.action};p._scaling&&(p._scaling=!1),p.setCoords(),(y.actionPerformed||this.stateful&&p.hasStateChanged())&&this._fire("modified",w)},_onMouseDownInDrawingMode:function(m){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(m).requestRenderAll();var y=this.getPointer(m);this.freeDrawingBrush.onMouseDown(y,{e:m,pointer:y}),this._handleEvent(m,"down")},_onMouseMoveInDrawingMode:function(m){if(this._isCurrentlyDrawing){var y=this.getPointer(m);this.freeDrawingBrush.onMouseMove(y,{e:m,pointer:y})}this.setCursor(this.freeDrawingCursor),this._handleEvent(m,"move")},_onMouseUpInDrawingMode:function(m){var y=this.getPointer(m);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:m,pointer:y}),this._handleEvent(m,"up")},__onMouseDown:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"down:before");var y=this._target;if(c(m,u)){this.fireRightClick&&this._handleEvent(m,"down",u);return}if(c(m,h)){this.fireMiddleClick&&this._handleEvent(m,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(m);return}if(this._isMainEvent(m)&&!this._currentTransform){var p=this._pointer;this._previousPointer=p;var w=this._shouldRender(y),C=this._shouldGroup(m,y);if(this._shouldClearSelection(m,y)?this.discardActiveObject(m):C&&(this._handleGrouping(m,y),y=this._activeObject),this.selection&&(!y||!y.selectable&&!y.isEditing&&y!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),y){var T=y===this._activeObject;y.selectable&&y.activeOn==="down"&&this.setActiveObject(y,m);var j=y._findTargetCorner(this.getPointer(m,!0),e.util.isTouchEvent(m));if(y.__corner=j,y===this._activeObject&&(j||!C)){this._setupCurrentTransform(m,y,T);var E=y.controls[j],p=this.getPointer(m),M=E&&E.getMouseDownHandler(m,y,E);M&&M(m,this._currentTransform,p.x,p.y)}}this._handleEvent(m,"down"),(w||C)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(m){this._resetTransformEventData(),this._pointer=this.getPointer(m,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(m)||null},_beforeTransform:function(m){var y=this._currentTransform;this.stateful&&y.target.saveState(),this.fire("before:transform",{e:m,transform:y})},__onMouseMove:function(m){this._handleEvent(m,"move:before"),this._cacheTransformEventData(m);var y,p;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(m);return}if(this._isMainEvent(m)){var w=this._groupSelector;w?(p=this._absolutePointer,w.left=p.x-w.ex,w.top=p.y-w.ey,this.renderTop()):this._currentTransform?this._transformObject(m):(y=this.findTarget(m)||null,this._setCursorFromEvent(m,y),this._fireOverOutEvents(y,m)),this._handleEvent(m,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(m,y){var p=this._hoveredTarget,w=this._hoveredTargets,C=this.targets,T=Math.max(w.length,C.length);this.fireSyntheticInOutEvents(m,y,{oldTarget:p,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var j=0;j<T;j++)this.fireSyntheticInOutEvents(C[j],y,{oldTarget:w[j],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=m,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(m,y){var p=this._draggedoverTarget,w=this._hoveredTargets,C=this.targets,T=Math.max(w.length,C.length);this.fireSyntheticInOutEvents(m,y,{oldTarget:p,evtOut:"dragleave",evtIn:"dragenter"});for(var j=0;j<T;j++)this.fireSyntheticInOutEvents(C[j],y,{oldTarget:w[j],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=m},fireSyntheticInOutEvents:function(m,y,p){var w,C,T=p.oldTarget,j,E,M=T!==m,D=p.canvasEvtIn,A=p.canvasEvtOut;M&&(w={e:y,target:m,previousTarget:T},C={e:y,target:T,nextTarget:m}),E=m&&M,j=T&&M,j&&(A&&this.fire(A,C),T.fire(p.evtOut,C)),E&&(D&&this.fire(D,w),m.fire(p.evtIn,w))},__onMouseWheel:function(m){this._cacheTransformEventData(m),this._handleEvent(m,"wheel"),this._resetTransformEventData()},_transformObject:function(m){var y=this.getPointer(m),p=this._currentTransform;p.reset=!1,p.shiftKey=m.shiftKey,p.altKey=m[this.centeredKey],this._performTransformAction(m,p,y),p.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(m,y,p){var w=p.x,C=p.y,T=y.action,j=!1,E=y.actionHandler;E&&(j=E(m,y,w,C)),T==="drag"&&j&&(y.target.isMoving=!0,this.setCursor(y.target.moveCursor||this.moveCursor)),y.actionPerformed=y.actionPerformed||j},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(m,y){if(!y)return this.setCursor(this.defaultCursor),!1;var p=y.hoverCursor||this.hoverCursor,w=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,C=(!w||!w.contains(y))&&y._findTargetCorner(this.getPointer(m,!0));C?this.setCursor(this.getCornerCursor(C,y,m)):(y.subTargetCheck&&this.targets.concat().reverse().map(function(T){p=T.hoverCursor||p}),this.setCursor(p))},getCornerCursor:function(m,y,p){var w=y.controls[m];return w.cursorStyleHandler(p,w,y)}})}(),function(){var f=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(u,h){var a=this._activeObject;return a&&this._isSelectionKeyPressed(u)&&h&&h.selectable&&this.selection&&(a!==h||a.type==="activeSelection")&&!h.onSelect({e:u})},_handleGrouping:function(u,h){var a=this._activeObject;a.__corner||h===a&&(h=this.findTarget(u,!0),!h||!h.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(h,u):this._createActiveSelection(h,u))},_updateActiveSelection:function(u,h){var a=this._activeObject,l=a._objects.slice(0);a.contains(u)?(a.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),h)):(a.addWithUpdate(u),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,h)},_createActiveSelection:function(u,h){var a=this.getActiveObjects(),l=this._createGroup(u);this._hoveredTarget=l,this._setActiveObject(l,h),this._fireSelectionEvents(a,h)},_createGroup:function(u){var h=this._objects,a=h.indexOf(this._activeObject)<h.indexOf(u),l=a?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(u){var h=this._collectObjects(u),a;h.length===1?this.setActiveObject(h[0],u):h.length>1&&(a=new e.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(a,u))},_collectObjects:function(u){for(var h=[],a,l=this._groupSelector.ex,c=this._groupSelector.ey,m=l+this._groupSelector.left,y=c+this._groupSelector.top,p=new e.Point(f(l,m),f(c,y)),w=new e.Point(s(l,m),s(c,y)),C=!this.selectionFullyContained,T=l===m&&c===y,j=this._objects.length;j--&&(a=this._objects[j],!(!(!a||!a.selectable||!a.visible)&&(C&&a.intersectsWithRect(p,w,!0)||a.isContainedWithinRect(p,w,!0)||C&&a.containsPoint(p,null,!0)||C&&a.containsPoint(w,null,!0))&&(h.push(a),T))););return h.length>1&&(h=h.filter(function(E){return!E.onSelect({e:u})})),h},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var s=f.format||"png",u=f.quality||1,h=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(h,f);return e.util.toDataURL(a,s,u)},toCanvasElement:function(f,s){f=f||1,s=s||{};var u=(s.width||this.width)*f,h=(s.height||this.height)*f,a=this.getZoom(),l=this.width,c=this.height,m=a*f,y=this.viewportTransform,p=(y[4]-(s.left||0))*f,w=(y[5]-(s.top||0))*f,C=this.interactive,T=[m,0,0,m,p,w],j=this.enableRetinaScaling,E=e.util.createCanvasElement(),M=this.contextTop;return E.width=u,E.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=T,this.width=u,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(E.getContext("2d"),this._objects),this.viewportTransform=y,this.width=l,this.height=c,this.calcViewportBoundaries(),this.interactive=C,this.enableRetinaScaling=j,this.contextTop=M,E}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(f,s,u){if(f){var h=typeof f=="string"?JSON.parse(f):e.util.object.clone(f),a=this,l=h.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(m){a.clear(),a._setBgOverlay(h,function(){l?a._enlivenObjects([l],function(y){a.clipPath=y[0],a.__setupCanvas.call(a,h,m,c,s)}):a.__setupCanvas.call(a,h,m,c,s)})},u),this}},__setupCanvas:function(f,s,u,h){var a=this;s.forEach(function(l,c){a.insertAt(l,c)}),this.renderOnAddRemove=u,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),h&&h()},_setBgOverlay:function(f,s){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){s&&s();return}var h=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",f.backgroundImage,u,h),this.__setBgOverlay("overlayImage",f.overlayImage,u,h),this.__setBgOverlay("backgroundColor",f.background,u,h),this.__setBgOverlay("overlayColor",f.overlay,u,h)},__setBgOverlay:function(f,s,u,h){var a=this;if(!s){u[f]=!0,h&&h();return}f==="backgroundImage"||f==="overlayImage"?e.util.enlivenObjects([s],function(l){a[f]=l[0],u[f]=!0,h&&h()}):this["set"+e.util.string.capitalize(f,!0)](s,function(){u[f]=!0,h&&h()})},_enlivenObjects:function(f,s,u){if(!f||f.length===0){s&&s([]);return}e.util.enlivenObjects(f,function(h){s&&s(h)},null,u)},_toDataURL:function(f,s){this.clone(function(u){s(u.toDataURL(f))})},_toDataURLWithMultiplier:function(f,s,u){this.clone(function(h){u(h.toDataURLWithMultiplier(f,s))})},clone:function(f,s){var u=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(h){h.loadFromJSON(u,function(){f&&f(h)})})},cloneWithoutData:function(f){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var u=new e.Canvas(s);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),f&&f(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):f&&f(u)}}),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.util.object.clone,a=s.util.toFixed,l=s.util.string.capitalize,c=s.util.degreesToRadians,m=!s.isLikelyNode,y=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:m,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(p){p&&this.setOptions(p)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(p){var w=s.perfLimitSizeTotal,C=p.width,T=p.height,j=s.maxCacheSideLimit,E=s.minCacheSideLimit;if(C<=j&&T<=j&&C*T<=w)return C<E&&(p.width=E),T<E&&(p.height=E),p;var M=C/T,D=s.util.limitDimsByArea(M,w),A=s.util.capValue,I=A(E,D.x,j),X=A(E,D.y,j);return C>I&&(p.zoomX/=C/I,p.width=I,p.capped=!0),T>X&&(p.zoomY/=T/X,p.height=X,p.capped=!0),p},_getCacheCanvasDimensions:function(){var p=this.getTotalObjectScaling(),w=this._getTransformedDimensions(0,0),C=w.x*p.scaleX/this.scaleX,T=w.y*p.scaleY/this.scaleY;return{width:C+y,height:T+y,zoomX:p.scaleX,zoomY:p.scaleY,x:C,y:T}},_updateCacheCanvas:function(){var p=this.canvas;if(this.noScaleCache&&p&&p._currentTransform){var w=p._currentTransform.target,C=p._currentTransform.action;if(this===w&&C.slice&&C.slice(0,5)==="scale")return!1}var T=this._cacheCanvas,j=this._limitCacheSize(this._getCacheCanvasDimensions()),E=s.minCacheSideLimit,M=j.width,D=j.height,A,I,X=j.zoomX,oe=j.zoomY,Z=M!==this.cacheWidth||D!==this.cacheHeight,ae=this.zoomX!==X||this.zoomY!==oe,te=Z||ae,G=0,z=0,q=!1;if(Z){var Y=this._cacheCanvas.width,R=this._cacheCanvas.height,O=M>Y||D>R,L=(M<Y*.9||D<R*.9)&&Y>E&&R>E;q=O||L,O&&!j.capped&&(M>E||D>E)&&(G=M*.1,z=D*.1)}return this instanceof s.Text&&this.path&&(te=!0,q=!0,G+=this.getHeightOfLine(0)*this.zoomX,z+=this.getHeightOfLine(0)*this.zoomY),te?(q?(T.width=Math.ceil(M+G),T.height=Math.ceil(D+z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,T.width,T.height)),A=j.x/2,I=j.y/2,this.cacheTranslationX=Math.round(T.width/2-A)+A,this.cacheTranslationY=Math.round(T.height/2-I)+I,this.cacheWidth=M,this.cacheHeight=D,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(X,oe),this.zoomX=X,this.zoomY=oe,!0):!1},setOptions:function(p){this._setOptions(p),this._initGradient(p.fill,"fill"),this._initGradient(p.stroke,"stroke"),this._initPattern(p.fill,"fill"),this._initPattern(p.stroke,"stroke")},transform:function(p){var w=this.group&&!this.group._transformDone||this.group&&this.canvas&&p===this.canvas.contextTop,C=this.calcTransformMatrix(!w);p.transform(C[0],C[1],C[2],C[3],C[4],C[5])},toObject:function(p){var w=s.Object.NUM_FRACTION_DIGITS,C={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:a(this.left,w),top:a(this.top,w),width:a(this.width,w),height:a(this.height,w),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,w),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,w),scaleX:a(this.scaleX,w),scaleY:a(this.scaleY,w),angle:a(this.angle,w),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,w),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,w),skewY:a(this.skewY,w)};return this.clipPath&&!this.clipPath.excludeFromExport&&(C.clipPath=this.clipPath.toObject(p),C.clipPath.inverted=this.clipPath.inverted,C.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,C,p),this.includeDefaultValues||(C=this._removeDefaultValues(C)),C},toDatalessObject:function(p){return this.toObject(p)},_removeDefaultValues:function(p){var w=s.util.getKlass(p.type).prototype,C=w.stateProperties;return C.forEach(function(T){T==="left"||T==="top"||(p[T]===w[T]&&delete p[T],Array.isArray(p[T])&&Array.isArray(w[T])&&p[T].length===0&&w[T].length===0&&delete p[T])}),p},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var p=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(p.scaleX),scaleY:Math.abs(p.scaleY)}},getTotalObjectScaling:function(){var p=this.getObjectScaling(),w=p.scaleX,C=p.scaleY;if(this.canvas){var T=this.canvas.getZoom(),j=this.canvas.getRetinaScaling();w*=T*j,C*=T*j}return{scaleX:w,scaleY:C}},getObjectOpacity:function(){var p=this.opacity;return this.group&&(p*=this.group.getObjectOpacity()),p},_set:function(p,w){var C=p==="scaleX"||p==="scaleY",T=this[p]!==w,j=!1;return C&&(w=this._constrainScale(w)),p==="scaleX"&&w<0?(this.flipX=!this.flipX,w*=-1):p==="scaleY"&&w<0?(this.flipY=!this.flipY,w*=-1):p==="shadow"&&w&&!(w instanceof s.Shadow)?w=new s.Shadow(w):p==="dirty"&&this.group&&this.group.set("dirty",w),this[p]=w,T&&(j=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(p)>-1?(this.dirty=!0,j&&this.group.set("dirty",!0)):j&&this.stateProperties.indexOf(p)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(p){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(p.save(),this._setupCompositeOperation(p),this.drawSelectionBackground(p),this.transform(p),this._setOpacity(p),this._setShadow(p,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(p)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(p),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),p.restore())},renderCache:function(p){p=p||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,p.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(p,w){if(p.save(),w.inverted?p.globalCompositeOperation="destination-out":p.globalCompositeOperation="destination-in",w.absolutePositioned){var C=s.util.invertTransform(this.calcTransformMatrix());p.transform(C[0],C[1],C[2],C[3],C[4],C[5])}w.transform(p),p.scale(1/w.zoomX,1/w.zoomY),p.drawImage(w._cacheCanvas,-w.cacheTranslationX,-w.cacheTranslationY),p.restore()},drawObject:function(p,w){var C=this.fill,T=this.stroke;w?(this.fill="black",this.stroke="",this._setClippingProperties(p)):this._renderBackground(p),this._render(p),this._drawClipPath(p,this.clipPath),this.fill=C,this.stroke=T},_drawClipPath:function(p,w){w&&(w.canvas=this.canvas,w.shouldCache(),w._transformDone=!0,w.renderCache({forClipping:!0}),this.drawClipPathOnCache(p,w))},drawCacheOnCanvas:function(p){p.scale(1/this.zoomX,1/this.zoomY),p.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(p){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!p&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!p){var w=this.cacheWidth/this.zoomX,C=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-w/2,-C/2,w,C)}return!0}return!1},_renderBackground:function(p){if(this.backgroundColor){var w=this._getNonTransformedDimensions();p.fillStyle=this.backgroundColor,p.fillRect(-w.x/2,-w.y/2,w.x,w.y),this._removeShadow(p)}},_setOpacity:function(p){this.group&&!this.group._transformDone?p.globalAlpha=this.getObjectOpacity():p.globalAlpha*=this.opacity},_setStrokeStyles:function(p,w){var C=w.stroke;C&&(p.lineWidth=w.strokeWidth,p.lineCap=w.strokeLineCap,p.lineDashOffset=w.strokeDashOffset,p.lineJoin=w.strokeLineJoin,p.miterLimit=w.strokeMiterLimit,C.toLive?C.gradientUnits==="percentage"||C.gradientTransform||C.patternTransform?this._applyPatternForTransformedGradient(p,C):(p.strokeStyle=C.toLive(p,this),this._applyPatternGradientTransform(p,C)):p.strokeStyle=w.stroke)},_setFillStyles:function(p,w){var C=w.fill;C&&(C.toLive?(p.fillStyle=C.toLive(p,this),this._applyPatternGradientTransform(p,w.fill)):p.fillStyle=C)},_setClippingProperties:function(p){p.globalAlpha=1,p.strokeStyle="transparent",p.fillStyle="#000000"},_setLineDash:function(p,w){!w||w.length===0||(1&w.length&&w.push.apply(w,w),p.setLineDash(w))},_renderControls:function(p,w){var C=this.getViewportTransform(),T=this.calcTransformMatrix(),j,E,M;w=w||{},E=typeof w.hasBorders<"u"?w.hasBorders:this.hasBorders,M=typeof w.hasControls<"u"?w.hasControls:this.hasControls,T=s.util.multiplyTransformMatrices(C,T),j=s.util.qrDecompose(T),p.save(),p.translate(j.translateX,j.translateY),p.lineWidth=1*this.borderScaleFactor,this.group||(p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(j.angle-=180),p.rotate(c(this.group?j.angle:this.angle)),w.forActiveSelection||this.group?E&&this.drawBordersInGroup(p,j,w):E&&this.drawBorders(p,w),M&&this.drawControls(p,w),p.restore()},_setShadow:function(p){if(this.shadow){var w=this.shadow,C=this.canvas,T,j=C&&C.viewportTransform[0]||1,E=C&&C.viewportTransform[3]||1;w.nonScaling?T={scaleX:1,scaleY:1}:T=this.getObjectScaling(),C&&C._isRetinaScaling()&&(j*=s.devicePixelRatio,E*=s.devicePixelRatio),p.shadowColor=w.color,p.shadowBlur=w.blur*s.browserShadowBlurConstant*(j+E)*(T.scaleX+T.scaleY)/4,p.shadowOffsetX=w.offsetX*j*T.scaleX,p.shadowOffsetY=w.offsetY*E*T.scaleY}},_removeShadow:function(p){this.shadow&&(p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0)},_applyPatternGradientTransform:function(p,w){if(!w||!w.toLive)return{offsetX:0,offsetY:0};var C=w.gradientTransform||w.patternTransform,T=-this.width/2+w.offsetX||0,j=-this.height/2+w.offsetY||0;return w.gradientUnits==="percentage"?p.transform(this.width,0,0,this.height,T,j):p.transform(1,0,0,1,T,j),C&&p.transform(C[0],C[1],C[2],C[3],C[4],C[5]),{offsetX:T,offsetY:j}},_renderPaintInOrder:function(p){this.paintFirst==="stroke"?(this._renderStroke(p),this._renderFill(p)):(this._renderFill(p),this._renderStroke(p))},_render:function(){},_renderFill:function(p){this.fill&&(p.save(),this._setFillStyles(p,this),this.fillRule==="evenodd"?p.fill("evenodd"):p.fill(),p.restore())},_renderStroke:function(p){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this.strokeUniform&&this.group){var w=this.getObjectScaling();p.scale(1/w.scaleX,1/w.scaleY)}else this.strokeUniform&&p.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(p,this.strokeDashArray),this._setStrokeStyles(p,this),p.stroke(),p.restore()}},_applyPatternForTransformedGradient:function(p,w){var C=this._limitCacheSize(this._getCacheCanvasDimensions()),T=s.util.createCanvasElement(),j,E=this.canvas.getRetinaScaling(),M=C.x/this.scaleX/E,D=C.y/this.scaleY/E;T.width=M,T.height=D,j=T.getContext("2d"),j.beginPath(),j.moveTo(0,0),j.lineTo(M,0),j.lineTo(M,D),j.lineTo(0,D),j.closePath(),j.translate(M/2,D/2),j.scale(C.zoomX/this.scaleX/E,C.zoomY/this.scaleY/E),this._applyPatternGradientTransform(j,w),j.fillStyle=w.toLive(p),j.fill(),p.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),p.scale(E*this.scaleX/C.zoomX,E*this.scaleY/C.zoomY),p.strokeStyle=j.createPattern(T,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var p=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",p.scaleX),this.set("scaleY",p.scaleY),this.angle=p.angle,this.skewX=p.skewX,this.skewY=0}},_removeTransformMatrix:function(p){var w=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),w=s.util.transformPoint(w,this.transformMatrix)),this.transformMatrix=null,p&&(this.scaleX*=p.scaleX,this.scaleY*=p.scaleY,this.cropX=p.cropX,this.cropY=p.cropY,w.x+=p.offsetLeft,w.y+=p.offsetTop,this.width=p.width,this.height=p.height),this.setPositionByOrigin(w,"center","center")},clone:function(p,w){var C=this.toObject(w);this.constructor.fromObject?this.constructor.fromObject(C,p):s.Object._fromObject("Object",C,p)},cloneAsImage:function(p,w){var C=this.toCanvasElement(w);return p&&p(new s.Image(C)),this},toCanvasElement:function(p){p||(p={});var w=s.util,C=w.saveObjectTransform(this),T=this.group,j=this.shadow,E=Math.abs,M=(p.multiplier||1)*(p.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,p.withoutTransform&&w.resetObjectTransform(this),p.withoutShadow&&(this.shadow=null);var D=s.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),I=this.shadow,X,oe={x:0,y:0},Z,ae,te;I&&(Z=I.blur,I.nonScaling?X={scaleX:1,scaleY:1}:X=this.getObjectScaling(),oe.x=2*Math.round(E(I.offsetX)+Z)*E(X.scaleX),oe.y=2*Math.round(E(I.offsetY)+Z)*E(X.scaleY)),ae=A.width+oe.x,te=A.height+oe.y,D.width=Math.ceil(ae),D.height=Math.ceil(te);var G=new s.StaticCanvas(D,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});p.format==="jpeg"&&(G.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(G.width/2,G.height/2),"center","center");var z=this.canvas;G.add(this);var q=G.toCanvasElement(M||1,p);return this.shadow=j,this.set("canvas",z),T&&(this.group=T),this.set(C).setCoords(),G._objects=[],G.dispose(),G=null,q},toDataURL:function(p){return p||(p={}),s.util.toDataURL(this.toCanvasElement(p),p.format||"png",p.quality||1)},isType:function(p){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===p},complexity:function(){return 1},toJSON:function(p){return this.toObject(p)},rotate:function(p){var w=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return w&&this._setOriginToCenter(),this.set("angle",p),w&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(p,w){w=w||this.canvas.getPointer(p);var C=new s.Point(w.x,w.y),T=this._getLeftTopCoords();return this.angle&&(C=s.util.rotatePoint(C,T,c(-this.angle))),{x:C.x-T.x,y:C.y-T.y}},_setupCompositeOperation:function(p){this.globalCompositeOperation&&(p.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),u(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(p,w,C,T){var j=s[p];w=h(w,!0),s.util.enlivenPatterns([w.fill,w.stroke],function(E){typeof E[0]<"u"&&(w.fill=E[0]),typeof E[1]<"u"&&(w.stroke=E[1]),s.util.enlivenObjectEnlivables(w,w,function(){var M=T?new j(w[T],w):new j(w);C&&C(M)})})},s.Object.__uid=0)}(t),function(){var f=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(h,a,l,c,m){var y=h.x,p=h.y,w,C,T;return typeof a=="string"?a=s[a]:a-=.5,typeof c=="string"?c=s[c]:c-=.5,w=c-a,typeof l=="string"?l=u[l]:l-=.5,typeof m=="string"?m=u[m]:m-=.5,C=m-l,(w||C)&&(T=this._getTransformedDimensions(),y=h.x+w*T.x,p=h.y+C*T.y),new e.Point(y,p)},translateToCenterPoint:function(h,a,l){var c=this.translateToGivenOrigin(h,a,l,"center","center");return this.angle?e.util.rotatePoint(c,h,f(this.angle)):c},translateToOriginPoint:function(h,a,l){var c=this.translateToGivenOrigin(h,"center","center",a,l);return this.angle?e.util.rotatePoint(c,h,f(this.angle)):c},getCenterPoint:function(){var h=new e.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,a){var l=this.getCenterPoint();return this.translateToOriginPoint(l,h,a)},toLocalPoint:function(h,a,l){var c=this.getCenterPoint(),m,y;return typeof a<"u"&&typeof l<"u"?m=this.translateToGivenOrigin(c,"center","center",a,l):m=new e.Point(this.left,this.top),y=new e.Point(h.x,h.y),this.angle&&(y=e.util.rotatePoint(y,c,-f(this.angle))),y.subtractEquals(m)},setPositionByOrigin:function(h,a,l){var c=this.translateToCenterPoint(h,a,l),m=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",m.x),this.set("top",m.y)},adjustPosition:function(h){var a=f(this.angle),l=this.getScaledWidth(),c=e.util.cos(a)*l,m=e.util.sin(a)*l,y,p;typeof this.originX=="string"?y=s[this.originX]:y=this.originX-.5,typeof h=="string"?p=s[h]:p=h-.5,this.left+=c*(p-y),this.top+=m*(p-y),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(l){return[new e.Point(l.tl.x,l.tl.y),new e.Point(l.tr.x,l.tr.y),new e.Point(l.br.x,l.br.y),new e.Point(l.bl.x,l.bl.y)]}var s=e.util,u=s.degreesToRadians,h=s.multiplyTransformMatrices,a=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,c){return c?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,c){return f(this._getCoords(l,c))},intersectsWithRect:function(l,c,m,y){var p=this.getCoords(m,y),w=e.Intersection.intersectPolygonRectangle(p,l,c);return w.status==="Intersection"},intersectsWithObject:function(l,c,m){var y=e.Intersection.intersectPolygonPolygon(this.getCoords(c,m),l.getCoords(c,m));return y.status==="Intersection"||l.isContainedWithinObject(this,c,m)||this.isContainedWithinObject(l,c,m)},isContainedWithinObject:function(l,c,m){for(var y=this.getCoords(c,m),p=c?l.aCoords:l.lineCoords,w=0,C=l._getImageLines(p);w<4;w++)if(!l.containsPoint(y[w],C))return!1;return!0},isContainedWithinRect:function(l,c,m,y){var p=this.getBoundingRect(m,y);return p.left>=l.x&&p.left+p.width<=c.x&&p.top>=l.y&&p.top+p.height<=c.y},containsPoint:function(l,w,m,y){var p=this._getCoords(m,y),w=w||this._getImageLines(p),C=this._findCrossPoints(l,w);return C!==0&&C%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br,y=this.getCoords(!0,l);return y.some(function(p){return p.x<=m.x&&p.x>=c.x&&p.y<=m.y&&p.y>=c.y})||this.intersectsWithRect(c,m,!0,l)?!0:this._containsCenterOfCanvas(c,m,l)},_containsCenterOfCanvas:function(l,c,m){var y={x:(l.x+c.x)/2,y:(l.y+c.y)/2};return!!this.containsPoint(y,null,!0,m)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,m=this.canvas.vptCoords.br;if(this.intersectsWithRect(c,m,!0,l))return!0;var y=this.getCoords(!0,l).every(function(p){return(p.x>=m.x||p.x<=c.x)&&(p.y>=m.y||p.y<=c.y)});return y&&this._containsCenterOfCanvas(c,m,l)},_getImageLines:function(l){var c={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return c},_findCrossPoints:function(l,c){var m,y,p,w,C,T=0,j;for(var E in c)if(j=c[E],!(j.o.y<l.y&&j.d.y<l.y)&&!(j.o.y>=l.y&&j.d.y>=l.y)&&(j.o.x===j.d.x&&j.o.x>=l.x?C=j.o.x:(m=0,y=(j.d.y-j.o.y)/(j.d.x-j.o.x),p=l.y-m*l.x,w=j.o.y-y*j.o.x,C=-(p-w)/(m-y)),C>=l.x&&(T+=1),T===2))break;return T},getBoundingRect:function(l,c){var m=this.getCoords(l,c);return s.makeBoundingBoxFromPoints(m)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,c){var m=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(l/this.width/m)},scaleToHeight:function(l,c){var m=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(l/this.height/m)},calcLineCoords:function(){var l=this.getViewportTransform(),c=this.padding,m=u(this.angle),y=s.cos(m),p=s.sin(m),w=y*c,C=p*c,T=w+C,j=w-C,E=this.calcACoords(),M={tl:a(E.tl,l),tr:a(E.tr,l),bl:a(E.bl,l),br:a(E.br,l)};return c&&(M.tl.x-=j,M.tl.y-=T,M.tr.x+=T,M.tr.y-=j,M.bl.x-=T,M.bl.y+=j,M.br.x+=j,M.br.y+=T),M},calcOCoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),m=this.getViewportTransform(),y=h(m,c),p=h(y,l),p=h(p,[1/m[0],0,0,1/m[3],0,0]),w=this._calculateCurrentDimensions(),C={};return this.forEachControl(function(T,j,E){C[j]=T.positionHandler(w,p,E)}),C},calcACoords:function(){var l=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),m=h(c,l),y=this._getTransformedDimensions(),p=y.x/2,w=y.y/2;return{tl:a({x:-p,y:-w},m),tr:a({x:p,y:-w},m),bl:a({x:-p,y:w},m),br:a({x:p,y:w},m)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var c="_",m="";return!l&&this.group&&(m=this.group.transformMatrixKey(l)+c),m+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var c=this.calcOwnMatrix();if(l||!this.group)return c;var m=this.transformMatrixKey(l),y=this.matrixCache||(this.matrixCache={});return y.key===m?y.value:(this.group&&(c=h(this.group.calcTransformMatrix(!1),c)),y.key=m,y.value=c,c)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===l)return c.value;var m=this._calcTranslateMatrix(),y={angle:this.angle,translateX:m[4],translateY:m[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=l,c.value=s.composeMatrix(y),c.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,c=this.width+l,m=this.height+l;return{x:c,y:m}},_getTransformedDimensions:function(l,c){typeof l>"u"&&(l=this.skewX),typeof c>"u"&&(c=this.skewY);var m,y,p,w=l===0&&c===0;if(this.strokeUniform?(y=this.width,p=this.height):(m=this._getNonTransformedDimensions(),y=m.x,p=m.y),w)return this._finalizeDimensions(y*this.scaleX,p*this.scaleY);var C=s.sizeAfterTransform(y,p,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:c});return this._finalizeDimensions(C.x,C.y)},_finalizeDimensions:function(l,c){return this.strokeUniform?{x:l+this.strokeWidth,y:c+this.strokeWidth}:{x:l,y:c}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),c=this._getTransformedDimensions(),m=a(c,l,!0);return m.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(u,h){if(h){if(h.toLive)return u+": url(#SVGID_"+h.id+"); ";var a=new e.Color(h),l=u+": "+a.toRgb()+"; ",c=a.getAlpha();return c!==1&&(l+=u+"-opacity: "+c.toString()+"; "),l}else return u+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(u){var h=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",m=this.strokeLineCap?this.strokeLineCap:"butt",y=this.strokeLineJoin?this.strokeLineJoin:"miter",p=this.strokeMiterLimit?this.strokeMiterLimit:"4",w=typeof this.opacity<"u"?this.opacity:"1",C=this.visible?"":" visibility: hidden;",T=u?"":this.getSvgFilter(),j=f("fill",this.fill),E=f("stroke",this.stroke);return[E,"stroke-width: ",a,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",m,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",y,"; ","stroke-miterlimit: ",p,"; ",j,"fill-rule: ",h,"; ","opacity: ",w,";",T,C].join("")},getSvgSpanStyles:function(u,h){var a="; ",c=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+a:"",l=u.strokeWidth?"stroke-width: "+u.strokeWidth+a:"",c=c,m=u.fontSize?"font-size: "+u.fontSize+"px"+a:"",y=u.fontStyle?"font-style: "+u.fontStyle+a:"",p=u.fontWeight?"font-weight: "+u.fontWeight+a:"",w=u.fill?f("fill",u.fill):"",C=u.stroke?f("stroke",u.stroke):"",T=this.getSvgTextDecoration(u),j=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return T&&(T="text-decoration: "+T+a),[C,l,c,m,y,p,T,w,j,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(h){return u[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,h){var a=u?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+e.util.matrixToSVG(a);return l+(h||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var h=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,h),'" y="',s(-this.height/2,h),'" width="',s(this.width,h),'" height="',s(this.height,h),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,h){h=h||{};var a=h.reviver,l=h.additionalTransform||"",c=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),m=u.indexOf("COMMON_PARTS");return u[m]=c,a?a(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,h){h=h||{};var a=h.noStyle,l=h.reviver,c=a?"":'style="'+this.getSvgStyles()+'" ',m=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",y=this.clipPath,p=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",w=y&&y.absolutePositioned,C=this.stroke,T=this.fill,j=this.shadow,E,M=[],D,A=u.indexOf("COMMON_PARTS"),I=h.additionalTransform;return y&&(y.clipPathId="CLIPPATH_"+e.Object.__uid++,D='<clipPath id="'+y.clipPathId+`" >
`+y.toClipPathSVG(l)+`</clipPath>
`),w&&M.push("<g ",m,this.getSvgCommons(),` >
`),M.push("<g ",this.getSvgTransform(!1),w?"":m+this.getSvgCommons(),` >
`),E=[c,p,a?"":this.addPaintOrder()," ",I?'transform="'+I+'" ':""].join(""),u[A]=E,T&&T.toLive&&M.push(T.toSVG(this)),C&&C.toLive&&M.push(C.toSVG(this)),j&&M.push(j.toSVG(this)),y&&M.push(D),M.push(u.join("")),M.push(`</g>
`),w&&M.push(`</g>
`),l?l(M.join("")):M.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=e.util.object.extend,s="stateProperties";function u(a,l,c){var m={},y=!0;c.forEach(function(p){m[p]=a[p]}),f(a[l],m,y)}function h(a,l,c){if(a===l)return!0;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(var m=0,y=a.length;m<y;m++)if(!h(a[m],l[m]))return!1;return!0}else if(a&&typeof a=="object"){var p=Object.keys(a),w;if(!l||typeof l!="object"||!c&&p.length!==Object.keys(l).length)return!1;for(var m=0,y=p.length;m<y;m++)if(w=p[m],!(w==="canvas"||w==="group")&&!h(a[w],l[w]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(a){a=a||s;var l="_"+a;return Object.keys(this[l]).length<this[a].length?!0:!h(this[l],this,!0)},saveState:function(a){var l=a&&a.propertySet||s,c="_"+l;return this[c]?(u(this,c,this[l]),a&&a.stateProperties&&u(this,c,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var l=a.propertySet||s;return a.propertySet=l,this["_"+l]={},this.saveState(a),this}})}(),function(){var f=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=s.x,a=s.y,l,c,m=Object.keys(this.oCoords),y=m.length-1,p;for(this.__corner=0;y>=0;y--)if(p=m[y],!!this.isControlVisible(p)&&(c=this._getImageLines(u?this.oCoords[p].touchCorner:this.oCoords[p].corner),l=this._findCrossPoints({x:h,y:a},c),l!==0&&l%2===1))return this.__corner=p,p;return!1},forEachControl:function(s){for(var u in this.controls)s(this.controls[u],u,this)},_setCornerCoords:function(){var s=this.oCoords;for(var u in s){var h=this.controls[u];s[u].corner=h.calcCornerCoords(this.angle,this.cornerSize,s[u].x,s[u].y,!1),s[u].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,s[u].x,s[u].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var u=this.getCenterPoint(),h=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return s.translate(u.x,u.y),s.scale(1/a[0],1/a[3]),s.rotate(f(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-h.x/2,-h.y/2,h.x,h.y),s.restore(),this},drawBorders:function(s,u){u=u||{};var h=this._calculateCurrentDimensions(),a=this.borderScaleFactor,l=h.x+a,c=h.y+a,m=typeof u.hasControls<"u"?u.hasControls:this.hasControls,y=!1;return s.save(),s.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(s,u.borderDashArray||this.borderDashArray),s.strokeRect(-l/2,-c/2,l,c),m&&(s.beginPath(),this.forEachControl(function(p,w,C){p.withConnection&&p.getVisibility(C,w)&&(y=!0,s.moveTo(p.x*l,p.y*c),s.lineTo(p.x*l+p.offsetX,p.y*c+p.offsetY))}),y&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,u,h){h=h||{};var a=e.util.sizeAfterTransform(this.width,this.height,u),l=this.strokeWidth,c=this.strokeUniform,m=this.borderScaleFactor,y=a.x+l*(c?this.canvas.getZoom():u.scaleX)+m,p=a.y+l*(c?this.canvas.getZoom():u.scaleY)+m;return s.save(),this._setLineDash(s,h.borderDashArray||this.borderDashArray),s.strokeStyle=h.borderColor||this.borderColor,s.strokeRect(-y/2,-p/2,y,p),s.restore(),this},drawControls:function(s,u){u=u||{},s.save();var h=this.canvas.getRetinaScaling(),a,l;return s.setTransform(h,0,0,h,0,0),s.strokeStyle=s.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(c,m,y){l=y.oCoords[m],c.getVisibility(y,m)&&(a&&(l=e.util.transformPoint(l,a)),c.render(s,l.x,l.y,u,y))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=u,this},setControlsVisibility:function(s){s||(s={});for(var u in s)this.setControlVisible(u,s[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,s){s=s||{};var u=function(){},h=s.onComplete||u,a=s.onChange||u,l=this;return e.util.animate({target:this,startValue:f.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){f.set("left",c),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),h()}})},fxCenterObjectV:function(f,s){s=s||{};var u=function(){},h=s.onComplete||u,a=s.onChange||u,l=this;return e.util.animate({target:this,startValue:f.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){f.set("top",c),l.requestRenderAll(),a()},onComplete:function(){f.setCoords(),h()}})},fxRemove:function(f,s){s=s||{};var u=function(){},h=s.onComplete||u,a=s.onChange||u,l=this;return e.util.animate({target:this,startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){f.set("opacity",c),l.requestRenderAll(),a()},onComplete:function(){l.remove(f),h()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],s,u,h=[];for(s in arguments[0])f.push(s);for(var a=0,l=f.length;a<l;a++)s=f[a],u=a!==l-1,h.push(this._animate(s,arguments[0][s],arguments[1],u));return h}else return this._animate.apply(this,arguments)},_animate:function(f,s,u,h){var a=this,l;s=s.toString(),u?u=e.util.object.clone(u):u={},~f.indexOf(".")&&(l=f.split("."));var c=a.colorProperties.indexOf(f)>-1||l&&a.colorProperties.indexOf(l[1])>-1,m=l?this.get(l[0])[l[1]]:this.get(f);"from"in u||(u.from=m),c||(~s.indexOf("=")?s=m+parseFloat(s.replace("=","")):s=parseFloat(s));var y={target:this,startValue:u.from,endValue:s,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(p,w,C){return u.abort.call(a,p,w,C)},onChange:function(p,w,C){l?a[l[0]][l[1]]=p:a.set(f,p),!h&&u.onChange&&u.onChange(p,w,C)},onComplete:function(p,w,C){h||(a.setCoords(),u.onComplete&&u.onComplete(p,w,C))}};return c?e.util.animateColor(y.startValue,y.endValue,y.duration,y):e.util.animate(y)}}),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,m){c||(c=[0,0,0,0]),this.callSuper("initialize",m),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(m)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,m){return this.callSuper("_set",c,m),typeof a[c]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var m=this.calcLinePoints();c.moveTo(m.x1,m.y1),c.lineTo(m.x2,m.y2),c.lineWidth=this.strokeWidth;var y=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=y},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return u(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,m=this.y1<=this.y2?-1:1,y=c*this.width*.5,p=m*this.height*.5,w=c*this.width*-.5,C=m*this.height*-.5;return{x1:y,x2:w,y1:p,y2:C}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(c,m,y){y=y||{};var p=s.parseAttributes(c,s.Line.ATTRIBUTE_NAMES),w=[p.x1||0,p.y1||0,p.x2||0,p.y2||0];m(new s.Line(w,u(p,y)))},s.Line.fromObject=function(c,m){function y(w){delete w.points,m&&m(w)}var p=h(c,!0);p.points=[c.x1,c.y1,c.x2,c.y2],s.Object._fromObject("Line",p,y,"points")};function l(c,m){var y=c.origin,p=c.axis1,w=c.axis2,C=c.dimension,T=m.nearest,j=m.center,E=m.farthest;return function(){switch(this.get(y)){case T:return Math.min(this.get(p),this.get(w));case j:return Math.min(this.get(p),this.get(w))+.5*this.get(C);case E:return Math.max(this.get(p),this.get(w))}}}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,l){return this.callSuper("_set",a,l),a==="radius"&&this.setRadius(l),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,l=0,c=0,m=(this.endAngle-this.startAngle)%360;if(m===0)a=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+c+'" ','r="',this.radius,`" />
`];else{var y=u(this.startAngle),p=u(this.endAngle),w=this.radius,C=s.util.cos(y)*w,T=s.util.sin(y)*w,j=s.util.cos(p)*w,E=s.util.sin(p)*w,M=m>180?"1":"0";a=['<path d="M '+C+" "+T," A "+w+" "+w," 0 ",+M+" 1"," "+j+" "+E,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(a,l){var c=s.parseAttributes(a,s.Circle.ATTRIBUTE_NAMES);if(!h(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,l(new s.Circle(c))};function h(a){return"radius"in a&&a.radius>=0}s.Circle.fromObject=function(a,l){s.Object._fromObject("Circle",a,l)}}(t),function(f){var s=f.fabric||(f.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(u){var h=this.width/2,a=this.height/2;u.beginPath(),u.moveTo(-h,a),u.lineTo(0,-a),u.lineTo(h,a),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,h=this.height/2,a=[-u+" "+h,"0 "+-h,u+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),s.Triangle.fromObject=function(u,h){return s.Object._fromObject("Triangle",u,h)}}(t),function(f){var s=f.fabric||(f.fabric={}),u=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,a){switch(this.callSuper("_set",h,a),h){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,u,!1),h.restore(),this._renderPaintInOrder(h)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(h,a){var l=s.parseAttributes(h,s.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,a(new s.Ellipse(l))},s.Ellipse.fromObject=function(h,a){s.Object._fromObject("Ellipse",h,a)}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var a=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,m=this.height,y=-this.width/2,p=-this.height/2,w=a!==0||l!==0,C=1-.5522847498;h.beginPath(),h.moveTo(y+a,p),h.lineTo(y+c-a,p),w&&h.bezierCurveTo(y+c-C*a,p,y+c,p+C*l,y+c,p+l),h.lineTo(y+c,p+m-l),w&&h.bezierCurveTo(y+c,p+m-C*l,y+c-C*a,p+m,y+c-a,p+m),h.lineTo(y+a,p+m),w&&h.bezierCurveTo(y+C*a,p+m,y,p+m-C*l,y,p+m-l),h.lineTo(y,p+l),w&&h.bezierCurveTo(y,p+C*l,y+C*a,p,y+a,p),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(h,a,l){if(!h)return a(null);l=l||{};var c=s.parseAttributes(h,s.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var m=new s.Rect(u(l?s.util.object.clone(l):{},c));m.visible=m.visible&&m.width>0&&m.height>0,a(m)},s.Rect.fromObject=function(h,a){return s.Object._fromObject("Rect",h,a)}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.util.array.min,a=s.util.array.max,l=s.util.toFixed,c=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(m,y){y=y||{},this.points=m||[],this.callSuper("initialize",y),this._setPositionDimensions(y)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(m){var y=this._calcDimensions(m),p,w=this.exactBoundingBox?this.strokeWidth:0;this.width=y.width-w,this.height=y.height-w,m.fromSVG||(p=this.translateToGivenOrigin({x:y.left-this.strokeWidth/2+w/2,y:y.top-this.strokeWidth/2+w/2},"left","top",this.originX,this.originY)),typeof m.left>"u"&&(this.left=m.fromSVG?y.left:p.x),typeof m.top>"u"&&(this.top=m.fromSVG?y.top:p.y),this.pathOffset={x:y.left+this.width/2+w/2,y:y.top+this.height/2+w/2}},_calcDimensions:function(){var m=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,y=h(m,"x")||0,p=h(m,"y")||0,w=a(m,"x")||0,C=a(m,"y")||0,T=w-y,j=C-p;return{left:y,top:p,width:T,height:j}},toObject:function(m){return u(this.callSuper("toObject",m),{points:this.points.concat()})},_toSVG:function(){for(var m=[],y=this.pathOffset.x,p=this.pathOffset.y,w=s.Object.NUM_FRACTION_DIGITS,C=0,T=this.points.length;C<T;C++)m.push(l(this.points[C].x-y,w),",",l(this.points[C].y-p,w)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',m.join(""),`" />
`]},commonRender:function(m){var y,p=this.points.length,w=this.pathOffset.x,C=this.pathOffset.y;if(!p||isNaN(this.points[p-1].y))return!1;m.beginPath(),m.moveTo(this.points[0].x-w,this.points[0].y-C);for(var T=0;T<p;T++)y=this.points[T],m.lineTo(y.x-w,y.y-C);return!0},_render:function(m){this.commonRender(m)&&this._renderPaintInOrder(m)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(m){return function(y,p,w){if(!y)return p(null);w||(w={});var C=s.parsePointsAttribute(y.getAttribute("points")),T=s.parseAttributes(y,s[m].ATTRIBUTE_NAMES);T.fromSVG=!0,p(new s[m](C,u(T,w)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(m,y){return s.Object._fromObject("Polyline",m,y,"points")}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(h,a){s.Object._fromObject("Polygon",h,a,"points")}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.array.min,h=s.util.array.max,a=s.util.object.extend,l=s.util.object.clone,c=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(m,y){y=l(y||{}),delete y.path,this.callSuper("initialize",y),this._setPath(m||[],y)},_setPath:function(m,y){this.path=s.util.makePathSimpler(Array.isArray(m)?m:s.util.parsePath(m)),s.Polyline.prototype._setPositionDimensions.call(this,y||{})},_renderPathCommands:function(m){var y,p=0,w=0,C=0,T=0,j=0,E=0,M=-this.pathOffset.x,D=-this.pathOffset.y;m.beginPath();for(var A=0,I=this.path.length;A<I;++A)switch(y=this.path[A],y[0]){case"L":C=y[1],T=y[2],m.lineTo(C+M,T+D);break;case"M":C=y[1],T=y[2],p=C,w=T,m.moveTo(C+M,T+D);break;case"C":C=y[5],T=y[6],j=y[3],E=y[4],m.bezierCurveTo(y[1]+M,y[2]+D,j+M,E+D,C+M,T+D);break;case"Q":m.quadraticCurveTo(y[1]+M,y[2]+D,y[3]+M,y[4]+D),C=y[3],T=y[4],j=y[1],E=y[2];break;case"z":case"Z":C=p,T=w,m.closePath();break}},_render:function(m){this._renderPathCommands(m),this._renderPaintInOrder(m)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(m){return a(this.callSuper("toObject",m),{path:this.path.map(function(y){return y.slice()})})},toDatalessObject:function(m){var y=this.toObject(["sourcePath"].concat(m));return y.sourcePath&&delete y.path,y},_toSVG:function(){var m=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',m,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var m=s.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,m)+", "+c(-this.pathOffset.y,m)+")"},toClipPathSVG:function(m){var y=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:y})},toSVG:function(m){var y=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:m,additionalTransform:y})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var m=[],y=[],p,w=0,C=0,T=0,j=0,E,M=0,D=this.path.length;M<D;++M){switch(p=this.path[M],p[0]){case"L":T=p[1],j=p[2],E=[];break;case"M":T=p[1],j=p[2],w=T,C=j,E=[];break;case"C":E=s.util.getBoundsOfCurve(T,j,p[1],p[2],p[3],p[4],p[5],p[6]),T=p[5],j=p[6];break;case"Q":E=s.util.getBoundsOfCurve(T,j,p[1],p[2],p[1],p[2],p[3],p[4]),T=p[3],j=p[4];break;case"z":case"Z":T=w,j=C;break}E.forEach(function(te){m.push(te.x),y.push(te.y)}),m.push(T),y.push(j)}var A=u(m)||0,I=u(y)||0,X=h(m)||0,oe=h(y)||0,Z=X-A,ae=oe-I;return{left:A,top:I,width:Z,height:ae}}}),s.Path.fromObject=function(m,y){if(typeof m.sourcePath=="string"){var p=m.sourcePath;s.loadSVGFromURL(p,function(w){var C=w[0];C.setOptions(m),m.clipPath?s.util.enlivenObjects([m.clipPath],function(T){C.clipPath=T[0],y&&y(C)}):y&&y(C)})}else s.Object._fromObject("Path",m,y,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(m,y,p){var w=s.parseAttributes(m,s.Path.ATTRIBUTE_NAMES);w.fromSVG=!0,y(new s.Path(w.d,a(w,p)))}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.array.min,h=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,l,c){l=l||{},this._objects=[],c&&this.callSuper("initialize",l),this._objects=a||[];for(var m=this._objects.length;m--;)this._objects[m].group=this;if(c)this._updateObjectsACoords();else{var y=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),y||this._calcBounds(),this._updateObjectsCoords(y),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,l=this._objects.length;l--;)this._objects[l].setCoords(a)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],l)},_updateObjectCoords:function(a,l){var c=a.left,m=a.top,y=!0;a.set({left:c-l.x,top:m-l.y}),a.group=this,a.setCoords(y)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var l=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),a&&(l&&s.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,l){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(a,l);if(a==="canvas")for(;c--;)this._objects[c]._set(a,l);s.Object.prototype._set.call(this,a,l)},toObject:function(a){var l=this.includeDefaultValues,c=this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){var p=y.includeDefaultValues;y.includeDefaultValues=l;var w=y.toObject(a);return y.includeDefaultValues=p,w}),m=s.Object.prototype.toObject.call(this,a);return m.objects=c,m},toDatalessObject:function(a){var l,c=this.sourcePath;if(c)l=c;else{var m=this.includeDefaultValues;l=this._objects.map(function(p){var w=p.includeDefaultValues;p.includeDefaultValues=m;var C=p.toDatalessObject(a);return p.includeDefaultValues=w,C})}var y=s.Object.prototype.toDatalessObject.call(this,a);return y.objects=l,y},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=s.Object.prototype.shouldCache.call(this);if(a){for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,l=this._objects.length;a<l;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var l=0,c=this._objects.length;l<c;l++)this._objects[l].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var l=0,c=this._objects.length;l<c;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var m=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-y/2,m,y)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(l){s.util.addTransformToObject(l,a),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,l=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var m=new s.ActiveSelection([]);return m.set(c),m.type="activeSelection",l.remove(this),a.forEach(function(y){y.group=m,y.dirty=!0,l.add(y)}),m.canvas=l,m._objects=a,l._activeObject=m,m.setCoords(),m}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(l){l.setCoords(a)}),this},_calcBounds:function(a){for(var l=[],c=[],m,y,p,w=["tr","br","bl","tl"],C=0,T=this._objects.length,j,E=w.length;C<T;++C){for(m=this._objects[C],p=m.calcACoords(),j=0;j<E;j++)y=w[j],l.push(p[y].x),c.push(p[y].y);m.aCoords=p}this._getBounds(l,c,a)},_getBounds:function(a,l,c){var m=new s.Point(u(a),u(l)),y=new s.Point(h(a),h(l)),p=m.y||0,w=m.x||0,C=y.x-m.x||0,T=y.y-m.y||0;this.width=C,this.height=T,c||this.setPositionByOrigin({x:w,y:p},"left","top")},_toSVG:function(a){for(var l=["<g ","COMMON_PARTS",` >
`],c=0,m=this._objects.length;c<m;c++)l.push("		",this._objects[c].toSVG(a));return l.push(`</g>
`),l},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),l].join("")},toClipPathSVG:function(a){for(var l=[],c=0,m=this._objects.length;c<m;c++)l.push("	",this._objects[c].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(l,{reviver:a})}}),s.Group.fromObject=function(a,l){var c=a.objects,m=s.util.object.clone(a,!0);if(delete m.objects,typeof c=="string"){s.loadSVGFromURL(c,function(y){var p=s.util.groupSVGElements(y,a,c),w=m.clipPath;delete m.clipPath,p.set(m),w?s.util.enlivenObjects([w],function(C){p.clipPath=C[0],l&&l(p)}):l&&l(p)});return}s.util.enlivenObjects(c,function(y){s.util.enlivenObjectEnlivables(a,m,function(){l&&l(new s.Group(y,m,!0))})})})}(t),function(f){var s=f.fabric||(f.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(u,h){h=h||{},this._objects=u||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var h=s.Object.prototype.toObject.call(this),a=new s.Group([]);if(delete h.type,a.set(h),u.forEach(function(c){c.canvas.remove(c),c.group=a}),a._objects=u,!this.canvas)return a;var l=this.canvas;return l.add(a),l._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,h,a){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,h),a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var l=0,c=this._objects.length;l<c;l++)this._objects[l]._renderControls(u,a);u.restore()}}),s.ActiveSelection.fromObject=function(u,h){s.util.enlivenObjects(u.objects,function(a){delete u.objects,h&&h(new s.ActiveSelection(a,u,!0))})})}(t),function(f){var s=e.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,h){h||(h={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",h),this._initElement(u,h)},getElement:function(){return this._element||{}},setElement:function(u,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var h=e.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){e.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,a=this.height/2;u.beginPath(),u.moveTo(-h,-a),u.lineTo(h,-a),u.lineTo(h,a),u.lineTo(-h,a),u.lineTo(-h,-a),u.closePath()}},toObject:function(u){var h=[];this.filters.forEach(function(l){l&&h.push(l.toObject())});var a=s(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],h=[],a,l=this._element,c=-this.width/2,m=-this.height/2,y="",p="";if(!l)return[];if(this.hasCrop()){var w=e.Object.__uid++;u.push('<clipPath id="imageCrop_'+w+`">
`,'	<rect x="'+c+'" y="'+m+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),y=' clip-path="url(#imageCrop_'+w+')" '}if(this.imageSmoothing||(p='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',m-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,p,'"',y,`></image>
`),this.stroke||this.strokeDashArray){var C=this.fill;this.fill=null,a=["	<rect ",'x="',c,'" y="',m,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=C}return this.paintFirst!=="fill"?u=u.concat(a,h):u=u.concat(h,a),u},getSrc:function(u){var h=u?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(u,h,a){return e.util.loadImage(u,function(l,c){this.setElement(l,a),this._setWidthHeight(),h&&h(this,c)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,h=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),l=a.scaleX,c=a.scaleY,m=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||l>h&&c>h){this._element=m,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=c;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var y=e.util.createCanvasElement(),p=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,w=m.width,C=m.height;y.width=w,y.height=C,this._element=y,this._lastScaleX=u.scaleX=l,this._lastScaleY=u.scaleY=c,e.filterBackend.applyFilters([u],m,w,C,this._element,p),this._filterScalingX=y.width/this._originalElement.width,this._filterScalingY=y.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(m){return m&&!m.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,a=h.naturalWidth||h.width,l=h.naturalHeight||h.height;if(this._element===this._originalElement){var c=e.util.createCanvasElement();c.width=a,c.height=l,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,l),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(u,this._originalElement,a,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){e.util.setImageSmoothing(u,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var h=this._element;if(h){var a=this._filterScalingX,l=this._filterScalingY,c=this.width,m=this.height,y=Math.min,p=Math.max,w=p(this.cropX,0),C=p(this.cropY,0),T=h.naturalWidth||h.width,j=h.naturalHeight||h.height,E=w*a,M=C*l,D=y(c*a,T-E),A=y(m*l,j-M),I=-c/2,X=-m/2,oe=y(c,T/a-w),Z=y(m,j/l-C);h&&u.drawImage(h,E,M,D,A,I,X,oe,Z)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,h){this.setElement(e.util.getById(u),h),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,h){u&&u.length?e.util.enlivenObjects(u,function(a){h&&h(a)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(u){u||(u={});var h=this.getElement();this.width=u.width||h.naturalWidth||h.width||0,this.height=u.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var u=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,a=this._element.height,l=1,c=1,m=0,y=0,p=0,w=0,C,T=this.width,j=this.height,E={width:T,height:j};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(l=c=e.util.findScaleToFit(this._element,E),C=(T-h*l)/2,u.alignX==="Min"&&(m=-C),u.alignX==="Max"&&(m=C),C=(j-a*c)/2,u.alignY==="Min"&&(y=-C),u.alignY==="Max"&&(y=C)),u.meetOrSlice==="slice"&&(l=c=e.util.findScaleToCover(this._element,E),C=h-T/l,u.alignX==="Mid"&&(p=C/2),u.alignX==="Max"&&(p=C),C=a-j/c,u.alignY==="Mid"&&(w=C/2),u.alignY==="Max"&&(w=C),h=T/l,a=j/c)):(l=T/h,c=j/a),{width:h,height:a,scaleX:l,scaleY:c,offsetLeft:m,offsetTop:y,cropX:p,cropY:w}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(u,h){var a=e.util.object.clone(u);e.util.loadImage(a.src,function(l,c){if(c){h&&h(null,!0);return}e.Image.prototype._initFilters.call(a,a.filters,function(m){a.filters=m||[],e.Image.prototype._initFilters.call(a,[a.resizeFilter],function(y){a.resizeFilter=y[0],e.util.enlivenObjectEnlivables(a,a,function(){var p=new e.Image(l,a);h(p,!1)})})})},null,a.crossOrigin)},e.Image.fromURL=function(u,h,a){e.util.loadImage(u,function(l,c){h&&h(new e.Image(l,a),c)},null,a&&a.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(u,h,a){var l=e.parseAttributes(u,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(l["xlink:href"],h,s(a?e.util.object.clone(a):{},l))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(f){f=f||{};var s=function(){},u=f.onComplete||s,h=f.onChange||s,a=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){a.rotate(l),h()},onComplete:function(){a.setCoords(),u()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function f(u,h){var a="precision "+h+` float;
void main(){}`,l=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(l,a),u.compileShader(l),!!u.getShaderParameter(l,u.COMPILE_STATUS)}e.isWebglSupported=function(u){if(e.isLikelyNode)return!1;u=u||e.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),a=h.getContext("webgl")||h.getContext("experimental-webgl"),l=!1;if(a){e.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),l=e.maxTextureSize>=u;for(var c=["highp","mediump","lowp"],m=0;m<3;m++)if(f(a,c[m])){e.webGlPrecision=c[m];break}}return this.isSupported=l,l},e.WebglFilterBackend=s;function s(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(u,h){this.dispose(),this.createWebGLCanvas(u,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,h)},chooseFastestCopyGLTo2DMethod:function(u,h){var a=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var c=typeof ArrayBuffer<"u",m=typeof Uint8ClampedArray<"u";if(a&&l&&c&&m){var y=e.util.createCanvasElement(),p=new ArrayBuffer(u*h*4);if(e.forceGLPutImageData){this.imageBuffer=p,this.copyGLTo2D=S;return}var w={imageBuffer:p,destinationWidth:u,destinationHeight:h,targetCanvas:y},C,T,j;y.width=u,y.height=h,C=window.performance.now(),v.call(w,this.gl,w),T=window.performance.now()-C,C=window.performance.now(),S.call(w,this.gl,w),j=window.performance.now()-C,T>j?(this.imageBuffer=p,this.copyGLTo2D=S):this.copyGLTo2D=v}},createWebGLCanvas:function(u,h){var a=e.util.createCanvasElement();a.width=u,a.height=h;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=a.getContext("webgl",l);c||(c=a.getContext("experimental-webgl",l)),c&&(c.clearColor(0,0,0,0),this.canvas=a,this.gl=c)},applyFilters:function(u,h,a,l,c,m){var y=this.gl,p;m&&(p=this.getCachedTexture(m,h));var w={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:a,sourceHeight:l,destinationWidth:a,destinationHeight:l,context:y,sourceTexture:this.createTexture(y,a,l,!p&&h),targetTexture:this.createTexture(y,a,l),originalTexture:p||this.createTexture(y,a,l,!p&&h),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},C=y.createFramebuffer();return y.bindFramebuffer(y.FRAMEBUFFER,C),u.forEach(function(T){T&&T.applyTo(w)}),x(w),this.copyGLTo2D(y,w),y.bindTexture(y.TEXTURE_2D,null),y.deleteTexture(w.sourceTexture),y.deleteTexture(w.targetTexture),y.deleteFramebuffer(C),c.getContext("2d").setTransform(1,0,0,1,0,0),w},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,h,a,l,c){var m=u.createTexture();return u.bindTexture(u.TEXTURE_2D,m),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),l?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,l):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,h,a,0,u.RGBA,u.UNSIGNED_BYTE,null),m},getCachedTexture:function(u,h){if(this.textureCache[u])return this.textureCache[u];var a=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[u]=a,a},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:v,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,h={renderer:"",vendor:""};if(!u)return h;var a=u.getExtension("WEBGL_debug_renderer_info");if(a){var l=u.getParameter(a.UNMASKED_RENDERER_WEBGL),c=u.getParameter(a.UNMASKED_VENDOR_WEBGL);l&&(h.renderer=l.toLowerCase()),c&&(h.vendor=c.toLowerCase())}return this.gpuInfo=h,h}}}();function x(f){var s=f.targetCanvas,u=s.width,h=s.height,a=f.destinationWidth,l=f.destinationHeight;(u!==a||h!==l)&&(s.width=a,s.height=l)}function v(f,s){var u=f.canvas,h=s.targetCanvas,a=h.getContext("2d");a.translate(0,h.height),a.scale(1,-1);var l=u.height-h.height;a.drawImage(u,0,l,h.width,h.height,0,0,h.width,h.height)}function S(f,s){var u=s.targetCanvas,h=u.getContext("2d"),a=s.destinationWidth,l=s.destinationHeight,c=a*l*4,m=new Uint8Array(this.imageBuffer,0,c),y=new Uint8ClampedArray(this.imageBuffer,0,c);f.readPixels(0,0,a,l,f.RGBA,f.UNSIGNED_BYTE,m);var p=new ImageData(y,a,l);h.putImageData(p,0,0)}(function(){var f=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(u,h,a,l,c){var m=c.getContext("2d");m.drawImage(h,0,0,a,l);var y=m.getImageData(0,0,a,l),p=m.getImageData(0,0,a,l),w={sourceWidth:a,sourceHeight:l,imageData:y,originalEl:h,originalImageData:p,canvasEl:c,ctx:m,filterBackend:this};return u.forEach(function(C){C.applyTo(w)}),(w.imageData.width!==a||w.imageData.height!==l)&&(c.width=w.imageData.width,c.height=w.imageData.height),m.putImageData(w.imageData,0,0),w}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var s in f)this[s]=f[s]},createProgram:function(f,s,u){s=s||this.fragmentSource,u=u||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var h=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(h,u),f.compileShader(h),!f.getShaderParameter(h,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(h));var a=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(a,s),f.compileShader(a),!f.getShaderParameter(a,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(a));var l=f.createProgram();if(f.attachShader(l,h),f.attachShader(l,a),f.linkProgram(l),!f.getProgramParameter(l,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(l));var c=this.getAttributeLocations(f,l),m=this.getUniformLocations(f,l)||{};return m.uStepW=f.getUniformLocation(l,"uStepW"),m.uStepH=f.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:c,uniformLocations:m}},getAttributeLocations:function(f,s){return{aPosition:f.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,s,u){var h=s.aPosition,a=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,a),f.enableVertexAttribArray(h),f.vertexAttribPointer(h,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,u,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var s=f.context,u,h;f.passes>1?(u=f.destinationWidth,h=f.destinationHeight,(f.sourceWidth!==u||f.sourceHeight!==h)&&(s.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(s,u,h)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,f.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(f){f.passes--,f.pass++;var s=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=s},isNeutralState:function(){var f=this.mainParameter,s=e.Image.filters[this.type].prototype;if(f)if(Array.isArray(s[f])){for(var u=s[f].length;u--;)if(this[f][u]!==s[f][u])return!1;return!0}else return s[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var s=f.context,u=this.retrieveShader(f);f.pass===0&&f.originalTexture?s.bindTexture(s.TEXTURE_2D,f.originalTexture):s.bindTexture(s.TEXTURE_2D,f.sourceTexture),s.useProgram(u.program),this.sendAttributeData(s,u.attributeLocations,f.aPosition),s.uniform1f(u.uniformLocations.uStepW,1/f.sourceWidth),s.uniform1f(u.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(s,u.uniformLocations),s.viewport(0,0,f.destinationWidth,f.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,s,u){f.activeTexture(u),f.bindTexture(f.TEXTURE_2D,s),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,s){f.activeTexture(s),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var s=document.createElement("canvas");s.width=f.sourceWidth,s.height=f.sourceHeight,f.helpLayer=s}},toObject:function(){var f={type:this.type},s=this.mainParameter;return s&&(f[s]=this[s]),f},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(f,s){var u=new e.Image.filters[f.type](f);return s&&s(u),u},function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.ColorMatrix=h(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l=a.imageData,c=l.data,m=c.length,y=this.matrix,p,w,C,T,j,E=this.colorsOnly;for(j=0;j<m;j+=4)p=c[j],w=c[j+1],C=c[j+2],E?(c[j]=p*y[0]+w*y[1]+C*y[2]+y[4]*255,c[j+1]=p*y[5]+w*y[6]+C*y[7]+y[9]*255,c[j+2]=p*y[10]+w*y[11]+C*y[12]+y[14]*255):(T=c[j+3],c[j]=p*y[0]+w*y[1]+C*y[2]+T*y[3]+y[4]*255,c[j+1]=p*y[5]+w*y[6]+C*y[7]+T*y[8]+y[9]*255,c[j+2]=p*y[10]+w*y[11]+C*y[12]+T*y[13]+y[14]*255,c[j+3]=p*y[15]+w*y[16]+C*y[17]+T*y[18]+y[19]*255)},getUniformLocations:function(a,l){return{uColorMatrix:a.getUniformLocation(l,"uColorMatrix"),uConstants:a.getUniformLocation(l,"uConstants")}},sendUniformData:function(a,l){var c=this.matrix,m=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],y=[c[4],c[9],c[14],c[19]];a.uniformMatrix4fv(l.uColorMatrix,!1,m),a.uniform4fv(l.uConstants,y)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Brightness=h(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var l=a.imageData,c=l.data,m,y=c.length,p=Math.round(this.brightness*255);for(m=0;m<y;m+=4)c[m]=c[m]+p,c[m+1]=c[m+1]+p,c[m+2]=c[m+2]+p}},getUniformLocations:function(a,l){return{uBrightness:a.getUniformLocation(l,"uBrightness")}},sendUniformData:function(a,l){a.uniform1f(l.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.Image.filters,a=s.util.createClass;h.Convolute=a(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var c=Math.sqrt(this.matrix.length),m=this.type+"_"+c+"_"+(this.opaque?1:0),y=this.fragmentSource[m];return l.programCache.hasOwnProperty(m)||(l.programCache[m]=this.createProgram(l.context,y)),l.programCache[m]},applyTo2d:function(l){var c=l.imageData,m=c.data,y=this.matrix,p=Math.round(Math.sqrt(y.length)),w=Math.floor(p/2),C=c.width,T=c.height,j=l.ctx.createImageData(C,T),E=j.data,M=this.opaque?1:0,D,A,I,X,oe,Z,ae,te,G,z,q,Y,R;for(q=0;q<T;q++)for(z=0;z<C;z++){for(oe=(q*C+z)*4,D=0,A=0,I=0,X=0,R=0;R<p;R++)for(Y=0;Y<p;Y++)ae=q+R-w,Z=z+Y-w,!(ae<0||ae>=T||Z<0||Z>=C)&&(te=(ae*C+Z)*4,G=y[R*p+Y],D+=m[te]*G,A+=m[te+1]*G,I+=m[te+2]*G,M||(X+=m[te+3]*G));E[oe]=D,E[oe+1]=A,E[oe+2]=I,M?E[oe+3]=m[oe+3]:E[oe+3]=X}l.imageData=j},getUniformLocations:function(l,c){return{uMatrix:l.getUniformLocation(c,"uMatrix"),uOpaque:l.getUniformLocation(c,"uOpaque"),uHalfSize:l.getUniformLocation(c,"uHalfSize"),uSize:l.getUniformLocation(c,"uSize")}},sendUniformData:function(l,c){l.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Grayscale=h(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var l=a.imageData,c=l.data,m,y=c.length,p,w=this.mode;for(m=0;m<y;m+=4)w==="average"?p=(c[m]+c[m+1]+c[m+2])/3:w==="lightness"?p=(Math.min(c[m],c[m+1],c[m+2])+Math.max(c[m],c[m+1],c[m+2]))/2:w==="luminosity"&&(p=.21*c[m]+.72*c[m+1]+.07*c[m+2]),c[m]=p,c[m+1]=p,c[m+2]=p},retrieveShader:function(a){var l=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(l)){var c=this.fragmentSource[this.mode];a.programCache[l]=this.createProgram(a.context,c)}return a.programCache[l]},getUniformLocations:function(a,l){return{uMode:a.getUniformLocation(l,"uMode")}},sendUniformData:function(a,l){var c=1;a.uniform1i(l.uMode,c)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Invert=h(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var l=a.imageData,c=l.data,m,y=c.length;for(m=0;m<y;m+=4)c[m]=255-c[m],c[m+1]=255-c[m+1],c[m+2]=255-c[m+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,l){return{uInvert:a.getUniformLocation(l,"uInvert")}},sendUniformData:function(a,l){a.uniform1i(l.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.Image.filters,a=s.util.createClass;h.Noise=a(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var c=l.imageData,m=c.data,y,p=m.length,w=this.noise,C;for(y=0,p=m.length;y<p;y+=4)C=(.5-Math.random())*w,m[y]+=C,m[y+1]+=C,m[y+2]+=C}},getUniformLocations:function(l,c){return{uNoise:l.getUniformLocation(c,"uNoise"),uSeed:l.getUniformLocation(c,"uSeed")}},sendUniformData:function(l,c){l.uniform1f(c.uNoise,this.noise/255),l.uniform1f(c.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Pixelate=h(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var l=a.imageData,c=l.data,m=l.height,y=l.width,p,w,C,T,j,E,M,D,A,I,X;for(w=0;w<m;w+=this.blocksize)for(C=0;C<y;C+=this.blocksize)for(p=w*4*y+C*4,T=c[p],j=c[p+1],E=c[p+2],M=c[p+3],I=Math.min(w+this.blocksize,m),X=Math.min(C+this.blocksize,y),D=w;D<I;D++)for(A=C;A<X;A++)p=D*4*y+A*4,c[p]=T,c[p+1]=j,c[p+2]=E,c[p+3]=M},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,l){return{uBlocksize:a.getUniformLocation(l,"uBlocksize"),uStepW:a.getUniformLocation(l,"uStepW"),uStepH:a.getUniformLocation(l,"uStepH")}},sendUniformData:function(a,l){a.uniform1f(l.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.extend,h=s.Image.filters,a=s.util.createClass;h.RemoveColor=a(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var c=l.imageData,m=c.data,y,p=this.distance*255,w,C,T,j=new s.Color(this.color).getSource(),E=[j[0]-p,j[1]-p,j[2]-p],M=[j[0]+p,j[1]+p,j[2]+p];for(y=0;y<m.length;y+=4)w=m[y],C=m[y+1],T=m[y+2],w>E[0]&&C>E[1]&&T>E[2]&&w<M[0]&&C<M[1]&&T<M[2]&&(m[y+3]=0)},getUniformLocations:function(l,c){return{uLow:l.getUniformLocation(c,"uLow"),uHigh:l.getUniformLocation(c,"uHigh")}},sendUniformData:function(l,c){var m=new s.Color(this.color).getSource(),y=parseFloat(this.distance),p=[0+m[0]/255-y,0+m[1]/255-y,0+m[2]/255-y,1],w=[m[0]/255+y,m[1]/255+y,m[2]/255+y,1];l.uniform4fv(c.uLow,p),l.uniform4fv(c.uHigh,w)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in a)u[l]=h(u.ColorMatrix,{type:l,matrix:a[l],mainParameter:!1,colorsOnly:!0}),s.Image.filters[l].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric,u=s.Image.filters,h=s.util.createClass;u.BlendColor=h(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,c;return a.programCache.hasOwnProperty(l)||(c=this.buildSource(this.mode),a.programCache[l]=this.createProgram(a.context,c)),a.programCache[l]},applyTo2d:function(a){var l=a.imageData,c=l.data,m=c.length,y,p,w,C,T,j,E,M=1-this.alpha;E=new s.Color(this.color).getSource(),y=E[0]*this.alpha,p=E[1]*this.alpha,w=E[2]*this.alpha;for(var D=0;D<m;D+=4)switch(C=c[D],T=c[D+1],j=c[D+2],this.mode){case"multiply":c[D]=C*y/255,c[D+1]=T*p/255,c[D+2]=j*w/255;break;case"screen":c[D]=255-(255-C)*(255-y)/255,c[D+1]=255-(255-T)*(255-p)/255,c[D+2]=255-(255-j)*(255-w)/255;break;case"add":c[D]=C+y,c[D+1]=T+p,c[D+2]=j+w;break;case"diff":case"difference":c[D]=Math.abs(C-y),c[D+1]=Math.abs(T-p),c[D+2]=Math.abs(j-w);break;case"subtract":c[D]=C-y,c[D+1]=T-p,c[D+2]=j-w;break;case"darken":c[D]=Math.min(C,y),c[D+1]=Math.min(T,p),c[D+2]=Math.min(j,w);break;case"lighten":c[D]=Math.max(C,y),c[D+1]=Math.max(T,p),c[D+2]=Math.max(j,w);break;case"overlay":c[D]=y<128?2*C*y/255:255-2*(255-C)*(255-y)/255,c[D+1]=p<128?2*T*p/255:255-2*(255-T)*(255-p)/255,c[D+2]=w<128?2*j*w/255:255-2*(255-j)*(255-w)/255;break;case"exclusion":c[D]=y+C-2*y*C/255,c[D+1]=p+T-2*p*T/255,c[D+2]=w+j-2*w*j/255;break;case"tint":c[D]=y+C*M,c[D+1]=p+T*M,c[D+2]=w+j*M}},getUniformLocations:function(a,l){return{uColor:a.getUniformLocation(l,"uColor")}},sendUniformData:function(a,l){var c=new s.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,a.uniform4fv(l.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric,u=s.Image.filters,h=s.util.createClass;u.BlendImage=h(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,c)),a.programCache[l]},applyToWebGL:function(a){var l=a.context,c=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(l,c,l.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(a,l){return a.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var a=this.image,l=a._element.width,c=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/l,-a.top/c,1]},applyTo2d:function(a){var l=a.imageData,c=a.filterBackend.resources,m=l.data,y=m.length,p=l.width,w=l.height,C,T,j,E,M,D,A,I,X,oe,Z=this.image,ae;c.blendImage||(c.blendImage=s.util.createCanvasElement()),X=c.blendImage,oe=X.getContext("2d"),X.width!==p||X.height!==w?(X.width=p,X.height=w):oe.clearRect(0,0,p,w),oe.setTransform(Z.scaleX,0,0,Z.scaleY,Z.left,Z.top),oe.drawImage(Z._element,0,0,p,w),ae=oe.getImageData(0,0,p,w).data;for(var te=0;te<y;te+=4)switch(M=m[te],D=m[te+1],A=m[te+2],I=m[te+3],C=ae[te],T=ae[te+1],j=ae[te+2],E=ae[te+3],this.mode){case"multiply":m[te]=M*C/255,m[te+1]=D*T/255,m[te+2]=A*j/255,m[te+3]=I*E/255;break;case"mask":m[te+3]=E;break}},getUniformLocations:function(a,l){return{uTransformMatrix:a.getUniformLocation(l,"uTransformMatrix"),uImage:a.getUniformLocation(l,"uImage")}},sendUniformData:function(a,l){var c=this.calculateMatrix();a.uniform1i(l.uImage,1),a.uniformMatrix3fv(l.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(a,l){s.Image.fromObject(a.image,function(c){var m=s.util.object.clone(a);m.image=c,l(new s.Image.filters.BlendImage(m))})}}(t),function(f){var s=f.fabric||(f.fabric={}),u=Math.pow,h=Math.floor,a=Math.sqrt,l=Math.abs,c=Math.round,m=Math.sin,y=Math.ceil,p=s.Image.filters,w=s.util.createClass;p.Resize=w(p.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(C,T){return{uDelta:C.getUniformLocation(T,"uDelta"),uTaps:C.getUniformLocation(T,"uTaps")}},sendUniformData:function(C,T){C.uniform2fv(T.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),C.uniform1fv(T.uTaps,this.taps)},retrieveShader:function(C){var T=this.getFilterWindow(),j=this.type+"_"+T;if(!C.programCache.hasOwnProperty(j)){var E=this.generateShader(T);C.programCache[j]=this.createProgram(C.context,E)}return C.programCache[j]},getFilterWindow:function(){var C=this.tempScale;return Math.ceil(this.lanczosLobes/C)},getTaps:function(){for(var C=this.lanczosCreate(this.lanczosLobes),T=this.tempScale,j=this.getFilterWindow(),E=new Array(j),M=1;M<=j;M++)E[M-1]=C(M*T);return E},generateShader:function(E){for(var T=new Array(E),j=this.fragmentSourceTOP,E,M=1;M<=E;M++)T[M-1]=M+".0 * uDelta";return j+="uniform float uTaps["+E+`];
`,j+=`void main() {
`,j+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,j+=`  float sum = 1.0;
`,T.forEach(function(D,A){j+="  color += texture2D(uTexture, vTexCoord + "+D+") * uTaps["+A+`];
`,j+="  color += texture2D(uTexture, vTexCoord - "+D+") * uTaps["+A+`];
`,j+="  sum += 2.0 * uTaps["+A+`];
`}),j+=`  gl_FragColor = color / sum;
`,j+="}",j},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(C){C.webgl?(C.passes++,this.width=C.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=C.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),C.destinationWidth=this.dW,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceWidth=C.destinationWidth,this.height=C.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),C.destinationHeight=this.dH,this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C),C.sourceHeight=C.destinationHeight):this.applyTo2d(C)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(C){return function(T){if(T>=C||T<=-C)return 0;if(T<11920929e-14&&T>-11920929e-14)return 1;T*=Math.PI;var j=T/C;return m(T)/T*m(j)/j}},applyTo2d:function(C){var T=C.imageData,j=this.scaleX,E=this.scaleY;this.rcpScaleX=1/j,this.rcpScaleY=1/E;var M=T.width,D=T.height,A=c(M*j),I=c(D*E),X;this.resizeType==="sliceHack"?X=this.sliceByTwo(C,M,D,A,I):this.resizeType==="hermite"?X=this.hermiteFastResize(C,M,D,A,I):this.resizeType==="bilinear"?X=this.bilinearFiltering(C,M,D,A,I):this.resizeType==="lanczos"&&(X=this.lanczosResize(C,M,D,A,I)),C.imageData=X},sliceByTwo:function(C,T,j,E,M){var D=C.imageData,A=.5,I=!1,X=!1,oe=T*A,Z=j*A,ae=s.filterBackend.resources,te,G,z=0,q=0,Y=T,R=0;for(ae.sliceByTwo||(ae.sliceByTwo=document.createElement("canvas")),te=ae.sliceByTwo,(te.width<T*1.5||te.height<j)&&(te.width=T*1.5,te.height=j),G=te.getContext("2d"),G.clearRect(0,0,T*1.5,j),G.putImageData(D,0,0),E=h(E),M=h(M);!I||!X;)T=oe,j=Z,E<h(oe*A)?oe=h(oe*A):(oe=E,I=!0),M<h(Z*A)?Z=h(Z*A):(Z=M,X=!0),G.drawImage(te,z,q,T,j,Y,R,oe,Z),z=Y,q=R,R+=Z;return G.getImageData(z,q,E,M)},lanczosResize:function(C,T,j,E,M){function D(L){var B,K,V,F,J,W,ue,ce,ie,Q,me;for(R.x=(L+.5)*Z,O.x=h(R.x),B=0;B<M;B++){for(R.y=(B+.5)*ae,O.y=h(R.y),J=0,W=0,ue=0,ce=0,ie=0,K=O.x-z;K<=O.x+z;K++)if(!(K<0||K>=T)){Q=h(1e3*l(K-R.x)),Y[Q]||(Y[Q]={});for(var le=O.y-q;le<=O.y+q;le++)le<0||le>=j||(me=h(1e3*l(le-R.y)),Y[Q][me]||(Y[Q][me]=oe(a(u(Q*te,2)+u(me*G,2))/1e3)),V=Y[Q][me],V>0&&(F=(le*T+K)*4,J+=V,W+=V*A[F],ue+=V*A[F+1],ce+=V*A[F+2],ie+=V*A[F+3]))}F=(B*E+L)*4,X[F]=W/J,X[F+1]=ue/J,X[F+2]=ce/J,X[F+3]=ie/J}return++L<E?D(L):I}var A=C.imageData.data,I=C.ctx.createImageData(E,M),X=I.data,oe=this.lanczosCreate(this.lanczosLobes),Z=this.rcpScaleX,ae=this.rcpScaleY,te=2/this.rcpScaleX,G=2/this.rcpScaleY,z=y(Z*this.lanczosLobes/2),q=y(ae*this.lanczosLobes/2),Y={},R={},O={};return D(0)},bilinearFiltering:function(C,T,j,E,M){var D,A,I,X,oe,Z,ae,te,G,z,q,Y,R=0,O,L=this.rcpScaleX,B=this.rcpScaleY,K=4*(T-1),V=C.imageData,F=V.data,J=C.ctx.createImageData(E,M),W=J.data;for(ae=0;ae<M;ae++)for(te=0;te<E;te++)for(oe=h(L*te),Z=h(B*ae),G=L*te-oe,z=B*ae-Z,O=4*(Z*T+oe),q=0;q<4;q++)D=F[O+q],A=F[O+4+q],I=F[O+K+q],X=F[O+K+4+q],Y=D*(1-G)*(1-z)+A*G*(1-z)+I*z*(1-G)+X*G*z,W[R++]=Y;return J},hermiteFastResize:function(C,T,j,E,M){for(var D=this.rcpScaleX,A=this.rcpScaleY,I=y(D/2),X=y(A/2),oe=C.imageData,Z=oe.data,ae=C.ctx.createImageData(E,M),te=ae.data,G=0;G<M;G++)for(var z=0;z<E;z++){for(var q=(z+G*E)*4,Y=0,R=0,O=0,L=0,B=0,K=0,V=0,F=(G+.5)*A,J=h(G*A);J<(G+1)*A;J++)for(var W=l(F-(J+.5))/X,ue=(z+.5)*D,ce=W*W,ie=h(z*D);ie<(z+1)*D;ie++){var Q=l(ue-(ie+.5))/I,me=a(ce+Q*Q);me>1&&me<-1||(Y=2*me*me*me-3*me*me+1,Y>0&&(Q=4*(ie+J*T),V+=Y*Z[Q+3],O+=Y,Z[Q+3]<255&&(Y=Y*Z[Q+3]/250),L+=Y*Z[Q],B+=Y*Z[Q+1],K+=Y*Z[Q+2],R+=Y))}te[q]=L/R,te[q+1]=B/R,te[q+2]=K/R,te[q+3]=V/O}return ae},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Contrast=h(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var l=a.imageData,c,y,m=l.data,y=m.length,p=Math.floor(this.contrast*255),w=259*(p+255)/(255*(259-p));for(c=0;c<y;c+=4)m[c]=w*(m[c]-128)+128,m[c+1]=w*(m[c+1]-128)+128,m[c+2]=w*(m[c+2]-128)+128}},getUniformLocations:function(a,l){return{uContrast:a.getUniformLocation(l,"uContrast")}},sendUniformData:function(a,l){a.uniform1f(l.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Saturation=h(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var l=a.imageData,c=l.data,m=c.length,y=-this.saturation,p,w;for(p=0;p<m;p+=4)w=Math.max(c[p],c[p+1],c[p+2]),c[p]+=w!==c[p]?(w-c[p])*y:0,c[p+1]+=w!==c[p+1]?(w-c[p+1])*y:0,c[p+2]+=w!==c[p+2]?(w-c[p+2])*y:0}},getUniformLocations:function(a,l){return{uSaturation:a.getUniformLocation(l,"uSaturation")}},sendUniformData:function(a,l){a.uniform1f(l.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Vibrance=h(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var l=a.imageData,c=l.data,m=c.length,y=-this.vibrance,p,w,C,T;for(p=0;p<m;p+=4)w=Math.max(c[p],c[p+1],c[p+2]),C=(c[p]+c[p+1]+c[p+2])/3,T=Math.abs(w-C)*2/255*y,c[p]+=w!==c[p]?(w-c[p])*T:0,c[p+1]+=w!==c[p+1]?(w-c[p+1])*T:0,c[p+2]+=w!==c[p+2]?(w-c[p+2])*T:0}},getUniformLocations:function(a,l){return{uVibrance:a.getUniformLocation(l,"uVibrance")}},sendUniformData:function(a,l){a.uniform1f(l.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Blur=h(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var l=a.filterBackend.resources,c,m,y=a.imageData.width,p=a.imageData.height;l.blurLayer1||(l.blurLayer1=s.util.createCanvasElement(),l.blurLayer2=s.util.createCanvasElement()),c=l.blurLayer1,m=l.blurLayer2,(c.width!==y||c.height!==p)&&(m.width=c.width=y,m.height=c.height=p);var w=c.getContext("2d"),C=m.getContext("2d"),T=15,j,E,M,D,A=this.blur*.06*.5;for(w.putImageData(a.imageData,0,0),C.clearRect(0,0,y,p),D=-15;D<=T;D++)j=(Math.random()-.5)/4,E=D/T,M=A*E*y+j,C.globalAlpha=1-Math.abs(E),C.drawImage(c,M,j),w.drawImage(m,0,0),C.globalAlpha=1,C.clearRect(0,0,m.width,m.height);for(D=-15;D<=T;D++)j=(Math.random()-.5)/4,E=D/T,M=A*E*p+j,C.globalAlpha=1-Math.abs(E),C.drawImage(c,j,M),w.drawImage(m,0,0),C.globalAlpha=1,C.clearRect(0,0,m.width,m.height);a.ctx.drawImage(c,0,0);var I=a.ctx.getImageData(0,0,c.width,c.height);return w.globalAlpha=1,w.clearRect(0,0,c.width,c.height),I},getUniformLocations:function(a,l){return{delta:a.getUniformLocation(l,"uDelta")}},sendUniformData:function(a,l){var c=this.chooseRightDelta();a.uniform2fv(l.delta,c)},chooseRightDelta:function(){var a=1,l=[0,0],c;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),c=a*this.blur*.12,this.horizontal?l[0]=c:l[1]=c,l}}),u.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Gamma=h(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var l=a.imageData,c=l.data,m=this.gamma,y=c.length,p=1/m[0],w=1/m[1],C=1/m[2],T;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),T=0,y=256;T<y;T++)this.rVals[T]=Math.pow(T/255,p)*255,this.gVals[T]=Math.pow(T/255,w)*255,this.bVals[T]=Math.pow(T/255,C)*255;for(T=0,y=c.length;T<y;T+=4)c[T]=this.rVals[c[T]],c[T+1]=this.gVals[c[T+1]],c[T+2]=this.bVals[c[T+2]]},getUniformLocations:function(a,l){return{uGamma:a.getUniformLocation(l,"uGamma")}},sendUniformData:function(a,l){a.uniform3fv(l.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Composed=h(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(a)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(a,l){var c=a.subFilters||[],m=c.map(function(p){return new s.Image.filters[p.type](p)}),y=new s.Image.filters.Composed({subFilters:m});return l&&l(y),y}}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.Image.filters,h=s.util.createClass;u.HueRotation=h(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,l=s.util.cos(a),c=s.util.sin(a),m=1/3,y=Math.sqrt(m)*c,p=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+p/3,this.matrix[1]=m*p-y,this.matrix[2]=m*p+y,this.matrix[5]=m*p+y,this.matrix[6]=l+m*p,this.matrix[7]=m*p-y,this.matrix[10]=m*p-y,this.matrix[11]=m*p+y,this.matrix[12]=l+m*p},isNeutralState:function(a){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,a)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(f){var s=f.fabric||(f.fabric={}),u=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(h),cacheProperties:s.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,l){this.styles=l?l.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=s.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,l,c,m,y,p,w,C=0,T=this._textLines.length;C<T;C++)if(!(this.textAlign!=="justify"&&(C===T-1||this.isEndOfWrapping(C)))&&(m=0,y=this._textLines[C],l=this.getLineWidth(C),l<this.width&&(w=this.textLines[C].match(this._reSpacesAndTabs)))){c=w.length,a=(this.width-l)/c;for(var j=0,E=y.length;j<=E;j++)p=this.__charBounds[C][j],this._reSpaceAndTab.test(y[j])?(p.width+=a,p.kernedWidth+=a,p.left+=m,m+=a):p.left+=m}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return a.width+=l*a.zoomX,a.height+=l*a.zoomY,a},_render:function(a){var l=this.path;l&&!l.isNotVisible()&&l._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,l,c){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(l,c)},calcTextWidth:function(){for(var a=this.getLineWidth(0),l=1,c=this._textLines.length;l<c;l++){var m=this.getLineWidth(l);m>a&&(a=m)}return a},_renderTextLine:function(a,l,c,m,y,p){this._renderChars(a,l,c,m,y,p)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,c,m=a.fillStyle,y,p,w=this._getLeftOffset(),C=this._getTopOffset(),T=0,j=0,E,M,D=this.path,A,I=0,X=this._textLines.length;I<X;I++){if(l=this.getHeightOfLine(I),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",I)){C+=l;continue}y=this._textLines[I],c=this._getLineLeftOffset(I),j=0,T=0,p=this.getValueOfPropertyAt(I,0,"textBackgroundColor");for(var oe=0,Z=y.length;oe<Z;oe++)E=this.__charBounds[I][oe],M=this.getValueOfPropertyAt(I,oe,"textBackgroundColor"),D?(a.save(),a.translate(E.renderLeft,E.renderTop),a.rotate(E.angle),a.fillStyle=M,M&&a.fillRect(-E.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),E.width,l/this.lineHeight),a.restore()):M!==p?(A=w+c+T,this.direction==="rtl"&&(A=this.width-A-j),a.fillStyle=p,p&&a.fillRect(A,C,j,l/this.lineHeight),T=E.left,j=E.width,p=M):j+=E.kernedWidth;M&&!D&&(A=w+c+T,this.direction==="rtl"&&(A=this.width-A-j),a.fillStyle=M,a.fillRect(A,C,j,l/this.lineHeight)),C+=l}a.fillStyle=m,this._removeShadow(a)}},getFontCache:function(a){var l=a.fontFamily.toLowerCase();s.charWidthsCache[l]||(s.charWidthsCache[l]={});var c=s.charWidthsCache[l],m=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return c[m]||(c[m]={}),c[m]},_measureChar:function(a,l,c,m){var y=this.getFontCache(l),p=this._getFontDeclaration(l),w=this._getFontDeclaration(m),C=c+a,T=p===w,j,E,M,D=l.fontSize/this.CACHE_FONT_SIZE,A;if(c&&y[c]!==void 0&&(M=y[c]),y[a]!==void 0&&(A=j=y[a]),T&&y[C]!==void 0&&(E=y[C],A=E-M),j===void 0||M===void 0||E===void 0){var I=this.getMeasuringContext();this._setTextStyles(I,l,!0)}return j===void 0&&(A=j=I.measureText(a).width,y[a]=j),M===void 0&&T&&c&&(M=I.measureText(c).width,y[c]=M),T&&E===void 0&&(E=I.measureText(C).width,y[C]=E,A=E-M),{width:j*D,kernedWidth:A*D}},getHeightOfChar:function(a,l){return this.getValueOfPropertyAt(a,l,"fontSize")},measureLine:function(a){var l=this._measureLine(a);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(a){var l=0,c,m,y=this._textLines[a],p,w,C=0,T=new Array(y.length),j=0,E,M,D=this.path,A=this.pathSide==="right";for(this.__charBounds[a]=T,c=0;c<y.length;c++)m=y[c],w=this._getGraphemeBox(m,a,c,p),T[c]=w,l+=w.kernedWidth,p=m;if(T[c]={left:w?w.left+w.width:0,width:0,kernedWidth:0,height:this.fontSize},D){switch(M=D.segmentsInfo[D.segmentsInfo.length-1].length,E=s.util.getPointOnPath(D.path,0,D.segmentsInfo),E.x+=D.pathOffset.x,E.y+=D.pathOffset.y,this.textAlign){case"left":j=A?M-l:0;break;case"center":j=(M-l)/2;break;case"right":j=A?0:M-l;break}for(j+=this.pathStartOffset*(A?-1:1),c=A?y.length-1:0;A?c>=0:c<y.length;A?c--:c++)w=T[c],j>M?j%=M:j<0&&(j+=M),this._setGraphemeOnPath(j,w,E),j+=w.kernedWidth}return{width:l,numOfSpaces:C}},_setGraphemeOnPath:function(a,l,c){var m=a+l.kernedWidth/2,y=this.path,p=s.util.getPointOnPath(y.path,m,y.segmentsInfo);l.renderLeft=p.x-c.x,l.renderTop=p.y-c.y,l.angle=p.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,l,c,m,y){var p=this.getCompleteStyleDeclaration(l,c),w=m?this.getCompleteStyleDeclaration(l,c-1):{},C=this._measureChar(a,p,m,w),T=C.kernedWidth,j=C.width,E;this.charSpacing!==0&&(E=this._getWidthOfCharSpacing(),j+=E,T+=E);var M={width:j,left:0,height:p.fontSize,kernedWidth:T,deltaY:p.deltaY};if(c>0&&!y){var D=this.__charBounds[l][c-1];M.left=D.left+D.width+C.kernedWidth-C.width}return M},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var l=this._textLines[a],c=this.getHeightOfChar(a,0),m=1,y=l.length;m<y;m++)c=Math.max(this.getHeightOfChar(a,m),c);return this.__lineHeights[a]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,l=0,c=0,m=this._textLines.length;c<m;c++)a=this.getHeightOfLine(c),l+=c===m-1?a/this.lineHeight:a;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,l){a.save();for(var c=0,m=this._getLeftOffset(),y=this._getTopOffset(),p=0,w=this._textLines.length;p<w;p++){var C=this.getHeightOfLine(p),T=C/this.lineHeight,j=this._getLineLeftOffset(p);this._renderTextLine(l,a,this._textLines[p],m+j,y+c+T,p),c+=C}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,l,c,m,y,p){var w=this.getHeightOfLine(p),C=this.textAlign.indexOf("justify")!==-1,T,j,E="",M,D=0,A,I=this.path,X=!C&&this.charSpacing===0&&this.isEmptyStyles(p)&&!I,oe=this.direction==="ltr",Z=this.direction==="ltr"?1:-1,ae,te=l.canvas.getAttribute("dir");if(l.save(),te!==this.direction&&(l.canvas.setAttribute("dir",oe?"ltr":"rtl"),l.direction=oe?"ltr":"rtl",l.textAlign=oe?"left":"right"),y-=w*this._fontSizeFraction/this.lineHeight,X){this._renderChar(a,l,p,0,c.join(""),m,y,w),l.restore();return}for(var G=0,z=c.length-1;G<=z;G++)A=G===z||this.charSpacing||I,E+=c[G],M=this.__charBounds[p][G],D===0?(m+=Z*(M.kernedWidth-M.width),D+=M.width):D+=M.kernedWidth,C&&!A&&this._reSpaceAndTab.test(c[G])&&(A=!0),A||(T=T||this.getCompleteStyleDeclaration(p,G),j=this.getCompleteStyleDeclaration(p,G+1),A=s.util.hasStyleChanged(T,j,!1)),A&&(I?(l.save(),l.translate(M.renderLeft,M.renderTop),l.rotate(M.angle),this._renderChar(a,l,p,G,E,-D/2,0,w),l.restore()):(ae=m,this._renderChar(a,l,p,G,E,ae,y,w)),E="",T=j,m+=Z*D,D=0);l.restore()},_applyPatternGradientTransformText:function(a){var l=s.util.createCanvasElement(),c,m=this.width+this.strokeWidth,y=this.height+this.strokeWidth;return l.width=m,l.height=y,c=l.getContext("2d"),c.beginPath(),c.moveTo(0,0),c.lineTo(m,0),c.lineTo(m,y),c.lineTo(0,y),c.closePath(),c.translate(m/2,y/2),c.fillStyle=a.toLive(c),this._applyPatternGradientTransform(c,a),c.fill(),c.createPattern(l,"no-repeat")},handleFiller:function(a,l,c){var m,y;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(m=-this.width/2,y=-this.height/2,a.translate(m,y),a[l]=this._applyPatternGradientTransformText(c),{offsetX:m,offsetY:y}):(a[l]=c.toLive(a,this),this._applyPatternGradientTransform(a,c)):(a[l]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,l){return a.lineWidth=l.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",l.stroke)},_setFillStyles:function(a,l){return this.handleFiller(a,"fillStyle",l.fill)},_renderChar:function(a,l,c,m,y,p,w){var C=this._getStyleDeclaration(c,m),T=this.getCompleteStyleDeclaration(c,m),j=a==="fillText"&&T.fill,E=a==="strokeText"&&T.stroke&&T.strokeWidth,M,D;!E&&!j||(l.save(),j&&(M=this._setFillStyles(l,T)),E&&(D=this._setStrokeStyles(l,T)),l.font=this._getFontDeclaration(T),C&&C.textBackgroundColor&&this._removeShadow(l),C&&C.deltaY&&(w+=C.deltaY),j&&l.fillText(y,p-M.offsetX,w-M.offsetY),E&&l.strokeText(y,p-D.offsetX,w-D.offsetY),l.restore())},setSuperscript:function(a,l){return this._setScript(a,l,this.superscript)},setSubscript:function(a,l){return this._setScript(a,l,this.subscript)},_setScript:function(a,l,c){var m=this.get2DCursorLocation(a,!0),y=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"fontSize"),p=this.getValueOfPropertyAt(m.lineIndex,m.charIndex,"deltaY"),w={fontSize:y*c.size,deltaY:p+y*c.baseline};return this.setSelectionStyles(w,a,l),this},_getLineLeftOffset:function(a){var l=this.getLineWidth(a),c=this.width-l,m=this.textAlign,y=this.direction,w,p=0,w=this.isEndOfWrapping(a);return m==="justify"||m==="justify-center"&&!w||m==="justify-right"&&!w||m==="justify-left"&&!w?0:(m==="center"&&(p=c/2),m==="right"&&(p=c),m==="justify-center"&&(p=c/2),m==="justify-right"&&(p=c),y==="rtl"&&(p-=c),p)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var l=this.measureLine(a),c=l.width;return this.__lineWidths[a]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,l,c){var m=this._getStyleDeclaration(a,l);return m&&typeof m[c]<"u"?m[c]:this[c]},_renderTextDecoration:function(a,l){if(!(!this[l]&&!this.styleHas(l))){for(var c,m,y,p,w,C,T,j,E=this._getLeftOffset(),M=this._getTopOffset(),D,A,I,X,oe,Z,ae,te,G=this.path,z=this._getWidthOfCharSpacing(),q=this.offsets[l],Y=0,R=this._textLines.length;Y<R;Y++){if(c=this.getHeightOfLine(Y),!this[l]&&!this.styleHas(l,Y)){M+=c;continue}T=this._textLines[Y],Z=c/this.lineHeight,p=this._getLineLeftOffset(Y),A=0,I=0,j=this.getValueOfPropertyAt(Y,0,l),te=this.getValueOfPropertyAt(Y,0,"fill"),D=M+Z*(1-this._fontSizeFraction),m=this.getHeightOfChar(Y,0),w=this.getValueOfPropertyAt(Y,0,"deltaY");for(var O=0,L=T.length;O<L;O++)if(X=this.__charBounds[Y][O],oe=this.getValueOfPropertyAt(Y,O,l),ae=this.getValueOfPropertyAt(Y,O,"fill"),y=this.getHeightOfChar(Y,O),C=this.getValueOfPropertyAt(Y,O,"deltaY"),G&&oe&&ae)a.save(),a.fillStyle=te,a.translate(X.renderLeft,X.renderTop),a.rotate(X.angle),a.fillRect(-X.kernedWidth/2,q*y+C,X.kernedWidth,this.fontSize/15),a.restore();else if((oe!==j||ae!==te||y!==m||C!==w)&&I>0){var B=E+p+A;this.direction==="rtl"&&(B=this.width-B-I),j&&te&&(a.fillStyle=te,a.fillRect(B,D+q*m+w,I,this.fontSize/15)),A=X.left,I=X.width,j=oe,te=ae,m=y,w=C}else I+=X.kernedWidth;var B=E+p+A;this.direction==="rtl"&&(B=this.width-B-I),a.fillStyle=ae,oe&&ae&&a.fillRect(B,D+q*m+w,I-z,this.fontSize/15),M+=c}this._removeShadow(a)}},_getFontDeclaration:function(a,l){var c=a||this,m=this.fontFamily,y=s.Text.genericFonts.indexOf(m.toLowerCase())>-1,p=m===void 0||m.indexOf("'")>-1||m.indexOf(",")>-1||m.indexOf('"')>-1||y?c.fontFamily:'"'+c.fontFamily+'"';return[s.isLikelyNode?c.fontWeight:c.fontStyle,s.isLikelyNode?c.fontStyle:c.fontWeight,l?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",p].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var l=a.split(this._reNewline),c=new Array(l.length),m=[`
`],y=[],p=0;p<l.length;p++)c[p]=s.util.string.graphemeSplit(l[p]),y=y.concat(c[p],m);return y.pop(),{_unwrappedLines:c,lines:l,graphemeText:y,graphemeLines:c}},toObject:function(a){var l=h.concat(a),c=this.callSuper("toObject",l);return c.styles=s.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(a,l){this.callSuper("set",a,l);var c=!1,m=!1;if(typeof a=="object")for(var y in a)y==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(y)!==-1,m=m||y==="path";else c=this._dimensionAffectingProps.indexOf(a)!==-1,m=a==="path";return m&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(a,l,c){if(!a)return l(null);var m=s.parseAttributes(a,s.Text.ATTRIBUTE_NAMES),y=m.textAnchor||"left";if(c=s.util.object.extend(c?u(c):{},m),c.top=c.top||0,c.left=c.left||0,m.textDecoration){var p=m.textDecoration;p.indexOf("underline")!==-1&&(c.underline=!0),p.indexOf("overline")!==-1&&(c.overline=!0),p.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in m&&(c.left+=m.dx),"dy"in m&&(c.top+=m.dy),"fontSize"in c||(c.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var w="";"textContent"in a?w=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(w=a.firstChild.data),w=w.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var C=c.strokeWidth;c.strokeWidth=0;var T=new s.Text(w,c),j=T.getScaledHeight()/T.height,E=(T.height+T.strokeWidth)*T.lineHeight-T.height,M=E*j,D=T.getScaledHeight()+M,A=0;y==="center"&&(A=T.getScaledWidth()/2),y==="right"&&(A=T.getScaledWidth()),T.set({left:T.left-A,top:T.top-(D-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:typeof C<"u"?C:1}),l(T)},s.Text.fromObject=function(a,l){var c=u(a),m=a.path;return delete c.path,s.Object._fromObject("Text",c,function(y){y.styles=s.util.stylesFromArray(a.styles,a.text),m?s.Object._fromObject("Path",m,function(p){y.set("path",p),l(y)},"path"):l(y)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f<"u"&&!this.styles[f])return!0;var s=typeof f>"u"?this.styles:{line:this.styles[f]};for(var u in s)for(var h in s[u])for(var a in s[u][h])return!1;return!0},styleHas:function(f,s){if(!this.styles||!f||f===""||typeof s<"u"&&!this.styles[s])return!1;var u=typeof s>"u"?this.styles:{0:this.styles[s]};for(var h in u)for(var a in u[h])if(typeof u[h][a][f]<"u")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var s=this.styles,u=0,h,a,l=!0,c=0,m;for(var y in s){h=0;for(var p in s[y]){var m=s[y][p],w=m.hasOwnProperty(f);u++,w?(a?m[f]!==a&&(l=!1):a=m[f],m[f]===this[f]&&delete m[f]):l=!1,Object.keys(m).length!==0?h++:delete s[y][p]}h===0&&delete s[y]}for(var C=0;C<this._textLines.length;C++)c+=this._textLines[C].length;l&&u===c&&(this[f]=a,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var s=this.styles,u,h,a;for(h in s){u=s[h];for(a in u)delete u[a][f],Object.keys(u[a]).length===0&&delete u[a];Object.keys(u).length===0&&delete s[h]}}},_extendStyles:function(f,s){var u=this.get2DCursorLocation(f);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),s)},get2DCursorLocation:function(f,s){typeof f>"u"&&(f=this.selectionStart);for(var u=s?this._unwrappedTextLines:this._textLines,h=u.length,a=0;a<h;a++){if(f<=u[a].length)return{lineIndex:a,charIndex:f};f-=u[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:u[a-1].length<f?u[a-1].length:f}},getSelectionStyles:function(f,s,u){typeof f>"u"&&(f=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||f);for(var h=[],a=f;a<s;a++)h.push(this.getStyleAtPosition(a,u));return h},getStyleAtPosition:function(f,s){var u=this.get2DCursorLocation(f),h=s?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return h||{}},setSelectionStyles:function(f,s,u){typeof s>"u"&&(s=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||s);for(var h=s;h<u;h++)this._extendStyles(h,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,s){var u=this.styles&&this.styles[f];return u?u[s]:null},getCompleteStyleDeclaration:function(f,s){for(var u=this._getStyleDeclaration(f,s)||{},h={},a,l=0;l<this._styleProperties.length;l++)a=this._styleProperties[l],h[a]=typeof u[a]>"u"?this[a]:u[a];return h},_setStyleDeclaration:function(f,s,u){this.styles[f][s]=u},_deleteStyleDeclaration:function(f,s){delete this.styles[f][s]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,u){this.callSuper("initialize",s,u),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,u){this[s]!==u&&(this._fireSelectionChanged(),this[s]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,h=this.canvas.viewportTransform;u.save(),u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(u),this._clearTextArea(u),s||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,u):this.renderSelection(s,u),u.restore()}},_clearTextArea:function(s){var u=this.width+4,h=this.height+4;s.clearRect(-u/2,-h/2,u,h)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var u=this._getLeftOffset(),h=this._getTopOffset(),a=this._getCursorBoundariesOffsets(s);return{left:u,top:h,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,h,a,l=0,c=0,m,y=this.get2DCursorLocation(s);a=y.charIndex,h=y.lineIndex;for(var p=0;p<h;p++)l+=this.getHeightOfLine(p);u=this._getLineLeftOffset(h);var w=this.__charBounds[h][a];return w&&(c=w.left),this.charSpacing!==0&&a===this._textLines[h].length&&(c-=this._getWidthOfCharSpacing()),m={top:l,left:u+(c>0?c:0)},this.direction==="rtl"&&(m.left*=-1),this.cursorOffsetCache=m,this.cursorOffsetCache},renderCursor:function(s,u){var h=this.get2DCursorLocation(),a=h.lineIndex,l=h.charIndex>0?h.charIndex-1:0,c=this.getValueOfPropertyAt(a,l,"fontSize"),m=this.scaleX*this.canvas.getZoom(),y=this.cursorWidth/m,p=s.topOffset,w=this.getValueOfPropertyAt(a,l,"deltaY");p+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,l,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(s.left+s.leftOffset-y/2,p+s.top+w,y,c)},renderSelection:function(s,u){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(h),m=this.get2DCursorLocation(a),y=c.lineIndex,p=m.lineIndex,w=c.charIndex<0?0:c.charIndex,C=m.charIndex<0?0:m.charIndex,T=y;T<=p;T++){var j=this._getLineLeftOffset(T)||0,E=this.getHeightOfLine(T),M=0,D=0,A=0;if(T===y&&(D=this.__charBounds[y][w].left),T>=y&&T<p)A=l&&!this.isEndOfWrapping(T)?this.width:this.getLineWidth(T)||5;else if(T===p)if(C===0)A=this.__charBounds[p][C].left;else{var I=this._getWidthOfCharSpacing();A=this.__charBounds[p][C-1].left+this.__charBounds[p][C-1].width-I}M=E,(this.lineHeight<1||T===p&&this.lineHeight>1)&&(E/=this.lineHeight);var X=s.left+j+D,oe=A-D,Z=E,ae=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",Z=1,ae=E):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(X=this.width-X-oe),u.fillRect(X,s.top+s.topOffset+ae,oe,Z),s.topOffset+=M}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),u=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:u}}}),e.IText.fromObject=function(s,u){var h=e.util.stylesFromArray(s.styles,s.text),a=Object.assign({},s,{styles:h});if(f(a),a.styles)for(var l in a.styles)for(var c in a.styles[l])f(a.styles[l][c]);e.Object._fromObject("IText",a,u,"text")}}(),function(){var f=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var u=s.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,s._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var u=s.canvas;u&&(u._iTextInstances=u._iTextInstances||[],e.util.removeFromArray(u._iTextInstances,s),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,s._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,u,h,a){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",u,{duration:h,onComplete:function(){l.isAborted||s[a]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var u=this,h=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},h)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var u=0,h=s-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h--;for(;/\S/.test(this._text[h])&&h>-1;)u++,h--;return s-u},findWordBoundaryRight:function(s){var u=0,h=s;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)u++,h++;return s+u},findLineBoundaryLeft:function(s){for(var u=0,h=s-1;!/\n/.test(this._text[h])&&h>-1;)u++,h--;return s-u},findLineBoundaryRight:function(s){for(var u=0,h=s;!/\n/.test(this._text[h])&&h<this._text.length;)u++,h++;return s+u},searchWordBoundary:function(s,u){for(var h=this._text,a=this._reSpace.test(h[s])?s-1:s,l=h[a],c=e.reNonWord;!c.test(l)&&a>0&&a<h.length;)a+=u,l=h[a];return c.test(l)&&(a+=u===1?0:1),a},selectWord:function(s){s=s||this.selectionStart;var u=this.searchWordBoundary(s,-1),h=this.searchWordBoundary(s,1);this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var u=this.findLineBoundaryLeft(s),h=this.findLineBoundaryRight(s);return this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(s.e),h=this.selectionStart,a=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||h===a)&&(h===u||a===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,u,h){var a=h.slice(0,s),l=e.util.string.graphemeSplit(a).length;if(s===u)return{selectionStart:l,selectionEnd:l};var c=h.slice(s,u),m=e.util.string.graphemeSplit(c).length;return{selectionStart:l,selectionEnd:l+m}},fromGraphemeToStringSelection:function(s,u,h){var a=h.slice(0,s),l=a.join("").length;if(s===u)return{selectionStart:l,selectionEnd:l};var c=h.slice(s,u),m=c.join("").length;return{selectionStart:l,selectionEnd:l+m}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(s),h=this.get2DCursorLocation(s),a=h.lineIndex,l=h.charIndex,c=this.getValueOfPropertyAt(a,l,"fontSize")*this.lineHeight,m=u.leftOffset,y=this.calcTransformMatrix(),p={x:u.left+m,y:u.top+u.topOffset+c},w=this.canvas.getRetinaScaling(),C=this.canvas.upperCanvasEl,T=C.width/w,j=C.height/w,E=T-c,M=j-c,D=C.clientWidth/T,A=C.clientHeight/j;return p=e.util.transformPoint(p,y),p=e.util.transformPoint(p,this.canvas.viewportTransform),p.x*=D,p.y*=A,p.x<0&&(p.x=0),p.x>E&&(p.x=E),p.y<0&&(p.y=0),p.y>M&&(p.y=M),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:p.x+"px",top:p.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,u){var h=this.get2DCursorLocation(s,!0),a=this.get2DCursorLocation(u,!0),l=h.lineIndex,c=h.charIndex,m=a.lineIndex,y=a.charIndex,p,w;if(l!==m){if(this.styles[l])for(p=c;p<this._unwrappedTextLines[l].length;p++)delete this.styles[l][p];if(this.styles[m])for(p=y;p<this._unwrappedTextLines[m].length;p++)w=this.styles[m][p],w&&(this.styles[l]||(this.styles[l]={}),this.styles[l][c+p-y]=w);for(p=l+1;p<=m;p++)delete this.styles[p];this.shiftLineStyles(m,l-m)}else if(this.styles[l]){w=this.styles[l];var C=y-c,T,j;for(p=c;p<y;p++)delete w[p];for(j in this.styles[l])T=parseInt(j,10),T>=y&&(w[T-C]=w[j],delete w[j])}},shiftLineStyles:function(s,u){var h=f(this.styles);for(var a in this.styles){var l=parseInt(a,10);l>s&&(this.styles[l+u]=h[l],h[l-u]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,u,h,a){var l,c={},m=!1,y=this._unwrappedTextLines[s].length===u;h||(h=1),this.shiftLineStyles(s,h),this.styles[s]&&(l=this.styles[s][u===0?u:u-1]);for(var p in this.styles[s]){var w=parseInt(p,10);w>=u&&(m=!0,c[w-u]=this.styles[s][p],y&&u===0||delete this.styles[s][p])}var C=!1;for(m&&!y&&(this.styles[s+h]=c,C=!0),C&&h--;h>0;)a&&a[h-1]?this.styles[s+h]={0:f(a[h-1])}:l?this.styles[s+h]={0:f(l)}:delete this.styles[s+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(s,u,h,a){this.styles||(this.styles={});var l=this.styles[s],c=l?f(l):{};h||(h=1);for(var m in c){var y=parseInt(m,10);y>=u&&(l[y+h]=c[y],c[y-h]||delete l[y])}if(this._forceClearCache=!0,a){for(;h--;)Object.keys(a[h]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][u+h]=f(a[h]));return}if(l)for(var p=l[u?u-1:1];p&&h--;)this.styles[s][u+h]=f(p)},insertNewStyleBlock:function(s,u,h){for(var a=this.get2DCursorLocation(u,!0),l=[0],c=0,m=0;m<s.length;m++)s[m]===`
`?(c++,l[c]=0):l[c]++;l[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,l[0],h),h=h&&h.slice(l[0]+1)),c&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+l[0],c);for(var m=1;m<c;m++)l[m]>0?this.insertCharStyleObject(a.lineIndex+m,0,l[m],h):h&&this.styles[a.lineIndex+m]&&h[0]&&(this.styles[a.lineIndex+m][0]=h[0]),h=h&&h.slice(l[m]+1);l[m]>0&&this.insertCharStyleObject(a.lineIndex+m,0,l[m],h)},setSelectionStartEndWithShift:function(s,u,h){h<=s?(u===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=h):h>s&&h<u?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(u===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=h)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(this.canvas){this.__newClickTime=+new Date;var s=f.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(f.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var s=this.getSelectionStartFromPointer(f),u=this.selectionStart,h=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(u,h,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var s=this.getLocalPointer(f),u=0,h=0,a=0,l=0,c=0,m,y,p=0,w=this._textLines.length;p<w&&a<=s.y;p++)a+=this.getHeightOfLine(p)*this.scaleY,c=p,p>0&&(l+=this._textLines[p-1].length+this.missingNewlineOffset(p-1));m=this._getLineLeftOffset(c),h=m*this.scaleX,y=this._textLines[c],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+h);for(var C=0,T=y.length;C<T&&(u=h,h+=this.__charBounds[c][C].kernedWidth*this.scaleX,h<=s.x);C++)l++;return this._getNewSelectionStartFromOffset(s,u,h,l,T)},_getNewSelectionStartFromOffset:function(f,s,u,h,a){var l=f.x-s,c=u-f.x,m=c>l||c<0?0:1,y=h+m;return this.flipX&&(y=a-y),y>this._text.length&&(y=this._text.length),y}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+f.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(f.keyCode in s)this[s[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var s=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,a=u.length,l,c,m=a-h,y=this.selectionStart,p=this.selectionEnd,w=y!==p,C,T,j;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var E=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),M=y>E.selectionStart;w?(l=this._text.slice(y,p),m+=p-y):a<h&&(M?l=this._text.slice(p+m,p):l=this._text.slice(y,y-m)),c=u.slice(E.selectionEnd-m,E.selectionEnd),l&&l.length&&(c.length&&(C=this.getSelectionStyles(y,y+1,!1),C=c.map(function(){return C[0]})),w?(T=y,j=p):M?(T=p-l.length,j=p):(T=p,j=p+l.length),this.removeStyleFromTo(T,j)),c.length&&(s&&c.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(C=e.copiedTextStyle),this.insertNewStyleBlock(c,y,C)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(f,s){var u=this._getLineLeftOffset(f),h;return s>0&&(h=this.__charBounds[f][s-1],u+=h.left+h.width),u},getDownCursorOffset:function(f,s){var u=this._getSelectionForOffset(f,s),h=this.get2DCursorLocation(u),a=h.lineIndex;if(a===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-u;var l=h.charIndex,c=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a+1,c),y=this._textLines[a].slice(l);return y.length+m+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(f,s){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,s){var u=this._getSelectionForOffset(f,s),h=this.get2DCursorLocation(u),a=h.lineIndex;if(a===0||f.metaKey||f.keyCode===33)return-u;var l=h.charIndex,c=this._getWidthBeforeCursor(a,l),m=this._getIndexOnLine(a-1,c),y=this._textLines[a].slice(0,l),p=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+m-y.length+(1-p)},_getIndexOnLine:function(f,s){for(var u=this._textLines[f],h=this._getLineLeftOffset(f),a=h,l=0,c,m,y=0,p=u.length;y<p;y++)if(c=this.__charBounds[f][y].width,a+=c,a>s){m=!0;var w=a-c,C=a,T=Math.abs(w-s),j=Math.abs(C-s);l=j<T?y:y-1;break}return m||(l=u.length-1),l},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,s){var u="get"+f+"CursorOffset",h=this[u](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var s=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,s,u){var h;if(f.altKey)h=this["findWordBoundary"+u](this[s]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)h=this["findLineBoundary"+u](this[s]);else return this[s]+=u==="Left"?-1:1,!0;if(typeof h<"u"&&this[s]!==h)return this[s]=h,!0},_moveLeft:function(f,s){return this._move(f,s,"Left")},_moveRight:function(f,s){return this._move(f,s,"Right")},moveCursorLeftWithoutShift:function(f){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,s){var u="moveCursor"+f+"With";this._currentCursorOpacity=1,s.shiftKey?u+="Shift":u+="outShift",this[u](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(f,s){typeof s>"u"&&(s=f+1),this.removeStyleFromTo(f,s),this._text.splice(f,s-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,s,u,h){typeof h>"u"&&(h=u),h>u&&this.removeStyleFromTo(u,h);var a=e.util.string.graphemeSplit(f);this.insertNewStyleBlock(a,u,s),this._text=[].concat(this._text.slice(0,u),a,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=e.util.toFixed,s=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var h=!0,a=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",a?'text-decoration="'+a+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,h){var a=[],l=[],c=u,m;this._setSVGBg(l);for(var y=0,p=this._textLines.length;y<p;y++)m=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(l,y,h+m,c),this._setSVGTextLineText(a,y,h+m,c),c+=this.getHeightOfLine(y);return{textSpans:a,textBgRects:l}},_createTextCharSpan:function(u,h,a,l){var c=u!==u.trim()||u.match(s),m=this.getSvgSpanStyles(h,c),y=m?'style="'+m+'"':"",p=h.deltaY,w="",C=e.Object.NUM_FRACTION_DIGITS;return p&&(w=' dy="'+f(p,C)+'" '),['<tspan x="',f(a,C),'" y="',f(l,C),'" ',w,y,">",e.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,h,a,l){var c=this.getHeightOfLine(h),m=this.textAlign.indexOf("justify")!==-1,y,p,w="",C,T,j=0,E=this._textLines[h],M;l+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var D=0,A=E.length-1;D<=A;D++)M=D===A||this.charSpacing,w+=E[D],C=this.__charBounds[h][D],j===0?(a+=C.kernedWidth-C.width,j+=C.width):j+=C.kernedWidth,m&&!M&&this._reSpaceAndTab.test(E[D])&&(M=!0),M||(y=y||this.getCompleteStyleDeclaration(h,D),p=this.getCompleteStyleDeclaration(h,D+1),M=e.util.hasStyleChanged(y,p,!0)),M&&(T=this._getStyleDeclaration(h,D)||{},u.push(this._createTextCharSpan(w,T,a,l)),w="",y=p,a+=j,j=0)},_pushTextBgRect:function(u,h,a,l,c,m){var y=e.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(h),' x="',f(a,y),'" y="',f(l,y),'" width="',f(c,y),'" height="',f(m,y),`"></rect>
`)},_setSVGTextLineBg:function(u,h,a,l){for(var c=this._textLines[h],m=this.getHeightOfLine(h)/this.lineHeight,y=0,p=0,w,C,T=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),j=0,E=c.length;j<E;j++)w=this.__charBounds[h][j],C=this.getValueOfPropertyAt(h,j,"textBackgroundColor"),C!==T?(T&&this._pushTextBgRect(u,T,a+p,l,y,m),p=w.left,y=w.width,T=C):y+=w.kernedWidth;C&&this._pushTextBgRect(u,C,a+p,l,y,m)},_getFillAttributes:function(u){var h=u&&typeof u=="string"?new e.Color(u):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+u+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(u){for(var h=0,a=0,l=0;l<u;l++)h+=this.getHeightOfLine(l);return a=this.getHeightOfLine(l),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*a/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){var h=e.Object.prototype.getSvgStyles.call(this,u);return h+" white-space: pre;"}})}(),function(f){var s=f.fabric||(f.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var h=0,a=0,l=0,c={},m=0;m<u.graphemeLines.length;m++)u.graphemeText[l]===`
`&&m>0?(a=0,l++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[l])&&m>0&&(a++,l++),c[m]={line:h,offset:a},l+=u.graphemeLines[m].length,a+=u.graphemeLines[m].length;return c},styleHas:function(u,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];a&&(h=a.line)}return s.Text.prototype.styleHas.call(this,u,h)},isEmptyStyles:function(u){if(!this.styles)return!0;var h=0,a=u+1,l,c,m=!1,y=this._styleMap[u],p=this._styleMap[u+1];y&&(u=y.line,h=y.offset),p&&(a=p.line,m=a===u,l=p.offset),c=typeof u>"u"?this.styles:{line:this.styles[u]};for(var w in c)for(var C in c[w])if(C>=h&&(!m||C<l))for(var T in c[w][C])return!1;return!0},_getStyleDeclaration:function(u,h){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[u];if(!a)return null;u=a.line,h=a.offset+h}return this.callSuper("_getStyleDeclaration",u,h)},_setStyleDeclaration:function(u,h,a){var l=this._styleMap[u];u=l.line,h=l.offset+h,this.styles[u][h]=a},_deleteStyleDeclaration:function(u,h){var a=this._styleMap[u];u=a.line,h=a.offset+h,delete this.styles[u][h]},_getLineStyle:function(u){var h=this._styleMap[u];return!!this.styles[h.line]},_setLineStyle:function(u){var h=this._styleMap[u];this.styles[h.line]={}},_wrapText:function(u,h){var a=[],l;for(this.isWrapping=!0,l=0;l<u.length;l++)a=a.concat(this._wrapLine(u[l],l,h));return this.isWrapping=!1,a},_measureWord:function(u,h,a){var l=0,c,m=!0;a=a||0;for(var y=0,p=u.length;y<p;y++){var w=this._getGraphemeBox(u[y],h,y+a,c,m);l+=w.kernedWidth,c=u[y]}return l},_wrapLine:function(u,h,a,X){var c=0,m=this.splitByGrapheme,y=[],p=[],w=m?s.util.string.graphemeSplit(u):u.split(this._wordJoiners),C="",T=0,j=m?"":" ",E=0,M=0,D=0,A=!0,I=this._getWidthOfCharSpacing(),X=X||0;w.length===0&&w.push([]),a-=X;for(var oe=0;oe<w.length;oe++)C=m?w[oe]:s.util.string.graphemeSplit(w[oe]),E=this._measureWord(C,h,T),T+=C.length,c+=M+E-I,c>a&&!A?(y.push(p),p=[],c=E,A=!0):c+=I,!A&&!m&&p.push(j),p=p.concat(C),M=m?0:this._measureWord([j],h,T),T++,A=!1,E>D&&(D=E);return oe&&y.push(p),D+X>this.dynamicMinWidth&&(this.dynamicMinWidth=D-I+X),y},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var h=s.Text.prototype._splitTextIntoLines.call(this,u),a=this._wrapText(h.lines,this.width),l=new Array(a.length),c=0;c<a.length;c++)l[c]=a[c].join("");return h.lines=l,h.graphemeLines=a,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var h in this._styleMap)this._textLines[h]&&(u[this._styleMap[h].line]=1);for(var h in this.styles)u[h]||delete this.styles[h]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),s.Textbox.fromObject=function(u,h){var a=s.util.stylesFromArray(u.styles,u.text),l=Object.assign({},u,{styles:a});return s.Object._fromObject("Textbox",l,h,"text")}}(t),function(){var f=e.controlsUtils,s=f.scaleSkewCursorStyleHandler,u=f.scaleCursorStyleHandler,h=f.scalingEqually,a=f.scalingYOrSkewingX,l=f.scalingXOrSkewingY,c=f.scaleOrSkewActionName,m=e.Object.prototype.controls;if(m.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:c}),m.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:l,getActionName:c}),m.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),m.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),m.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),m.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),m.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:h}),m.br=new e.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:h}),m.mtr=new e.Control({x:0,y:-.5,actionHandler:f.rotationWithSnapping,cursorStyleHandler:f.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var y=e.Textbox.prototype.controls={};y.mtr=m.mtr,y.tr=m.tr,y.br=m.br,y.tl=m.tl,y.bl=m.bl,y.mt=m.mt,y.mb=m.mb,y.mr=new e.Control({x:.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),y.ml=new e.Control({x:-.5,y:0,actionHandler:f.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()}(Lh)),Lh}var Xe=rR();const Vw=N.createContext(),sR=()=>{const t=N.useContext(Vw);if(!t)throw new Error("useLayer must be used within LayerProvider");return t},aR=({children:t})=>{const[e,r]=N.useState([]),[o,x]=N.useState(null),v=N.useRef(0),S=N.useCallback((D,A="default",I={})=>{const X={id:`layer-${v.current++}`,name:D,type:A,visible:!0,opacity:I.opacity!==void 0?I.opacity:100,locked:!1,objects:[],metadata:I.metadata||{},createdAt:new Date().toISOString(),zIndex:e.length};return r(oe=>[...oe,X]),x(X.id),X},[e.length]),f=N.useCallback(D=>{r(A=>A.filter(I=>I.id!==D)),o===D&&x(A=>{const I=e.filter(X=>X.id!==D);return I.length>0?I[I.length-1].id:null})},[o,e]),s=N.useCallback((D,A)=>{r(I=>I.map(X=>X.id===D?{...X,...A}:X))},[]),u=N.useCallback(D=>{r(A=>A.map(I=>I.id===D?{...I,visible:!I.visible}:I))},[]),h=N.useCallback((D,A)=>{r(I=>I.map(X=>X.id===D?{...X,opacity:Math.max(0,Math.min(100,A))}:X))},[]),a=N.useCallback(D=>{r(A=>A.map(I=>I.id===D?{...I,locked:!I.locked}:I))},[]),l=N.useCallback((D,A)=>{r(I=>{const X=Array.from(I),[oe]=X.splice(D,1);return X.splice(A,0,oe),X.map((Z,ae)=>({...Z,zIndex:ae}))})},[]),c=N.useCallback(D=>{r(A=>{const I=A.findIndex(X=>X.id===D);if(I<A.length-1){const X=Array.from(A);return[X[I],X[I+1]]=[X[I+1],X[I]],X.map((oe,Z)=>({...oe,zIndex:Z}))}return A})},[]),m=N.useCallback(D=>{r(A=>{const I=A.findIndex(X=>X.id===D);if(I>0){const X=Array.from(A);return[X[I],X[I-1]]=[X[I-1],X[I]],X.map((oe,Z)=>({...oe,zIndex:Z}))}return A})},[]),y=N.useCallback((D,A)=>{r(I=>I.map(X=>X.id===D?{...X,objects:[...X.objects,A]}:X)),A&&(A.layerId=D)},[]),p=N.useCallback((D,A)=>{r(I=>I.map(X=>X.id===D?{...X,objects:X.objects.filter(oe=>oe!==A)}:X))},[]),w=N.useCallback(D=>e.find(A=>A.id===D),[e]),C=N.useCallback(()=>e.find(D=>D.id===o),[e,o]),T=N.useCallback(D=>{const A=w(D);if(A)return S(`${A.name} Copy`,A.type,{opacity:A.opacity,metadata:{...A.metadata}})},[w,S]),j=N.useCallback(()=>{r([]),x(null)},[]),E=N.useCallback(D=>{const A=e.filter(oe=>D.includes(oe.id));if(A.length<2)return;const I=A.flatMap(oe=>oe.objects),X=S("Merged Layer","merged",{opacity:100,metadata:{mergedFrom:D}});return I.forEach(oe=>{y(X.id,oe)}),D.forEach(oe=>f(oe)),X},[e,S,y,f]),M={layers:e,activeLayerId:o,setActiveLayerId:x,createLayer:S,deleteLayer:f,updateLayer:s,toggleLayerVisibility:u,setLayerOpacity:h,toggleLayerLock:a,reorderLayers:l,moveLayerUp:c,moveLayerDown:m,addObjectToLayer:y,removeObjectFromLayer:p,getLayerById:w,getActiveLayer:C,duplicateLayer:T,clearLayers:j,mergeLayers:E};return g.jsx(Vw.Provider,{value:M,children:t})},km=(t,e,r,o)=>{const{createLayer:x,getActiveLayer:v,addObjectToLayer:S,removeObjectFromLayer:f,layers:s,setActiveLayerId:u}=sR(),h=N.useRef(null);N.useEffect(()=>{if(o&&!h.current){const y=s.find(p=>p.type===e&&p.objects.length===0);if(y)h.current=y,u(y.id);else{const p=x(t,e,{metadata:{createdBy:t}});h.current=p}}},[o,t,e,x,s,u]);const a=N.useCallback(y=>{const p=h.current||v();if(p&&y&&(S(p.id,y),y.set({opacity:p.opacity/100,visible:p.visible,layerId:p.id}),r)){const w=()=>{const C=s.find(T=>T.id===p.id);C&&y&&(y.set({opacity:C.opacity/100,visible:C.visible}),r.renderAll())};y._layerUpdateFn=w}},[S,v,s,r]),l=N.useCallback(y=>{const p=h.current||v();p&&y&&(f(p.id,y),y._layerUpdateFn&&delete y._layerUpdateFn)},[f,v]),c=N.useCallback(()=>h.current||v(),[v]),m=N.useCallback(()=>{const y=c();if(!(!y||!r))try{y.objects.forEach(p=>{p&&p.set({opacity:y.opacity/100,visible:y.visible,selectable:!y.locked,evented:!y.locked})}),r.getContext&&r.getContext("2d")&&r.renderAll()}catch(p){console.warn("Error syncing layer to objects:",p)}},[c,r]);return N.useEffect(()=>{m()},[s,m]),N.useEffect(()=>{o||(h.current=null)},[o]),{currentLayer:h.current,addToLayer:a,removeFromLayer:l,getCurrentLayer:c,syncLayerToObjects:m}},oR=({canvas:t,isActive:e,brushColor:r="#ff0000",brushWidth:o=5})=>{const x=N.useRef(null),{addToLayer:v,getCurrentLayer:S}=km("Brush","brush",t,e);return Ae.useEffect(()=>{var f;if(t&&e){x.current=new Xe.fabric.PencilBrush(t),x.current.width=o,x.current.color=r,t.isDrawingMode=!0,t.freeDrawingBrush=x.current,t.contextTop&&(t.contextTop.globalCompositeOperation="source-over");const s=u=>{var h;u.path&&(v(u.path),console.log("🖌️ Brush stroke added to layer:",(h=S())==null?void 0:h.name))};return t.on("path:created",s),console.log("🖌️ Brush tool activated with layer:",(f=S())==null?void 0:f.name),()=>{t.off("path:created",s)}}},[t,e,r,o,v,S]),Ae.useEffect(()=>{t&&!e&&(t.isDrawingMode=!1,console.log("🖌️ Brush tool deactivated"))},[t,e]),g.jsxs("div",{className:"brush-tool",children:[g.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Brush Tool - Draw freely"}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("label",{className:"text-xs",children:"Color:"}),g.jsx("input",{type:"color",value:r,onChange:f=>{x.current&&(x.current.color=f.target.value)},className:"w-8 h-6 rounded border"}),g.jsx("label",{className:"text-xs",children:"Width:"}),g.jsx("input",{type:"range",min:"1",max:"20",value:o,onChange:f=>{x.current&&(x.current.width=parseInt(f.target.value))},className:"w-20"}),g.jsxs("span",{className:"text-xs",children:[o,"px"]})]})]})};N.forwardRef(({canvas:t,isActive:e},r)=>{const[o,x]=Ae.useState(20),[v,S]=Ae.useState(!1),f=N.useRef(!1),s=N.useRef(null);return N.useImperativeHandle(r,()=>({togglePanel:()=>S(u=>!u),showPanel:()=>S(!0),hidePanel:()=>S(!1)})),Ae.useEffect(()=>{if(t&&e){t.isDrawingMode=!1,t.selection=!1,t.defaultCursor="none",t.hoverCursor="none";const u=C=>{f.current=!0;const T=t.getPointer(C.e);p(T),m(T)},h=C=>{const T=t.getPointer(C.e);p(T),f.current&&m(T)},a=()=>{f.current=!1},l=C=>{const T=t.getPointer(C.e);p(T)},c=()=>{f.current=!1,w()},m=C=>{const T=t.getObjects(),j=[];T.forEach(E=>{E===t.backgroundImage||E===s.current||y(E,C,o/2)&&j.push(E)}),j.forEach(E=>{t.remove(E)}),j.length>0&&t.renderAll()},y=(C,T,j)=>{const E=C.getBoundingRect(),M=E.left+E.width/2,D=E.top+E.height/2,A=Math.sqrt(Math.pow(T.x-M,2)+Math.pow(T.y-D,2)),I=Math.max(E.width,E.height)/2;return A<j+I},p=C=>{s.current?(s.current.set({left:C.x,top:C.y,radius:o/2}),s.current.setCoords()):(s.current=new Xe.fabric.Circle({left:C.x,top:C.y,radius:o/2,fill:"transparent",stroke:"#ff0000",strokeWidth:2,strokeDashArray:[5,5],selectable:!1,evented:!1,excludeFromExport:!0,originX:"center",originY:"center"}),t.add(s.current)),t.bringToFront(s.current),t.requestRenderAll()},w=()=>{s.current&&(t.remove(s.current),s.current=null,t.renderAll())};return t.on("mouse:down",u),t.on("mouse:move",h),t.on("mouse:up",a),t.on("mouse:over",l),t.on("mouse:leave",c),console.log("🧹 Eraser tool activated"),()=>{t.off("mouse:down",u),t.off("mouse:move",h),t.off("mouse:up",a),t.off("mouse:over",l),t.off("mouse:leave",c),w()}}else t&&!e&&(t.isDrawingMode=!1,t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",s.current&&(t.remove(s.current),s.current=null,t.renderAll()),console.log("🧹 Eraser tool deactivated"))},[t,e,o]),g.jsx("div",{className:"eraser-tool p-3 border-t border-gray-200",children:v?g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"🧹 Eraser Tool"}),g.jsx("button",{onClick:()=>S(!1),className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}),g.jsxs("div",{className:"mb-3",children:[g.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Size: ",o,"px"]}),g.jsx("input",{type:"range",min:"10",max:"100",value:o,onChange:u=>{x(parseInt(u.target.value))},className:"w-full"})]}),g.jsx("div",{className:"mb-3 flex justify-center",children:g.jsx("div",{className:"border-2 border-dashed border-red-400 rounded-full bg-red-50",style:{width:`${Math.min(o,60)}px`,height:`${Math.min(o,60)}px`}})}),g.jsx("button",{onClick:()=>{t&&(t.getObjects().slice().forEach(h=>{h!==t.backgroundImage&&t.remove(h)}),t.renderAll(),console.log("🧹 All objects cleared"))},className:"w-full px-3 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600",children:"Clear All"})]}):g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"🧹 Eraser Active"}),g.jsx("button",{onClick:()=>S(!0),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Settings"})]})})});const lR=({canvas:t,isActive:e,lineColor:r="#ff0000",lineWidth:o=2})=>{const x=N.useRef(!1),v=N.useRef(null),S=N.useCallback(u=>{if(!t||!e)return;const h=t.getPointer(u.e),a=new Xe.fabric.Line([h.x,h.y,h.x,h.y],{stroke:r,strokeWidth:o,selectable:!0,evented:!0});t.add(a),t.setActiveObject(a),v.current=a,x.current=!0,console.log("📏 Line started at:",h)},[t,e,r,o]),f=N.useCallback(u=>{if(!t||!e||!x.current||!v.current)return;const h=t.getPointer(u.e);v.current.set({x2:h.x,y2:h.y}),t.renderAll()},[t,e]),s=N.useCallback(()=>{!t||!e||(x.current=!1,v.current=null,console.log("📏 Line finished"))},[t,e]);return Ae.useEffect(()=>{if(t&&e)return t.isDrawingMode=!1,t.selection=!1,t.on("mouse:down",S),t.on("mouse:move",f),t.on("mouse:up",s),()=>{t.off("mouse:down",S),t.off("mouse:move",f),t.off("mouse:up",s)}},[t,e,S,f,s]),Ae.useEffect(()=>{t&&!e&&(t.selection=!0,console.log("📏 Line tool deactivated"))},[t,e]),g.jsxs("div",{className:"line-tool",children:[g.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Line Tool - Click and drag to draw lines"}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx("label",{className:"text-xs",children:"Color:"}),g.jsx("input",{type:"color",value:r,onChange:u=>{},className:"w-8 h-6 rounded border"}),g.jsx("label",{className:"text-xs",children:"Width:"}),g.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:u=>{},className:"w-20"}),g.jsxs("span",{className:"text-xs",children:[o,"px"]})]})]})},cR=({canvas:t,isActive:e})=>{const r=N.useRef(!1),o=N.useRef(null),x=N.useCallback(f=>{if(!t||!e)return;const s=t.getPointer(f.e),u=t.findTarget(f.e);u&&u!==t.backgroundImage&&(t.setActiveObject(u),r.current=!0,o.current=s,console.log("🖱️ Moving object:",u.type))},[t,e]),v=N.useCallback(f=>{if(!t||!e||!r.current)return;const s=t.getPointer(f.e),u=t.getActiveObject();if(u){const h=s.x-o.current.x,a=s.y-o.current.y;u.set({left:u.left+h,top:u.top+a}),t.renderAll(),o.current=s}},[t,e]),S=N.useCallback(()=>{!t||!e||(r.current=!1,o.current=null,console.log("🖱️ Move finished"))},[t,e]);return Ae.useEffect(()=>{if(t&&e)return t.isDrawingMode=!1,t.selection=!0,t.on("mouse:down",x),t.on("mouse:move",v),t.on("mouse:up",S),()=>{t.off("mouse:down",x),t.off("mouse:move",v),t.off("mouse:up",S)}},[t,e,x,v,S]),Ae.useEffect(()=>{t&&!e&&console.log("🖱️ Move tool deactivated")},[t,e]),g.jsxs("div",{className:"move-tool",children:[g.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Move Tool - Click and drag to move objects"}),g.jsx("div",{className:"text-xs text-gray-500",children:"Click on any object to select and move it"})]})},uR=N.forwardRef(({canvas:t,isActive:e,onClose:r},o)=>{const[x,v]=N.useState(!1),[S,f]=N.useState(!1),[s,u]=N.useState("free"),[h,a]=N.useState(!1),[l,c]=N.useState(null),[m,y]=N.useState(null),[p,w]=N.useState(!1),C=N.useRef(null),T=N.useRef([]),j=N.useCallback(()=>{if(!(t!=null&&t.backgroundImage))return;const G=t.backgroundImage,z=G._element||G._originalElement;if(!z)return;const q=t.getObjects().filter(Y=>!Y.excludeFromExport).map(Y=>({object:Y,left:Y.left,top:Y.top,path:Y.path?JSON.parse(JSON.stringify(Y.path)):null}));y({src:z.src,canvasWidth:t.width,canvasHeight:t.height,imageScaleX:G.scaleX,imageScaleY:G.scaleY,imageLeft:G.left,imageTop:G.top,objectsState:q}),w(!0)},[t]),E=N.useCallback(()=>{if(!t||!m)return;t.setWidth(m.canvasWidth),t.setHeight(m.canvasHeight);const G=t.getElement();G&&(G.width=m.canvasWidth,G.height=m.canvasHeight,G.style.width=`${m.canvasWidth}px`,G.style.height=`${m.canvasHeight}px`),m.objectsState&&m.objectsState.forEach(z=>{const q=z.object;q.set({left:z.left,top:z.top}),z.path&&q.path&&(q.path=JSON.parse(JSON.stringify(z.path)),q.setCoords())}),Xe.fabric.Image.fromURL(m.src,z=>{z.set({left:m.imageLeft,top:m.imageTop,scaleX:m.imageScaleX,scaleY:m.imageScaleY,selectable:!1,evented:!1}),t.setBackgroundImage(z,()=>{t.renderAll(),w(!1),y(null),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:m.canvasWidth,height:m.canvasHeight,canvas:t}}))})})},[t,m]),M=N.useCallback(()=>{C.current&&t&&(T.current.forEach(G=>t.remove(G)),T.current=[],t.remove(C.current),C.current=null,t.renderAll())},[t]),D=N.useCallback(G=>{if(!t)return;const z={left:0,top:0,width:t.width,height:t.height},q=G.width*G.scaleX,Y=G.height*G.scaleY,R=[new Xe.fabric.Rect({left:z.left,top:z.top,width:z.width,height:Math.max(0,G.top-z.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:z.left,top:G.top+Y,width:z.width,height:Math.max(0,z.height-(G.top+Y)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:z.left,top:G.top,width:Math.max(0,G.left-z.left),height:Y,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:G.left+q,top:G.top,width:Math.max(0,z.width-(G.left+q)),height:Y,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})];R.forEach(O=>t.add(O)),T.current=R},[t]),A=N.useCallback((G,z,q,Y)=>{if(!t)return;M(),C.current=new Xe.fabric.Rect({left:G,top:z,width:q,height:Y,fill:"transparent",stroke:"#007bff",strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockRotation:!0,borderColor:"#007bff",cornerColor:"#007bff",cornerSize:12,transparentCorners:!1}),t.add(C.current),D(C.current);const R=()=>D(C.current);C.current.on("moving",R),C.current.on("scaling",R),t.setActiveObject(C.current),t.renderAll()},[t,M,D]),I=N.useCallback(()=>{if(!t||!e)return;f(!0),t.isDrawingMode=!1,t.selection=!1,t.defaultCursor="crosshair",t.hoverCursor="crosshair";const G=t.width*.25,z=t.height*.25,q=t.width*.5,Y=t.height*.5;A(G,z,q,Y)},[t,e,A]),X=N.useCallback(()=>{t&&(f(!1),M(),t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[M,t]),oe=N.useCallback(()=>{if(!C.current||!(t!=null&&t.backgroundImage))return;const G=C.current,z=t.backgroundImage,q=z._element||z._originalElement;if(!q)return;j();const Y=G.width*G.scaleX,R=G.height*G.scaleY,O=G.left,L=G.top,B=t.getObjects().filter(Q=>!Q.excludeFromExport&&Q!==C.current&&!T.current.includes(Q)),K=q.naturalWidth||q.width,V=q.naturalHeight||q.height,F=K/t.width,J=V/t.height,W={left:O*F,top:L*J,width:Y*F,height:R*J},ue={left:Math.max(0,Math.min(W.left,K)),top:Math.max(0,Math.min(W.top,V)),width:Math.min(W.width,K-Math.max(0,W.left)),height:Math.min(W.height,V-Math.max(0,W.top))},ce=document.createElement("canvas");ce.width=Math.max(1,Math.round(ue.width)),ce.height=Math.max(1,Math.round(ue.height));const ie=ce.getContext("2d");ie.imageSmoothingEnabled=!0,ie.imageSmoothingQuality="high",ie.drawImage(q,Math.round(ue.left),Math.round(ue.top),Math.round(ue.width),Math.round(ue.height),0,0,Math.round(ue.width),Math.round(ue.height)),Xe.fabric.Image.fromURL(ce.toDataURL(),Q=>{const me=Y/2,le=R/2;Q.set({left:me,top:le,originX:"center",originY:"center",scaleX:1,scaleY:1,selectable:!1,evented:!1}),B.forEach(re=>{const ge=re.left-O,de=re.top-L;re.set({left:ge,top:de}),re.path&&(re.path.forEach(fe=>{fe.length>1&&(fe[1]-=O),fe.length>2&&(fe[2]-=L),fe.length>3&&(fe[3]-=O),fe.length>4&&(fe[4]-=L),fe.length>5&&(fe[5]-=O),fe.length>6&&(fe[6]-=L)}),re.setCoords())}),t.setWidth(Y),t.setHeight(R);const H=t.getElement();H&&(H.width=Y,H.height=R,H.style.width=`${Y}px`,H.style.height=`${R}px`),t.setBackgroundImage(Q,()=>{t.renderAll(),X(),window.dispatchEvent(new CustomEvent("canvasResized",{detail:{width:Y,height:R,canvas:t}}))})})},[t,j,X]),Z=N.useCallback(G=>{if(!S||s!=="free"||!t)return;const z=t.getPointer(G.e);a(!0),c(z),M()},[S,s,t,M]),ae=N.useCallback(G=>{if(!S||s!=="free"||!h||!l||!t)return;const z=t.getPointer(G.e),q=Math.min(l.x,z.x),Y=Math.min(l.y,z.y),R=Math.abs(z.x-l.x),O=Math.abs(z.y-l.y);R>10&&O>10&&(M(),A(q,Y,R,O))},[S,s,h,l,t,M,A]),te=N.useCallback(G=>{!S||s!=="free"||!h||!t||(a(!1),c(null),C.current&&(C.current.set({selectable:!0,evented:!0}),t.renderAll()))},[S,s,h,t]);return N.useImperativeHandle(o,()=>({togglePanel:()=>v(G=>!G),showPanel:()=>v(!0),hidePanel:()=>v(!1),startCrop:I,cancelCrop:X,undoCrop:E,canUndo:p}),[I,X,E,p]),N.useEffect(()=>{t&&e?I():t&&!e&&C.current&&(f(!1),T.current.forEach(G=>t.remove(G)),T.current=[],t.remove(C.current),C.current=null,t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[t,e,I]),N.useEffect(()=>{if(!(!t||!S))return s==="free"&&(t.on("mouse:down",Z),t.on("mouse:move",ae),t.on("mouse:up",te)),()=>{t.off("mouse:down",Z),t.off("mouse:move",ae),t.off("mouse:up",te)}},[t,S,s,Z,ae,te]),g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!x&&!S?g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(Qa,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Tool"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>v(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),g.jsx(Oe.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):S?g.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx(Oe.div,{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:g.jsx(Qa,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-primary",children:"Crop Active"})]}),g.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[p&&g.jsx(Oe.button,{onClick:E,className:"p-2 sm:p-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Undo Last Crop",children:g.jsx(U0,{size:14,className:"sm:w-4 sm:h-4"})}),g.jsx(Oe.button,{onClick:oe,className:"p-2 sm:p-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-green-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Apply Crop",children:g.jsx(DT,{size:14,className:"sm:w-4 sm:h-4"})}),g.jsx(Oe.button,{onClick:X,className:"p-2 sm:p-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-red-500/30",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},title:"Cancel",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),g.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:g.jsx("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:"🎯 Click and drag to draw crop area, then adjust as needed. Click ✓ to apply or ✕ to cancel."})})]}):g.jsxs("div",{className:"space-y-4 sm:space-y-5",children:[g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(Qa,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Crop Settings"})]}),g.jsx(Oe.button,{onClick:()=>v(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-300 shadow-sm hover:shadow-md",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[g.jsxs(Oe.button,{onClick:I,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[g.jsx(Qa,{size:16,className:"sm:w-4 sm:h-5"}),g.jsx("span",{children:"Start Crop"})]}),p&&g.jsxs(Oe.button,{onClick:E,className:"w-full flex items-center justify-center gap-2 sm:gap-3 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm sm:text-base font-semibold",whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},children:[g.jsx(U0,{size:16,className:"sm:w-4 sm:h-5"}),g.jsx("span",{children:"Undo Last Crop"})]})]})]})})}),dR=N.forwardRef(({canvas:t,isActive:e,onClose:r},o)=>{const[x,v]=N.useState(!1),[S,f]=N.useState(100),[s,u]=N.useState(!1),[h,a]=N.useState(null),[l,c]=N.useState(null),m=[25,50,75,100,125,150,200,300,400,500],y=N.useCallback(()=>{t&&c({zoom:t.getZoom(),viewportTransform:t.viewportTransform.slice()})},[t]),p=N.useCallback(()=>{t&&(y(),t.setViewportTransform([1,0,0,1,0,0]),t.setZoom(1),f(100),t.renderAll())},[t,y]),w=N.useCallback(()=>{if(!t)return;y();const oe=t.getZoom(),Z=Math.min(oe*1.2,5);t.setZoom(Z),f(Math.round(Z*100)),t.renderAll()},[t,y]),C=N.useCallback(()=>{if(!t)return;y();const oe=t.getZoom(),Z=Math.max(oe/1.2,.1);t.setZoom(Z),f(Math.round(Z*100)),t.renderAll()},[t,y]),T=N.useCallback(oe=>{if(!t)return;y();const Z=oe/100;t.setZoom(Z),f(oe),t.renderAll()},[t,y]),j=N.useCallback(()=>{t&&(u(!0),t.defaultCursor="grab",t.hoverCursor="grab",t.selection=!1,t.isDrawingMode=!1,y())},[t,y]),E=N.useCallback(()=>{t&&(u(!1),t.defaultCursor="default",t.hoverCursor="move",t.selection=!0)},[t]),M=N.useCallback(oe=>{if(!s||!t)return;const Z=t.getPointer(oe.e);a(Z),t.defaultCursor="grabbing"},[s,t]),D=N.useCallback(oe=>{if(!s||!h||!t)return;const Z=t.getPointer(oe.e),ae=Z.x-h.x,te=Z.y-h.y,G=t.viewportTransform.slice();G[4]+=ae,G[5]+=te,t.setViewportTransform(G),t.renderAll(),a(Z)},[s,h,t]),A=N.useCallback(()=>{s&&(a(null),t.defaultCursor="grab")},[s,t]),I=N.useCallback(oe=>{if(!t)return;oe.preventDefault();const Z=oe.deltaY,ae=t.getZoom(),te=Math.max(.1,Math.min(5,ae-Z*.001));y(),t.setZoom(te),f(Math.round(te*100)),t.renderAll()},[t,y]),X=N.useCallback(()=>{!t||!l||(t.setZoom(l.zoom),t.setViewportTransform(l.viewportTransform),f(Math.round(l.zoom*100)),t.renderAll())},[t,l]);return N.useImperativeHandle(o,()=>({togglePanel:()=>v(oe=>!oe),showPanel:()=>v(!0),hidePanel:()=>v(!1),zoomIn:w,zoomOut:C,resetZoom:p,setZoom:T,startPan:j,stopPan:E,undoZoom:X,canUndo:!!l}),[w,C,p,T,j,E,X,l]),N.useEffect(()=>{if(!(!t||!s))return t.on("mouse:down",M),t.on("mouse:move",D),t.on("mouse:up",A),()=>{t.off("mouse:down",M),t.off("mouse:move",D),t.off("mouse:up",A)}},[t,s,M,D,A]),N.useEffect(()=>{if(t)return t.on("mouse:wheel",I),()=>{t.off("mouse:wheel",I)}},[t,I]),N.useEffect(()=>{if(!t)return;const oe=()=>{p()};return t.on("mouse:dblclick",oe),()=>{t.off("mouse:dblclick",oe)}},[t,p]),N.useEffect(()=>{if(!t)return;const oe=()=>{const Z=t.getZoom();f(Math.round(Z*100))};return t.on("mouse:wheel",oe),()=>{t.off("mouse:wheel",oe)}},[t]),g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!x&&!s?g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(Ja,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Zoom Tool"}),g.jsxs("span",{className:"text-xs bg-accent dark:bg-background-primary px-2 py-0.5 rounded-lg text-accent-dark font-semibold",children:[S,"%"]})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>v(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),g.jsx(Oe.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]})]})}):s?g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-md",children:g.jsx(cc,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Pan Mode"})]}),g.jsx(Oe.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl border border-orange-500",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(cc,{size:18,className:"animate-pulse"}),g.jsx("p",{className:"text-sm font-semibold",children:"Click and drag to pan..."})]})}),g.jsx("div",{className:"p-3 sm:p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:g.jsxs("p",{className:"text-xs sm:text-sm text-text leading-relaxed",children:[g.jsx("strong",{children:"Click and drag"})," to pan around the canvas.",g.jsx("br",{}),g.jsx("strong",{children:"Mouse wheel"})," to zoom in/out.",g.jsx("br",{}),g.jsx("strong",{children:"Double-click"})," to fit to screen."]})}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Oe.button,{onClick:C,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[g.jsx(Y0,{size:12}),g.jsx("span",{children:"Out"})]}),g.jsxs(Oe.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[g.jsx(Ja,{size:12}),g.jsx("span",{children:"In"})]}),g.jsxs(Oe.button,{onClick:p,className:"flex-1 flex items-center justify-center gap-1 py-1.5 px-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-sm hover:shadow-md text-xs font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.96},children:[g.jsx(xo,{size:12}),g.jsx("span",{children:"Fit"})]})]})]}):g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(Ja,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Zoom & Pan Controls"})]}),g.jsx(Oe.button,{onClick:()=>v(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsx("div",{className:"bg-accent dark:bg-background-primary border border-border rounded-xl p-3 sm:p-4",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium text-text",children:"Current Zoom"}),g.jsxs("span",{className:"text-lg sm:text-xl font-bold text-primary",children:[S,"%"]})]})}),g.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Oe.button,{onClick:C,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 shadow-md hover:shadow-lg shadow-gray-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[g.jsx(Y0,{size:16}),g.jsx("span",{children:"Zoom Out"})]}),g.jsxs(Oe.button,{onClick:w,className:"flex-1 flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[g.jsx(Ja,{size:16}),g.jsx("span",{children:"Zoom In"})]})]}),g.jsxs(Oe.button,{onClick:p,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(xo,{size:16}),g.jsx("span",{children:"Fit to Screen"})]}),g.jsxs(Oe.button,{onClick:j,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-3 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(cc,{size:16}),g.jsx("span",{children:"Pan Mode"})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{className:"block text-sm font-semibold text-text",children:"Quick Zoom"}),g.jsx("div",{className:"grid grid-cols-5 gap-1",children:m.map(oe=>g.jsxs(Oe.button,{onClick:()=>T(oe),className:`px-2 py-1.5 text-xs rounded-lg font-semibold shadow-sm ${S===oe?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[oe,"%"]},oe))})]}),l&&g.jsxs(Oe.button,{onClick:X,className:"w-full flex items-center justify-center gap-2 py-2 sm:py-2.5 px-3 sm:px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg shadow-orange-500/30 text-sm font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(_i,{size:16}),g.jsx("span",{children:"Undo Last Zoom"})]}),g.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Mo,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),g.jsxs("div",{className:"text-sm text-text",children:[g.jsx("p",{className:"font-semibold mb-1",children:"Tips:"}),g.jsxs("ul",{className:"space-y-1 leading-relaxed",children:[g.jsx("li",{children:"• Use mouse wheel to zoom in/out"}),g.jsx("li",{children:"• Hold Space + drag to pan"}),g.jsx("li",{children:"• Double-click to fit to screen"})]})]})]})})]})})}),wf=({canvas:t,isActive:e=!1,onToolChange:r,onSettingsChange:o,onClose:x,initialSettings:v={}})=>{const[S,f]=N.useState({size:15,minSize:5,maxSize:100,opacity:.8,shape:"circle",pressure:!0,preview:!0,smoothing:.7,hardness:.8,spacing:.25,flow:1,dynamics:!0,antiAliasing:!0,blendMode:"destination-out",...v}),[s,u]=N.useState(!1),[h,a]=N.useState(!1),[l,c]=N.useState(!1),[m,y]=N.useState(null),[p,w]=N.useState([]),[C,T]=N.useState(1),[j,E]=N.useState(0),[M,D]=N.useState([]),[A,I]=N.useState(!1),[X,oe]=N.useState({totalErased:0,sessionTime:0,undoCount:0});N.useRef({x:0,y:0});const Z=N.useRef(null);N.useRef([]);const ae=N.useRef([]);N.useRef([]);const te=N.useRef(!1);N.useRef(1),N.useRef({x:0,y:0}),N.useRef(0),N.useRef(null),N.useRef(null),N.useRef(Date.now());const G=N.useRef(null);ub(1),ub(.8);const z=N.useMemo(()=>{let W=S.size;if(S.pressure&&(W*=.3+C*.7),S.dynamics&&j>0){const ue=Math.min(j/1e3,1);W*=1-ue*.3}return Math.max(S.minSize,Math.min(S.maxSize,W))},[S.size,S.pressure,S.dynamics,S.minSize,S.maxSize,C,j]),q=N.useCallback(W=>{var ce,ie,Q,me;if(!t||!e)return;(ie=(ce=W.e)==null?void 0:ce.preventDefault)==null||ie.call(ce),(me=(Q=W.e)==null?void 0:Q.stopPropagation)==null||me.call(Q),t.discardActiveObject();const ue=t.getPointer(W.e);te.current=!0,c(!0),Z.current=ue,console.log(`

🧹🧹🧹 =============== MOUSE DOWN - ERASING STARTED ===============`),console.log("📍 Mouse down at:",ue),console.log("🎨 Canvas objects count:",t.getObjects().length),console.log("⚙️ isMouseDownRef.current:",te.current),B(ue)},[t,e]),Y=N.useCallback(W=>{if(!t||!e)return;const ue=t.getPointer(W.e);y(ue);const ce=t.contextTop;ce&&(ce.save(),ce.clearRect(0,0,t.width,t.height),ce.strokeStyle="#ff0000",ce.lineWidth=2,ce.setLineDash([5,5]),ce.beginPath(),ce.arc(ue.x,ue.y,S.size/2,0,Math.PI*2),ce.stroke(),ce.restore()),te.current?(console.log("🖱️ MOUSE MOVE (dragging) at:",ue,"| isMouseDown:",te.current),B(ue)):console.log("👆 MOUSE MOVE (hover) at:",ue,"| isMouseDown:",te.current)},[t,e,S.size]),R=N.useCallback(()=>{!t||!e||(console.log("🛑 =============== MOUSE UP - ERASING FINISHED ==============="),console.log("⚙️ Setting isMouseDownRef.current to false"),te.current=!1,c(!1),Z.current=null,console.log(`✅ Erasing session ended

`))},[t,e]),O=N.useCallback(()=>{y(null),te.current&&R()},[R]),L=N.useCallback((W,ue,ce,ie,Q,me)=>{const le=W-ce,H=ue-ie,re=Q-ce,ge=me-ie,de=le*re+H*ge,fe=re*re+ge*ge;let Se=-1;fe!==0&&(Se=de/fe);let $,ne;Se<0?($=ce,ne=ie):Se>1?($=Q,ne=me):($=ce+Se*re,ne=ie+Se*ge);const ee=W-$,we=ue-ne;return Math.sqrt(ee*ee+we*we)},[]),B=N.useCallback(W=>{if(!t)return;console.log(`
🧹 ==================== PERFORM ERASE ACTION ====================`),console.log("🎯 Eraser position:",W),console.log("📏 Eraser size:",S.size),console.log("🔍 Tolerance:",8);const ue=t.getObjects(),ce=[],ie=8;if(console.log("📦 Total objects on canvas:",ue.length),ue.length===0){console.log("⚠️ No objects on canvas to erase!");return}ue.forEach((Q,me)=>{var H;if(Q===t.backgroundImage||Q._isPreview){console.log(`Object ${me}: SKIPPED (background/preview)`);return}let le=!1;if(console.log(`
--- Object ${me} ---`),console.log("Object type:",Q.type),console.log("Object position - left:",Q.left,"top:",Q.top),console.log("Stroke width:",Q.strokeWidth),Q.type==="line"){const re=Q.x1+Q.left,ge=Q.y1+Q.top,de=Q.x2+Q.left,fe=Q.y2+Q.top;console.log("Line endpoints:",{x1:re,y1:ge,x2:de,y2:fe});const Se=L(W.x,W.y,re,ge,de,fe),ne=(Q.strokeWidth||1)/2+ie;console.log("Distance to line:",Se.toFixed(2),"Threshold:",ne.toFixed(2)),Se<=ne?(le=!0,console.log("✅ WILL ERASE - within threshold")):console.log("❌ NO ERASE - too far from line")}else if(Q.type==="path"){if(console.log("🎨 PATH OBJECT FOUND"),console.log("   Path points count:",((H=Q.path)==null?void 0:H.length)||0),console.log("   Stroke color:",Q.stroke),console.log("   Stroke width:",Q.strokeWidth),Q.path&&Q.path.length>0){const ge=(Q.strokeWidth||1)/2+ie;console.log("   🎯 Threshold for hit detection:",ge.toFixed(2),"px"),console.log("   📍 First 5 path points:",Q.path.slice(0,5).map(($,ne)=>{var ee,we;return`[${ne}]: [${(ee=$[1])==null?void 0:ee.toFixed(1)}, ${(we=$[2])==null?void 0:we.toFixed(1)}]`}).join(", "));let de=1/0,fe=null,Se=[];for(let $=0;$<Q.path.length;$++){const ne=Q.path[$];if(ne.length>=3){const ee=ne[1],we=ne[2],Ce=Math.sqrt(Math.pow(W.x-ee,2)+Math.pow(W.y-we,2));if(Ce<de&&(de=Ce,fe={px:ee,py:we,index:$,distance:Ce.toFixed(2)}),Ce<=ge&&(le=!0,Se.push({index:$,distance:Ce.toFixed(2)})),$>0&&Q.path[$-1].length>=3){const ke=Q.path[$-1][1],Ne=Q.path[$-1][2],Me=L(W.x,W.y,ke,Ne,ee,we);Me<de&&(de=Me,fe={px:ee,py:we,index:$,distance:Me.toFixed(2),type:"line-segment"}),Me<=ge&&(le=!0,Se.push({index:`${$-1}-${$}`,distance:Me.toFixed(2),type:"line"}))}}}le?(console.log(`   ✅ HIT DETECTED! - Hit ${Se.length} points/segments:`,Se),console.log("   🔪 Instead of partial erase, removing entire object for now..."),le=!0,console.log("   ⚠️ Marking object for complete removal")):console.log(`   ❌ NO HIT - Closest distance: ${de.toFixed(2)}px at`,fe)}}else{const re=Q.getBoundingRect();if(W.x>=re.left-ie&&W.x<=re.left+re.width+ie&&W.y>=re.top-ie&&W.y<=re.top+re.height+ie)if(Q.containsPoint){const ge=new Xe.fabric.Point(W.x,W.y);le=Q.containsPoint(ge)}else le=!0}le&&(console.log("⭐ Adding to removal list"),ce.push(Q))}),console.log(`
📊 ========== SUMMARY ==========`),console.log("Objects marked for complete removal:",ce.length),ce.length>0?(ce.forEach((Q,me)=>{console.log(`   🗑️ Removing object ${me}:`,Q.type),t.remove(Q)}),t.requestRenderAll(),console.log("✅ Successfully removed",ce.length,"objects")):console.log("ℹ️ No objects marked for complete removal"),console.log("📦 Final canvas objects count:",t.getObjects().length),console.log(`======================================================
`)},[t,z,L,S.size]),K=N.useCallback(W=>{f(ue=>{const ce={...ue,...W};return o==null||o(ce),ce})},[o]);N.useCallback(()=>{if(ae.current.length>0){const W=ae.current.pop();t.loadFromJSON(W,()=>{t.renderAll(),console.log("⏪ Undo انجام شد")})}},[t]);const V=N.useCallback(()=>{if(!t)return;const W=JSON.stringify(t.toJSON());ae.current.push(W),t.getObjects().forEach(ce=>{ce!==t.backgroundImage&&t.remove(ce)}),t.renderAll(),w([]),console.log("🗑️ همه objects پاک شدند")},[t]),F=N.useCallback(()=>{if(!t||!m)return;const W=t.contextTop;W&&(W.save(),W.clearRect(0,0,t.width,t.height),W.strokeStyle="#ff0000",W.lineWidth=2,W.setLineDash([5,5]),W.beginPath(),W.arc(m.x,m.y,z/2,0,Math.PI*2),W.stroke(),W.restore())},[t,m,z]),J=N.useRef({handleMouseDown:null,handleMouseMove:null,handleMouseUp:null,handleMouseLeave:null});return N.useEffect(()=>{J.current.handleMouseDown=q,J.current.handleMouseMove=Y,J.current.handleMouseUp=R,J.current.handleMouseLeave=O}),N.useEffect(()=>{if(!t||!e)return;t.discardActiveObject(),t.renderAll();const W=Q=>{var me,le;return(le=(me=J.current).handleMouseDown)==null?void 0:le.call(me,Q)},ue=Q=>{var me,le;return(le=(me=J.current).handleMouseMove)==null?void 0:le.call(me,Q)},ce=Q=>{var me,le;return(le=(me=J.current).handleMouseUp)==null?void 0:le.call(me,Q)},ie=Q=>{var me,le;return(le=(me=J.current).handleMouseLeave)==null?void 0:le.call(me,Q)};return t.on("mouse:down",W),t.on("mouse:move",ue),t.on("mouse:up",ce),t.on("mouse:leave",ie),()=>{t.off("mouse:down",W),t.off("mouse:move",ue),t.off("mouse:up",ce),t.off("mouse:leave",ie)}},[t,e]),N.useEffect(()=>{F()},[F]),N.useEffect(()=>{t&&e?(t.defaultCursor="crosshair",t.hoverCursor="crosshair",t.isDrawingMode=!1,t.selection=!1,t.renderAll()):t&&!e&&(t.selection=!0,t.defaultCursor="default",t.hoverCursor="move",t.renderAll())},[t,e]),N.useEffect(()=>{if(t&&!e){const W=t.contextTop;W&&W.clearRect(0,0,t.width,t.height)}},[t,e]),N.useEffect(()=>{const W=ue=>{G.current&&!G.current.contains(ue.target)&&u(!1)};return document.addEventListener("mousedown",W),document.addEventListener("touchstart",W),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchstart",W)}},[s]),g.jsx(Oe.div,{ref:G,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:h?g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:g.jsx($h,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Eraser Tool"})]}),g.jsx(Oe.button,{onClick:()=>a(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("label",{className:"text-sm font-semibold text-text",children:"Size"}),g.jsxs("span",{className:"text-xs text-text-muted",children:[z,"px"]})]}),g.jsx("input",{type:"range",min:S.minSize,max:S.maxSize,value:S.size,onChange:W=>K({size:parseInt(W.target.value)}),className:"w-full h-2 bg-accent rounded-lg appearance-none cursor-pointer slider"}),g.jsxs("div",{className:"flex justify-between text-xs text-text-muted mt-1",children:[g.jsxs("span",{children:[S.minSize,"px"]}),g.jsxs("span",{children:[S.maxSize,"px"]})]})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Shape"}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"circle",label:"Circle",icon:Of},{value:"square",label:"Square",icon:Fs},{value:"line",label:"Line",icon:Rr}].map(({value:W,label:ue,icon:ce})=>g.jsxs(Oe.button,{onClick:()=>K({shape:W}),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${S.shape===W?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[g.jsx(ce,{size:18}),g.jsx("span",{className:"text-xs font-semibold",children:ue})]},W))})]}),g.jsx("div",{className:"flex items-center justify-center bg-accent dark:bg-background-primary rounded-xl border border-border p-4",children:g.jsx("div",{className:`border-2 border-dashed border-red-400 bg-red-100 ${S.shape==="square"?"":"rounded-full"}`,style:{width:`${Math.min(z,60)}px`,height:S.shape==="line"?"4px":`${Math.min(z,60)}px`}})}),g.jsxs(Oe.button,{onClick:V,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(Pc,{size:18}),g.jsx("span",{children:"Clear All"})]}),p.length>0&&g.jsxs(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-xl text-sm text-orange-800 dark:text-orange-300",children:[p.length," objects erased"]})]}):g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-red-500 to-red-600 text-white shadow-md",children:g.jsx($h,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Eraser Tool"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>a(!0),className:"p-1.5 sm:p-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:14,className:"sm:w-4 sm:h-4"})}),g.jsx(Oe.button,{onClick:x,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]})]})})})};wf.propTypes={canvas:Je.object,isActive:Je.bool,onToolChange:Je.func,onSettingsChange:Je.func,onClose:Je.func,initialSettings:Je.object};Je.object,Je.object,Je.oneOf(["rectangle","circle","ellipse","polygon"]),Je.bool,Je.shape({color:Je.string,strokeWidth:Je.number,strokeDashArray:Je.array,opacity:Je.number,selectable:Je.bool,evented:Je.bool,extendBeyondROI:Je.bool,showCenter:Je.bool,centerRadius:Je.number,centerColor:Je.string}),Je.func,Je.string;Je.bool.isRequired,Je.func.isRequired,Je.object.isRequired,Je.func.isRequired,Je.string;const Uw=N.createContext(),Hw=()=>{const t=N.useContext(Uw);if(!t)throw new Error("useHistogram must be used within HistogramProvider");return t},hR=({children:t})=>{const[e,r]=N.useState(null),[o,x]=N.useState(null),[v,S]=N.useState("gray"),[f,s]=N.useState(null),u=N.useCallback((l,c,m=null)=>{r(l),x(c),s(m)},[]),h=N.useCallback(()=>{r(null),x(null),s(null)},[]),a=N.useCallback(l=>{S(l)},[]);return g.jsx(Uw.Provider,{value:{histogramData:e,selectedPoint:o,currentChannel:v,selectionRegion:f,updateHistogram:u,clearHistogram:h,changeChannel:a},children:t})},fR=({canvas:t,isActive:e,onClose:r})=>{const[o,x]=N.useState("area"),[v,S]=N.useState(!1),[f,s]=N.useState(null),[u,h]=N.useState(!1),a=N.useRef(null),l=N.useRef([]),{updateHistogram:c}=Hw(),{addToLayer:m,removeFromLayer:y}=km("Histogram Selection","histogram",t,e),p=N.useCallback(Z=>{const ae={red:new Array(256).fill(0),green:new Array(256).fill(0),blue:new Array(256).fill(0),gray:new Array(256).fill(0)};for(let te=0;te<Z.length;te+=4){const G=Z[te],z=Z[te+1],q=Z[te+2],Y=Math.round(.299*G+.587*z+.114*q);ae.red[G]++,ae.green[z]++,ae.blue[q]++,ae.gray[Y]++}return ae},[]),w=N.useCallback((Z,ae)=>{if(!t)return null;try{const z=t.getContext("2d").getImageData(Z,ae,1,1).data;return{r:z[0],g:z[1],b:z[2],a:z[3]}}catch(te){return console.error("Error getting pixel data:",te),null}},[t]),C=N.useCallback(Z=>{let ae=0,te=0,G=0,z=0;const q=Z.data,Y=q.length/4;for(let R=0;R<q.length;R+=4)ae+=q[R],te+=q[R+1],G+=q[R+2],z+=q[R+3];return{r:Math.round(ae/Y),g:Math.round(te/Y),b:Math.round(G/Y),a:Math.round(z/Y)}},[]),T=N.useCallback(Z=>{if(!t)return;const ae={left:0,top:0,width:t.width,height:t.height};let te=[];if(Z.type==="circle"){const G=new Xe.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:ae.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),z=new Xe.fabric.Circle({left:Z.left,top:Z.top,radius:Z.radius,fill:"transparent",stroke:"transparent",originX:"center",originY:"center",selectable:!1,evented:!1,excludeFromExport:!0,globalCompositeOperation:"destination-out"});te=[G,z]}else if(Z.type==="rect"){const G=Z.width*(Z.scaleX||1),z=Z.height*(Z.scaleY||1);te=[new Xe.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:Math.max(0,Z.top-ae.top),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:ae.left,top:Z.top+z,width:ae.width,height:Math.max(0,ae.height-(Z.top+z)),fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:ae.left,top:Z.top,width:Math.max(0,Z.left-ae.left),height:z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0}),new Xe.fabric.Rect({left:Z.left+G,top:Z.top,width:Math.max(0,ae.width-(Z.left+G)),height:z,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]}else Z.type==="line"&&(te=[new Xe.fabric.Rect({left:ae.left,top:ae.top,width:ae.width,height:ae.height,fill:"rgba(0,0,0,0.5)",selectable:!1,evented:!1,excludeFromExport:!0})]);te.forEach(G=>t.add(G)),l.current=te},[t]),j=N.useCallback(()=>{if(t)try{l.current.forEach(Z=>{Z&&(t.remove(Z),y(Z))}),l.current=[],a.current&&(t.remove(a.current),y(a.current),a.current=null),t.getContext&&t.getContext("2d")&&t.renderAll()}catch(Z){console.warn("Error removing selection objects:",Z)}},[t,y]),E=N.useCallback(Z=>{const ae=Math.round(Z.x),te=Math.round(Z.y);console.log("📍 Point Selection:"),console.log("  Position:",{x:ae,y:te});const G=w(ae,te);console.log("  Pixel at point:",G);try{const z=t.getContext("2d"),q=50,Y=z.getImageData(Math.max(0,ae-q),Math.max(0,te-q),Math.min(q*2,t.width-(ae-q)),Math.min(q*2,t.height-(te-q)));console.log("  Analyzed pixels:",Y.data.length/4),console.log("  Area size:",Y.width,"x",Y.height);const R=p(Y.data);console.log("  Histogram calculated - Red channel sample:",R.red.slice(0,10));const O=new Xe.fabric.Circle({left:ae,top:te,radius:q,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,originX:"center",originY:"center",selectable:!1,evented:!1});c(R,{x:ae,y:te,pixel:G,mode:"point"},{type:"point",x:ae,y:te,radius:q,fabricObject:O}),j(),a.current=O,t.add(O),m(O),T(O),l.current.forEach(B=>m(B)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,w,p,c,j,T,m]),M=N.useCallback((Z,ae,te,G)=>{console.log("🔲 Area Selection:"),console.log("  Start:",{x:Z,y:ae}),console.log("  End:",{x:te,y:G});try{const z=t.getContext("2d"),q=Math.min(Z,te),Y=Math.min(ae,G),R=Math.abs(te-Z),O=Math.abs(G-ae);console.log("  Rectangle:",{left:q,top:Y,width:R,height:O});const L=z.getImageData(q,Y,R,O);console.log("  Analyzed pixels:",L.data.length/4);const B=p(L.data),K=C(L);console.log("  Average pixel:",K),console.log("  Histogram calculated - Red channel sample:",B.red.slice(0,10));const V=new Xe.fabric.Rect({left:q,top:Y,width:R,height:O,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),F={type:"area",left:q,top:Y,width:R,height:O,fabricObject:V};c(B,{x:Math.round((Z+te)/2),y:Math.round((ae+G)/2),pixel:K,mode:"area",width:R,height:O},F),j(),a.current=V,t.add(V),m(V),T(V),l.current.forEach(J=>m(J)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,p,C,c,j,T,m]),D=N.useCallback((Z,ae,te,G)=>{console.log("➖ Line Selection:"),console.log("  Start:",{x:Z,y:ae}),console.log("  End:",{x:te,y:G});try{const z=t.getContext("2d"),q=[],Y=Math.abs(te-Z),R=Math.abs(G-ae),O=Z<te?1:-1,L=ae<G?1:-1;let B=Y-R,K=Z,V=ae;for(;q.push({x:K,y:V}),!(K===te&&V===G);){const Q=2*B;Q>-R&&(B-=R,K+=O),Q<Y&&(B+=Y,V+=L)}console.log("  Points on line:",q.length),console.log("  First 5 points:",q.slice(0,5));const F=[];q.forEach(Q=>{const me=z.getImageData(Q.x,Q.y,1,1);F.push(...Array.from(me.data))}),console.log("  Total pixels analyzed:",F.length/4);const J=p(new Uint8ClampedArray(F)),W=C({data:new Uint8ClampedArray(F)}),ue=Math.round(Math.sqrt(Y*Y+R*R));console.log("  Line length:",ue,"pixels"),console.log("  Average pixel:",W),console.log("  Histogram calculated - Red channel sample:",J.red.slice(0,10));const ce=new Xe.fabric.Line([Z,ae,te,G],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1}),ie={type:"line",x1:Z,y1:ae,x2:te,y2:G,length:ue,fabricObject:ce};c(J,{x:Math.round((Z+te)/2),y:Math.round((ae+G)/2),pixel:W,mode:"line",length:ue},ie),j(),a.current=ce,t.add(ce),m(ce),T(ce),l.current.forEach(Q=>m(Q)),t.renderAll()}catch(z){console.error("❌ Error calculating histogram:",z)}},[t,p,C,c,j,T,m]),A=N.useCallback(Z=>{if(!t||!e||!v)return;const ae=t.getPointer(Z.e);s(ae),o==="point"&&(E(ae),S(!1),t.defaultCursor="default",t.hoverCursor="move")},[t,e,v,o,E]),I=N.useCallback(Z=>{if(!t||!e||!v||!f||o==="point")return;const ae=t.getPointer(Z.e);if(j(),o==="area"){const te=new Xe.fabric.Rect({left:Math.min(f.x,ae.x),top:Math.min(f.y,ae.y),width:Math.abs(ae.x-f.x),height:Math.abs(ae.y-f.y),fill:"transparent",stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=te,t.add(te)}else if(o==="line"){const te=new Xe.fabric.Line([f.x,f.y,ae.x,ae.y],{stroke:"#3b82f6",strokeWidth:2,selectable:!1,evented:!1});a.current=te,t.add(te)}t.renderAll()},[t,e,v,f,o,j]),X=N.useCallback(Z=>{if(!t||!e||!v||!f||o==="point")return;const ae=t.getPointer(Z.e);o==="area"?M(f.x,f.y,ae.x,ae.y):o==="line"&&D(Math.round(f.x),Math.round(f.y),Math.round(ae.x),Math.round(ae.y)),S(!1),s(null),t.defaultCursor="default",t.hoverCursor="move"},[t,e,v,f,o,M,D]),oe=N.useCallback(()=>{t&&(S(!0),t.defaultCursor="crosshair",t.hoverCursor="crosshair")},[t]);return N.useEffect(()=>{if(!(!t||!e))return t.on("mouse:down",A),t.on("mouse:move",I),t.on("mouse:up",X),()=>{t.off("mouse:down",A),t.off("mouse:move",I),t.off("mouse:up",X)}},[t,e,A,I,X]),N.useEffect(()=>{e&&t?oe():!e&&t&&(S(!1),s(null),j(),t.defaultCursor="default",t.hoverCursor="move")},[e,t,j]),g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!u&&!v?g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(to,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Histogram Tool"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>{h(!0),S(!1)},className:"p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:16})}),g.jsx(Oe.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:16})})]})]})}):v?g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(to,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>{h(!0),S(!1)},className:"p-1.5 sm:p-2 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx(Oe.button,{onClick:r,className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]})]}),g.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl border border-primary",children:g.jsxs("div",{className:"flex items-center gap-2",children:[o==="point"&&g.jsx(Ls,{size:18,className:"animate-pulse"}),o==="area"&&g.jsx(Fs,{size:18,className:"animate-pulse"}),o==="line"&&g.jsx(Rr,{size:18,className:"animate-pulse"}),g.jsxs("p",{className:"text-sm font-semibold",children:[o==="point"&&"Click anywhere on the image...",o==="area"&&"Click and drag to select area...",o==="line"&&"Click and drag to draw line..."]})]})})]}):g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-primary-dark text-white shadow-md",children:g.jsx(to,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Histogram Tool"})]}),g.jsx(Oe.button,{onClick:()=>h(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm font-semibold text-text mb-2",children:"Selection Mode"}),g.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"point",label:"Point",icon:Ls},{mode:"area",label:"Area",icon:Fs},{mode:"line",label:"Line",icon:Rr}].map(({mode:Z,label:ae,icon:te})=>g.jsxs(Oe.button,{onClick:()=>x(Z),className:`flex flex-col items-center gap-1 p-3 rounded-xl ${o===Z?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-secondary dark:bg-background-primary text-text hover:bg-accent border border-border"}`,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03},whileTap:{scale:.97},children:[g.jsx(te,{size:18}),g.jsx("span",{className:"text-xs font-semibold",children:ae})]},Z))})]}),g.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Mo,{size:18,className:"text-primary mt-0.5 flex-shrink-0"}),g.jsxs("p",{className:"text-sm text-text leading-relaxed",children:[o==="point"&&"Click on a point to analyze 50px radius around it",o==="area"&&"Click and drag to select a rectangular area",o==="line"&&"Click and drag to draw a line across the image"]})]})}),g.jsxs(Oe.button,{onClick:oe,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary shadow-md hover:shadow-lg shadow-primary/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[o==="point"&&g.jsx(Ls,{size:18}),o==="area"&&g.jsx(Fs,{size:18}),o==="line"&&g.jsx(Rr,{size:18}),g.jsxs("span",{children:["Start ",o==="point"?"Point":o==="area"?"Area":"Line"," Selection"]})]})]})})},$w=N.createContext(),mR=()=>{const t=N.useContext($w);if(!t)throw new Error("useIntensityProfile must be used within IntensityProfileProvider");return t},gR=({children:t})=>{const[e,r]=N.useState([]),[o,x]=N.useState(null),[v,S]=N.useState(null),f=N.useCallback(c=>{const m={id:`profile-${Date.now()}`,timestamp:new Date().toISOString(),...c};return r(y=>[...y,m]),x(m.id),m},[]),s=N.useCallback(c=>{r(m=>m.filter(y=>y.id!==c)),o===c&&x(null)},[o]),u=N.useCallback((c,m)=>{r(y=>y.map(p=>p.id===c?{...p,...m}:p))},[]),h=N.useCallback(()=>{r([]),x(null),S(null)},[]),a=N.useCallback(()=>e.find(c=>c.id===o),[e,o]),l={profiles:e,activeProfileId:o,selectedRegion:v,setActiveProfileId:x,setSelectedRegion:S,addProfile:f,removeProfile:s,updateProfile:u,clearProfiles:h,getActiveProfile:a};return g.jsx($w.Provider,{value:l,children:t})},Xw=()=>{try{const t=localStorage.getItem("intensityProfileLineSpacing");return t?parseInt(t):50}catch{return 50}},sc={current:Xw()},pR=({canvas:t,isActive:e,onClose:r})=>{const[o,x]=N.useState("parallel-lines"),[v,S]=N.useState(!1),[f,s]=N.useState(!1),[u,h]=N.useState(Xw()),a=N.useRef(null),l=N.useRef([]),c=N.useRef(null),m=N.useRef({mouseDown:null,mouseMove:null,mouseUp:null}),{addProfile:y,selectedRegion:p,setSelectedRegion:w}=mR(),{addToLayer:C,removeFromLayer:T,getCurrentLayer:j}=km("Intensity Profile","intensity-profile",t,e);N.useEffect(()=>{sc.current=u},[u]);const E=N.useCallback((te,G,z,q)=>{if(!t)return null;try{const Y=t.getContext("2d"),R=[],O=Math.abs(z-te),L=Math.abs(q-G),B=te<z?1:-1,K=G<q?1:-1;let V=O-L,F=Math.round(te),J=Math.round(G);const W=Math.round(z),ue=Math.round(q);for(;;){const ie=Y.getImageData(F,J,1,1).data,Q=.299*ie[0]+.587*ie[1]+.114*ie[2];if(R.push({x:F,y:J,r:ie[0],g:ie[1],b:ie[2],intensity:Q,distance:Math.sqrt((F-te)**2+(J-G)**2)}),F===W&&J===ue)break;const me=2*V;me>-L&&(V-=L,F+=B),me<O&&(V+=O,J+=K)}return R}catch(Y){return console.error("Error calculating line intensity:",Y),null}},[t]),M=N.useCallback((te,G,z,q,Y)=>{if(!t)return null;try{const R=t.getContext("2d"),O=z-te,L=q-G,B=Math.sqrt(O*O+L*L),K=O/B,F=-(L/B),J=K,W={x1:te+F*Y/2,y1:G+J*Y/2,x2:z+F*Y/2,y2:q+J*Y/2},ue={x1:te-F*Y/2,y1:G-J*Y/2,x2:z-F*Y/2,y2:q-J*Y/2},ce=Math.ceil(B),ie=[];for(let Q=0;Q<ce;Q++){const me=Q/(ce-1),le=te+O*me,H=G+L*me,re=[],ge=Math.ceil(Y);for(let de=0;de<ge;de++){const fe=(de/(ge-1)-.5)*Y,Se=Math.round(le+F*fe),$=Math.round(H+J*fe);if(Se>=0&&Se<t.width&&$>=0&&$<t.height){const ee=R.getImageData(Se,$,1,1).data;re.push({r:ee[0],g:ee[1],b:ee[2],intensity:.299*ee[0]+.587*ee[1]+.114*ee[2]})}}if(re.length>0){const de=re.reduce((ne,ee)=>ne+ee.r,0)/re.length,fe=re.reduce((ne,ee)=>ne+ee.g,0)/re.length,Se=re.reduce((ne,ee)=>ne+ee.b,0)/re.length,$=re.reduce((ne,ee)=>ne+ee.intensity,0)/re.length;ie.push({position:Q,x:le,y:H,r:de,g:fe,b:Se,intensity:$,distance:Q})}}return{profiles:ie,line1:W,line2:ue,spacing:Y,length:B}}catch(R){return console.error("Error calculating parallel lines intensity:",R),null}},[t]),D=N.useCallback((te,G,z,q)=>{if(!t)return null;try{const O=t.getContext("2d").getImageData(te,G,z,q).data,L=[];for(let ie=0;ie<z;ie++){let Q=0,me=0,le=0,H=0;for(let re=0;re<q;re++){const ge=(re*z+ie)*4,de=O[ge],fe=O[ge+1],Se=O[ge+2],$=.299*de+.587*fe+.114*Se;Q+=de,me+=fe,le+=Se,H+=$}L.push({position:ie,r:Q/q,g:me/q,b:le/q,intensity:H/q})}const B=[];for(let ie=0;ie<q;ie++){let Q=0,me=0,le=0,H=0;for(let re=0;re<z;re++){const ge=(ie*z+re)*4,de=O[ge],fe=O[ge+1],Se=O[ge+2],$=.299*de+.587*fe+.114*Se;Q+=de,me+=fe,le+=Se,H+=$}B.push({position:ie,r:Q/z,g:me/z,b:le/z,intensity:H/z})}const K=[];for(let ie=0;ie<O.length;ie+=4){const Q=.299*O[ie]+.587*O[ie+1]+.114*O[ie+2];K.push(Q)}const V=K.reduce((ie,Q)=>ie+Q,0)/K.length,F=[...K].sort((ie,Q)=>ie-Q),J=F[0],W=F[F.length-1],ue=F[Math.floor(F.length/2)],ce=Math.sqrt(K.reduce((ie,Q)=>ie+(Q-V)**2,0)/K.length);return{horizontalProfile:L,verticalProfile:B,statistics:{mean:V,min:J,max:W,median:ue,stdDev:ce,pixelCount:K.length}}}catch(Y){return console.error("Error calculating rectangle intensity:",Y),null}},[t]),A=N.useCallback(()=>{if(t)try{if(l.current.length>0&&(l.current.forEach(te=>{if(te)try{t.remove(te),T(te)}catch{}}),l.current=[]),a.current){if(Array.isArray(a.current))a.current.forEach(te=>{if(te)try{t.remove(te),T(te)}catch{}});else if(typeof a.current=="object")Object.values(a.current).forEach(te=>{if(te)try{t.remove(te),T(te)}catch{}});else try{t.remove(a.current),T(a.current)}catch{}a.current=null}t.renderAll()}catch(te){console.error("Error removing region objects:",te)}},[t,T]);N.useCallback((te,G,z,q)=>{A();const Y=new Xe.fabric.Line([te,G,z,q],{stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=Y,t.add(Y),C(Y),t.renderAll();const R=E(te,G,z,q);if(R){const O=y({type:"line",region:{x1:te,y1:G,x2:z,y2:q},data:R,length:Math.sqrt((z-te)**2+(q-G)**2)});w({type:"line",fabricObject:Y,profile:O})}},[t,C,E,y,w,A]);const I=N.useCallback((te,G,z,q)=>{A(),l.current.forEach(O=>t.remove(O)),l.current=[];const Y=sc.current,R=M(te,G,z,q,Y);if(R){const{profiles:O,line1:L,line2:B}=R;new Xe.fabric.Group([],{selectable:!1,evented:!1});const K=new Xe.fabric.Line([L.x1,L.y1,L.x2,L.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1}),V=new Xe.fabric.Line([B.x1,B.y1,B.x2,B.y2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1});t.add(K),t.add(V),C(K),C(V);const F=new Xe.fabric.Line([L.x1,L.y1,B.x1,B.y1],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1}),J=new Xe.fabric.Line([L.x2,L.y2,B.x2,B.y2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1});t.add(F),t.add(J),C(F),C(J);const W=z-te,ue=q-G,ce=Math.sqrt(W*W+ue*ue),ie=-ue/ce,Q=W/ce,me=Math.min(...O.map(ne=>ne.intensity)),le=Math.max(...O.map(ne=>ne.intensity)),H=le-me||1,ge=O.map((ne,ee)=>{const Ce=((ne.intensity-me)/H-.5)*Y;return{x:ne.x+ie*Ce,y:ne.y+Q*Ce}}).map(ne=>({x:ne.x,y:ne.y})),de=new Xe.fabric.Polyline(ge,{stroke:"#00ff00",strokeWidth:2,fill:"",selectable:!1,evented:!1,objectCaching:!1});t.add(de),C(de),l.current.push(de);const fe=new Xe.fabric.Text(`Min: ${me.toFixed(0)}`,{left:te-ie*Y/2,top:G-Q*Y/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"}),Se=new Xe.fabric.Text(`Max: ${le.toFixed(0)}`,{left:te+ie*Y/2,top:G+Q*Y/2-20,fontSize:14,fill:"#ffff00",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:3,selectable:!1,evented:!1,fontWeight:"bold"});t.add(fe),t.add(Se),C(fe),C(Se),l.current.push(fe),l.current.push(Se),a.current={fabricLine1:K,fabricLine2:V,startConnector:F,endConnector:J},t.renderAll();const $=y({type:"parallel-lines",region:{x1:te,y1:G,x2:z,y2:q,spacing:Y},data:O,length:R.length,spacing:R.spacing});w({type:"parallel-lines",fabricObject:{fabricLine1:K,fabricLine2:V},profile:$})}},[t,C,M,y,w,A]);N.useCallback((te,G,z,q)=>{A();const Y=Math.min(te,z),R=Math.min(G,q),O=Math.abs(z-te),L=Math.abs(q-G),B=new Xe.fabric.Rect({left:Y,top:R,width:O,height:L,fill:"transparent",stroke:"#00ff00",strokeWidth:2,selectable:!1,evented:!1});a.current=B,t.add(B),C(B),t.renderAll();const K=D(Y,R,O,L);if(K){const V=y({type:"rectangle",region:{left:Y,top:R,width:O,height:L},data:K,area:O*L});w({type:"rectangle",fabricObject:B,profile:V})}},[t,C,D,y,w,A]);const X=N.useCallback(te=>{if(!t||!e)return;A();const G=t.getPointer(te.e);c.current=G,S(!0)},[t,e,A]),oe=N.useCallback(te=>{if(!t||!e||!c.current)return;const G=t.getPointer(te.e),z=c.current;a.current&&(typeof a.current=="object"&&a.current.line1&&(t.remove(a.current.line1),t.remove(a.current.line2),t.remove(a.current.startConnector),t.remove(a.current.endConnector)),a.current=null);const q=G.x-z.x,Y=G.y-z.y,R=Math.sqrt(q*q+Y*Y),O=sc.current;if(R>0){const L=-Y/R,B=q/R,K=new Xe.fabric.Line([z.x+L*O/2,z.y+B*O/2,G.x+L*O/2,G.y+B*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),V=new Xe.fabric.Line([z.x-L*O/2,z.y-B*O/2,G.x-L*O/2,G.y-B*O/2],{stroke:"#ff0000",strokeWidth:2,selectable:!1,evented:!1,opacity:.7}),F=new Xe.fabric.Line([z.x+L*O/2,z.y+B*O/2,z.x-L*O/2,z.y-B*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7}),J=new Xe.fabric.Line([G.x+L*O/2,G.y+B*O/2,G.x-L*O/2,G.y-B*O/2],{stroke:"#ff0000",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1,opacity:.7});t.add(K),t.add(V),t.add(F),t.add(J),a.current={line1:K,line2:V,startConnector:F,endConnector:J}}t.renderAll()},[t,e]),Z=N.useCallback(te=>{if(!t||!e||!c.current)return;const G=t.getPointer(te.e),z=c.current;I(Math.round(z.x),Math.round(z.y),Math.round(G.x),Math.round(G.y)),S(!1),c.current=null,t.defaultCursor="crosshair",t.hoverCursor="crosshair"},[t,e,I]);N.useEffect(()=>{m.current={mouseDown:X,mouseMove:oe,mouseUp:Z}},[X,oe,Z]),N.useEffect(()=>{if(!t||!e)return;const te=q=>{var Y,R;return(R=(Y=m.current).mouseDown)==null?void 0:R.call(Y,q)},G=q=>{var Y,R;return(R=(Y=m.current).mouseMove)==null?void 0:R.call(Y,q)},z=q=>{var Y,R;return(R=(Y=m.current).mouseUp)==null?void 0:R.call(Y,q)};return t.off("mouse:down"),t.off("mouse:move"),t.off("mouse:up"),t.on("mouse:down",te),t.on("mouse:move",G),t.on("mouse:up",z),()=>{t.off("mouse:down",te),t.off("mouse:move",G),t.off("mouse:up",z)}},[t,e]),N.useEffect(()=>{e&&t?(ae(),t.selection=!1):!e&&t&&(S(!1),c.current=null,t.selection=!0,t.defaultCursor&&(t.defaultCursor="default"),t.hoverCursor&&(t.hoverCursor="move"))},[e,t]);const ae=N.useCallback(()=>{t&&(S(!0),t.defaultCursor="crosshair",t.hoverCursor="crosshair")},[t]);return g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-72 sm:w-80 bg-background-white dark:bg-background-secondary rounded-2xl shadow-2xl border border-border p-4 sm:p-6",children:!f&&!v?g.jsx("div",{className:"space-y-3",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx("div",{className:"p-1.5 sm:p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:g.jsx(nr,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx("span",{className:"text-sm sm:text-base font-semibold text-text",children:"Intensity Profile"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>{s(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:16})}),g.jsx(Oe.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:16})})]})]})}):v?g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:g.jsx(nr,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Oe.button,{onClick:()=>{s(!0),S(!1)},className:"p-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Settings",children:g.jsx(Bt,{size:16,className:"sm:w-5 sm:h-5"})}),g.jsx(Oe.button,{onClick:r,className:"p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Close Tool",children:g.jsx(Yt,{size:16,className:"sm:w-4 sm:h-4"})})]})]}),g.jsx(Oe.div,{animate:{scale:[1,1.05,1]},transition:{duration:1.5,repeat:1/0},className:"p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl border border-green-500",children:g.jsxs("div",{className:"flex items-center gap-2",children:[o==="line"&&g.jsx(Rr,{size:18,className:"animate-pulse"}),o==="parallel-lines"&&g.jsx(A0,{size:18,className:"animate-pulse"}),o==="rectangle"&&g.jsx(Fs,{size:18,className:"animate-pulse"}),g.jsxs("p",{className:"text-sm font-semibold",children:[o==="line"&&"Click and drag to draw line...",o==="parallel-lines"&&"Click and drag to draw parallel lines...",o==="rectangle"&&"Click and drag to draw rectangle..."]})]})})]}):g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-500 to-green-600 text-white shadow-md",children:g.jsx(nr,{size:20})}),g.jsx("span",{className:"text-base font-semibold text-text",children:"Intensity Profile"})]}),g.jsx(Oe.button,{onClick:()=>s(!1),className:"p-1.5 sm:p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1,y:-2},whileTap:{scale:.93},title:"Collapse",children:g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"})})]}),g.jsxs("div",{children:[g.jsxs("div",{className:"text-sm font-semibold text-text mb-2",children:["Region Width: ",u,"px"]}),g.jsx("input",{type:"range",min:"20",max:"200",value:u,onChange:te=>{const G=parseInt(te.target.value);h(G),sc.current=G,localStorage.setItem("intensityProfileLineSpacing",G.toString())},className:"w-full h-2 bg-background-secondary rounded-lg appearance-none cursor-pointer slider-green",style:{background:`linear-gradient(to right, #10b981 0%, #10b981 ${(u-20)/180*100}%, #e5e7eb ${(u-20)/180*100}%, #e5e7eb 100%)`}}),g.jsxs("div",{className:"flex justify-between text-xs text-text-secondary mt-1",children:[g.jsx("span",{children:"20px"}),g.jsx("span",{children:"200px"})]})]}),g.jsx("div",{className:"p-4 bg-accent dark:bg-background-primary rounded-xl border border-border",children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(Mo,{size:18,className:"text-green-500 mt-0.5 flex-shrink-0"}),g.jsx("p",{className:"text-sm text-text leading-relaxed",children:"Click and drag to select a region. The intensity profile will be displayed directly on the image with min/max values."})]})}),g.jsxs(Oe.button,{onClick:ae,className:"w-full flex items-center justify-center gap-3 py-3 px-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-semibold",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[o==="line"&&g.jsx(Rr,{size:18}),o==="parallel-lines"&&g.jsx(A0,{size:18}),o==="rectangle"&&g.jsx(Fs,{size:18}),g.jsxs("span",{children:["Draw ",o==="line"?"Line":o==="parallel-lines"?"Parallel Lines":"Rectangle"]})]}),j()&&g.jsxs("div",{className:"p-3 bg-background-secondary dark:bg-background-primary rounded-lg border border-border",children:[g.jsx("div",{className:"text-xs text-text-muted",children:"Layer"}),g.jsx("div",{className:"text-sm font-semibold text-text",children:j().name})]})]})})},xR=({canvas:t,enabled:e=!0,config:r={}})=>{const o=N.useRef(null),x=N.useRef(null),v=N.useRef(null),f={...{color:"#00ff00",strokeWidth:2,strokeDashArray:[10,5],opacity:.8,showCenter:!0,centerRadius:5,centerColor:"#ff0000",centerX:null,centerY:null},...r};return N.useEffect(()=>{if(!t||!e){o.current&&(t.remove(o.current),o.current=null),x.current&&(t.remove(x.current),x.current=null),v.current&&(t.remove(v.current),v.current=null),t==null||t.renderAll();return}const s=t.width||800,u=t.height||600,h=f.centerX??s/2,a=f.centerY??u/2;console.log(`[SimpleCrosshair] Drawing crosshair at (${h}, ${a})`),o.current&&t.remove(o.current),x.current&&t.remove(x.current),v.current&&t.remove(v.current);const l=new Xe.fabric.Line([0,a,s,a],{stroke:f.color,strokeWidth:f.strokeWidth,strokeDashArray:f.strokeDashArray,opacity:f.opacity,selectable:!1,evented:!1,name:"crosshair-horizontal"}),c=new Xe.fabric.Line([h,0,h,u],{stroke:f.color,strokeWidth:f.strokeWidth,strokeDashArray:f.strokeDashArray,opacity:f.opacity,selectable:!1,evented:!1,name:"crosshair-vertical"});if(t.add(l),t.add(c),o.current=l,x.current=c,f.showCenter){const m=new Xe.fabric.Circle({left:h-f.centerRadius,top:a-f.centerRadius,radius:f.centerRadius,fill:f.centerColor,stroke:f.centerColor,strokeWidth:1,opacity:f.opacity,selectable:!1,evented:!1,name:"crosshair-center"});t.add(m),v.current=m}return t.renderAll(),()=>{o.current&&(t.remove(o.current),o.current=null),x.current&&(t.remove(x.current),x.current=null),v.current&&(t.remove(v.current),v.current=null),t==null||t.renderAll()}},[t,e,f.color,f.strokeWidth,f.opacity,f.showCenter,f.centerColor,f.centerRadius,f.centerX,f.centerY]),null},yR=({canvas:t,isActive:e,onClose:r})=>{const{t:o}=tt(),[x,v]=N.useState(!0),[S,f]=N.useState({color:"#00ff00",strokeWidth:2,strokeDashArray:[10,5],opacity:.8,showCenter:!0,centerRadius:5,centerColor:"#ff0000"}),s=N.useCallback(u=>{f(h=>({...h,...u}))},[]);return e?g.jsxs(g.Fragment,{children:[g.jsx(xR,{canvas:t,enabled:x,config:S}),g.jsxs(Oe.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.3,ease:[.4,0,.2,1]},className:"bg-white dark:bg-background-secondary border-2 border-border rounded-2xl shadow-2xl w-80 overflow-hidden",children:[g.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 p-4",children:g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:g.jsx(Ls,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-white font-bold text-lg",children:o("crosshairTool")||"Crosshair Tool"}),g.jsx("p",{className:"text-white/80 text-xs",children:o("requirement22")||"Requirement #22"})]})]}),g.jsx(Oe.button,{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:g.jsx(Yt,{className:"w-5 h-5"})})]})}),g.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[g.jsxs(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[g.jsx(Mo,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[g.jsx("p",{className:"font-semibold mb-1",children:o("crosshairInfo")||"Crosshair Lines"}),g.jsx("p",{className:"text-xs",children:o("crosshairDescription")||"Two perpendicular lines passing through the center of the canvas."})]})]}),g.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ls,{className:"w-4 h-4 text-primary"}),g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:o("showCrosshair")||"Show Crosshair"})]}),g.jsx("button",{onClick:()=>v(!x),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:g.jsx(Oe.span,{layout:!0,className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:x?26:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsx(Er,{children:x&&g.jsxs(Oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("lineColor")||"Line Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"color",value:S.color,onChange:u=>s({color:u.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),g.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:S.color})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:o("lineWidth")||"Line Width"}),g.jsxs("span",{className:"font-mono text-primary",children:[S.strokeWidth,"px"]})]}),g.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:S.strokeWidth,onChange:u=>s({strokeWidth:parseFloat(u.target.value)}),className:"w-full accent-primary"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:o("opacity")||"Opacity"}),g.jsxs("span",{className:"font-mono text-primary",children:[(S.opacity*100).toFixed(0),"%"]})]}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:S.opacity,onChange:u=>s({opacity:parseFloat(u.target.value)}),className:"w-full accent-primary"})]}),g.jsxs("div",{className:"border-t border-border pt-3 space-y-3",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:o("showCenterMarker")||"Show Center Marker"}),g.jsx("button",{onClick:()=>s({showCenter:!S.showCenter}),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${S.showCenter?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:S.showCenter?o("yes")||"Yes":o("no")||"No"})]}),S.showCenter&&g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("centerMarkerColor")||"Center Marker Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"color",value:S.centerColor,onChange:u=>s({centerColor:u.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),g.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:S.centerColor})]})]}),S.showCenter&&g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:o("centerMarkerSize")||"Center Marker Size"}),g.jsxs("span",{className:"font-mono text-primary",children:[S.centerRadius,"px"]})]}),g.jsx("input",{type:"range",min:"2",max:"15",step:"1",value:S.centerRadius,onChange:u=>s({centerRadius:parseInt(u.target.value)}),className:"w-full accent-primary"})]})]})]})})]}),g.jsx("div",{className:"p-4 bg-background-secondary dark:bg-accent border-t border-border",children:g.jsxs("div",{className:"text-xs text-center text-text-muted",children:[g.jsx("kbd",{className:"px-2 py-1 bg-background-white dark:bg-background-secondary rounded border border-border",children:"X"})," ",o("toCrosshair")||"to toggle crosshair"]})})]})]}):null},bR=({canvas:t,enabled:e=!0,displayMode:r="tooltip",showPixelValue:o=!0,config:x={}})=>{const[v,S]=N.useState({x:null,y:null,value:null}),[f,s]=N.useState({clientX:0,clientY:0}),[u,h]=N.useState(!1),a=N.useRef(null),l=N.useRef(null),c=N.useRef(0),y={...{tooltipOffsetX:15,tooltipOffsetY:15,hudPosition:"top-right",backgroundColor:"rgba(0, 0, 0, 0.8)",textColor:"#00ff00",fontSize:12,padding:8,borderRadius:4,throttleMs:16},...x},p=N.useCallback((j,E,M)=>{if(!j||E<0||M<0)return null;try{const D=j.getContext("2d");if(!D)return null;const I=D.getImageData(E,M,1,1).data;return Math.round((I[0]+I[1]+I[2])/3)}catch(D){return console.warn("[PixelCoordinateTracker] Error getting pixel value:",D),null}},[]),w=N.useCallback(j=>{if(!t||!e)return;const E=Date.now();if(E-c.current<y.throttleMs)return;c.current=E;const M=t.getPointer(j.e),D=Math.round(M.x),A=Math.round(M.y),I=t.width||0,X=t.height||0;if(D<0||A<0||D>=I||A>=X){h(!1);return}let oe=null;o&&(oe=p(t.lowerCanvasEl,D,A)),S({x:D,y:A,value:oe}),s({clientX:j.e.clientX,clientY:j.e.clientY}),h(!0)},[t,e,y.throttleMs,o,p]),C=N.useCallback(()=>{h(!0)},[]),T=N.useCallback(()=>{h(!1),S({x:null,y:null,value:null})},[]);if(N.useEffect(()=>{if(!t||!e){h(!1),S({x:null,y:null,value:null});return}return t.on("mouse:move",w),t.on("mouse:over",C),t.on("mouse:out",T),console.log("[PixelCoordinateTracker] Event listeners attached"),()=>{t.off("mouse:move",w),t.off("mouse:over",C),t.off("mouse:out",T),console.log("[PixelCoordinateTracker] Event listeners removed")}},[t,e,w,C,T]),N.useEffect(()=>{!a.current||r!=="tooltip"||(a.current.style.left=`${f.clientX+y.tooltipOffsetX}px`,a.current.style.top=`${f.clientY+y.tooltipOffsetY}px`)},[f,r,y.tooltipOffsetX,y.tooltipOffsetY]),!e)return null;if(r==="tooltip"&&u&&v.x!==null)return g.jsxs("div",{ref:a,style:{position:"fixed",backgroundColor:y.backgroundColor,color:y.textColor,fontSize:`${y.fontSize}px`,padding:`${y.padding}px`,borderRadius:`${y.borderRadius}px`,pointerEvents:"none",zIndex:9999,fontFamily:"monospace",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",userSelect:"none"},children:[g.jsxs("div",{children:["X: ",v.x]}),g.jsxs("div",{children:["Y: ",v.y]}),o&&v.value!==null&&g.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",marginTop:"4px",paddingTop:"4px"},children:["Gray: ",v.value]})]});if(r==="hud"){const j={"top-left":{top:"10px",left:"10px"},"top-right":{top:"10px",right:"10px"},"bottom-left":{bottom:"10px",left:"10px"},"bottom-right":{bottom:"10px",right:"10px"}};return g.jsxs("div",{ref:l,style:{position:"fixed",...j[y.hudPosition],backgroundColor:y.backgroundColor,color:y.textColor,fontSize:`${y.fontSize}px`,padding:`${y.padding}px`,borderRadius:`${y.borderRadius}px`,zIndex:9999,fontFamily:"monospace",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",userSelect:"none",minWidth:"120px",opacity:u?1:.5,transition:"opacity 0.2s ease"},children:[g.jsx("div",{style:{fontWeight:"bold",marginBottom:"4px",borderBottom:"1px solid rgba(255,255,255,0.2)",paddingBottom:"4px"},children:"Coordinates"}),g.jsxs("div",{children:["X: ",v.x??"---"]}),g.jsxs("div",{children:["Y: ",v.y??"---"]}),o&&g.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",marginTop:"4px",paddingTop:"4px"},children:["Gray: ",v.value??"---"]})]})}return null},vR=({canvas:t,isActive:e,onClose:r})=>{const{t:o}=tt(),[x,v]=N.useState(!0),[S,f]=N.useState("tooltip"),[s,u]=N.useState(!0),[h,a]=N.useState({backgroundColor:"rgba(0, 0, 0, 0.85)",textColor:"#00ff00",fontSize:13,padding:10,borderRadius:6,hudPosition:"top-right"}),l=N.useCallback(c=>{a(m=>({...m,...c}))},[]);return e?g.jsxs(g.Fragment,{children:[g.jsx(bR,{canvas:t,enabled:x,displayMode:S,showPixelValue:s,config:h}),g.jsxs(Oe.div,{initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.3,ease:[.4,0,.2,1]},className:"bg-white dark:bg-background-secondary border-2 border-border rounded-2xl shadow-2xl w-80 overflow-hidden",children:[g.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 p-4",children:g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:g.jsx(yc,{className:"w-5 h-5 text-white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-white font-bold text-lg",children:o("pixelCoordinateTool")||"Pixel Coordinates"}),g.jsx("p",{className:"text-white/80 text-xs",children:o("requirement23")||"Requirement #23"})]})]}),g.jsx(Oe.button,{onClick:r,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-colors",whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},children:g.jsx(Yt,{className:"w-5 h-5"})})]})}),g.jsxs("div",{className:"p-4 space-y-4 max-h-[500px] overflow-y-auto",children:[g.jsxs(Oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[g.jsx(Mo,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[g.jsx("p",{className:"font-semibold mb-1",children:o("pixelCoordinateInfo")||"Pixel Coordinates"}),g.jsx("p",{className:"text-xs",children:o("pixelCoordinateDescription")||"Move your mouse over the canvas to see pixel coordinates (X,Y) and gray value."})]})]}),g.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(yc,{className:"w-4 h-4 text-primary"}),g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:o("showCoordinates")||"Show Coordinates"})]}),g.jsx("button",{onClick:()=>v(!x),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${x?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`,children:g.jsx(Oe.span,{layout:!0,className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:x?26:4},transition:{type:"spring",stiffness:500,damping:30}})})]}),g.jsx(Er,{children:x&&g.jsxs(Oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("displayMode")||"Display Mode"}),g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx("button",{onClick:()=>f("tooltip"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S==="tooltip"?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:o("tooltip")||"Tooltip"}),g.jsx("button",{onClick:()=>f("hud"),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${S==="hud"?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:o("hud")||"HUD"})]})]}),S==="hud"&&g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("hudPosition")||"HUD Position"}),g.jsx("div",{className:"grid grid-cols-2 gap-2",children:["top-left","top-right","bottom-left","bottom-right"].map(c=>g.jsx("button",{onClick:()=>l({hudPosition:c}),className:`px-3 py-2 rounded-lg text-xs font-medium transition-all ${h.hudPosition===c?"bg-blue-500 text-white shadow-md":"bg-background-secondary dark:bg-accent text-text dark:text-text hover:bg-blue-100 dark:hover:bg-blue-900/30"}`,children:c.replace("-"," ").replace(/\b\w/g,m=>m.toUpperCase())},c))})]}),g.jsxs("div",{className:"flex items-center justify-between p-3 bg-background-secondary dark:bg-accent rounded-lg",children:[g.jsx("span",{className:"text-sm font-medium text-text dark:text-text",children:o("showPixelValue")||"Show Gray Value"}),g.jsx("button",{onClick:()=>u(!s),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${s?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:s?o("yes")||"Yes":o("no")||"No"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("textColor")||"Text Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("input",{type:"color",value:h.textColor,onChange:c=>l({textColor:c.target.value}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"}),g.jsx("span",{className:"text-sm font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:h.textColor})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium text-text dark:text-text mb-2 block",children:o("backgroundColor")||"Background Color"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"relative",children:g.jsx("input",{type:"color",value:h.backgroundColor.replace(/rgba?\((\d+),\s*(\d+),\s*(\d+).*\)/,(c,m,y,p)=>`#${Number(m).toString(16).padStart(2,"0")}${Number(y).toString(16).padStart(2,"0")}${Number(p).toString(16).padStart(2,"0")}`),onChange:c=>l({backgroundColor:`rgba(${parseInt(c.target.value.slice(1,3),16)}, ${parseInt(c.target.value.slice(3,5),16)}, ${parseInt(c.target.value.slice(5,7),16)}, 0.85)`}),className:"w-12 h-10 rounded-lg cursor-pointer border-2 border-border"})}),g.jsx("span",{className:"text-xs font-mono text-text-muted bg-background-secondary dark:bg-accent px-3 py-2 rounded-lg flex-1",children:"Semi-transparent"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-sm font-medium text-text dark:text-text mb-2 flex justify-between",children:[g.jsx("span",{children:o("fontSize")||"Font Size"}),g.jsxs("span",{className:"font-mono text-primary",children:[h.fontSize,"px"]})]}),g.jsx("input",{type:"range",min:"10",max:"20",step:"1",value:h.fontSize,onChange:c=>l({fontSize:parseInt(c.target.value)}),className:"w-full accent-primary"})]})]})})]}),g.jsx("div",{className:"p-4 bg-background-secondary dark:bg-accent border-t border-border",children:g.jsxs("div",{className:"text-xs text-center text-text-muted",children:[g.jsx("kbd",{className:"px-2 py-1 bg-background-white dark:bg-background-secondary rounded border border-border",children:"P"})," ",o("toTogglePixelCoordinates")||"to toggle pixel coordinates"]})})]})]}):null},wR=`
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, and Opera */
  }
`;if(typeof document<"u"&&!document.getElementById("scrollbar-hide-styles")){const t=document.createElement("style");t.id="scrollbar-hide-styles",t.textContent=wR,document.head.appendChild(t)}const SR=[{Icon:Qa,name:"crop",hotkey:"c",category:"edit"},{Icon:jT,name:"brush",hotkey:"b",category:"draw"},{Icon:$h,name:"eraser",hotkey:"e",category:"draw"},{Icon:Of,name:"circle",hotkey:"o",category:"shape"},{Icon:Lj,name:"rectangle",hotkey:"r",category:"shape"},{Icon:Rr,name:"line",hotkey:"l",category:"shape"},{Icon:MT,name:"lineChart",hotkey:"shift+l",category:"shape"},{Icon:cc,name:"move",hotkey:"v",category:"nav"},{Icon:Ja,name:"zoom",hotkey:"z",category:"view"},{Icon:to,name:"histogram",hotkey:"h",category:"analyze"},{Icon:nr,name:"intensity",hotkey:"i",category:"analyze"},{Icon:Ls,name:"crosshair",hotkey:"x",category:"analyze"},{Icon:yc,name:"pixelCoordinate",hotkey:"p",category:"analyze"},{Icon:Cv,name:"grayscale",hotkey:"g",category:"filter"},{Icon:aj,name:"pan",hotkey:"space",category:"nav"},{Icon:_i,name:"undo",hotkey:"ctrl+z",category:"edit"}],Mb=({className:t=""})=>{const{t:e}=tt(),{activeTool:r,applyTool:o,toggleGrayscale:x,undoLastChange:v,clearDrawings:S,imageSettings:f,updateImageSettings:s}=Pf(),[u,h]=N.useState(!1),[a,l]=N.useState(!1),[c,m]=N.useState(!1),[y,p]=N.useState(!1),[w,C]=N.useState("#ff0000"),[T,j]=N.useState(5),[E,M]=N.useState(15),[D,A]=N.useState(null),{control:I,watch:X}=ZA({defaultValues:{brightness:f.brightness||100,contrast:f.contrast||100,saturation:f.saturation||100}}),oe=X(),Z=N.useCallback(()=>{if(window.fabricCanvas){const z=window.fabricCanvas.toDataURL("image/png"),q=document.createElement("a");q.download=`artwork-${Date.now()}.png`,q.href=z,q.click()}},[]),ae=N.useCallback(z=>{C(z),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.color=z)},[]),te=N.useCallback(z=>{j(z),window.fabricCanvas&&window.fabricCanvas.freeDrawingBrush&&(window.fabricCanvas.freeDrawingBrush.width=z)},[]),G=N.useCallback(z=>{if(console.log(`🎨 Tool selected: ${z}`),z==="grayscale"?x():z==="undo"?v():z==="eraser"?r==="eraser"&&y?p(!1):(r==="eraser"&&!y||o(z),p(!0)):(o(z),p(!1)),window.fabricCanvas){const q=window.fabricCanvas;q.freeDrawingBrush&&(q.freeDrawingBrush.color=w,q.freeDrawingBrush.width=T)}},[x,v,o,w,T,r,y]);return At("c",()=>G("crop"),{preventDefault:!0}),At("b",()=>G("brush"),{preventDefault:!0}),At("e",()=>G("eraser"),{preventDefault:!0}),At("o",()=>G("circle"),{preventDefault:!0}),At("r",()=>G("rectangle"),{preventDefault:!0}),At("l",()=>G("line"),{preventDefault:!0}),At("shift+l",()=>G("lineChart"),{preventDefault:!0}),At("v",()=>G("move"),{preventDefault:!0}),At("z",()=>G("zoom"),{preventDefault:!0}),At("h",()=>G("histogram"),{preventDefault:!0}),At("i",()=>G("intensity"),{preventDefault:!0}),At("x",()=>G("crosshair"),{preventDefault:!0}),At("p",()=>G("pixelCoordinate"),{preventDefault:!0}),At("g",()=>G("grayscale"),{preventDefault:!0}),At("space",()=>G("pan"),{preventDefault:!0}),At("ctrl+z",()=>G("undo"),{preventDefault:!0}),At("ctrl+s",Z,{preventDefault:!0}),At("ctrl+shift+c",S,{preventDefault:!0}),At("tab",()=>h(!u),{preventDefault:!0}),N.useEffect(()=>{s(oe)},[oe.brightness,oe.contrast,oe.saturation,oe.grayscale,s]),N.useEffect(()=>{const z=()=>{window.fabricCanvas?A(window.fabricCanvas):setTimeout(z,100)};z()},[]),g.jsxs(Oe.div,{className:Dn("bg-background-secondary h-full flex flex-col border-r border-border shadow-card dark:bg-background-secondary dark:border-border relative",u?"w-48 sm:w-64":"w-12 sm:w-16",t),animate:{width:u?window.innerWidth<640?192:256:window.innerWidth<640?48:64},transition:{duration:.4,ease:[.4,0,.2,1]},children:[g.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 border-b border-border",children:[g.jsx(Er,{children:u&&g.jsxs(Oe.h3,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs sm:text-sm font-semibold text-text",children:[g.jsx("span",{className:"hidden sm:inline",children:"ابزارها"}),g.jsx("span",{className:"sm:hidden",children:"Tools"})]})}),g.jsx(Oe.button,{onClick:()=>h(!u),className:"p-1.5 sm:p-2 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.1},whileTap:{scale:.92},children:u?g.jsx(yv,{size:14,className:"text-primary sm:w-4 sm:h-4"}):g.jsx(bv,{size:14,className:"text-primary sm:w-4 sm:h-4"})})]}),g.jsx("div",{className:"flex-1 py-2 sm:py-4 overflow-y-auto scrollbar-hide",children:g.jsx("div",{className:`flex ${u?"flex-col gap-1 sm:gap-2 px-2 sm:px-3":"flex-col items-center gap-2 sm:gap-4 px-1 sm:px-2"}`,children:SR.map(({Icon:z,name:q,hotkey:Y,category:R},O)=>{const L=r===q;return g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:O*.05},children:u?g.jsxs(Oe.button,{onClick:()=>G(q),className:Dn("w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl group font-medium shadow-sm hover:shadow-md",L?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.03,y:-2},whileTap:{scale:.96},children:[g.jsx(z,{size:16,className:Dn(L?"drop-shadow-md":"","sm:w-5 sm:h-5")}),g.jsxs("div",{className:"flex-1 text-left min-w-0",children:[g.jsx("div",{className:"text-xs sm:text-sm font-semibold truncate",children:e(q)}),g.jsx("div",{className:Dn("text-xs font-mono",L?"opacity-80":"opacity-50"),children:Y})]}),L&&g.jsx(Oe.div,{layoutId:"activeIndicator",className:"w-2 h-2 sm:w-2.5 sm:h-2.5 bg-white rounded-full shadow-md flex-shrink-0",animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0}})]}):g.jsxs(Oe.div,{className:"relative group",children:[g.jsx(Oe.button,{onClick:()=>G(q),className:Dn("p-1.5 sm:p-2.5 rounded-xl shadow-sm hover:shadow-md",L?"bg-gradient-to-br from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-background-primary hover:bg-accent text-text-muted hover:text-primary border border-border hover:border-primary"),style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.12,y:-2},whileTap:{scale:.93},title:`${e(q)} (${Y})`,children:g.jsx(z,{size:16,className:Dn(L?"drop-shadow-md":"","sm:w-5 sm:h-5")})}),L&&g.jsx(Oe.div,{layoutId:"compactActiveIndicator",className:"absolute -right-0.5 sm:-right-1 top-1/2 transform -translate-y-1/2 w-1 h-6 sm:h-8 bg-gradient-to-b from-primary to-primary-dark rounded-full shadow-md",initial:{opacity:0,x:-5},animate:{opacity:1,x:0},exit:{opacity:0,x:-5}})]})},O)})})}),g.jsx(Er,{children:u&&g.jsxs(Oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-border p-2 sm:p-3 space-y-2 sm:space-y-3",children:[g.jsxs(Oe.button,{onClick:()=>l(!a),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(Cv,{size:16,className:"text-primary sm:w-4 sm:h-5"}),g.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"انتخاب رنگ"}),g.jsx("div",{className:"ml-auto w-4 h-4 sm:w-5 sm:h-5 rounded-lg border-2 border-white shadow-md ring-2 ring-border flex-shrink-0",style:{backgroundColor:w}})]}),g.jsxs(Oe.button,{onClick:()=>m(!c),className:"w-full flex items-center gap-2 sm:gap-3 p-2 sm:p-3 rounded-xl bg-background-primary hover:bg-accent border border-border hover:border-primary shadow-sm hover:shadow-md",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.02,y:-2},whileTap:{scale:.97},children:[g.jsx(Bt,{size:16,className:"text-primary sm:w-4 sm:h-5"}),g.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"تنظیمات"})]}),g.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[g.jsxs(Oe.button,{onClick:Z,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 shadow-md hover:shadow-lg shadow-green-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[g.jsx(Oo,{size:14,className:"sm:w-4 sm:h-4"}),g.jsx("span",{className:"text-xs font-semibold",children:"ذخیره"})]}),g.jsxs(Oe.button,{onClick:S,className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 py-2 sm:py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl hover:from-red-600 hover:to-red-700 shadow-md hover:shadow-lg shadow-red-500/30 font-medium",style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},whileHover:{scale:1.05,y:-2},whileTap:{scale:.94},children:[g.jsx(Yt,{size:14,className:"sm:w-4 sm:h-4"}),g.jsx("span",{className:"text-xs font-semibold",children:"پاک"})]})]})]})}),g.jsx(Er,{children:a&&u&&g.jsxs(Oe.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50",children:[g.jsxs("div",{className:"mb-3",children:[g.jsx("h4",{className:"text-sm font-medium mb-2",children:"انتخاب رنگ"}),g.jsx(xA,{color:w,onChange:ae})]}),g.jsxs("div",{className:"mb-3",children:[g.jsxs("label",{className:"text-sm font-medium block mb-1",children:["اندازه قلم: ",T,"px"]}),g.jsx("input",{type:"range",min:"1",max:"50",value:T,onChange:z=>te(parseInt(z.target.value)),className:"w-full"})]}),g.jsxs("div",{className:"mb-3",children:[g.jsxs("label",{className:"text-sm font-medium block mb-1",children:["اندازه پاک‌کن: ",E,"px"]}),g.jsx("input",{type:"range",min:"5",max:"100",value:E,onChange:z=>M(parseInt(z.target.value)),className:"w-full"})]}),g.jsx(Oe.button,{onClick:()=>l(!1),className:"w-full py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"تأیید"})]})}),g.jsx(Er,{children:c&&u&&g.jsxs(Oe.div,{initial:{opacity:0,scale:.9,x:-10},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-10},className:"absolute left-full top-1/2 transform -translate-y-1/2 ml-2 bg-white border border-border rounded-lg shadow-lg p-4 z-50 w-64",children:[g.jsx("h4",{className:"text-sm font-medium mb-3",children:"تنظیمات تصویر"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["روشنایی: ",Math.round(oe.brightness),"%"]}),g.jsx(Oh,{name:"brightness",control:I,render:({field:z})=>g.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["کنتراست: ",Math.round(oe.contrast),"%"]}),g.jsx(Oh,{name:"contrast",control:I,render:({field:z})=>g.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-muted-foreground block mb-1",children:["اشباع: ",Math.round(oe.saturation),"%"]}),g.jsx(Oh,{name:"saturation",control:I,render:({field:z})=>g.jsx("input",{...z,type:"range",min:"0",max:"200",className:"w-full"})})]})]}),g.jsx(Oe.button,{onClick:()=>m(!1),className:"w-full mt-4 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 shadow-md hover:shadow-lg shadow-primary/30 font-semibold",whileHover:{scale:1.02},whileTap:{scale:.98},children:"بستن"})]})}),g.jsx(Er,{children:r==="eraser"&&D&&y&&g.jsx(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"absolute left-full top-0 ml-2 z-50",children:g.jsx(wf,{canvas:D,isActive:!0,initialSettings:{size:E},onSettingsChange:z=>{M(z.size)},onClose:()=>{p(!1)}})})}),r==="eraser"&&D&&!y&&g.jsx("div",{style:{display:"none"},children:g.jsx(wf,{canvas:D,isActive:!0,initialSettings:{size:E},onSettingsChange:z=>{M(z.size)},onClose:()=>{}})}),D&&g.jsxs("div",{style:{display:"none"},children:[r==="brush"&&g.jsx(oR,{canvas:D,isActive:r==="brush",brushColor:w,brushWidth:T}),r==="line"&&g.jsx(lR,{canvas:D,isActive:r==="line",lineColor:w,lineWidth:T}),r==="move"&&g.jsx(cR,{canvas:D,isActive:r==="move"})]}),D&&g.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="crop"?"":"hidden"}`,children:g.jsx(uR,{canvas:D,isActive:r==="crop",onClose:()=>o(null)})}),r==="zoom"&&D&&g.jsx("div",{className:"absolute left-full top-0 ml-2 z-50",children:g.jsx(dR,{canvas:D,isActive:r==="zoom",onClose:()=>o(null)})}),D&&g.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="histogram"?"":"hidden"}`,children:g.jsx(fR,{canvas:D,isActive:r==="histogram",onClose:()=>o(null)})}),D&&g.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="intensity"?"":"hidden"}`,children:g.jsx(pR,{canvas:D,isActive:r==="intensity",onClose:()=>o(null)})}),D&&g.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="crosshair"?"":"hidden"}`,children:g.jsx(yR,{canvas:D,isActive:r==="crosshair",onClose:()=>o(null)})}),D&&g.jsx("div",{className:`absolute left-full top-0 ml-2 z-50 ${r==="pixelCoordinate"?"":"hidden"}`,children:g.jsx(vR,{canvas:D,isActive:r==="pixelCoordinate",onClose:()=>o(null)})})]})},CR=({tabs:t})=>{const{i18n:e,t:r}=tt();return g.jsx("div",{className:Dn("flex gap-1 overflow-x-auto scrollbar-hide pb-1",e.language==="fa"?"font-vazir":""),dir:e.language==="fa"?"rtl":"ltr",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map((o,x)=>g.jsxs(dv,{to:o.to,className:({isActive:v})=>Dn("px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm font-medium flex items-center whitespace-nowrap flex-shrink-0 min-w-fit",v?"tab-active":"tab-inactive"),children:[o.icon,g.jsx("span",{className:Dn(e.language==="fa"?"mr-1":"ml-1","hidden xs:inline"),children:o.label})]},x))})},kR=()=>{Jn.logRender("BaslerDisplay");const t=N.useRef(null),e=N.useRef(null),r=N.useRef(null),o=N.useRef(null),x=N.useRef(null);N.useRef(null);const v=N.useRef(null);N.useRef(null);const[S,f]=N.useState(!1),[s,u]=N.useState({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),[h,a]=N.useState({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),{cameras:l,addFrameCallback:c,activeTool:m,drawings:y,toolDrawings:p,isDrawing:w,currentPath:C,imageSettings:T,cursorPosition:j,startDrawing:E,continueDrawing:M,finishDrawing:D,addToolDrawing:A,wsStatus:I,panImage:X}=Pf(),{resetToOriginal:oe}=Mv(),{t:Z}=tt(),ae=N.useRef(null);N.useEffect(()=>{const re=c(ge=>{if(ge!=="basler")return;const de=l.basler.currentFrame;!de||de===ae.current||(ae.current=de,e.current&&B())});return()=>re()},[l,c]);const te=N.useCallback(H=>{u(re=>({...re,[H]:!re[H]}))},[]),G=N.useCallback((H,re)=>{a(ge=>({...ge,[H]:parseFloat(re)}))},[]),z=N.useCallback(()=>{u({denoising:!1,sharpening:!1,edgeEnhancement:!1,histogramEq:!1,grayscale:!1,median:!1,sobel:!1,invert:!1}),a({gaussianSigma:1,sharpenFactor:1,brightness:0,contrast:0,rotation:0}),oe()},[oe]),q=N.useCallback(H=>{H.path&&H.path.set({selectable:m==="move",evented:m==="move",hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4}),m==="eraser"&&e.current&&e.current.contextTop&&(e.current.contextTop.globalCompositeOperation="source-over")},[m]),Y=N.useCallback(()=>{},[]),R=N.useCallback(H=>{},[m]),O=N.useCallback(H=>{if(!e.current)return;const re=e.current.getPointer(H.e);if(m==="eraser"&&e.current.contextTop&&(e.current.contextTop.globalCompositeOperation="destination-out"),m==="pan"&&H.e.buttons===1&&x.current){const ge={x:re.x-x.current.x,y:re.y-x.current.y};X(ge.x,ge.y),x.current=re}e.current._isCurrentlyDrawing&&e.current.renderAll()},[m]),L=N.useCallback(()=>{e.current&&(e.current._isCurrentlyDrawing=!1)},[]);N.useEffect(()=>{if(t.current&&!e.current){const H=new Xe.fabric.Canvas(t.current,{width:640,height:480,backgroundColor:"transparent",selection:!0,preserveObjectStacking:!0,enableRetinaScaling:!0,perPixelTargetFind:!0});return e.current=H,K(H),H.on("path:created",q),H.on("object:added",Y),H.on("mouse:down",R),H.on("mouse:move",O),H.on("mouse:up",L),H.on("object:added",re=>{re.target===H.backgroundImage&&re.target.set({selectable:!1,evented:!1,excludeFromExport:!1})}),()=>{H.dispose(),e.current=null}}},[]);const B=N.useCallback(async()=>{const H=l.basler.currentFrame;if(!e.current||!H)return;const re=JSON.stringify({frame:H.substring(0,100),activeFilters:s,processingParams:h});if(v.current===re)return;v.current=re,console.log("🖼️ Updating Fabric.js background image (frame or filter changed)");const ge=Object.values(s).some(fe=>fe)||h.brightness!==0||h.contrast!==0||h.rotation!==0;let de=H;if(ge)try{console.log("🎨 [FILTER] Starting image processing..."),console.log("🎨 [FILTER] Active filters:",JSON.stringify(s)),console.log("🎨 [FILTER] Processing params:",JSON.stringify(h));const fe=performance.now();if(await Ie.loadImage(H),console.log(`✅ [FILTER] Image loaded in ${(performance.now()-fe).toFixed(2)}ms`),s.grayscale){const $=performance.now();Ie.convertToGrayscale(),console.log(`✅ [FILTER] Grayscale applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.denoising){const $=performance.now();Ie.applyGaussianFilter(h.gaussianSigma),console.log(`✅ [FILTER] Gaussian (σ=${h.gaussianSigma}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.median){const $=performance.now();Ie.applyMedianFilter(3),console.log(`✅ [FILTER] Median applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.sharpening){const $=performance.now();Ie.applySharpen(h.sharpenFactor),console.log(`✅ [FILTER] Sharpen (factor=${h.sharpenFactor}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.sobel||s.edgeEnhancement){const $=performance.now();Ie.applySobelFilter(),console.log(`✅ [FILTER] Sobel edge detection applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.histogramEq){const $=performance.now();Ie.applyHistogramEqualization(),console.log(`✅ [FILTER] Histogram Equalization applied in ${(performance.now()-$).toFixed(2)}ms`)}if(s.invert){const $=performance.now();Ie.applyInvert(),console.log(`✅ [FILTER] Invert applied in ${(performance.now()-$).toFixed(2)}ms`)}if(h.brightness!==0){const $=performance.now();Ie.adjustBrightness(h.brightness),console.log(`✅ [FILTER] Brightness (${h.brightness}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(h.contrast!==0){const $=performance.now();Ie.adjustContrast(h.contrast),console.log(`✅ [FILTER] Contrast (${h.contrast}) applied in ${(performance.now()-$).toFixed(2)}ms`)}if(h.rotation!==0){const $=performance.now();Ie.applyRotation(h.rotation),console.log(`✅ [FILTER] Rotation (${h.rotation}°) applied in ${(performance.now()-$).toFixed(2)}ms`)}const Se=Ie.getImageDataURL(!0);if(Se){const $=(Se.length/1024).toFixed(2);de=Se,console.log(`✅ [FILTER] Processed image ready (${$} KB)`),console.log(`✅ [FILTER] Image preview: ${de.substring(0,50)}...`)}else console.error("❌ [FILTER] CRITICAL: No processed image returned!")}catch(fe){console.error("❌ [FILTER] Error processing image:",fe),console.error("❌ [FILTER] Error stack:",fe.stack)}Xe.fabric.Image.fromURL(de,fe=>{const Se=e.current.width||640,$=e.current.height||480;fe.set({left:0,top:0,scaleX:Se/fe.width,scaleY:$/fe.height,selectable:!1,evented:!1,excludeFromExport:!1});const ne=[];T.brightness!==100&&ne.push(new Xe.fabric.Image.filters.Brightness({brightness:(T.brightness-100)/100})),T.contrast!==100&&ne.push(new Xe.fabric.Image.filters.Contrast({contrast:(T.contrast-100)/100})),T.grayscale&&ne.push(new Xe.fabric.Image.filters.Grayscale),fe.filters=ne,fe.applyFilters(),e.current.setBackgroundImage(fe,e.current.renderAll.bind(e.current))})},[T,s,h,l]),K=N.useCallback(H=>{H&&(H.isDrawingMode=!1,H.selection=!0,H.defaultCursor="default",H.hoverCursor="move",m==="move"?H.getObjects().forEach(re=>{re!==H.backgroundImage&&re.set({selectable:!0,evented:!0,hasControls:!0,hasBorders:!0,lockRotation:!1,perPixelTargetFind:!0,targetFindTolerance:4})}):H.getObjects().forEach(re=>{re!==H.backgroundImage&&re.set({selectable:!1,evented:!1})}),m==="crop"||m==="eraser"?(H.selection=!1,H.defaultCursor="crosshair",H.hoverCursor="crosshair"):m==="move"?(H.selection=!0,H.defaultCursor="default",H.hoverCursor="move"):(m==="brush"||m==="line")&&(H.isDrawingMode=!0,H.selection=!1,H.defaultCursor="crosshair",H.hoverCursor="crosshair"),H.renderAll())},[m]);N.useEffect(()=>{e.current&&m&&K(e.current)},[m,K]),N.useEffect(()=>{if(e.current&&m){const H=setTimeout(()=>{e.current&&!e.current.backgroundImage&&l.basler.currentFrame&&B()},100);return()=>clearTimeout(H)}},[m,B,l]),N.useEffect(()=>{e.current&&l.basler.currentFrame&&B()},[s,h,B,l]),N.useEffect(()=>{const H=re=>{t.current&&re.detail&&(t.current.width=re.detail.width,t.current.height=re.detail.height,t.current.style.width=`${re.detail.width}px`,t.current.style.height=`${re.detail.height}px`),e.current&&e.current.renderAll()};return window.addEventListener("canvasResized",H),()=>{window.removeEventListener("canvasResized",H)}},[]),N.useEffect(()=>{if(e.current){const H=setTimeout(()=>{e.current&&e.current.renderAll()},50);return()=>clearTimeout(H)}},[m,l]);const V=N.useCallback(()=>{if(!e.current||!e.current.backgroundImage)return;const H=e.current.backgroundImage,re=[];T.brightness!==100&&re.push(new Xe.fabric.Image.filters.Brightness({brightness:(T.brightness-100)/100})),T.contrast!==100&&re.push(new Xe.fabric.Image.filters.Contrast({contrast:(T.contrast-100)/100})),T.grayscale&&re.push(new Xe.fabric.Image.filters.Grayscale),H.filters=re,H.applyFilters(),e.current.renderAll()},[T.brightness,T.contrast,T.grayscale]);N.useEffect(()=>{V()},[V]);const F=N.useCallback(()=>{if(!e.current)return;const H=e.current.backgroundImage;e.current.getObjects().forEach(ge=>{ge!==e.current.backgroundImage&&e.current.remove(ge)}),H?e.current.setBackgroundImage(H,e.current.renderAll.bind(e.current)):l.basler.currentFrame&&B()},[B]),J=N.useCallback(()=>{if(!e.current)return;e.current.getObjects().forEach(re=>{re!==e.current.backgroundImage&&e.current.remove(re)}),e.current.renderAll()},[]),W=N.useCallback(()=>{if(!e.current)return;const H=e.current.getObjects();for(let re=H.length-1;re>=0;re--)if(H[re]!==e.current.backgroundImage){e.current.remove(H[re]);break}},[]);N.useEffect(()=>{e.current&&window&&(window.fabricCanvas=e.current,window.clearFabricCanvas=F,window.clearAllUserObjects=J,window.undoLastFabricAction=W)},[F,J,W]);const ue=N.useCallback(()=>{},[y,p,w,C,m,T,l]),ce=N.useCallback(H=>{const re=t.current;if(!re)return{x:0,y:0,rawX:0,rawY:0};const ge=re.getBoundingClientRect(),de=H.clientX-ge.left,fe=H.clientY-ge.top,Se=e.current,$=Se?Se.width:re.width,ne=Se?Se.height:re.height;(Math.abs($-re.width)>10||Math.abs(ne-re.height)>10)&&console.log("🔲 Canvas dimensions mismatch - Fabric:",$,"x",ne,"HTML:",re.width,"x",re.height);const ee=$/ge.width,we=ne/ge.height,Ce=de*ee,ke=fe*we,Ne=Math.max(0,Math.min($,Ce)),Me=Math.max(0,Math.min(ne,ke)),ze=(Ne-T.panOffset.x)/T.zoom,Ue=(Me-T.panOffset.y)/T.zoom;return{x:ze,y:Ue,rawX:Ne,rawY:Me,clientX:de,clientY:fe}},[T.zoom,T.panOffset]),ie=N.useCallback(H=>{if(m==="pan"&&T.zoom>1){const re=ce(H);x.current={x:re.rawX,y:re.rawY},e.current&&(e.current.defaultCursor="grabbing")}},[m,T,ce]),Q=N.useCallback(H=>{if(m==="pan"&&x.current&&T.zoom>1){const re=ce(H),ge=re.rawX-x.current.x,de=re.rawY-x.current.y;X(ge,de),x.current={x:re.rawX,y:re.rawY}}},[m,T.zoom,X,ce]),me=N.useCallback(()=>{m==="pan"&&(x.current=null,e.current&&(e.current.defaultCursor="crosshair"))},[m]);N.useEffect(()=>{if(l.basler.currentFrame&&r.current){const H=r.current;H.src&&H.src.startsWith("data:")&&URL.revokeObjectURL(H.src),H.src=l.basler.currentFrame,H.onload=()=>{const re=t.current;if(re&&H){const ge=H.naturalWidth||640,de=H.naturalHeight||480,fe=e.current;(!fe||fe.width===640&&fe.height===480)&&(re.width=ge,re.height=de)}ue()},H.onerror=re=>{console.error("❌ Error loading Basler image:",re)}}},[ue,l]),N.useEffect(()=>{ue()},[ue]);const le=N.useCallback(H=>{if(!H)return"No data";try{return new Date(H).toLocaleTimeString()}catch{return"Invalid time"}},[]);return g.jsxs("div",{ref:o,className:"w-full h-full bg-black rounded-lg overflow-hidden relative flex flex-col",children:[g.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10",children:[g.jsxs("button",{onClick:()=>f(!S),className:"w-full bg-gradient-to-b from-black/90 to-black/70 text-white px-4 py-2 flex items-center justify-between hover:from-black/95 hover:to-black/75 transition-all",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(vn,{size:18,className:"text-primary"}),g.jsx("span",{className:"text-sm font-medium",children:Z("imageProcessing")||"پردازش تصویر"}),Object.values(s).some(H=>H)&&g.jsx("span",{className:"text-xs bg-primary text-white px-2 py-0.5 rounded-full",children:Object.values(s).filter(H=>H).length})]}),S?g.jsx(Hh,{size:18}):g.jsx(pc,{size:18})]}),S&&g.jsxs("div",{className:"bg-gradient-to-b from-black/95 to-black/85 text-white p-4 max-h-96 overflow-y-auto backdrop-blur-sm",children:[g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"text-xs font-semibold mb-2 flex items-center gap-2",children:[g.jsx(Pr,{size:14,className:"text-primary"}),Z("quickFilters")||"فیلترهای سریع"]}),g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[g.jsx("button",{onClick:()=>te("grayscale"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.grayscale?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("grayscale")||"خاکستری"}),g.jsx("button",{onClick:()=>te("denoising"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.denoising?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("denoising")||"حذف نویز"}),g.jsx("button",{onClick:()=>te("sharpening"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.sharpening?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("sharpening")||"تیزسازی"}),g.jsx("button",{onClick:()=>te("sobel"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.sobel?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("edgeDetection")||"تشخیص لبه"}),g.jsx("button",{onClick:()=>te("median"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.median?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("medianFilter")||"فیلتر میانه"}),g.jsx("button",{onClick:()=>te("histogramEq"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.histogramEq?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("histogramEq")||"هیستوگرام"}),g.jsx("button",{onClick:()=>te("invert"),className:`px-3 py-2 rounded text-xs font-medium transition-all ${s.invert?"bg-primary text-white shadow-lg":"bg-white/10 hover:bg-white/20 text-white/80"}`,children:Z("invert")||"معکوس"}),g.jsxs("button",{onClick:z,className:"px-3 py-2 rounded text-xs font-medium bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-all flex items-center justify-center gap-1",children:[g.jsx(_i,{size:12}),Z("reset")||"ریست"]})]})]}),g.jsxs("div",{className:"space-y-3",children:[s.denoising&&g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("gaussianSigma")||"مقدار Gaussian",": ",h.gaussianSigma]}),g.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:h.gaussianSigma,onChange:H=>G("gaussianSigma",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),s.sharpening&&g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("sharpenFactor")||"مقدار تیزسازی",": ",h.sharpenFactor]}),g.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:h.sharpenFactor,onChange:H=>G("sharpenFactor",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("brightness")||"روشنایی",": ",h.brightness]}),g.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:h.brightness,onChange:H=>G("brightness",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("contrast")||"کنتراست",": ",h.contrast]}),g.jsx("input",{type:"range",min:"-100",max:"100",step:"5",value:h.contrast,onChange:H=>G("contrast",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"text-xs text-white/70 mb-1 block",children:[Z("rotation")||"چرخش",": ",h.rotation,"°"]}),g.jsx("input",{type:"range",min:"0",max:"360",step:"15",value:h.rotation,onChange:H=>G("rotation",H.target.value),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]})]})]})]}),g.jsxs("div",{className:"flex-1 flex justify-center items-center relative",children:[g.jsx("img",{ref:r,style:{display:"none"},alt:"Basler frame"}),g.jsx("canvas",{ref:t,width:640,height:480,className:"w-full h-full object-contain cursor-crosshair mx-auto",onMouseDown:ie,onMouseMove:Q,onMouseUp:me,onMouseLeave:me,style:{maxWidth:"100%",maxHeight:"100%",display:"block",imageRendering:"high-quality"}}),!l.basler.currentFrame&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsxs("div",{className:"text-center p-4",children:[g.jsxs("div",{className:"text-white text-xs sm:text-sm mb-2",children:[I==="connecting"&&"🔄 اتصال به باسلر...",I==="connected"&&"⏳ در انتظار تصویر باسلر...",I==="reconnecting"&&"🔄 تلاش برای اتصال مجدد...",I==="error"&&"❌ خطا در اتصال به باسلر",I==="failed"&&"❌ اتصال ناموفق - بررسی بک‌اند",I==="disconnected"&&"⚠️ قطع ارتباط با باسلر"]}),(I==="error"||I==="failed")&&g.jsx("div",{className:"text-gray-400 text-xs",children:"لطفاً بک‌اند را بررسی کنید"})]})}),g.jsxs("div",{className:"absolute top-1 sm:top-2 left-1 sm:left-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm font-mono",children:[g.jsxs("span",{className:"hidden sm:inline",children:["X: ",Math.round(j.x)," | Y: ",Math.round(j.y)]}),g.jsxs("span",{className:"sm:hidden",children:[Math.round(j.x),",",Math.round(j.y)]})]}),m&&g.jsxs("div",{className:"absolute top-1 sm:top-2 right-1 sm:right-2 bg-primary text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs sm:text-sm",children:[g.jsx("span",{className:"hidden sm:inline",children:m}),g.jsx("span",{className:"sm:hidden",children:m.charAt(0)})]}),g.jsx("div",{className:`absolute bottom-1 sm:bottom-2 left-1 sm:left-2 w-2 h-2 sm:w-3 sm:h-3 rounded-full ${l.basler.isConnected&&l.basler.currentFrame?"bg-green-500":"bg-red-500"}`}),l.basler.lastUpdate&&g.jsxs("div",{className:"absolute bottom-1 sm:bottom-2 right-1 sm:right-2 bg-black/70 text-white px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:[g.jsx("div",{className:"hidden sm:block",children:le(l.basler.lastUpdate)}),g.jsx("div",{className:"sm:hidden text-xs",children:le(l.basler.lastUpdate).split(" ")[1]}),l.basler.avgFps>0&&g.jsxs("div",{className:"text-green-400 text-xs",children:[g.jsxs("span",{className:"hidden sm:inline",children:["FPS: ",l.basler.avgFps," | Frames: ",l.basler.frameCount]}),g.jsxs("span",{className:"sm:hidden",children:[l.basler.avgFps,"fps"]})]})]})]})]})},Yw=Ae.memo(kR),TR=()=>{var w;Jn.logRender("HistogramDisplay");const{histogramData:t,selectedPoint:e,currentChannel:r,selectionRegion:o}=Hw(),{formData:x}=Nv(),v=N.useRef(null),f=(((w=x==null?void 0:x.initialParameters)==null?void 0:w.bitDepth)||"8-bit")==="16-bit"?65535:255,[s,u]=N.useState(0),[h,a]=N.useState(f),[l,c]=N.useState(null);N.useEffect(()=>{a(f)},[f]);const m=C=>{if(!v.current)return;const T=v.current.getBoundingClientRect(),j=C.clientX-T.left,E=C.clientY-T.top,M=v.current.width/T.width,D=v.current.height/T.height,A=j*M,I=E*D,X=50,oe=30,Z=v.current.width-X-10,ae=X+s/f*Z,te=v.current.height-oe+15;if(Math.abs(A-ae)<10&&Math.abs(I-te)<10){c("min");return}const G=X+h/f*Z;if(Math.abs(A-G)<10&&Math.abs(I-te)<10){c("max");return}},y=C=>{if(!l||!v.current)return;const T=v.current.getBoundingClientRect(),j=C.clientX-T.left,E=v.current.width/T.width,M=j*E,D=50,A=v.current.width-D-10,I=Math.round((M-D)/A*f),X=Math.max(0,Math.min(f,I));l==="min"?u(Math.min(X,h-1)):l==="max"&&a(Math.max(X,s+1))},p=()=>{c(null)};return N.useEffect(()=>{if(l)return window.addEventListener("mousemove",y),window.addEventListener("mouseup",p),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",p)}},[l,s,h,f]),N.useEffect(()=>{if(!t||!v.current)return;const C=v.current.getContext("2d"),T=v.current.width,j=v.current.height;C.clearRect(0,0,T,j);const E=t.gray||t[r];if(!E)return;const M=50,D=30,A=10,I=10,X=T-M-I,oe=j-D-A,Z=Math.max(...E);C.strokeStyle="#6b7280",C.lineWidth=1,C.beginPath(),C.moveTo(M,A),C.lineTo(M,j-D),C.stroke(),C.beginPath(),C.moveTo(M,j-D),C.lineTo(T-I,j-D),C.stroke(),C.fillStyle="#374151",C.font="bold 12px monospace",C.textAlign="right",C.textBaseline="middle";const ae=5;for(let Y=0;Y<=ae;Y++){const R=Math.round(Z/ae*Y),O=j-D-oe/ae*Y,L=R.toLocaleString();C.fillText(L,M-5,O),C.strokeStyle="#e5e7eb",C.lineWidth=.5,C.beginPath(),C.moveTo(M,O),C.lineTo(T-I,O),C.stroke()}C.fillStyle="#374151",C.font="bold 11px monospace",C.textAlign="center",C.textBaseline="top";const te=8;for(let Y=0;Y<=te;Y++){const R=Math.round(f/te*Y),O=M+X/te*Y,L=R.toLocaleString();C.fillText(L,O,j-D+5)}const G=X/E.length;C.fillStyle="rgba(107, 114, 128, 0.7)",E.forEach((Y,R)=>{const O=Y/Z*oe,L=M+R*G,B=j-D-O;C.fillRect(L,B,Math.max(G,1),O)}),C.lineWidth=2;const z=M+s/f*X;C.strokeStyle="rgba(239, 68, 68, 0.8)",C.beginPath(),C.moveTo(z,A),C.lineTo(z,j-D),C.stroke(),C.fillStyle="rgba(239, 68, 68, 0.9)",C.beginPath(),C.arc(z,j-D+15,6,0,Math.PI*2),C.fill();const q=M+h/f*X;C.strokeStyle="rgba(34, 197, 94, 0.8)",C.beginPath(),C.moveTo(q,A),C.lineTo(q,j-D),C.stroke(),C.fillStyle="rgba(34, 197, 94, 0.9)",C.beginPath(),C.arc(q,j-D+15,6,0,Math.PI*2),C.fill()},[t,r,f,s,h]),!t||!e?g.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-text-muted",children:[g.jsx(to,{size:32,className:"mb-2 opacity-50"}),g.jsx("p",{className:"text-sm",children:"Select Histogram tool and click on image to see distribution"})]}):g.jsxs("div",{className:"h-full flex flex-col gap-2 overflow-hidden",children:[g.jsxs("div",{className:"flex flex-wrap gap-2 flex-shrink-0",children:[g.jsxs("div",{className:"bg-accent dark:bg-background-primary rounded-lg px-2 py-1 border border-border flex-shrink-0",children:[(o==null?void 0:o.type)==="point"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"text-xs text-text-muted",children:["Point (R=",o.radius,"px)"]}),g.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),(o==null?void 0:o.type)==="area"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"text-xs text-text-muted",children:["Area ",o.width,"×",o.height,"px"]}),g.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),(o==null?void 0:o.type)==="line"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"text-xs text-text-muted",children:["Line (",o.length,"px)"]}),g.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]}),!o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"text-xs text-text-muted",children:"Point"}),g.jsxs("div",{className:"font-mono text-xs font-semibold text-text",children:["(",e.x,", ",e.y,")"]})]})]}),g.jsx("div",{className:"flex gap-1 flex-shrink-0",children:g.jsxs("div",{className:"text-center bg-gray-100 dark:bg-gray-900/20 rounded-lg px-2 py-1",children:[g.jsx("div",{className:"text-xs text-text-muted",children:"Gray Value"}),g.jsx("div",{className:"font-mono text-xs font-semibold text-gray-700 dark:text-gray-400",children:e.pixel.gray||Math.round((e.pixel.r+e.pixel.g+e.pixel.b)/3)})]})})]}),g.jsx("div",{className:"flex-1 min-h-0 bg-white dark:bg-gray-800 rounded-lg border border-border overflow-hidden",children:g.jsx("canvas",{ref:v,width:1024,height:128,className:"w-full h-full object-contain cursor-pointer",onMouseDown:m})}),g.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[g.jsxs("div",{className:"flex-1 bg-red-50 dark:bg-red-900/20 rounded-lg px-2 py-1 border border-red-300 dark:border-red-700",children:[g.jsx("div",{className:"text-xs text-text-muted",children:"Min Level"}),g.jsx("div",{className:"font-mono text-sm font-semibold text-red-700 dark:text-red-400",children:s})]}),g.jsxs("div",{className:"flex-1 bg-green-50 dark:bg-green-900/20 rounded-lg px-2 py-1 border border-green-300 dark:border-green-700",children:[g.jsx("div",{className:"text-xs text-text-muted",children:"Max Level"}),g.jsx("div",{className:"font-mono text-sm font-semibold text-green-700 dark:text-green-400",children:h})]})]})]})},jR=Ae.memo(TR),Gw=N.createContext(),_R=()=>{const t=N.useContext(Gw);if(!t)throw new Error("useXray must be used within XrayProvider");return t},NR=({children:t})=>{const[e,r]=N.useState(!1),o=N.useCallback(()=>{r(!0),console.log("X-ray Generator: ON")},[]),x=N.useCallback(()=>{r(!1),console.log("X-ray Generator: OFF")},[]),v=N.useCallback(()=>{r(f=>!f)},[]),S={isXrayOn:e,turnOnXray:o,turnOffXray:x,toggleXray:v};return g.jsx(Gw.Provider,{value:S,children:t})},ER=[{to:"/initial",label:"initial",icon:g.jsx(mj,{className:"w-4 h-4 mr-1"})},{to:"/position",label:"position",icon:g.jsx(Df,{className:"w-4 h-4 mr-1"})},{to:"/projection",label:"projection",icon:g.jsx(wv,{className:"w-4 h-4 mr-1"})},{to:"/post-processing",label:"postProcessing",icon:g.jsx(p_,{className:"w-4 h-4 mr-1"})},{to:"/reconstruction",label:"reconstruction",icon:g.jsx(cj,{className:"w-4 h-4 mr-1"})}],Ob=({lng:t,current:e,onClick:r})=>g.jsx("button",{onClick:()=>r(t),className:Dn("px-2 py-1 text-sm rounded-md",e===t?"bg-primary text-white":"bg-background-secondary text-text-muted"),children:t.toUpperCase()}),MR=({t,isPowerOn:e,onPowerOn:r,onPowerOff:o})=>g.jsxs("div",{className:"flex-shrink-0 px-4 py-3 border-b border-border bg-background-secondary dark:bg-background-secondary",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("div",{className:`panel flex-1 flex items-center justify-center gap-2 text-sm text-white font-semibold h-10 transition-all duration-200 ${e?"bg-green-500":"bg-red-500"}`,children:[g.jsx(Un,{className:"w-4 h-4"}),g.jsxs("span",{children:[t("xrayStatus"),": ",t(e?"xrayOn":"xrayOff")]}),e&&g.jsx(bc,{className:"w-4 h-4 ml-2 animate-pulse"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:r,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${e?"bg-green-600 text-white shadow-md":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-green-500 hover:text-white"}`,children:"ON"}),g.jsx("button",{onClick:o,className:`h-10 px-4 rounded-lg transition-all duration-200 font-semibold text-sm min-w-[70px] ${e?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-500 hover:text-white":"bg-red-600 text-white shadow-md"}`,children:"OFF"})]})]}),e&&g.jsxs("div",{className:"mt-2 px-3 py-2 bg-yellow-500/20 border border-yellow-500/50 rounded-lg flex items-center gap-2",children:[g.jsx(bc,{className:"w-4 h-4 text-yellow-500"}),g.jsx("span",{className:"text-xs text-yellow-600 dark:text-yellow-400 font-medium",children:t("xraySafetyWarning")})]})]}),OR=()=>{const t=ar();Jn.logRender("Layout",{route:t.pathname});const e=t.pathname.includes("settings")?"Settings":null,[r,o]=N.useState(e),[x,v]=N.useState(!1),S=N.useRef(null),{t:f,i18n:s}=tt(),{isXrayOn:u,turnOnXray:h,turnOffXray:a}=_R(),l=N.useCallback(m=>{o(m)},[]),c=N.useCallback(m=>{s.changeLanguage(m),console.log("Changed language to:",m)},[s]);return N.useEffect(()=>{const m=y=>{S.current&&!S.current.contains(y.target)&&v(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),g.jsxs("div",{className:"responsive-layout gap-2 sm:gap-4 p-2 sm:p-4 bg-background dark:bg-background",children:[g.jsx("div",{className:"mobile-column",children:g.jsxs("div",{className:"card flex-1 flex flex-col min-h-0",children:[g.jsx(MR,{t:f,isPowerOn:u,onPowerOn:h,onPowerOff:a}),g.jsxs("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-start sm:items-center justify-between px-2 sm:px-4 py-2 sm:py-3 border-b border-border bg-background-secondary dark:bg-background-secondary dark:border-border gap-2 sm:gap-0",children:[g.jsx("div",{className:"w-full sm:w-auto",children:g.jsx(CR,{tabs:ER.map(m=>({...m,label:f(m.label)}))})}),g.jsxs("div",{className:"flex gap-2 items-center relative",ref:S,children:[g.jsxs("button",{onClick:()=>v(!x),className:Dn("flex items-center gap-1 px-3 py-2 rounded-lg transition-all",x||r==="Settings"?"bg-primary text-white":"bg-background-secondary text-text hover:bg-accent border border-border"),children:[g.jsx(Bt,{className:"w-4 h-4"}),g.jsx(pc,{className:Dn("w-4 h-4 transition-transform",x&&"rotate-180")})]}),x&&g.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background-secondary dark:bg-background-primary border border-border rounded-lg shadow-lg z-50 overflow-hidden",children:[g.jsx(Mf,{to:"/settings",onClick:()=>{v(!1),l("Settings")},className:"block px-4 py-2 hover:bg-accent text-text transition-colors",children:f("settings")}),g.jsxs("div",{className:"border-t border-border px-4 py-2",children:[g.jsx("div",{className:"text-xs text-text-muted mb-2",children:f("language")||"Language"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ob,{lng:"en",current:s.language,onClick:c}),g.jsx(Ob,{lng:"fa",current:s.language,onClick:c})]})]})]})]})]}),g.jsx("div",{className:"flex-1 min-h-0 px-2 sm:px-4 lg:px-6 py-2 sm:py-3 lg:py-4 overflow-auto",children:g.jsx("div",{className:"h-full",children:g.jsx(gk,{})})})]})}),g.jsxs("div",{className:"desktop-column",children:[g.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-0",children:[g.jsxs("div",{className:"card flex-1 border-b-0 relative overflow-hidden flex flex-col sm:flex-row min-h-[300px] sm:min-h-[400px] md:min-h-[450px] lg:min-h-[500px]",children:[g.jsx("div",{className:"hidden sm:block flex-shrink-0",children:g.jsx(Mb,{})}),g.jsxs("div",{className:"flex-1 min-h-0 min-w-0 relative",children:[g.jsx(Yw,{}),g.jsx("div",{className:"sm:hidden absolute top-2 left-2 z-10",children:g.jsx("div",{className:"bg-black/70 rounded-lg p-1",children:g.jsx("div",{className:"transform scale-75 origin-top-left",children:g.jsx(Mb,{})})})})]})]}),g.jsx("div",{className:"card flex-shrink-0 border-t-0 text-text dark:text-text font-medium text-center p-2 sm:p-3 text-xs sm:text-sm min-h-[40px] sm:min-h-[50px] md:min-h-[60px] lg:min-h-[70px] flex items-center justify-center",children:f("imageReel")})]}),g.jsxs("div",{className:"card flex-shrink-0 p-2 sm:p-3 min-h-[180px] sm:min-h-[200px] md:min-h-[220px] lg:min-h-[240px] max-h-[240px] sm:max-h-[280px] md:max-h-[320px] lg:max-h-[360px] flex",children:[g.jsx("div",{className:"flex-1 min-h-0 overflow-hidden rounded-lg bg-background-secondary dark:bg-background-primary border border-border p-2",children:g.jsx(jR,{})}),g.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[220px] md:w-[260px] lg:w-[300px] rounded-lg border border-border overflow-hidden ml-2",children:g.jsx(jv,{})})]})]})]})},DR=Ae.memo(OR),qw=N.createContext();function AR({children:t}){const[e,r]=N.useState(()=>localStorage.getItem("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),[o,x]=N.useState(()=>localStorage.getItem("industrialUI")==="true");return N.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("theme",e)},[e]),N.useEffect(()=>{document.documentElement.classList.toggle("industrial",o),localStorage.setItem("industrialUI",o)},[o]),g.jsx(qw.Provider,{value:{theme:e,setTheme:r,industrialUI:o,setIndustrialUI:x},children:t})}function RR(){const t=N.useContext(qw);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}function PR(){const{theme:t,setTheme:e,industrialUI:r,setIndustrialUI:o}=RR(),{t:x,i18n:v}=tt(),S=()=>{e(t==="light"?"dark":"light")},f=()=>{o(!r)},s=u=>{v.changeLanguage(u)};return g.jsxs("div",{className:"p-4 sm:p-6 text-text dark:text-text space-y-6 sm:space-y-8 max-w-xl mx-auto",children:[g.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center",children:x("settingsPage")}),g.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center",children:x("settingsDescription")}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[g.jsx(KT,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-500 flex-shrink-0"}),g.jsxs("div",{children:[g.jsx("span",{className:"font-medium text-sm sm:text-base block",children:"Industrial UI"}),g.jsx("span",{className:"text-xs text-text-muted",children:"Windows XP-inspired interface"})]})]}),g.jsx("button",{onClick:f,className:`w-full sm:w-auto px-4 py-2 rounded-lg transition text-sm sm:text-base ${r?"bg-highlight text-white hover:bg-highlight-dark":"bg-primary text-white hover:bg-primary/90"}`,children:r?"Disable Industrial":"Enable Industrial"})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[g.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t==="light"?g.jsx(e_,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500 flex-shrink-0"}):g.jsx(kj,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-400 flex-shrink-0"}),g.jsx("span",{className:"font-medium text-sm sm:text-base",children:x("theme")})]}),g.jsx("button",{onClick:S,className:"w-full sm:w-auto px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition text-sm sm:text-base",children:x("switchTo",{mode:x(t==="light"?"dark":"light")})})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-card p-3 sm:p-4 rounded-xl shadow-sm border gap-3 sm:gap-0",children:[g.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:g.jsx("span",{className:"font-medium text-sm sm:text-base",children:x("language")})}),g.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:["en","fa"].map(u=>g.jsx("button",{onClick:()=>s(u),className:`flex-1 sm:flex-none px-3 sm:px-4 py-1.5 rounded-lg text-sm transition font-medium
                ${v.language===u?"bg-primary text-white shadow":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:u.toUpperCase()},u))})]})]})}const LR=()=>g.jsx(Ro,{title:"تست Canvas پیشرفته",description:"آزمایش ابزارهای رسم و ویرایش با کتابخانه‌های حرفه‌ای",children:g.jsx("div",{className:"h-full",children:g.jsx(Yw,{})})}),FR=[{path:"/",element:g.jsx(DR,{}),children:[{index:!0,element:g.jsx(dT,{})},{path:"initial",element:g.jsx(E_,{})},{path:"position",element:g.jsx(D_,{})},{path:"projection",element:g.jsx(F_,{})},{path:"post-processing",element:g.jsx(H_,{})},{path:"reconstruction",element:g.jsx($_,{})},{path:"settings",element:g.jsx(PR,{})},{path:"canvas-test",element:g.jsx(LR,{})}]}];function zR(){return nk(FR)}const Ye=t=>typeof t=="string",Za=()=>{let t,e;const r=new Promise((o,x)=>{t=o,e=x});return r.resolve=t,r.reject=e,r},Db=t=>t==null?"":""+t,IR=(t,e,r)=>{t.forEach(o=>{e[o]&&(r[o]=e[o])})},BR=/###/g,Ab=t=>t&&t.indexOf("###")>-1?t.replace(BR,"."):t,Rb=t=>!t||Ye(t),fo=(t,e,r)=>{const o=Ye(e)?e.split("."):e;let x=0;for(;x<o.length-1;){if(Rb(t))return{};const v=Ab(o[x]);!t[v]&&r&&(t[v]=new r),Object.prototype.hasOwnProperty.call(t,v)?t=t[v]:t={},++x}return Rb(t)?{}:{obj:t,k:Ab(o[x])}},Pb=(t,e,r)=>{const{obj:o,k:x}=fo(t,e,Object);if(o!==void 0||e.length===1){o[x]=r;return}let v=e[e.length-1],S=e.slice(0,e.length-1),f=fo(t,S,Object);for(;f.obj===void 0&&S.length;)v=`${S[S.length-1]}.${v}`,S=S.slice(0,S.length-1),f=fo(t,S,Object),f!=null&&f.obj&&typeof f.obj[`${f.k}.${v}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${v}`]=r},VR=(t,e,r,o)=>{const{obj:x,k:v}=fo(t,e,Object);x[v]=x[v]||[],x[v].push(r)},Ec=(t,e)=>{const{obj:r,k:o}=fo(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,o))return r[o]},UR=(t,e,r)=>{const o=Ec(t,r);return o!==void 0?o:Ec(e,r)},Ww=(t,e,r)=>{for(const o in e)o!=="__proto__"&&o!=="constructor"&&(o in t?Ye(t[o])||t[o]instanceof String||Ye(e[o])||e[o]instanceof String?r&&(t[o]=e[o]):Ww(t[o],e[o],r):t[o]=e[o]);return t},Ns=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var HR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const $R=t=>Ye(t)?t.replace(/[&<>"'\/]/g,e=>HR[e]):t;class XR{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const o=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,o),this.regExpQueue.push(e),o}}const YR=[" ",",","?","!",";"],GR=new XR(20),qR=(t,e,r)=>{e=e||"",r=r||"";const o=YR.filter(S=>e.indexOf(S)<0&&r.indexOf(S)<0);if(o.length===0)return!0;const x=GR.getRegExp(`(${o.map(S=>S==="?"?"\\?":S).join("|")})`);let v=!x.test(t);if(!v){const S=t.indexOf(r);S>0&&!x.test(t.substring(0,S))&&(v=!0)}return v},Sf=(t,e,r=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const o=e.split(r);let x=t;for(let v=0;v<o.length;){if(!x||typeof x!="object")return;let S,f="";for(let s=v;s<o.length;++s)if(s!==v&&(f+=r),f+=o[s],S=x[f],S!==void 0){if(["string","number","boolean"].indexOf(typeof S)>-1&&s<o.length-1)continue;v+=s-v+1;break}x=S}return x},To=t=>t==null?void 0:t.replace("_","-"),WR={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,o;(o=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||o.call(r,console,e)}};class Mc{constructor(e,r={}){this.init(e,r)}init(e,r={}){this.prefix=r.prefix||"i18next:",this.logger=e||WR,this.options=r,this.debug=r.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,o,x){return x&&!this.debug?null:(Ye(e[0])&&(e[0]=`${o}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new Mc(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Mc(this.logger,e)}}var Qn=new Mc;class Yc{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(o=>{this.observers[o]||(this.observers[o]=new Map);const x=this.observers[o].get(r)||0;this.observers[o].set(r,x+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e,...r){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([x,v])=>{for(let S=0;S<v;S++)x(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([x,v])=>{for(let S=0;S<v;S++)x.apply(x,[e,...r])})}}class Lb extends Yc{constructor(e,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,o,x={}){var u,h;const v=x.keySeparator!==void 0?x.keySeparator:this.options.keySeparator,S=x.ignoreJSONStructure!==void 0?x.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;e.indexOf(".")>-1?f=e.split("."):(f=[e,r],o&&(Array.isArray(o)?f.push(...o):Ye(o)&&v?f.push(...o.split(v)):f.push(o)));const s=Ec(this.data,f);return!s&&!r&&!o&&e.indexOf(".")>-1&&(e=f[0],r=f[1],o=f.slice(2).join(".")),s||!S||!Ye(o)?s:Sf((h=(u=this.data)==null?void 0:u[e])==null?void 0:h[r],o,v)}addResource(e,r,o,x,v={silent:!1}){const S=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator;let f=[e,r];o&&(f=f.concat(S?o.split(S):o)),e.indexOf(".")>-1&&(f=e.split("."),x=r,r=f[1]),this.addNamespaces(r),Pb(this.data,f,x),v.silent||this.emit("added",e,r,o,x)}addResources(e,r,o,x={silent:!1}){for(const v in o)(Ye(o[v])||Array.isArray(o[v]))&&this.addResource(e,r,v,o[v],{silent:!0});x.silent||this.emit("added",e,r,o)}addResourceBundle(e,r,o,x,v,S={silent:!1,skipCopy:!1}){let f=[e,r];e.indexOf(".")>-1&&(f=e.split("."),x=o,o=r,r=f[1]),this.addNamespaces(r);let s=Ec(this.data,f)||{};S.skipCopy||(o=JSON.parse(JSON.stringify(o))),x?Ww(s,o,v):s={...s,...o},Pb(this.data,f,s),S.silent||this.emit("added",e,r,o)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(x=>r[x]&&Object.keys(r[x]).length>0)}toJSON(){return this.data}}var Kw={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,o,x){return t.forEach(v=>{var S;e=((S=this.processors[v])==null?void 0:S.process(e,r,o,x))??e}),e}};const Fb={},zb=t=>!Ye(t)&&typeof t!="boolean"&&typeof t!="number";class Oc extends Yc{constructor(e,r={}){super(),IR(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Qn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,r={interpolation:{}}){const o={...r};if(e==null)return!1;const x=this.resolve(e,o);return(x==null?void 0:x.res)!==void 0}extractFromKey(e,r){let o=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");const x=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let v=r.ns||this.options.defaultNS||[];const S=o&&e.indexOf(o)>-1,f=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!qR(e,o,x);if(S&&!f){const s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:Ye(v)?[v]:v};const u=e.split(o);(o!==x||o===x&&this.options.ns.indexOf(u[0])>-1)&&(v=u.shift()),e=u.join(x)}return{key:e,namespaces:Ye(v)?[v]:v}}translate(e,r,o){let x=typeof r=="object"?{...r}:r;if(typeof x!="object"&&this.options.overloadTranslationOptionHandler&&(x=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(x={...x}),x||(x={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const v=x.returnDetails!==void 0?x.returnDetails:this.options.returnDetails,S=x.keySeparator!==void 0?x.keySeparator:this.options.keySeparator,{key:f,namespaces:s}=this.extractFromKey(e[e.length-1],x),u=s[s.length-1];let h=x.nsSeparator!==void 0?x.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const a=x.lng||this.language,l=x.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((a==null?void 0:a.toLowerCase())==="cimode")return l?v?{res:`${u}${h}${f}`,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:u,usedParams:this.getUsedParamsDetails(x)}:`${u}${h}${f}`:v?{res:f,usedKey:f,exactUsedKey:f,usedLng:a,usedNS:u,usedParams:this.getUsedParamsDetails(x)}:f;const c=this.resolve(e,x);let m=c==null?void 0:c.res;const y=(c==null?void 0:c.usedKey)||f,p=(c==null?void 0:c.exactUsedKey)||f,w=["[object Number]","[object Function]","[object RegExp]"],C=x.joinArrays!==void 0?x.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,j=x.count!==void 0&&!Ye(x.count),E=Oc.hasDefaultValue(x),M=j?this.pluralResolver.getSuffix(a,x.count,x):"",D=x.ordinal&&j?this.pluralResolver.getSuffix(a,x.count,{ordinal:!1}):"",A=j&&!x.ordinal&&x.count===0,I=A&&x[`defaultValue${this.options.pluralSeparator}zero`]||x[`defaultValue${M}`]||x[`defaultValue${D}`]||x.defaultValue;let X=m;T&&!m&&E&&(X=I);const oe=zb(X),Z=Object.prototype.toString.apply(X);if(T&&X&&oe&&w.indexOf(Z)<0&&!(Ye(C)&&Array.isArray(X))){if(!x.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ae=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,X,{...x,ns:s}):`key '${f} (${this.language})' returned an object instead of string.`;return v?(c.res=ae,c.usedParams=this.getUsedParamsDetails(x),c):ae}if(S){const ae=Array.isArray(X),te=ae?[]:{},G=ae?p:y;for(const z in X)if(Object.prototype.hasOwnProperty.call(X,z)){const q=`${G}${S}${z}`;E&&!m?te[z]=this.translate(q,{...x,defaultValue:zb(I)?I[z]:void 0,joinArrays:!1,ns:s}):te[z]=this.translate(q,{...x,joinArrays:!1,ns:s}),te[z]===q&&(te[z]=X[z])}m=te}}else if(T&&Ye(C)&&Array.isArray(m))m=m.join(C),m&&(m=this.extendTranslation(m,e,x,o));else{let ae=!1,te=!1;!this.isValidLookup(m)&&E&&(ae=!0,m=I),this.isValidLookup(m)||(te=!0,m=f);const z=(x.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:m,q=E&&I!==m&&this.options.updateMissing;if(te||ae||q){if(this.logger.log(q?"updateKey":"missingKey",a,u,f,q?I:m),S){const L=this.resolve(f,{...x,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Y=[];const R=this.languageUtils.getFallbackCodes(this.options.fallbackLng,x.lng||this.language);if(this.options.saveMissingTo==="fallback"&&R&&R[0])for(let L=0;L<R.length;L++)Y.push(R[L]);else this.options.saveMissingTo==="all"?Y=this.languageUtils.toResolveHierarchy(x.lng||this.language):Y.push(x.lng||this.language);const O=(L,B,K)=>{var F;const V=E&&K!==m?K:z;this.options.missingKeyHandler?this.options.missingKeyHandler(L,u,B,V,q,x):(F=this.backendConnector)!=null&&F.saveMissing&&this.backendConnector.saveMissing(L,u,B,V,q,x),this.emit("missingKey",L,u,B,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?Y.forEach(L=>{const B=this.pluralResolver.getSuffixes(L,x);A&&x[`defaultValue${this.options.pluralSeparator}zero`]&&B.indexOf(`${this.options.pluralSeparator}zero`)<0&&B.push(`${this.options.pluralSeparator}zero`),B.forEach(K=>{O([L],f+K,x[`defaultValue${K}`]||I)})}):O(Y,f,I))}m=this.extendTranslation(m,e,x,c,o),te&&m===f&&this.options.appendNamespaceToMissingKey&&(m=`${u}${h}${f}`),(te||ae)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${h}${f}`:f,ae?m:void 0,x))}return v?(c.res=m,c.usedParams=this.getUsedParamsDetails(x),c):m}extendTranslation(e,r,o,x,v){var s,u;if((s=this.i18nFormat)!=null&&s.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||x.usedLng,x.usedNS,x.usedKey,{resolved:x});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const h=Ye(e)&&(((u=o==null?void 0:o.interpolation)==null?void 0:u.skipOnVariables)!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(h){const c=e.match(this.interpolator.nestingRegexp);a=c&&c.length}let l=o.replace&&!Ye(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,o.lng||this.language||x.usedLng,o),h){const c=e.match(this.interpolator.nestingRegexp),m=c&&c.length;a<m&&(o.nest=!1)}!o.lng&&x&&x.res&&(o.lng=this.language||x.usedLng),o.nest!==!1&&(e=this.interpolator.nest(e,(...c)=>(v==null?void 0:v[0])===c[0]&&!o.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${r[0]}`),null):this.translate(...c,r),o)),o.interpolation&&this.interpolator.reset()}const S=o.postProcess||this.options.postProcess,f=Ye(S)?[S]:S;return e!=null&&(f!=null&&f.length)&&o.applyPostProcessor!==!1&&(e=Kw.handle(f,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...x,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),e}resolve(e,r={}){let o,x,v,S,f;return Ye(e)&&(e=[e]),e.forEach(s=>{if(this.isValidLookup(o))return;const u=this.extractFromKey(s,r),h=u.key;x=h;let a=u.namespaces;this.options.fallbackNS&&(a=a.concat(this.options.fallbackNS));const l=r.count!==void 0&&!Ye(r.count),c=l&&!r.ordinal&&r.count===0,m=r.context!==void 0&&(Ye(r.context)||typeof r.context=="number")&&r.context!=="",y=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);a.forEach(p=>{var w,C;this.isValidLookup(o)||(f=p,!Fb[`${y[0]}-${p}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(f))&&(Fb[`${y[0]}-${p}`]=!0,this.logger.warn(`key "${x}" for languages "${y.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(T=>{var M;if(this.isValidLookup(o))return;S=T;const j=[h];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(j,h,T,p,r);else{let D;l&&(D=this.pluralResolver.getSuffix(T,r.count,r));const A=`${this.options.pluralSeparator}zero`,I=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(l&&(j.push(h+D),r.ordinal&&D.indexOf(I)===0&&j.push(h+D.replace(I,this.options.pluralSeparator)),c&&j.push(h+A)),m){const X=`${h}${this.options.contextSeparator}${r.context}`;j.push(X),l&&(j.push(X+D),r.ordinal&&D.indexOf(I)===0&&j.push(X+D.replace(I,this.options.pluralSeparator)),c&&j.push(X+A))}}let E;for(;E=j.pop();)this.isValidLookup(o)||(v=E,o=this.getResource(T,p,E,r))}))})}),{res:o,usedKey:x,exactUsedKey:v,usedLng:S,usedNS:f}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,o,x={}){var v;return(v=this.i18nFormat)!=null&&v.getResource?this.i18nFormat.getResource(e,r,o,x):this.resourceStore.getResource(e,r,o,x)}getUsedParamsDetails(e={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=e.replace&&!Ye(e.replace);let x=o?e.replace:e;if(o&&typeof e.count<"u"&&(x.count=e.count),this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),!o){x={...x};for(const v of r)delete x[v]}return x}static hasDefaultValue(e){const r="defaultValue";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&r===o.substring(0,r.length)&&e[o]!==void 0)return!0;return!1}}class Ib{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qn.create("languageUtils")}getScriptPartFromCode(e){if(e=To(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=To(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(Ye(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(o=>{if(r)return;const x=this.formatLanguageCode(o);(!this.options.supportedLngs||this.isSupportedCode(x))&&(r=x)}),!r&&this.options.supportedLngs&&e.forEach(o=>{if(r)return;const x=this.getScriptPartFromCode(o);if(this.isSupportedCode(x))return r=x;const v=this.getLanguagePartFromCode(o);if(this.isSupportedCode(v))return r=v;r=this.options.supportedLngs.find(S=>{if(S===v)return S;if(!(S.indexOf("-")<0&&v.indexOf("-")<0)&&(S.indexOf("-")>0&&v.indexOf("-")<0&&S.substring(0,S.indexOf("-"))===v||S.indexOf(v)===0&&v.length>1))return S})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),Ye(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let o=e[r];return o||(o=e[this.getScriptPartFromCode(r)]),o||(o=e[this.formatLanguageCode(r)]),o||(o=e[this.getLanguagePartFromCode(r)]),o||(o=e.default),o||[]}toResolveHierarchy(e,r){const o=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],e),x=[],v=S=>{S&&(this.isSupportedCode(S)?x.push(S):this.logger.warn(`rejecting language code not found in supportedLngs: ${S}`))};return Ye(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&v(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&v(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&v(this.getLanguagePartFromCode(e))):Ye(e)&&v(this.formatLanguageCode(e)),o.forEach(S=>{x.indexOf(S)<0&&v(this.formatLanguageCode(S))}),x}}const Bb={zero:0,one:1,two:2,few:3,many:4,other:5},Vb={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class KR{constructor(e,r={}){this.languageUtils=e,this.options=r,this.logger=Qn.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e,r={}){const o=To(e==="dev"?"en":e),x=r.ordinal?"ordinal":"cardinal",v=JSON.stringify({cleanedCode:o,type:x});if(v in this.pluralRulesCache)return this.pluralRulesCache[v];let S;try{S=new Intl.PluralRules(o,{type:x})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Vb;if(!e.match(/-|_/))return Vb;const s=this.languageUtils.getLanguagePartFromCode(e);S=this.getRule(s,r)}return this.pluralRulesCache[v]=S,S}needsPlural(e,r={}){let o=this.getRule(e,r);return o||(o=this.getRule("dev",r)),(o==null?void 0:o.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r,o={}){return this.getSuffixes(e,o).map(x=>`${r}${x}`)}getSuffixes(e,r={}){let o=this.getRule(e,r);return o||(o=this.getRule("dev",r)),o?o.resolvedOptions().pluralCategories.sort((x,v)=>Bb[x]-Bb[v]).map(x=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${x}`):[]}getSuffix(e,r,o={}){const x=this.getRule(e,o);return x?`${this.options.prepend}${o.ordinal?`ordinal${this.options.prepend}`:""}${x.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,o))}}const Ub=(t,e,r,o=".",x=!0)=>{let v=UR(t,e,r);return!v&&x&&Ye(r)&&(v=Sf(t,r,o),v===void 0&&(v=Sf(e,r,o))),v},zh=t=>t.replace(/\$/g,"$$$$");class ZR{constructor(e={}){var r;this.logger=Qn.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(o=>o),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:o,useRawValueToEscape:x,prefix:v,prefixEscaped:S,suffix:f,suffixEscaped:s,formatSeparator:u,unescapeSuffix:h,unescapePrefix:a,nestingPrefix:l,nestingPrefixEscaped:c,nestingSuffix:m,nestingSuffixEscaped:y,nestingOptionsSeparator:p,maxReplaces:w,alwaysFormat:C}=e.interpolation;this.escape=r!==void 0?r:$R,this.escapeValue=o!==void 0?o:!0,this.useRawValueToEscape=x!==void 0?x:!1,this.prefix=v?Ns(v):S||"{{",this.suffix=f?Ns(f):s||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":a||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=l?Ns(l):c||Ns("$t("),this.nestingSuffix=m?Ns(m):y||Ns(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=w||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,o)=>(r==null?void 0:r.source)===o?(r.lastIndex=0,r):new RegExp(o,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,o,x){var c;let v,S,f;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const C=Ub(r,s,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,o,{...x,...r,interpolationkey:m}):C}const y=m.split(this.formatSeparator),p=y.shift().trim(),w=y.join(this.formatSeparator).trim();return this.format(Ub(r,s,p,this.options.keySeparator,this.options.ignoreJSONStructure),w,o,{...x,...r,interpolationkey:p})};this.resetRegExp();const h=(x==null?void 0:x.missingInterpolationHandler)||this.options.missingInterpolationHandler,a=((c=x==null?void 0:x.interpolation)==null?void 0:c.skipOnVariables)!==void 0?x.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>zh(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?zh(this.escape(m)):zh(m)}].forEach(m=>{for(f=0;v=m.regex.exec(e);){const y=v[1].trim();if(S=u(y),S===void 0)if(typeof h=="function"){const w=h(e,v,x);S=Ye(w)?w:""}else if(x&&Object.prototype.hasOwnProperty.call(x,y))S="";else if(a){S=v[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),S="";else!Ye(S)&&!this.useRawValueToEscape&&(S=Db(S));const p=m.safeValue(S);if(e=e.replace(v[0],p),a?(m.regex.lastIndex+=S.length,m.regex.lastIndex-=v[0].length):m.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),e}nest(e,r,o={}){let x,v,S;const f=(s,u)=>{const h=this.nestingOptionsSeparator;if(s.indexOf(h)<0)return s;const a=s.split(new RegExp(`${h}[ ]*{`));let l=`{${a[1]}`;s=a[0],l=this.interpolate(l,S);const c=l.match(/'/g),m=l.match(/"/g);(((c==null?void 0:c.length)??0)%2===0&&!m||m.length%2!==0)&&(l=l.replace(/'/g,'"'));try{S=JSON.parse(l),u&&(S={...u,...S})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${s}`,y),`${s}${h}${l}`}return S.defaultValue&&S.defaultValue.indexOf(this.prefix)>-1&&delete S.defaultValue,s};for(;x=this.nestingRegexp.exec(e);){let s=[];S={...o},S=S.replace&&!Ye(S.replace)?S.replace:S,S.applyPostProcessor=!1,delete S.defaultValue;let u=!1;if(x[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(x[1])){const h=x[1].split(this.formatSeparator).map(a=>a.trim());x[1]=h.shift(),s=h,u=!0}if(v=r(f.call(this,x[1].trim(),S),S),v&&x[0]===e&&!Ye(v))return v;Ye(v)||(v=Db(v)),v||(this.logger.warn(`missed to resolve ${x[1]} for nesting ${e}`),v=""),u&&(v=s.reduce((h,a)=>this.format(h,a,o.lng,{...o,interpolationkey:x[1].trim()}),v.trim())),e=e.replace(x[0],v),this.regexp.lastIndex=0}return e}}const QR=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const o=t.split("(");e=o[0].toLowerCase().trim();const x=o[1].substring(0,o[1].length-1);e==="currency"&&x.indexOf(":")<0?r.currency||(r.currency=x.trim()):e==="relativetime"&&x.indexOf(":")<0?r.range||(r.range=x.trim()):x.split(";").forEach(S=>{if(S){const[f,...s]=S.split(":"),u=s.join(":").trim().replace(/^'+|'+$/g,""),h=f.trim();r[h]||(r[h]=u),u==="false"&&(r[h]=!1),u==="true"&&(r[h]=!0),isNaN(u)||(r[h]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},Hb=t=>{const e={};return(r,o,x)=>{let v=x;x&&x.interpolationkey&&x.formatParams&&x.formatParams[x.interpolationkey]&&x[x.interpolationkey]&&(v={...v,[x.interpolationkey]:void 0});const S=o+JSON.stringify(v);let f=e[S];return f||(f=t(To(o),x),e[S]=f),f(r)}},JR=t=>(e,r,o)=>t(To(r),o)(e);class e5{constructor(e={}){this.logger=Qn.create("formatter"),this.options=e,this.init(e)}init(e,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const o=r.cacheInBuiltFormats?Hb:JR;this.formats={number:o((x,v)=>{const S=new Intl.NumberFormat(x,{...v});return f=>S.format(f)}),currency:o((x,v)=>{const S=new Intl.NumberFormat(x,{...v,style:"currency"});return f=>S.format(f)}),datetime:o((x,v)=>{const S=new Intl.DateTimeFormat(x,{...v});return f=>S.format(f)}),relativetime:o((x,v)=>{const S=new Intl.RelativeTimeFormat(x,{...v});return f=>S.format(f,v.range||"day")}),list:o((x,v)=>{const S=new Intl.ListFormat(x,{...v});return f=>S.format(f)})}}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=Hb(r)}format(e,r,o,x={}){const v=r.split(this.formatSeparator);if(v.length>1&&v[0].indexOf("(")>1&&v[0].indexOf(")")<0&&v.find(f=>f.indexOf(")")>-1)){const f=v.findIndex(s=>s.indexOf(")")>-1);v[0]=[v[0],...v.splice(1,f)].join(this.formatSeparator)}return v.reduce((f,s)=>{var a;const{formatName:u,formatOptions:h}=QR(s);if(this.formats[u]){let l=f;try{const c=((a=x==null?void 0:x.formatParams)==null?void 0:a[x.interpolationkey])||{},m=c.locale||c.lng||x.locale||x.lng||o;l=this.formats[u](f,m,{...h,...x,...c})}catch(c){this.logger.warn(c)}return l}else this.logger.warn(`there was no format function for ${u}`);return f},e)}}const t5=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class n5 extends Yc{constructor(e,r,o,x={}){var v,S;super(),this.backend=e,this.store=r,this.services=o,this.languageUtils=o.languageUtils,this.options=x,this.logger=Qn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=x.maxParallelReads||10,this.readingCalls=0,this.maxRetries=x.maxRetries>=0?x.maxRetries:5,this.retryTimeout=x.retryTimeout>=1?x.retryTimeout:350,this.state={},this.queue=[],(S=(v=this.backend)==null?void 0:v.init)==null||S.call(v,o,x.backend,x)}queueLoad(e,r,o,x){const v={},S={},f={},s={};return e.forEach(u=>{let h=!0;r.forEach(a=>{const l=`${u}|${a}`;!o.reload&&this.store.hasResourceBundle(u,a)?this.state[l]=2:this.state[l]<0||(this.state[l]===1?S[l]===void 0&&(S[l]=!0):(this.state[l]=1,h=!1,S[l]===void 0&&(S[l]=!0),v[l]===void 0&&(v[l]=!0),s[a]===void 0&&(s[a]=!0)))}),h||(f[u]=!0)}),(Object.keys(v).length||Object.keys(S).length)&&this.queue.push({pending:S,pendingCount:Object.keys(S).length,loaded:{},errors:[],callback:x}),{toLoad:Object.keys(v),pending:Object.keys(S),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(s)}}loaded(e,r,o){const x=e.split("|"),v=x[0],S=x[1];r&&this.emit("failedLoading",v,S,r),!r&&o&&this.store.addResourceBundle(v,S,o,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&o&&(this.state[e]=0);const f={};this.queue.forEach(s=>{VR(s.loaded,[v],S),t5(s,e),r&&s.errors.push(r),s.pendingCount===0&&!s.done&&(Object.keys(s.loaded).forEach(u=>{f[u]||(f[u]={});const h=s.loaded[u];h.length&&h.forEach(a=>{f[u][a]===void 0&&(f[u][a]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(s=>!s.done)}read(e,r,o,x=0,v=this.retryTimeout,S){if(!e.length)return S(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:o,tried:x,wait:v,callback:S});return}this.readingCalls++;const f=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const a=this.waitingReads.shift();this.read(a.lng,a.ns,a.fcName,a.tried,a.wait,a.callback)}if(u&&h&&x<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,o,x+1,v*2,S)},v);return}S(u,h)},s=this.backend[o].bind(this.backend);if(s.length===2){try{const u=s(e,r);u&&typeof u.then=="function"?u.then(h=>f(null,h)).catch(f):f(null,u)}catch(u){f(u)}return}return s(e,r,f)}prepareLoading(e,r,o={},x){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),x&&x();Ye(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ye(r)&&(r=[r]);const v=this.queueLoad(e,r,o,x);if(!v.toLoad.length)return v.pending.length||x(),null;v.toLoad.forEach(S=>{this.loadOne(S)})}load(e,r,o){this.prepareLoading(e,r,{},o)}reload(e,r,o){this.prepareLoading(e,r,{reload:!0},o)}loadOne(e,r=""){const o=e.split("|"),x=o[0],v=o[1];this.read(x,v,"read",void 0,void 0,(S,f)=>{S&&this.logger.warn(`${r}loading namespace ${v} for language ${x} failed`,S),!S&&f&&this.logger.log(`${r}loaded namespace ${v} for language ${x}`,f),this.loaded(e,S,f)})}saveMissing(e,r,o,x,v,S={},f=()=>{}){var s,u,h,a,l;if((u=(s=this.services)==null?void 0:s.utils)!=null&&u.hasLoadedNamespace&&!((a=(h=this.services)==null?void 0:h.utils)!=null&&a.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${o}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if((l=this.backend)!=null&&l.create){const c={...S,isUpdate:v},m=this.backend.create.bind(this.backend);if(m.length<6)try{let y;m.length===5?y=m(e,r,o,x,c):y=m(e,r,o,x),y&&typeof y.then=="function"?y.then(p=>f(null,p)).catch(f):f(null,y)}catch(y){f(y)}else m(e,r,o,x,f,c)}!e||!e[0]||this.store.addResource(e[0],r,o,x)}}}const $b=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Ye(t[1])&&(e.defaultValue=t[1]),Ye(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(o=>{e[o]=r[o]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Xb=t=>{var e,r;return Ye(t.ns)&&(t.ns=[t.ns]),Ye(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Ye(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},ac=()=>{},i5=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class jo extends Yc{constructor(e={},r){if(super(),this.options=Xb(e),this.services={},this.logger=Qn,this.modules={external:[]},i5(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(e={},r){this.isInitializing=!0,typeof e=="function"&&(r=e,e={}),e.defaultNS==null&&e.ns&&(Ye(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const o=$b();this.options={...o,...this.options,...Xb(e)},this.options.interpolation={...o.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const x=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Qn.init(x(this.modules.logger),this.options):Qn.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=e5;const h=new Ib(this.options);this.store=new Lb(this.options.resources,this.options);const a=this.services;a.logger=Qn,a.resourceStore=this.store,a.languageUtils=h,a.pluralResolver=new KR(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(a.formatter=x(u),a.formatter.init(a,this.options),this.options.interpolation.format=a.formatter.format.bind(a.formatter)),a.interpolator=new ZR(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new n5(x(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(l,...c)=>{this.emit(l,...c)}),this.modules.languageDetector&&(a.languageDetector=x(this.modules.languageDetector),a.languageDetector.init&&a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=x(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new Oc(this.services,this.options),this.translator.on("*",(l,...c)=>{this.emit(l,...c)}),this.modules.external.forEach(l=>{l.init&&l.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ac),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...h)=>this.store[u](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...h)=>(this.store[u](...h),this)});const f=Za(),s=()=>{const u=(h,a)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(a),r(h,a)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),f}loadResources(e,r=ac){var v,S;let o=r;const x=Ye(e)?e:this.language;if(typeof e=="function"&&(o=e),!this.options.resources||this.options.partialBundledLanguages){if((x==null?void 0:x.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return o();const f=[],s=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(a=>{a!=="cimode"&&f.indexOf(a)<0&&f.push(a)})};x?s(x):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>s(h)),(S=(v=this.options.preload)==null?void 0:v.forEach)==null||S.call(v,u=>s(u)),this.services.backendConnector.load(f,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),o(u)})}else o(null)}reloadResources(e,r,o){const x=Za();return typeof e=="function"&&(o=e,e=void 0),typeof r=="function"&&(o=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),o||(o=ac),this.services.backendConnector.reload(e,r,v=>{x.resolve(),o(v)}),x}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Kw.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let r=0;r<this.languages.length;r++){const o=this.languages[r];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,r){this.isLanguageChangingTo=e;const o=Za();this.emit("languageChanging",e);const x=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},v=(f,s)=>{s?this.isLanguageChangingTo===e&&(x(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,o.resolve((...u)=>this.t(...u)),r&&r(f,(...u)=>this.t(...u))},S=f=>{var h,a;!e&&!f&&this.services.languageDetector&&(f=[]);const s=Ye(f)?f:f&&f[0],u=this.store.hasLanguageSomeTranslations(s)?s:this.services.languageUtils.getBestMatchFromCodes(Ye(f)?[f]:f);u&&(this.language||x(u),this.translator.language||this.translator.changeLanguage(u),(a=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||a.call(h,u)),this.loadResources(u,l=>{v(l,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?S(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(S):this.services.languageDetector.detect(S):S(e),o}getFixedT(e,r,o){const x=(v,S,...f)=>{let s;typeof S!="object"?s=this.options.overloadTranslationOptionHandler([v,S].concat(f)):s={...S},s.lng=s.lng||x.lng,s.lngs=s.lngs||x.lngs,s.ns=s.ns||x.ns,s.keyPrefix!==""&&(s.keyPrefix=s.keyPrefix||o||x.keyPrefix);const u=this.options.keySeparator||".";let h;return s.keyPrefix&&Array.isArray(v)?h=v.map(a=>`${s.keyPrefix}${u}${a}`):h=s.keyPrefix?`${s.keyPrefix}${u}${v}`:v,this.t(h,s)};return Ye(e)?x.lng=e:x.lngs=e,x.ns=r,x.keyPrefix=o,x}t(...e){var r;return(r=this.translator)==null?void 0:r.translate(...e)}exists(...e){var r;return(r=this.translator)==null?void 0:r.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const o=r.lng||this.resolvedLanguage||this.languages[0],x=this.options?this.options.fallbackLng:!1,v=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const S=(f,s)=>{const u=this.services.backendConnector.state[`${f}|${s}`];return u===-1||u===0||u===2};if(r.precheck){const f=r.precheck(this,S);if(f!==void 0)return f}return!!(this.hasResourceBundle(o,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||S(o,e)&&(!x||S(v,e)))}loadNamespaces(e,r){const o=Za();return this.options.ns?(Ye(e)&&(e=[e]),e.forEach(x=>{this.options.ns.indexOf(x)<0&&this.options.ns.push(x)}),this.loadResources(x=>{o.resolve(),r&&r(x)}),o):(r&&r(),Promise.resolve())}loadLanguages(e,r){const o=Za();Ye(e)&&(e=[e]);const x=this.options.preload||[],v=e.filter(S=>x.indexOf(S)<0&&this.services.languageUtils.isSupportedCode(S));return v.length?(this.options.preload=x.concat(v),this.loadResources(S=>{o.resolve(),r&&r(S)}),o):(r&&r(),Promise.resolve())}dir(e){var x,v;if(e||(e=this.resolvedLanguage||(((x=this.languages)==null?void 0:x.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=((v=this.services)==null?void 0:v.languageUtils)||new Ib($b());return r.indexOf(o.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},r){return new jo(e,r)}cloneInstance(e={},r=ac){const o=e.forkResourceStore;o&&delete e.forkResourceStore;const x={...this.options,...e,isClone:!0},v=new jo(x);if((e.debug!==void 0||e.prefix!==void 0)&&(v.logger=v.logger.clone(e)),["store","services","language"].forEach(f=>{v[f]=this[f]}),v.services={...this.services},v.services.utils={hasLoadedNamespace:v.hasLoadedNamespace.bind(v)},o){const f=Object.keys(this.store.data).reduce((s,u)=>(s[u]={...this.store.data[u]},s[u]=Object.keys(s[u]).reduce((h,a)=>(h[a]={...s[u][a]},h),s[u]),s),{});v.store=new Lb(f,x),v.services.resourceStore=v.store}return v.translator=new Oc(v.services,x),v.translator.on("*",(f,...s)=>{v.emit(f,...s)}),v.init(x,r),v.translator.options=x,v.translator.backendConnector.services.utils={hasLoadedNamespace:v.hasLoadedNamespace.bind(v)},v}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Qt=jo.createInstance();Qt.createInstance=jo.createInstance;Qt.createInstance;Qt.dir;Qt.init;Qt.loadResources;Qt.reloadResources;Qt.use;Qt.changeLanguage;Qt.getFixedT;Qt.t;Qt.exists;Qt.setDefaultNamespace;Qt.hasLoadedNamespace;Qt.loadNamespaces;Qt.loadLanguages;const{slice:r5,forEach:s5}=[];function a5(t){return s5.call(r5.call(arguments,1),e=>{if(e)for(const r in e)t[r]===void 0&&(t[r]=e[r])}),t}function o5(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(t))}const Yb=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,l5=function(t,e){const o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},x=encodeURIComponent(e);let v=`${t}=${x}`;if(o.maxAge>0){const S=o.maxAge-0;if(Number.isNaN(S))throw new Error("maxAge should be a Number");v+=`; Max-Age=${Math.floor(S)}`}if(o.domain){if(!Yb.test(o.domain))throw new TypeError("option domain is invalid");v+=`; Domain=${o.domain}`}if(o.path){if(!Yb.test(o.path))throw new TypeError("option path is invalid");v+=`; Path=${o.path}`}if(o.expires){if(typeof o.expires.toUTCString!="function")throw new TypeError("option expires is invalid");v+=`; Expires=${o.expires.toUTCString()}`}if(o.httpOnly&&(v+="; HttpOnly"),o.secure&&(v+="; Secure"),o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"strict":v+="; SameSite=Strict";break;case"none":v+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(v+="; Partitioned"),v},Gb={create(t,e,r,o){let x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(x.expires=new Date,x.expires.setTime(x.expires.getTime()+r*60*1e3)),o&&(x.domain=o),document.cookie=l5(t,encodeURIComponent(e),x)},read(t){const e=`${t}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let x=r[o];for(;x.charAt(0)===" ";)x=x.substring(1,x.length);if(x.indexOf(e)===0)return x.substring(e.length,x.length)}return null},remove(t){this.create(t,"",-1)}};var c5={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Gb.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:r,cookieMinutes:o,cookieDomain:x,cookieOptions:v}=e;r&&typeof document<"u"&&Gb.create(r,t,o,x,v)}},u5={name:"querystring",lookup(t){var o;let{lookupQuerystring:e}=t,r;if(typeof window<"u"){let{search:x}=window.location;!window.location.search&&((o=window.location.hash)==null?void 0:o.indexOf("?"))>-1&&(x=window.location.hash.substring(window.location.hash.indexOf("?")));const S=x.substring(1).split("&");for(let f=0;f<S.length;f++){const s=S[f].indexOf("=");s>0&&S[f].substring(0,s)===e&&(r=S[f].substring(s+1))}}return r}};let Es=null;const qb=()=>{if(Es!==null)return Es;try{if(Es=typeof window<"u"&&window.localStorage!==null,!Es)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Es=!1}return Es};var d5={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&qb())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:r}=e;r&&qb()&&window.localStorage.setItem(r,t)}};let Ms=null;const Wb=()=>{if(Ms!==null)return Ms;try{if(Ms=typeof window<"u"&&window.sessionStorage!==null,!Ms)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Ms=!1}return Ms};var h5={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Wb())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:r}=e;r&&Wb()&&window.sessionStorage.setItem(r,t)}},f5={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:r,userLanguage:o,language:x}=navigator;if(r)for(let v=0;v<r.length;v++)e.push(r[v]);o&&e.push(o),x&&e.push(x)}return e.length>0?e:void 0}},m5={name:"htmlTag",lookup(t){let{htmlTag:e}=t,r;const o=e||(typeof document<"u"?document.documentElement:null);return o&&typeof o.getAttribute=="function"&&(r=o.getAttribute("lang")),r}},g5={name:"path",lookup(t){var x;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(x=r[typeof e=="number"?e:0])==null?void 0:x.replace("/",""):void 0}},p5={name:"subdomain",lookup(t){var x,v;let{lookupFromSubdomainIndex:e}=t;const r=typeof e=="number"?e+1:1,o=typeof window<"u"&&((v=(x=window.location)==null?void 0:x.hostname)==null?void 0:v.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(o)return o[r]}};let Zw=!1;try{document.cookie,Zw=!0}catch{}const Qw=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Zw||Qw.splice(1,1);const x5=()=>({order:Qw,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Jw{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,r)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=a5(r,this.options||{},x5()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=x=>x.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(c5),this.addDetector(u5),this.addDetector(d5),this.addDetector(h5),this.addDetector(f5),this.addDetector(m5),this.addDetector(g5),this.addDetector(p5)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return e.forEach(o=>{if(this.detectors[o]){let x=this.detectors[o].lookup(this.options);x&&typeof x=="string"&&(x=[x]),x&&(r=r.concat(x))}}),r=r.filter(o=>o!=null&&!o5(o)).map(o=>this.options.convertDetectedLanguage(o)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(o=>{this.detectors[o]&&this.detectors[o].cacheUserLanguage(e,this.options)}))}}Jw.type="languageDetector";const y5="Home",b5="Settings",v5="Initial",w5="Position",S5="Projection",C5="Post Processing",k5="Reconstruction",T5="System Status & Warnings",j5="X-ray Generator Status",_5="X-ray ON",N5="X-ray OFF",E5="Warning: X-ray is active!",M5="Camera",O5="Projection Display",D5="Image Reel",A5="Histogram",R5="Toggle Theme",P5="Crop",L5="Brush",F5="Eraser",z5="Circle",I5="Rectangle",B5="Line Chart",V5="Line",U5="Move",H5="Zoom In",$5="Zoom Out",X5="Home Page",Y5="Welcome to the Home page! This page is styled to match the overall theme of the application.",G5="Settings Page",q5="This is the Settings page. Adjust your preferences here.",W5="Switch to {{mode}} Mode",K5="Input Showcase",Z5="Checkboxes",Q5="Checkbox 1",J5="Checkbox 2 (Default Checked)",eP="Checkbox (Disabled)",tP="Confirm {{label}}",nP="Disabled Input",iP="Inputs",rP="Text Input",sP="Number Input",aP="Email Input",oP="Save {{label}}",lP="Textarea",cP="Enter your text here...",uP="Save Textarea",dP="Other Inputs",hP="Radio Buttons",fP="Option 1",mP="Option 2",gP="Select Dropdown",pP="Select an option",xP="Upload File",yP="Selected: {{name}}",bP="Password Input",vP="Enter password",wP="Range Slider",SP="Color Picker",CP="Date Picker",kP="IconButton Showcase",TP="{{variant}} Variant",jP="Size: {{size}} (Normal)",_P="Size: {{size}} (Disabled)",NP="{{variant}} {{size}} clicked!",EP="Run",MP="Initial Parameters",OP="Name",DP="Email",AP="Enter your name",RP="Enter your email",PP="X Position",LP="Y Position",FP="Enable Filter",zP="Connecting to WebSocket...",IP="Theme",BP="Language",VP="Dark",UP="Light",HP="Projection Acquisition",$P="Success",XP="Form data submitted successfully",YP="Error",GP="No data available to submit",qP="Are you sure?",WP="Cancel",KP="Sending...",ZP="No data available to send",QP="Invalid initial parameters",JP="Power",e3="Enter power (Watts)",t3="Tube Voltage",n3="Enter tube voltage (kVp)",i3="Anode Current",r3="Enter anode current",s3="Filtration",a3="Aluminum",o3="Copper",l3="Silver",c3="Enter filter thickness (mm)",u3="Exposure Time",d3="Bit Depth",h3="Tube Status",f3="Manipulator",m3="X Position",g3="Y Position",p3="Z Position",x3="Theta Angle",y3="Gamma Angle",b3="Joystick Speed",v3="Low",w3="Medium",S3="High",C3="Cabin Camera Status",k3="Standard Preset",T3="High Power Preset",j3="Clear All",_3="Voltage",N3="Current",E3="Active",M3="Inactive",O3="Connected to WebSocket",D3="Fast Imaging",A3="Rotation Speed",R3="Enter rotation speed",P3="Dual Energy",L3="Single Calibration",F3="Enter single calibration",z3="Rotate Calibration",I3="Enter rotate calibration",B3="Selected File",V3="Enter X position",U3="Enter Y position",H3="Enter Z position",$3="Enter Theta angle",X3="Enter Gamma angle",Y3="Imaging Mode",G3="Multi-Segment Size",q3="Enter multi-segment size",W3="Image Adjustments",K3="Gain",Z3="Offset",Q3="Preprocess",J3="HDR",eL="Energy Level 1",tL="Energy Level 2",nL="Enter energy level 1",iL="Enter energy level 2",rL="Image Count",sL="Enter image count",aL="Image Transform",oL="None",lL="Basic Operations",cL="Normalize",uL="FFT",dL="FFT Inverse",hL="Fourier Filter",fL="Low Pass",mL="Band Pass",gL="High Pass",pL="Apply Fourier Filter",xL="Export Image",yL="TIFF",bL="JPG",vL="DICOM",wL="Image Filters",SL="Median Filter",CL="Mean Filter",kL="Variance Filter",TL="Pseudo Color Filter",jL="Gaussian Filter",_L="Enter Gaussian sigma",NL="Sharpening",EL="Kernel Size",ML="Sharpening Strength",OL="Enter sharpening strength",DL="Edge Detection",AL="Threshold",RL="Enter threshold",PL="Edge Method",LL="Sobel",FL="Canny",zL="Prewitt",IL="OK",BL="Failed to send data",VL="Grayscale",UL="Pan",HL="Undo",$L="System Stability Check",XL="Interlock",YL="Temperature",GL="Pressure",qL="Cooling System",WL="Real-time monitoring of critical system parameters",KL="X-ray Tube & Exposure Log",ZL="Time",QL="Download",JL="Clear",e4="Pause",t4="Resume",n4="Paused",i4="Total logs",r4="No logs recorded yet",s4="Step Size",a4="Linear Movement",o4="Rotational Movement",l4="Control",c4="Manual Input",u4="Saved Positions",d4="Precise movements, best for fine-tuning",h4="Balanced speed for general positioning",f4="Fast movements for large adjustments",m4="Current Speed",g4="Turn On",p4="Turn Off",x4="Camera is turned off",y4="Click 'Turn On' to activate the camera",b4="Connecting to camera...",v4="Camera Connection Error",w4="Please check camera connection",S4="Retry",C4="Refresh",k4="Fullscreen",T4="Exit Fullscreen",j4="Resolution",_4="Frame Rate",N4="Exposure",E4="Brightness",M4="Trajectory Definition",O4="Select Trajectory Type",D4="Discrete angular steps",A4="Continuous circular motion",R4="Spiral path for tall objects",P4="Custom trajectory path",L4="Trajectory Parameters",F4="Number of Steps",z4="Angle per Step",I4="Start Angle",B4="End Angle",V4="Helix Pitch",U4="Height Steps",H4="Use trajectory designer or import custom points",$4="Open Trajectory Designer",X4="Saved Trajectories",Y4="Enter trajectory name",G4="Geometry Configuration",q4="Calibrate",W4="System Calibrated",K4="Last calibration",Z4="Geometric accuracy",Q4="Distance Parameters",J4="Detector Parameters",eF="Detector Width",tF="Detector Height",nF="Pixel Pitch",iF="Calculated Values",rF="Magnification",sF="Effective Pixel Size",aF="Width",oF="Height",lF="Additional Parameters",cF="Cone Beam Angle",uF="Focal Spot Size",dF="Acquisition Settings",hF="Start",fF="Stop",mF="Reset",gF="Acquiring",pF="Completed",xF="Rotation Mode",yF="Half rotation",bF="Full rotation",vF="Multi-Segment Imaging",wF="Number of Segments",SF="Overlap",CF="Total Height",kF="Number of Projections",TF="Exposure per Projection",jF="Acquisition Summary",_F="Mode",NF="Segments",EF="Total Proj.",MF="Est. Time",OF="Position Feedback",DF="Real-time Position Display",AF="Target Position",RF="Current Position",PF="Position Error",LF="Linear Detector Imaging",FF="Linear Detector Mode",zF="Scan Height",IF="Vertical Step Size",BF="Stitching Overlap",VF="Estimated Scan Time",UF="Calibration System",HF="Calibration Type",$F="Single Image Calibration",XF="Rotational Calibration",YF="Capture Calibration Image",GF="Start Calibration Scan",qF="Calibration Status",WF="Not Calibrated",KF="Calibrating",ZF="Calibrated",QF="Calibration Date",JF="Calibration Quality",ez="Recalibrate",tz="Image Quality Assessment",nz="Overall Quality",iz="Excellent",rz="Good",sz="Needs Improvement",az="Spatial Resolution",oz="Uniformity",lz="Artifacts",cz="Last Assessment",uz="Assessments",dz="Click 'Start Assessment' to begin quality evaluation",hz="Detector Configuration",fz="Detector Status",mz="Readout Noise",gz="Dark Current",pz="Hardware Settings",xz="Pixel Binning",yz="Readout Mode",bz="Cooling Temperature",vz="Gain Mode",wz="Imaging Settings",Sz="Trigger Mode",Cz="Processing Settings",kz="Dark Frame Correction",Tz="Flat Field Correction",jz="Bad Pixel Correction",_z="Lag Correction",Nz="Settings saved successfully",Ez="Settings imported successfully",Mz="Advanced Filtering",Oz="Denoising",Dz="Edge Enhancement",Az="Histogram Equalization",Rz="Morphology",Pz="Wavelet",Lz="Method",Fz="Strength",zz="Amount",Iz="Radius",Bz="Low Threshold",Vz="High Threshold",Uz="Clip Limit",Hz="Tile Size",$z="Operation",Xz="Kernel Shape",Yz="Wavelet Type",Gz="Decomposition Level",qz="Select a filter type to configure settings",Wz="Please select a filter first",Kz="Filter applied successfully",Zz="Apply Filter",Qz="Scan Protocol Management",Jz="Edit Protocol",e6="New Protocol",t6="Enter protocol name",n6="Description",i6="Enter description",r6="Are you sure you want to delete this protocol?",s6="Protocol applied successfully",a6="Protocols imported successfully",o6="No protocols available",l6="Apply",c6="Edit",u6="Duplicate",d6="Last Used",h6="Never",f6="Real-time Monitoring Dashboard",m6="Tube temperature is high",g6="X-ray power is high",p6="Cooling flow rate is low",x6="Tube Temp",y6="Last 20s",b6="Detector Temp",v6="Cooling Flow",w6="Data Rate",S6="System Load",C6="Acquisition Progress",k6="Images Acquired",T6="Est. Time Remaining",j6="Image Viewer",_6="Original",N6="Processed",E6="Compare Images",M6="No image loaded",O6="Upload Image",D6="Image Statistics",A6="Processing History",R6="Quick Filters",P6="Transformations",L6="Adjustments",F6="Invert",z6="Flip Vertical",I6="Contrast",B6="Processing",V6="Auto Process",U6="Filters",H6="Waiting for image",$6="Apply Filters",X6="Live Processing",Y6="Image Processing",G6="Crosshair Tool",q6="Crosshair",W6="ROI Crosshair",K6="Requirement #22",Z6="Line Color",Q6="Line Width",J6="Extend Beyond ROI",eI="Show Center Marker",tI="Show Crosshair",nI="Select ROI",iI="All ROIs",rI="No ROIs detected",sI="Draw a rectangle or circle on the canvas to create an ROI.",aI="Detected {{count}} ROI(s)",oI="ROI(s) detected",lI="Crosshair lines will be drawn through the center of each ROI.",cI="to toggle crosshair",uI="Pixel Coordinates",dI="Pixel Coordinate Tool",hI="Requirement #23",fI="Pixel Coordinates",mI="Move your mouse over the canvas to see pixel coordinates (X,Y) and gray value.",gI="Show Coordinates",pI="Display Mode",xI="Tooltip",yI="HUD",bI="HUD Position",vI="Show Gray Value",wI="Text Color",SI="Background Color",CI="Font Size",kI="to toggle pixel coordinates",TI="Yes",jI="No",_I="Opacity",NI="Center Marker Color",EI="Center Marker Size",MI={home:y5,settings:b5,initial:v5,position:w5,projection:S5,postProcessing:C5,reconstruction:k5,systemStatus:T5,xrayStatus:j5,xrayOn:_5,xrayOff:N5,xraySafetyWarning:E5,camera:M5,projectionDisplay:O5,imageReel:D5,histogram:A5,toggleTheme:R5,crop:P5,brush:L5,eraser:F5,circle:z5,rectangle:I5,lineChart:B5,line:V5,move:U5,zoomIn:H5,zoomOut:$5,homePage:X5,welcome:Y5,settingsPage:G5,settingsDescription:q5,switchTo:W5,inputShowcase:K5,checkboxes:Z5,checkbox1:Q5,checkbox2:J5,disabledCheckbox:eP,confirm:tP,disabledInput:nP,inputs:iP,textInput:rP,numberInput:sP,emailInput:aP,save:oP,textarea:lP,enterText:cP,saveTextarea:uP,otherInputs:dP,radioButtons:hP,option1:fP,option2:mP,selectDropdown:gP,selectOption:pP,uploadFile:xP,selected:yP,passwordInput:bP,enterPassword:vP,rangeSlider:wP,colorPicker:SP,datePicker:CP,iconButtonShowcase:kP,variant:TP,sizeNormal:jP,sizeDisabled:_P,clicked:NP,run:EP,initialParameters:MP,name:OP,email:DP,enterName:AP,enterEmail:RP,xPosition:PP,yPosition:LP,enableFilter:FP,websocketConnecting:zP,theme:IP,language:BP,dark:VP,light:UP,projectionAcquisition:HP,success:$P,dataSubmittedSuccessfully:XP,error:YP,noDataToSubmit:GP,areYouSure:qP,cancel:WP,sendingData:KP,noDataAvailable:ZP,invalidInitialParameters:QP,power:JP,enterPower:e3,tubeVoltage:t3,enterTubeVoltage:n3,anodeCurrent:i3,enterAnodeCurrent:r3,filtration:s3,aluminum:a3,copper:o3,silver:l3,enterThickness:c3,exposureTime:u3,bitDepth:d3,"8bit":"8-bit","16bit":"16-bit",tubeStatus:h3,manipulator:f3,manipulatorX:m3,manipulatorY:g3,manipulatorZ:p3,manipulatorTheta:x3,manipulatorGamma:y3,joystickSpeed:b3,joystickSpeedLow:v3,joystickSpeedMedium:w3,joystickSpeedHigh:S3,cabinCameraStatus:C3,presetStandard:k3,presetHighPower:T3,clearAll:j3,voltage:_3,current:N3,active:E3,inactive:M3,websocketConnected:O3,fastImaging:D3,rotationSpeed:A3,enterRotationSpeed:R3,dualEnergy:P3,singleCalibration:L3,enterSingleCalibration:F3,rotateCalibration:z3,enterRotateCalibration:I3,selectedFile:B3,enterManipulatorX:V3,enterManipulatorY:U3,enterManipulatorZ:H3,enterManipulatorTheta:$3,enterManipulatorGamma:X3,"180degree":"180°","360degree":"360°",imagingMode:Y3,multiSegmentSize:G3,enterMultiSegmentSize:q3,imageAdjustments:W3,gain:K3,offset:Z3,preprocess:Q3,hdr:J3,energyLevel1:eL,energyLevel2:tL,enterEnergyLevel1:nL,enterEnergyLevel2:iL,imageCount:rL,enterImageCount:sL,imageTransform:aL,none:oL,"90degree":"90°","270degree":"270°",basicOperations:lL,normalize:cL,fft:uL,fftInverse:dL,fourierFilter:hL,lowPass:fL,bandPass:mL,highPass:gL,applyFourierFilter:pL,exportImage:xL,export:"Export",tiff:yL,jpg:bL,dicom:vL,imageFilters:wL,medianFilter:SL,meanFilter:CL,varianceFilter:kL,pseudoColorFilter:TL,gaussianFilter:jL,enterGaussianSigma:_L,sharpening:NL,kernelSize:EL,sharpeningStrength:ML,enterSharpeningStrength:OL,edgeDetection:DL,threshold:AL,enterThreshold:RL,edgeMethod:PL,sobel:LL,canny:FL,prewitt:zL,ok:IL,failedToSendData:BL,grayscale:VL,pan:UL,undo:HL,systemStabilityCheck:$L,interlock:XL,temperature:YL,pressure:GL,coolingSystem:qL,stabilityCheckDescription:WL,xrayExposureLog:KL,time:ZL,download:QL,clear:JL,pause:e4,resume:t4,paused:n4,totalLogs:i4,noLogsYet:r4,stepSize:s4,linearMovement:a4,rotationalMovement:o4,control:l4,manualInput:c4,savedPositions:u4,lowSpeedDesc:d4,mediumSpeedDesc:h4,highSpeedDesc:f4,currentSpeed:m4,turnOn:g4,turnOff:p4,cameraOff:x4,clickTurnOn:y4,connectingToCamera:b4,cameraError:v4,checkCameraConnection:w4,retry:S4,refresh:C4,fullscreen:k4,exitFullscreen:T4,resolution:j4,frameRate:_4,exposure:N4,brightness:E4,trajectoryDefinition:M4,import:"Import",selectTrajectoryType:O4,stepwiseDesc:D4,circularDesc:A4,helicalDesc:R4,arbitraryDesc:P4,trajectoryParameters:L4,numberOfSteps:F4,anglePerStep:z4,startAngle:I4,endAngle:B4,helixPitch:V4,heightSteps:U4,arbitraryTrajectoryInfo:H4,openDesigner:$4,savedTrajectories:X4,enterTrajectoryName:Y4,geometryConfiguration:G4,calibrate:q4,systemCalibrated:W4,lastCalibration:K4,geometricAccuracy:Z4,distanceParameters:Q4,detectorParameters:J4,detectorWidth:eF,detectorHeight:tF,pixelPitch:nF,calculatedValues:iF,magnification:rF,effectivePixelSize:sF,width:aF,height:oF,additionalParameters:lF,coneBeamAngle:cF,focalSpotSize:uF,acquisitionSettings:dF,start:hF,stop:fF,reset:mF,acquiring:gF,completed:pF,rotationMode:xF,halfRotation:yF,fullRotation:bF,multiSegmentImaging:vF,numberOfSegments:wF,segmentOverlap:SF,totalHeight:CF,numberOfProjections:kF,exposurePerProjection:TF,acquisitionSummary:jF,mode:_F,segments:NF,totalProjections:EF,estimatedTime:MF,positionFeedback:OF,realTimePosition:DF,targetPosition:AF,currentPosition:RF,positionError:PF,linearDetectorImaging:LF,linearDetectorMode:FF,scanHeight:zF,verticalStepSize:IF,stitchingOverlap:BF,estimatedScanTime:VF,calibrationSystem:UF,calibrationType:HF,singleImageCalibration:$F,rotationalCalibration:XF,captureCalibrationImage:YF,startCalibrationScan:GF,calibrationStatus:qF,notCalibrated:WF,calibrating:KF,calibrated:ZF,calibrationDate:QF,calibrationQuality:JF,recalibrate:ez,imageQualityAssessment:tz,overallQuality:nz,excellent:iz,good:rz,needsImprovement:sz,spatialResolution:az,uniformity:oz,artifacts:lz,lastAssessment:cz,assessments:uz,startAssessmentMessage:dz,detectorConfiguration:hz,detectorStatus:fz,readoutNoise:mz,darkCurrent:gz,hardwareSettings:pz,binning:xz,readoutMode:yz,coolingTemperature:bz,gainMode:vz,imagingSettings:wz,triggerMode:Sz,processingSettings:Cz,darkFrameCorrection:kz,flatFieldCorrection:Tz,badPixelCorrection:jz,lagCorrection:_z,settingsSaved:Nz,settingsImported:Ez,advancedFiltering:Mz,denoising:Oz,edgeEnhancement:Dz,histogramEqualization:Az,morphology:Rz,wavelet:Pz,method:Lz,strength:Fz,amount:zz,radius:Iz,lowThreshold:Bz,highThreshold:Vz,clipLimit:Uz,tileSize:Hz,operation:$z,kernelShape:Xz,waveletType:Yz,decompositionLevel:Gz,selectFilterType:qz,selectFilterFirst:Wz,filterApplied:Kz,applyFilter:Zz,scanProtocolManagement:Qz,new:"New",editProtocol:Jz,newProtocol:e6,enterProtocolName:t6,description:n6,enterDescription:i6,confirmDeleteProtocol:r6,protocolApplied:s6,protocolsImported:a6,noProtocols:o6,apply:l6,edit:c6,duplicate:u6,delete:"Delete",lastUsed:d6,never:h6,realtimeMonitoring:f6,tubeTempHigh:m6,powerHigh:g6,coolingFlowLow:p6,tubeTemp:x6,last20s:y6,detectorTemp:b6,coolingFlow:v6,dataRate:w6,systemLoad:S6,acquisitionProgress:C6,imagesAcquired:k6,estimatedTimeRemaining:T6,imageViewer:j6,original:_6,processed:N6,compareImages:E6,noImageLoaded:M6,uploadImage:O6,imageStatistics:D6,processingHistory:A6,quickFilters:R6,transformations:P6,adjustments:L6,invert:F6,flipVertical:z6,contrast:I6,processing:B6,autoProcess:V6,filters:U6,waitingForImage:H6,applyFilters:$6,liveProcessing:X6,imageProcessing:Y6,crosshairTool:G6,crosshair:q6,roiCrosshair:W6,requirement22:K6,lineColor:Z6,lineWidth:Q6,extendBeyondROI:J6,showCenterMarker:eI,showCrosshair:tI,selectROI:nI,allROIs:iI,noROIsDetected:rI,drawROIOnCanvas:sI,detectedROIs:aI,roisDetected:oI,crosshairInfo:lI,toCrosshair:cI,pixelCoordinate:uI,pixelCoordinateTool:dI,requirement23:hI,pixelCoordinateInfo:fI,pixelCoordinateDescription:mI,showCoordinates:gI,displayMode:pI,tooltip:xI,hud:yI,hudPosition:bI,showPixelValue:vI,textColor:wI,backgroundColor:SI,fontSize:CI,toTogglePixelCoordinates:kI,yes:TI,no:jI,opacity:_I,centerMarkerColor:NI,centerMarkerSize:EI},OI="خانه",DI="تنظیمات",AI="اولیه",RI="موقعیت",PI="پروجکشن",LI="پس‌پردازش",FI="بازسازی",zI="وضعیت سیستم و هشدارها",II="وضعیت مولد پرتوی ایکس",BI="پرتوی ایکس روشن",VI="پرتوی ایکس خاموش",UI="هشدار: پرتوی ایکس فعال است!",HI="دوربین",$I="نمایش پروجکشن",XI="نوار تصاویر",YI="هیستوگرام",GI="تغییر تم",qI="برش",WI="قلم",KI="پاک‌کن",ZI="دایره",QI="مستطیل",JI="نمودار خطی",eB="خط",tB="جابجایی",nB="بزرگنمایی",iB="کوچک‌نمایی",rB="صفحه اصلی",sB="به صفحه اصلی خوش آمدید! این صفحه با تم کلی برنامه طراحی شده است.",aB="صفحه تنظیمات",oB="این صفحه تنظیمات است. اینجا می‌توانید تنظیمات خود را انجام دهید.",lB="تغییر به حالت {{mode}}",cB="نمایش ورودی‌ها",uB="چک‌باکس‌ها",dB="چک‌باکس ۱",hB="چک‌باکس ۲ (پیش‌فرض انتخاب‌شده)",fB="چک‌باکس (غیرفعال)",mB="تأیید",gB="ورودی غیرفعال",pB="ورودی‌ها",xB="ورودی متنی",yB="ورودی عددی",bB="ورودی ایمیل",vB="ذخیره {{label}}",wB="متن طولانی",SB="متن خود را اینجا وارد کنید...",CB="ذخیره متن طولانی",kB="سایر ورودی‌ها",TB="دکمه‌های رادیویی",jB="گزینه ۱",_B="گزینه ۲",NB="منوی کشویی",EB="یک گزینه انتخاب کنید",MB="آپلود فایل",OB="انتخاب‌شده: {{name}}",DB="ورودی رمز عبور",AB="رمز عبور را وارد کنید",RB="اسلایدر محدوده",PB="انتخاب‌گر رنگ",LB="انتخاب‌گر تاریخ",FB="نمایش دکمه آیکون",zB="نوع {{variant}}",IB="اندازه: {{size}} (عادی)",BB="اندازه: {{size}} (غیرفعال)",VB="{{variant}} {{size}} کلیک شد!",UB="اجرا",HB="پارامترهای اولیه",$B="نام",XB="ایمیل",YB="نام خود را وارد کنید",GB="ایمیل خود را وارد کنید",qB="موقعیت X",WB="موقعیت Y",KB="فعال کردن فیلتر",ZB="در حال اتصال به WebSocket...",QB="تم",JB="زبان",eV="تیره",tV="روشن",nV="جمع‌آوری پروجکشن",iV="موفقیت",rV="داده‌های فرم با موفقیت ارسال شد",sV="خطا",aV="هیچ داده‌ای برای ارسال وجود ندارد",oV="آیا مطمئن هستید؟",lV="لغو",cV="در حال ارسال...",uV="هیچ داده‌ای برای ارسال وجود ندارد",dV="پارامترهای اولیه نامعتبر هستند",hV="توان",fV="مقدار توان را وارد کنید (وات)",mV="ولتاژ تیوب",gV="مقدار ولتاژ تیوب را وارد کنید (kVp)",pV="جریان آند",xV="مقدار جریان آند را وارد کنید",yV="فیلتراسیون",bV="آلومینیوم",vV="مس",wV="نقره",SV="ضخامت فیلتر را وارد کنید (mm)",CV="زمان نوردهی",kV="عمق بیت",TV="وضعیت تیوب",jV="منیپولیتور",_V=" X",NV=" Y",EV=" Z",MV=" تتا",OV=" گاما",DV="سرعت جوی‌استیک",AV="کم",RV="متوسط",PV="زیاد",LV="وضعیت دوربین کابین",FV="پیش‌تنظیم استاندارد",zV="پیش‌تنظیم قدرت بالا",IV="پاک کردن همه",BV="ولتاژ",VV="جریان",UV="فعال",HV="غیرفعال",$V="به WebSocket متصل شد",XV="تصویربرداری سریع",YV="سرعت چرخش",GV="سرعت چرخش را وارد کنید",qV="انرژی دوگانه",WV="کالیبراسیون تک",KV="کالیبراسیون تک را وارد کنید",ZV="کالیبراسیون چرخشی",QV="کالیبراسیون چرخشی را وارد کنید",JV="فایل انتخاب‌شده",eU="موقعیت X را وارد کنید",tU="موقعیت Y را وارد کنید",nU="موقعیت Z را وارد کنید",iU="زاویه تتا را وارد کنید",rU="زاویه گاما را وارد کنید",sU="حالت تصویربرداری",aU="اندازه چند بخشی",oU="اندازه چند بخشی را وارد کنید",lU="تنظیمات تصویر",cU="بهره",uU="آفست",dU="پیش‌پردازش",hU="HDR",fU="سطح انرژی ۱",mU="سطح انرژی ۲",gU="سطح انرژی ۱ را وارد کنید",pU="سطح انرژی ۲ را وارد کنید",xU="تعداد تصویر",yU="تعداد تصویر را وارد کنید",bU="تبدیل تصویر",vU="هیچ",wU="عملیات پایه",SU="نرمال‌سازی",CU="تبدیل فوریه",kU="تبدیل فوریه معکوس",TU="فیلتر فوریه",jU="پایین‌گذر",_U="باند‌گذر",NU="بالا‌گذر",EU="اعمال فیلتر فوریه",MU="خروجی تصویر",OU="TIFF",DU="JPG",AU="DICOM",RU="فیلترهای تصویر",PU="فیلتر میانه",LU="فیلتر میانگین",FU="فیلتر واریانس",zU="فیلتر رنگ کاذب",IU="فیلتر گاوسی",BU="سیگما گاوسی را وارد کنید",VU="تیزسازی",UU="اندازه کرنل",HU="قدرت تیزسازی",$U="قدرت تیزسازی را وارد کنید",XU="تشخیص لبه",YU="آستانه",GU="آستانه را وارد کنید",qU="روش تشخیص لبه",WU="سوبل",KU="کنی",ZU="پرویت",QU="باشه",JU="ارسال داده ناموفق بود",eH="سیاه و سفید",tH="حرکت",nH="بازگشت",iH="بررسی پایداری سیستم",rH="قفل ایمنی",sH="دما",aH="فشار",oH="سیستم خنک‌کننده",lH="نظارت لحظه‌ای بر پارامترهای حیاتی سیستم",cH="لاگ تیوب پرتوی ایکس و نوردهی",uH="زمان",dH="دانلود",hH="پاک کردن",fH="توقف",mH="ادامه",gH="متوقف شده",pH="تعداد کل لاگ‌ها",xH="هنوز لاگی ثبت نشده است",yH="اندازه گام",bH="حرکت خطی",vH="حرکت چرخشی",wH="کنترل",SH="ورودی دستی",CH="موقعیت‌های ذخیره شده",kH="حرکات دقیق، بهترین برای تنظیم ظریف",TH="سرعت متعادل برای موقعیت‌یابی عمومی",jH="حرکات سریع برای تنظیمات بزرگ",_H="سرعت فعلی",NH="روشن کردن",EH="خاموش کردن",MH="دوربین خاموش است",OH="برای فعال‌سازی دوربین روی 'روشن کردن' کلیک کنید",DH="در حال اتصال به دوربین...",AH="خطا در اتصال دوربین",RH="لطفاً اتصال دوربین را بررسی کنید",PH="تلاش مجدد",LH="بارگذاری مجدد",FH="تمام صفحه",zH="خروج از تمام صفحه",IH="رزولوشن",BH="نرخ فریم",VH="نوردهی",UH="روشنایی",HH="تعریف مسیر حرکت",$H="انتخاب نوع مسیر",XH="گام‌های زاویه‌ای گسسته",YH="حرکت دایره‌ای پیوسته",GH="مسیر مارپیچ برای اجسام بلند",qH="مسیر سفارشی دلخواه",WH="پارامترهای مسیر",KH="تعداد گام‌ها",ZH="زاویه در هر گام",QH="زاویه شروع",JH="زاویه پایان",e8="گام مارپیچ",t8="گام‌های ارتفاع",n8="از طراح مسیر استفاده کنید یا نقاط سفارشی وارد کنید",i8="باز کردن طراح مسیر",r8="مسیرهای ذخیره شده",s8="نام مسیر را وارد کنید",a8="پیکربندی هندسه",o8="کالیبراسیون",l8="سیستم کالیبره شد",c8="آخرین کالیبراسیون",u8="دقت هندسی",d8="پارامترهای فاصله",h8="پارامترهای آشکارساز",f8="عرض آشکارساز",m8="ارتفاع آشکارساز",g8="گام پیکسل",p8="مقادیر محاسبه شده",x8="بزرگنمایی",y8="اندازه مؤثر پیکسل",b8="عرض",v8="ارتفاع",w8="پارامترهای اضافی",S8="زاویه باریکه مخروطی",C8="اندازه نقطه کانونی",k8="تنظیمات جمع‌آوری",T8="شروع",j8="توقف",_8="ریست",N8="در حال جمع‌آوری",E8="تکمیل شد",M8="حالت چرخش",O8="چرخش نیم دور",D8="چرخش کامل",A8="تصویربرداری چند بخشی",R8="تعداد بخش‌ها",P8="همپوشانی",L8="ارتفاع کل",F8="تعداد پروجکشن‌ها",z8="نوردهی در هر پروجکشن",I8="خلاصه جمع‌آوری",B8="حالت",V8="بخش‌ها",U8="کل پروجکشن‌ها",H8="زمان تخمینی",$8="بازخورد موقعیت",X8="نمایش موقعیت لحظه‌ای",Y8="موقعیت هدف",G8="موقعیت فعلی",q8="خطای موقعیت",W8="تصویربرداری آشکارساز خطی",K8="حالت آشکارساز خطی",Z8="ارتفاع اسکن",Q8="اندازه گام عمودی",J8="همپوشانی بخیه‌دوزی",e$="زمان تخمینی اسکن",t$="سیستم کالیبراسیون",n$="نوع کالیبراسیون",i$="کالیبراسیون تصویر تکی",r$="کالیبراسیون چرخشی",s$="گرفتن تصویر کالیبراسیون",a$="شروع اسکن کالیبراسیون",o$="وضعیت کالیبراسیون",l$="کالیبره نشده",c$="در حال کالیبراسیون",u$="کالیبره شده",d$="تاریخ کالیبراسیون",h$="کیفیت کالیبراسیون",f$="کالیبراسیون مجدد",m$="ارزیابی کیفیت تصویر",g$="کیفیت کلی",p$="عالی",x$="خوب",y$="نیاز به بهبود",b$="رزولوشن فضایی",v$="یکنواختی",w$="آرتیفکت‌ها",S$="آخرین ارزیابی",C$="تعداد ارزیابی‌ها",k$="برای شروع ارزیابی کیفیت روی 'شروع ارزیابی' کلیک کنید",T$="پیکربندی آشکارساز",j$="وضعیت آشکارساز",_$="نویز خواندن",N$="جریان تاریک",E$="تنظیمات سخت‌افزاری",M$="بایننگ پیکسل",O$="حالت خواندن",D$="دمای خنک‌کننده",A$="حالت بهره",R$="تنظیمات تصویربرداری",P$="حالت تریگر",L$="تنظیمات پردازش",F$="تصحیح فریم تاریک",z$="تصحیح میدان تخت",I$="تصحیح پیکسل خراب",B$="تصحیح تاخیر",V$="تنظیمات با موفقیت ذخیره شد",U$="تنظیمات با موفقیت وارد شد",H$="فیلترهای پیشرفته",$$="کاهش نویز",X$="تقویت لبه",Y$="یکسان‌سازی هیستوگرام",G$="مورفولوژی",q$="موجک",W$="روش",K$="قدرت",Z$="مقدار",Q$="شعاع",J$="آستانه پایین",e9="آستانه بالا",t9="محدودیت کلیپ",n9="اندازه تایل",i9="عملیات",r9="شکل کرنل",s9="نوع موجک",a9="سطح تجزیه",o9="یک نوع فیلتر را برای تنظیمات انتخاب کنید",l9="لطفاً ابتدا یک فیلتر را انتخاب کنید",c9="فیلتر با موفقیت اعمال شد",u9="اعمال فیلتر",d9="مدیریت پروتکل اسکن",h9="ویرایش پروتکل",f9="پروتکل جدید",m9="نام پروتکل را وارد کنید",g9="توضیحات",p9="توضیحات را وارد کنید",x9="آیا مطمئن هستید که می‌خواهید این پروتکل را حذف کنید؟",y9="پروتکل با موفقیت اعمال شد",b9="پروتکل‌ها با موفقیت وارد شدند",v9="هیچ پروتکلی موجود نیست",w9="اعمال",S9="ویرایش",C9="کپی",k9="آخرین استفاده",T9="هرگز",j9="داشبورد نظارت لحظه‌ای",_9="دمای تیوب بالا است",N9="توان پرتوی ایکس بالا است",E9="جریان خنک‌کننده پایین است",M9="دمای تیوب",O9="۲۰ ثانیه اخیر",D9="دمای آشکارساز",A9="جریان خنک‌کننده",R9="نرخ داده",P9="بار سیستم",L9="پیشرفت جمع‌آوری",F9="تصاویر جمع‌آوری شده",z9="زمان تخمینی باقی‌مانده",I9="نمایشگر تصویر",B9="اصلی",V9="پردازش شده",U9="مقایسه تصاویر",H9="هیچ تصویری بارگذاری نشده",$9="آپلود تصویر",X9="آمار تصویر",Y9="تاریخچه پردازش",G9="فیلترهای سریع",q9="تبدیلات",W9="تنظیمات",K9="معکوس",Z9="آینه عمودی",Q9="کنتراست",J9="در حال پردازش",e7="پردازش خودکار",t7="فیلترها",n7="در انتظار تصویر",i7="اعمال فیلترها",r7="پردازش زنده",s7="پردازش تصویر",a7="ابزار خطوط متقاطع",o7="خطوط متقاطع",l7="خطوط متقاطع ROI",c7="مورد 22",u7="رنگ خط",d7="ضخامت خط",h7="گسترش خارج از ROI",f7="نمایش نشانگر مرکز",m7="نمایش خطوط متقاطع",g7="انتخاب ROI",p7="همه ROIها",x7="هیچ ROI شناسایی نشد",y7="یک مستطیل یا دایره روی بوم ترسیم کنید تا ROI ایجاد شود.",b7="{{count}} ROI شناسایی شد",v7="ROI شناسایی شد",w7="خطوط متقاطع از مرکز هر ROI عبور خواهند کرد.",S7="برای فعال/غیرفعال کردن خطوط متقاطع",C7="مختصات پیکسل",k7="ابزار مختصات پیکسل",T7="مورد 23",j7="مختصات پیکسل",_7="ماوس خود را روی بوم حرکت دهید تا مختصات پیکسل (X,Y) و مقدار خاکستری را ببینید.",N7="نمایش مختصات",E7="حالت نمایش",M7="راهنمای ابزار",O7="نمایشگر سربرگ",D7="موقعیت نمایشگر",A7="نمایش مقدار خاکستری",R7="رنگ متن",P7="رنگ پس‌زمینه",L7="اندازه فونت",F7="برای فعال/غیرفعال کردن مختصات پیکسل",z7="بله",I7="خیر",B7="شفافیت",V7="رنگ نشانگر مرکز",U7="اندازه نشانگر مرکز",H7={home:OI,settings:DI,initial:AI,position:RI,projection:PI,postProcessing:LI,reconstruction:FI,systemStatus:zI,xrayStatus:II,xrayOn:BI,xrayOff:VI,xraySafetyWarning:UI,camera:HI,projectionDisplay:$I,imageReel:XI,histogram:YI,toggleTheme:GI,crop:qI,brush:WI,eraser:KI,circle:ZI,rectangle:QI,lineChart:JI,line:eB,move:tB,zoomIn:nB,zoomOut:iB,homePage:rB,welcome:sB,settingsPage:aB,settingsDescription:oB,switchTo:lB,inputShowcase:cB,checkboxes:uB,checkbox1:dB,checkbox2:hB,disabledCheckbox:fB,confirm:mB,disabledInput:gB,inputs:pB,textInput:xB,numberInput:yB,emailInput:bB,save:vB,textarea:wB,enterText:SB,saveTextarea:CB,otherInputs:kB,radioButtons:TB,option1:jB,option2:_B,selectDropdown:NB,selectOption:EB,uploadFile:MB,selected:OB,passwordInput:DB,enterPassword:AB,rangeSlider:RB,colorPicker:PB,datePicker:LB,iconButtonShowcase:FB,variant:zB,sizeNormal:IB,sizeDisabled:BB,clicked:VB,run:UB,initialParameters:HB,name:$B,email:XB,enterName:YB,enterEmail:GB,xPosition:qB,yPosition:WB,enableFilter:KB,websocketConnecting:ZB,theme:QB,language:JB,dark:eV,light:tV,projectionAcquisition:nV,success:iV,dataSubmittedSuccessfully:rV,error:sV,noDataToSubmit:aV,areYouSure:oV,cancel:lV,sendingData:cV,noDataAvailable:uV,invalidInitialParameters:dV,power:hV,enterPower:fV,tubeVoltage:mV,enterTubeVoltage:gV,anodeCurrent:pV,enterAnodeCurrent:xV,filtration:yV,aluminum:bV,copper:vV,silver:wV,enterThickness:SV,exposureTime:CV,bitDepth:kV,"8bit":"8 بیت","16bit":"16 بیت",tubeStatus:TV,manipulator:jV,manipulatorX:_V,manipulatorY:NV,manipulatorZ:EV,manipulatorTheta:MV,manipulatorGamma:OV,joystickSpeed:DV,joystickSpeedLow:AV,joystickSpeedMedium:RV,joystickSpeedHigh:PV,cabinCameraStatus:LV,presetStandard:FV,presetHighPower:zV,clearAll:IV,voltage:BV,current:VV,active:UV,inactive:HV,websocketConnected:$V,fastImaging:XV,rotationSpeed:YV,enterRotationSpeed:GV,dualEnergy:qV,singleCalibration:WV,enterSingleCalibration:KV,rotateCalibration:ZV,enterRotateCalibration:QV,selectedFile:JV,enterManipulatorX:eU,enterManipulatorY:tU,enterManipulatorZ:nU,enterManipulatorTheta:iU,enterManipulatorGamma:rU,"180degree":"۱۸۰ درجه","360degree":"۳۶۰ درجه",imagingMode:sU,multiSegmentSize:aU,enterMultiSegmentSize:oU,imageAdjustments:lU,gain:cU,offset:uU,preprocess:dU,hdr:hU,energyLevel1:fU,energyLevel2:mU,enterEnergyLevel1:gU,enterEnergyLevel2:pU,imageCount:xU,enterImageCount:yU,imageTransform:bU,none:vU,"90degree":"۹۰ درجه","270degree":"۲۷۰ درجه",basicOperations:wU,normalize:SU,fft:CU,fftInverse:kU,fourierFilter:TU,lowPass:jU,bandPass:_U,highPass:NU,applyFourierFilter:EU,exportImage:MU,export:"خروجی",tiff:OU,jpg:DU,dicom:AU,imageFilters:RU,medianFilter:PU,meanFilter:LU,varianceFilter:FU,pseudoColorFilter:zU,gaussianFilter:IU,enterGaussianSigma:BU,sharpening:VU,kernelSize:UU,sharpeningStrength:HU,enterSharpeningStrength:$U,edgeDetection:XU,threshold:YU,enterThreshold:GU,edgeMethod:qU,sobel:WU,canny:KU,prewitt:ZU,ok:QU,failedToSendData:JU,grayscale:eH,pan:tH,undo:nH,systemStabilityCheck:iH,interlock:rH,temperature:sH,pressure:aH,coolingSystem:oH,stabilityCheckDescription:lH,xrayExposureLog:cH,time:uH,download:dH,clear:hH,pause:fH,resume:mH,paused:gH,totalLogs:pH,noLogsYet:xH,stepSize:yH,linearMovement:bH,rotationalMovement:vH,control:wH,manualInput:SH,savedPositions:CH,lowSpeedDesc:kH,mediumSpeedDesc:TH,highSpeedDesc:jH,currentSpeed:_H,turnOn:NH,turnOff:EH,cameraOff:MH,clickTurnOn:OH,connectingToCamera:DH,cameraError:AH,checkCameraConnection:RH,retry:PH,refresh:LH,fullscreen:FH,exitFullscreen:zH,resolution:IH,frameRate:BH,exposure:VH,brightness:UH,trajectoryDefinition:HH,import:"وارد کردن",selectTrajectoryType:$H,stepwiseDesc:XH,circularDesc:YH,helicalDesc:GH,arbitraryDesc:qH,trajectoryParameters:WH,numberOfSteps:KH,anglePerStep:ZH,startAngle:QH,endAngle:JH,helixPitch:e8,heightSteps:t8,arbitraryTrajectoryInfo:n8,openDesigner:i8,savedTrajectories:r8,enterTrajectoryName:s8,geometryConfiguration:a8,calibrate:o8,systemCalibrated:l8,lastCalibration:c8,geometricAccuracy:u8,distanceParameters:d8,detectorParameters:h8,detectorWidth:f8,detectorHeight:m8,pixelPitch:g8,calculatedValues:p8,magnification:x8,effectivePixelSize:y8,width:b8,height:v8,additionalParameters:w8,coneBeamAngle:S8,focalSpotSize:C8,acquisitionSettings:k8,start:T8,stop:j8,reset:_8,acquiring:N8,completed:E8,rotationMode:M8,halfRotation:O8,fullRotation:D8,multiSegmentImaging:A8,numberOfSegments:R8,segmentOverlap:P8,totalHeight:L8,numberOfProjections:F8,exposurePerProjection:z8,acquisitionSummary:I8,mode:B8,segments:V8,totalProjections:U8,estimatedTime:H8,positionFeedback:$8,realTimePosition:X8,targetPosition:Y8,currentPosition:G8,positionError:q8,linearDetectorImaging:W8,linearDetectorMode:K8,scanHeight:Z8,verticalStepSize:Q8,stitchingOverlap:J8,estimatedScanTime:e$,calibrationSystem:t$,calibrationType:n$,singleImageCalibration:i$,rotationalCalibration:r$,captureCalibrationImage:s$,startCalibrationScan:a$,calibrationStatus:o$,notCalibrated:l$,calibrating:c$,calibrated:u$,calibrationDate:d$,calibrationQuality:h$,recalibrate:f$,imageQualityAssessment:m$,overallQuality:g$,excellent:p$,good:x$,needsImprovement:y$,spatialResolution:b$,uniformity:v$,artifacts:w$,lastAssessment:S$,assessments:C$,startAssessmentMessage:k$,detectorConfiguration:T$,detectorStatus:j$,readoutNoise:_$,darkCurrent:N$,hardwareSettings:E$,binning:M$,readoutMode:O$,coolingTemperature:D$,gainMode:A$,imagingSettings:R$,triggerMode:P$,processingSettings:L$,darkFrameCorrection:F$,flatFieldCorrection:z$,badPixelCorrection:I$,lagCorrection:B$,settingsSaved:V$,settingsImported:U$,advancedFiltering:H$,denoising:$$,edgeEnhancement:X$,histogramEqualization:Y$,morphology:G$,wavelet:q$,method:W$,strength:K$,amount:Z$,radius:Q$,lowThreshold:J$,highThreshold:e9,clipLimit:t9,tileSize:n9,operation:i9,kernelShape:r9,waveletType:s9,decompositionLevel:a9,selectFilterType:o9,selectFilterFirst:l9,filterApplied:c9,applyFilter:u9,scanProtocolManagement:d9,new:"جدید",editProtocol:h9,newProtocol:f9,enterProtocolName:m9,description:g9,enterDescription:p9,confirmDeleteProtocol:x9,protocolApplied:y9,protocolsImported:b9,noProtocols:v9,apply:w9,edit:S9,duplicate:C9,delete:"حذف",lastUsed:k9,never:T9,realtimeMonitoring:j9,tubeTempHigh:_9,powerHigh:N9,coolingFlowLow:E9,tubeTemp:M9,last20s:O9,detectorTemp:D9,coolingFlow:A9,dataRate:R9,systemLoad:P9,acquisitionProgress:L9,imagesAcquired:F9,estimatedTimeRemaining:z9,imageViewer:I9,original:B9,processed:V9,compareImages:U9,noImageLoaded:H9,uploadImage:$9,imageStatistics:X9,processingHistory:Y9,quickFilters:G9,transformations:q9,adjustments:W9,invert:K9,flipVertical:Z9,contrast:Q9,processing:J9,autoProcess:e7,filters:t7,waitingForImage:n7,applyFilters:i7,liveProcessing:r7,imageProcessing:s7,crosshairTool:a7,crosshair:o7,roiCrosshair:l7,requirement22:c7,lineColor:u7,lineWidth:d7,extendBeyondROI:h7,showCenterMarker:f7,showCrosshair:m7,selectROI:g7,allROIs:p7,noROIsDetected:x7,drawROIOnCanvas:y7,detectedROIs:b7,roisDetected:v7,crosshairInfo:w7,toCrosshair:S7,pixelCoordinate:C7,pixelCoordinateTool:k7,requirement23:T7,pixelCoordinateInfo:j7,pixelCoordinateDescription:_7,showCoordinates:N7,displayMode:E7,tooltip:M7,hud:O7,hudPosition:D7,showPixelValue:A7,textColor:R7,backgroundColor:P7,fontSize:L7,toTogglePixelCoordinates:F7,yes:z7,no:I7,opacity:B7,centerMarkerColor:V7,centerMarkerSize:U7},$7={en:{translation:MI},fa:{translation:H7}};Qt.use(Jw).use(aT).init({resources:$7,fallbackLng:"en",supportedLngs:["en","fa"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},debug:!1,saveMissing:!1,missingKeyHandler:!1}).catch(t=>{console.error("i18next initialization error:",t)});const X7=N.createContext(),Y7=({children:t})=>{const[e,r]=N.useState(null);return N.useEffect(()=>{const o=()=>{window.qt&&window.qt.webChannelTransport&&window.QWebChannel?new window.QWebChannel(window.qt.webChannelTransport,x=>{var v;(v=x==null?void 0:x.objects)!=null&&v.backend?r(x.objects.backend):console.error("WebChannel backend object not found.")}):setTimeout(o,100)};o()},[]),g.jsx(X7.Provider,{value:{backend:e},children:t})};C2.createRoot(document.getElementById("root")).render(g.jsx(Bk,{children:g.jsx(AR,{children:g.jsx(NR,{children:g.jsx(Y7,{children:g.jsx(fT,{children:g.jsx(j_,{children:g.jsx(S_,{children:g.jsx(hR,{children:g.jsx(gR,{children:g.jsx(V_,{children:g.jsx(aR,{children:g.jsx(zR,{})})})})})})})})})})})}));
